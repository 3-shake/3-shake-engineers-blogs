<!DOCTYPE html><html lang="ja"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="icon shortcut" type="image/png" href="https://blog.3-shake.com/logo.png"/><title>Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π | 3-shake Engineers&#x27; Blogs</title><meta property="og:title" content="Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π"/><meta property="og:url" content="https://blog.3-shake.com/members/hiroki-hasegawa"/><meta name="twitter:card" content="summary_large_image"/><meta property="og:site" content="3-shake Engineers&#x27; Blogs"/><meta property="og:image" content="https://blog.3-shake.com/og.png"/><link rel="canonical" href="https://blog.3-shake.com/members/hiroki-hasegawa"/><meta name="next-head-count" content="10"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><link rel="preload" href="/_next/static/css/ca0df06cc4f85fc8.css" as="style"/><link rel="stylesheet" href="/_next/static/css/ca0df06cc4f85fc8.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-b8f8d6679aaa5f42.js" defer=""></script><script src="/_next/static/chunks/framework-2c79e2a64abdb08b.js" defer=""></script><script src="/_next/static/chunks/main-b671ab60a2eabb59.js" defer=""></script><script src="/_next/static/chunks/pages/_app-aef75d70891be704.js" defer=""></script><script src="/_next/static/chunks/983-dbacfe3d98616b84.js" defer=""></script><script src="/_next/static/chunks/pages/members/%5Bid%5D-fa4563d96c58aa0a.js" defer=""></script><script src="/_next/static/A15k4OyZ31AG-4RRHRo6F/_buildManifest.js" defer=""></script><script src="/_next/static/A15k4OyZ31AG-4RRHRo6F/_ssgManifest.js" defer=""></script><style data-href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;500;700&family=Roboto:wght@300;400;500;700&display=swap">@font-face{font-family:'Open Sans';font-style:normal;font-weight:400;font-stretch:normal;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v43/memSYaGs126MiZpBA-UvWbX2vVnXBbObj2OVZyOOSr4dVJWUgsjZ0C4k.woff) format('woff')}@font-face{font-family:'Open Sans';font-style:normal;font-weight:500;font-stretch:normal;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v43/memSYaGs126MiZpBA-UvWbX2vVnXBbObj2OVZyOOSr4dVJWUgsjr0C4k.woff) format('woff')}@font-face{font-family:'Open Sans';font-style:normal;font-weight:700;font-stretch:normal;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v43/memSYaGs126MiZpBA-UvWbX2vVnXBbObj2OVZyOOSr4dVJWUgsg-1y4k.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-stretch:normal;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFOMCnqEu92Fr1ME7kSn66aGLdTylUAMQXC89YmC2DPNWuaabWmQ.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-stretch:normal;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFOMCnqEu92Fr1ME7kSn66aGLdTylUAMQXC89YmC2DPNWubEbWmQ.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-stretch:normal;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFOMCnqEu92Fr1ME7kSn66aGLdTylUAMQXC89YmC2DPNWub2bWmQ.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-stretch:normal;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFOMCnqEu92Fr1ME7kSn66aGLdTylUAMQXC89YmC2DPNWuYjammQ.woff) format('woff')}@font-face{font-family:'Open Sans';font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v43/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSKmu0SC55K5gw.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Open Sans';font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v43/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSumu0SC55K5gw.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Open Sans';font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v43/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSOmu0SC55K5gw.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Open Sans';font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v43/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSymu0SC55K5gw.woff2) format('woff2');unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:'Open Sans';font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v43/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTS2mu0SC55K5gw.woff2) format('woff2');unicode-range:U+0307-0308,U+0590-05FF,U+200C-2010,U+20AA,U+25CC,U+FB1D-FB4F}@font-face{font-family:'Open Sans';font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v43/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTVOmu0SC55K5gw.woff2) format('woff2');unicode-range:U+0302-0303,U+0305,U+0307-0308,U+0310,U+0312,U+0315,U+031A,U+0326-0327,U+032C,U+032F-0330,U+0332-0333,U+0338,U+033A,U+0346,U+034D,U+0391-03A1,U+03A3-03A9,U+03B1-03C9,U+03D1,U+03D5-03D6,U+03F0-03F1,U+03F4-03F5,U+2016-2017,U+2034-2038,U+203C,U+2040,U+2043,U+2047,U+2050,U+2057,U+205F,U+2070-2071,U+2074-208E,U+2090-209C,U+20D0-20DC,U+20E1,U+20E5-20EF,U+2100-2112,U+2114-2115,U+2117-2121,U+2123-214F,U+2190,U+2192,U+2194-21AE,U+21B0-21E5,U+21F1-21F2,U+21F4-2211,U+2213-2214,U+2216-22FF,U+2308-230B,U+2310,U+2319,U+231C-2321,U+2336-237A,U+237C,U+2395,U+239B-23B7,U+23D0,U+23DC-23E1,U+2474-2475,U+25AF,U+25B3,U+25B7,U+25BD,U+25C1,U+25CA,U+25CC,U+25FB,U+266D-266F,U+27C0-27FF,U+2900-2AFF,U+2B0E-2B11,U+2B30-2B4C,U+2BFE,U+3030,U+FF5B,U+FF5D,U+1D400-1D7FF,U+1EE00-1EEFF}@font-face{font-family:'Open Sans';font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v43/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTUGmu0SC55K5gw.woff2) format('woff2');unicode-range:U+0001-000C,U+000E-001F,U+007F-009F,U+20DD-20E0,U+20E2-20E4,U+2150-218F,U+2190,U+2192,U+2194-2199,U+21AF,U+21E6-21F0,U+21F3,U+2218-2219,U+2299,U+22C4-22C6,U+2300-243F,U+2440-244A,U+2460-24FF,U+25A0-27BF,U+2800-28FF,U+2921-2922,U+2981,U+29BF,U+29EB,U+2B00-2BFF,U+4DC0-4DFF,U+FFF9-FFFB,U+10140-1018E,U+10190-1019C,U+101A0,U+101D0-101FD,U+102E0-102FB,U+10E60-10E7E,U+1D2C0-1D2D3,U+1D2E0-1D37F,U+1F000-1F0FF,U+1F100-1F1AD,U+1F1E6-1F1FF,U+1F30D-1F30F,U+1F315,U+1F31C,U+1F31E,U+1F320-1F32C,U+1F336,U+1F378,U+1F37D,U+1F382,U+1F393-1F39F,U+1F3A7-1F3A8,U+1F3AC-1F3AF,U+1F3C2,U+1F3C4-1F3C6,U+1F3CA-1F3CE,U+1F3D4-1F3E0,U+1F3ED,U+1F3F1-1F3F3,U+1F3F5-1F3F7,U+1F408,U+1F415,U+1F41F,U+1F426,U+1F43F,U+1F441-1F442,U+1F444,U+1F446-1F449,U+1F44C-1F44E,U+1F453,U+1F46A,U+1F47D,U+1F4A3,U+1F4B0,U+1F4B3,U+1F4B9,U+1F4BB,U+1F4BF,U+1F4C8-1F4CB,U+1F4D6,U+1F4DA,U+1F4DF,U+1F4E3-1F4E6,U+1F4EA-1F4ED,U+1F4F7,U+1F4F9-1F4FB,U+1F4FD-1F4FE,U+1F503,U+1F507-1F50B,U+1F50D,U+1F512-1F513,U+1F53E-1F54A,U+1F54F-1F5FA,U+1F610,U+1F650-1F67F,U+1F687,U+1F68D,U+1F691,U+1F694,U+1F698,U+1F6AD,U+1F6B2,U+1F6B9-1F6BA,U+1F6BC,U+1F6C6-1F6CF,U+1F6D3-1F6D7,U+1F6E0-1F6EA,U+1F6F0-1F6F3,U+1F6F7-1F6FC,U+1F700-1F7FF,U+1F800-1F80B,U+1F810-1F847,U+1F850-1F859,U+1F860-1F887,U+1F890-1F8AD,U+1F8B0-1F8BB,U+1F8C0-1F8C1,U+1F900-1F90B,U+1F93B,U+1F946,U+1F984,U+1F996,U+1F9E9,U+1FA00-1FA6F,U+1FA70-1FA7C,U+1FA80-1FA89,U+1FA8F-1FAC6,U+1FACE-1FADC,U+1FADF-1FAE9,U+1FAF0-1FAF8,U+1FB00-1FBFF}@font-face{font-family:'Open Sans';font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v43/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSCmu0SC55K5gw.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Open Sans';font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v43/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSGmu0SC55K5gw.woff2) format('woff2');unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Open Sans';font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v43/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTS-mu0SC55I.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Open Sans';font-style:normal;font-weight:500;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v43/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSKmu0SC55K5gw.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Open Sans';font-style:normal;font-weight:500;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v43/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSumu0SC55K5gw.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Open Sans';font-style:normal;font-weight:500;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v43/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSOmu0SC55K5gw.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Open Sans';font-style:normal;font-weight:500;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v43/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSymu0SC55K5gw.woff2) format('woff2');unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:'Open Sans';font-style:normal;font-weight:500;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v43/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTS2mu0SC55K5gw.woff2) format('woff2');unicode-range:U+0307-0308,U+0590-05FF,U+200C-2010,U+20AA,U+25CC,U+FB1D-FB4F}@font-face{font-family:'Open Sans';font-style:normal;font-weight:500;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v43/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTVOmu0SC55K5gw.woff2) format('woff2');unicode-range:U+0302-0303,U+0305,U+0307-0308,U+0310,U+0312,U+0315,U+031A,U+0326-0327,U+032C,U+032F-0330,U+0332-0333,U+0338,U+033A,U+0346,U+034D,U+0391-03A1,U+03A3-03A9,U+03B1-03C9,U+03D1,U+03D5-03D6,U+03F0-03F1,U+03F4-03F5,U+2016-2017,U+2034-2038,U+203C,U+2040,U+2043,U+2047,U+2050,U+2057,U+205F,U+2070-2071,U+2074-208E,U+2090-209C,U+20D0-20DC,U+20E1,U+20E5-20EF,U+2100-2112,U+2114-2115,U+2117-2121,U+2123-214F,U+2190,U+2192,U+2194-21AE,U+21B0-21E5,U+21F1-21F2,U+21F4-2211,U+2213-2214,U+2216-22FF,U+2308-230B,U+2310,U+2319,U+231C-2321,U+2336-237A,U+237C,U+2395,U+239B-23B7,U+23D0,U+23DC-23E1,U+2474-2475,U+25AF,U+25B3,U+25B7,U+25BD,U+25C1,U+25CA,U+25CC,U+25FB,U+266D-266F,U+27C0-27FF,U+2900-2AFF,U+2B0E-2B11,U+2B30-2B4C,U+2BFE,U+3030,U+FF5B,U+FF5D,U+1D400-1D7FF,U+1EE00-1EEFF}@font-face{font-family:'Open Sans';font-style:normal;font-weight:500;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v43/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTUGmu0SC55K5gw.woff2) format('woff2');unicode-range:U+0001-000C,U+000E-001F,U+007F-009F,U+20DD-20E0,U+20E2-20E4,U+2150-218F,U+2190,U+2192,U+2194-2199,U+21AF,U+21E6-21F0,U+21F3,U+2218-2219,U+2299,U+22C4-22C6,U+2300-243F,U+2440-244A,U+2460-24FF,U+25A0-27BF,U+2800-28FF,U+2921-2922,U+2981,U+29BF,U+29EB,U+2B00-2BFF,U+4DC0-4DFF,U+FFF9-FFFB,U+10140-1018E,U+10190-1019C,U+101A0,U+101D0-101FD,U+102E0-102FB,U+10E60-10E7E,U+1D2C0-1D2D3,U+1D2E0-1D37F,U+1F000-1F0FF,U+1F100-1F1AD,U+1F1E6-1F1FF,U+1F30D-1F30F,U+1F315,U+1F31C,U+1F31E,U+1F320-1F32C,U+1F336,U+1F378,U+1F37D,U+1F382,U+1F393-1F39F,U+1F3A7-1F3A8,U+1F3AC-1F3AF,U+1F3C2,U+1F3C4-1F3C6,U+1F3CA-1F3CE,U+1F3D4-1F3E0,U+1F3ED,U+1F3F1-1F3F3,U+1F3F5-1F3F7,U+1F408,U+1F415,U+1F41F,U+1F426,U+1F43F,U+1F441-1F442,U+1F444,U+1F446-1F449,U+1F44C-1F44E,U+1F453,U+1F46A,U+1F47D,U+1F4A3,U+1F4B0,U+1F4B3,U+1F4B9,U+1F4BB,U+1F4BF,U+1F4C8-1F4CB,U+1F4D6,U+1F4DA,U+1F4DF,U+1F4E3-1F4E6,U+1F4EA-1F4ED,U+1F4F7,U+1F4F9-1F4FB,U+1F4FD-1F4FE,U+1F503,U+1F507-1F50B,U+1F50D,U+1F512-1F513,U+1F53E-1F54A,U+1F54F-1F5FA,U+1F610,U+1F650-1F67F,U+1F687,U+1F68D,U+1F691,U+1F694,U+1F698,U+1F6AD,U+1F6B2,U+1F6B9-1F6BA,U+1F6BC,U+1F6C6-1F6CF,U+1F6D3-1F6D7,U+1F6E0-1F6EA,U+1F6F0-1F6F3,U+1F6F7-1F6FC,U+1F700-1F7FF,U+1F800-1F80B,U+1F810-1F847,U+1F850-1F859,U+1F860-1F887,U+1F890-1F8AD,U+1F8B0-1F8BB,U+1F8C0-1F8C1,U+1F900-1F90B,U+1F93B,U+1F946,U+1F984,U+1F996,U+1F9E9,U+1FA00-1FA6F,U+1FA70-1FA7C,U+1FA80-1FA89,U+1FA8F-1FAC6,U+1FACE-1FADC,U+1FADF-1FAE9,U+1FAF0-1FAF8,U+1FB00-1FBFF}@font-face{font-family:'Open Sans';font-style:normal;font-weight:500;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v43/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSCmu0SC55K5gw.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Open Sans';font-style:normal;font-weight:500;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v43/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSGmu0SC55K5gw.woff2) format('woff2');unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Open Sans';font-style:normal;font-weight:500;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v43/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTS-mu0SC55I.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Open Sans';font-style:normal;font-weight:700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v43/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSKmu0SC55K5gw.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Open Sans';font-style:normal;font-weight:700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v43/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSumu0SC55K5gw.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Open Sans';font-style:normal;font-weight:700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v43/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSOmu0SC55K5gw.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Open Sans';font-style:normal;font-weight:700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v43/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSymu0SC55K5gw.woff2) format('woff2');unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:'Open Sans';font-style:normal;font-weight:700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v43/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTS2mu0SC55K5gw.woff2) format('woff2');unicode-range:U+0307-0308,U+0590-05FF,U+200C-2010,U+20AA,U+25CC,U+FB1D-FB4F}@font-face{font-family:'Open Sans';font-style:normal;font-weight:700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v43/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTVOmu0SC55K5gw.woff2) format('woff2');unicode-range:U+0302-0303,U+0305,U+0307-0308,U+0310,U+0312,U+0315,U+031A,U+0326-0327,U+032C,U+032F-0330,U+0332-0333,U+0338,U+033A,U+0346,U+034D,U+0391-03A1,U+03A3-03A9,U+03B1-03C9,U+03D1,U+03D5-03D6,U+03F0-03F1,U+03F4-03F5,U+2016-2017,U+2034-2038,U+203C,U+2040,U+2043,U+2047,U+2050,U+2057,U+205F,U+2070-2071,U+2074-208E,U+2090-209C,U+20D0-20DC,U+20E1,U+20E5-20EF,U+2100-2112,U+2114-2115,U+2117-2121,U+2123-214F,U+2190,U+2192,U+2194-21AE,U+21B0-21E5,U+21F1-21F2,U+21F4-2211,U+2213-2214,U+2216-22FF,U+2308-230B,U+2310,U+2319,U+231C-2321,U+2336-237A,U+237C,U+2395,U+239B-23B7,U+23D0,U+23DC-23E1,U+2474-2475,U+25AF,U+25B3,U+25B7,U+25BD,U+25C1,U+25CA,U+25CC,U+25FB,U+266D-266F,U+27C0-27FF,U+2900-2AFF,U+2B0E-2B11,U+2B30-2B4C,U+2BFE,U+3030,U+FF5B,U+FF5D,U+1D400-1D7FF,U+1EE00-1EEFF}@font-face{font-family:'Open Sans';font-style:normal;font-weight:700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v43/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTUGmu0SC55K5gw.woff2) format('woff2');unicode-range:U+0001-000C,U+000E-001F,U+007F-009F,U+20DD-20E0,U+20E2-20E4,U+2150-218F,U+2190,U+2192,U+2194-2199,U+21AF,U+21E6-21F0,U+21F3,U+2218-2219,U+2299,U+22C4-22C6,U+2300-243F,U+2440-244A,U+2460-24FF,U+25A0-27BF,U+2800-28FF,U+2921-2922,U+2981,U+29BF,U+29EB,U+2B00-2BFF,U+4DC0-4DFF,U+FFF9-FFFB,U+10140-1018E,U+10190-1019C,U+101A0,U+101D0-101FD,U+102E0-102FB,U+10E60-10E7E,U+1D2C0-1D2D3,U+1D2E0-1D37F,U+1F000-1F0FF,U+1F100-1F1AD,U+1F1E6-1F1FF,U+1F30D-1F30F,U+1F315,U+1F31C,U+1F31E,U+1F320-1F32C,U+1F336,U+1F378,U+1F37D,U+1F382,U+1F393-1F39F,U+1F3A7-1F3A8,U+1F3AC-1F3AF,U+1F3C2,U+1F3C4-1F3C6,U+1F3CA-1F3CE,U+1F3D4-1F3E0,U+1F3ED,U+1F3F1-1F3F3,U+1F3F5-1F3F7,U+1F408,U+1F415,U+1F41F,U+1F426,U+1F43F,U+1F441-1F442,U+1F444,U+1F446-1F449,U+1F44C-1F44E,U+1F453,U+1F46A,U+1F47D,U+1F4A3,U+1F4B0,U+1F4B3,U+1F4B9,U+1F4BB,U+1F4BF,U+1F4C8-1F4CB,U+1F4D6,U+1F4DA,U+1F4DF,U+1F4E3-1F4E6,U+1F4EA-1F4ED,U+1F4F7,U+1F4F9-1F4FB,U+1F4FD-1F4FE,U+1F503,U+1F507-1F50B,U+1F50D,U+1F512-1F513,U+1F53E-1F54A,U+1F54F-1F5FA,U+1F610,U+1F650-1F67F,U+1F687,U+1F68D,U+1F691,U+1F694,U+1F698,U+1F6AD,U+1F6B2,U+1F6B9-1F6BA,U+1F6BC,U+1F6C6-1F6CF,U+1F6D3-1F6D7,U+1F6E0-1F6EA,U+1F6F0-1F6F3,U+1F6F7-1F6FC,U+1F700-1F7FF,U+1F800-1F80B,U+1F810-1F847,U+1F850-1F859,U+1F860-1F887,U+1F890-1F8AD,U+1F8B0-1F8BB,U+1F8C0-1F8C1,U+1F900-1F90B,U+1F93B,U+1F946,U+1F984,U+1F996,U+1F9E9,U+1FA00-1FA6F,U+1FA70-1FA7C,U+1FA80-1FA89,U+1FA8F-1FAC6,U+1FACE-1FADC,U+1FADF-1FAE9,U+1FAF0-1FAF8,U+1FB00-1FBFF}@font-face{font-family:'Open Sans';font-style:normal;font-weight:700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v43/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSCmu0SC55K5gw.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Open Sans';font-style:normal;font-weight:700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v43/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSGmu0SC55K5gw.woff2) format('woff2');unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Open Sans';font-style:normal;font-weight:700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v43/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTS-mu0SC55I.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3GUBHMdazTgWw.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3iUBHMdazTgWw.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3CUBHMdazTgWw.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3-UBHMdazTgWw.woff2) format('woff2');unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMawCUBHMdazTgWw.woff2) format('woff2');unicode-range:U+0302-0303,U+0305,U+0307-0308,U+0310,U+0312,U+0315,U+031A,U+0326-0327,U+032C,U+032F-0330,U+0332-0333,U+0338,U+033A,U+0346,U+034D,U+0391-03A1,U+03A3-03A9,U+03B1-03C9,U+03D1,U+03D5-03D6,U+03F0-03F1,U+03F4-03F5,U+2016-2017,U+2034-2038,U+203C,U+2040,U+2043,U+2047,U+2050,U+2057,U+205F,U+2070-2071,U+2074-208E,U+2090-209C,U+20D0-20DC,U+20E1,U+20E5-20EF,U+2100-2112,U+2114-2115,U+2117-2121,U+2123-214F,U+2190,U+2192,U+2194-21AE,U+21B0-21E5,U+21F1-21F2,U+21F4-2211,U+2213-2214,U+2216-22FF,U+2308-230B,U+2310,U+2319,U+231C-2321,U+2336-237A,U+237C,U+2395,U+239B-23B7,U+23D0,U+23DC-23E1,U+2474-2475,U+25AF,U+25B3,U+25B7,U+25BD,U+25C1,U+25CA,U+25CC,U+25FB,U+266D-266F,U+27C0-27FF,U+2900-2AFF,U+2B0E-2B11,U+2B30-2B4C,U+2BFE,U+3030,U+FF5B,U+FF5D,U+1D400-1D7FF,U+1EE00-1EEFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMaxKUBHMdazTgWw.woff2) format('woff2');unicode-range:U+0001-000C,U+000E-001F,U+007F-009F,U+20DD-20E0,U+20E2-20E4,U+2150-218F,U+2190,U+2192,U+2194-2199,U+21AF,U+21E6-21F0,U+21F3,U+2218-2219,U+2299,U+22C4-22C6,U+2300-243F,U+2440-244A,U+2460-24FF,U+25A0-27BF,U+2800-28FF,U+2921-2922,U+2981,U+29BF,U+29EB,U+2B00-2BFF,U+4DC0-4DFF,U+FFF9-FFFB,U+10140-1018E,U+10190-1019C,U+101A0,U+101D0-101FD,U+102E0-102FB,U+10E60-10E7E,U+1D2C0-1D2D3,U+1D2E0-1D37F,U+1F000-1F0FF,U+1F100-1F1AD,U+1F1E6-1F1FF,U+1F30D-1F30F,U+1F315,U+1F31C,U+1F31E,U+1F320-1F32C,U+1F336,U+1F378,U+1F37D,U+1F382,U+1F393-1F39F,U+1F3A7-1F3A8,U+1F3AC-1F3AF,U+1F3C2,U+1F3C4-1F3C6,U+1F3CA-1F3CE,U+1F3D4-1F3E0,U+1F3ED,U+1F3F1-1F3F3,U+1F3F5-1F3F7,U+1F408,U+1F415,U+1F41F,U+1F426,U+1F43F,U+1F441-1F442,U+1F444,U+1F446-1F449,U+1F44C-1F44E,U+1F453,U+1F46A,U+1F47D,U+1F4A3,U+1F4B0,U+1F4B3,U+1F4B9,U+1F4BB,U+1F4BF,U+1F4C8-1F4CB,U+1F4D6,U+1F4DA,U+1F4DF,U+1F4E3-1F4E6,U+1F4EA-1F4ED,U+1F4F7,U+1F4F9-1F4FB,U+1F4FD-1F4FE,U+1F503,U+1F507-1F50B,U+1F50D,U+1F512-1F513,U+1F53E-1F54A,U+1F54F-1F5FA,U+1F610,U+1F650-1F67F,U+1F687,U+1F68D,U+1F691,U+1F694,U+1F698,U+1F6AD,U+1F6B2,U+1F6B9-1F6BA,U+1F6BC,U+1F6C6-1F6CF,U+1F6D3-1F6D7,U+1F6E0-1F6EA,U+1F6F0-1F6F3,U+1F6F7-1F6FC,U+1F700-1F7FF,U+1F800-1F80B,U+1F810-1F847,U+1F850-1F859,U+1F860-1F887,U+1F890-1F8AD,U+1F8B0-1F8BB,U+1F8C0-1F8C1,U+1F900-1F90B,U+1F93B,U+1F946,U+1F984,U+1F996,U+1F9E9,U+1FA00-1FA6F,U+1FA70-1FA7C,U+1FA80-1FA89,U+1FA8F-1FAC6,U+1FACE-1FADC,U+1FADF-1FAE9,U+1FAF0-1FAF8,U+1FB00-1FBFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3OUBHMdazTgWw.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3KUBHMdazTgWw.woff2) format('woff2');unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3yUBHMdazQ.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3GUBHMdazTgWw.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3iUBHMdazTgWw.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3CUBHMdazTgWw.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3-UBHMdazTgWw.woff2) format('woff2');unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMawCUBHMdazTgWw.woff2) format('woff2');unicode-range:U+0302-0303,U+0305,U+0307-0308,U+0310,U+0312,U+0315,U+031A,U+0326-0327,U+032C,U+032F-0330,U+0332-0333,U+0338,U+033A,U+0346,U+034D,U+0391-03A1,U+03A3-03A9,U+03B1-03C9,U+03D1,U+03D5-03D6,U+03F0-03F1,U+03F4-03F5,U+2016-2017,U+2034-2038,U+203C,U+2040,U+2043,U+2047,U+2050,U+2057,U+205F,U+2070-2071,U+2074-208E,U+2090-209C,U+20D0-20DC,U+20E1,U+20E5-20EF,U+2100-2112,U+2114-2115,U+2117-2121,U+2123-214F,U+2190,U+2192,U+2194-21AE,U+21B0-21E5,U+21F1-21F2,U+21F4-2211,U+2213-2214,U+2216-22FF,U+2308-230B,U+2310,U+2319,U+231C-2321,U+2336-237A,U+237C,U+2395,U+239B-23B7,U+23D0,U+23DC-23E1,U+2474-2475,U+25AF,U+25B3,U+25B7,U+25BD,U+25C1,U+25CA,U+25CC,U+25FB,U+266D-266F,U+27C0-27FF,U+2900-2AFF,U+2B0E-2B11,U+2B30-2B4C,U+2BFE,U+3030,U+FF5B,U+FF5D,U+1D400-1D7FF,U+1EE00-1EEFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMaxKUBHMdazTgWw.woff2) format('woff2');unicode-range:U+0001-000C,U+000E-001F,U+007F-009F,U+20DD-20E0,U+20E2-20E4,U+2150-218F,U+2190,U+2192,U+2194-2199,U+21AF,U+21E6-21F0,U+21F3,U+2218-2219,U+2299,U+22C4-22C6,U+2300-243F,U+2440-244A,U+2460-24FF,U+25A0-27BF,U+2800-28FF,U+2921-2922,U+2981,U+29BF,U+29EB,U+2B00-2BFF,U+4DC0-4DFF,U+FFF9-FFFB,U+10140-1018E,U+10190-1019C,U+101A0,U+101D0-101FD,U+102E0-102FB,U+10E60-10E7E,U+1D2C0-1D2D3,U+1D2E0-1D37F,U+1F000-1F0FF,U+1F100-1F1AD,U+1F1E6-1F1FF,U+1F30D-1F30F,U+1F315,U+1F31C,U+1F31E,U+1F320-1F32C,U+1F336,U+1F378,U+1F37D,U+1F382,U+1F393-1F39F,U+1F3A7-1F3A8,U+1F3AC-1F3AF,U+1F3C2,U+1F3C4-1F3C6,U+1F3CA-1F3CE,U+1F3D4-1F3E0,U+1F3ED,U+1F3F1-1F3F3,U+1F3F5-1F3F7,U+1F408,U+1F415,U+1F41F,U+1F426,U+1F43F,U+1F441-1F442,U+1F444,U+1F446-1F449,U+1F44C-1F44E,U+1F453,U+1F46A,U+1F47D,U+1F4A3,U+1F4B0,U+1F4B3,U+1F4B9,U+1F4BB,U+1F4BF,U+1F4C8-1F4CB,U+1F4D6,U+1F4DA,U+1F4DF,U+1F4E3-1F4E6,U+1F4EA-1F4ED,U+1F4F7,U+1F4F9-1F4FB,U+1F4FD-1F4FE,U+1F503,U+1F507-1F50B,U+1F50D,U+1F512-1F513,U+1F53E-1F54A,U+1F54F-1F5FA,U+1F610,U+1F650-1F67F,U+1F687,U+1F68D,U+1F691,U+1F694,U+1F698,U+1F6AD,U+1F6B2,U+1F6B9-1F6BA,U+1F6BC,U+1F6C6-1F6CF,U+1F6D3-1F6D7,U+1F6E0-1F6EA,U+1F6F0-1F6F3,U+1F6F7-1F6FC,U+1F700-1F7FF,U+1F800-1F80B,U+1F810-1F847,U+1F850-1F859,U+1F860-1F887,U+1F890-1F8AD,U+1F8B0-1F8BB,U+1F8C0-1F8C1,U+1F900-1F90B,U+1F93B,U+1F946,U+1F984,U+1F996,U+1F9E9,U+1FA00-1FA6F,U+1FA70-1FA7C,U+1FA80-1FA89,U+1FA8F-1FAC6,U+1FACE-1FADC,U+1FADF-1FAE9,U+1FAF0-1FAF8,U+1FB00-1FBFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3OUBHMdazTgWw.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3KUBHMdazTgWw.woff2) format('woff2');unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3yUBHMdazQ.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3GUBHMdazTgWw.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3iUBHMdazTgWw.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3CUBHMdazTgWw.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3-UBHMdazTgWw.woff2) format('woff2');unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMawCUBHMdazTgWw.woff2) format('woff2');unicode-range:U+0302-0303,U+0305,U+0307-0308,U+0310,U+0312,U+0315,U+031A,U+0326-0327,U+032C,U+032F-0330,U+0332-0333,U+0338,U+033A,U+0346,U+034D,U+0391-03A1,U+03A3-03A9,U+03B1-03C9,U+03D1,U+03D5-03D6,U+03F0-03F1,U+03F4-03F5,U+2016-2017,U+2034-2038,U+203C,U+2040,U+2043,U+2047,U+2050,U+2057,U+205F,U+2070-2071,U+2074-208E,U+2090-209C,U+20D0-20DC,U+20E1,U+20E5-20EF,U+2100-2112,U+2114-2115,U+2117-2121,U+2123-214F,U+2190,U+2192,U+2194-21AE,U+21B0-21E5,U+21F1-21F2,U+21F4-2211,U+2213-2214,U+2216-22FF,U+2308-230B,U+2310,U+2319,U+231C-2321,U+2336-237A,U+237C,U+2395,U+239B-23B7,U+23D0,U+23DC-23E1,U+2474-2475,U+25AF,U+25B3,U+25B7,U+25BD,U+25C1,U+25CA,U+25CC,U+25FB,U+266D-266F,U+27C0-27FF,U+2900-2AFF,U+2B0E-2B11,U+2B30-2B4C,U+2BFE,U+3030,U+FF5B,U+FF5D,U+1D400-1D7FF,U+1EE00-1EEFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMaxKUBHMdazTgWw.woff2) format('woff2');unicode-range:U+0001-000C,U+000E-001F,U+007F-009F,U+20DD-20E0,U+20E2-20E4,U+2150-218F,U+2190,U+2192,U+2194-2199,U+21AF,U+21E6-21F0,U+21F3,U+2218-2219,U+2299,U+22C4-22C6,U+2300-243F,U+2440-244A,U+2460-24FF,U+25A0-27BF,U+2800-28FF,U+2921-2922,U+2981,U+29BF,U+29EB,U+2B00-2BFF,U+4DC0-4DFF,U+FFF9-FFFB,U+10140-1018E,U+10190-1019C,U+101A0,U+101D0-101FD,U+102E0-102FB,U+10E60-10E7E,U+1D2C0-1D2D3,U+1D2E0-1D37F,U+1F000-1F0FF,U+1F100-1F1AD,U+1F1E6-1F1FF,U+1F30D-1F30F,U+1F315,U+1F31C,U+1F31E,U+1F320-1F32C,U+1F336,U+1F378,U+1F37D,U+1F382,U+1F393-1F39F,U+1F3A7-1F3A8,U+1F3AC-1F3AF,U+1F3C2,U+1F3C4-1F3C6,U+1F3CA-1F3CE,U+1F3D4-1F3E0,U+1F3ED,U+1F3F1-1F3F3,U+1F3F5-1F3F7,U+1F408,U+1F415,U+1F41F,U+1F426,U+1F43F,U+1F441-1F442,U+1F444,U+1F446-1F449,U+1F44C-1F44E,U+1F453,U+1F46A,U+1F47D,U+1F4A3,U+1F4B0,U+1F4B3,U+1F4B9,U+1F4BB,U+1F4BF,U+1F4C8-1F4CB,U+1F4D6,U+1F4DA,U+1F4DF,U+1F4E3-1F4E6,U+1F4EA-1F4ED,U+1F4F7,U+1F4F9-1F4FB,U+1F4FD-1F4FE,U+1F503,U+1F507-1F50B,U+1F50D,U+1F512-1F513,U+1F53E-1F54A,U+1F54F-1F5FA,U+1F610,U+1F650-1F67F,U+1F687,U+1F68D,U+1F691,U+1F694,U+1F698,U+1F6AD,U+1F6B2,U+1F6B9-1F6BA,U+1F6BC,U+1F6C6-1F6CF,U+1F6D3-1F6D7,U+1F6E0-1F6EA,U+1F6F0-1F6F3,U+1F6F7-1F6FC,U+1F700-1F7FF,U+1F800-1F80B,U+1F810-1F847,U+1F850-1F859,U+1F860-1F887,U+1F890-1F8AD,U+1F8B0-1F8BB,U+1F8C0-1F8C1,U+1F900-1F90B,U+1F93B,U+1F946,U+1F984,U+1F996,U+1F9E9,U+1FA00-1FA6F,U+1FA70-1FA7C,U+1FA80-1FA89,U+1FA8F-1FAC6,U+1FACE-1FADC,U+1FADF-1FAE9,U+1FAF0-1FAF8,U+1FB00-1FBFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3OUBHMdazTgWw.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3KUBHMdazTgWw.woff2) format('woff2');unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3yUBHMdazQ.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3GUBHMdazTgWw.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3iUBHMdazTgWw.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3CUBHMdazTgWw.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3-UBHMdazTgWw.woff2) format('woff2');unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMawCUBHMdazTgWw.woff2) format('woff2');unicode-range:U+0302-0303,U+0305,U+0307-0308,U+0310,U+0312,U+0315,U+031A,U+0326-0327,U+032C,U+032F-0330,U+0332-0333,U+0338,U+033A,U+0346,U+034D,U+0391-03A1,U+03A3-03A9,U+03B1-03C9,U+03D1,U+03D5-03D6,U+03F0-03F1,U+03F4-03F5,U+2016-2017,U+2034-2038,U+203C,U+2040,U+2043,U+2047,U+2050,U+2057,U+205F,U+2070-2071,U+2074-208E,U+2090-209C,U+20D0-20DC,U+20E1,U+20E5-20EF,U+2100-2112,U+2114-2115,U+2117-2121,U+2123-214F,U+2190,U+2192,U+2194-21AE,U+21B0-21E5,U+21F1-21F2,U+21F4-2211,U+2213-2214,U+2216-22FF,U+2308-230B,U+2310,U+2319,U+231C-2321,U+2336-237A,U+237C,U+2395,U+239B-23B7,U+23D0,U+23DC-23E1,U+2474-2475,U+25AF,U+25B3,U+25B7,U+25BD,U+25C1,U+25CA,U+25CC,U+25FB,U+266D-266F,U+27C0-27FF,U+2900-2AFF,U+2B0E-2B11,U+2B30-2B4C,U+2BFE,U+3030,U+FF5B,U+FF5D,U+1D400-1D7FF,U+1EE00-1EEFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMaxKUBHMdazTgWw.woff2) format('woff2');unicode-range:U+0001-000C,U+000E-001F,U+007F-009F,U+20DD-20E0,U+20E2-20E4,U+2150-218F,U+2190,U+2192,U+2194-2199,U+21AF,U+21E6-21F0,U+21F3,U+2218-2219,U+2299,U+22C4-22C6,U+2300-243F,U+2440-244A,U+2460-24FF,U+25A0-27BF,U+2800-28FF,U+2921-2922,U+2981,U+29BF,U+29EB,U+2B00-2BFF,U+4DC0-4DFF,U+FFF9-FFFB,U+10140-1018E,U+10190-1019C,U+101A0,U+101D0-101FD,U+102E0-102FB,U+10E60-10E7E,U+1D2C0-1D2D3,U+1D2E0-1D37F,U+1F000-1F0FF,U+1F100-1F1AD,U+1F1E6-1F1FF,U+1F30D-1F30F,U+1F315,U+1F31C,U+1F31E,U+1F320-1F32C,U+1F336,U+1F378,U+1F37D,U+1F382,U+1F393-1F39F,U+1F3A7-1F3A8,U+1F3AC-1F3AF,U+1F3C2,U+1F3C4-1F3C6,U+1F3CA-1F3CE,U+1F3D4-1F3E0,U+1F3ED,U+1F3F1-1F3F3,U+1F3F5-1F3F7,U+1F408,U+1F415,U+1F41F,U+1F426,U+1F43F,U+1F441-1F442,U+1F444,U+1F446-1F449,U+1F44C-1F44E,U+1F453,U+1F46A,U+1F47D,U+1F4A3,U+1F4B0,U+1F4B3,U+1F4B9,U+1F4BB,U+1F4BF,U+1F4C8-1F4CB,U+1F4D6,U+1F4DA,U+1F4DF,U+1F4E3-1F4E6,U+1F4EA-1F4ED,U+1F4F7,U+1F4F9-1F4FB,U+1F4FD-1F4FE,U+1F503,U+1F507-1F50B,U+1F50D,U+1F512-1F513,U+1F53E-1F54A,U+1F54F-1F5FA,U+1F610,U+1F650-1F67F,U+1F687,U+1F68D,U+1F691,U+1F694,U+1F698,U+1F6AD,U+1F6B2,U+1F6B9-1F6BA,U+1F6BC,U+1F6C6-1F6CF,U+1F6D3-1F6D7,U+1F6E0-1F6EA,U+1F6F0-1F6F3,U+1F6F7-1F6FC,U+1F700-1F7FF,U+1F800-1F80B,U+1F810-1F847,U+1F850-1F859,U+1F860-1F887,U+1F890-1F8AD,U+1F8B0-1F8BB,U+1F8C0-1F8C1,U+1F900-1F90B,U+1F93B,U+1F946,U+1F984,U+1F996,U+1F9E9,U+1FA00-1FA6F,U+1FA70-1FA7C,U+1FA80-1FA89,U+1FA8F-1FAC6,U+1FACE-1FADC,U+1FADF-1FAE9,U+1FAF0-1FAF8,U+1FB00-1FBFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3OUBHMdazTgWw.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3KUBHMdazTgWw.woff2) format('woff2');unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v48/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3yUBHMdazQ.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body><div id="__next"><header class="site-header"><div class="content-wrapper"><div class="site-header__inner"><a class="site-header__logo-link" href="/"><img src="/logo.svg" alt="3-shake Engineers&#x27; Blogs" class="site-header__logo-img"/><span class="site-header__logo-text">3-shake<br/>Engineers&#x27; Blogs</span></a><div class="site-header__links"><a class="site-header__link" href="/feed.xml">RSS</a><a href="https://jobs-3-shake.com/" class="site-header__link">Recruit</a><a href="https://3-shake.com/" class="site-header__link">Company</a></div></div></div></header><section class="member"><div class="content-wrapper"><header class="member-header"><div class="member-header__avatar"><img src="/avatars/hirokihasegawa.png" alt="Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π" width="100" height="100" class="member-header__avatar-img"/></div><h1 class="member-header__name">Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π</h1><p class="member-header__bio">È°îÁîªÂÉè„ÅØËëó‰ΩúÊ®©„Éï„É™„Éº„Åß„Åô„ÅÆ„Åß„Å©„ÅÜ„Åû</p><div class="member-header__links"><a href="https://twitter.com/Hiroki__IT" class="member-header__link"><img src="/icons/twitter.svg" alt="Twitter„ÅÆ„É¶„Éº„Ç∂„Éº@Hiroki__IT" width="22" height="22"/></a><a href="https://github.com/hiroki-it" class="member-header__link"><img src="/icons/github.svg" alt="GitHub„ÅÆ„É¶„Éº„Ç∂„Éº@hiroki-it" width="22" height="22"/></a><a href="https://hiroki-it.github.io/tech-notebook/" class="member-header__link"><img src="/icons/link.svg" alt="„Ç¶„Çß„Éñ„Çµ„Ç§„Éà„ÅÆ„É™„É≥„ÇØ" width="22" height="22"/></a></div></header><div class="member-posts-container"><div class="post-list"><article class="post-link"><a class="post-link__author" href="/members/hiroki-hasegawa"><img src="/avatars/hirokihasegawa.png" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π</div><time dateTime="2024-07-01T03:00:00.000Z" class="post-link__date">a year ago</time></div></a><a href="https://hiroki-hasegawa.hatenablog.jp/entry/2024/07/01/120000" class="post-link__main-link"><h2 class="post-link__title">„ÄêKubernetes‚ò∏Ô∏è„Äë&quot;Findy ÈñãÁô∫ÁîüÁî£ÊÄß Conference&quot; „Å´ÁôªÂ£á</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=hiroki-hasegawa.hatenablog.jp" width="14" height="14" class="post-link__site-favicon"/>hiroki-hasegawa.hatenablog.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/hiroki-hasegawa"><img src="/avatars/hirokihasegawa.png" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π</div><time dateTime="2024-06-28T04:00:00.000Z" class="post-link__date">a year ago</time></div></a><a href="https://speakerdeck.com/hiroki_hasegawa/marutipurodakutonozu-zhi-demaikurosabisuakitekutiyawozhi-erucicdpuratutohuomushe-ji" class="post-link__main-link"><h2 class="post-link__title">‚ôæÔ∏è „Éû„É´„ÉÅ„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆÂ∑®Â§ßÁµÑÁπî„Åß„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„ÇπÈñãÁô∫„ÇíÊîØ„Åà„ÇãCICD„Éó„É©„ÉÉ„Éà„Éï„Ç©„Éº„É†Ë®≠Ë®à</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=speakerdeck.com" width="14" height="14" class="post-link__site-favicon"/>speakerdeck.com</div></a></article><article class="post-link"><a class="post-link__author" href="/members/hiroki-hasegawa"><img src="/avatars/hirokihasegawa.png" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π</div><time dateTime="2024-01-15T16:34:04.000Z" class="post-link__date">a year ago</time></div></a><a href="https://hiroki-hasegawa.hatenablog.jp/entry/2024/01/16/013404" class="post-link__main-link"><h2 class="post-link__title">„ÄêIstio‚õµÔ∏è„ÄëIstio„Å´„Çà„Å£„Å¶ÊäΩË±°Âåñ„Åï„Çå„ÇãEnvoy„ÅÆHTTPS„É™„ÇØ„Ç®„Çπ„ÉàÂá¶ÁêÜ„ÅÆ‰ªïÁµÑ„Åø</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=hiroki-hasegawa.hatenablog.jp" width="14" height="14" class="post-link__site-favicon"/>hiroki-hasegawa.hatenablog.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/hiroki-hasegawa"><img src="/avatars/hirokihasegawa.png" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π</div><time dateTime="2023-12-21T05:00:00.000Z" class="post-link__date">2 years ago</time></div></a><a href="https://speakerdeck.com/hiroki_hasegawa/kubernetesnomarutitenantopatantoargocdnoshi-jian-tenantoshe-ji" class="post-link__main-link"><h2 class="post-link__title">üêô Kubernetes„ÅÆ„Éû„É´„ÉÅ„ÉÜ„Éä„É≥„Éà„Éë„Çø„Éº„É≥„Å®ArgoCD„ÅÆÂÆüË∑µ„ÉÜ„Éä„É≥„ÉàË®≠Ë®à</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=speakerdeck.com" width="14" height="14" class="post-link__site-favicon"/>speakerdeck.com</div></a></article><article class="post-link"><a class="post-link__author" href="/members/hiroki-hasegawa"><img src="/avatars/hirokihasegawa.png" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π</div><time dateTime="2023-12-21T03:00:00.000Z" class="post-link__date">2 years ago</time></div></a><a href="https://hiroki-hasegawa.hatenablog.jp/entry/2023/12/21/833414" class="post-link__main-link"><h2 class="post-link__title">„ÄêArgoCDüêô„Äë&quot;Kubernetes Novice Tokyo&quot; „Å´ÁôªÂ£á</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=hiroki-hasegawa.hatenablog.jp" width="14" height="14" class="post-link__site-favicon"/>hiroki-hasegawa.hatenablog.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/hiroki-hasegawa"><img src="/avatars/hirokihasegawa.png" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π</div><time dateTime="2023-10-25T03:00:00.000Z" class="post-link__date">2 years ago</time></div></a><a href="https://hiroki-hasegawa.hatenablog.jp/entry/2023/10/25/550144" class="post-link__main-link"><h2 class="post-link__title">„ÄêTerraformüßëüèª‚ÄçüöÄ„Äë&quot;Findy Terraform Ê¥ªÁî®Â§ßÂÖ® - IaC„ÅÆ‰ªä&quot; „Å´ÁôªÂ£á</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=hiroki-hasegawa.hatenablog.jp" width="14" height="14" class="post-link__site-favicon"/>hiroki-hasegawa.hatenablog.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/hiroki-hasegawa"><img src="/avatars/hirokihasegawa.png" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π</div><time dateTime="2023-10-24T04:00:00.000Z" class="post-link__date">2 years ago</time></div></a><a href="https://speakerdeck.com/hiroki_hasegawa/tfstate-nofen-ge-hatantoteirekutorigou-cheng-henoshi-yong" class="post-link__main-link"><h2 class="post-link__title">üßë‚ÄçüöÄ tfstate „ÅÆÂàÜÂâ≤„Éè„Çö„Çø„Éº„É≥„Å®„ÉÜ„Çô„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê„Å∏„ÅÆÈÅ©Áî®</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=speakerdeck.com" width="14" height="14" class="post-link__site-favicon"/>speakerdeck.com</div></a></article><article class="post-link"><a class="post-link__author" href="/members/hiroki-hasegawa"><img src="/avatars/hirokihasegawa.png" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π</div><time dateTime="2023-08-18T02:06:46.000Z" class="post-link__date">2 years ago</time></div></a><a href="https://hiroki-hasegawa.hatenablog.jp/entry/2023/08/18/110646" class="post-link__main-link"><h2 class="post-link__title">„ÄêArgoCDüêôÔ∏è„ÄëKubernetes„ÅÆ„Éû„É´„ÉÅ„ÉÜ„Éä„É≥„Éà„Éë„Çø„Éº„É≥„Å®ArgoCD„ÅÆÂÆüË∑µ„ÉÜ„Éä„É≥„ÉàË®≠Ë®à</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=hiroki-hasegawa.hatenablog.jp" width="14" height="14" class="post-link__site-favicon"/>hiroki-hasegawa.hatenablog.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/hiroki-hasegawa"><img src="/avatars/hirokihasegawa.png" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π</div><time dateTime="2023-07-04T15:17:56.000Z" class="post-link__date">2 years ago</time></div></a><a href="https://hiroki-hasegawa.hatenablog.jp/entry/2023/07/05/001756" class="post-link__main-link"><h2 class="post-link__title">„ÄêTerraformüßëüèª‚ÄçüöÄ„Äëtfstate„Éï„Ç°„Ç§„É´„ÅÆÂàÜÂâ≤„Éë„Çø„Éº„É≥„Å®„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê„Å∏„ÅÆÈÅ©Áî®</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=hiroki-hasegawa.hatenablog.jp" width="14" height="14" class="post-link__site-favicon"/>hiroki-hasegawa.hatenablog.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/hiroki-hasegawa"><img src="/avatars/hirokihasegawa.png" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π</div><time dateTime="2023-05-02T05:42:57.000Z" class="post-link__date">2 years ago</time></div></a><a href="https://hiroki-hasegawa.hatenablog.jp/entry/2023/05/02/145115" class="post-link__main-link"><h2 class="post-link__title">„ÄêArgoCDüêô„ÄëArgoCD„ÅÆ„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„Ç¢„Éº„Ç≠„ÉÜ„ÇØ„ÉÅ„É£„Å®Ëá™Âãï„Éá„Éó„É≠„Ç§„ÅÆ‰ªïÁµÑ„Åø</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=hiroki-hasegawa.hatenablog.jp" width="14" height="14" class="post-link__site-favicon"/>hiroki-hasegawa.hatenablog.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/hiroki-hasegawa"><img src="/avatars/hirokihasegawa.png" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π</div><time dateTime="2023-02-26T11:25:48.000Z" class="post-link__date">2 years ago</time></div></a><a href="https://hiroki-hasegawa.hatenablog.jp/entry/2023/02/26/202548" class="post-link__main-link"><h2 class="post-link__title">„ÄêIstio‚õµÔ∏è„ÄëIstio„ÇíÂÆâÂÖ®„Å´„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„Åô„Çã„Ç´„Éä„É™„Ç¢ÊñπÂºè„Å®„Åù„ÅÆ‰ªïÁµÑ„Åø</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=hiroki-hasegawa.hatenablog.jp" width="14" height="14" class="post-link__site-favicon"/>hiroki-hasegawa.hatenablog.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/hiroki-hasegawa"><img src="/avatars/hirokihasegawa.png" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π</div><time dateTime="2023-01-14T13:38:15.000Z" class="post-link__date">2 years ago</time></div></a><a href="https://hiroki-hasegawa.hatenablog.jp/entry/2023/01/14/223815" class="post-link__main-link"><h2 class="post-link__title">„ÄêIstio‚õµÔ∏è„Äë„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•„ÅÆÁôªÂ†¥ÁµåÁ∑Ø„Å®Istio„Çµ„Ç§„Éâ„Ç´„Éº„Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥„ÅÆ‰ªïÁµÑ„Åø</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=hiroki-hasegawa.hatenablog.jp" width="14" height="14" class="post-link__site-favicon"/>hiroki-hasegawa.hatenablog.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/hiroki-hasegawa"><img src="/avatars/hirokihasegawa.png" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π</div><time dateTime="2022-12-24T21:00:00.000Z" class="post-link__date">2 years ago</time></div></a><a href="https://hiroki-hasegawa.hatenablog.jp/entry/2022/12/25/060000" class="post-link__main-link"><h2 class="post-link__title">„ÄêIstio‚õµÔ∏è„ÄëIstio„ÅÆ„Çµ„Éº„Éì„ÇπÈñìÈÄö‰ø°„ÇíÂÆüÁèæ„Åô„Çã„Çµ„Éº„Éì„Çπ„Éá„Ç£„Çπ„Ç´„Éê„É™„Éº„ÅÆ‰ªïÁµÑ„Åø</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=hiroki-hasegawa.hatenablog.jp" width="14" height="14" class="post-link__site-favicon"/>hiroki-hasegawa.hatenablog.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/hiroki-hasegawa"><img src="/avatars/hirokihasegawa.png" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π</div><time dateTime="2022-12-15T05:00:00.000Z" class="post-link__date">3 years ago</time></div></a><a href="https://speakerdeck.com/hiroki_hasegawa/istioniyorusahisuteisukaharinoshi-zu-mi" class="post-link__main-link"><h2 class="post-link__title">‚õµÔ∏è Istio„ÅÆ„Çµ„Éº„Éì„ÇπÈñìÈÄö‰ø°„ÇíÂÆüÁèæ„Åô„Çã„Çµ„Éº„Éì„Çπ„Éá„Ç£„Çπ„Ç´„Éê„É™„Éº„ÅÆ‰ªïÁµÑ„Åø</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=speakerdeck.com" width="14" height="14" class="post-link__site-favicon"/>speakerdeck.com</div></a></article><article class="post-link"><a class="post-link__author" href="/members/hiroki-hasegawa"><img src="/avatars/hirokihasegawa.png" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π</div><time dateTime="2022-12-15T03:00:00.000Z" class="post-link__date">3 years ago</time></div></a><a href="https://hiroki-hasegawa.hatenablog.jp/entry/2022/12/15/025523" class="post-link__main-link"><h2 class="post-link__title">„ÄêIstio‚õµÔ∏è„Äë&quot;3-shake SRE Tech Talk&quot; „Å´ÁôªÂ£á</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=hiroki-hasegawa.hatenablog.jp" width="14" height="14" class="post-link__site-favicon"/>hiroki-hasegawa.hatenablog.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/hiroki-hasegawa"><img src="/avatars/hirokihasegawa.png" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π</div><time dateTime="2021-10-22T04:00:00.000Z" class="post-link__date">4 years ago</time></div></a><a href="https://speakerdeck.com/hiroki_hasegawa/ke-guan-ce-xing-niru-men-siyou" class="post-link__main-link"><h2 class="post-link__title">üîç ÂèØË¶≥Ê∏¨ÊÄß„Å´ÂÖ•ÈñÄ„Åó„Çà„ÅÜ</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=speakerdeck.com" width="14" height="14" class="post-link__site-favicon"/>speakerdeck.com</div></a></article><article class="post-link"><a class="post-link__author" href="/members/hiroki-hasegawa"><img src="/avatars/hirokihasegawa.png" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π</div><time dateTime="2021-08-06T04:00:00.000Z" class="post-link__date">4 years ago</time></div></a><a href="https://speakerdeck.com/hiroki_hasegawa/domeinqu-dong-she-ji-toyi-cun-xing-ni-zhuan-falseyuan-ze" class="post-link__main-link"><h2 class="post-link__title">üèóÔ∏è „Éâ„É°„Ç§„É≥ÈßÜÂãïË®≠Ë®à„Å®‰æùÂ≠òÊÄßÈÄÜËª¢„ÅÆÂéüÂâá</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=speakerdeck.com" width="14" height="14" class="post-link__site-favicon"/>speakerdeck.com</div></a></article><article class="post-link"><a class="post-link__author" href="/members/hiroki-hasegawa"><img src="/avatars/hirokihasegawa.png" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π</div><time dateTime="2021-06-25T04:00:00.000Z" class="post-link__date">4 years ago</time></div></a><a href="https://speakerdeck.com/hiroki_hasegawa/yi-cun-guan-xi-toyi-cun-obuziekutozhu-ru" class="post-link__main-link"><h2 class="post-link__title">ü§ùüèª ‰æùÂ≠òÈñ¢‰øÇ„Å®‰æùÂ≠ò„Ç™„Éñ„Ç∏„Çß„ÇØ„ÉàÊ≥®ÂÖ•</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=speakerdeck.com" width="14" height="14" class="post-link__site-favicon"/>speakerdeck.com</div></a></article><article class="post-link"><a class="post-link__author" href="/members/hiroki-hasegawa"><img src="/avatars/hirokihasegawa.png" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π</div><time dateTime="2021-05-27T04:00:00.000Z" class="post-link__date">4 years ago</time></div></a><a href="https://speakerdeck.com/hiroki_hasegawa/goniru-men-siyou" class="post-link__main-link"><h2 class="post-link__title">üê≠ Go„Å´ÂÖ•ÈñÄ„Åó„Çà„ÅÜ</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=speakerdeck.com" width="14" height="14" class="post-link__site-favicon"/>speakerdeck.com</div></a></article><article class="post-link"><a class="post-link__author" href="/members/hiroki-hasegawa"><img src="/avatars/hirokihasegawa.png" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π</div><time dateTime="2021-05-07T04:00:00.000Z" class="post-link__date">4 years ago</time></div></a><a href="https://speakerdeck.com/hiroki_hasegawa/sreniru-men-siyou" class="post-link__main-link"><h2 class="post-link__title">‚ôæÔ∏è SRE„Å´ÂÖ•ÈñÄ„Åó„Çà„ÅÜ</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=speakerdeck.com" width="14" height="14" class="post-link__site-favicon"/>speakerdeck.com</div></a></article><article class="post-link"><a class="post-link__author" href="/members/hiroki-hasegawa"><img src="/avatars/hirokihasegawa.png" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π</div><time dateTime="2021-03-26T04:00:00.000Z" class="post-link__date">4 years ago</time></div></a><a href="https://speakerdeck.com/hiroki_hasegawa/lambdaguan-shu-wogodeshi-zhuang-sitemitahua" class="post-link__main-link"><h2 class="post-link__title">üê≠ LambdaÈñ¢Êï∞„ÇíGo„ÅßÂÆüË£Ö„Åó„Å¶„Åø„ÅüË©±</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=speakerdeck.com" width="14" height="14" class="post-link__site-favicon"/>speakerdeck.com</div></a></article></div></div></div></section><footer class="site-footer"><div class="content-wrapper"><p>¬© <!-- -->3-shake Inc.</p></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"member":{"id":"hiroki-hasegawa","name":"Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π","role":"„Å™„Çì„Çâ„Åã„ÅÆ„Ç®„É≥„Ç∏„Éã„Ç¢","bio":"È°îÁîªÂÉè„ÅØËëó‰ΩúÊ®©„Éï„É™„Éº„Åß„Åô„ÅÆ„Åß„Å©„ÅÜ„Åû","avatarSrc":"/avatars/hirokihasegawa.png","sources":["https://hiroki-hasegawa.hatenablog.jp/feed","https://speakerdeck.com/hiroki_hasegawa.rss"],"includeUrlRegex":"","twitterUsername":"Hiroki__IT","githubUsername":"hiroki-it","websiteUrl":"https://hiroki-it.github.io/tech-notebook/"},"postItems":[{"title":"„ÄêKubernetes‚ò∏Ô∏è„Äë\"Findy ÈñãÁô∫ÁîüÁî£ÊÄß Conference\" „Å´ÁôªÂ£á","link":"https://hiroki-hasegawa.hatenablog.jp/entry/2024/07/01/120000","contentSnippet":"Áô∫Ë°®„Çπ„É©„Ç§„Éâ„Åã„ÇâÂæó„Çâ„Çå„ÇãÁü•Ë≠òÁô∫Ë°®„Çπ„É©„Ç§„Éâ„ÇíË¶ã„Çã„Å®„ÄÅ‰ª•‰∏ã„Çí \"ÂÆåÂÖ®„Å´ÁêÜËß£\" „Åß„Åç„Åæ„Åô‚úåÔ∏è„Éó„É©„ÉÉ„Éà„Éï„Ç©„Éº„É†Ë®≠Ë®àÂ∞éÂÖ•„ÅÆ„Åü„ÇÅ„Å´„ÄÅÊ®™Êñ≠ÁöÑ„Ç≥„Éü„É•„Éã„Ç±„Éº„Ç∑„Éß„É≥„ÅåÂøÖË¶Å„Åß„ÅÇ„Çã„Éó„É©„ÉÉ„Éà„Éï„Ç©„Éº„É†„Ç®„É≥„Ç∏„Éã„Ç¢„É™„É≥„Ç∞„Åß„ÄÅ„Éû„É´„ÉÅ„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆÁîüÁî£ÊÄß„ÇíÊîØ„Åà„Çã„Éó„É©„ÉÉ„Éà„Éï„Ç©„Éº„É†„Ç®„É≥„Ç∏„Éã„Ç¢„É™„É≥„Ç∞„Åß„ÄÅÂêÑ„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„ÅÆÁîüÁî£ÊÄß„ÇíÊîØ„Åà„ÇãÁô∫Ë°®„Çπ„É©„Ç§„Éâ„Åã„ÇâÂæó„Çâ„Çå„ÇãÁü•Ë≠ò„Ç§„Éô„É≥„ÉàÂêçÁô∫Ë°®„Çπ„É©„Ç§„ÉâÁôªÂ£áÊò†ÂÉèÊñáÂ≠óËµ∑„Åì„ÅóË¨ùËæû„Ç§„Éô„É≥„ÉàÂêç„Ç™„ÉÉ„ÇπÔºÅ„Ç™„É©Èï∑Ë∞∑Â∑ùÔºÅ‚úãüèª„Äé„Éû„É´„ÉÅ„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆÁµÑÁπî„Åß„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„Ç¢„Éº„Ç≠„ÉÜ„ÇØ„ÉÅ„É£„ÇíÊîØ„Åà„ÇãCICD„Éó„É©„ÉÉ„Éà„Éï„Ç©„Éº„É†Ë®≠Ë®à„Äè„Å¶„ÅÑ„ÅÜ„ÉÜ„Éº„Éû„Åß„ÄÅ Findy ÈñãÁô∫ÁîüÁî£ÊÄß Conference „Å´ÁôªÂ£á„Åó„Åü„ÅûÔºÅÁô∫Ë°®„Çπ„É©„Ç§„Éâ„Åø„Çì„Å™ÔºÅ„Çπ„É©„Ç§„Éâ„Åú„Å£„Å¶„ÅáË¶ã„Å¶„Åè„Çå„Çà„Å™ÔºÅ„ÄéFindyÈñãÁô∫ÁîüÁî£ÊÄßConference„Äè„ÅÆÁô∫Ë°®Ë≥áÊñô„Åß„Åô‚úäüèª„Ç™„É©„Åü„Å°„ÅÆ„Éó„É©„ÉÉ„Éà„Éï„Ç©„Éº„É†„Ç®„É≥„Ç∏„Éã„Ç¢„É™„É≥„Ç∞‰∫ã‰æã„ÇíÁ¥π‰ªã„Åó„Å¶„Å£„Åã„Çâ„ÄÅ„Åú„Å£„Å¶„ÅáË¶ã„Å¶„Åè„Çå„Çà„Å™ÔºÅ‚úãüèª#ÈñãÁô∫ÁîüÁî£ÊÄßcon_findyhttps://t.co/DjqztPn9z4‚Äî Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π (Âú∞‰∏ãÂº∑Âà∂Âä¥ÂÉçËÄÖ) (@Hiroki__IT) June 28, 2024 „Å°„Å™„ÄÅÁô∫Ë°®ÂÜÖÂÆπ„ÅØ„Åì„ÅÆË®ò‰∫ã„Å´„ÇÇÈñ¢ÈÄ£„Åó„Å¶„Çã„ÅúÔºÅÁôªÂ£áÊò†ÂÉèFindy„Åï„Çì„ÅåÁôªÂ£á„ÅÆÊò†ÂÉè„ÇíÂÖ¨Èñã„Åó„Å¶„Åè„Çå„Åæ„Åó„Åüüé•ÊñáÂ≠óËµ∑„Åì„ÅóFindy„Åï„Çì„ÅåÁô∫Ë°®„ÇíÊñáÂ≠óËµ∑„Åì„Åó„Åó„Å¶„Åè„Çå„Åæ„Åó„Åüüó£Ô∏èË¨ùËæûÊÑüË¨ù„Åô„Çã„ÅúÔºÅ„Ç§„Éô„É≥„Éà„ÅßÂá∫‰ºö„Åà„ÅüÂÖ®„Å¶„ÅÆÊñπ„ÄÖ„Å´ÔºÅÔºÅÔºÅü´∂üèªÊ†™Âºè‰ºöÁ§æ„Çπ„É™„Éº„Ç∑„Çß„Ç§„ÇØ„ÅÆ„Éñ„Éº„Çπ„Å´„ÅäÈÇ™È≠î„Åï„Åõ„Å¶„ÅÑ„Åü„Å†„Åç„Åæ„Åó„Åüüôå#3shake_inc pic.twitter.com/W7ufgaKfbS‚Äî „Åô„Å¶„Å´„ÇÉ„Çì (@stefafafan) June 29, 2024","isoDate":"2024-07-01T03:00:00.000Z","dateMiliSeconds":1719802800000,"authorName":"Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π","authorId":"hiroki-hasegawa"},{"title":"‚ôæÔ∏è „Éû„É´„ÉÅ„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆÂ∑®Â§ßÁµÑÁπî„Åß„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„ÇπÈñãÁô∫„ÇíÊîØ„Åà„ÇãCICD„Éó„É©„ÉÉ„Éà„Éï„Ç©„Éº„É†Ë®≠Ë®à","link":"https://speakerdeck.com/hiroki_hasegawa/marutipurodakutonozu-zhi-demaikurosabisuakitekutiyawozhi-erucicdpuratutohuomushe-ji","contentSnippet":"\"FindyÈñãÁô∫ÁîüÁî£ÊÄßConference\" „ÅÆÁô∫Ë°®Ë≥áÊñô„Åß„Åô‚úäüèª\r\rÁîüÁî£ÊÄß„ÇíÊîØ„Åà„Çã„Åü„ÇÅ„ÅÆ„Éó„É©„ÉÉ„Éà„Éï„Ç©„Éº„É†„Ç®„É≥„Ç∏„Éã„Ç¢„É™„É≥„Ç∞‰∫ã‰æã„Å®„Åó„Å¶„ÄÅ‰ª•‰∏ã„ÅÆÔºì„Å§„ÅÆÂèñ„ÇäÁµÑ„Åø„ÇíÁ¥π‰ªã„Åó„Åæ„Åó„ÅüÔºÅ\r\r„Éª„Éó„É©„ÉÉ„Éà„Éï„Ç©„Éº„É†Ë®≠Ë®àÂ∞éÂÖ•„ÅÆ„Åü„ÇÅ„Å´„ÄÅÊ®™Êñ≠ÁöÑ„Ç≥„Éü„É•„Éã„Ç±„Éº„Ç∑„Éß„É≥„ÅåÂøÖË¶Å„Åß„ÅÇ„Çã\r„Éª„Éó„É©„ÉÉ„Éà„Éï„Ç©„Éº„É†„Ç®„É≥„Ç∏„Éã„Ç¢„É™„É≥„Ç∞„Åß„ÄÅ„Éû„É´„ÉÅ„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆÁîüÁî£ÊÄß„ÇíÊîØ„Åà„Çã\r„Éª„Éó„É©„ÉÉ„Éà„Éï„Ç©„Éº„É†„Ç®„É≥„Ç∏„Éã„Ç¢„É™„É≥„Ç∞„Åß„ÄÅÂêÑ„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„ÅÆÁîüÁî£ÊÄß„ÇíÊîØ„Åà„Çã\r\r‚ùì „ÅØ„Å¶„Å™„Å∂„Çç„ÅêË®ò‰∫ãÔºöhttps://hiroki-hasegawa.hatenablog.jp/entry/2024/07/01/120000\r\rüê¶ „ÉÑ„Ç§„Éº„ÉàÔºöhttps://x.com/Hiroki__IT/status/1806559579180011572\r\r‚úçüèª Á§æÂÜÖ„É¨„Éù„Éº„ÉàÔºöhttps://note.3-shake.com/n/n8efac1be167d\r\rüó£Ô∏è Áô∫Ë°®ÊñáÂ≠óËµ∑„Åì„ÅóÔºöhttps://findy-code.io/engineer-lab/dev-productivity-con-2024-3shake","isoDate":"2024-06-28T04:00:00.000Z","dateMiliSeconds":1719547200000,"authorName":"Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π","authorId":"hiroki-hasegawa"},{"title":"„ÄêIstio‚õµÔ∏è„ÄëIstio„Å´„Çà„Å£„Å¶ÊäΩË±°Âåñ„Åï„Çå„ÇãEnvoy„ÅÆHTTPS„É™„ÇØ„Ç®„Çπ„ÉàÂá¶ÁêÜ„ÅÆ‰ªïÁµÑ„Åø","link":"https://hiroki-hasegawa.hatenablog.jp/entry/2024/01/16/013404","contentSnippet":"„Åì„ÅÆË®ò‰∫ã„Åã„ÇâÂæó„Çâ„Çå„ÇãÁü•Ë≠ò„Åì„ÅÆË®ò‰∫ã„ÇíË™≠„ÇÄ„Å®„ÄÅ‰ª•‰∏ã„Çí \"ÂÆåÂÖ®„Å´ÁêÜËß£\" „Åß„Åç„Åæ„Åô‚úåÔ∏èIstio„ÅÆ„Çµ„Ç§„Éâ„Ç´„Éº„É°„ÉÉ„Ç∑„É•„ÇíÈ°åÊùê„Å´„Åó„ÅüEnvoy„ÅÆË®≠ÂÆö„ÅÆÊäΩË±°Âåñ„Å´„Å§„ÅÑ„Å¶Êßò„ÄÖ„Å™„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•„ÉÑ„Éº„É´ (Áâπ„Å´„ÄÅIstio„ÄÅConsul„ÄÅCilium„Å™„Å©) „Åß„ÇÇÊµÅÁî®„Åß„Åç„ÇãEnvoy„ÅÆÁü•Ë≠ò„Å´„Å§„ÅÑ„Å¶„Åì„ÅÆË®ò‰∫ã„Åã„ÇâÂæó„Çâ„Çå„ÇãÁü•Ë≠ò01. „ÅØ„Åò„ÇÅ„Å´02. Êßò„ÄÖ„Å™„É™„ÇΩ„Éº„Çπ„Å´„Çà„ÇãEnvoyË®≠ÂÆö„ÅÆÊäΩË±°Âåñ„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•Â§ñ„Åã„Çâ„ÅÆHTTPS„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„ÇπÈñì„ÅÆHTTPS„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•Â§ñ„Å∏„ÅÆHTTPS03. istio-proxy„Ç≥„É≥„ÉÜ„Éä„Å´„Çà„ÇãHTTPSÂá¶ÁêÜIstio„Ç≥„É≥„Éà„É≠„Éº„É´„Éó„É¨„Éº„É≥„ÅÆ‰ªïÁµÑ„Åø„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•Â§ñ„Åã„Çâ„ÅÆHTTPS„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„ÇπÈñì„ÅÆHTTPS„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•Â§ñ„Å∏„ÅÆHTTPS04. Envoy„Å´„Çà„ÇãHTTPSÂá¶ÁêÜEnvoy„ÅÆË®≠ÂÆö„ÅÆÁ®ÆÈ°û„Éï„Ç£„É´„Çø„Éº„Éï„Ç£„É´„Çø„Éº„ÅÆ‰∏ÄË¶ß„Éï„Ç£„É´„Çø„Éº„ÉÅ„Çß„Éº„É≥„ÅÆ‰ªïÁµÑ„Åø05. „É™„ÇΩ„Éº„Çπ„ÅÆË®≠ÂÆö„Åã„ÇâEnvoyË®≠ÂÆö„Å∏„ÅÆÁøªË®≥ÂêÑ„É™„ÇΩ„Éº„Çπ„Å®Envoy„ÅÆË®≠ÂÆö„ÅÆÈñ¢‰øÇ‰∏ÄË¶ß„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•Â§ñ„Åã„Çâ„ÅÆHTTPSEnvoy„ÅÆË®≠ÂÆö„ÇíÊäΩË±°Âåñ„Åô„Çã„É™„ÇΩ„Éº„Çπ‰∏ÄË¶ß„É™„ÇΩ„Éº„Çπ„Å®Envoy„ÅÆË®≠ÂÆö„ÅÆÂØæÂøúÈñ¢‰øÇistio-proxy„Ç≥„É≥„ÉÜ„ÉäÂÜÖ„ÅÆEnvoy„Å´ÂΩì„Å¶„ÅØ„ÇÅ„Çã„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„ÇπÈñì„ÅÆHTTPSEnvoy„ÅÆË®≠ÂÆö„ÇíÊäΩË±°Âåñ„Åô„Çã„É™„ÇΩ„Éº„Çπ‰∏ÄË¶ß„É™„ÇΩ„Éº„Çπ„Å®Envoy„ÅÆË®≠ÂÆö„ÅÆÂØæÂøúÈñ¢‰øÇistio-proxy„Ç≥„É≥„ÉÜ„ÉäÂÜÖ„ÅÆEnvoy„Å´ÂΩì„Å¶„ÅØ„ÇÅ„Çã„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•Â§ñ„Å∏„ÅÆHTTPSEnvoy„ÅÆË®≠ÂÆö„ÇíÊäΩË±°Âåñ„Åô„Çã„É™„ÇΩ„Éº„Çπ‰∏ÄË¶ß„É™„ÇΩ„Éº„Çπ„Å®Envoy„ÅÆË®≠ÂÆö„ÅÆÂØæÂøúÈñ¢‰øÇistio-proxy„Ç≥„É≥„ÉÜ„ÉäÂÜÖ„ÅÆEnvoy„Å´ÂΩì„Å¶„ÅØ„ÇÅ„Çã06. ÁøªË®≥„Åï„Çå„ÅüEnvoyË®≠ÂÆöÂÄ§„ÇíË¶ã„Å¶„Åø„ÇãEnvoy„ÅÆÁèæÂú®„ÅÆË®≠ÂÆö„ÇíÂá∫Âäõ„Åô„Çã„É™„Çπ„Éä„Éº„ÇíÂá∫Âäõ„Åô„Çã„É´„Éº„Éà„ÇíÂá∫Âäõ„Åô„Çã„ÇØ„É©„Çπ„Çø„Éº„ÇíÂá∫Âäõ„Åô„Çã„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„ÇíÂá∫Âäõ„Åô„ÇãË®ºÊòéÊõ∏„ÇíÂá∫Âäõ„Åô„Çã„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•Â§ñ„Åã„Çâ„ÅÆHTTPSÈÄÅ‰ø°ÂÖÉPodÂÅ¥„ÅÆistio-proxy„Ç≥„É≥„ÉÜ„ÉäÂÆõÂÖàPodÂÅ¥„ÅÆistio-proxy„Ç≥„É≥„ÉÜ„Éä„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„ÇπÈñì„ÅÆHTTPSÈÄÅ‰ø°ÂÖÉPodÂÅ¥„ÅÆistio-proxy„Ç≥„É≥„ÉÜ„ÉäÂÆõÂÖàPodÂÅ¥„ÅÆistio-proxy„Ç≥„É≥„ÉÜ„Éä„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•Â§ñ„Å∏„ÅÆHTTPSÈÄÅ‰ø°ÂÖÉPodÂÅ¥„ÅÆistio-proxy„Ç≥„É≥„ÉÜ„ÉäÂÆõÂÖàPod (Istio EgressGateway Pod) ÂÅ¥„ÅÆistio-proxy„Ç≥„É≥„ÉÜ„Éä07. „Åä„Çè„Çä„Å´Ë¨ùËæûË®ò‰∫ãÈñ¢ÈÄ£„ÅÆ„Åä„Åô„Åô„ÇÅÊõ∏Á±ç01. „ÅØ„Åò„ÇÅ„Å´„Å©„ÅÜ„ÇÇ„ÄÅ‰ø∫ (REMIX) feat. Istio„Éã„Ç≠ a.k.a. „ÅÑ„Åô„Å¶„ÅÉÁî∑„Åß„Åô„ÄÇIstio„ÅØ„ÄÅEnvoy„Çí‰ΩøÁî®„Åó„Åü„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•„ÇíÂÆüË£Ö„Åó„Åæ„Åô„ÄÇIstio„ÅåKubernetes„É™„ÇΩ„Éº„Çπ„ÇÑIstio„Ç´„Çπ„Çø„É†„É™„ÇΩ„Éº„Çπ„Å´Âü∫„Å•„ÅÑ„Å¶Envoy„ÅÆË®≠ÂÆö„ÇíÊäΩË±°Âåñ„Åó„Å¶„Åè„Çå„Çã„Åü„ÇÅ„ÄÅÈñãÁô∫ËÄÖ„ÅØEnvoy„Çí„Çà„ÇäÁ∞°Âçò„Å´Ë®≠ÂÆö„Åß„Åç„Åæ„Åô„ÄÇEnvoy„ÅÆË®≠ÂÆö„ÅÆÊäΩË±°Âåñ„ÅØ„ÄÅEnvoy„Çí‰ΩøÁî®„Åó„Åü„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É• (‰æãÔºöIstio„Çµ„Ç§„Éâ„Ç´„Éº„É°„ÉÉ„Ç∑„É•/„Ç¢„É≥„Éì„Ç®„É≥„Éà„É°„ÉÉ„Ç∑„É•„ÄÅConsul„ÄÅIstio„Åã„ÇâÂæó„Çâ„Çå„ÅüÂ≠¶„Å≥„ÇíÂúüÂè∞„Å´ÁôªÂ†¥„Åó„ÅüCilium„Çµ„Ç§„Éâ„Ç´„Éº„Éï„É™„Éº„É°„ÉÉ„Ç∑„É•„Å™„Å©) „Å´ÂÖ±ÈÄö„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ„Å§„Åæ„Çä„ÄÅÊ¨°„ÄÖ„Å´ÁôªÂ†¥„Åô„ÇãEnvoy„Å´„Çà„Çã„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•„ÉÑ„Éº„É´„Å´ÊåØ„ÇäÂõû„Åï„Çå„Å™„ÅÑ„Çà„ÅÜ„Å´„Åô„Çã„Åü„ÇÅ„Å´„ÅØ„ÄÅ„ÉÑ„Éº„É´„Åå„Å©„ÅÆ„Çà„ÅÜ„Å´Envoy„ÇíÊäΩË±°Âåñ„Åô„Çã„ÅÆ„Åã„ÇíÁêÜËß£„Åó„Å¶„Åä„ÅèÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ„Åù„Åì„Åß‰ªäÂõû„ÅØ„ÄÅIstio„Çµ„Ç§„Éâ„Ç´„Éº„É°„ÉÉ„Ç∑„É•„ÅåEnvoy„ÅÆHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÅÆÂá¶ÁêÜ„Çí„Å©„ÅÆ„Çà„ÅÜ„Å´ÊäΩË±°Âåñ„Åô„Çã„ÅÆ„Åã„ÇíËß£Ë™¨„Åó„Åæ„Åô„ÄÇ„Åæ„Åü„ÄÅÊäΩË±°Âåñ„Åï„Çå„ÅüEnvoy„ÅåHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÂá¶ÁêÜ„Åô„Çã‰ªïÁµÑ„Åø„ÇÇ‰∏ÄÁ∑í„Å´Ëß£Ë™¨„Åó„Åæ„Åô„ÄÇ„Åì„Çå„Çâ„ÅÆÁü•Ë≠ò„ÅØ„ÄÅÊßò„ÄÖ„Å™„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•„ÉÑ„Éº„É´„ÅßÊµÅÁî®„Åß„Åç„Çã„ÅØ„Åö„Åß„Åô„ÄÇ„Åù„Çå„Åß„ÅØ„ÄÅ„ÇÇ„Çä„ÇÇ„ÇäÂ∏ÉÊïô„Åó„Å¶„ÅÑ„Åç„Åæ„Åôüòó02. Êßò„ÄÖ„Å™„É™„ÇΩ„Éº„Çπ„Å´„Çà„ÇãEnvoyË®≠ÂÆö„ÅÆÊäΩË±°Âåñ„Åæ„Åö„ÅØ„ÄÅ„Å©„ÅÆ„Çà„ÅÜ„Å™„É™„ÇΩ„Éº„Çπ„ÅåHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÅÆÂá¶ÁêÜ„Å´Èñ¢‰øÇ„Åó„Å¶„ÅÑ„Çã„ÅÆ„Åã„Çí„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÅÆÊñπÂêë„Å´ÂàÜ„Åë„Å¶Ëß£Ë™¨„Åó„Å¶„ÅÑ„Åç„Åæ„Åô„ÄÇistio-proxy„Ç≥„É≥„ÉÜ„Éä„ÇÑEnvoy„Å´„Å§„ÅÑ„Å¶„ÅØ„ÄÅÊ¨°Á´†‰ª•Èôç„ÅßËß£Ë™¨„Åó„Åæ„Åô„ÄÇ„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•Â§ñ„Åã„Çâ„ÅÆHTTPS„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•Â§ñ„Åã„ÇâÂÜÖ„Å´HTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÈÄÅ‰ø°„Åô„ÇãÂ†¥Âêà„ÄÅ„É™„ÇΩ„Éº„Çπ„Åå‰ª•‰∏ã„ÅÆÈ†Ü„ÅßÁ¥ê‰ªò„Åç„ÄÅEnvoy„ÅÆË®≠ÂÆö„ÇíÊäΩË±°Âåñ„Åó„Åæ„Åô„ÄÇflowchart TD    ÈÄÅ‰ø°ÂÖÉ -.-\u003e|HTTPS| Gateway    Gateway([‚õµÔ∏è Gateway]) -.-\u003e VirtualService    VirtualService([‚õµÔ∏è VirtualService]) -.-\u003e DestinationRule    DestinationRule([‚õµÔ∏è DestinationRule]) -.-\u003e Service    Service([‚ò∏Ô∏è Service]) -.-\u003e Endpoints    Endpoints([‚ò∏Ô∏è Endpoints]) -.-\u003e|HTTPS| ÂÆõÂÖà    classDef sly fill: #CCFFFF, stroke: black;    class ÈÄÅ‰ø°ÂÖÉ sly    classDef yellow fill: #FFFF88, stroke: black;    class ÂÆõÂÖà yellow    classDef blue fill: #326CE5, color: white, stroke: black;    class Gateway,VirtualService,DestinationRule,Service,Endpoints blueÂêÑ„É™„ÇΩ„Éº„Çπ„ÅØ„ÄÅ‰ª•‰∏ã„ÅÆ‰ªïÁµÑ„Åø„Åß„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÈÄÅ‰ø°ÂÖÉ„Åã„ÇâÂÆõÂÖà„Åæ„ÅßÂ±ä„Åë„Åæ„Åô„ÄÇÂõ≥‰∏≠„ÅÆÁï™Âè∑„Å´Ê≤ø„Å£„Å¶„ÄÅÈÄö‰ø°„ÅÆ‰ªïÁµÑ„Åø„ÇíËß£Ë™¨„Åó„Åæ„Åô„ÄÇ„ÇØ„É©„Ç§„Ç¢„É≥„Éà„ÅØ„ÄÅ„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•Â§ñ„Åã„ÇâL7„É≠„Éº„Éâ„Éê„É©„É≥„Çµ„Éº„Å´HTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÈÄÅ‰ø°„Åó„Åæ„Åô„ÄÇL7„É≠„Éº„Éâ„Éê„É©„É≥„Çµ„Éº„ÅØ„ÄÅIstio IngressGateway Pod„Å´HTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÈÄÅ‰ø°„Åó„Åæ„Åô„ÄÇ„ÇÇ„Å°„Çç„Çì„ÄÅ„ÇØ„É©„Çπ„Çø„ÉºÂ§ñ„Åã„ÇâIstio IngressGateway Pod„Å´HTTP„É™„ÇØ„Ç®„Çπ„Éà„ÇíÈÄÅ‰ø°„Åô„Çã„Åü„ÇÅ„Å´„ÄÅService (‰æãÔºöNodePort Service) „ÅåÂøÖË¶Å„Åß„Åô„ÄÇIstio IngressGateway Pod„ÅØ„ÄÅÂÆõÂÖàPod„Å®„ÅÆÈñì„ÅßÁõ∏‰∫íTLSË™çË®º„ÇíÂÆüÊñΩ„Åó„Åæ„Åô„ÄÇIstio IngressGateway Pod„ÅØ„ÄÅKubernetes„É™„ÇΩ„Éº„Çπ (Service„ÄÅEndpoints) „ÇÑIstio„Ç´„Çπ„Çø„É†„É™„ÇΩ„Éº„Çπ (VirtualService„ÄÅDestinationRule) „Å´Âøú„Åò„Å¶„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÂÆõÂÖàPod„Å´L7„É≠„Éº„Éâ„Éê„É©„É≥„Ç∑„É≥„Ç∞„Åó„Åæ„Åô„ÄÇIstio Ingress vs. Kubernetes Ingress ‚Äì Daniel Watrous on Software and Cloud Engineering„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„ÇπÈñì„ÅÆHTTPS„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•ÂÜÖ„ÅÆPod„Åã„ÇâÂà•„ÅÆPod„Å´HTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÈÄÅ‰ø°„Åô„ÇãÂ†¥Âêà„ÄÅ„É™„ÇΩ„Éº„Çπ„Åå‰ª•‰∏ã„ÅÆÈ†Ü„ÅßÁ¥ê‰ªò„Åç„ÄÅEnvoy„ÅÆË®≠ÂÆö„ÇíÊäΩË±°Âåñ„Åó„Åæ„Åô„ÄÇflowchart TD    ÈÄÅ‰ø°ÂÖÉ -.-\u003e|HTTPS| VirtualService    VirtualService([‚õµÔ∏è VirtualService]) -.-\u003e DestinationRule    DestinationRule([‚õµÔ∏è DestinationRule]) -.-\u003e Service    Service([‚ò∏Ô∏è Service]) -.-\u003e Endpoints    Endpoints([‚ò∏Ô∏è Endpoints]) -.-\u003e|HTTPS| ÂÆõÂÖà    classDef sly fill: #CCFFFF, stroke: black;    class ÈÄÅ‰ø°ÂÖÉ sly    classDef yellow fill: #FFFF88, stroke: black;    class ÂÆõÂÖà yellow    classDef blue fill: #326CE5, color: white, stroke: black;    class VirtualService,DestinationRule,Service,Endpoints blueÂêÑ„É™„ÇΩ„Éº„Çπ„ÅØ„ÄÅ‰ª•‰∏ã„ÅÆ‰ªïÁµÑ„Åø„Åß„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÈÄÅ‰ø°ÂÖÉ„Åã„ÇâÂÆõÂÖà„Åæ„ÅßÂ±ä„Åë„Åæ„Åô„ÄÇÂõ≥‰∏≠„ÅÆÁï™Âè∑„Å´Ê≤ø„Å£„Å¶„ÄÅÈÄö‰ø°„ÅÆ‰ªïÁµÑ„Åø„ÇíËß£Ë™¨„Åó„Åæ„Åô„ÄÇÈÄÅ‰ø°ÂÖÉPod„ÅØ„ÄÅÂÆõÂÖàPod„Å®„ÅÆÈñì„ÅßÁõ∏‰∫íTLSË™çË®º„ÇíÂÆüÊñΩ„Åó„Åæ„Åô„ÄÇÈÄÅ‰ø°ÂÖÉPod„ÅØ„ÄÅKubernetes„É™„ÇΩ„Éº„Çπ (Service„ÄÅEndpoints) „ÇÑIstio„Ç´„Çπ„Çø„É†„É™„ÇΩ„Éº„Çπ (VirtualService„ÄÅDestinationRule) „ÅÆË®≠ÂÆö„Å´Âøú„Åò„Å¶„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÂÆõÂÖàPod„Å´L7„É≠„Éº„Éâ„Éê„É©„É≥„Ç∑„É≥„Ç∞„Åó„Åæ„Åô„ÄÇhttps://www.zhaohuabing.com/post/2018-09-25-istio-traffic-management-impl-intro/‚ñ∂Ô∏é „Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•ÂÜÖ„ÅÆPodÈñìÈÄö‰ø°„Å´kube-proxy„ÅØÂøÖË¶Å„Å™„ÅÆ„Åãistio-init„Ç≥„É≥„ÉÜ„Éä„ÅØ„ÄÅistio-iptables„Ç≥„Éû„É≥„Éâ„ÇíÂÆüË°å„Åó„ÄÅiptables„ÅÆ„É´„Éº„É´„ÇíÊõ∏„ÅçÊèõ„Åà„Åæ„Åô (Êú¨Ë®ò‰∫ã3Á´†ÂèÇÁÖß) „ÄÇ„Åì„Çå„Å´„Çà„Çä„ÄÅÈÄÅ‰ø°ÂÖÉPod„Åã„ÇâÂÆõÂÖàPod„Å´Áõ¥Êé•ÈÄö‰ø°„Åß„Åç„Çã„Çà„ÅÜ„Å´„Å™„Çä„Åæ„Åô„ÄÇTracing network path in Istio. Istio is among the most widely used‚Ä¶ | by Bikram Gupta | Medium„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•Â§ñ„Å∏„ÅÆHTTPS„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•ÂÜÖ„ÅÆPod„Åã„ÇâÂ§ñ„ÅÆ„Ç∑„Çπ„ÉÜ„É† (‰æãÔºö„Éá„Éº„Çø„Éô„Éº„Çπ„ÄÅ„Éâ„É°„Ç§„É≥„É¨„Ç§„É§„ÉºÂßîË≠≤ÂÖà„ÅÆÂ§ñÈÉ®API) „Å´HTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÈÄÅ‰ø°„Åô„ÇãÂ†¥Âêà„ÄÅ„É™„ÇΩ„Éº„Çπ„Åå‰ª•‰∏ã„ÅÆÈ†Ü„ÅßÁ¥ê‰ªò„Åç„ÄÅEnvoy„ÅÆË®≠ÂÆö„ÇíÊäΩË±°Âåñ„Åó„Åæ„Åô„ÄÇË§áÊï∞„ÅÆVirtualService„Å®Destination„ÅåÁôªÂ†¥„Åô„Çã„Åü„ÇÅ„ÄÅ„Åì„Çå„Çâ„Å´„ÅØ‰æøÂÆú‰∏ä X „Å® Y „Çí„Å§„Åë„Å¶„ÅÑ„Åæ„Åô„ÄÇflowchart TD    ÈÄÅ‰ø°ÂÖÉ -.-\u003e|HTTPS| VirtualServiceX    VirtualServiceX([‚õµÔ∏è VirtualService X]) -.-\u003e DestinationRuleX    DestinationRuleX([‚õµÔ∏è DestinationRule X]) -.-\u003e Service    Service([‚ò∏Ô∏è Service]) -.-\u003e Endpoints    Endpoints([‚ò∏Ô∏è Endpoints]) -.-\u003e Gateway    Gateway([‚õµÔ∏è Gateway]) -.-\u003e VirtualServiceY    VirtualServiceY([‚õµÔ∏è VirtualService Y]) -.-\u003e DestinationRuleY    DestinationRuleY([‚õµÔ∏è DestinationRule Y]) -.-\u003e ServiceEntry    ServiceEntry([‚õµÔ∏è ServiceEntry]) -.-\u003e|HTTPS| ÂÆõÂÖà    classDef sly fill: #CCFFFF, stroke: black;    class ÈÄÅ‰ø°ÂÖÉ sly    classDef yellow fill: #FFFF88, stroke: black;    class ÂÆõÂÖà yellow    classDef blue fill: #326CE5, color: white, stroke: black;    class Gateway,VirtualServiceX,VirtualServiceY,DestinationRuleX,DestinationRuleY,Service,Endpoints,ServiceEntry blueÂêÑ„É™„ÇΩ„Éº„Çπ„ÅØ„ÄÅ‰ª•‰∏ã„ÅÆ‰ªïÁµÑ„Åø„Åß„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÈÄÅ‰ø°ÂÖÉ„Åã„ÇâÂÆõÂÖà„Åæ„ÅßÂ±ä„Åë„Åæ„Åô„ÄÇÂõ≥‰∏≠„ÅÆÁï™Âè∑„Å´Ê≤ø„Å£„Å¶„ÄÅÈÄö‰ø°„ÅÆ‰ªïÁµÑ„Åø„ÇíËß£Ë™¨„Åó„Åæ„Åô„ÄÇÈÄÅ‰ø°ÂÖÉPod„ÅØ„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÅÆÂÆõÂÖà„ÅåServiceEntry„Åß„Ç®„É≥„Éà„É™Ê∏à„Åø„ÅãÂê¶„Åã„ÅÆË®≠ÂÆö„Å´Âøú„Åò„Å¶„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÅÆÂÆõÂÖà„ÇíÂàá„ÇäÊõø„Åà„Åæ„Åô„ÄÇÂÆõÂÖà„Åå„Ç®„É≥„Éà„É™Ê∏à„Åø„Åß„ÅÇ„Çå„Å∞„ÄÅÈÄÅ‰ø°ÂÖÉPod„ÅØHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÅÆÂÆõÂÖà„Å´Istio EgressGateway Pod„ÇíÈÅ∏Êäû„Åó„Åæ„Åô„ÄÇÂÆõÂÖà„ÅåÊú™„Ç®„É≥„Éà„É™„Åß„ÅÇ„Çå„Å∞„ÄÅÈÄÅ‰ø°ÂÖÉPod„ÅØHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÅÆÂÆõÂÖà„Å´Â§ñ„ÅÆ„Ç∑„Çπ„ÉÜ„É†„ÇíÈÅ∏Êäû„Åó„Åæ„Åô„ÄÇÈÄÅ‰ø°ÂÖÉPod„ÅØ„ÄÅIstio EgressGateway Pod„Å®„ÅÆÈñì„ÅßÁõ∏‰∫íTLSË™çË®º„ÇíÂÆüÊñΩ„Åó„Åæ„Åô„ÄÇ(1) „ÅßÂÆõÂÖà„Åå„Ç®„É≥„Éà„É™Ê∏à„Åß„ÅÇ„Å£„Åü„Å®„Åó„Åæ„Åô„ÄÇÈÄÅ‰ø°ÂÖÉPod„ÅØ„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÅÆÂêë„ÅçÂÖà„ÇíIstio EgressGateway Pod„Å´Â§âÊõ¥„Åó„Åæ„Åô„ÄÇÈÄÅ‰ø°ÂÖÉPod„ÅØ„ÄÅKubernetes„É™„ÇΩ„Éº„Çπ (Service„ÄÅEndpoints) „ÇÑIstio„Ç´„Çπ„Çø„É†„É™„ÇΩ„Éº„Çπ (VirtualService„ÄÅDestinationRule) „ÅÆË®≠ÂÆö„Å´Âøú„Åò„Å¶„ÄÅIstio EgressGateway Pod„Å´L7„É≠„Éº„Éâ„Éê„É©„É≥„Ç∑„É≥„Ç∞„Åó„Åæ„Åô„ÄÇIstio EgressGateway Pod„ÅØ„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„Çí„Ç®„É≥„Éà„É™Ê∏à„Ç∑„Çπ„ÉÜ„É†„Å´L7„É≠„Éº„Éâ„Éê„É©„É≥„Ç∑„É≥„Ç∞„Åó„Åæ„Åô„ÄÇUsing Istio to MITM our users‚Äô traffic | Steven ReitsmaIngress, egress, ServiceEntry DATA Flow issues for ISTIO API Gateway? - Discuss Istio‚ñ∂Ô∏é Istio EgressGateway„ÅÆÂøÖË¶ÅÊÄß„Å´„Å§„ÅÑ„Å¶istio-proxy„Ç≥„É≥„ÉÜ„Éä„ÇíÁµåÁî±„Åõ„Åö„Å´Â§ñÈÉ®„Ç∑„Çπ„ÉÜ„É†„Å´Áõ¥Êé•HTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÈÄÅ‰ø°„Åß„Åç„Çã„Çà„ÅÜ„Å´„Å™„Å£„Å¶„Åó„Åæ„ÅÑ„ÄÅ„Ç∑„Çπ„ÉÜ„É†„ÅÆÂÆâÂÖ®ÊÄß„Åå‰Ωé„Åè„Å™„Çä„Åæ„Åô„ÄÇ‰ªñ„Å´„ÄÅ„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•Â§ñ„Å∏„ÅÆÁâπÂÆö„ÅÆÈÄö‰ø°„ÇíË≠òÂà•„Åß„Åç„Çã„Çà„ÅÜ„Å´„Å™„Çã„É°„É™„ÉÉ„Éà„ÇÇ„ÅÇ„Çä„Åæ„Åô„ÄÇIstio / Accessing External ServicesIstioldie 1.10 / Egress Gateway Performance Investigation03. istio-proxy„Ç≥„É≥„ÉÜ„Éä„Å´„Çà„ÇãHTTPSÂá¶ÁêÜÂâçÁ´†„Åß„ÅØ„ÄÅKubernetes„É™„ÇΩ„Éº„Çπ„ÇÑIstio„Ç´„Çπ„Çø„É†„É™„ÇΩ„Éº„Çπ„Å´„Çà„Å£„Å¶ÊäΩË±°Âåñ„Åï„Çå„ÅüEnvoy„Åæ„ÅßË®ÄÂèä„Åó„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇÊú¨Á´†„Åß„ÅØ„ÄÅËß£Ë™¨„Çí„ÇÇ„ÅÜÂ∞ë„ÅóÂÖ∑‰ΩìÂåñ„Åó„Åæ„Åô„ÄÇIstio„ÅØ„ÄÅEnvoy„Éó„É≠„Çª„Çπ„ÇíÊåÅ„Å§istio-proxy„Ç≥„É≥„ÉÜ„Éä„Çí‰ΩúÊàê„Åó„Åæ„Åô„ÄÇ„Åì„ÅÆistio-proxy„Ç≥„É≥„ÉÜ„Éä„Çí‰ΩøÁî®„Åó„Å¶„Å©„ÅÆ„Çà„ÅÜ„Å´HTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÂá¶ÁêÜ„Åó„Å¶„ÅÑ„Çã„ÅÆ„Åã„Çí„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÅÆÊñπÂêë„Å´ÂàÜ„Åë„Å¶Ëß£Ë™¨„Åó„Åæ„Åô„ÄÇEnvoy„ÅÆË®≠ÂÆö„Å´„Å§„ÅÑ„Å¶„ÅØ„ÄÅÊ¨°Á´†‰ª•Èôç„ÅßËß£Ë™¨„Åó„Åæ„Åô„ÄÇIstio„Ç≥„É≥„Éà„É≠„Éº„É´„Éó„É¨„Éº„É≥„ÅÆ‰ªïÁµÑ„ÅøEnvoy„ÅÆË®≠ÂÆö„ÇíÊäΩË±°Âåñ„Åô„ÇãË≤¨Âãô„ÇíÊãÖ„ÅÜ„ÅÆ„ÅØ„ÄÅIstio„Ç≥„É≥„Éà„É≠„Éº„É´„Éó„É¨„Éº„É≥ (discovery„Ç≥„É≥„ÉÜ„Éä) „Åß„Åô„ÄÇIstio„Ç≥„É≥„Éà„É≠„Éº„É´„Éó„É¨„Éº„É≥„ÅØÁï∞„Å™„ÇãË≤¨Âãô„ÇíÊãÖ„ÅÜË§áÊï∞„ÅÆ„É¨„Ç§„É§„Éº„Åã„ÇâÊßãÊàê„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ„É¨„Ç§„É§„ÉºÂêç      Ë≤¨Âãô    Config ingestion„É¨„Ç§„É§„Éº            kube-apiserver„Åã„ÇâKubernetes„É™„ÇΩ„Éº„Çπ„ÇÑIstio„Ç´„Çπ„Çø„É†„É™„ÇΩ„Éº„Çπ„ÅÆË®≠ÂÆö„ÇíÂèñÂæó„Åó„Åæ„Åô„ÄÇIstio„ÅÆÂàùÊúü„Åã„ÇâÂêçÂâç„ÅØÂ§â„Çè„Å£„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ          Config translation„É¨„Ç§„É§„Éº                   „É™„ÇΩ„Éº„Çπ„ÅÆË®≠ÂÆö„ÇíEnvoyË®≠ÂÆö„Å´Â§âÊèõ„Åó„Åæ„Åô„ÄÇIstio„ÅÆÂàùÊúü„Åß„ÅØConfig Data Model„É¨„Ç§„É§„Éº„Å®„ÅÑ„ÅÜÂêçÂâç„Åß„ÄÅÂü∑Á≠ÜÊôÇÁÇπ (2024/01/16) „ÅßÂêçÂâç„ÅåÂ§â„Çè„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ          Config serving„É¨„Ç§„É§„Éº            Envoy„ÅÆË®≠ÂÆö„ÇÑË®ºÊòéÊõ∏„ÇíPodÂÜÖ„ÅÆistio-proxy„Ç≥„É≥„ÉÜ„Éä„Å´ÈÖçÂ∏É„Åó„Åæ„Åô„ÄÇIstio„ÅÆÂàùÊúü„Åß„ÅØ„ÄÅProxy Serving„É¨„Ç§„É§„Éº„Å®„ÅÑ„ÅÜÂêçÂâç„Åß„ÄÅÂü∑Á≠ÜÊôÇÁÇπ (2024/01/16) „ÅßÂêçÂâç„ÅåÂ§â„Çè„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ          Âõ≥‰∏≠„ÅÆÁï™Âè∑„Å´Ê≤ø„Å£„Å¶„ÄÅIstio„Ç≥„É≥„Éà„É≠„Éº„É´„Éó„É¨„Éº„É≥„ÅÆ‰ªïÁµÑ„Åø„ÇíËß£Ë™¨„Åó„Åæ„Åô„ÄÇConfig ingestion„É¨„Ç§„É§„Éº„Å´„Å¶„ÄÅ Istio„Ç≥„É≥„Éà„É≠„Éº„É´„Éó„É¨„Éº„É≥„ÅØkube-apiserver„Å´HTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÈÄÅ‰ø°„Åó„Åæ„Åô„ÄÇ„Åì„Åì„Åß„ÄÅKubernetes„É™„ÇΩ„Éº„Çπ„ÇÑIstio„Ç´„Çπ„Çø„É†„É™„ÇΩ„Éº„Çπ„ÅÆË®≠ÂÆö„ÇíÂèñÂæó„Åó„Åæ„Åô„ÄÇConfig translation„É¨„Ç§„É§„Éº„Å´„Å¶„ÄÅÂèñÂæó„Åó„Åü„É™„ÇΩ„Éº„Çπ„ÅÆË®≠ÂÆö„ÇíEnvoy„ÅÆË®≠ÂÆö„Å´Â§âÊèõ„Åó„Åæ„Åô„ÄÇConfig serving„É¨„Ç§„É§„Éº„Å´„Å¶„ÄÅEnvoy„ÅÆË®≠ÂÆö„ÇÑË®ºÊòéÊõ∏„ÇíPodÂÜÖ„ÅÆistio-proxy„Ç≥„É≥„ÉÜ„Éä„Å´ÈÖçÂ∏É„Åó„Åæ„Åô„ÄÇÂèåÊñπÂêë„Çπ„Éà„É™„Éº„Éü„É≥„Ç∞RPC„ÅÆ„Åü„ÇÅ„ÄÅistio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅåConfig serving„É¨„Ç§„É§„Éº„Å´„É™„ÇØ„Ç®„Çπ„Éà„ÇíÈÄÅ‰ø°„Åó„ÄÅ„Åì„Çå„Çâ„ÇíÂèñÂæó„Åô„Çã„Åì„Å®„ÇÇ„ÅÇ„Çä„Åæ„Åô„ÄÇistio/architecture/networking/pilot.md at 1.20.2 ¬∑ istio/istio ¬∑ GitHub‰∏ÄÊñáÂ∏¶‰Ω†ÂΩªÂ∫ïÂéòÊ∏Ö Isito ‰∏≠ÁöÑËØÅ‰π¶Â∑•‰ΩúÊú∫Âà∂-ËµµÂåñÂÜ∞ÁöÑÂçöÂÆ¢ | Zhaohuabing Blog‚ñ∂Ô∏é Config serving„É¨„Ç§„É§„Éº„Å´„ÅÇ„ÇãXDS-API„Å´„Å§„ÅÑ„Å¶‚ñ∂Ô∏é Istio„Ç´„Çπ„Çø„É†„É™„ÇΩ„Éº„Çπ„ÅÆ„Ç≥„É≥„Éà„É≠„Éº„É©„Éº„Å´„Å§„ÅÑ„Å¶istio/architecture/networking/pilot.md at 1.20.2 ¬∑ istio/istio ¬∑ GitHub„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•Â§ñ„Åã„Çâ„ÅÆHTTPS„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•Â§ñ„Åã„ÇâÂÜÖ„Å´HTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÈÄÅ‰ø°„Åô„ÇãÂ†¥Âêà„ÅÆistio-proxy„Ç≥„É≥„ÉÜ„Éä„Åß„Åô„ÄÇÂêÑ„É™„ÇΩ„Éº„Çπ„ÅØ„ÄÅ‰ª•‰∏ã„ÅÆ‰ªïÁµÑ„Åø„Åß„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÈÄÅ‰ø°ÂÖÉ„Åã„ÇâÂÆõÂÖà„Åæ„ÅßÂ±ä„Åë„Åæ„Åô„ÄÇÂõ≥‰∏≠„ÅÆÁï™Âè∑„Å´Ê≤ø„Å£„Å¶„ÄÅÈÄö‰ø°„ÅÆ‰ªïÁµÑ„Åø„ÇíËß£Ë™¨„Åó„Åæ„Åô„ÄÇIstio„Ç≥„É≥„Éà„É≠„Éº„É´„Éó„É¨„Éº„É≥„ÅØ„ÄÅÁøªË®≥„Åï„Çå„ÅüEnvoy„ÅÆË®≠ÂÆö„ÇíPodÂÜÖ„ÅÆistio-proxy„Ç≥„É≥„ÉÜ„Éä„Å´Êèê‰æõ„Åó„Åæ„Åô„ÄÇ„ÇØ„É©„Ç§„Ç¢„É≥„Éà„ÅØ„ÄÅ„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•Â§ñ„Åã„ÇâL7„É≠„Éº„Éâ„Éê„É©„É≥„Çµ„Éº„Å´HTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÈÄÅ‰ø°„Åó„Åæ„Åô„ÄÇL7„É≠„Éº„Éâ„Éê„É©„É≥„Çµ„Éº„ÅØ„ÄÅIstio IngressGateway Pod„Å´HTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÈÄÅ‰ø°„Åó„Åæ„Åô„ÄÇ„ÇÇ„Å°„Çç„Çì„ÄÅ„ÇØ„É©„Çπ„Çø„ÉºÂ§ñ„Åã„ÇâIstio IngressGateway Pod„Å´HTTP„É™„ÇØ„Ç®„Çπ„Éà„ÇíÈÄÅ‰ø°„Åô„Çã„Åü„ÇÅ„Å´„ÄÅService (‰æãÔºöNodePort Service) „ÅåÂøÖË¶Å„Åß„Åô„ÄÇIstio IngressGateway PodÂÜÖ„ÅÆiptables„ÅØ„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„Çíistio-proxy„Ç≥„É≥„ÉÜ„Éä„Å´ÈÄÅ‰ø°„Åó„Åæ„Åô („É™„ÉÄ„Ç§„É¨„ÇØ„Éà„ÅØ‰∏çË¶Å)„ÄÇIstio IngressGateway PodÂÜÖ„ÅÆistio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅØ„ÄÅÂÆõÂÖàPod„ÇíÊ±∫ÂÆö„Åó„ÄÅ„Åæ„Åü„Åì„ÅÆPod„Å´ÂØæ„Åó„Å¶Áõ∏‰∫íTLSË™çË®º„ÇíÂÆüÊñΩ„Åó„Åæ„Åô„ÄÇIstio IngressGateway PodÂÜÖ„ÅÆistio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅØ„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÂÆõÂÖàPod„Å´L7„É≠„Éº„Éâ„Éê„É©„É≥„Ç∑„É≥„Ç∞„Åó„Åæ„Åô„ÄÇÂÆõÂÖàPodÂÜÖ„ÅÆiptables„ÅØ„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„Çíistio-proxy„Ç≥„É≥„ÉÜ„Éä„Å´„É™„ÉÄ„Ç§„É¨„ÇØ„Éà„Åó„Åæ„Åô„ÄÇÂÆõÂÖàPodÂÜÖ„ÅÆistio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅØ„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÂÆõÂÖà„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„Å´ÈÄÅ‰ø°„Åó„Åæ„Åô„ÄÇIstio Ingress vs. Kubernetes Ingress ‚Äì Daniel Watrous on Software and Cloud Engineering‚ñ∂Ô∏é PodÂÜÖ„ÅÆiptables„Å´„Å§„ÅÑ„Å¶istio-proxy„Ç≥„É≥„ÉÜ„Éä„ÇíÁµåÁî±„Åô„Çã„Çà„ÅÜ„Å´„ÄÅistio-proxy„Ç≥„É≥„ÉÜ„Éä„Å´„É™„ÇØ„Ç®„Çπ„Éà„Çí„É™„ÉÄ„Ç§„É¨„ÇØ„Éà„Åó„Åæ„Åô„ÄÇiptables„ÅÆ„É´„Éº„É´„ÇíÊõ∏„ÅçÊèõ„Åà„Çã„ÅÆ„ÅØistio-init„Ç≥„É≥„ÉÜ„Éä„Åß„Åô„ÄÇIstio„ÅØ„ÄÅistio-proxy„Ç≥„É≥„ÉÜ„Éä„Å®Âêå„Åò„Çø„Ç§„Éü„É≥„Ç∞„Åß„ÄÅistio-init„Ç≥„É≥„ÉÜ„Éä„ÇíPod„Å´„Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥„Åó„Åæ„Åô (Istio IngressGateway„Å®Istio EgressGateway„ÅÆPod„ÅØÈô§„Åç„Åæ„Åô)„ÄÇÁîªÂÉèÂºïÁî®ÂÖÉÔºöSoByteistio-init„Ç≥„É≥„ÉÜ„Éä„ÅØ„ÄÅistio-iptables„Ç≥„Éû„É≥„Éâ„ÇíÂÆüË°å„Åó„ÄÅiptables„ÅÆ„É´„Éº„É´„ÇíÊõ∏„ÅçÊèõ„Åà„Åæ„Åô„ÄÇ„Åæ„Åü„ÄÅistio-init„Ç≥„É≥„ÉÜ„Éä„ÅØ„É´„Éº„É´„ÇíÊõ∏„ÅçÊèõ„Åà„ÅüÂæå„Å´ÁµÇ‰∫Ü„Åô„Çã„Åü„ÇÅ„ÄÅPod„ÅÆËµ∑ÂãïÂæå„Å´PodÂÜÖ„Å´ÊÆã„Çä„Åæ„Åõ„Çìüëçüèª$ istio-iptables \\    -p 15001 \\    -z 15006 \\    -u 1337 \\    -m REDIRECT \\    -i * \\    -x \\    -b * \\    -d 15090,15020Sidecar injection, transparent traffic hijacking, and routing process in Istio explained in detail | by Jimmy Song | MediumIstio / pilot-agent‚ñ∂Ô∏é Istio IngressGateway PodÂÜÖ„ÅÆiptables„Å´„Å§„ÅÑ„Å¶istio-proxy„Ç≥„É≥„ÉÜ„Éä„Å´„É™„ÇØ„Ç®„Çπ„Éà„Çí„É™„ÉÄ„Ç§„É¨„ÇØ„Éà„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ„Åù„ÅÆ„Åü„ÇÅ„ÄÅIstio„ÅØiptables„ÅÆ„É´„Éº„É´„ÇíÊõ∏„ÅçÊèõ„Åà„Çãistio-init„Ç≥„É≥„ÉÜ„Éä„ÇíIstio IngressGateway Pod„Å´„Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥„Åó„Åæ„Åõ„Çì„ÄÇ„Å§„Åæ„Çä„ÄÅIstio IngressGateway PodÂÜÖ„ÅÆiptables„ÅÆ„É´„Éº„É´„ÅØ„Éá„Éï„Ç©„É´„Éà„ÅÆ„Åæ„Åæ„Å´„Å™„Å£„Å¶„ÅÑ„Åæ„Åôüëçüèª„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„ÇπÈñì„ÅÆHTTPS„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•ÂÜÖ„ÅÆPod„Åã„ÇâÂà•„ÅÆPod„Å´HTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÈÄÅ‰ø°„Åô„ÇãÂ†¥Âêà„ÅÆistio-proxy„Ç≥„É≥„ÉÜ„Éä„Åß„Åô„ÄÇÂêÑ„É™„ÇΩ„Éº„Çπ„ÅØ„ÄÅ‰ª•‰∏ã„ÅÆ‰ªïÁµÑ„Åø„Åß„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÈÄÅ‰ø°ÂÖÉ„Åã„ÇâÂÆõÂÖà„Åæ„ÅßÂ±ä„Åë„Åæ„Åô„ÄÇÂõ≥‰∏≠„ÅÆÁï™Âè∑„Å´Ê≤ø„Å£„Å¶„ÄÅÈÄö‰ø°„ÅÆ‰ªïÁµÑ„Åø„ÇíËß£Ë™¨„Åó„Åæ„Åô„ÄÇIstio„Ç≥„É≥„Éà„É≠„Éº„É´„Éó„É¨„Éº„É≥„ÅØ„ÄÅÁøªË®≥„Åï„Çå„ÅüEnvoy„ÅÆË®≠ÂÆö„ÇíPodÂÜÖ„ÅÆistio-proxy„Ç≥„É≥„ÉÜ„Éä„Å´Êèê‰æõ„Åó„Åæ„Åô„ÄÇÈÄÅ‰ø°ÂÖÉPodÂÜÖ„ÅÆiptables„ÅØ„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„Çíistio-proxy„Ç≥„É≥„ÉÜ„Éä„Å´„É™„ÉÄ„Ç§„É¨„ÇØ„Éà„Åó„Åæ„Åô„ÄÇÈÄÅ‰ø°ÂÖÉPodÂÜÖ„ÅÆistio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅØ„ÄÅÂÆõÂÖàPod„ÇíÊ±∫ÂÆö„Åó„ÄÅ„Åæ„Åü„Åì„ÅÆPod„Å´ÂØæ„Åó„Å¶Áõ∏‰∫íTLSË™çË®º„ÇíÂÆüÊñΩ„Åó„Åæ„Åô„ÄÇÈÄÅ‰ø°ÂÖÉPodÂÜÖ„ÅÆistio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅØ„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÂÆõÂÖàPod„Å´L7„É≠„Éº„Éâ„Éê„É©„É≥„Ç∑„É≥„Ç∞„Åó„Åæ„Åô„ÄÇÂÆõÂÖàPodÂÜÖ„ÅÆiptables„ÅØ„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„Çíistio-proxy„Ç≥„É≥„ÉÜ„Éä„Å´„É™„ÉÄ„Ç§„É¨„ÇØ„Éà„Åó„Åæ„Åô„ÄÇÂÆõÂÖàPodÂÜÖ„ÅÆistio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅØ„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÂÆõÂÖà„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„Å´ÈÄÅ‰ø°„Åó„Åæ„Åô„ÄÇhttps://www.zhaohuabing.com/post/2018-09-25-istio-traffic-management-impl-intro/„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•Â§ñ„Å∏„ÅÆHTTPS„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•ÂÜÖ„ÅÆPod„Åã„ÇâÂ§ñ„ÅÆ„Ç∑„Çπ„ÉÜ„É† (‰æãÔºö„Éá„Éº„Çø„Éô„Éº„Çπ„ÄÅ„Éâ„É°„Ç§„É≥„É¨„Ç§„É§„ÉºÂßîË≠≤ÂÖà„ÅÆÂ§ñÈÉ®API) „Å´HTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÈÄÅ‰ø°„Åô„ÇãÂ†¥Âêà„ÅÆistio-proxy„Ç≥„É≥„ÉÜ„Éä„Åß„Åô„ÄÇÂêÑ„É™„ÇΩ„Éº„Çπ„ÅØ„ÄÅ‰ª•‰∏ã„ÅÆ‰ªïÁµÑ„Åø„Åß„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÈÄÅ‰ø°ÂÖÉ„Åã„ÇâÂÆõÂÖà„Åæ„ÅßÂ±ä„Åë„Åæ„Åô„ÄÇÂõ≥‰∏≠„ÅÆÁï™Âè∑„Å´Ê≤ø„Å£„Å¶„ÄÅÈÄö‰ø°„ÅÆ‰ªïÁµÑ„Åø„ÇíËß£Ë™¨„Åó„Åæ„Åô„ÄÇIstio„Ç≥„É≥„Éà„É≠„Éº„É´„Éó„É¨„Éº„É≥„ÅØ„ÄÅÁøªË®≥„Åï„Çå„ÅüEnvoy„ÅÆË®≠ÂÆö„ÇíPodÂÜÖ„ÅÆistio-proxy„Ç≥„É≥„ÉÜ„Éä„Å´Êèê‰æõ„Åó„Åæ„Åô„ÄÇÈÄÅ‰ø°ÂÖÉPodÂÜÖ„ÅÆiptables„ÅØ„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„Çíistio-proxy„Ç≥„É≥„ÉÜ„Éä„Å´„É™„ÉÄ„Ç§„É¨„ÇØ„Éà„Åó„Åæ„Åô„ÄÇÈÄÅ‰ø°ÂÖÉPodÂÜÖ„ÅÆistio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅØ„ÄÅÂÆõÂÖàPod„ÇíÊ±∫ÂÆö„Åó„ÄÅ„Åæ„Åü„Åì„ÅÆPod„Å´ÂØæ„Åó„Å¶Áõ∏‰∫íTLSË™çË®º„ÇíÂÆüÊñΩ„Åó„Åæ„Åô„ÄÇ„Åì„ÅÆÊôÇ„ÄÅServiceEntry„ÅßÂÆõÂÖà„Åå„Ç®„É≥„Éà„É™Ê∏à„Åø„ÅãÂê¶„Åã„Å´Âøú„Åò„Å¶„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÅÆÂÆõÂÖà„ÇíÂàá„ÇäÊõø„Åà„Åæ„Åô„ÄÇÂÆõÂÖà„Åå„Ç®„É≥„Éà„É™Ê∏à„Åø„Åß„ÅÇ„Çå„Å∞„ÄÅistio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅØHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÅÆÂÆõÂÖà„Å´Istio EgressGateway Pod„ÇíÈÅ∏Êäû„Åó„Åæ„Åô„ÄÇÂÆõÂÖà„ÅåÊú™„Ç®„É≥„Éà„É™„Åß„ÅÇ„Çå„Å∞„ÄÅistio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅØHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÅÆÂÆõÂÖà„Å´Â§ñ„ÅÆ„Ç∑„Çπ„ÉÜ„É†„ÇíÈÅ∏Êäû„Åó„Åæ„Åô„ÄÇ„Åì„Åì„Åß„ÅØ„ÄÅÂÆõÂÖà„Åå„Ç®„É≥„Éà„É™Ê∏à„Åß„ÅÇ„Å£„Åü„Å®„Åó„Åæ„Åô„ÄÇÈÄÅ‰ø°ÂÖÉPodÂÜÖ„ÅÆistio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅØ„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíIstio EgressGateway Pod„Å´L7„É≠„Éº„Éâ„Éê„É©„É≥„Ç∑„É≥„Ç∞„Åó„Åæ„Åô„ÄÇIstio EgressGateway PodÂÜÖ„ÅÆiptables„ÅØ„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„Çíistio-proxy„Ç≥„É≥„ÉÜ„Éä„Å´ÈÄÅ‰ø°„Åó„Åæ„Åô („É™„ÉÄ„Ç§„É¨„ÇØ„Éà„ÅØ‰∏çË¶Å)„ÄÇIstio EgressGateway PodÂÜÖ„ÅÆistio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅØ„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„Çí„Ç®„É≥„Éà„É™Ê∏à„Ç∑„Çπ„ÉÜ„É†„Å´L7„É≠„Éº„Éâ„Éê„É©„É≥„Ç∑„É≥„Ç∞„Åó„Åæ„Åô„ÄÇ‚ñ∂Ô∏é Istio EgressGateway PodÂÜÖ„ÅÆiptables„Å´„Å§„ÅÑ„Å¶istio-proxy„Ç≥„É≥„ÉÜ„Éä„Å´„É™„ÇØ„Ç®„Çπ„Éà„Çí„É™„ÉÄ„Ç§„É¨„ÇØ„Éà„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ„Åù„ÅÆ„Åü„ÇÅ„ÄÅIstio„ÅØiptables„ÅÆ„É´„Éº„É´„ÇíÊõ∏„ÅçÊèõ„Åà„Çãistio-init„Ç≥„É≥„ÉÜ„Éä„ÇíIstio EgressGateway Pod„Å´„Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥„Åó„Åæ„Åõ„Çì„ÄÇ„Å§„Åæ„Çä„ÄÅIstio EgressGateway PodÂÜÖ„ÅÆiptables„ÅÆ„É´„Éº„É´„ÅØ„Éá„Éï„Ç©„É´„Éà„ÅÆ„Åæ„Åæ„Å´„Å™„Å£„Å¶„ÅÑ„Åæ„ÅôüëçüèªUsing Istio to MITM our users‚Äô traffic | Steven ReitsmaIngress, egress, ServiceEntry DATA Flow issues for ISTIO API Gateway? - Discuss Istio04. Envoy„Å´„Çà„ÇãHTTPSÂá¶ÁêÜÂâçÁ´†„Åß„ÅØ„ÄÅistio-proxy„Ç≥„É≥„ÉÜ„ÉäÂÜÖ„ÅÆEnvoy„ÅÆË®≠ÂÆö„Åæ„Åß„ÄÅË®ÄÂèä„Åó„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇÊú¨Á´†„Åß„ÅØ„ÄÅ„ÇÇ„Å£„Å®ÂÖ∑‰ΩìÂåñ„Åó„Åæ„Åô„ÄÇEnvoy„ÅåHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÂá¶ÁêÜ„Åô„Çã‰ªïÁµÑ„Åø„ÇíËß£Ë™¨„Åó„Åæ„Åô„ÄÇEnvoy„ÅÆË®≠ÂÆö„ÅÆÁ®ÆÈ°ûHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÂá¶ÁêÜ„Åô„ÇãÂ†¥Âêà„ÄÅEnvoy„ÅÆË®≠ÂÆö„Åå‰ª•‰∏ã„ÅÆÈ†Ü„ÅßÁ¥ê‰ªò„Åç„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÈÄÅ‰ø°ÂÖÉ„Åã„ÇâÂÆõÂÖà„Åæ„ÅßÂ±ä„Åë„Åæ„Åô„ÄÇflowchart TD    ÈÄÅ‰ø°ÂÖÉ -.-\u003e|HTTPS| „É™„Çπ„Éä„Éº    „É™„Çπ„Éä„Éº(„É™„Çπ„Éä„Éº) -.-\u003e „É™„Çπ„Éä„Éº„Éï„Ç£„É´„Çø„Éº    subgraph  \"\"      „É™„Çπ„Éä„Éº„Éï„Ç£„É´„Çø„Éº(„É™„Çπ„Éä„Éº„Éï„Ç£„É´„Çø„Éº) -.-\u003e „Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ„Éï„Ç£„É´„Çø„Éº      „Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ„Éï„Ç£„É´„Çø„Éº(„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ„Éï„Ç£„É´„Çø„Éº) -.-\u003e HTTP„Éï„Ç£„É´„Çø„Éº    end    HTTP„Éï„Ç£„É´„Çø„Éº(HTTP„Éï„Ç£„É´„Çø„Éº) -.-\u003e „É´„Éº„Éà    „É´„Éº„Éà(„É´„Éº„Éà) -.-\u003e „ÇØ„É©„Çπ„Çø„Éº    „ÇØ„É©„Çπ„Çø„Éº(„ÇØ„É©„Çπ„Çø„Éº) -.-\u003e „Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà    „Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà(„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà) -.-\u003e|HTTPS| ÂÆõÂÖàclassDef sly fill: #CCFFFF, stroke: black;class ÈÄÅ‰ø°ÂÖÉ slyclassDef yellow fill: #FFFF88, stroke: black;class ÂÆõÂÖà yellowclassDef red fill: #EA6B66, font-weight :bold, stroke: black;class „É™„Çπ„Éä„Éº,„É™„Çπ„Éä„Éº„Éï„Ç£„É´„Çø„Éº,„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ„Éï„Ç£„É´„Çø„Éº,HTTP„Éï„Ç£„É´„Çø„Éº,„É´„Éº„Éà,„ÇØ„É©„Çπ„Çø„Éº,„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà redÂêÑÂá¶ÁêÜ„Åå„Å©„ÅÆ„Çà„ÅÜ„Å™Ë≤¨Âãô„ÇíÊãÖ„Å£„Å¶„ÅÑ„Çã„ÅÆ„Åã„Çí„ÇÇ„ÅÜÂ∞ë„ÅóË©≥„Åó„ÅèË¶ã„Å¶„Åø„Åæ„Åó„Çá„ÅÜ„ÄÇÂõ≥‰∏≠„ÅÆÁï™Âè∑„Å´Ê≤ø„Å£„Å¶„ÄÅEnvoy„ÅåHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÂá¶ÁêÜ„Åô„Çã‰ªïÁµÑ„Åø„ÇíËß£Ë™¨„Åó„Åæ„Åô„ÄÇÈÄÅ‰ø°ÂÖÉ„Åã„Çâ„ÅÆHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÅÆÂÆõÂÖà„Éù„Éº„Éà„Åß„ÄÅ„É™„Çπ„Éä„Éº„ÇíÁµû„ÇäËæº„Åø„Åæ„Åô„ÄÇÈÄö‰ø°„ÅÆÁ®ÆÈ°û (‰æãÔºöHTTP„ÄÅHTTPS„ÄÅTCP„ÄÅUDP„ÄÅUnix„Éâ„É°„Ç§„É≥„ÇΩ„Ç±„ÉÉ„Éà„Å™„Å©) „Å´Âøú„Åò„Å¶„Éï„Ç£„É´„Çø„Éº„ÇíÈÅ∏„Å≥„ÄÅÂêÑ„Éï„Ç£„É´„Çø„Éº„Åå„Éë„Ç±„ÉÉ„Éà„ÅÆ„Éò„ÉÉ„ÉÄ„Éº„ÇíÂá¶ÁêÜ„Åó„Åæ„Åô„ÄÇ„ÇÇ„ÅóHTTPS„Åß„ÅÇ„Çå„Å∞„ÄÅÈÄÅ‰ø°ÂÖÉ„Å®„ÅÆÈñì„ÅßTLSÊé•Á∂ö„ÇíÁ¢∫Á´ã„Åó„ÄÅ„Éë„Ç±„ÉÉ„Éà„ÅÆL7„ÅÆ„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„Éá„Éº„Çø„ÇíÂæ©Âè∑Âåñ„Åó„Åæ„Åô„ÄÇ„Éï„Ç£„É´„Çø„Éº„Çí‰ΩøÁî®„Åó„Å¶„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÅÆÂÆõÂÖà„Éù„Éº„Éà„Åß„ÄÅ„É´„Éº„Éà„ÇíÁµû„ÇäËæº„Åø„Åæ„Åô„ÄÇ„Éï„Ç£„É´„Çø„Éº„Çí‰ΩøÁî®„Åó„Å¶„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÅÆÂÆõÂÖà„Éõ„Çπ„Éà„ÇÑ„Éë„Çπ„Åß„ÄÅ„ÇØ„É©„Çπ„Çø„Éº„ÇíÁµû„ÇäËæº„Åø„Åæ„Åô„ÄÇË®≠ÂÆö„Åó„ÅüË≤†Ëç∑ÂàÜÊï£ÊñπÂºè (‰æãÔºö„É©„Ç¶„É≥„Éâ„É≠„Éì„É≥„Å™„Å©) „Å´Âøú„Åò„Å¶„ÄÅ„ÇØ„É©„Çπ„Çø„ÉºÈÖç‰∏ã„ÅÆ„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„ÇíÈÅ∏„Å≥„Åæ„Åô„ÄÇÂÆõÂÖà„Å®„ÅÆÈñì„ÅßTLSÊé•Á∂ö„ÇíÁ¢∫Á´ã„Åó„ÄÅ„Éë„Ç±„ÉÉ„Éà„ÅÆL7„ÅÆ„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„Éá„Éº„Çø„ÇíÊöóÂè∑Âåñ„Åó„Åæ„Åô„ÄÇ„Åù„Åó„Å¶„ÄÅ„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„Å´L7„É≠„Éº„Éâ„Éê„É©„É≥„Ç∑„É≥„Ç∞„Åó„Åæ„Åô„ÄÇLife of a Request ‚Äî envoy 1.34.0-dev-997cab documentation‚ñ∂ TCP„É™„ÇØ„Ç®„Çπ„Éà„ÇíÂá¶ÁêÜ„Åô„ÇãÂ†¥Âêà„Å´„Å§„ÅÑ„Å¶flowchart TD    ÈÄÅ‰ø°ÂÖÉ -.-\u003e|TCP| „É™„Çπ„Éä„Éº    „É™„Çπ„Éä„Éº(„É™„Çπ„Éä„Éº) -.-\u003e „É™„Çπ„Éä„Éº„Éï„Ç£„É´„Çø„Éº    subgraph  \"\"      „É™„Çπ„Éä„Éº„Éï„Ç£„É´„Çø„Éº(„É™„Çπ„Éä„Éº„Éï„Ç£„É´„Çø„Éº) -.-\u003e „Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ„Éï„Ç£„É´„Çø„Éº    end    „Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ„Éï„Ç£„É´„Çø„Éº(„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ„Éï„Ç£„É´„Çø„Éº) -.-\u003e „ÇØ„É©„Çπ„Çø„Éº    „ÇØ„É©„Çπ„Çø„Éº(„ÇØ„É©„Çπ„Çø„Éº) -.-\u003e „Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà    „Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà(„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà) -.-\u003e|TCP| ÂÆõÂÖàclassDef sly fill: #CCFFFF, stroke: black;class ÈÄÅ‰ø°ÂÖÉ slyclassDef yellow fill: #FFFF88, stroke: black;class ÂÆõÂÖà yellowclassDef red fill: #EA6B66, font-weight :bold, stroke: black;class „É™„Çπ„Éä„Éº,„É™„Çπ„Éä„Éº„Éï„Ç£„É´„Çø„Éº,„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ„Éï„Ç£„É´„Çø„Éº,„ÇØ„É©„Çπ„Çø„Éº,„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà redDebugging Your Debugging Tools: What to do When Your Service Mesh Goes Down | PPT„Éï„Ç£„É´„Çø„Éº„Éï„Ç£„É´„Çø„Éº„ÅÆ‰∏ÄË¶ßEnvoy„ÅÆ„Éï„Ç£„É´„Çø„Éº„ÅØ„ÄÅEnvoy„ÅÆÊ©üËÉΩ„ÇíÊã°Âºµ„Åô„Çã„Åü„ÇÅ„ÅÆË®≠ÂÆö„Åß„Åô„ÄÇHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÂá¶ÁêÜ„Åô„Çã„Åü„ÇÅ„Å´„ÅØ„ÄÅ„É™„Çπ„Éä„Éº„Éï„Ç£„É´„Çø„Éº„ÄÅ„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ„Éï„Ç£„É´„Çø„Éº„ÄÅHTTP„Éï„Ç£„É´„Çø„Éº„ÄÅ„Å®„ÅÑ„Å£„Åü„Éï„Ç£„É´„Çø„Éº„ÅåÂøÖË¶Å„Å´„Å™„Çä„Åæ„Åô„ÄÇÂÖ®„Å¶„ÅØËß£Ë™¨„Åó„Åç„Çå„Å™„ÅÑ„Åü„ÇÅ„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÂá¶ÁêÜ„Åô„Çã„Åü„ÇÅ„ÅÆ‰ª£Ë°®ÁöÑ„Å™„Éï„Ç£„É´„Çø„Éº„Çí„ÅÑ„Åè„Å§„ÅãÊäúÁ≤ã„Åó„Åæ„Åó„Åü„ÄÇ„Åü„Å†„ÄÅ Istio„ÅØ„Åì„Çå„Çâ„ÅÆ„Éï„Ç£„É´„Çø„Éº„Çí„Éá„Éï„Ç©„É´„Éà„ÅßÊúâÂäπ„Å´„Åó„Å¶„Åè„Çå„Å¶„ÅÑ„Çã „Åü„ÇÅ„ÄÅÈñãÁô∫ËÄÖ„ÅåEnvoy„ÅÆ„Éï„Ç£„É´„Çø„Éº„ÇíË®≠ÂÆö„Åô„ÇãÂ†¥Èù¢„ÅØÂ∞ë„Å™„ÅÑ„Åß„Åô„ÄÇÈÄÜ„Çí„ÅÑ„Åà„Å∞„ÄÅIstio„Çí‰ªã„Åï„Åö„Å´Envoy„Çí„Åù„ÅÆ„Åæ„Åæ‰ΩøÁî®„Åô„ÇãÂ†¥Âêà„ÄÅÈñãÁô∫ËÄÖ„ÅåEnvoy„ÅÆ„Éï„Ç£„É´„Çø„Éº„ÇíËá™Ââç„ÅßË®≠ÂÆö„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åôüëçüèª„Éï„Ç£„É´„Çø„Éº„ÅÆÁ®ÆÈ°û      HTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÅÆÂá¶ÁêÜ„Å´ÂøÖË¶Å„Å™„Éï„Ç£„É´„Çø„Éº(‰∏ÄÈÉ®ÊäúÁ≤ã)      Ë™¨Êòé    „É™„Çπ„Éä„Éº„Éï„Ç£„É´„Çø„Éº      Original Destination      istio-proxy„Ç≥„É≥„ÉÜ„Éä„Å∏„ÅÆ„É™„ÉÄ„Ç§„É¨„ÇØ„ÉàÂâç„ÅÆÂÆõÂÖàÊÉÖÂ†±„ÇíEnvoy„ÅåÂèñÂæó„Åß„Åç„Çã„Çà„ÅÜ„Å´„Åó„Åæ„Åô„ÄÇPodÂÜÖ„ÅÆiptables„ÅåHTTPS„É™„ÇØ„Ç®„Çπ„Éà„Çíistio-proxy„Ç≥„É≥„ÉÜ„Éä„Å´„É™„ÉÄ„Ç§„É¨„ÇØ„Éà„Åô„Çã„Å®„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÅÆÂÆõÂÖà„Ååistio-proxy„Ç≥„É≥„ÉÜ„Éä„Å´Â§â„Çè„Å£„Å¶„Åó„Åæ„ÅÑ„Åæ„Åô„ÄÇ„Åü„Å†„Åó„ÄÅiptables„ÅØ„É™„ÉÄ„Ç§„É¨„ÇØ„ÉàÂâç„ÅÆÂÆõÂÖà„Çí„Ç´„Éº„Éç„É´‰∏ä„ÅÆSO_ORIGINAL_DST„Å®„ÅÑ„ÅÜÂÆöÊï∞„Å´Ê†ºÁ¥ç„Åó„Å¶„Åè„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇEnvoy„ÅØ„ÄÅ„Ç´„Éº„Éç„É´‰∏ä„ÅÆSO_ORIGINAL_DST„Åã„ÇâÊú¨Êù•„ÅÆÂÆõÂÖà„ÇíÂèñÂæó„Åó„ÄÅ„Éó„É≠„Ç≠„Ç∑„Åó„Åæ„Åô„ÄÇ    HTTP Inspector      Envoy„ÅåHTTP„ÇíÊ§úÁü•„Åß„Åç„Çã„Çà„ÅÜ„Å´„Åó„Åæ„Åô„ÄÇ    TLS Inspector      Envoy„ÅåTLS„ÇíÊ§úÁü•„Åß„Åç„Çã„Çà„ÅÜ„Å´„Åó„Åæ„Åô„ÄÇTLS„ÇíÊ§úÁü•„Åó„ÅüÂ†¥Âêà„ÄÅEnvoy„ÅØTLS„Å´Èñ¢„Åô„ÇãÂá¶ÁêÜ„ÇíÂÆüË°å„Åó„Åæ„Åô„ÄÇ‰æã„Åà„Å∞„ÄÅDownstreamTlsContext„ÅØ„ÄÅ„É™„Çπ„Éä„Éº„Éï„Ç£„É´„Çø„ÉºÁõ¥Âæå„Å´„ÄÅÈÄÅ‰ø°ÂÖÉ„Å®„ÅÆÈñì„ÅßTLSÊé•Á∂ö„ÇíÁ¢∫Á´ã„Åó„ÄÅ„Éë„Ç±„ÉÉ„Éà„ÅÆL7„ÅÆ„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„Éá„Éº„Çø„ÇíÂæ©Âè∑Âåñ„Åó„Åæ„Åô„ÄÇ„Åæ„Åü„ÄÅUpstreamTlsContext„ÅØ„ÄÅ„ÇØ„É©„Çπ„Çø„Éº„ÅÆÂá¶ÁêÜÊôÇ„Å´„ÄÅÂÆõÂÖà„Å®„ÅÆÈñì„ÅßTLSÊé•Á∂ö„ÇíÁ¢∫Á´ã„Åó„ÄÅL7„ÅÆ„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„Éá„Éº„Çø„ÇíÊöóÂè∑Âåñ„Åó„Åæ„Åô„ÄÇ    „Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ„Éï„Ç£„É´„Çø„Éº      HTTP connection manager      Envoy„Åå„ÄÅL7„ÅÆ„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„Éá„Éº„Çø„ÇíË™≠„ÅøÂèñ„Çä„ÄÅ„Åæ„ÅüÂæåÁ∂ö„ÅÆHTTP„Éï„Ç£„É´„Çø„Éº„ÇíÂà∂Âæ°„Åß„Åç„Çã„Çà„ÅÜ„Å´„Åó„Åæ„Åô„ÄÇ    HTTP„Éï„Ç£„É´„Çø„Éº      Router      Envoy„Åå„Éù„Éº„ÉàÁï™Âè∑„Åß„É´„Éº„Éà„ÄÅ„Éõ„Çπ„Éà„ÇÑ„Éë„Çπ„Åß„ÇØ„É©„Çπ„Çø„Éº„ÇíÁµû„ÇäËæº„ÇÅ„Çã„Çà„ÅÜ„Å´„Åó„Åæ„Åô„ÄÇ    gRPC-Web      Envoy„ÅåHTTP/1.1„ÅßÂèó‰ø°„Åó„ÅüHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíHTTP/2„Å´Â§âÊèõ„Åó„ÄÅgRPC„Çµ„Éº„Éê„Éº„Å´„Éó„É≠„Ç≠„Ç∑„Åß„Åç„Çã„Çà„ÅÜ„Å´„Åó„Åæ„Åô„ÄÇ    Filters ‚Äî envoy 1.34.0-dev-997cab documentation‚ñ∂Ô∏é Istio„Åå„Éá„Éï„Ç©„É´„Éà„ÅßÊúâÂäπ„Å´„Åô„ÇãEnvoy„ÅÆË®≠ÂÆö„Å´„Å§„ÅÑ„Å¶istio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅØ„ÄÅ„Ç§„É°„Éº„Ç∏„ÅÆ„Éì„É´„ÉâÊôÇ„Å´„ÄÅ„ÅÇ„Çâ„Åã„Åò„ÇÅÁî®ÊÑè„Åó„Å¶„Åä„ÅÑ„ÅüEnvoy„ÅÆË®≠ÂÆö„Éï„Ç°„Ç§„É´„ÇíÁµÑ„ÅøËæº„Åø„Åæ„Åô„ÄÇ„Åù„ÅÆ„Åü„ÇÅ„ÄÅistio-proxy„Ç≥„É≥„ÉÜ„ÉäÂÜÖ„ÅÆEnvoy„ÅØ„ÄÅÂ§ö„Åè„ÅÆË®≠ÂÆö„Çí„Éá„Éï„Ç©„É´„Éà„ÅßÊúâÂäπ„Å´„Åß„Åç„Åæ„Åô„ÄÇIstio„ÇíÂà©Áî®„Åô„ÇãÈñãÁô∫ËÄÖ„Åå„ÄÅEnvoy„ÅåHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÂá¶ÁêÜ„Åô„Çã„Åü„ÇÅ„Å´ÂøÖË¶Å„Å™„Éï„Ç£„É´„Çø„Éº„ÇíÊúâÂäπ„Å´„Åó„Å™„Åè„Å¶„Çà„ÅÑ„ÅÆ„ÇÇ„ÄÅIstio„ÅÆ„Åä„Åã„Åí„Åß„Åô„ÄÇIstio„Åª„Çì„Åæ„Å´„ÅÇ„Çä„Åå„Å®„Å™üôèüôèüôè  istio/pilot/docker/Dockerfile.proxyv2 at 1.20.2 ¬∑ istio/istio ¬∑ GitHubistio/tools/packaging/common/envoy_bootstrap.json at 1.20.2 ¬∑ istio/istio ¬∑ GitHub„Éï„Ç£„É´„Çø„Éº„ÉÅ„Çß„Éº„É≥„ÅÆ‰ªïÁµÑ„ÅøEnvoy„ÅØ„ÄÅË§áÊï∞„ÅÆ„Éï„Ç£„É´„Çø„Éº„Åã„Çâ„Å™„Çã„Éï„Ç£„É´„Çø„Éº„ÉÅ„Çß„Éº„É≥„ÇíÂÆüË°å„Åó„ÄÅHTTPS„ÇíÂá¶ÁêÜ„Åó„Åæ„Åô„ÄÇÂõ≥‰∏≠„ÅÆÁï™Âè∑„Å´Ê≤ø„Å£„Å¶„ÄÅEnvoy„ÅÆ„Éï„Ç£„É´„Çø„Éº„ÉÅ„Çß„Éº„É≥„ÅÆ‰ªïÁµÑ„Åø„ÇíËß£Ë™¨„Åó„Åæ„Åô„ÄÇÂêÑ„Éï„Ç£„É´„Çø„Éº„ÅÆÊ©üËÉΩ„ÅØ„ÄÅÂâçËø∞„Åó„Åü„Éï„Ç£„É´„Çø„Éº„ÅÆ‰∏ÄË¶ß„ÇíÂèÇËÄÉ„Å´„Åó„Å¶„Åè„Å†„Åï„ÅÑüôáüèª„É™„Çπ„Éä„Éº„Éï„Ç£„É´„Çø„Éº (Original Destination„ÄÅHTTP Inspector„ÄÅTLS Inspector„Å™„Å©) „ÇíÂÆüË°å„Åó„Åæ„Åô„ÄÇ(1) „ÅßTLS Inspector„ÅåTLS„ÇíÊ§úÁü•„Åó„ÅüÂ†¥Âêà„ÄÅDownstreamTlsContext„ÅßÂÆõÂÖà„Å®TLS„Éè„É≥„Éâ„Ç∑„Çß„Ç§„ÇØ„ÇíÂÆüË°å„Åó„ÄÅ„Éë„Ç±„ÉÉ„Éà„ÅÆL7„ÅÆ„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„Éá„Éº„Çø„ÇíÂæ©Âè∑Âåñ„Åó„Åæ„Åô„ÄÇ„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ„Éï„Ç£„É´„Çø„Éº (HTTP connection manager„Å™„Å©) „ÇíÂÆüË°å„Åó„Åæ„Åô„ÄÇHTTP„Éï„Ç£„É´„Çø„Éº (Router„ÄÅgRPC-Web„Å™„Å©) „ÇíÂÆüË°å„Åó„Åæ„Åô„ÄÇLife of a Request ‚Äî envoy 1.34.0-dev-997cab documentation‚ñ∂ TCP„É™„ÇØ„Ç®„Çπ„Éà„ÇíÂá¶ÁêÜ„Åô„ÇãÂ†¥Âêà„Å´„Å§„ÅÑ„Å¶TCP proxy ‚Äî envoy 1.34.0-dev-997cab documentation05. „É™„ÇΩ„Éº„Çπ„ÅÆË®≠ÂÆö„Åã„ÇâEnvoyË®≠ÂÆö„Å∏„ÅÆÁøªË®≥„ÅÑ„Çà„ÅÑ„Çà„Åß„Åôüî•Istio„ÅåÂêÑ„É™„ÇΩ„Éº„Çπ„Çí„ÅÑ„Åö„Çå„ÅÆEnvoy„ÅÆË®≠ÂÆö„Å´ÁøªË®≥„Åó„Å¶„ÅÑ„Çã„ÅÆ„Åã„ÇíËß£Ë™¨„Åó„Åæ„Åô„ÄÇË°®„ÅßÂØæÂøúÈñ¢‰øÇ„ÅÆ‰∏ÄË¶ß„ÇíÁ§∫„Åó„ÅüÂæå„ÄÅistio-proxy„Ç≥„É≥„ÉÜ„ÉäÂÜÖ„ÅÆEnvoy„Å´ÂΩì„Å¶„ÅØ„ÇÅ„Åæ„Åó„Åü„ÄÇÂêÑ„É™„ÇΩ„Éº„Çπ„Å®Envoy„ÅÆË®≠ÂÆö„ÅÆÈñ¢‰øÇ‰∏ÄË¶ßIstio„Ç≥„É≥„Éà„É≠„Éº„É´„Éó„É¨„Éº„É≥„ÅØ„ÄÅKubernetes„É™„ÇΩ„Éº„Çπ„ÇÑIstio„Ç´„Çπ„Çø„É†„É™„ÇΩ„Éº„Çπ„ÅÆË®≠ÂÆö„ÇíEnvoy„ÅÆË®≠ÂÆö„Å´ÁøªË®≥„Åó„ÄÅÂá¶ÁêÜ„ÅÆÊµÅ„Çå„Å´ÂΩì„Å¶„ÅØ„ÇÅ„Åæ„Åô„ÄÇ‰ª•‰∏ã„ÅÆÈÄö„Çä„ÄÅÂêÑ„É™„ÇΩ„Éº„Çπ„Åå„ÅÑ„Åö„Çå„ÅÆEnvoy„ÅÆË®≠ÂÆö„ÇíÊäΩË±°Âåñ„Åô„Çã„ÅÆ„Åã„ÇíÊï¥ÁêÜ„Åó„Åæ„Åó„Åü„ÄÇ„É™„ÇΩ„Éº„Çπ„Å´„Çà„Å£„Å¶„ÅØ„ÄÅEnvoy„ÅÆË§áÊï∞„ÅÆË®≠ÂÆö„ÇíÊäΩË±°Âåñ„Åó„Åæ„Åô„ÄÇ„Å™„Åä„ÄÅIstio„ÅÆÁî®ÊÑè„Åó„ÅüEnvoy„ÅÆ„Éï„Ç£„É´„Çø„Éº„ÅÆ„Éá„Éï„Ç©„É´„ÉàÂÄ§„ÇíÂ§âÊõ¥„Åô„Çã„É¶„Éº„Çπ„Ç±„Éº„Çπ„ÅåÂ∞ë„Å™„ÅÑ„Åü„ÇÅ„ÄÅ„Åì„Çå„ÇíÊäΩË±°Âåñ„Åô„ÇãEnvoyFilter„Å´„Å§„ÅÑ„Å¶„ÅØË®ÄÂèä„Åó„Åæ„Åõ„Çì„ÄÇ      Kubernetes ‚ò∏Ô∏è„É™„ÇΩ„Éº„Çπ      Istio ‚õµÔ∏è„Ç´„Çπ„Çø„É†„É™„ÇΩ„Éº„Çπ    Envoy„ÅÆË®≠ÂÆö      Service      Endpoints      Gateway      VirtualService      DestinationRule      ServiceEntry      PeerAuthentication    „É™„Çπ„Éä„Éº      ‚úÖ            ‚úÖ      ‚úÖ                  ‚úÖ    „É´„Éº„Éà      ‚úÖ                  ‚úÖ                      „ÇØ„É©„Çπ„Çø„Éº      ‚úÖ                        ‚úÖ      ‚úÖ      ‚úÖ    „Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà            ‚úÖ                  ‚úÖ      ‚úÖ          Debugging Your Debugging Tools: What to do When Your Service Mesh Goes Down | PPT- YouTube„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•Â§ñ„Åã„Çâ„ÅÆHTTPSEnvoy„ÅÆË®≠ÂÆö„ÇíÊäΩË±°Âåñ„Åô„Çã„É™„ÇΩ„Éº„Çπ‰∏ÄË¶ß„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•Â§ñ„Åã„Çâ„ÅÆHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÂá¶ÁêÜ„Åô„ÇãÂ†¥Âêà„Å´Èñ¢‰øÇ„Åô„Çã„É™„ÇΩ„Éº„Çπ„ÇíÊäúÁ≤ã„Åó„Åæ„Åó„Åü„ÄÇGateway„ÅØ„ÄÅIstio IngressGateway„ÅÆ‰∏ÄÈÉ®„Å®„Åó„Å¶‰ΩøÁî®„Åó„Åæ„Åô„ÄÇServiceEntry„ÅØ„ÄÅ‰ΩøÁî®„Åó„Å™„ÅÑ„É™„ÇΩ„Éº„Çπ„ÅÆ„Åü„ÇÅ„ÄÅ√ó„Å®„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ      Kubernetes ‚ò∏Ô∏è„É™„ÇΩ„Éº„Çπ      Istio ‚õµÔ∏è„Ç´„Çπ„Çø„É†„É™„ÇΩ„Éº„Çπ    Envoy„ÅÆË®≠ÂÆö      Service      Endpoints      Gateway      VirtualService      DestinationRule      ServiceEntry      PeerAuthentication    „É™„Çπ„Éä„Éº      ‚úÖ            ‚úÖ      ‚úÖ            √ó      ‚úÖ    „É´„Éº„Éà      ‚úÖ                  ‚úÖ            √ó          „ÇØ„É©„Çπ„Çø„Éº      ‚úÖ                        ‚úÖ      √ó      ‚úÖ    „Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà            ‚úÖ                  ‚úÖ      √ó          „É™„ÇΩ„Éº„Çπ„Å®Envoy„ÅÆË®≠ÂÆö„ÅÆÂØæÂøúÈñ¢‰øÇÈÄÅ‰ø°ÂÖÉ„Åæ„Åü„ÅØÂÆõÂÖàEnvoy„Å´ÂàÜ„Åë„Çã„Å®„ÄÅÂêÑ„É™„ÇΩ„Éº„Çπ„ÅØ‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å´Envoy„ÅÆË®≠ÂÆö„ÇíÊäΩË±°Âåñ„Åó„Åæ„Åô„ÄÇË©±„ÇíÁ∞°Âçò„Å´„Åô„Çã„Åü„ÇÅ„Å´„ÄÅÈÄÅ‰ø°ÂÖÉ„Å®ÂÆõÂÖà„ÅØÂêå„ÅòNamespace„Å´„ÅÇ„Çã„Å®‰ªÆÂÆö„Åó„Åæ„Åô„ÄÇÈÄÅ‰ø°ÂÖÉEnvoy„ÅßHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÅÆÂÆõÂÖà„ÇíÊ±∫„ÇÅ„ÇãË®≠ÂÆö„ÄÅ„Åæ„Åü„ÅØÂÆõÂÖàEnvoy„ÅßHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÂèó‰ø°„Åô„ÇãË®≠ÂÆö„Çí„ÄÅÂêå„Åò„É™„ÇΩ„Éº„Çπ„ÅåÊäΩË±°Âåñ„Åó„Åæ„Åô„ÄÇ      Kubernetes ‚ò∏Ô∏è„É™„ÇΩ„Éº„Çπ       Istio ‚õµÔ∏è„Ç´„Çπ„Çø„É†„É™„ÇΩ„Éº„Çπ     Envoy„ÅÆË®≠ÂÆö      Service      Endpoints      Gateway      VirtualService      DestinationRule      PeerAuthentication    ÈÄÅ‰ø°ÂÖÉ      „É™„Çπ„Éä„Éº      ‚úÖ            ‚úÖ      ‚úÖ            ‚úÖ    „É´„Éº„Éà      ‚úÖ                  ‚úÖ                „ÇØ„É©„Çπ„Çø„Éº      ‚úÖ                        ‚úÖ      ‚úÖ    „Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà            ‚úÖ                  ‚úÖ          ÂÆõÂÖà      „É™„Çπ„Éä„Éº      ‚úÖ                  ‚úÖ            ‚úÖ    „É´„Éº„Éà      ‚úÖ                  ‚úÖ                „ÇØ„É©„Çπ„Çø„Éº      ‚úÖ                        ‚úÖ      ‚úÖ    „Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà            ‚úÖ                  ‚úÖ          ‚ñ∂Ô∏é ÈÄÅ‰ø°ÂÖÉ„Å®ÂÆõÂÖà„ÅÆNamespace„Å´„Å§„ÅÑ„Å¶istio-ingress) „Å´„Åä„ÅÑ„ÅüÊñπ„ÅåËâØ„ÅÑ„Åß„Åô„ÄÇ„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„Å®„ÅØÁï∞„Å™„ÇãNamespace„Å´Istio IngressGateway„ÇíÁΩÆ„Åè„Åì„Å®„Åß„ÄÅIstio IngressGateway„Çí„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„Åó„ÇÑ„Åô„Åè„Å™„Å£„Åü„Çä„ÄÅ‰ªñ„Åã„ÇâÈöúÂÆ≥„ÅÆÂΩ±Èüø„ÇíÂèó„Åë„Å´„Åè„Åè„Å™„Çä„Åæ„ÅôüôÜüèª‚Äç‚ôÇÔ∏èistio-proxy„Ç≥„É≥„ÉÜ„ÉäÂÜÖ„ÅÆEnvoy„Å´ÂΩì„Å¶„ÅØ„ÇÅ„Çã„Åì„ÅÆË°®„Çí„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÅÆ‰ªïÁµÑ„Åø„ÅÆ‰∏≠„Å´ÂΩì„Å¶„ÅØ„ÇÅ„Çã„Å®„ÄÅ‰ª•‰∏ã„Å´„Å™„Çä„Åæ„Åô„ÄÇÂºïÁî®„Åó„ÅüÂâçËø∞„ÅÆËß£Ë™¨„ÅÆ„Ç§„É°„Éº„Ç∏„ÅåÊé¥„ÇÅ„Çã„Åã„Å®ÊÄù„ÅÑ„Åæ„Åô„ÄÇÈÄÅ‰ø°ÂÖÉ„Åæ„Åü„ÅØÂÆõÂÖàEnvoy„Åß„Åª„Å®„Çì„Å©Âêå„Åò„É™„ÇΩ„Éº„Çπ„ÅåÁôªÂ†¥„Åó„Åæ„Åô„Åå„ÄÅ Gateway„ÅØÈÄÅ‰ø°ÂÖÉEnvoy„Å†„Åë„ÅßÁôªÂ†¥„Åó„Åæ„Åô„ÄÇ„É™„ÇΩ„Éº„Çπ„ÅÆÁ®ÆÈ°û„Å†„Åë„Å´ÁùÄÁõÆ„Åô„Çã„Å®„ÄÅ‰ª•‰∏ã„Å´„Å™„Çä„Åæ„Åô„ÄÇGateway„ÅåÈÄÅ‰ø°ÂÖÉEnvoy„Å†„Åë„ÅßÁôªÂ†¥„Åô„Çã„Åì„Å®„Åå„Çè„Åã„Çä„ÇÑ„Åô„Åè„Å™„Çä„Åæ„Åó„Åü„ÄÇ„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„ÇπÈñì„ÅÆHTTPSEnvoy„ÅÆË®≠ÂÆö„ÇíÊäΩË±°Âåñ„Åô„Çã„É™„ÇΩ„Éº„Çπ‰∏ÄË¶ß„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•ÂÜÖ„ÅÆPod„Åã„ÇâÂà•„ÅÆPod„Å∏„ÅÆHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÂá¶ÁêÜ„Åô„ÇãÂ†¥Âêà„Å´Èñ¢‰øÇ„Åô„Çã„É™„ÇΩ„Éº„Çπ„ÇíÊäúÁ≤ã„Åó„Åæ„Åó„Åü„ÄÇGateway„Å®ServiceEntry„ÅØ„ÄÅ‰ΩøÁî®„Åó„Å™„ÅÑ„É™„ÇΩ„Éº„Çπ„ÅÆ„Åü„ÇÅ„ÄÅ√ó„Å®„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ      Kubernetes ‚ò∏Ô∏è„É™„ÇΩ„Éº„Çπ      Istio ‚õµÔ∏è„Ç´„Çπ„Çø„É†„É™„ÇΩ„Éº„Çπ    Envoy„ÅÆË®≠ÂÆö      Service      Endpoints      Gateway      VirtualService      DestinationRule      ServiceEntry      PeerAuthentication    „É™„Çπ„Éä„Éº      ‚úÖ            √ó      ‚úÖ            √ó      ‚úÖ    „É´„Éº„Éà      ‚úÖ            √ó      ‚úÖ            √ó          „ÇØ„É©„Çπ„Çø„Éº      ‚úÖ            √ó            ‚úÖ      √ó      ‚úÖ    „Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà            ‚úÖ      √ó            ‚úÖ      √ó          „É™„ÇΩ„Éº„Çπ„Å®Envoy„ÅÆË®≠ÂÆö„ÅÆÂØæÂøúÈñ¢‰øÇÈÄÅ‰ø°ÂÖÉ„Åæ„Åü„ÅØÂÆõÂÖàEnvoy„Å´ÂàÜ„Åë„Çã„Å®„ÄÅÂêÑ„É™„ÇΩ„Éº„Çπ„ÅØ‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å´Envoy„ÅÆË®≠ÂÆö„ÇíÊäΩË±°Âåñ„Åó„Åæ„Åô„ÄÇË©±„ÇíÁ∞°Âçò„Å´„Åô„Çã„Åü„ÇÅ„Å´„ÄÅÈÄÅ‰ø°ÂÖÉ„Å®ÂÆõÂÖà„ÅØÂêå„ÅòNamespace„Å´„ÅÇ„Çã„Å®‰ªÆÂÆö„Åó„Åæ„Åô„ÄÇÈÄÅ‰ø°ÂÖÉEnvoy„ÅßHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÅÆÂÆõÂÖà„ÇíÊ±∫„ÇÅ„ÇãË®≠ÂÆö„ÄÅ„Åæ„Åü„ÅØÂÆõÂÖàEnvoy„ÅßHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÂèó‰ø°„Åô„ÇãË®≠ÂÆö„Çí„ÄÅÂêå„Åò„É™„ÇΩ„Éº„Çπ„ÅåÊäΩË±°Âåñ„Åó„Åæ„Åô„ÄÇ      Kubernetes ‚ò∏Ô∏è„É™„ÇΩ„Éº„Çπ       Istio ‚õµÔ∏è„Ç´„Çπ„Çø„É†„É™„ÇΩ„Éº„Çπ     Envoy„ÅÆË®≠ÂÆö      Service      Endpoints      VirtualService      DestinationRule      PeerAuthentication    ÈÄÅ‰ø°ÂÖÉ      „É™„Çπ„Éä„Éº      ‚úÖ            ‚úÖ            ‚úÖ    „É´„Éº„Éà      ‚úÖ            ‚úÖ                „ÇØ„É©„Çπ„Çø„Éº      ‚úÖ                  ‚úÖ      ‚úÖ    „Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà            ‚úÖ            ‚úÖ          ÂÆõÂÖà      „É™„Çπ„Éä„Éº      ‚úÖ            ‚úÖ            ‚úÖ    „É´„Éº„Éà      ‚úÖ            ‚úÖ                „ÇØ„É©„Çπ„Çø„Éº      ‚úÖ                  ‚úÖ      ‚úÖ    „Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà            ‚úÖ            ‚úÖ          istio-proxy„Ç≥„É≥„ÉÜ„ÉäÂÜÖ„ÅÆEnvoy„Å´ÂΩì„Å¶„ÅØ„ÇÅ„Çã„Åì„ÅÆË°®„Çí„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÅÆ‰ªïÁµÑ„Åø„ÅÆ‰∏≠„Å´ÂΩì„Å¶„ÅØ„ÇÅ„Çã„Å®„ÄÅ‰ª•‰∏ã„Å´„Å™„Çä„Åæ„Åô„ÄÇÂºïÁî®„Åó„ÅüÂâçËø∞„ÅÆËß£Ë™¨„ÅÆ„Ç§„É°„Éº„Ç∏„ÅåÊé¥„ÇÅ„Çã„Åã„Å®ÊÄù„ÅÑ„Åæ„Åô„ÄÇÈÄÅ‰ø°ÂÖÉ„Åæ„Åü„ÅØÂÆõÂÖàEnvoy„Åß„ÄÅÂêå„Åò„É™„ÇΩ„Éº„Çπ„ÅåÁôªÂ†¥„Åó„Åæ„Åô„ÄÇ„É™„ÇΩ„Éº„Çπ„ÅÆÁ®ÆÈ°û„Å†„Åë„Å´ÁùÄÁõÆ„Åô„Çã„Å®„ÄÅ‰ª•‰∏ã„Å´„Å™„Çä„Åæ„Åô„ÄÇÈÄÅ‰ø°ÂÖÉ„Åæ„Åü„ÅØÂÆõÂÖàEnvoy„ÅßÂêå„Åò„É™„ÇΩ„Éº„Çπ„ÅåÁôªÂ†¥„Åô„Çã„Åì„Å®„Åå„Çè„Åã„Çä„ÇÑ„Åô„Åè„Å™„Çä„Åæ„Åó„Åü„ÄÇ„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•Â§ñ„Å∏„ÅÆHTTPSEnvoy„ÅÆË®≠ÂÆö„ÇíÊäΩË±°Âåñ„Åô„Çã„É™„ÇΩ„Éº„Çπ‰∏ÄË¶ß„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•ÂÜÖ„ÅÆPod„Åã„ÇâÂ§ñ„ÅÆ„Ç∑„Çπ„ÉÜ„É† (‰æãÔºö„Éá„Éº„Çø„Éô„Éº„Çπ„ÄÅ„Éâ„É°„Ç§„É≥„É¨„Ç§„É§„ÉºÂßîË≠≤ÂÖà„ÅÆÂ§ñÈÉ®API) „Å∏„ÅÆHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÂá¶ÁêÜ„Åô„ÇãÂ†¥Âêà„Å´Èñ¢‰øÇ„Åô„Çã„É™„ÇΩ„Éº„Çπ„ÇíÊäúÁ≤ã„Åó„Åæ„Åó„Åü„ÄÇGateway„ÅØ„ÄÅIstio EgressGateway„ÅÆ‰∏ÄÈÉ®„Å®„Åó„Å¶‰ΩøÁî®„Åó„Åæ„Åô„ÄÇ      Kubernetes ‚ò∏Ô∏è„É™„ÇΩ„Éº„Çπ      Istio ‚õµÔ∏è„Ç´„Çπ„Çø„É†„É™„ÇΩ„Éº„Çπ    Envoy„ÅÆË®≠ÂÆö      Service      Endpoints      Gateway      VirtualService      DestinationRule      ServiceEntry      PeerAuthentication    „É™„Çπ„Éä„Éº      ‚úÖ            ‚úÖ      ‚úÖ                  ‚úÖ    „É´„Éº„Éà      ‚úÖ                  ‚úÖ                      „ÇØ„É©„Çπ„Çø„Éº      ‚úÖ                        ‚úÖ      ‚úÖ      ‚úÖ    „Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà            ‚úÖ                  ‚úÖ      ‚úÖ          „É™„ÇΩ„Éº„Çπ„Å®Envoy„ÅÆË®≠ÂÆö„ÅÆÂØæÂøúÈñ¢‰øÇÈÄÅ‰ø°ÂÖÉ„Åæ„Åü„ÅØÂÆõÂÖàEnvoy„Å´ÂàÜ„Åë„Çã„Å®„ÄÅÂêÑ„É™„ÇΩ„Éº„Çπ„ÅØ‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å´Envoy„ÅÆË®≠ÂÆö„ÇíÊäΩË±°Âåñ„Åó„Åæ„Åô„ÄÇË©±„ÇíÁ∞°Âçò„Å´„Åô„Çã„Åü„ÇÅ„Å´„ÄÅÈÄÅ‰ø°ÂÖÉ„Å®ÂÆõÂÖà„ÅØÂêå„ÅòNamespace„Å´„ÅÇ„Çã„Å®‰ªÆÂÆö„Åó„Åæ„Åô„ÄÇ‰ªñ„ÅÆÂ†¥Âêà„Å®„ÅØÁï∞„Å™„Çä„ÄÅÈÄÅ‰ø°ÂÖÉEnvoy„ÅßHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÅÆÂÆõÂÖà„ÇíÊ±∫„ÇÅ„ÇãË®≠ÂÆö„ÄÅ„Åæ„Åü„ÅØÂÆõÂÖàEnvoy„ÅßHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÂèó‰ø°„Åô„ÇãË®≠ÂÆö„Çí„ÄÅÁï∞„Å™„Çã„É™„ÇΩ„Éº„Çπ„ÅåÊäΩË±°Âåñ„Åó„Åæ„Åô„ÄÇPeerAuthentication„Å†„Åë„ÅØ„ÄÅË©±„ÇíÁ∞°Âçò„Å´„Åô„Çã„Åü„ÇÅ„Å´ÈÄÅ‰ø°ÂÖÉ„Å®ÂÆõÂÖà„ÅåÂêå„ÅòNamespace„Åß„ÅÇ„Çã„Å®‰ªÆÂÆö„Åó„Å¶„ÅÑ„Çã„ÅÆ„Åß„ÄÅÂêå„Åò„É™„ÇΩ„Éº„Çπ„ÅåÊäΩË±°Âåñ„Åó„Åæ„Åô„ÄÇÈÄÅ‰ø°ÂÖÉEnvoy„ÅÆË®≠ÂÆö„ÅÆÊäΩË±°Âåñ„ÅßÁôªÂ†¥„Åô„Çã„É™„ÇΩ„Éº„Çπ„ÅåÂÆõÂÖà„Åß„ÅØÁôªÂ†¥„Åõ„Åö„ÄÅÈÄÜ„ÇÇÁÑ∂„Çä„Åß„Åô„ÄÇ      Kubernetes ‚ò∏Ô∏è„É™„ÇΩ„Éº„Çπ       Istio ‚õµÔ∏è„Ç´„Çπ„Çø„É†„É™„ÇΩ„Éº„Çπ     Envoy„ÅÆË®≠ÂÆö      Service      Endpoints      Gateway      VirtualServiceX      „ÄÉY      DestinationRuleX      „ÄÉY      ServiceEntry      PeerAuthentication    ÈÄÅ‰ø°ÂÖÉ      „É™„Çπ„Éä„Éº      ‚úÖ                  ‚úÖ                              ‚úÖ    „É´„Éº„Éà      ‚úÖ                  ‚úÖ                                  „ÇØ„É©„Çπ„Çø„Éº      ‚úÖ                              ‚úÖ                  ‚úÖ    „Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà            ‚úÖ                        ‚úÖ                      ÂÆõÂÖà      „É™„Çπ„Éä„Éº                  ‚úÖ            ‚úÖ                        ‚úÖ    „É´„Éº„Éà                              ‚úÖ                            „ÇØ„É©„Çπ„Çø„Éº                                          ‚úÖ      ‚úÖ      ‚úÖ    „Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà                                          ‚úÖ      ‚úÖ          ‚ñ∂Ô∏é ÈÄÅ‰ø°ÂÖÉ„Å®ÂÆõÂÖà„ÅÆNamespace„Å´„Å§„ÅÑ„Å¶istio-egress) „Å´„Åä„ÅÑ„ÅüÊñπ„ÅåËâØ„ÅÑ„Åß„Åô„ÄÇ„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„Å®„ÅØÁï∞„Å™„ÇãNamespace„Å´Istio EgressGateway„ÇíÁΩÆ„Åè„Åì„Å®„Åß„ÄÅIstio EgressGateway„Çí„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„Åó„ÇÑ„Åô„Åè„Å™„Å£„Åü„Çä„ÄÅ‰ªñ„Åã„ÇâÈöúÂÆ≥„ÅÆÂΩ±Èüø„ÇíÂèó„Åë„Å´„Åè„Åè„Å™„Çä„Åæ„ÅôüôÜüèª‚Äç‚ôÇÔ∏èistio-proxy„Ç≥„É≥„ÉÜ„ÉäÂÜÖ„ÅÆEnvoy„Å´ÂΩì„Å¶„ÅØ„ÇÅ„Çã„Åì„ÅÆË°®„Çí„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÅÆ‰ªïÁµÑ„Åø„ÅÆ‰∏≠„Å´ÂΩì„Å¶„ÅØ„ÇÅ„Çã„Å®„ÄÅ‰ª•‰∏ã„Å´„Å™„Çä„Åæ„Åô„ÄÇÂºïÁî®„Åó„ÅüÂâçËø∞„ÅÆËß£Ë™¨„ÅÆ„Ç§„É°„Éº„Ç∏„ÅåÊé¥„ÇÅ„Çã„Åã„Å®ÊÄù„ÅÑ„Åæ„Åô„ÄÇÈÄÅ‰ø°ÂÖÉ„Åæ„Åü„ÅØÂÆõÂÖàEnvoy„ÅßÂêå„Åò„É™„ÇΩ„Éº„Çπ„ÅåÁôªÂ†¥„Åó„Åæ„Åõ„Çì „ÄÇ„É™„ÇΩ„Éº„Çπ„ÅÆÁ®ÆÈ°û„Å†„Åë„Å´ÁùÄÁõÆ„Åô„Çã„Å®„ÄÅ‰ª•‰∏ã„Å´„Å™„Çä„Åæ„Åô„ÄÇÈÄÅ‰ø°ÂÖÉ„Åæ„Åü„ÅØÂÆõÂÖàEnvoy„ÅßÂêå„Åò„É™„ÇΩ„Éº„Çπ„ÅåÁôªÂ†¥„Åó„Å™„ÅÑ„Åì„Å®„Åå„Çè„Åã„Çä„ÇÑ„Åô„Åè„Å™„Çä„Åæ„Åó„Åü„ÄÇ06. ÁøªË®≥„Åï„Çå„ÅüEnvoyË®≠ÂÆöÂÄ§„ÇíË¶ã„Å¶„Åø„ÇãÂâçÁ´†„Åß„ÅØ„ÄÅEnvoy„ÅÆÂÖ∑‰ΩìÁöÑ„Å™Ë®≠ÂÆöÂÄ§„Åæ„Åß„ÄÅË®ÄÂèä„Åó„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇÊú¨Á´†„Åß„ÅØ„ÄÅ„Åï„Çâ„Å´ÂÖ∑‰ΩìÂåñ„Åó„Åæ„Åô„ÄÇÂêÑ„É™„ÇΩ„Éº„Çπ„ÅÆË®≠ÂÆö„ÅÆÁøªË®≥„Å´„Çà„Å£„Å¶„ÄÅEnvoy„ÅÆÂÖ∑‰ΩìÁöÑ„Å´„Å©„ÅÆ„Çà„ÅÜ„Å™Ë®≠ÂÆöÂÄ§„Å´„Å™„Å£„Å¶„ÅÑ„Çã„ÅÆ„Åã„ÇíËß£Ë™¨„Åó„Åæ„Åô„ÄÇEnvoy„ÅÆÁèæÂú®„ÅÆË®≠ÂÆö„ÇíÂá∫Âäõ„Åô„ÇãEnvoy„ÅØ„ÄÅÁèæÂú®„ÅÆË®≠ÂÆö„ÇíÁ¢∫Ë™ç„Åô„Çã„Åü„ÇÅ„ÅÆ„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà (/config_dump) „ÇíÂÖ¨Èñã„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ„Åì„Çå„Å´HTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÈÄÅ‰ø°„Åó„ÄÅÂÖ∑‰ΩìÁöÑ„Å™Ë®≠ÂÆöÂÄ§„ÇíÂá∫Âäõ„Åó„Å¶„Åø„Åæ„Åó„Çá„ÅÜüëçüèª„É™„Çπ„Éä„Éº„ÇíÂá∫Âäõ„Åô„Çã/config_dump„ÅÆ„ÇØ„Ç®„É™„Çπ„Éà„É™„É≥„Ç∞„Å´resource={dynamic_listeners}„Çí„Å§„Åë„Çã„Å®„ÄÅEnvoy„ÅÆ„É™„Çπ„Éä„Éº„ÇíÂá∫Âäõ„Åß„Åç„Åæ„Åô„ÄÇ$ kubectl exec \\    -it foo-pod \\    -n foo-namespace \\    -c istio-proxy \\    -- bash -c \"curl http://localhost:15000/config_dump?resource={dynamic_listeners}\" | yq -PAdministration interface ‚Äî envoy 1.34.0-dev-997cab documentationConfigDump (proto) ‚Äî envoy 1.34.0-dev-997cab documentation‚ñ∂ ÂÆõÂÖàÊÉÖÂ†±„ÇíË¶ã„ÇÑ„Åô„Åè„Åô„Çãyq„Ç≥„Éû„É≥„Éâ„Å´„Å§„ÅÑ„Å¶yq„Ç≥„Éû„É≥„Éâ„ÅßYAML„Å´Â§âÊèõ„Åô„Çã„Å®Ë¶ã„ÇÑ„Åô„Åè„Å™„Çä„Åæ„Åôüëç„É´„Éº„Éà„ÇíÂá∫Âäõ„Åô„Çã/config_dump„ÅÆ„ÇØ„Ç®„É™„Çπ„Éà„É™„É≥„Ç∞„Å´resource={dynamic_route_configs}„Çí„Å§„Åë„Çã„Å®„ÄÅEnvoy„ÅÆ„É´„Éº„Éà„ÇíÂá∫Âäõ„Åß„Åç„Åæ„Åô„ÄÇ$ kubectl exec \\    -it foo-pod \\    -n foo-namespace \\    -c istio-proxy \\    -- bash -c \"curl http://localhost:15000/config_dump?resource={dynamic_route_configs}\" | yq -PAdministration interface ‚Äî envoy 1.34.0-dev-997cab documentationConfigDump (proto) ‚Äî envoy 1.34.0-dev-997cab documentation„ÇØ„É©„Çπ„Çø„Éº„ÇíÂá∫Âäõ„Åô„Çã/config_dump„ÅÆ„ÇØ„Ç®„É™„Çπ„Éà„É™„É≥„Ç∞„Å´resource={dynamic_active_clusters}„Çí„Å§„Åë„Çã„Å®„ÄÅEnvoy„ÅÆ„ÇØ„É©„Çπ„Çø„Éº„ÇíÂá∫Âäõ„Åß„Åç„Åæ„Åô„ÄÇ$ kubectl exec \\    -it foo-pod \\    -n foo-namespace \\    -c istio-proxy \\    -- bash -c \"curl http://localhost:15000/config_dump?resource={dynamic_active_clusters}\" | yq -PAdministration interface ‚Äî envoy 1.34.0-dev-997cab documentationConfigDump (proto) ‚Äî envoy 1.34.0-dev-997cab documentation„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„ÇíÂá∫Âäõ„Åô„Çã/config_dump„ÅÆ„ÇØ„Ç®„É™„Çπ„Éà„É™„É≥„Ç∞„Å´include_eds„Çí„Å§„Åë„Çã„Å®„ÄÅEnvoy„ÅÆ„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„ÇíÂá∫Âäõ„Åß„Åç„Åæ„Åô„ÄÇ$ kubectl exec \\    -it foo-pod \\    -n foo-namespace \\    -c istio-proxy \\    -- bash -c \"curl http://localhost:15000/config_dump?include_eds\" | yq -PAdministration interface ‚Äî envoy 1.34.0-dev-997cab documentationConfigDump (proto) ‚Äî envoy 1.34.0-dev-997cab documentationSupported load balancers ‚Äî envoy 1.34.0-dev-997cab documentationË®ºÊòéÊõ∏„ÇíÂá∫Âäõ„Åô„Çã/config_dump„ÅÆ„ÇØ„Ç®„É™„Çπ„Éà„É™„É≥„Ç∞„Å´resource={dynamic_active_secrets}„Çí„Å§„Åë„Çã„Å®„ÄÅË®ºÊòéÊõ∏„ÇíÂá∫Âäõ„Åß„Åç„Åæ„Åô„ÄÇ$ kubectl exec \\    -it foo-pod \\    -n foo-namespace \\    -c istio-proxy \\    -- bash -c \"curl http://localhost:15000/config_dump?resource={dynamic_active_secrets}\" | yq -PConfigDump (proto) ‚Äî envoy 1.34.0-dev-997cab documentation„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•Â§ñ„Åã„Çâ„ÅÆHTTPS„Åì„Åì„Åß„ÅØ„ÄÅistio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅØHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÂá¶ÁêÜ„Åô„Çã„Å®„Åó„Åæ„Åô„ÄÇÂõ≥‰∏≠„ÅÆÁï™Âè∑„Å´Ê≤ø„Å£„Å¶„ÄÅÈÄö‰ø°„ÅÆ‰ªïÁµÑ„Åø„ÇíËß£Ë™¨„Åó„Åæ„Åô„ÄÇÈÄÅ‰ø°ÂÖÉPodÂÅ¥„ÅÆistio-proxy„Ç≥„É≥„ÉÜ„ÉäÈÄÅ‰ø°ÂÖÉ„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„Åã„Çâ„ÅÆHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÅÆÂÆõÂÖà„Éù„Éº„Éà (‰æãÔºö50000) „Åß„ÄÅ„É™„Çπ„Éä„Éº„ÇíÁµû„ÇäËæº„Åø„Åæ„Åô„ÄÇEnvoy„ÅØ„ÄÅ„É™„Çπ„Éä„Éº„ÇíÂÆõÂÖà„Éù„Éº„Éà„ÅßÁÆ°ÁêÜ„Åó„Å¶„ÅÑ„Åæ„Åô (‰æãÔºö0.0.0.0_50000) „ÄÇHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÂá¶ÁêÜ„Åô„Çã„Åü„ÇÅ„ÅÆÂêÑÁ®Æ„Éï„Ç£„É´„Çø„Éº„ÇíÈÅ∏„Å≥„Åæ„Åô„ÄÇ„Åæ„Åü„ÄÅÂÆõÂÖà„Å®TLS„Éè„É≥„Éâ„Ç∑„Çß„Ç§„ÇØ„ÇíÂÆüË°å„Åó„ÄÅ„Éë„Ç±„ÉÉ„Éà„ÅÆL7„ÅÆ„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„Éá„Éº„Çø„ÇíÂæ©Âè∑Âåñ„Åó„Åæ„Åô„ÄÇHTTP„Éï„Ç£„É´„Çø„Éº„Å´„Çà„Çä„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÅÆÂÆõÂÖà„Éù„Éº„Éà (‰æãÔºö50000) „Åß„ÄÅ„É´„Éº„Éà„ÇíÁµû„ÇäËæº„Åø„Åæ„Åô„ÄÇEnvoy„ÅØ„ÄÅ„É´„Éº„Éà„ÇíÂÆõÂÖà„Éù„Éº„Éà„ÅßÁÆ°ÁêÜ„Åó„Å¶„ÅÑ„Åæ„Åô (‰æãÔºö50000) „ÄÇHTTP„Éï„Ç£„É´„Çø„Éº„Å´„Çà„Çä„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÅÆÂÆõÂÖà„Éõ„Çπ„Éà (‰æãÔºöfoo-service.foo-namespace.svc.cluster.local) „ÇÑ„Éë„Çπ (‰æãÔºö/) „Åß„ÄÅ„ÇØ„É©„Çπ„Çø„Éº„ÇíÁµû„ÇäËæº„Åø„Åæ„Åô„ÄÇEnvoy„ÅØ„ÄÅ„ÇØ„É©„Çπ„Çø„Éº„ÇíÂÆõÂÖà„Éù„Éº„Éà„ÇÑ„Éõ„Çπ„Éà„ÅßÁÆ°ÁêÜ„Åó„Å¶„ÅÑ„Åæ„Åô (‰æãÔºöoutbound|50010|foo-service.foo-namespace.svc.cluster.local) „ÄÇË®≠ÂÆö„Åó„ÅüË≤†Ëç∑ÂàÜÊï£ÊñπÂºè (‰æãÔºö„É©„Ç¶„É≥„Éâ„É≠„Éì„É≥„Å™„Å©) „Å´Âøú„Åò„Å¶„ÄÅServiceÈÖç‰∏ã„ÅÆPod„ÇíÈÅ∏„Å≥„Åæ„Åô„ÄÇEnvoy„ÅØ„ÄÅ„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„ÇíPod„ÅÆIP„Ç¢„Éâ„É¨„Çπ„ÇÑÂÆõÂÖà„Éù„Éº„Éà„ÅßÁÆ°ÁêÜ„Åó„Å¶„ÅÑ„Åæ„Åô (‰æãÔºö\u003cPod„ÅÆIP„Ç¢„Éâ„É¨„Çπ\u003e:50000) „ÄÇÂÆõÂÖà„Å®„ÅÆÈñì„ÅßTLSÊé•Á∂ö„ÇíÁ¢∫Á´ã„Åó„ÄÅ„Éë„Ç±„ÉÉ„Éà„ÅÆL7„ÅÆ„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„Éá„Éº„Çø„ÇíÊöóÂè∑Âåñ„Åó„Åæ„Åô„ÄÇ„Åù„Åó„Å¶„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÂÆõÂÖàPod„Å´L7„É≠„Éº„Éâ„Éê„É©„É≥„Ç∑„É≥„Ç∞„Åó„Åæ„Åô„ÄÇÂÆõÂÖàPodÂÅ¥„ÅÆistio-proxy„Ç≥„É≥„ÉÜ„ÉäL7„É≠„Éº„Éâ„Éê„É©„É≥„Ç∑„É≥„Ç∞„Åï„Çå„ÅüHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÅÆÂÆõÂÖà„Éù„Éº„Éà (‰æãÔºö50000) „Åß„ÄÅ„É™„Çπ„Éä„Éº„ÇíÁµû„ÇäËæº„Åø„Åæ„Åô„ÄÇEnvoy„ÅØ„ÄÅ„É™„Çπ„Éä„Éº„ÇíÂÆõÂÖà„Éù„Éº„Éà„ÅßÁÆ°ÁêÜ„Åó„Å¶„ÅÑ„Åæ„Åô (‰æãÔºö0.0.0.0_50000)HTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÂá¶ÁêÜ„Åô„Çã„Åü„ÇÅ„ÅÆÂêÑÁ®Æ„Éï„Ç£„É´„Çø„Éº„ÇíÈÅ∏„Å≥„Åæ„Åô„ÄÇHTTP„Éï„Ç£„É´„Çø„Éº„Å´„Çà„Çä„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÅÆÂÆõÂÖà„Éù„Éº„Éà (‰æãÔºö50000) „Åß„ÄÅ„É´„Éº„Éà„ÇíÁµû„ÇäËæº„Åø„Åæ„Åô„ÄÇEnvoy„ÅØ„ÄÅ„É´„Éº„Éà„ÇíÂÆõÂÖà„Éù„Éº„Éà„ÅßÁÆ°ÁêÜ„Åó„Å¶„ÅÑ„Åæ„Åô (‰æãÔºöinbound|50000||) „ÄÇHTTP„Éï„Ç£„É´„Çø„Éº„Å´„Çà„Çä„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÅÆÂÆõÂÖà„Éõ„Çπ„Éà (‰æãÔºöexample.com) „ÇÑ„Éë„Çπ (‰æãÔºö/) „Åß„ÄÅ„ÇØ„É©„Çπ„Çø„Éº„ÇíÁµû„ÇäËæº„Åø„Åæ„Åô„ÄÇEnvoy„ÅØ„ÄÅ„ÇØ„É©„Çπ„Çø„Éº„ÇíÂÆõÂÖà„Éù„Éº„Éà„ÅßÁÆ°ÁêÜ„Åó„Å¶„ÅÑ„Åæ„Åô (‰æãÔºöinbound|50000||) „Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„ÇíÈÅ∏„Å≥„Åæ„Åô„ÄÇEnvoy„ÅØ„ÄÅ„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„Çí„É≠„Éº„Ç´„É´„Éõ„Çπ„Éà„ÇÑÂÆõÂÖà„Éù„Éº„Éà„ÅßÁÆ°ÁêÜ„Åó„Å¶„ÅÑ„Åæ„Åô (‰æãÔºö127.0.0.6:50000) „ÄÇ  „É≠„Éº„Ç´„É´„Éõ„Çπ„Éà„Å´HTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÈÄÅ‰ø°„Åó„Åæ„Åô„ÄÇÁµêÊûúÁöÑ„Å´„ÄÅÂÆõÂÖà„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„Å´HTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÅåÂ±ä„Åç„Åæ„Åô„ÄÇIstio Ingress vs. Kubernetes Ingress ‚Äì Daniel Watrous on Software and Cloud Engineering‚ñ∂Ô∏é istio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅÆ„Éó„É≠„Ç≠„Ç∑ÂÖà„ÅÆIP„Ç¢„Éâ„É¨„Çπ„Å´„Å§„ÅÑ„Å¶istio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅØ„ÄÅ„É≠„Éº„Ç´„É´„Éõ„Çπ„Éà„Çí127.0.0.6„Å®„Åó„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„Çí„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„Å´ÈÄÅ‰ø°„Åó„Åæ„Åô„ÄÇ„Åì„Çå„ÅØ„ÄÅ127.0.0.1„ÇíÊåáÂÆö„Åó„Å¶„Åó„Åæ„ÅÜ„Å®„ÄÅistio-proxy„Ç≥„É≥„ÉÜ„Éä„Åã„Çâ„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„Å∏„ÅÆÈÄö‰ø°„Ååiptables‰∏ä„Åß„É´„Éº„Éó„Åó„Å¶„Åó„Åæ„ÅÜ„Åü„ÇÅ„Åß„Åô„ÄÇistio-proxy„Ç≥„É≥„ÉÜ„Éä„Åã„Çâ„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„Å∏„ÅÆÈÄö‰ø°„Åß„ÅØ„ÄÅÊ≠£„Åó„Åè„ÅØiptables‰∏ä„ÅßISTIO_OUTPUT„Åã„ÇâPOSTROUTING„Å´ÈÄö‰ø°„ÇíÊ∏°„Åó„Åæ„Åô„ÄÇ‰∏ÄÊñπ„Åß„ÄÅ„ÇÇ„Åó„É≠„Éº„Ç´„É´„Éõ„Çπ„Éà„Åå127.0.0.1„Åß„ÅÇ„Çã„Å®„ÄÅISTIO_OUTPUT„Åã„ÇâISTIO_IN_REDIRECT„Å´ÈÄö‰ø°„ÇíÊ∏°„Åô„Åì„Å®„Å´„Å™„Çä„ÄÅistio-proxy„Ç≥„É≥„ÉÜ„Éä„Å´ÂÜç„Å≥„É™„ÉÄ„Ç§„É¨„ÇØ„Éà„Åó„Å¶„Åó„Åæ„ÅÑ„Åæ„Åô„ÄÇhatappi1225„Åï„Çì„ÅÆËß£Ë™¨„ÅåÈ¨º„Çè„Åã„Çä„ÇÑ„Åô„Åã„Å£„Åü„Åß„ÅôüôèüôèüôèÁîªÂÉèÂºïÁî®ÂÖÉÔºömercari engineeringInbound Forwarding - Google „Éâ„Ç≠„É•„É°„É≥„Éàiptables „Åã„ÇâÁêÜËß£„Åô„Çã Istio 1.10 „Åã„ÇâÂ§âÊõ¥„Åï„Çå„Åü Inbound Forwarding | „É°„É´„Ç´„É™„Ç®„É≥„Ç∏„Éã„Ç¢„É™„É≥„Ç∞„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„ÇπÈñì„ÅÆHTTPS„Åì„Åì„Åß„ÅØ„ÄÅistio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅØHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÂá¶ÁêÜ„Åô„Çã„Å®„Åó„Åæ„Åô„ÄÇÂõ≥‰∏≠„ÅÆÁï™Âè∑„Å´Ê≤ø„Å£„Å¶„ÄÅÈÄö‰ø°„ÅÆ‰ªïÁµÑ„Åø„ÇíËß£Ë™¨„Åó„Åæ„Åô„ÄÇÈÄÅ‰ø°ÂÖÉPodÂÅ¥„ÅÆistio-proxy„Ç≥„É≥„ÉÜ„ÉäÈÄÅ‰ø°ÂÖÉ„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„Åã„Çâ„ÅÆHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÅÆÂÆõÂÖà„Éù„Éº„Éà (‰æãÔºö50010) „Åß„ÄÅ„É™„Çπ„Éä„Éº„ÇíÁµû„ÇäËæº„Åø„Åæ„Åô„ÄÇEnvoy„ÅØ„ÄÅ„É™„Çπ„Éä„Éº„ÇíÂÆõÂÖà„Éù„Éº„Éà„ÅßÁÆ°ÁêÜ„Åó„Å¶„ÅÑ„Åæ„Åô (‰æãÔºö0.0.0.0_50010) „ÄÇHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÂá¶ÁêÜ„Åô„Çã„Åü„ÇÅ„ÅÆÂêÑÁ®Æ„Éï„Ç£„É´„Çø„Éº„ÇíÈÅ∏„Å≥„Åæ„Åô„ÄÇ„Åæ„Åü„ÄÅÂÆõÂÖà„Å®TLS„Éè„É≥„Éâ„Ç∑„Çß„Ç§„ÇØ„ÇíÂÆüË°å„Åó„ÄÅ„Éë„Ç±„ÉÉ„Éà„ÅÆL7„ÅÆ„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„Éá„Éº„Çø„ÇíÂæ©Âè∑Âåñ„Åó„Åæ„Åô„ÄÇHTTP„Éï„Ç£„É´„Çø„Éº„Å´„Çà„Çä„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÅÆÂÆõÂÖà„Éù„Éº„Éà (‰æãÔºö50010) „Åß„ÄÅ„É´„Éº„Éà„ÇíÁµû„ÇäËæº„Åø„Åæ„Åô„ÄÇEnvoy„ÅØ„ÄÅ„É´„Éº„Éà„ÇíÂÆõÂÖà„Éù„Éº„Éà„ÅßÁÆ°ÁêÜ„Åó„Å¶„ÅÑ„Åæ„Åô (‰æãÔºö50010) „ÄÇHTTP„Éï„Ç£„É´„Çø„Éº„Å´„Çà„Çä„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÅÆÂÆõÂÖà„Éõ„Çπ„Éà (‰æãÔºöfoo-service.foo-namespace.svc.cluster.local) „ÇÑ„Éë„Çπ (‰æãÔºö/) „Åß„ÄÅ„ÇØ„É©„Çπ„Çø„Éº„ÇíÁµû„ÇäËæº„Åø„Åæ„Åô„ÄÇEnvoy„ÅØ„ÄÅ„ÇØ„É©„Çπ„Çø„Éº„ÇíÂÆõÂÖà„Éù„Éº„Éà„ÇÑ„Éõ„Çπ„Éà„ÅßÁÆ°ÁêÜ„Åó„Å¶„ÅÑ„Åæ„Åô (‰æãÔºöoutbound|50010|foo-service.foo-namespace.svc.cluster.local) „ÄÇË®≠ÂÆö„Åó„ÅüË≤†Ëç∑ÂàÜÊï£ÊñπÂºè (‰æãÔºö„É©„Ç¶„É≥„Éâ„É≠„Éì„É≥„Å™„Å©) „Å´Âøú„Åò„Å¶„ÄÅServiceÈÖç‰∏ã„ÅÆPod„ÇíÈÅ∏„Å≥„Åæ„Åô„ÄÇEnvoy„ÅØ„ÄÅ„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„ÇíPod„ÅÆIP„Ç¢„Éâ„É¨„Çπ„ÇÑÂÆõÂÖà„Éù„Éº„Éà„ÅßÁÆ°ÁêÜ„Åó„Å¶„ÅÑ„Åæ„Åô (‰æãÔºö\u003cPod„ÅÆIP„Ç¢„Éâ„É¨„Çπ\u003e:50010) „ÄÇÂÆõÂÖà„Å®„ÅÆÈñì„ÅßTLSÊé•Á∂ö„ÇíÁ¢∫Á´ã„Åó„ÄÅ„Éë„Ç±„ÉÉ„Éà„ÅÆL7„ÅÆ„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„Éá„Éº„Çø„ÇíÊöóÂè∑Âåñ„Åó„Åæ„Åô„ÄÇ„Åù„Åó„Å¶„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÂÆõÂÖàPod„Å´L7„É≠„Éº„Éâ„Éê„É©„É≥„Ç∑„É≥„Ç∞„Åó„Åæ„Åô„ÄÇÂÆõÂÖàPodÂÅ¥„ÅÆistio-proxy„Ç≥„É≥„ÉÜ„ÉäL7„É≠„Éº„Éâ„Éê„É©„É≥„Ç∑„É≥„Ç∞„Åï„Çå„ÅüHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÅÆÂÆõÂÖà„Éù„Éº„Éà (‰æãÔºö50010) „Åß„ÄÅ„É™„Çπ„Éä„Éº„ÇíÁµû„ÇäËæº„Åø„Åæ„Åô„ÄÇEnvoy„ÅØ„ÄÅ„É™„Çπ„Éä„Éº„ÇíÂÆõÂÖà„Éù„Éº„Éà„ÅßÁÆ°ÁêÜ„Åó„Å¶„ÅÑ„Åæ„Åô (‰æãÔºö0.0.0.0_50010)HTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÂá¶ÁêÜ„Åô„Çã„Åü„ÇÅ„ÅÆÂêÑÁ®Æ„Éï„Ç£„É´„Çø„Éº„ÇíÈÅ∏„Å≥„Åæ„Åô„ÄÇHTTP„Éï„Ç£„É´„Çø„Éº„Å´„Çà„Çä„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÅÆÂÆõÂÖà„Éù„Éº„Éà (‰æãÔºö50010) „Åß„ÄÅ„É´„Éº„Éà„ÇíÁµû„ÇäËæº„Åø„Åæ„Åô„ÄÇEnvoy„ÅØ„ÄÅ„É´„Éº„Éà„ÇíÂÆõÂÖà„Éù„Éº„Éà„ÅßÁÆ°ÁêÜ„Åó„Å¶„ÅÑ„Åæ„Åô (‰æãÔºöinbound|50010||) „ÄÇHTTP„Éï„Ç£„É´„Çø„Éº„Å´„Çà„Çä„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÅÆÂÆõÂÖà„Éõ„Çπ„Éà (‰æãÔºöexample.com) „ÇÑ„Éë„Çπ (‰æãÔºö/) „Åß„ÄÅ„ÇØ„É©„Çπ„Çø„Éº„ÇíÁµû„ÇäËæº„Åø„Åæ„Åô„ÄÇEnvoy„ÅØ„ÄÅ„ÇØ„É©„Çπ„Çø„Éº„ÇíÂÆõÂÖà„Éù„Éº„Éà„ÅßÁÆ°ÁêÜ„Åó„Å¶„ÅÑ„Åæ„Åô (‰æãÔºöinbound|50010||) „Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„ÇíÈÅ∏„Å≥„Åæ„Åô„ÄÇEnvoy„ÅØ„ÄÅ„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„Çí„É≠„Éº„Ç´„É´„Éõ„Çπ„Éà„ÇÑÂÆõÂÖà„Éù„Éº„Éà„ÅßÁÆ°ÁêÜ„Åó„Å¶„ÅÑ„Åæ„Åô (‰æãÔºö127.0.0.6:50010) „ÄÇ  „É≠„Éº„Ç´„É´„Éõ„Çπ„Éà„Å´HTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÈÄÅ‰ø°„Åó„Åæ„Åô„ÄÇÁµêÊûúÁöÑ„Å´„ÄÅÂÆõÂÖà„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„Å´HTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÅåÂ±ä„Åç„Åæ„Åô„ÄÇhttps://www.zhaohuabing.com/post/2018-09-25-istio-traffic-management-impl-intro/„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•Â§ñ„Å∏„ÅÆHTTPS„Åì„Åì„Åß„ÅØ„ÄÅistio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅØHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÂá¶ÁêÜ„Åô„Çã„Å®„Åó„Åæ„Åô„ÄÇÂõ≥‰∏≠„ÅÆÁï™Âè∑„Å´Ê≤ø„Å£„Å¶„ÄÅÈÄö‰ø°„ÅÆ‰ªïÁµÑ„Åø„ÇíËß£Ë™¨„Åó„Åæ„Åô„ÄÇÈÄÅ‰ø°ÂÖÉPodÂÅ¥„ÅÆistio-proxy„Ç≥„É≥„ÉÜ„ÉäÈÄÅ‰ø°ÂÖÉ„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„Åã„Çâ„ÅÆHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÅÆÂÆõÂÖà„Éù„Éº„Éà (‰æãÔºö443) „Åß„ÄÅ„É™„Çπ„Éä„Éº„ÇíÁµû„ÇäËæº„Åø„Åæ„Åô„ÄÇEnvoy„ÅØ„ÄÅ„É™„Çπ„Éä„Éº„ÇíÂÆõÂÖà„Éù„Éº„Éà„ÅßÁÆ°ÁêÜ„Åó„Å¶„ÅÑ„Åæ„Åô (‰æãÔºö0.0.0.0_443) „ÄÇHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÂá¶ÁêÜ„Åô„Çã„Åü„ÇÅ„ÅÆÂêÑÁ®Æ„Éï„Ç£„É´„Çø„Éº„ÇíÈÅ∏„Å≥„Åæ„Åô„ÄÇ„Åæ„Åü„ÄÅÂÆõÂÖà„Å®TLS„Éè„É≥„Éâ„Ç∑„Çß„Ç§„ÇØ„ÇíÂÆüË°å„Åó„ÄÅ„Éë„Ç±„ÉÉ„Éà„ÅÆL7„ÅÆ„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„Éá„Éº„Çø„ÇíÂæ©Âè∑Âåñ„Åó„Åæ„Åô„ÄÇHTTP„Éï„Ç£„É´„Çø„Éº„Å´„Çà„Çä„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÅÆÂÆõÂÖà„Éù„Éº„Éà (‰æãÔºö443) „Åß„ÄÅ„É´„Éº„Éà„ÇíÁµû„ÇäËæº„Åø„Åæ„Åô„ÄÇEnvoy„ÅØ„ÄÅ„É´„Éº„Éà„ÇíÂÆõÂÖà„Éù„Éº„Éà„ÅßÁÆ°ÁêÜ„Åó„Å¶„ÅÑ„Åæ„Åô (‰æãÔºö443) „ÄÇHTTP„Éï„Ç£„É´„Çø„Éº„Å´„Çà„Çä„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÅÆÂÆõÂÖà„Éõ„Çπ„Éà (‰æãÔºöistio-egressgateway-service.foo-namespace.svc.cluster.local) „ÇÑ„Éë„Çπ (‰æãÔºö/) „Åß„ÄÅ„ÇØ„É©„Çπ„Çø„Éº„ÇíÁµû„ÇäËæº„Åø„Åæ„Åô„ÄÇEnvoy„ÅØ„ÄÅ„ÇØ„É©„Çπ„Çø„Éº„ÇíIstio EgressGateway ÂÆõÂÖà„Éù„Éº„Éà„ÇÑ„Éõ„Çπ„Éà„ÅßÁÆ°ÁêÜ„Åó„Å¶„ÅÑ„Åæ„Åô (‰æãÔºöoutbound|443|istio-egressgateway-service.foo-namespace.svc.cluster.local) „ÄÇË®≠ÂÆö„Åó„ÅüË≤†Ëç∑ÂàÜÊï£ÊñπÂºè (‰æãÔºö„É©„Ç¶„É≥„Éâ„É≠„Éì„É≥„Å™„Å©) „Å´Âøú„Åò„Å¶„ÄÅIstio EgressGateway ServiceÈÖç‰∏ã„ÅÆPod„ÇíÈÅ∏„Å≥„Åæ„Åô„ÄÇEnvoy„ÅØ„ÄÅ„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„ÇíPod„ÅÆIP„Ç¢„Éâ„É¨„Çπ„ÇÑÂÆõÂÖà„Éù„Éº„Éà„ÅßÁÆ°ÁêÜ„Åó„Å¶„ÅÑ„Åæ„Åô (‰æãÔºö\u003cPod„ÅÆIP„Ç¢„Éâ„É¨„Çπ\u003e:443) „ÄÇÂÆõÂÖà„Å®„ÅÆÈñì„ÅßTLSÊé•Á∂ö„ÇíÁ¢∫Á´ã„Åó„ÄÅ„Éë„Ç±„ÉÉ„Éà„ÅÆL7„ÅÆ„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„Éá„Éº„Çø„ÇíÊöóÂè∑Âåñ„Åó„Åæ„Åô„ÄÇ„Åù„Åó„Å¶„ÄÅIstio EgressGateway Pod„Å´L7„É≠„Éº„Éâ„Éê„É©„É≥„Ç∑„É≥„Ç∞„Åó„Åæ„Åô„ÄÇÂÆõÂÖàPod (Istio EgressGateway Pod) ÂÅ¥„ÅÆistio-proxy„Ç≥„É≥„ÉÜ„ÉäL7„É≠„Éº„Éâ„Éê„É©„É≥„Ç∑„É≥„Ç∞„Åï„Çå„ÅüHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÅÆÂÆõÂÖà„Éù„Éº„Éà (‰æãÔºö443) „Åß„ÄÅ„É™„Çπ„Éä„Éº„ÇíÁµû„ÇäËæº„Åø„Åæ„Åô„ÄÇEnvoy„ÅØ„ÄÅ„É™„Çπ„Éä„Éº„ÇíÂÆõÂÖà„Éù„Éº„Éà„ÅßÁÆ°ÁêÜ„Åó„Å¶„ÅÑ„Åæ„Åô (‰æãÔºö0.0.0.0_443)HTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÂá¶ÁêÜ„Åô„Çã„Åü„ÇÅ„ÅÆÂêÑÁ®Æ„Éï„Ç£„É´„Çø„Éº„ÇíÈÅ∏„Å≥„Åæ„Åô„ÄÇHTTP„Éï„Ç£„É´„Çø„Éº„Å´„Çà„Çä„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÅÆÂÆõÂÖà„Éù„Éº„Éà (‰æãÔºö443) „Åß„ÄÅ„É´„Éº„Éà„ÇíÁµû„ÇäËæº„Åø„Åæ„Åô„ÄÇEnvoy„ÅØ„ÄÅ„É´„Éº„Éà„ÇíÂÆõÂÖà„Éù„Éº„Éà„ÅßÁÆ°ÁêÜ„Åó„Å¶„ÅÑ„Åæ„Åô (‰æãÔºöinbound|50010||) „ÄÇHTTP„Éï„Ç£„É´„Çø„Éº„Å´„Çà„Çä„ÄÅHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÅÆÂÆõÂÖà„Éõ„Çπ„Éà (‰æãÔºöexternal.com) „ÇÑ„Éë„Çπ (‰æãÔºö/) „Åß„ÄÅ„ÇØ„É©„Çπ„Çø„Éº„ÇíÁµû„ÇäËæº„Åø„Åæ„Åô„ÄÇEnvoy„ÅØ„ÄÅ„ÇØ„É©„Çπ„Çø„Éº„ÇíÂÆõÂÖà„Éù„Éº„Éà„ÇÑ„Éõ„Çπ„Éà„ÅßÁÆ°ÁêÜ„Åó„Å¶„ÅÑ„Åæ„Åô (‰æãÔºöoutbound|443|external.com) „ÄÇ„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„ÇíÈÅ∏„Å≥„Åæ„Åô„ÄÇEnvoy„ÅØ„ÄÅ„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„Çí„Ç®„É≥„Éà„É™Ê∏à„Ç∑„Çπ„ÉÜ„É†„ÅÆIP„Ç¢„Éâ„É¨„Çπ„ÇÑÂÆõÂÖà„Éù„Éº„Éà„ÅßÁÆ°ÁêÜ„Åó„Å¶„ÅÑ„Åæ„Åô (‰æãÔºö:50010) „ÄÇ„Ç®„É≥„Éà„É™Ê∏à„Ç∑„Çπ„ÉÜ„É†„ÅÆIP„Ç¢„Éâ„É¨„Çπ„ÅØ„ÄÅÈñãÁô∫ËÄÖ„ÅåË®≠ÂÆö„Åô„ÇãÂøÖË¶Å„ÅØ„Å™„Åè„ÄÅEnvoy„ÅåDNS„Åã„ÇâÂãïÁöÑ„Å´ÂèñÂæó„Åó„Åæ„Åô„ÄÇ  „Ç®„É≥„Éà„É™Ê∏à„Ç∑„Çπ„ÉÜ„É†„Å´HTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÈÄÅ‰ø°„Åó„Åæ„Åô„ÄÇUsing Istio to MITM our users‚Äô traffic | Steven ReitsmaIngress, egress, ServiceEntry DATA Flow issues for ISTIO API Gateway? - Discuss Istio07. „Åä„Çè„Çä„Å´Istio„Çµ„Ç§„Éâ„Ç´„Éº„É°„ÉÉ„Ç∑„É•„ÅåEnvoy„ÅÆHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÅÆÂá¶ÁêÜ„Çí„Å©„ÅÆ„Çà„ÅÜ„Å´ÊäΩË±°Âåñ„Åô„Çã„ÅÆ„Åã„ÄÅ„Åæ„ÅüEnvoy„Åå„Å©„ÅÆ„Çà„ÅÜ„Å´HTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÂá¶ÁêÜ„Åô„Çã„ÅÆ„Åã„ÇíËß£Ë™¨„Åó„Åæ„Åó„Åü„ÄÇÊ¨°„ÄÖ„Å®„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•„ÉÑ„Éº„É´„ÅåÁôªÂ†¥„Åó„Åü„Å®„Åó„Å¶„ÇÇ„ÄÅ„Åù„Çå„ÅåEnvoy„Çí‰ΩøÁî®„Åó„Åü„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•„Åß„ÅÇ„ÇãÈôê„Çä„ÄÅÊúÄÁµÇÁöÑ„Å´„ÅØEnvoy„ÅÆË®≠ÂÆöÂÄ§„Å´Ë°å„ÅçÁùÄ„Åç„Åæ„Åô„ÄÇ„Åù„ÅÆ„Åü„ÇÅ„ÄÅÊäΩË±°Âåñ„Åï„Çå„ÅüEnvoy„Åå„Å©„ÅÆ„Çà„ÅÜ„Å´ÈÄö‰ø°„ÇíÊâ±„ÅÜ„ÅÆ„Åã„Çí‰∏ÄÂ∫¶„Åß„ÇÇÁêÜËß£„Åô„Çå„Å∞„ÄÅÊßò„ÄÖ„Å™„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•„ÉÑ„Éº„É´„ÅßÁü•Ë≠ò„ÇíÊµÅÁî®„Åß„Åç„Çã„Å®ÊÄù„ÅÑ„Åæ„Åô„ÄÇIstio„ÅØ„ÇÇ„Å°„Çç„Çì„ÄÅ‰ªñ„ÅÆEnvoy„Å´„Çà„Çã„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•„ÉÑ„Éº„É´ (Consul„ÄÅCilium„Å™„Å©) „Çí‰Ωø„Å£„Å¶„ÅÑ„ÇãÊñπ„ÅÆÂèÇËÄÉ„Å´„ÇÇ„Å™„Çå„Å∞Âπ∏„ÅÑ„Åß„ÅôüëçüèªË¨ùËæû‰ªäÂõû„ÄÅKubernetes„ÅÆ„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ„ÇíË™øÊüª„Åô„Çã„Å´„ÅÇ„Åü„Çä„ÄÅ‰ª•‰∏ã„ÅÆÊñπ„Å´Áü•Ë¶ã„Çí„ÅîÊïôÊéà„ÅÑ„Åü„Å†„Åç„Åæ„Åó„Åü„ÄÇ@ken5owata „Åï„Çì„Åì„ÅÆÂ†¥„ÅßÊÑüË¨ùÁî≥„Åó‰∏ä„Åí„Åæ„Åôüôáüèª‚ÄçË®ò‰∫ãÈñ¢ÈÄ£„ÅÆ„Åä„Åô„Åô„ÇÅÊõ∏Á±çIstio in Action (English Edition)‰ΩúËÄÖ:Posta, Christian E.,Maloku, RinorManningAmazonIstio: Up and Running: Using a Service Mesh to Connect, Secure, Control, and Observe‰ΩúËÄÖ:Calcote, Lee,Butcher, ZackO'Reilly MediaAmazon","isoDate":"2024-01-15T16:34:04.000Z","dateMiliSeconds":1705336444000,"authorName":"Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π","authorId":"hiroki-hasegawa"},{"title":"üêô Kubernetes„ÅÆ„Éû„É´„ÉÅ„ÉÜ„Éä„É≥„Éà„Éë„Çø„Éº„É≥„Å®ArgoCD„ÅÆÂÆüË∑µ„ÉÜ„Éä„É≥„ÉàË®≠Ë®à","link":"https://speakerdeck.com/hiroki_hasegawa/kubernetesnomarutitenantopatantoargocdnoshi-jian-tenantoshe-ji","contentSnippet":"„ÄéKubernetes Novice Tokyo„Äè„ÅÆÁôªÂ£áË≥áÊñô„Åß„Åô\r\r„ÉªKubernetes„ÅÆ„Éû„É´„ÉÅ„ÉÜ„Éä„É≥„Éà„Éë„Çø„Éº„É≥„ÅÆÁ®ÆÈ°û\r„ÉªArgoCD„ÅÆAppProject„ÉÜ„Éä„É≥„Éà„Å®Namespaced„Çπ„Ç≥„Éº„Éó„É¢„Éº„Éâ\r„ÉªArgoCD„ÅÆ„ÉÜ„Éä„É≥„Éà„ÅåÈò≤„ÅÑ„Åß„Åè„Çå„ÇãË™§„Å£„ÅüÊìç‰Ωú„ÅÆÂÖ∑‰Ωì‰æã\r\r„ÇíÁ¥π‰ªã„Åó„Åæ„Åó„Åü\r\rArgoCD„ÅÆ„Éû„Éã„Éï„Çß„Çπ„Éà„ÅÆÂÆüË£Ö‰æã„ÇíËß£Ë™¨„Åß„Åç„Åæ„Åõ„Çì„Åß„Åó„Åü„ÅÆ„Åß„ÄÅ„Åú„Å≤ÂÖÉË®ò‰∫ã (Kubernetes„ÅÆ„Éû„É´„ÉÅ„ÉÜ„Éä„É≥„Éà„Éë„Çø„Éº„É≥„Å®ArgoCD„ÅÆÂÆüË∑µ„ÉÜ„Éä„É≥„ÉàË®≠Ë®à) „ÇÇ„ÅîÂèÇÁÖß„Åè„Å†„Åï„ÅÑüëçüèª\r\rüê¶ „ÉÑ„Ç§„Éº„ÉàÔºöhttps://x.com/Hiroki__IT/status/1737778249021952458","isoDate":"2023-12-21T05:00:00.000Z","dateMiliSeconds":1703134800000,"authorName":"Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π","authorId":"hiroki-hasegawa"},{"title":"„ÄêArgoCDüêô„Äë\"Kubernetes Novice Tokyo\" „Å´ÁôªÂ£á","link":"https://hiroki-hasegawa.hatenablog.jp/entry/2023/12/21/833414","contentSnippet":"Áô∫Ë°®„Çπ„É©„Ç§„Éâ„Åã„ÇâÂæó„Çâ„Çå„ÇãÁü•Ë≠òÁô∫Ë°®„Çπ„É©„Ç§„Éâ„ÇíË¶ã„Çã„Å®„ÄÅ‰ª•‰∏ã„Çí \"ÂÆåÂÖ®„Å´ÁêÜËß£\" „Åß„Åç„Åæ„Åô‚úåÔ∏èKubernetes„ÅÆ„Éû„É´„ÉÅ„ÉÜ„Éä„É≥„Éà„Éë„Çø„Éº„É≥„ÅÆÁ®ÆÈ°ûArgoCD„ÅÆAppProject„ÉÜ„Éä„É≥„Éà„Å®Namespaced„Çπ„Ç≥„Éº„Éó„É¢„Éº„ÉâArgoCD„ÅÆ„ÉÜ„Éä„É≥„Éà„ÅåÈò≤„ÅÑ„Åß„Åè„Çå„ÇãË™§„Å£„ÅüÊìç‰Ωú„ÅÆÂÖ∑‰Ωì‰æãÁô∫Ë°®„Çπ„É©„Ç§„Éâ„Åã„ÇâÂæó„Çâ„Çå„ÇãÁü•Ë≠ò„Ç§„Éô„É≥„ÉàÂêçÁô∫Ë°®„Çπ„É©„Ç§„Éâ„Ç§„Éô„É≥„ÉàÂêç„Ç™„ÉÉ„ÇπÔºÅ„Ç™„É©Èï∑Ë∞∑Â∑ùÔºÅ‚úãüèª„ÄéKubernetes„ÅÆ„Éû„É´„ÉÅ„ÉÜ„Éä„É≥„Éà„Éë„Çø„Éº„É≥„Å®ArgoCD„ÅÆÂÆüË∑µ„ÉÜ„Éä„É≥„ÉàË®≠Ë®à„Äè„Å¶„ÅÑ„ÅÜ„ÉÜ„Éº„Éû„Åß„ÄÅ Kubernetes Novice Tokyo „Å´ÁôªÂ£á„Åó„Åü„ÅûÔºÅhttps://k8s-novice-jp.connpass.com/event/300438/Áô∫Ë°®„Çπ„É©„Ç§„Éâ„Åø„Çì„Å™ÔºÅ„Çπ„É©„Ç§„Éâ„Åú„Å£„Å¶„ÅáË¶ã„Å¶„Åè„Çå„Çà„Å™ÔºÅKubernetes Novice Tokyo „ÅÆÁôªÂ£áË≥áÊñô„Åß„ÅôÔºÅ„Ç≠„Éü„Å†„Åë„ÅÆÊúÄÂº∑„ÅÆ„Éû„É´„ÉÅ„ÉÜ„Éä„É≥„Éà„Çí‰Ωú„Çç„ÅÜ‚úåÔ∏è#k8snovicehttps://t.co/qNEhnkA7WZ‚Äî Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π (Âú∞‰∏ãÂº∑Âà∂Âä¥ÂÉçËÄÖ) (@Hiroki__IT) December 21, 2023 „Å°„Å™„ÄÅÁô∫Ë°®ÂÜÖÂÆπ„ÅÆË©≥Á¥∞„ÅØ„Åì„ÅÆË®ò‰∫ã„Çí„Åø„Å¶„Åè„Çå„Çà„Å™ÔºÅ","isoDate":"2023-12-21T03:00:00.000Z","dateMiliSeconds":1703127600000,"authorName":"Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π","authorId":"hiroki-hasegawa"},{"title":"„ÄêTerraformüßëüèª‚ÄçüöÄ„Äë\"Findy Terraform Ê¥ªÁî®Â§ßÂÖ® - IaC„ÅÆ‰ªä\" „Å´ÁôªÂ£á","link":"https://hiroki-hasegawa.hatenablog.jp/entry/2023/10/25/550144","contentSnippet":"Áô∫Ë°®„Çπ„É©„Ç§„Éâ„Åã„ÇâÂæó„Çâ„Çå„ÇãÁü•Ë≠òÁô∫Ë°®„Çπ„É©„Ç§„Éâ„ÇíË¶ã„Çã„Å®„ÄÅ‰ª•‰∏ã„Çí \"ÂÆåÂÖ®„Å´ÁêÜËß£\" „Åß„Åç„Åæ„Åô‚úåÔ∏èTerraform„ÅÆtfstate„ÅÆÂàÜÂâ≤„Éë„Çø„Éº„É≥tfstateÂàÜÂâ≤„Çí„É™„Éù„Ç∏„Éà„É™„ÇÑ„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê„Å∏„ÅÆÈÅ©Áî®„Åô„ÇãÊñπÊ≥ïÁô∫Ë°®„Çπ„É©„Ç§„Éâ„Åã„ÇâÂæó„Çâ„Çå„ÇãÁü•Ë≠ò„Ç§„Éô„É≥„ÉàÂêçÁô∫Ë°®„Çπ„É©„Ç§„Éâ„Ç§„Éô„É≥„ÉàÂêç„Ç™„ÉÉ„ÇπÔºÅ„Ç™„É©Èï∑Ë∞∑Â∑ùÔºÅ‚úãüèª„Äé tfstate „ÅÆÂàÜÂâ≤„Éë„Çø„Éº„É≥„Å®„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê„Å∏„ÅÆÈÅ©Áî®„Äè„Å¶„ÅÑ„ÅÜ„ÉÜ„Éº„Éû„Åß„ÄÅ Findy Terraform Ê¥ªÁî®Â§ßÂÖ® - IaC„ÅÆ‰ªä „Å´ÁôªÂ£á„Åó„Åü„ÅûÔºÅÁô∫Ë°®„Çπ„É©„Ç§„Éâ„Åø„Çì„Å™ÔºÅ„Çπ„É©„Ç§„Éâ„Åú„Å£„Å¶„ÅáË¶ã„Å¶„Åè„Çå„Çà„Å™ÔºÅ„ÄéTerraformÊ¥ªÁî®Â§ßÂÖ® - IaC„ÅÆ‰ªä„ÄÇ„Äè„ÅÆÁôªÂ£áË≥áÊñô„Åß„Åô!!tfstate„ÇíÂàÜÂâ≤„Åó„Å¶„Åø„Çì„Å™„ÅßÊúÄÈ´ò„Å´„Å™„Çç„ÅÜ‚úåüèª#Terraform_findyhttps://t.co/NteGvKdMEE‚Äî Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π (Âú∞‰∏ãÂº∑Âà∂Âä¥ÂÉçËÄÖ) (@Hiroki__IT) October 25, 2023 „Å°„Å™„ÄÅÁô∫Ë°®ÂÜÖÂÆπ„ÅÆË©≥Á¥∞„ÅØ„Åì„ÅÆË®ò‰∫ã„Çí„Åø„Å¶„Åè„Çå„Çà„Å™ÔºÅ","isoDate":"2023-10-25T03:00:00.000Z","dateMiliSeconds":1698202800000,"authorName":"Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π","authorId":"hiroki-hasegawa"},{"title":"üßë‚ÄçüöÄ tfstate „ÅÆÂàÜÂâ≤„Éè„Çö„Çø„Éº„É≥„Å®„ÉÜ„Çô„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê„Å∏„ÅÆÈÅ©Áî®","link":"https://speakerdeck.com/hiroki_hasegawa/tfstate-nofen-ge-hatantoteirekutorigou-cheng-henoshi-yong","contentSnippet":"„ÄéTerraformÊ¥ªÁî®Â§ßÂÖ® - IaC„ÅÆ‰ªä„Äè„ÅÆÁôªÂ£áË≥áÊñô„Åß„Åô\r\r\r„ÉªTerraform„ÅÆtfstate„ÅÆÂàÜÂâ≤„Éë„Çø„Éº„É≥\r„ÉªtfstateÂàÜÂâ≤„Çí„É™„Éù„Ç∏„Éà„É™„ÇÑ„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê„Å∏„ÅÆÈÅ©Áî®„Åô„ÇãÊñπÊ≥ï\r\r„ÇíÁ¥π‰ªã„Åó„Åæ„Åó„Åü\r\r„Çπ„É©„Ç§„Éâ„Åß„ÅØÂ∞ë„Åó„Åó„ÅãÂàÜÂâ≤„Éë„Çø„Éº„É≥„ÇíÁ¥π‰ªã„Åß„Åç„Åæ„Åõ„Çì„Åß„Åó„Åü„ÅÆ„Åß„ÄÅ„Åú„Å≤ÂÖÉË®ò‰∫ã (tfstate„Éï„Ç°„Ç§„É´„ÅÆÂàÜÂâ≤„Éë„Çø„Éº„É≥„Å®„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê„Å∏„ÅÆÈÅ©Áî®) „ÇÇ„ÅîÂèÇÁÖß„Åè„Å†„Åï„ÅÑüëçüèª\r\rüê¶ „ÉÑ„Ç§„Éº„ÉàÔºöhttps://x.com/Hiroki__IT/status/1717030862452384047","isoDate":"2023-10-24T04:00:00.000Z","dateMiliSeconds":1698120000000,"authorName":"Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π","authorId":"hiroki-hasegawa"},{"title":"„ÄêArgoCDüêôÔ∏è„ÄëKubernetes„ÅÆ„Éû„É´„ÉÅ„ÉÜ„Éä„É≥„Éà„Éë„Çø„Éº„É≥„Å®ArgoCD„ÅÆÂÆüË∑µ„ÉÜ„Éä„É≥„ÉàË®≠Ë®à","link":"https://hiroki-hasegawa.hatenablog.jp/entry/2023/08/18/110646","contentSnippet":"„Åì„ÅÆË®ò‰∫ã„Åã„ÇâÂæó„Çâ„Çå„ÇãÁü•Ë≠ò„Åì„ÅÆË®ò‰∫ã„ÇíË™≠„ÇÄ„Å®„ÄÅ‰ª•‰∏ã„Çí \"ÂÆåÂÖ®„Å´ÁêÜËß£\" „Åß„Åç„Åæ„Åô‚úåÔ∏èKubernetes„ÅÆ„Éû„É´„ÉÅ„ÉÜ„Éä„É≥„Éà„Éë„Çø„Éº„É≥„ÅÆÁ®ÆÈ°û„Éû„É´„ÉÅ„ÉÜ„Éä„É≥„Éà„Éë„Çø„Éº„É≥„ÇíArgoCD„ÅßÂÆüË∑µ„Åô„ÇãÂ†¥Âêà„Å´„Ç™„Çπ„Çπ„É°„ÅÆ„Éë„Çø„Éº„É≥ (‚òÖ„ÅßË°®Áèæ)ArgoCD„ÅÆNamespaced„Çπ„Ç≥„Éº„Éó„É¢„Éº„Éâ„Å®Cluster„Çπ„Ç≥„Éº„Éó„É¢„Éº„ÉâArgoCD„ÅÆ„ÉÜ„Éä„É≥„Éà„ÅåÈò≤„ÅÑ„Åß„Åè„Çå„ÇãË™§„Å£„ÅüÊìç‰Ωú„ÅÆÂÖ∑‰Ωì‰æãË®ò‰∫ã„ÅÆ„Åñ„Å£„Åè„Çä„Åó„ÅüÂÜÖÂÆπ„ÅØ„ÄÅ‰ª•‰∏ã„ÅÆ„Çπ„É©„Ç§„Éâ„Åã„Çâ„Ç≠„É£„ÉÉ„ÉÅ„Ç¢„ÉÉ„Éó„Åß„Åç„Å°„ÇÉ„ÅÑ„Åæ„ÅôÔºÅ    „Åì„ÅÆË®ò‰∫ã„Åã„ÇâÂæó„Çâ„Çå„ÇãÁü•Ë≠ò01. „ÅØ„Åò„ÇÅ„Å´02. „Å™„Åú„Éû„É´„ÉÅ„ÉÜ„Éä„É≥„Éà„ÅåÂøÖË¶Å„Å™„ÅÆ„Åã„Ç∑„É≥„Ç∞„É´„ÉÜ„Éä„É≥„Éà„ÅÆÂ†¥Âêà„Éû„É´„ÉÅ„ÉÜ„Éä„É≥„Éà„ÅÆÂ†¥Âêà03. Kubernetes„ÅÆ„Éû„É´„ÉÅ„ÉÜ„Éä„É≥„Éà„Éë„Çø„Éº„É≥„Éû„É´„ÉÅ„ÉÜ„Éä„É≥„Éà„Éë„Çø„Éº„É≥„ÅÆ‰∏ÄË¶ßClusters as-a-ServiceControl Planes as-a-ServiceNamespaces as-a-Service„Ç´„Çπ„Çø„É†„É™„ÇΩ„Éº„Çπ„ÉÜ„Éä„É≥„Éà04. ArgoCD„Åß„ÅÆ„ÉÜ„Éä„É≥„Éà„Éë„Çø„Éº„É≥ÂÆüË∑µ‰∏ÄË¶ß04-02. Clusters as-a-Service ÂÆüË∑µÂÆüCluster„ÉÜ„Éä„É≥„Éà„Ç™„Çπ„Çπ„É°„Åó„Å™„ÅÑÁêÜÁî±04-03. Control Planes as-a-Service ÂÆüË∑µ‰ªÆÊÉ≥Cluster„ÉÜ„Éä„É≥„Éà - ‚òÖ„Ç™„Çπ„Çπ„É°„Åó„ÅüÁêÜÁî±04-04. Namespaces as-a-Service ÂÆüË∑µ04-05. „Ç´„Çπ„Çø„É†„É™„ÇΩ„Éº„Çπ„ÉÜ„Éä„É≥„Éà„ÅÆÂÆüË∑µAppProject„ÉÜ„Éä„É≥„ÉàCL„É¢„Éº„Éâ vs. NS„É¢„Éº„Éâ05. CL„É¢„Éº„Éâ„Å™ArgoCDCL„É¢„Éº„Éâ„Å™ArgoCD„Å®„ÅØAppProjectArgoCD„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÁî®ConfigMap (argocd-cmd-params-cm)„É≠„Ç∞„Ç§„É≥„É¶„Éº„Ç∂„ÉºÁî®ConfigMap (argocd-rbac-cm)„Ç™„Çπ„Çπ„É°„Åó„Å™„ÅÑÁêÜÁî±05-02. NS„É¢„Éº„Éâ„Å™ArgoCD - ‚òÖ‚òÖNS„É¢„Éº„Éâ„Å™ArgoCD„Å®„ÅØAppProjectArgoCD„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÁî®ConfigMap (argocd-cmd-params-cm)„É≠„Ç∞„Ç§„É≥„É¶„Éº„Ç∂„ÉºÁî®ConfigMap (argocd-rbac-cm)Áâπ„Å´„Ç™„Çπ„Çπ„É°„Åó„ÅüÁêÜÁî±AppProject„ÉÜ„Éä„É≥„Éà‰æã„ÅÆ‰∏ÄË¶ß„ÉÜ„Éä„É≥„Éà‰æã1Namespace („Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆÂÆüË°åÁí∞Â¢ÉÂà•)„ÄÅAppProject („Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆÂÆüË°åÁí∞Â¢ÉÂà•)„Ç™„Çπ„Çπ„É°„Åó„Å™„Åã„Å£„ÅüÁêÜÁî±„ÉÜ„Éä„É≥„Éà‰æã2 - ‚òÖNamespace („Éó„É≠„ÉÄ„ÇØ„ÉàÂà•)„ÄÅAppProject („Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆÂÆüË°åÁí∞Â¢ÉÂà•)„Ç™„Çπ„Çπ„É°„Åó„ÅüÁêÜÁî±„ÉÜ„Éä„É≥„Éà‰æã3 - ‚òÖ‚òÖNamespace („Éó„É≠„ÉÄ„ÇØ„ÉàÂà•)„ÄÅAppProject („Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆ„Çµ„Éñ„ÉÅ„Éº„É†Âà•)Áâπ„Å´„Ç™„Çπ„Çπ„É°„Åó„ÅüÁêÜÁî±06. „Å©„ÅÆ„Çà„ÅÜ„Å™Ë™§„Å£„ÅüÊìç‰Ωú„ÇíÈò≤„ÅÑ„Åß„Åè„Çå„Çã„ÅÆ„Åã„Éû„Éã„Éï„Çß„Çπ„Éà„ÅÆ„Éá„Éó„É≠„Ç§Âà∂Èôê„Éû„Éã„Éï„Çß„Çπ„Éà„Çí„Éá„Éó„É≠„Ç§„Åß„Åç„ÇãÂ†¥Âêà(üö´Âà∂Èôê‰æã1) ÁÑ°Ë™çÂèØ„ÅÆNamespace„ÅßApplication„Çí‰ΩúÊàê„Åó„Çà„ÅÜ„Å®„Åó„ÅüÂ†¥Âêà(üö´Âà∂Èôê‰æã2) ÁÑ°Ë™çÂèØ„ÅÆAppProject„ÅßApplication„Çí‰ΩúÊàê„Åó„Çà„ÅÜ„Å®„Åó„ÅüÂ†¥Âêà(üö´Âà∂Èôê‰æã3) ÁÑ°Ë™çÂèØ„ÅÆCluster„Çí„Éá„Éó„É≠„Ç§ÂÖà„Å´ÊåáÂÆö„Åó„Çà„ÅÜ„Å®„Åó„ÅüÂ†¥Âêà(üö´Âà∂Èôê‰æã4) ÁÑ°Ë™çÂèØ„ÅÆNamespace„Çí„Éá„Éó„É≠„Ç§ÂÖà„Å´ÊåáÂÆö„Åó„Çà„ÅÜ„Å®„Åó„ÅüÂ†¥Âêà„Ç´„Çπ„Çø„É†„É™„ÇΩ„Éº„Çπ„ÅÆReconciliationÂà∂ÈôêArgoCDÁ≥ª„Ç´„Çπ„Çø„É†„É™„ÇΩ„Éº„Çπ„ÇíReconciliation„Åß„Åç„ÇãÂ†¥Âêà(üö´Âà∂Èôê‰æã1) ÁÑ°Ë™çÂèØ„ÅÆNamespace„Å´Reconciliation„ÇíÂÆüË°å„Åó„Çà„ÅÜ„Å®„Åó„ÅüÂ†¥Âêà07. „Åä„Çè„Çä„Å´Ë¨ùËæûË®ò‰∫ãÈñ¢ÈÄ£„ÅÆ„Åä„Åô„Åô„ÇÅÊõ∏Á±ç01. „ÅØ„Åò„ÇÅ„Å´„Å©„ÅÜ„ÇÇ„ÄÅÁÜüÊàê„Ç¢„É´„Éà„Éê„Ç§„Ç®„É´„É≥„Åß„Åô„ÄÇÁîªÂÉèÂºïÁî®ÂÖÉÔºöArgo Project„Åï„Å¶ÊúÄËøë„ÅÆÊ•≠Âãô„Åß„ÄÅÂÖ®„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆÊäÄË°ìÂü∫Áõ§ÈñãÁô∫„ÉÅ„Éº„É†„Å´Êê∫„Çè„Å£„Å¶„Åä„Çä„ÄÅÂÖ®„Éó„É≠„ÉÄ„ÇØ„ÉàÂÖ±Êúâ„ÅÆArgoCDüêô„ÅÆ„Éû„É´„ÉÅ„ÉÜ„Éä„É≥„ÉàÂåñ„ÇíÊãÖÂΩì„Åó„Åæ„Åó„Åü„ÄÇ„Éó„É≠„ÉÄ„ÇØ„Éà„ÅåÁ®ºÂÉç„Åô„ÇãKubernetes Cluster„ÅåÊï∞ÂçÅÂÄã„ÅÇ„Çä„ÄÅCluster„Å´„Çà„Å£„Å¶„ÅØË§áÊï∞„ÅÆ„ÉÅ„Éº„É†„ÅåÂêàË®à100ÂÄã‰ª•‰∏ä„ÅÆ„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„ÇíÂãï„Åã„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ„Åì„ÅÆ„Çà„ÅÜ„Å™Â§ßË¶èÊ®°„Å™„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„Ç∑„Çπ„ÉÜ„É†„Åå„ÅÑ„Åè„Å§„ÇÇ„ÅÇ„ÇãÁä∂Ê≥Å‰∏ã„Åß„ÄÅArgoCD„ÅÆ„Éû„É´„ÉÅ„ÉÜ„Éä„É≥„ÉàË®≠Ë®à„ÅÆÁü•Ë¶ã„ÇíÊ∑±„ÇÅ„Çâ„Çå„Åü„Åü„ÇÅ„ÄÅË®ò‰∫ã„ÅßËß£Ë™¨„Åó„Åæ„Åó„Åü„ÄÇÊõ∏„Åç„Åü„ÅÑ„Åì„Å®„ÇíÂÖ®ÈÉ®Êõ∏„ÅÑ„Åü„Å®„Åì„Çç„ÄÅÊÉÖÂ†±Èáè„Åå„Ç®„Ç∞„ÅÑ„Åì„Å®„Å´„Å™„Å£„Å¶„Åó„Åæ„Å£„Åü„Åü„ÇÅ„ÄÅÊ∞ó„Å´„Å™„ÇãÁ´†„Å†„Åë„Åß„ÇÇÊãæ„Å£„Å¶Â∏∞„Å£„Å¶„ÅÑ„Åü„Å†„Åë„Çã„Å®„Éè„ÉÉ„Éî„Éº„Åß„ÅôüôèKubernetes„ÅÆ„Éû„É´„ÉÅ„ÉÜ„Éä„É≥„Éà„Éë„Çø„Éº„É≥ (3Á´†)ArgoCD„Åß„ÅÆ„ÉÜ„Éä„É≥„Éà„Éë„Çø„Éº„É≥ÂÆüË∑µ‰∏ÄË¶ß (4Á´†)ArgoCD„ÅÆCluster„Çπ„Ç≥„Éº„Éó„É¢„Éº„Éâ„Å®Namespaced„Çπ„Ç≥„Éº„Éó„É¢„Éº„Éâ (5Á´†)„Å©„ÅÆ„Çà„ÅÜ„Å™Ë™§„Å£„ÅüÊìç‰Ωú„ÇíÈò≤„ÅÑ„Åß„Åè„Çå„Çã„ÅÆ„Åã (6Á´†)„Åù„Çå„Åß„ÅØ„ÄÅ„ÇÇ„Çä„ÇÇ„ÇäÂ∏ÉÊïô„Åó„Å¶„ÅÑ„Åç„Åæ„Åôüòó02. „Å™„Åú„Éû„É´„ÉÅ„ÉÜ„Éä„É≥„Éà„ÅåÂøÖË¶Å„Å™„ÅÆ„Åã„Ç∑„É≥„Ç∞„É´„ÉÜ„Éä„É≥„Éà„ÅÆÂ†¥Âêà„Åù„ÇÇ„Åù„ÇÇ„ÄÅ„Å™„ÅúArgoCD„Å´„Éû„É´„ÉÅ„ÉÜ„Éä„É≥„Éà„ÅåÂøÖË¶Å„Å™„ÅÆ„Åß„Åó„Çá„ÅÜ„Åã„ÄÇ‰æã„Åà„Å∞„ÄÅ„Éû„Éã„Éï„Çß„Çπ„Éà„ÅÆ„Éá„Éó„É≠„Ç§ÂÖà„Å®„Å™„Çã„Éó„É≠„ÉÄ„ÇØ„ÉàÁî®Cluster (‰æãÔºöfoo„ÄÅbar„ÄÅbaz) „Åå„ÅÇ„Çã„Å®‰ªÆÂÆö„Åó„Åæ„Åô„ÄÇArgoCD„Çí„Ç∑„É≥„Ç∞„É´„ÉÜ„Éä„É≥„Éà„Å´„Åô„ÇãÂ†¥Âêà„ÄÅÂêÑ„Éó„É≠„ÉÄ„ÇØ„Éà„ÉÅ„Éº„É†„ÅÆÊìç‰Ωú„Åô„ÇãApplication„ÇíÂêå„Åò„ÉÜ„Éä„É≥„Éà„Å´ÂÖ±Â≠ò„Åï„Åõ„Çã„Åì„Å®„Å´„Å™„Çä„Åæ„Åô„ÄÇ„Åì„ÅÆÂ†¥Âêà„ÄÅÂçò‰∏Ä„ÅÆargocd-server („ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ) „Åã„ÇâÂÖ®„Å¶„ÅÆApplication„ÇíÊìç‰Ωú„Åß„Åç„Å¶‰æøÂà©„Åß„Åô„ÄÇ„Åó„Åã„Åó„ÄÅ„Éó„É≠„ÉÄ„ÇØ„ÉàÁî®ClusterÊï∞„ÅåÂ¢ó„Åà„Å¶„ÅÑ„Åè„Å´„Å§„Çå„Å¶„ÄÅÂïèÈ°å„ÅåËµ∑„Åì„ÇäÂßã„ÇÅ„Åæ„Åô„ÄÇ‰æã„Åà„Å∞„ÄÅ„ÅÑ„Åö„Çå„Åã„ÅÆ„Éó„É≠„ÉÄ„ÇØ„Éà„ÉÅ„Éº„É†„ÅåË™§„Å£„ÅüApplication„ÇíÊìç‰Ωú„Åó„ÄÅÁµêÊûúÁöÑ„Å´Ë™§„Å£„Åü„Éó„É≠„ÉÄ„ÇØ„ÉàÁî®Cluster„Å´„Éû„Éã„Éï„Çß„Çπ„Éà„Çí„Éá„Éó„É≠„Ç§„Åó„Å¶„Åó„Åæ„ÅÜÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ„ÇÇ„Å°„Çç„Çì„ÄÅ„Ç∑„Çπ„ÉÜ„É†„Åß„Ç§„É≥„Ç∑„Éá„É≥„Éà„ÇíËµ∑„Åì„Åó„Å¶„ÇÑ„Çç„ÅÜ„Å®„ÅÑ„ÅÜÊÇ™ÊÑè„ÇíÊåÅ„Å£„Åü‰∫∫„Åå„ÄÅË™§„Å£„Åü„Éó„É≠„ÉÄ„ÇØ„ÉàÁî®Cluster„ÇíÊÑèÂõ≥ÁöÑ„Å´ÈÅ∏„Å∂ÂèØËÉΩÊÄß„ÇÇ„ÅÇ„Çä„Åæ„Åôüòà„Éû„É´„ÉÅ„ÉÜ„Éä„É≥„Éà„ÅÆÂ†¥Âêà„Åù„ÅÆ‰∏ÄÊñπ„Åß„ÄÅ„ÅÑ„ÅÑÊÑü„Åò„ÅÆ„Éû„É´„ÉÅ„ÉÜ„Éä„É≥„Éà„Å´„Åó„Åü„Å®„Åó„Åæ„Åô„ÄÇ„Éó„É≠„ÉÄ„ÇØ„Éà„ÉÅ„Éº„É†„ÅØ„ÄÅË™çÂèØ„Åï„Çå„Åü„ÉÜ„Éä„É≥„Éà„Å´ÊâÄÂ±û„Åô„ÇãApplication„Å´„ÅÆ„Åø„ÇíÊìç‰Ωú„Åß„Åç„ÄÅÂèçÂØæ„Å´ÁÑ°Ë™çÂèØ„ÅÆ„ÉÜ„Éä„É≥„Éà„ÅÆApplication„ÅØÊìç‰Ωú„Åß„Åç„Åæ„Åõ„Çì„ÄÇ„Åì„Çå„Å´„Çà„Çä„ÄÅË™§„Å£„Åü„Éó„É≠„ÉÄ„ÇØ„ÉàÁî®Cluster„Å´„Éû„Éã„Éï„Çß„Çπ„Éà„Çí„Éá„Éó„É≠„Ç§„Åô„Çã„Åì„Å®„ÇíÈò≤„Åí„Åæ„Åô„ÄÇ03. Kubernetes„ÅÆ„Éû„É´„ÉÅ„ÉÜ„Éä„É≥„Éà„Éë„Çø„Éº„É≥„Éû„É´„ÉÅ„ÉÜ„Éä„É≥„Éà„Éë„Çø„Éº„É≥„ÅÆ‰∏ÄË¶ßArgoCD„ÅÆ„ÉÜ„Éä„É≥„ÉàË®≠Ë®à„ÇíÂÆüË∑µ„Åô„ÇãÂâç„Å´„ÄÅKubernetes„Å´„ÅØ„Å©„Çì„Å™„Éû„É´„ÉÅ„ÉÜ„Éä„É≥„Éà„Éë„Çø„Éº„É≥„Åå„ÅÇ„Çã„ÅÆ„Åß„Åó„Çá„ÅÜ„Åã„ÄÇKubernetes„ÅÆ„Éû„É´„ÉÅ„ÉÜ„Éä„É≥„Éà„Éë„Çø„Éº„É≥„ÅØ„ÄÅ‰ª•‰∏ã„Å´Â§ßÂà•„Åß„Åç„Åæ„Åô„ÄÇ         Clustersas-a-Service         Control Planesas-a-Service         Namespacesas-a-Service         „Ç´„Çπ„Çø„É†„É™„ÇΩ„Éº„Çπ„ÉÜ„Éä„É≥„Éà      „ÉÜ„Éä„É≥„ÉàÂçò‰Ωç         ÂÆüCluster         ‰ªÆÊÉ≥Cluster         Namespace         „ÉÑ„Éº„É´Âõ∫Êúâ„ÅÆË´ñÁêÜÁ©∫Èñì      „ÉÜ„Éä„É≥„ÉàÈñì„ÅßKubernetes„É™„ÇΩ„Éº„Çπ„ÇíÂàÜÈõ¢„Åß„Åç„Çã„Åã         Cluster„Çπ„Ç≥„Éº„Éó„É™„ÇΩ„Éº„Çπ         ‚úÖ         ‚úÖ         ‚úÖ         „ÉÑ„Éº„É´„Å´„Çà„Çã      Namespaced„Çπ„Ç≥„Éº„Éó„É™„ÇΩ„Éº„Çπ         ‚úÖ         ‚úÖ                  „ÉÑ„Éº„É´„Å´„Çà„Çã      „ÉÑ„Éº„É´         AWS EKSGCP GKEAzure AKEKubeadm„Å™„Å©         Kcptensile-kubevclusterVirtualCluster„Å™„Å©         Namespace„ÇíÂ¢ó„ÇÑ„Åô„Å†„Åë„Å™„ÅÆ„ÅßÁâπÂà•„Å™„ÉÑ„Éº„É´‰∏çË¶Å         ArgoCD„ÅÆAppProjectCapsule„ÅÆTenantkiosk„ÅÆAccountKubeZoo„ÅÆTenant„Å™„Å©      ‚ñ∂ ‰ªñ„ÅÆ„Éû„É´„ÉÅ„ÉÜ„Éä„É≥„Éà„ÅÆÂàÜÈ°ûÊñπÊ≥ï„Å´„Å§„ÅÑ„Å¶\"„ÇΩ„Éï„Éà„Éû„É´„ÉÅ„ÉÜ„Éä„É≥„Ç∑„Éº\" „Å® \"„Éè„Éº„Éâ„Éû„É´„ÉÅ„ÉÜ„Éä„É≥„Ç∑„Éº\" „Å®„ÅÑ„Å£„ÅüÂàÜÈ°ûÊñπÊ≥ï„ÇÇ„ÅÇ„Çä„Åæ„Åô„ÄÇ„Åì„ÅÆÂàÜÈ°ûÊñπÊ≥ï„Åß„ÅØ„ÄÅ„ÉÜ„Éä„É≥„ÉàÈñì„ÅÆÂàÜÈõ¢Â∫¶„ÅÆË¶≥ÁÇπ„ÅßÂêÑ„Éû„É´„ÉÅ„ÉÜ„Éä„É≥„Éà„ÇíÁ®ÆÂà•„Åó„Åæ„Åô„ÄÇ„ÇΩ„Éï„Éà„Éû„É´„ÉÅ„ÉÜ„Éä„É≥„Ç∑„Éº„ÅØ„ÄÅ‰∫í„ÅÑ„Å´‰ø°È†º„Åß„Åç„ÇãÂâçÊèê„ÅÆ‰∏ä„Åß„ÄÅ„ÉÜ„Éä„É≥„ÉàÈñì„ÇíÂº±„ÅèÂàÜÈõ¢„Åó„Åæ„Åô„ÄÇ„Åù„ÅÆ‰∏ÄÊñπ„Åß„ÄÅ„Éè„Éº„Éâ„Éû„É´„ÉÅ„ÉÜ„Éä„É≥„Ç∑„Éº„ÅØ„ÄÅ‰∫í„ÅÑ„Å´‰ø°È†º„Åß„Åç„Å™„ÅÑÂâçÊèê„ÅÆ‰∏ä„Åß„ÉÜ„Éä„É≥„ÉàÈñì„ÇíÂº∑„ÅèÂàÜÈõ¢„Åó„Åæ„Åô„ÄÇÂàÜÈõ¢Â∫¶„Åå„ÇΩ„Éï„Éà„Å®„Éè„Éº„Éâ„ÅÆ„ÅÑ„Åö„Çå„Åß„ÅÇ„Çã„Åã„Å´ÂÆ¢Ë¶≥ÁöÑ„Å™ÊåáÊ®ô„Åå„Å™„Åè„ÄÅ„ÇÑ„ÇÑÊõñÊòß„Å™Á®ÆÂà•„Å´„Å™„Å£„Å¶„Åó„Åæ„ÅÜ„Åü„ÇÅ„ÄÅÊú¨Ë®ò‰∫ã„ÅÆ X as-a-Service „ÅÆÊñπ„ÅåÂÄã‰∫∫ÁöÑ„Å´„ÅØÂ•Ω„Åø„Åß„Åô‚ô°‚ô°‚ô°The Kubernetes Book: 2024 Edition (English Edition)Multi-tenancy | KubernetesMulti-tenancy - EKS Best Practices GuidesClusters as-a-ServiceClusters as-a-Service„ÅØ„ÄÅ„ÉÜ„Éä„É≥„Éà„Åî„Å®„Å´Áã¨Á´ã„Åó„ÅüCluster„ÇíÊèê‰æõ„Åó„Åæ„Åô„ÄÇ„ÉÑ„Éº„É´„Å®„Åó„Å¶„ÄÅAWS EKS„ÄÅGCP GKE„ÄÅAzure AKE„ÄÅKubeadm„Å™„Å©„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇThree Tenancy Models For Kubernetes | KubernetesWhat are the three tenancy models for Kubernetes?Control Planes as-a-ServiceControl Planes as-a-Service„ÅØ„ÄÅ„ÉÜ„Éä„É≥„Éà„Åî„Å®„Å´Áã¨Á´ã„Åó„Åü„Ç≥„É≥„Éà„É≠„Éº„É´„Éó„É¨„Éº„É≥ (Ë®Ä„ÅÑÊèõ„Åà„Å∞‰ªÆÊÉ≥Cluster) „ÇíÊèê‰æõ„Åó„Åæ„Åô„ÄÇ„ÉÑ„Éº„É´„Å®„Åó„Å¶„ÄÅKcp„ÄÅtensile-kube„ÄÅvcluster„ÄÅVirtualCluster„Å™„Å©„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇThree Tenancy Models For Kubernetes | KubernetesWhat are the three tenancy models for Kubernetes?Namespaces as-a-ServiceNamespaces as-a-Service„ÅØ„ÄÅ„ÉÜ„Éä„É≥„Éà„Åî„Å®„Å´Áã¨Á´ã„Åó„ÅüNamespace„ÇíÊèê‰æõ„Åó„Åæ„Åô„ÄÇNamespace„ÇíÂ¢ó„ÇÑ„Åô„Å†„Åë„Å™„Åü„ÇÅ„ÄÅ„ÉÑ„Éº„É´„ÅØ‰∏çË¶Å„Åß„Åô„ÄÇThree Tenancy Models For Kubernetes | KubernetesWhat are the three tenancy models for Kubernetes?„Ç´„Çπ„Çø„É†„É™„ÇΩ„Éº„Çπ„ÉÜ„Éä„É≥„Éà„Ç´„Çπ„Çø„É†„É™„ÇΩ„Éº„Çπ„ÉÜ„Éä„É≥„Éà„ÅØ„ÄÅ„ÉÜ„Éä„É≥„Éà„Åî„Å®„Å´„ÉÑ„Éº„É´Âõ∫Êúâ„ÅÆË´ñÁêÜÁ©∫Èñì (‰æãÔºöArgoCD„ÅÆAppProject„ÄÅCapsule„ÅÆTenant„ÄÅkiosk„ÅÆAccount„ÄÅKubeZoo„ÅÆTenant„Å™„Å©) „ÇíÊèê‰æõ„Åó„Åæ„Åô„ÄÇ„ÉÑ„Éº„É´„Å´„Çà„Å£„Å¶„ÅØ„ÄÅX as-a-Service „ÇÇÂÖº„Å≠„Å¶„ÅÑ„ÇãÂ†¥Âêà„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ‰ªäÂõûÁ¥π‰ªã„Åô„ÇãAppProject„ÅØ„ÄÅÂâçËø∞„ÅÆ„ÄéNamespace as-a-Service„Äè„ÇíÂÖº„Å≠„Å¶„ÅÑ„Åæ„Åô„ÄÇAppProject„Å´„Å§„ÅÑ„Å¶„ÅØ„ÄÅ„Ç´„Çπ„Çø„É†„É™„ÇΩ„Éº„Çπ„ÉÜ„Éä„É≥„Éà „ÅßËß£Ë™¨„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ04. ArgoCD„Åß„ÅÆ„ÉÜ„Éä„É≥„Éà„Éë„Çø„Éº„É≥ÂÆüË∑µ‰∏ÄË¶ß„ÅäÂæÖ„Åü„Åõ„Åó„Åæ„Åó„Åü„ÄÇ„Åì„Åì„Åã„Çâ„ÅØ„ÄÅKubernetes„ÅÆ„Éû„É´„ÉÅ„ÉÜ„Éä„É≥„Éà„Éë„Çø„Éº„É≥„ÇíArgoCD„ÅßÂÖ∑‰ΩìÁöÑ„Å´ÂÆüË∑µ„Åó„ÄÅ„Åä„Åô„Åô„ÇÅ„ÅÆ„Éë„Çø„Éº„É≥ÂÆüË∑µ„ÇíËß£Ë™¨„Åó„Å¶„ÅÑ„Åç„Åæ„Åô„ÄÇ„Å™„Åä„ÄÅ„Ç™„Çπ„Çπ„É°„Åô„Çã„ÇÇ„ÅÆ„Çí ‚òÖ „Å®„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ         ÂÆüCluster„ÉÜ„Éä„É≥„Éà         ‰ªÆÊÉ≥Cluster„ÉÜ„Éä„É≥„Éà         Namespace„ÉÜ„Éä„É≥„Éà         AppProject„ÉÜ„Éä„É≥„ÉàCL„É¢„Éº„Éâ         AppProject„ÉÜ„Éä„É≥„ÉàNS„É¢„Éº„Éâ      ÂØæÂøú„Åô„Çã„ÉÜ„Éä„É≥„Éà„Éë„Çø„Éº„É≥         Clustersas-a-Service         Control Planesas-a-Service         Namespacesas-a-Service         „Ç´„Çπ„Çø„É†„É™„ÇΩ„Éº„Çπ„ÉÜ„Éä„É≥„Éà      ArgoCD„Åå„ÉÜ„Éä„É≥„ÉàÈñì„ÅßÂç†Êúâ / ÂÖ±Êúâ         Âç†Êúâ         Âç†Êúâ         Âç†Êúâ         ÂÖ±Êúâ         Âç†Êúâ      „ÉÜ„Éä„É≥„ÉàÈñì„ÅßKubernetes„É™„ÇΩ„Éº„Çπ„ÇíÂàÜÈõ¢„Åß„Åç„Çã„Åã         Namespaced„Çπ„Ç≥„Éº„Éó„É™„ÇΩ„Éº„Çπ         ‚úÖ         ‚úÖ         ‚úÖ         ‚úÖ         ‚úÖ      Cluster„Çπ„Ç≥„Éº„Éó„É™„ÇΩ„Éº„Çπ         ‚úÖ         ‚úÖ                                 „Ç™„Çπ„Çπ„É°                  ‚òÖ                           ‚òÖ‚òÖ      How many do you need? Argo CD Architectures Explained - 2024 Update | Akuity‰ª•Èôç„ÅÆÂõ≥„ÅÆÂá°‰æã„Åß„Åô„ÄÇArgoCD„ÅÆÂêÑ„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà (application-controller„ÄÅargocd-server„ÄÅdex-server„ÄÅrepo-server) „Å®ÂêÑ„É™„ÇΩ„Éº„Çπ (Application„ÄÅAppProject) „ÇíÂå∫Âà•„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ04-02. Clusters as-a-Service ÂÆüË∑µÂÆüCluster„ÉÜ„Éä„É≥„ÉàÂÆüCluster„ÉÜ„Éä„É≥„Éà„ÅØ„ÄÅClusters as-a-Service„Å™„ÉÜ„Éä„É≥„Éà„ÅÆÂÆüË∑µ„Åß„ÅÇ„Çä„ÄÅÂÆüÈöõ„ÅÆCluster„Çí„ÉÜ„Éä„É≥„Éà„ÅÆÂçò‰Ωç„Å®„Åó„Åæ„Åô„ÄÇÂæåËø∞„ÅÆ‰ªÆÊÉ≥Cluster„Å®ÂØæÊØî„Åï„Åõ„Çã„Åü„ÇÅ„Å´„ÄÅ\"ÂÆüCluster\" „Å®Âëº„Å∂„Åì„Å®„Å´„Åó„Åæ„Åô„ÄÇÂêÑ„Éó„É≠„ÉÄ„ÇØ„Éà„ÉÅ„Éº„É†„ÅØ„ÄÅÂÆüCluster„ÉÜ„Éä„É≥„ÉàÂÜÖ„ÅÆApplication„ÇíÊìç‰Ωú„Åó„ÄÅÊ≠£„Åó„ÅÑ„Éó„É≠„ÉÄ„ÇØ„ÉàÁî®Cluster„Å´„Éû„Éã„Éï„Çß„Çπ„Éà„Çí„Éá„Éó„É≠„Ç§„Åó„Åæ„Åô„ÄÇ„Ç™„Çπ„Çπ„É°„Åó„Å™„ÅÑÁêÜÁî±ÂÆüCluster„ÉÜ„Éä„É≥„Éà„Å´„ÅØ„ÄÅ‰ª•‰∏ã„ÅÆ„É°„É™„Éá„É°„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ„Éá„É°„É™„ÉÉ„Éà„ÅÆÂõûÈÅøÁ≠ñ„ÇÇËÄÉÊÖÆ„Åó„Å¶„ÄÅÁã¨Êñ≠„Å®ÂÅèË¶ã„Åß„Ç™„Çπ„Çπ„É°„Åó„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇÂçäÂπ¥‰ª•ÂÜÖ„Å´„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„Åó„Å™„ÅÑ„Å®„Çµ„Éù„Éº„Éà„ÅåÂàá„Çå„ÇãKubernetes„ÇØ„É©„Çπ„Çø„Éº„Åå33ÂÄã„ÇÇ„ÅÇ„Å£„Å¶„ÄÅÊ≥£„ÅÑ„Å°„ÇÉ„Å£„Åü‚Äî Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π (‰ø∫„Åß„Åô) (@Hiroki__IT) January 18, 2023  „Ç¢„Éº„Ç≠„ÉÜ„ÇØ„ÉÅ„É£ÁâπÊÄß  „É°„É™„ÉÉ„Éà ‚≠ïÔ∏è                                                                                                                                                           „Éá„É°„É™„ÉÉ„Éà √ó                                                                                    „Éá„É°„É™„ÉÉ„Éà„ÅÆÂõûÈÅøÁ≠ñ                                                                                  Êã°ÂºµÊÄß                 -                                                                                                                                                                     „ÉÜ„Éä„É≥„Éà„ÇíÂ¢ó„ÇÑ„Åô„Åü„ÇÅ„Å´ÂÆüCluster„ÇíÁî®ÊÑè„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„ÄÅ‰ΩúÊ•≠Èáè„ÅåÂ§ö„ÅÑ„ÄÇ                            ‚û°Ô∏é  IaC„ÉÑ„Éº„É´„ÅßÂÆüCluster„ÇíÁî®ÊÑè„Åô„Çã„Çà„ÅÜ„Å´„Åô„Çå„Å∞‰ΩúÊ•≠Èáè„ÇíÊ∏õ„Çâ„Åõ„Çã„Åå„ÄÅ„ÇÑ„Å£„Å±„Çä„Å®„Å¶„ÇÇ„Å§„Çâ„ÅÑüò≠       ÂÆâÂÖ®ÊÄß(„Çª„Ç≠„É•„É™„ÉÜ„Ç£)        Cluster„Åã„ÇâCluster„Å∏„ÅÆÂêçÂâçËß£Ê±∫„Çí‰∏çÂèØËÉΩ„Å´„Åô„Çå„Å∞„ÄÅ‰ªñ„ÅÆ„ÉÜ„Éä„É≥„Éà„Åã„Çâ„ÅÆÈÄö‰ø°„ÇíÈÅÆÊñ≠„Åß„Åç„Çã„ÄÇ                                                                                  -                                                                                              ‚û°Ô∏é  -                                                                                                   ‰øùÂÆàÊÄß                 Cluster„Çπ„Ç≥„Éº„Éó„Åæ„Åü„ÅØNamespaced„Çπ„Ç≥„Éº„Éó„Å™Kubernetes„É™„ÇΩ„Éº„Çπ„Çí‰ªñ„ÅÆ„ÉÜ„Éä„É≥„Éà„Åã„ÇâÂàÜÈõ¢„Åß„Åç„Çã„ÄÇ„Åì„Çå„Çâ„ÅÆKubernetes„É™„ÇΩ„Éº„Çπ (Áâπ„Å´CRD) „ÅÆÂ§âÊõ¥„Åå‰ªñ„ÅÆ„ÉÜ„Éä„É≥„Éà„Å´ÂΩ±Èüø„Åó„Å™„ÅÑ„ÄÇ  ÂêÑ„ÉÜ„Éä„É≥„Éà„Åå„ÄÅÂÄãÂà•„Å´ÂÆüCluster„Çí‰øùÂÆà„Åó„Å™„ÅÑ„Å®„ÅÑ„Åë„Å™„ÅÑ„ÄÇ(‰æãÔºö„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„ÄÅÊ©üËÉΩ‰øÆÊ≠£„Å™„Å©)  ‚û°Ô∏é  ÂõûÈÅø„Åß„Åç„Åö„ÄÅ„Å®„Å¶„ÇÇ„Å§„Çâ„ÅÑüò≠                                                                           ÊÄßËÉΩ                  Cluster„ÅÆ„Éè„Éº„Éâ„Ç¶„Çß„Ç¢„É™„ÇΩ„Éº„Çπ„Çí‰ªñ„ÅÆ„ÉÜ„Éä„É≥„Éà„Å®Â•™„ÅÑÂêà„ÅÜ„Åì„Å®„Å™„Åè„ÄÅ„Åì„Çå„ÇíÁã¨Âç†„Åß„Åç„Çã„ÄÇ                                                                                     -                                                                                              ‚û°Ô∏é  -                                                                                                   ‰ø°È†ºÊÄß                 „ÉÜ„Éä„É≥„Éà„Åî„Å®„Å´ÂÆüCluster„ÅåÁã¨Á´ã„Åó„Å¶„Åä„Çä„ÄÅ‰ªñ„ÅÆÂÆüCluster„Åã„ÇâÈöúÂÆ≥„ÅÆÂΩ±Èüø„ÇíÂèó„Åë„Å™„ÅÑ„ÄÇ                                                                                        -                                                                                              ‚û°Ô∏é  -                                                                                    04-03. Control Planes as-a-Service ÂÆüË∑µ‰ªÆÊÉ≥Cluster„ÉÜ„Éä„É≥„Éà - ‚òÖ‰ªÆÊÉ≥Cluster„ÉÜ„Éä„É≥„Éà„ÅØ„ÄÅControl Planes as-a-Service„Å™„ÉÜ„Éä„É≥„Éà„ÅÆÂÆüË∑µ„Åß„ÅÇ„Çä„ÄÅ‰ªÆÊÉ≥Cluster„Çí„ÉÜ„Éä„É≥„Éà„ÅÆÂçò‰Ωç„Å®„Åó„Åæ„Åô„ÄÇÂêÑ„Éó„É≠„ÉÄ„ÇØ„Éà„ÉÅ„Éº„É†„ÅØ„ÄÅ‰ªÆÊÉ≥Cluster„ÉÜ„Éä„É≥„ÉàÂÜÖ„ÅÆApplication„ÇíÊìç‰Ωú„Åó„ÄÅÊ≠£„Åó„ÅÑ„Éó„É≠„ÉÄ„ÇØ„ÉàÁî®Cluster„Å´„Éû„Éã„Éï„Çß„Çπ„Éà„Çí„Éá„Éó„É≠„Ç§„Åó„Åæ„Åô„ÄÇUsing Argo CD with vclusters. Managing deployment to multiple‚Ä¶ | by Daniel Helfand | Argo Project„Ç™„Çπ„Çπ„É°„Åó„ÅüÁêÜÁî±‰ªÆÊÉ≥Cluster„ÉÜ„Éä„É≥„Éà„Å´„ÅØ„ÄÅ‰ª•‰∏ã„ÅÆ„É°„É™„Éá„É°„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ„Éá„É°„É™„ÉÉ„Éà„ÅÆÂõûÈÅøÁ≠ñ„ÇÇËÄÉÊÖÆ„Åó„Å¶„ÄÅÁã¨Êñ≠„Å®ÂÅèË¶ã„Åß „Ç™„Çπ„Çπ„É° „Åó„Åæ„Åó„Åü„ÄÇ „Ç¢„Éº„Ç≠„ÉÜ„ÇØ„ÉÅ„É£ÁâπÊÄß  „É°„É™„ÉÉ„Éà ‚≠ïÔ∏è                                                                                                                                                           „Éá„É°„É™„ÉÉ„Éà √ó                                                                                             „Éá„É°„É™„ÉÉ„Éà„ÅÆÂõûÈÅøÁ≠ñ                                                                                    Êã°ÂºµÊÄß                 „ÉÜ„Éä„É≥„Éà„ÇíÂ¢ó„ÇÑ„Åô„Åü„ÇÅ„Å´„Éû„Éã„Éï„Çß„Çπ„Éà„ÅßÂÆöÁæ©„Åó„Åü‰ªÆÊÉ≥Cluster„ÇíÁî®ÊÑè„Åô„Çã„Å†„Åë„Åß„Çà„Åè„ÄÅÂÆüCluster„ÇíÁî®ÊÑè„Åô„Çã„Åì„Å®„Å®ÊØî„Åπ„Å¶‰ΩúÊ•≠Èáè„ÅåÂ∞ë„Å™„ÅÑ„ÄÇ                                          -                                                                                                       ‚û°Ô∏é  -                                                                                            ÂÆâÂÖ®ÊÄß(„Çª„Ç≠„É•„É™„ÉÜ„Ç£)        ‰ªÆÊÉ≥Cluster„Åã„Çâ„Éõ„Çπ„ÉàCluster„Å∏„ÅÆÂêçÂâçËß£Ê±∫„Çí‰∏çÂèØËÉΩ„Å´„Åô„Çå„Å∞„ÄÅ‰ªñ„ÅÆ„ÉÜ„Éä„É≥„Éà„Åã„Çâ„ÅÆÈÄö‰ø°„ÇíÈÅÆÊñ≠„Åß„Åç„Çã„ÄÇ                                                                        -                                                                                                       ‚û°Ô∏é  -                                                                                                     ‰øùÂÆàÊÄß                 Cluster„Çπ„Ç≥„Éº„Éó„Åæ„Åü„ÅØNamespaced„Çπ„Ç≥„Éº„Éó„Å™Kubernetes„É™„ÇΩ„Éº„Çπ„Çí‰ªñ„ÅÆ„ÉÜ„Éä„É≥„Éà„Åã„ÇâÂàÜÈõ¢„Åß„Åç„Çã„ÄÇ„Åì„Çå„Çâ„ÅÆKubernetes„É™„ÇΩ„Éº„Çπ (Áâπ„Å´CRD) „ÅÆÂ§âÊõ¥„Åå‰ªñ„ÅÆ„ÉÜ„Éä„É≥„Éà„Å´ÂΩ±Èüø„Åó„Å™„ÅÑ„ÄÇ  ÂêÑ„ÉÜ„Éä„É≥„Éà„Åå„ÄÅÂÄãÂà•„Å´‰ªÆÊÉ≥Cluster„Çí‰øùÂÆà„Åó„Å™„ÅÑ„Å®„ÅÑ„Åë„Å™„ÅÑ„ÄÇ(‰æãÔºö„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„ÄÅÊ©üËÉΩ‰øÆÊ≠£„Å™„Å©)  ‚û°Ô∏é  ‰ªÆÊÉ≥Cluster„Å´Èñ¢„Åô„ÇãÁü•Ë¶ã„ÇíÊåÅ„Å§ÁµÑÁπî„Åß„ÅÇ„Çå„Å∞„ÄÅÂêÑ„ÉÜ„Éä„É≥„Éà„Åß‰øùÂÆà„Åß„Åç„Çã„ÄÇ                                    ÊÄßËÉΩ                  -                                                                                                                                                                     Cluster„ÅÆ„Éè„Éº„Éâ„Ç¶„Çß„Ç¢„É™„ÇΩ„Éº„Çπ„Çí‰ªñ„ÅÆ„ÉÜ„Éä„É≥„Éà„Å®Â•™„ÅÑÂêà„ÅÜ„Åì„Å®„Å´„Å™„Çã„ÄÇ                                       ‚û°Ô∏é  Â§ö„Åè„ÅÆÂà©Áî®ËÄÖ„ÅåÂêåÊôÇ‰∏¶Ë°åÁöÑ„Å´ArgoCD„ÇíÊìç‰Ωú„Åô„ÇãÁä∂Ê≥Å„Å´„Å™„Çä„Å´„Åè„Åë„Çå„Å∞„ÄÅÂ•™„ÅÑÂêà„ÅÑ„ÇÇËµ∑„Åì„Çâ„Å™„ÅÑ„ÄÇ                ‰ø°È†ºÊÄß                 „ÉÜ„Éä„É≥„Éà„Åî„Å®„Å´‰ªÆÊÉ≥Cluster„ÅåÁã¨Á´ã„Åó„Å¶„Åä„Çä„ÄÅ‰ªñ„ÅÆ‰ªÆÊÉ≥Cluster„Åã„ÇâÈöúÂÆ≥„ÅÆÂΩ±Èüø„ÇíÂèó„Åë„Å™„ÅÑ„ÄÇ                                                                                    -                                                                                                       ‚û°Ô∏é  -                                                                                      04-04. Namespaces as-a-Service ÂÆüË∑µNamespace„ÉÜ„Éä„É≥„Éà„ÅØ„ÄÅNamespaces as-a-Service„Å™„ÉÜ„Éä„É≥„Éà„ÅÆÂÆüË∑µ„Åß„ÅÇ„Çä„ÄÅNamespace„Çí„ÉÜ„Éä„É≥„Éà„ÅÆÂçò‰Ωç„Å®„Åó„Åæ„Åô„ÄÇÂæåËø∞„ÅÆ AppProject„ÉÜ„Éä„É≥„Éà „ÅØ‰∫åÈáç„ÅÆ„ÉÜ„Éä„É≥„Éà„ÇíÊåÅ„Å°„ÄÅNamespace„ÉÜ„Éä„É≥„Éà„ÇÇÂÖº„Å≠„Å¶„ÅÑ„Åæ„Åô„ÄÇ„Åù„ÅÆ„Åü„ÇÅ„ÄÅ„Åì„Åì„Åß„ÅØNamespace„ÉÜ„Éä„É≥„Éà„ÅÆËß£Ë™¨„ÅØÁúÅÁï•„Åó„Åæ„Åô„ÄÇ04-05. „Ç´„Çπ„Çø„É†„É™„ÇΩ„Éº„Çπ„ÉÜ„Éä„É≥„Éà„ÅÆÂÆüË∑µAppProject„ÉÜ„Éä„É≥„ÉàAppProject„ÉÜ„Éä„É≥„Éà„ÅØ„ÄÅ„Ç´„Çπ„Çø„É†„É™„ÇΩ„Éº„Çπ„ÉÜ„Éä„É≥„Éà„ÅÆÂÆüË∑µ„Åß„ÅÇ„Çä„ÄÅNamespace„Å®AppProject„Çí„ÉÜ„Éä„É≥„Éà„ÅÆÂçò‰Ωç„Å®„Åó„Åæ„Åô„ÄÇAppProject„ÉÜ„Éä„É≥„Éà„ÅØ„ÄÅ‰∫åÈáç„ÅÆ„ÉÜ„Éä„É≥„Éà (Á¨¨‰∏Ä„ÉÜ„Éä„É≥„Éà„Å´Namespace„ÄÅÁ¨¨‰∫å„ÉÜ„Éä„É≥„Éà„Å´Ë§áÊï∞„ÅÆAppProject) „ÇíÊåÅ„Å°„ÄÅ\"„ÅÇ„Çâ„ÇÜ„ÇãÈù¢„Åã„Çâ\" „Éû„Éã„Éï„Çß„Çπ„Éà„ÅÆ„Éá„Éó„É≠„Ç§„ÇíÂà∂Èôê„Åó„Åæ„Åô„ÄÇÁâπ„Å´„ÄÅAppProject„ÅØNamespace„Çπ„Ç≥„Éº„Éó„Å™„Ç´„Çπ„Çø„É†„É™„ÇΩ„Éº„Çπ„Åß„ÅÇ„Çä„ÄÅËá™Ë∫´„Å´ÊâÄÂ±û„Åô„ÇãApplication„Çí‰∏ÄÊã¨„Åó„Å¶Âà∂Èôê„Åó„Åæ„Åô„ÄÇapiVersion: argoproj.io/v1alpha1kind: AppProjectmetadata:  name: foo-tenant  namespace: foo  # Ëá™Ë∫´„Å´ÊâÄÂ±û„Åô„ÇãApplication„ÇíÂà∂Èôê„Åô„Çãspec: ...apiVersion: argoproj.io/v1alpha1kind: Applicationmetadata:  name: infra-application  namespace: foospec:  # foo-tenant„Å´ÊâÄÂ±û„Åô„Çã  project: foo-tenant  ...Argo CD in Practice: The GitOps way of managing cloud-native applications (English Edition)Projects - Argo CD - Declarative GitOps CD for Kubernetes‚ñ∂ „Ç´„Çπ„Çø„É†„É™„ÇΩ„Éº„Çπ„ÅÆ‰ªïÊßò„Å´„Å§„ÅÑ„Å¶.spec.scope„Ç≠„Éº„Åã„Çâ„ÇÇÂàÜ„Åã„ÇãÈÄö„Çä„ÄÅAppProject„ÅØNamespaced„Çπ„Ç≥„Éº„Éó„Å™„Ç´„Çπ„Çø„É†„É™„ÇΩ„Éº„Çπ„Åß„ÅÇ„Çä„ÄÅ‰ªªÊÑè„ÅÆNamespace„ÇíË®≠ÂÆö„Åß„Åç„Åæ„ÅôüëçapiVersion: apiextensions.k8s.io/v1kind: CustomResourceDefinitionmetadata:  labels:    app.kubernetes.io/name: appprojects.argoproj.io    app.kubernetes.io/part-of: argocd  name: appprojects.argoproj.iospec:  group: argoproj.io  names:    kind: AppProject    ...  # Namespaced„Çπ„Ç≥„Éº„Éó„Å™„Ç´„Çπ„Çø„É†„É™„ÇΩ„Éº„Çπ„Åß„ÅÇ„Çã„Å®„Çè„Åã„Çã  scope: Namespaced...  argo-cd/manifests/crds/appproject-crd.yaml at master ¬∑ argoproj/argo-cd ¬∑ GitHubExtend the Kubernetes API with CustomResourceDefinitions | KubernetesCL„É¢„Éº„Éâ vs. NS„É¢„Éº„ÉâArgoCD„Å´„ÅØ„ÄÅCluster„Çπ„Ç≥„Éº„Éó„É¢„Éº„Éâ „Å® Namespaced„Çπ„Ç≥„Éº„Éó„É¢„Éº„Éâ (‰ª•Èôç„ÄÅ\"CL„É¢„Éº„Éâ\" „Å® \"NS„É¢„Éº„Éâ\") „Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ„Çπ„Ç≥„Éº„Éó„É¢„Éº„Éâ„Å´Âøú„Åò„Å¶„ÄÅAppProject„ÉÜ„Éä„É≥„Éà„ÅÆË®≠Ë®àÊñπÊ≥ï„ÅåÁï∞„Å™„Çä„Åæ„Åô„ÄÇÊú¨Á´†„Åß„ÅØ„ÄÅCL„É¢„Éº„Éâ„Å®NS„É¢„Éº„Éâ„ÅÆ‰∏°Êñπ„ÅßAppProject„ÉÜ„Éä„É≥„Éà„ÇíËß£Ë™¨„Åó„Å¶„ÅÑ„Åç„Åæ„Åô„ÄÇApplications in any namespace - Argo CD - Declarative GitOps CD for Kubernetes05. CL„É¢„Éº„Éâ„Å™ArgoCDCL„É¢„Éº„Éâ„Å™ArgoCD„Å®„ÅØCL„É¢„Éº„Éâ„Å™ArgoCD„ÅÆÂ†¥Âêà„ÄÅÂêÑ„ÉÜ„Éä„É≥„ÉàÈñì„ÅßÂÖ±Êúâ„ÅÆArgoCD„ÇíÁÆ°ÁêÜ„Åó„Åæ„Åô‰æã„Åà„Å∞„ÄÅAppProject„ÉÜ„Éä„É≥„Éà„Å®„Åó„Å¶„ÄÅ„Éó„É≠„ÉÄ„ÇØ„ÉàÂà•„ÅÆNamespace (foo„ÄÅbar„ÄÅbaz) „Å®AppProject (foo„ÄÅbar„ÄÅbaz) „ÇíÁî®ÊÑè„Åó„Åæ„Åô„ÄÇÂà•ÈÄî„ÄÅArgoCDÂ∞ÇÁî®„ÅÆNamespace (argocd) „ÇíÁî®ÊÑè„Åó„ÄÅ„Åì„Åì„Å´Èñ¢ÈÄ£„Åô„ÇãKubernetes„É™„ÇΩ„Éº„Çπ (‰æãÔºöConfigMap) „ÇíÈÖçÁΩÆ„Åó„Åæ„Åô„ÄÇÂêÑ„Éó„É≠„ÉÄ„ÇØ„Éà„ÉÅ„Éº„É†„ÅØ„ÄÅAppProject„ÉÜ„Éä„É≥„ÉàÂÜÖ„ÅÆApplication„ÇíÊìç‰Ωú„Åó„ÄÅÊ≠£„Åó„ÅÑ„Éó„É≠„ÉÄ„ÇØ„ÉàÁî®Cluster„Å´„Éû„Éã„Éï„Çß„Çπ„Éà„Çí„Éá„Éó„É≠„Ç§„Åó„Åæ„Åô„ÄÇApplications in any namespace - Argo CD - Declarative GitOps CD for KubernetesArgoCD: Multi-tenancy strategy. Introduction | by Geoffrey | MediumAppProjectNS„É¢„Éº„Éâ„Å®ÂêåÊßò„Å´„Åó„Å¶„ÄÅAppProject„Å´ÊâÄÂ±û„Åô„ÇãApplication„Å´„Çà„Çã„Éû„Éã„Éï„Çß„Çπ„Éà„ÅÆ„Éá„Éó„É≠„Ç§„ÇíÂà∂Èôê„Åß„Åç„Åæ„Åô„ÄÇ‰æã„Åà„Å∞„ÄÅ‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å™ÂÆüË£Ö„Å´„Å™„Çä„Åæ„Åô„ÄÇapiVersion: argoproj.io/v1alpha1kind: AppProjectmetadata:  name: foo-tenant  namespace: foospec:  destinations:    # ArgoCDÁî®Cluster„Å´Èñ¢„Åô„ÇãË™çÂèØ„ÇíË®≠ÂÆö„Åô„Çã    # App Of Apps„Éë„Çø„Éº„É≥„ÅÆÂ†¥Âêà„Å´‰ΩøÁî®„Åô„Çã    - namespace: foo      server: \"https://kubernetes.default.svc\"    # „Éó„É≠„ÉÄ„ÇØ„ÉàÁî®Cluster„Å´Èñ¢„Åô„ÇãË™çÂèØ„ÇíË®≠ÂÆö„Åô„Çã    - namespace: \"*\"      server: https://foo-cluster.gr7.ap-northeast-1.eks.amazonaws.com  # CL„É¢„Éº„Éâ„Åß„ÅØË®≠ÂÆö„ÅåÂøÖË¶Å„Åß„ÅÇ„Çã  sourceNamespaces:    - fooApplication„ÇíÊìç‰Ωú„Åô„Çã„É≠„Ç∞„Ç§„É≥„É¶„Éº„Ç∂„Éº„Åå„ÄÅÁÑ°Ë™çÂèØ„ÅÆNamespace„ÇÑCluster„Çí„Éá„Éó„É≠„Ç§ÂÖà„Å´ÊåáÂÆö„Åß„Åç„Å™„ÅÑ„Çà„ÅÜ„Å´„ÄÅ.spec.destination„Ç≠„Éº„ÅßÂà∂Èôê„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ‰∏ÄÊñπ„ÅßÂæåËø∞„ÅÆNS„É¢„Éº„Éâ„Å®„ÅØÁï∞„Å™„Çä„ÄÅCL„É¢„Éº„Éâ„Å™ArgoCD„ÅØ‰ªªÊÑè„ÅÆNamespace„ÅÆApplication„Å´„Ç¢„ÇØ„Çª„Çπ„Åß„Åç„Åæ„Åô„ÄÇ„Åù„ÅÆ„Åü„ÇÅ„ÄÅ.spec.sourceNamespaces„Ç≠„Éº„Åß„ÄÅÁâπÂÆö„ÅÆNamespace„ÅÆApplication„Åå„Åì„ÅÆAppProject„Å´ÊâÄÂ±û„Åß„Åç„Å™„ÅÑ„Çà„ÅÜ„Å´„ÄÅApplication„ÅÆNamespace„ÇíÂà∂Èôê„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇApplications in any namespace - Argo CD - Declarative GitOps CD for KubernetesProjects - Argo CD - Declarative GitOps CD for KubernetesArgoCD„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÁî®ConfigMap (argocd-cmd-params-cm)NS„É¢„Éº„Éâ„Å®ÂêåÊßò„Å´„Åó„Å¶„ÄÅargocd-cmd-params-cm„Åß„ÅØ„ÄÅArgoCD„ÅÆÂêÑ„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆ„Ç≥„É≥„ÉÜ„Éä„ÅÆÂºïÊï∞„ÇíË®≠ÂÆö„Åß„Åç„Åæ„Åô„ÄÇ‰æã„Åà„Å∞„ÄÅ‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å™ÂÆüË£Ö„Å´„Å™„Çä„Åæ„Åô„ÄÇapiVersion: v1kind: ConfigMapmetadata:  name: argocd-cmd-params-cm  # Â∞ÇÁî®„ÅÆNamespace„ÇíË®≠ÂÆö„Åô„Çã  namespace: argocddata:  # CL„É¢„Éº„Éâ„Åß„ÅØË®≠ÂÆö„ÅåÂøÖË¶Å„Åß„ÅÇ„Çã  # ÂÖ®„Å¶„ÅÆNamespace„ÇíÊåáÂÆö„Åó„Åü„ÅÑÂ†¥Âêà„ÅØ„ÄÅ„ÉØ„Ç§„É´„Éâ„Ç´„Éº„Éâ„ÇíË®≠ÂÆö„Åô„Çã  application.namespaces: \"*\".application.namespaces„Ç≠„Éº„ÅØ„ÄÅargocd-server„Å®application-controller„ÅÆ--application-namespaces„Ç™„Éó„Ç∑„Éß„É≥„Å´Áõ∏ÂΩì„Åó„Åæ„Åô„ÄÇ‰∏ÄÊñπ„Åß„ÅÆÂæåËø∞„ÅÆNS„É¢„Éº„Éâ„Å®„ÅØÁï∞„Å™„Çä„ÄÅCL„É¢„Éº„Éâ„Å™ArgoCD„ÅØ‰ªªÊÑè„ÅÆNamespace„ÅÆApplication„Å´„Ç¢„ÇØ„Çª„Çπ„Åß„Åç„Åæ„Åô„ÄÇ--application-namespaces„Ç™„Éó„Ç∑„Éß„É≥„Åß„ÄÅ‰ªªÊÑè„ÅÆNamespace„Å´„Ç¢„ÇØ„Çª„Çπ„Åô„Çã„Åü„ÇÅ„ÅÆË™çÂèØ„ÇíË®≠ÂÆö„Åß„Åç„Åæ„Åô„ÄÇApplications in any namespace - Argo CD - Declarative GitOps CD for Kubernetes‚ñ∂ --application-namespaces„Ç™„Éó„Ç∑„Éß„É≥„ÅÆË®≠ÂÆöÊñπÊ≥ï„Å´„Å§„ÅÑ„Å¶argocd-cmd-params-cm„ÅÆ‰ª£„Çè„Çä„Å´„ÄÅ‰æã„Åà„Å∞‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å´Pod„Å´ÂºïÊï∞„ÇíÁõ¥Êé•Ê∏°„Åó„Å¶„ÇÇËâØ„ÅÑ„Åß„ÅôüôÜüèª‚Äç‰æã„Åà„Å∞„ÄÅ‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å™ÂÆüË£Ö„Å´„Å™„Çä„Åæ„Åô„ÄÇapiVersion: v1kind: Podmetadata:  name: argocd-server  namespace: argocdspec:  containers:    - name: argocd-server      image: quay.io/argoproj/argocd:latest      args:        - /usr/local/bin/argocd-server        # „Ç≥„É≥„ÉÜ„ÉäËµ∑ÂãïÊôÇ„ÅÆÂºïÊï∞„Å®„Åó„Å¶        - --application-namespaces=\"*\"  ...apiVersion: v1kind: Podmetadata:  name: argocd-application-controller  namespace: argocdspec:  containers:    - name: argocd-application-controller      image: quay.io/argoproj/argocd:latest      args:        - /usr/local/bin/argocd-application-controller        # „Ç≥„É≥„ÉÜ„ÉäËµ∑ÂãïÊôÇ„ÅÆÂºïÊï∞„Å®„Åó„Å¶        - --application-namespaces=\"*\"  ...  `argocd-application-controller` Command Reference - Argo CD - Declarative GitOps CD for Kubernetes`argocd-server` Command Reference - Argo CD - Declarative GitOps CD for Kubernetes„É≠„Ç∞„Ç§„É≥„É¶„Éº„Ç∂„ÉºÁî®ConfigMap (argocd-rbac-cm)NS„É¢„Éº„Éâ„Å®ÂêåÊßò„Å´„Åó„Å¶„ÄÅargocd-rbac-cm„Åß„ÅØ„ÄÅApplication„ÇíÊìç‰Ωú„Åô„Çã„É≠„Ç∞„Ç§„É≥„É¶„Éº„Ç∂„Éº„Åå„ÄÅÁÑ°Ë™çÂèØ„ÅÆAppProject„ÇÑNamespace„Å´ÊâÄÂ±û„Åô„ÇãApplication„ÇíÊìç‰Ωú„Åß„Åç„Å™„ÅÑ„Çà„ÅÜ„Å´Âà∂Èôê„Åó„Åæ„Åô„ÄÇ‰æã„Åà„Å∞„ÄÅ‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å™ÂÆüË£Ö„Å´„Å™„Çä„Åæ„Åô„ÄÇapiVersion: v1kind: ConfigMapmetadata:  name: argocd-rbac-cm  # Â∞ÇÁî®„ÅÆNamespace„ÇíË®≠ÂÆö„Åô„Çã  namespace: argocddata:  # „Éá„Éï„Ç©„É´„Éà„ÅÆ„É≠„Éº„É´  # @see https://github.com/argoproj/argo-cd/blob/master/assets/builtin-policy.csv#L9-L16  policy.default: role:readonly  policy.csv: |    p, role:foo, *, *, foo/*/*, allow    p, role:bar, *, *, bar/*/*, allow    p, role:baz, *, *, baz/*/*, allow    g, foo-team, role:foo    g, bar-team, role:bar    g, baz-team, role:baz  scopes: \"[groups]\"Ë™çË®ºÊ∏à„Åø„Ç∞„É´„Éº„Éó (foo-team„ÄÅbar-team„ÄÅbaz-team) „Å´ÂØæ„Åó„Å¶„ÄÅÁÑ°Ë™çÂèØ„ÅÆAppProject (foo„ÄÅbar„ÄÅbaz) „Å´ÊâÄÂ±û„Åô„ÇãApplication„ÇíÊìç‰Ωú„Åß„Åç„Å™„ÅÑ„Çà„ÅÜ„Å´„ÄÅË™çÂèØ„Çπ„Ç≥„Éº„Éó„ÇíÂà∂Èôê„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ‚ñ∂ AppProject„ÅÆË™çÂèØÂÆöÁæ©„ÅÆË®òÊ≥ï„Å´„Å§„ÅÑ„Å¶Casbin „ÅÆË®òÊ≥ï„Çí‰ΩøÁî®„Åó„Åæ„Åô„ÄÇ‰ªäÂõû„ÅÆÂÆüË£Ö‰æã„Åß‰ΩøÁî®„Åó„Åüp („Éë„Éº„Éü„ÉÉ„Ç∑„Éß„É≥) „Å®g („Ç∞„É´„Éº„Éó) „Åß„ÅØ„ÄÅ‰ª•‰∏ã„ÇíË®òÊ≥ï„Çí‰ΩøÁî®„Åß„Åç„Åæ„ÅôüëçapiVersion: v1kind: ConfigMapmetadata:  name: argocd-rbac-cm  namespace: argocddata:  policy.default: role:readonly  policy.csv: |    # „É≠„Éº„É´„Å®ArgoCDÁ≥ª„Ç´„Çπ„Çø„É†„É™„ÇΩ„Éº„Çπ„ÅÆË™çÂèØ„Çπ„Ç≥„Éº„Éó„ÇíÂÆöÁæ©„Åô„Çã    p, role:\u003c„É≠„Éº„É´Âêç\u003e, \u003cKubernetes„É™„ÇΩ„Éº„Çπ„ÅÆÁ®ÆÈ°û\u003e, \u003c„Ç¢„ÇØ„Ç∑„Éß„É≥Âêç\u003e, \u003cAppProjectÂêç\u003e/\u003cApplication„ÅÆNamespaceÂêç\u003e/\u003cApplicationÂêç\u003e, \u003cË®±Âê¶\u003e    # Ë™çË®ºÊ∏à„Åø„Ç∞„É´„Éº„Éó„Å´„É≠„Éº„É´„ÇíÁ¥ê‰ªò„Åë„Çã    g, \u003c„Ç∞„É´„Éº„ÉóÂêç\u003e, role:\u003c„É≠„Éº„É´Âêç\u003e  scopes: \"[groups]\"RBAC Configuration - Argo CD - Declarative GitOps CD for Kubernetes„Ç™„Çπ„Çπ„É°„Åó„Å™„ÅÑÁêÜÁî±CL„É¢„Éº„Éâ„Å™ArgoCD„ÅÆAppProject„ÉÜ„Éä„É≥„Éà„Å´„ÅØ„ÄÅ‰ª•‰∏ã„ÅÆ„É°„É™„Éá„É°„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ„Éá„É°„É™„ÉÉ„Éà„ÅÆÂõûÈÅøÁ≠ñ„ÇÇËÄÉÊÖÆ„Åó„Å¶„ÄÅÁã¨Êñ≠„Å®ÂÅèË¶ã„Åß„Ç™„Çπ„Çπ„É°„Åó„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ „Ç¢„Éº„Ç≠„ÉÜ„ÇØ„ÉÅ„É£ÁâπÊÄß  „É°„É™„ÉÉ„Éà ‚≠ïÔ∏è                                                                                  „Éá„É°„É™„ÉÉ„Éà √ó                                                                                                                                                                                                                      „Éá„É°„É™„ÉÉ„Éà„ÅÆÂõûÈÅøÁ≠ñ                                                                                                                                                            Êã°ÂºµÊÄß                 „ÉÜ„Éä„É≥„Éà„ÇíÂ¢ó„ÇÑ„Åô„Åü„ÇÅ„Å´Namespace„Å®AppProject„ÇíÁî®ÊÑè„Åô„Çã„Å†„Åë„Åß„Çà„Åè„ÄÅ‰ΩúÊ•≠Èáè„ÅåÂ∞ë„Å™„ÅÑ„ÄÇ            -                                                                                                                                                                                                                                ‚û°Ô∏é  -                                                                                                                                                                    ÂÆâÂÖ®ÊÄß(„Çª„Ç≠„É•„É™„ÉÜ„Ç£)        NetworkPolicy„ÅßNamespaceÈñì„ÅÆÂêçÂâçËß£Ê±∫„Çí‰∏çÂèØËÉΩ„Å´„Åô„Çå„Å∞„ÄÅ‰ªñ„ÅÆNamespace„Åã„Çâ„ÅÆÈÄö‰ø°„ÇíÈÅÆÊñ≠„Åß„Åç„Çã„ÄÇ  -                                                                                                                                                                                                                                ‚û°Ô∏é  -                                                                                                                                                                             ‰øùÂÆàÊÄß                 ArgoCDÁî®Cluster„ÅÆÁÆ°ÁêÜËÄÖ„ÅåÂçò‰∏Ä„ÅÆCluster„Çí‰øùÂÆà„Åô„Çå„Å∞„Çà„ÅÑ„ÄÇ(‰æãÔºö„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„ÄÅÊ©üËÉΩ‰øÆÊ≠£„Å™„Å©)   AppProject„ÅØNamespaced„Çπ„Ç≥„Éº„Éó„Å™„Ç´„Çπ„Çø„É†„É™„ÇΩ„Éº„Çπ„ÅÆ„Åü„ÇÅ„ÄÅCluster„Çπ„Ç≥„Éº„Éó„Å™Kubernetes„É™„ÇΩ„Éº„Çπ„Çí‰ªñ„ÅÆ„ÉÜ„Éä„É≥„Éà„Å®ÂÖ±Êúâ„Åó„Å™„ÅÑ„Å®„ÅÑ„Åë„Å™„ÅÑ„ÄÇ„Åù„ÅÆ„Åü„ÇÅ„ÄÅCluster„Çπ„Ç≥„Éº„Éó„Å™Kubernetes„É™„ÇΩ„Éº„Çπ (Áâπ„Å´CRD) „ÅÆÂ§âÊõ¥„ÅØÂÖ®„Å¶„ÅÆ„ÉÜ„Éä„É≥„Éà„Å´ÂΩ±Èüø„Åô„Çã„ÄÇ  ‚û°Ô∏é  ArgoCD„ÅÆ„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„ÉâÊôÇ (CRD„ÅÆÂ§âÊõ¥ÊôÇ) „ÅØ„ÄÅ„Å§„ÅÑ„Åß„Å´Kubernetes„ÇÇ„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„Åó„Åü„ÅÑ„ÄÇÊñ∞„Åó„ÅÑCluster„ÇíÂà•„Å´‰ΩúÊàê„Åó„ÄÅ„Åù„Åì„ÅßÊñ∞ArgoCD„Çí‰ΩúÊàê„Åô„Çå„Å∞‰∏ÄÁü≥‰∫åÈ≥•„Åß„ÅÇ„Çã„ÄÇ                 ÊÄßËÉΩ                  -                                                                                            Cluster„ÅÆ„Éè„Éº„Éâ„Ç¶„Çß„Ç¢„É™„ÇΩ„Éº„Çπ„Çí‰ªñ„ÅÆ„ÉÜ„Éä„É≥„Éà„Å®Â•™„ÅÑÂêà„ÅÜ„Åì„Å®„Å´„Å™„Çã„ÄÇ                                                                                                                                                                ‚û°Ô∏é  Â§ö„Åè„ÅÆÂà©Áî®ËÄÖ„ÅåÂêåÊôÇ‰∏¶Ë°åÁöÑ„Å´ArgoCD„ÇíÊìç‰Ωú„Åô„ÇãÁä∂Ê≥Å„Å´„Å™„Çä„Å´„Åè„Åë„Çå„Å∞„ÄÅÂ•™„ÅÑÂêà„ÅÑ„ÇÇËµ∑„Åì„Çâ„Å™„ÅÑ„ÄÇ                                                                                        ‰ø°È†ºÊÄß                 -                                                                                            Cluster„Åæ„Åü„ÅØArgoCD„ÅßÈöúÂÆ≥„ÅåËµ∑„Åì„Çã„Å®„ÄÅ„Åì„Çå„ÅØÂÖ®„Å¶„ÅÆ„ÉÜ„Éä„É≥„Éà„Å´ÂΩ±Èüø„Åô„Çã„ÄÇ                                                                                                                                                            ‚û°Ô∏é  ‰ª£„Çè„Çä„Å´Node„ÇÑArgoCD„ÇíÂçÅÂàÜ„Å´ÂÜóÈï∑Âåñ„Åó„Å¶ÂèØÁî®ÊÄß„ÇíÈ´ò„ÇÅ„Çå„Å∞„ÄÅÂΩ±Èüø„ÇíÁ∑©Âíå„Åß„Åç„Çã„ÄÇ„Åü„Å†„ÄÅ„Åù„ÇÇ„Åù„ÇÇ„ÅÆÂΩ±ÈüøÁØÑÂõ≤„ÅåÂ§ß„Åç„Åô„Åé„Çãüò≠                                           05-02. NS„É¢„Éº„Éâ„Å™ArgoCD - ‚òÖ‚òÖNS„É¢„Éº„Éâ„Å™ArgoCD„Å®„ÅØNS„É¢„Éº„Éâ„Å™ArgoCD„ÅÆÂ†¥Âêà„ÄÅÂâçËø∞„ÅÆCL„É¢„Éº„Éâ„Å®„ÅØÁï∞„Å™„Çä„ÄÅÂêÑAppProject„ÉÜ„Éä„É≥„ÉàÈñì„ÅßArgoCD„ÇíÂç†Êúâ„Åó„Åæ„Åô„ÄÇ‰æã„Åà„Å∞„ÄÅAppProject„ÉÜ„Éä„É≥„Éà„Å®„Åó„Å¶„ÄÅ„Éó„É≠„ÉÄ„ÇØ„ÉàÂà•„ÅÆNamespace (foo„ÄÅbar„ÄÅbaz) „Å®AppProject (foo„ÄÅbar„ÄÅbaz) „ÇíÁî®ÊÑè„Åó„Åæ„Åô„ÄÇÂêÑAppProject„ÉÜ„Éä„É≥„Éà„Å´„ÄÅArgoCD„Å®Èñ¢ÈÄ£„Åô„ÇãKubernetes„É™„ÇΩ„Éº„Çπ (‰æãÔºöConfigMap) „ÇíÈÖçÁΩÆ„Åó„Åæ„Åô„ÄÇÂêÑ„Éó„É≠„ÉÄ„ÇØ„Éà„ÉÅ„Éº„É†„ÅØ„ÄÅAppProject„ÉÜ„Éä„É≥„ÉàÂÜÖ„ÅÆApplication„ÇíÊìç‰Ωú„Åó„ÄÅÊ≠£„Åó„ÅÑ„Éó„É≠„ÉÄ„ÇØ„ÉàÁî®Cluster„Å´„Éû„Éã„Éï„Çß„Çπ„Éà„Çí„Éá„Éó„É≠„Ç§„Åó„Åæ„Åô„ÄÇApplications in any namespace - Argo CD - Declarative GitOps CD for KubernetesAppProjectCL„É¢„Éº„Éâ„Å®ÂêåÊßò„Å´„Åó„Å¶„ÄÅAppProject„Å´ÊâÄÂ±û„Åô„ÇãApplication„Å´„Çà„Çã„Éû„Éã„Éï„Çß„Çπ„Éà„ÅÆ„Éá„Éó„É≠„Ç§„ÇíÂà∂Èôê„Åß„Åç„Åæ„Åô„ÄÇ‰æã„Åà„Å∞„ÄÅ‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å™ÂÆüË£Ö„Å´„Å™„Çä„Åæ„Åô„ÄÇapiVersion: argoproj.io/v1alpha1kind: AppProjectmetadata:  name: foo-tenant  namespace: foospec:  destinations:    # ArgoCDÁî®Cluster„Å´Èñ¢„Åô„ÇãË™çÂèØ„ÇíË®≠ÂÆö„Åô„Çã    # App Of Apps„Éë„Çø„Éº„É≥„ÅÆÂ†¥Âêà„Å´‰ΩøÁî®„Åô„Çã    - namespace: foo      server: \"https://kubernetes.default.svc\"    # „Éó„É≠„ÉÄ„ÇØ„ÉàÁî®Cluster„Å´Èñ¢„Åô„ÇãË™çÂèØ„ÇíË®≠ÂÆö„Åô„Çã    - namespace: \"*\"      server: https://foo-cluster.gr7.ap-northeast-1.eks.amazonaws.com# NS„É¢„Éº„Éâ„Åß„ÅØË®≠ÂÆö„Åå‰∏çË¶Å„Åß„ÅÇ„Çã# sourceNamespaces:#   - fooApplication„ÇíÊìç‰Ωú„Åô„Çã„É≠„Ç∞„Ç§„É≥„É¶„Éº„Ç∂„Éº„Åå„ÄÅÁÑ°Ë™çÂèØ„ÅÆNamespace„ÇÑCluster„Çí„Éá„Éó„É≠„Ç§ÂÖà„Å´ÊåáÂÆö„Åß„Åç„Å™„ÅÑ„Çà„ÅÜ„Å´„ÄÅ.spec.destination„Ç≠„Éº„ÅßÂà∂Èôê„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇÂâçËø∞„ÅÆCL„É¢„Éº„Éâ„Å®„ÅØÁï∞„Å™„Çä„ÄÅNS„É¢„Éº„Éâ„Å™ArgoCD„ÅØËá™Ë∫´„ÅåÊâÄÂ±û„Åô„ÇãNamespace„ÅÆApplication„ÅÆ„Åø„Å´„Ç¢„ÇØ„Çª„Çπ„Åß„Åç„Åæ„Åô„ÄÇ„Åù„ÅÆ„Åü„ÇÅ„ÄÅ.spec.sourceNamespaces„Ç≠„Éº„Åß„Éû„Éã„Éï„Çß„Çπ„Éà„ÅÆ„Éá„Éó„É≠„Ç§„ÇíÂà∂Èôê„Åô„ÇãÂøÖË¶Å„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇApplications in any namespace - Argo CD - Declarative GitOps CD for KubernetesProjects - Argo CD - Declarative GitOps CD for KubernetesArgoCD„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÁî®ConfigMap (argocd-cmd-params-cm)CL„É¢„Éº„Éâ„Å®ÂêåÊßò„Å´„Åó„Å¶„ÄÅargocd-cmd-params-cm„Åß„ÅØ„ÄÅArgoCD„ÅÆÂêÑ„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆ„Ç≥„É≥„ÉÜ„Éä„ÅÆÂºïÊï∞„ÇíË®≠ÂÆö„Åß„Åç„Åæ„Åô„ÄÇ‰æã„Åà„Å∞„ÄÅ‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å™ÂÆüË£Ö„Å´„Å™„Çä„Åæ„Åô„ÄÇapiVersion: v1kind: ConfigMapmetadata:  name: argocd-cmd-params-cm  namespace: foodata:# NS„É¢„Éº„Éâ„Åß„ÅØË®≠ÂÆö„Åå‰∏çË¶Å„Åß„ÅÇ„Çã# application.namespaces: \"*\"ÂâçËø∞„ÅÆÈÄö„Çä„ÄÅ.application.namespaces„Ç≠„Éº„ÅØ„ÄÅargocd-server„Å®application-controller„ÅÆ--application-namespaces„Ç™„Éó„Ç∑„Éß„É≥„Å´Áõ∏ÂΩì„Åó„Åæ„Åô„ÄÇÂâçËø∞„ÅÆCL„É¢„Éº„Éâ„Å®„ÅØÁï∞„Å™„Çä„ÄÅNS„É¢„Éº„Éâ„Å™ArgoCD„ÅØËá™Ë∫´„ÅåÊâÄÂ±û„Åô„ÇãNamespace„ÅÆApplication„ÅÆ„Åø„Å´„Ç¢„ÇØ„Çª„Çπ„Åß„Åç„Åæ„Åô„Åù„ÅÆ„Åü„ÇÅ„ÄÅ.application.namespaces„Ç≠„Éº„ÅßNamespace„Å´Èñ¢„Åô„ÇãË™çÂèØ„ÇíË®≠ÂÆö„Åô„ÇãÂøÖË¶Å„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„ÇÇ„Å°„Çç„Çì„ÄÅPod„ÅÆ„Ç≥„É≥„ÉÜ„ÉäÂºïÊï∞„Å´„ÇÇË®≠ÂÆö„ÅØ‰∏çË¶Å„Åß„Åô„ÄÇApplications in any namespace - Argo CD - Declarative GitOps CD for Kubernetes„É≠„Ç∞„Ç§„É≥„É¶„Éº„Ç∂„ÉºÁî®ConfigMap (argocd-rbac-cm)CL„É¢„Éº„Éâ„Å®ÂêåÊßò„Å´„Åó„Å¶„ÄÅargocd-rbac-cm„Åß„ÅØ„ÄÅApplication„ÇíÊìç‰Ωú„Åô„Çã„É≠„Ç∞„Ç§„É≥„É¶„Éº„Ç∂„Éº„Åå„ÄÅÁÑ°Ë™çÂèØ„ÅÆAppProject„ÇÑNamespace„Å´ÊâÄÂ±û„Åô„ÇãApplication„ÇíÊìç‰Ωú„Åß„Åç„Å™„ÅÑ„Çà„ÅÜ„Å´Âà∂Èôê„Åó„Åæ„Åô„ÄÇ‰æã„Åà„Å∞„ÄÅ‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å™ÂÆüË£Ö„Å´„Å™„Çä„Åæ„Åô„ÄÇapiVersion: v1kind: ConfigMapmetadata:  name: argocd-rbac-cm  namespace: foodata:  # „Éá„Éï„Ç©„É´„Éà„ÅÆ„É≠„Éº„É´  # @see https://github.com/argoproj/argo-cd/blob/master/assets/builtin-policy.csv#L9-L16  policy.default: role:readonly  policy.csv: |    p, role:app, *, *, app/*/*, allow    p, role:infra, *, *, infra/*/*, allow    g, app-team, role:app    g, infra-team, role:infra  scopes: \"[groups]\"Ë™çË®ºÊ∏à„Åø„Ç∞„É´„Éº„Éó (app-team„ÄÅinfra-team) „Å´ÂØæ„Åó„Å¶„ÄÅÁÑ°Ë™çÂèØ„ÅÆAppProject (app„ÄÅinfra) „Å´ÊâÄÂ±û„Åô„ÇãApplication„ÇíÊìç‰Ωú„Åß„Åç„Å™„ÅÑ„Çà„ÅÜ„Å´„ÄÅË™çÂèØ„Çπ„Ç≥„Éº„Éó„ÇíÂà∂Èôê„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇÁâπ„Å´„Ç™„Çπ„Çπ„É°„Åó„ÅüÁêÜÁî±NS„É¢„Éº„Éâ„Å™ArgoCD„ÅÆAppProject„ÉÜ„Éä„É≥„Éà„Å´„ÅØ„ÄÅ‰ª•‰∏ã„ÅÆ„É°„É™„Éá„É°„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ„Éá„É°„É™„ÉÉ„Éà„ÅÆÂõûÈÅøÁ≠ñ„ÇÇËÄÉÊÖÆ„Åó„Å¶„ÄÅÁã¨Êñ≠„Å®ÂÅèË¶ã„Åß Áâπ„Å´„Ç™„Çπ„Çπ„É° „Åó„Åæ„Åó„Åü„ÄÇ „Ç¢„Éº„Ç≠„ÉÜ„ÇØ„ÉÅ„É£ÁâπÊÄß  „É°„É™„ÉÉ„Éà ‚≠ïÔ∏è                                                                                  „Éá„É°„É™„ÉÉ„Éà √ó                                                                                                                                                                                                                      „Éá„É°„É™„ÉÉ„Éà„ÅÆÂõûÈÅøÁ≠ñ                                                                                                                                                            Êã°ÂºµÊÄß                 „ÉÜ„Éä„É≥„Éà„ÇíÂ¢ó„ÇÑ„Åô„Åü„ÇÅ„Å´Namespace„Å®AppProject„ÇíÁî®ÊÑè„Åô„Çã„Å†„Åë„Åß„Çà„Åè„ÄÅ‰ΩúÊ•≠Èáè„ÅåÂ∞ë„Å™„ÅÑ„ÄÇ            -                                                                                                                                                                                                                                ‚û°Ô∏é  -                                                                                                                                                                    ÂÆâÂÖ®ÊÄß(„Çª„Ç≠„É•„É™„ÉÜ„Ç£)        NetworkPolicy„ÅßNamespaceÈñì„ÅÆÂêçÂâçËß£Ê±∫„Çí‰∏çÂèØËÉΩ„Å´„Åô„Çå„Å∞„ÄÅ‰ªñ„ÅÆNamespace„Åã„Çâ„ÅÆÈÄö‰ø°„ÇíÈÅÆÊñ≠„Åß„Åç„Çã„ÄÇ  -                                                                                                                                                                                                                                ‚û°Ô∏é  -                                                                                                                                                                             ‰øùÂÆàÊÄß                 Âçò‰∏Ä„ÅÆCluster„Çí‰øùÂÆà„Åô„Çå„Å∞„Çà„ÅÑ„ÄÇ(‰æãÔºö„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„ÄÅÊ©üËÉΩ‰øÆÊ≠£„Å™„Å©)               AppProject„ÅØNamespaced„Çπ„Ç≥„Éº„Éó„Å™„Ç´„Çπ„Çø„É†„É™„ÇΩ„Éº„Çπ„ÅÆ„Åü„ÇÅ„ÄÅCluster„Çπ„Ç≥„Éº„Éó„Å™Kubernetes„É™„ÇΩ„Éº„Çπ„Çí‰ªñ„ÅÆ„ÉÜ„Éä„É≥„Éà„Å®ÂÖ±Êúâ„Åó„Å™„ÅÑ„Å®„ÅÑ„Åë„Å™„ÅÑ„ÄÇ„Åù„ÅÆ„Åü„ÇÅ„ÄÅCluster„Çπ„Ç≥„Éº„Éó„Å™Kubernetes„É™„ÇΩ„Éº„Çπ (Áâπ„Å´CRD) „ÅÆÂ§âÊõ¥„ÅØÂÖ®„Å¶„ÅÆ„ÉÜ„Éä„É≥„Éà„Å´ÂΩ±Èüø„Åô„Çã„ÄÇ  ‚û°Ô∏é  ArgoCD„ÅÆ„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„ÉâÊôÇ (CRD„ÅÆÂ§âÊõ¥ÊôÇ) „ÅØ„ÄÅ„Å§„ÅÑ„Åß„Å´Kubernetes„ÇÇ„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„Åó„Åü„ÅÑ„ÄÇÊñ∞„Åó„ÅÑCluster„ÇíÂà•„Å´‰ΩúÊàê„Åó„ÄÅ„Åù„Åì„ÅßÊñ∞ArgoCD„Çí‰ΩúÊàê„Åô„Çå„Å∞‰∏ÄÁü≥‰∫åÈ≥•„Åß„ÅÇ„Çã„ÄÇ                 ÊÄßËÉΩ                  -                                                                                            Cluster„ÅÆ„Éè„Éº„Éâ„Ç¶„Çß„Ç¢„É™„ÇΩ„Éº„Çπ„Çí‰ªñ„ÅÆ„ÉÜ„Éä„É≥„Éà„Å®Â•™„ÅÑÂêà„ÅÜ„Åì„Å®„Å´„Å™„Çã„ÄÇ                                                                                                                                                                ‚û°Ô∏é  Â§ö„Åè„ÅÆÂà©Áî®ËÄÖ„ÅåÂêåÊôÇ‰∏¶Ë°åÁöÑ„Å´ArgoCD„ÇíÊìç‰Ωú„Åô„ÇãÁä∂Ê≥Å„Å´„Å™„Çä„Å´„Åè„Åë„Çå„Å∞„ÄÅÂ•™„ÅÑÂêà„ÅÑ„ÇÇËµ∑„Åì„Çâ„Å™„ÅÑ„ÄÇ                                                                                        ‰ø°È†ºÊÄß                 „ÉÜ„Éä„É≥„Éà„Åî„Å®„Å´ArgoCD„ÇíÂç†Êúâ„Åó„Å¶„Åä„Çä„ÄÅ‰ªñ„ÅÆArgoCD„Åã„ÇâÈöúÂÆ≥„ÅÆÂΩ±Èüø„ÇíÂèó„Åë„Å™„ÅÑ„ÄÇ                     Cluster„ÅßÈöúÂÆ≥„ÅåËµ∑„Åì„Çã„Å®„ÄÅ„Åì„Çå„ÅØÂÖ®„Å¶„ÅÆ„ÉÜ„Éä„É≥„Éà„Å´ÂΩ±Èüø„Åô„Çã„ÄÇ                                                                                                                                                                        ‚û°Ô∏é  ‰ª£„Çè„Çä„Å´„ÄÅNode„ÇíÂçÅÂàÜ„Å´ÂÜóÈï∑Âåñ„Åó„Å¶ÂèØÁî®ÊÄß„ÇíÈ´ò„ÇÅ„Çã„ÄÇ„ÅÑ„Åö„Çå„Åã„ÅÆ„Ç§„É≥„Çπ„Çø„É≥„Çπ„ÅßÈöúÂÆ≥„ÅåËµ∑„Åì„Å£„Å¶„ÇÇ„ÄÅÊ≠£Â∏∏„Å™„Ç§„É≥„Çπ„Çø„É≥„Çπ„ÅßArgoCD„ÅåÁ®ºÂÉç„Åß„Åç„Çã„ÄÇ                         AppProject„ÉÜ„Éä„É≥„Éà‰æã„ÅÆ‰∏ÄË¶ßNS„É¢„Éº„Éâ„Å™ArgoCD„ÇíÊé°Áî®„Åô„ÇãÂ†¥Âêà„ÄÅAppProject„ÉÜ„Éä„É≥„Éà‰æã„ÇíËß£Ë™¨„Åó„Å¶„ÅÑ„Åç„Åæ„Åô„ÄÇÂâçËø∞„ÅÆÈÄö„Çä„ÄÅAppProject„ÉÜ„Éä„É≥„Éà„Åå‰∫åÈáç„ÉÜ„Éä„É≥„Éà (Á¨¨‰∏Ä„ÉÜ„Éä„É≥„Éà„Å´Namespace„ÄÅÁ¨¨‰∫å„ÉÜ„Éä„É≥„Éà„Å´Ë§áÊï∞„ÅÆAppProject) „ÇíÊåÅ„Å§„Åì„Å®„Å´ÁïôÊÑè„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ„Å™„Åä„ÄÅ„Ç™„Çπ„Çπ„É°„Åô„Çã„ÇÇ„ÅÆ„Çí ‚òÖ „Å®„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ    „ÉÜ„Éä„É≥„Éà‰æã(‰∫åÈáç„ÉÜ„Éä„É≥„Éà)    „Ç™„Çπ„Çπ„É°  Namespace(Á¨¨‰∏Ä„ÉÜ„Éä„É≥„Éà)    AppProject(Á¨¨‰∫å„ÉÜ„Éä„É≥„Éà)  „ÉÜ„Éä„É≥„Éà‰æã1      „Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆÂÆüË°åÁí∞Â¢ÉÂà•      „Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆÂÆüË°åÁí∞Â¢ÉÂà•          „ÉÜ„Éä„É≥„Éà‰æã2      „Éó„É≠„ÉÄ„ÇØ„ÉàÂà•      „Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆÂÆüË°åÁí∞Â¢ÉÂà•      ‚òÖ    „ÉÜ„Éä„É≥„Éà‰æã3      „Éó„É≠„ÉÄ„ÇØ„ÉàÂà•      „Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆ„Çµ„Éñ„ÉÅ„Éº„É†Âà•      ‚òÖ‚òÖ    ‚ñ∂ Namespace„ÅÆÂàÜÂâ≤„Éë„Çø„Éº„É≥„Å´„Å§„ÅÑ„Å¶\"ÁÆ°ÁêÜ„ÉÅ„Éº„É†Âà•\" (‰ªäÂõû„Åß„ÅÑ„ÅÜ„Éó„É≠„ÉÄ„ÇØ„ÉàÂà•) „Å®„ÅÑ„ÅÜNamespace„ÅÆÂàÜÂâ≤„Éë„Çø„Éº„É≥„ÅØ„ÄÅÊßò„ÄÖ„Å™ËëóÂêç„Å™Êõ∏Á±ç„ÇÑ„Éñ„É≠„Ç∞„ÅßÁ¥π‰ªã„Åï„Çå„Å¶„ÅÑ„Åæ„ÅôüëÄ  https://www.amazon.co.jp/dp/1617293725Kubernetes best practices: Specifying Namespaces in YAML | Google Cloud Blog„ÉÜ„Éä„É≥„Éà‰æã1Namespace („Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆÂÆüË°åÁí∞Â¢ÉÂà•)„ÄÅAppProject („Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆÂÆüË°åÁí∞Â¢ÉÂà•)„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆÂÆüË°åÁí∞Â¢É (DevÁí∞Â¢É„ÄÅTesÁí∞Â¢É) Âà•„Å´ÁÆ°ÁêÜ„Åï„Çå„ÅüCluster„Åå„ÅÑ„ÇãÁä∂Ê≥Å„Å®‰ªÆÂÆö„Åó„Åæ„Åô„ÄÇ„Åì„ÅÆÂ†¥Âêà„Å´„ÄÅ„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆÂÆüË°åÁí∞Â¢ÉÂà•„Å´Namespace (dev„ÄÅtes) „Å®AppProject (dev„ÄÅtes) „ÇíÁî®ÊÑè„Åó„Åæ„Åô„ÄÇ„Ç™„Çπ„Çπ„É°„Åó„Å™„Åã„Å£„ÅüÁêÜÁî±„ÉÜ„Éä„É≥„Éà‰æã1„Å´„ÅØ„ÄÅ‰ª•‰∏ã„ÅÆ„É°„É™„Éá„É°„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇÁã¨Êñ≠„Å®ÂÅèË¶ã„Åß„Ç™„Çπ„Çπ„É°„Åó„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ „Ç¢„Éº„Ç≠„ÉÜ„ÇØ„ÉÅ„É£ÁâπÊÄß  „É°„É™„ÉÉ„Éà ‚≠ïÔ∏è                                                                                                                                     „Éá„É°„É™„ÉÉ„Éà √ó                                                                                                                                   „Éá„É°„É™„ÉÉ„Éà„ÅÆÂõûÈÅøÁ≠ñ                                                                                       Êã°ÂºµÊÄß                 -                                                                                                                                               ArgoCD„ÅÆPodÊï∞„ÅåÂ§ö„Åè„Å™„Çä„ÄÅÂ∞ÜÊù•ÁöÑ„Å´NodeÂΩì„Åü„Çä„ÅÆPod„ÇÑIP„Ç¢„Éâ„É¨„Çπ„ÅÆ‰∏äÈôêÊï∞„Å´„Å≤„Å£„Åã„Åã„Çä„ÇÑ„Åô„ÅÑ„ÄÇ„Åù„ÅÆÊôÇÁÇπ„Åß„ÄÅAppProject„ÉÜ„Éä„É≥„Éà„ÅÆÂ¢ó„ÇÑ„Åõ„Å™„Åè„Å™„Çã„ÄÇ  ‚û°Ô∏é  ‰æã„Åà„Å∞AWS EKS„ÅÆÂ†¥Âêà„ÄÅNodeÊï∞„ÇíÂ¢ó„ÇÑ„Åó„Åü„Çä„ÄÅNode„ÅÆ„Çπ„Éö„ÉÉ„ÇØ„Çí‰∏ä„Åí„Çã„ÄÇ„Åü„Å†„ÄÅ„ÅäÈáë„Åå„Åã„Åã„Çãüò≠       ÂÆâÂÖ®ÊÄß(„Çª„Ç≠„É•„É™„ÉÜ„Ç£)        „É≠„Ç∞„Ç§„É≥„É¶„Éº„Ç∂„ÉºÁî®ConfigMap (argocd-rbac-cm) „Çí‰ΩøÁî®„Åô„Çå„Å∞„ÄÅÁÑ°Ë™çÂèØ„ÅÆÂÆüË°åÁí∞Â¢ÉÂà•AppProject„Å´ÊâÄÂ±û„Åô„ÇãApplication„ÇíÊìç‰Ωú„Åß„Åç„Å™„ÅÑ„Çà„ÅÜ„Å´Âà∂Èôê„Åß„Åç„Çã„ÄÇ  -                                                                                                                                             ‚û°Ô∏é  -                                                                                                        ‰øùÂÆàÊÄß                 Áï∞„Å™„ÇãÂÆüË°åÁí∞Â¢É„Å´Èñ¢„Åô„ÇãApplication„ÅåÂÖ±Â≠ò„Åó„Å¶„Åä„Çâ„Åö„ÄÅÂà•„ÅÆargocd-server„Åã„ÇâÊìç‰Ωú„Åô„Çã„Åì„Å®„Å´„Å™„Çã„Åü„ÇÅ„ÄÅÂÆüË°åÁí∞Â¢ÉÈñì„ÅÆÈÅ∏Êäû„Éü„Çπ„ÅåËµ∑„Åì„Çä„Å´„Åè„ÅÑ„ÄÇ            -                                                                                                                                             ‚û°Ô∏é  -                                                                                         „ÉÜ„Éä„É≥„Éà‰æã2 - ‚òÖNamespace („Éó„É≠„ÉÄ„ÇØ„ÉàÂà•)„ÄÅAppProject („Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆÂÆüË°åÁí∞Â¢ÉÂà•)„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆÂÆüË°åÁí∞Â¢É (DevÁí∞Â¢É„ÄÅTesÁí∞Â¢É) Âà•„Å´ÁÆ°ÁêÜ„Åï„Çå„ÅüCluster„Åå„ÅÑ„ÇãÁä∂Ê≥Å„Å®‰ªÆÂÆö„Åó„Åæ„Åô„ÄÇ„Éó„É≠„ÉÄ„ÇØ„ÉàÂà•„Å´Namespace (foo„ÄÅbar) „ÄÅ„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆÂÆüË°åÁí∞Â¢ÉÂà•„Å´AppProject (dev„ÄÅtes) „ÇíÁî®ÊÑè„Åó„Åæ„Åô„ÄÇ„Ç™„Çπ„Çπ„É°„Åó„ÅüÁêÜÁî±„ÉÜ„Éä„É≥„Éà‰æã2„Å´„ÅØ„ÄÅ‰ª•‰∏ã„ÅÆ„É°„É™„Éá„É°„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇÁã¨Êñ≠„Å®ÂÅèË¶ã„Åß „Ç™„Çπ„Çπ„É° „Åó„Åæ„Åó„Åü„ÄÇ „Ç¢„Éº„Ç≠„ÉÜ„ÇØ„ÉÅ„É£ÁâπÊÄß  „É°„É™„ÉÉ„Éà ‚≠ïÔ∏è                                                                                                                „Éá„É°„É™„ÉÉ„Éà √ó                                                                                                                                           „Éá„É°„É™„ÉÉ„Éà„ÅÆÂõûÈÅøÁ≠ñ                                                                                 Êã°ÂºµÊÄß                 ArgoCD„ÅÆPodÊï∞„ÅåÂ§ö„Åè„Å™„Çä„ÄÅÂ∞ÜÊù•ÁöÑ„Å´NodeÂΩì„Åü„Çä„ÅÆPod„ÇÑIP„Ç¢„Éâ„É¨„Çπ„ÅÆ‰∏äÈôêÊï∞„Å´„Å≤„Å£„Åã„Åã„Çä„Å´„Åè„ÅÑ„ÄÇ                                   -                                                                                                                                                     ‚û°Ô∏é  -                                                                                         ÂÆâÂÖ®ÊÄß(„Çª„Ç≠„É•„É™„ÉÜ„Ç£)        „É≠„Ç∞„Ç§„É≥„É¶„Éº„Ç∂„ÉºÁî®ConfigMap (argocd-rbac-cm) „Çí‰ΩøÁî®„Åô„Çå„Å∞„ÄÅÁÑ°Ë™çÂèØ„ÅÆÂÆüË°åÁí∞Â¢ÉÂà•AppProject„ÇíÊìç‰Ωú„Åß„Åç„Å™„ÅÑ„Çà„ÅÜ„Å´Âà∂Èôê„Åß„Åç„Çã„ÄÇ  -                                                                                                                                                     ‚û°Ô∏é  -                                                                                                  ‰øùÂÆàÊÄß                 -                                                                                                                          Áï∞„Å™„ÇãÂÆüË°åÁí∞Â¢É„Å´Èñ¢„Åô„ÇãApplication„ÅåÂÖ±Â≠ò„Åó„Å¶„Åä„Çä„ÄÅÂêå„Åòargocd-server („ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ) „Åã„ÇâÊìç‰Ωú„Åô„Çã„Åì„Å®„Å´„Å™„Çã„Åü„ÇÅ„ÄÅÂÆüË°åÁí∞Â¢ÉÈñì„ÅÆÈÅ∏Êäû„Éü„Çπ„ÅåËµ∑„Åì„Çä„ÇÑ„Åô„ÅÑ„ÄÇ  ‚û°Ô∏é  „ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ„Å´„ÅØApplication„ÅÆ„Éï„Ç£„É´„Çø„É™„É≥„Ç∞Ê©üËÉΩ„Åå„ÅÇ„Çã„Åü„ÇÅ„ÄÅÈÅ∏Êäû„Éü„Çπ„ÇíÂõûÈÅø„Åß„Åç„Çã„ÄÇ „ÉÜ„Éä„É≥„Éà‰æã3 - ‚òÖ‚òÖNamespace („Éó„É≠„ÉÄ„ÇØ„ÉàÂà•)„ÄÅAppProject („Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆ„Çµ„Éñ„ÉÅ„Éº„É†Âà•)„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆÂÆüË°åÁí∞Â¢É (DevÁí∞Â¢É„ÄÅTesÁí∞Â¢É) Âà•„Å´ÁÆ°ÁêÜ„Åï„Çå„ÅüCluster„Åå„ÅÑ„ÇãÁä∂Ê≥Å„Å®‰ªÆÂÆö„Åó„Åæ„Åô„ÄÇ„Éó„É≠„ÉÄ„ÇØ„ÉàÂà•„Å´Namespace (foo„ÄÅbar) „ÄÅ„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆ„Çµ„Éñ„ÉÅ„Éº„É†Âà•„Å´AppProject (app„ÄÅinfra) „ÇíÁî®ÊÑè„Åó„Åæ„Åô„ÄÇÁâπ„Å´„Ç™„Çπ„Çπ„É°„Åó„ÅüÁêÜÁî±„ÉÜ„Éä„É≥„Éà‰æã3„Å´„ÅØ„ÄÅ‰ª•‰∏ã„ÅÆ„É°„É™„Éá„É°„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇÁã¨Êñ≠„Å®ÂÅèË¶ã„Åß Áâπ„Å´„Ç™„Çπ„Çπ„É° „Åó„Åæ„Åó„Åü„ÄÇ „Ç¢„Éº„Ç≠„ÉÜ„ÇØ„ÉÅ„É£ÁâπÊÄß  „É°„É™„ÉÉ„Éà ‚≠ïÔ∏è                                                                                                                                       „Éá„É°„É™„ÉÉ„Éà √ó                                                                                                                                           „Éá„É°„É™„ÉÉ„Éà„ÅÆÂõûÈÅøÁ≠ñ                                                                                 Êã°ÂºµÊÄß                 ArgoCD„ÅÆPodÊï∞„ÅåÂ§ö„Åè„Å™„Çä„ÄÅÂ∞ÜÊù•ÁöÑ„Å´NodeÂΩì„Åü„Çä„ÅÆPod„ÇÑIP„Ç¢„Éâ„É¨„Çπ„ÅÆ‰∏äÈôêÊï∞„Å´„Å≤„Å£„Åã„Åã„Çä„Å´„Åè„ÅÑ„ÄÇ                                                          -                                                                                                                                                     ‚û°Ô∏é  -                                                                                         ÂÆâÂÖ®ÊÄß(„Çª„Ç≠„É•„É™„ÉÜ„Ç£)        „É≠„Ç∞„Ç§„É≥„É¶„Éº„Ç∂„ÉºÁî®ConfigMap (argocd-rbac-cm) „Çí‰ΩøÁî®„Åô„Çå„Å∞„ÄÅÁÑ°Ë™çÂèØ„ÅÆ„Çµ„Éñ„ÉÅ„Éº„É†Âà•AppProject„Å´ÊâÄÂ±û„Åô„ÇãApplication„ÇíÊìç‰Ωú„Åß„Åç„Å™„ÅÑ„Çà„ÅÜ„Å´Âà∂Èôê„Åß„Åç„Çã„ÄÇ  -                                                                                                                                                     ‚û°Ô∏é  -                                                                                                  ‰øùÂÆàÊÄß                 -                                                                                                                                                 Áï∞„Å™„ÇãÂÆüË°åÁí∞Â¢É„Å´Èñ¢„Åô„ÇãApplication„ÅåÂÖ±Â≠ò„Åó„Å¶„Åä„Çä„ÄÅÂêå„Åòargocd-server („ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ) „Åã„ÇâÊìç‰Ωú„Åô„Çã„Åì„Å®„Å´„Å™„Çã„Åü„ÇÅ„ÄÅÂÆüË°åÁí∞Â¢ÉÈñì„ÅÆÈÅ∏Êäû„Éü„Çπ„ÅåËµ∑„Åì„Çä„ÇÑ„Åô„ÅÑ„ÄÇ  ‚û°Ô∏é  „ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ„Å´„ÅØApplication„ÅÆ„Éï„Ç£„É´„Çø„É™„É≥„Ç∞Ê©üËÉΩ„Åå„ÅÇ„Çã„Åü„ÇÅ„ÄÅÈÅ∏Êäû„Éü„Çπ„ÇíÂõûÈÅø„Åß„Åç„Çã„ÄÇ 06. „Å©„ÅÆ„Çà„ÅÜ„Å™Ë™§„Å£„ÅüÊìç‰Ωú„ÇíÈò≤„ÅÑ„Åß„Åè„Çå„Çã„ÅÆ„Åã„Åù„Çç„Åù„ÇçËß£Ë™¨„ÇíË™≠„ÇÄ„ÅÆ„Åå„Åó„Çì„Å©„ÅÑÊñπ„Åå„ÅÑ„Çã„ÅÆ„Åß„ÅØ„Å™„ÅÑ„Åß„Åó„Çá„ÅÜ„Åã„ÄÇ„ÄéÂêõ„Åå„ÉÉ„ÄÅÊ≥£„Åè„Åæ„Åß„ÄÅËß£Ë™¨„Çí„ÇÑ„ÇÅ„Å™„ÅÑ„ÉÉÔºÅ„ÄèAppProject„ÉÜ„Éä„É≥„Éà„Å®Namespaced„Çπ„Ç≥„Éº„Éó„É¢„Éº„Éâ„Åå„Éû„Éã„Éï„Çß„Çπ„Éà„ÅÆ„Éá„Éó„É≠„Ç§„Çí„Å©„ÅÆ„Çà„ÅÜ„Å´Âà∂Èôê„Åô„Çã„ÅÆ„Åã„Å´„Å§„ÅÑ„Å¶„ÄÅ‰æã„ÇíÊåô„Åí„Å¶Ëß£Ë™¨„Åó„Åæ„Åô„ÄÇ„Åì„Åì„Åß„ÅØ„ÄÅ‰ª•‰∏ã„ÅÆAppProject„Çí‰ΩúÊàê„Åó„Åü„Å®‰ªÆÂÆö„Åó„Åæ„Åô„ÄÇAppProject„ÉÜ„Éä„É≥„Éà„Åå‰∫åÈáç„ÉÜ„Éä„É≥„Éà (Á¨¨‰∏Ä„ÉÜ„Éä„É≥„Éà„Å´Namespace„ÄÅÁ¨¨‰∫å„ÉÜ„Éä„É≥„Éà„Å´Ë§áÊï∞„ÅÆAppProject) „ÇíÊåÅ„Å§„Åì„Å®„Å´ÁïôÊÑè„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇapiVersion: argoproj.io/v1alpha1kind: AppProjectmetadata:  # app„ÉÅ„Éº„É†  name: app  namespace: foospec:  destinations:    # ArgoCDÁî®Cluster„Å´Èñ¢„Åô„ÇãË™çÂèØ„ÇíË®≠ÂÆö„Åô„Çã    # Namespace (foo) „Å∏„ÅÆ„Éá„Éó„É≠„Ç§„ÇíË®±ÂèØ„Åô„Çã    - namespace: foo      server: \"https://kubernetes.default.svc\"      # „Éó„É≠„ÉÄ„ÇØ„ÉàÁî®Cluster„Å´Èñ¢„Åô„ÇãË™çÂèØ„ÇíË®≠ÂÆö„Åô„Çã      # Namespace (app) „Å∏„ÅÆ„Éá„Éó„É≠„Ç§„ÇíË®±ÂèØ„Åô„Çã    - namespace: app      server: https://foo-cluster.gr7.ap-northeast-1.eks.amazonaws.comapiVersion: argoproj.io/v1alpha1kind: AppProjectmetadata:  # infra„ÉÅ„Éº„É†  name: infra  namespace: foospec:  destinations:    # ArgoCDÁî®Cluster„Å´Èñ¢„Åô„ÇãË™çÂèØ„ÇíË®≠ÂÆö„Åô„Çã    # Namespace (foo) „Å∏„ÅÆ„Éá„Éó„É≠„Ç§„ÇíË®±ÂèØ„Åô„Çã    - namespace: foo      server: \"https://kubernetes.default.svc\"    # „Éó„É≠„ÉÄ„ÇØ„ÉàÁî®Cluster„Å´Èñ¢„Åô„ÇãË™çÂèØ„ÇíË®≠ÂÆö„Åô„Çã    # Namespace (infra) „Å∏„ÅÆ„Éá„Éó„É≠„Ç§„ÇíË®±ÂèØ„Åô„Çã    - namespace: infra      server: https://foo-cluster.gr7.ap-northeast-1.eks.amazonaws.com„Éû„Éã„Éï„Çß„Çπ„Éà„ÅÆ„Éá„Éó„É≠„Ç§Âà∂Èôê„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆÂÆüË°åÁí∞Â¢É (DevÁí∞Â¢É„ÄÅTesÁí∞Â¢É) Âà•„Å´ÁÆ°ÁêÜ„Åï„Çå„ÅüCluster„Åå„ÅÑ„ÇãÁä∂Ê≥Å„Å®‰ªÆÂÆö„Åó„Åæ„Åô„ÄÇ„Éó„É≠„ÉÄ„ÇØ„ÉàÂà•„Å´Namespace (foo) „ÄÅ„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆ„Çµ„Éñ„ÉÅ„Éº„É†Âà•„Å´AppProject (app„ÄÅinfra) „ÇíÁî®ÊÑè„Åó„Åæ„Åô„ÄÇAppProject„ÉÜ„Éä„É≥„Éà„ÅØ„ÄÅ‰æã„Åà„Å∞ Ëµ§Á∑ö „ÅÆÊñπÊ≥ï„Åß„ÄÅ„Éû„Éã„Éï„Çß„Çπ„Éà„ÅÆ„Éá„Éó„É≠„Ç§„ÇíÂà∂Èôê„Åó„Åæ„Åô„ÄÇ„Éû„Éã„Éï„Çß„Çπ„Éà„Çí„Éá„Éó„É≠„Ç§„Åß„Åç„ÇãÂ†¥Âêà„Éû„Éã„Éï„Çß„Çπ„Éà„ÇíÊ≠£„Åó„Åè„Éá„Éó„É≠„Ç§„Åô„ÇãÂ†¥Âêà„ÄÅAppProject„ÉÜ„Éä„É≥„Éà„ÅØ„Åì„Çå„ÇíÂà∂Èôê„Åó„Åæ„Åõ„Çì„ÄÇ(1) argocd-server„ÅØ„ÄÅargocd-cmd-params-cm„Åã„Çâ„Ç¢„ÇØ„Çª„Çπ„Åß„Åç„ÇãNamespace„ÇíÂèñÂæó„Åó„Åæ„Åô„ÄÇapiVersion: v1kind: ConfigMapmetadata:  name: argocd-cmd-params-cm  namespace: foodata:# Ë®≠ÂÆö„Åó„Å™„ÅÑ„Åì„Å®„Åß„ÄÅargocd-server„ÅØÂêå„ÅòNamespace„Å´„Åó„Åã„Ç¢„ÇØ„Çª„Çπ„Åß„Åç„Å™„Åè„Å™„Çã„ÄÇ# application.namespaces: \"*\"(2) foo„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆinfra„ÉÅ„Éº„É†„Åå„ÄÅargocd-server„ÇíÊìç‰Ωú„Åó„Åæ„Åô„ÄÇ(3) argocd-server„ÅØ„ÄÅargocd-rbac-cm„Åã„ÇâApplicationÊìç‰Ωú„Å´Èñ¢„Åô„ÇãË™çÂèØ„Çπ„Ç≥„Éº„Éó„ÇíÂèñÂæó„Åó„Åæ„ÅôapiVersion: v1kind: ConfigMapmetadata:  name: argocd-rbac-cm  namespace: foodata:  policy.default: role:readonly  policy.csv: |    p, role:app, *, *, app/*/*, allow    p, role:infra, *, *, infra/*/*, allow    g, app-team, role:app    g, infra-team, role:infra  scopes: \"[groups]\"(4) infra„ÉÅ„Éº„É†„ÅØ„ÄÅË™çÂèØ„Åï„Çå„ÅüAppProject„Å´ÊâÄÂ±û„Åô„ÇãApplication„ÇíÊìç‰Ωú„Åó„Åæ„Åô„ÄÇ(5) infra„ÉÅ„Éº„É†„ÅØ„ÄÅDevÁí∞Â¢É„ÅÆfoo„Éó„É≠„ÉÄ„ÇØ„ÉàÁî®Cluster„ÅÆNamespace (infra) „Å´„Éû„Éã„Éï„Çß„Çπ„Éà„Çí„Éá„Éó„É≠„Ç§„Åß„Åç„Åæ„Åô„ÄÇ(üö´Âà∂Èôê‰æã1) ÁÑ°Ë™çÂèØ„ÅÆNamespace„ÅßApplication„Çí‰ΩúÊàê„Åó„Çà„ÅÜ„Å®„Åó„ÅüÂ†¥Âêà‰æã„Åà„Å∞„ÄÅfoo„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆinfra„ÉÅ„Éº„É†„ÅåÁÑ°Ë™çÂèØ„ÅÆNamespace (bar) „ÅßApplication„Çí‰ΩúÊàê„Åó„Çà„ÅÜ„Å®„Åó„Åæ„Åô„ÄÇ„Åô„Çã„Å®„ÄÅargocd-server„ÅØ‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å™„Ç®„É©„Éº„ÇíËøîÂç¥„Åó„ÄÅ„Åì„ÅÆÊìç‰Ωú„ÇíÂà∂Èôê„Åó„Åæ„Åô„ÄÇnamespace bar is not permitted in project 'infra-team'ÁÑ°Ë™çÂèØ„ÅÆNamespace„ÅßApplication„Çí‰Ωú„Çå„Å¶„Åó„Åæ„ÅÜ„Å®„ÄÅ„Åù„ÅÆApplication„Åã„ÇâÁÑ°Ë™çÂèØ„ÅÆ„Éó„É≠„ÉÄ„ÇØ„ÉàÁî®Cluster„Å´„Éû„Éã„Éï„Çß„Çπ„Éà„Çí„Éá„Éó„É≠„Ç§„Åß„Åç„Å¶„Åó„Åæ„ÅÑ„Åæ„Åôüòàargo-cd/test/e2e/app_management_ns_test.go at v2.7.10 ¬∑ argoproj/argo-cd ¬∑ GitHub(üö´Âà∂Èôê‰æã2) ÁÑ°Ë™çÂèØ„ÅÆAppProject„ÅßApplication„Çí‰ΩúÊàê„Åó„Çà„ÅÜ„Å®„Åó„ÅüÂ†¥Âêà‰æã„Åà„Å∞„ÄÅfoo„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆinfra„ÉÅ„Éº„É†„Åå„ÄÅÁÑ°Ë™çÂèØ„ÅÆAppProject (app) „ÅßApplication„Çí‰ΩúÊàê„Åó„Çà„ÅÜ„Å®„Åó„Åæ„Åô„ÄÇ„Åô„Çã„Å®„ÄÅargocd-server„ÅØ‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å™„Ç®„É©„Éº„ÇíËøîÂç¥„Åó„ÄÅ„Åì„ÅÆÊìç‰Ωú„ÇíÂà∂Èôê„Åó„Åæ„Åô„ÄÇApplication referencing project 'app' which does not exist‰ªªÊÑè„ÅÆAppProject„ÅßApplication„Çí‰ΩúÊàê„Åß„Åç„Å¶„Åó„Åæ„ÅÜ„Å®„ÄÅ„Åù„ÅÆApplication„Åã„ÇâÁÑ°Ë™çÂèØ„ÅÆ„Éó„É≠„ÉÄ„ÇØ„ÉàÁî®Cluster„Å´„Éû„Éã„Éï„Çß„Çπ„Éà„Çí„Éá„Éó„É≠„Ç§„Åß„Åç„Å¶„Åó„Åæ„ÅÑ„Åæ„Åôüòà(üö´Âà∂Èôê‰æã3) ÁÑ°Ë™çÂèØ„ÅÆCluster„Çí„Éá„Éó„É≠„Ç§ÂÖà„Å´ÊåáÂÆö„Åó„Çà„ÅÜ„Å®„Åó„ÅüÂ†¥Âêà‰æã„Åà„Å∞„ÄÅfoo„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆinfra„ÉÅ„Éº„É†„ÅåApplication„ÇíÊìç‰Ωú„Åó„ÄÅÁÑ°Ë™çÂèØ„ÅÆ„Éó„É≠„ÉÄ„ÇØ„ÉàÁî®Cluster (bar-cluster) „Çí„Éá„Éó„É≠„Ç§ÂÖà„Å®„Åó„Å¶ÊåáÂÆö„Åó„Çà„ÅÜ„Åó„Åæ„Åô„ÄÇ„Åô„Çã„Å®„ÄÅargocd-server„ÅØ‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å™„Ç®„É©„Éº„ÇíËøîÂç¥„Åó„ÄÅ„Åì„ÅÆÊìç‰Ωú„ÇíÂà∂Èôê„Åó„Åæ„Åô„ÄÇapplication destination{https://bar-cluster.gr7.ap-northeast-1.eks.amazonaws.com infra} is not permitted in project 'infra-team'‰ªªÊÑè„ÅÆCluster„Çí„Éá„Éó„É≠„Ç§ÂÖà„Å´ÊåáÂÆö„Åß„Åç„Å¶„Åó„Åæ„ÅÜ„Å®„ÄÅApplication„Åã„ÇâÁÑ°Ë™çÂèØ„ÅÆ„Éó„É≠„ÉÄ„ÇØ„ÉàÁî®Cluster„Å´„Éû„Éã„Éï„Çß„Çπ„Éà„Çí„Éá„Éó„É≠„Ç§„Åß„Åç„Å¶„Åó„Åæ„ÅÑ„Åæ„Åôüòàargo-cd/util/argo/argo_test.go at v2.7.10 ¬∑ argoproj/argo-cd ¬∑ GitHub(üö´Âà∂Èôê‰æã4) ÁÑ°Ë™çÂèØ„ÅÆNamespace„Çí„Éá„Éó„É≠„Ç§ÂÖà„Å´ÊåáÂÆö„Åó„Çà„ÅÜ„Å®„Åó„ÅüÂ†¥Âêà‰æã„Åà„Å∞„ÄÅfoo„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆinfra„ÉÅ„Éº„É†„ÅåApplication„ÇíÊìç‰Ωú„Åó„ÄÅÁÑ°Ë™çÂèØ„ÅÆNamespace (app) „Çí„Éá„Éó„É≠„Ç§ÂÖà„Å´ÊåáÂÆö„Åó„Çà„ÅÜ„Åó„Åæ„Åô„ÄÇ„Åô„Çã„Å®„ÄÅargocd-server„ÅØ‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å™„Ç®„É©„Éº„ÇíËøîÂç¥„Åó„ÄÅ„Åì„ÅÆÊìç‰Ωú„ÇíÂà∂Èôê„Åó„Åæ„Åô„ÄÇapplication destination{https://foo-cluster.gr7.ap-northeast-1.eks.amazonaws.com app} is not permitted in project 'infra-team'‰ªªÊÑè„ÅÆNamespace„Çí„Éá„Éó„É≠„Ç§ÂÖà„Å´ÊåáÂÆö„Åß„Åç„Å¶„Åó„Åæ„ÅÜ„Å®„ÄÅ„Åù„ÅÆApplication„Åã„ÇâÁÑ°Ë™çÂèØ„ÅÆNamespace„Å´„Éû„Éã„Éï„Çß„Çπ„Éà„Çí„Éá„Éó„É≠„Ç§„Åß„Åç„Å¶„Åó„Åæ„ÅÑ„Åæ„Åôüòàargo-cd/util/argo/argo_test.go at v2.7.10 ¬∑ argoproj/argo-cd ¬∑ GitHub‚ñ∂ AppProject„ÅßË®≠ÂÆö„Åß„Åç„ÇãË™çÂèØ„ÅÆÁ®ÆÈ°û„Å´„Å§„ÅÑ„Å¶argocd-server„Å®application-controller„Åß„Éá„Éó„É≠„Ç§„Åß„Åç„ÇãKubernetes„É™„ÇΩ„Éº„Çπ„ÅÆÁ®ÆÈ°û (.spec.clusterResourceWhitelist„Ç≠„Éº„ÄÅ.spec.namespaceResourceWhitelist„Ç≠„Éº„Å™„Å©)repo-server„Åß„Éù„Éº„É™„É≥„Ç∞„Åß„Åç„Çã„É™„Éù„Ç∏„Éà„É™ (.spec.sourceRepos„Ç≠„Éº)apiVersion: argoproj.io/v1alpha1kind: AppProjectmetadata:  name: foo-tenant  namespace: foospec:  clusterResourceWhitelist:    - group: \"*\"      kind: \"*\"  namespaceResourceWhitelist:    - group: \"*\"      kind: \"*\"  sourceRepos:    - \"*\"  ...\"AppProject„ÉÜ„Éä„É≥„Éà„Å´„Çà„Çã„Éû„Éã„Éï„Çß„Çπ„Éà„ÅÆ„Éá„Éó„É≠„Ç§‰∏∏„Åî„Å®„ÅÆÂà∂Èôê\" „Å®„ÅÑ„ÅÜË¶≥ÁÇπ„Åß„ÉÜ„Éº„Éû„ÅåÁï∞„Å™„Çã„Åü„ÇÅ„ÄÅÊú¨Ë®ò‰∫ã„Åß„ÅØË®ÄÂèä„Åó„Åæ„Åõ„Çì„Åß„Åó„Åüüôáüèª‚Äç  Projects - Argo CD - Declarative GitOps CD for KubernetesDeclarative Setup - Argo CD - Declarative GitOps CD for Kubernetes„Ç´„Çπ„Çø„É†„É™„ÇΩ„Éº„Çπ„ÅÆReconciliationÂà∂Èôê„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆÂÆüË°åÁí∞Â¢É (DevÁí∞Â¢É„ÄÅTesÁí∞Â¢É) Âà•„Å´ÁÆ°ÁêÜ„Åï„Çå„ÅüCluster„Åå„ÅÑ„ÇãÁä∂Ê≥Å„Å®‰ªÆÂÆö„Åó„Åæ„Åô„ÄÇ„Éó„É≠„ÉÄ„ÇØ„ÉàÂà•„Å´Namespace (foo) „ÄÅ„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆ„Çµ„Éñ„ÉÅ„Éº„É†Âà•„Å´AppProject (app„ÄÅinfra) „ÇíÁî®ÊÑè„Åó„Åæ„Åô„ÄÇAppProject„ÉÜ„Éä„É≥„Éà„ÅØ„ÄÅ‰æã„Åà„Å∞ Ëµ§Á∑ö „ÅÆÊñπÊ≥ï„Åß„ÄÅArgoCDÁ≥ª„Ç´„Çπ„Çø„É†„É™„ÇΩ„Éº„Çπ„Å´ÂØæ„Åô„Çãapplication-controller„ÅÆReconciliation„ÇíÂà∂Èôê„Åó„Åæ„Åô„ÄÇArgoCDÁ≥ª„Ç´„Çπ„Çø„É†„É™„ÇΩ„Éº„Çπ„ÇíReconciliation„Åß„Åç„ÇãÂ†¥ÂêàÊ≠£„Åó„ÅÑNamespace„Å´ÂØæ„Åó„Å¶Reconciliation„ÇíÂÆüË°å„Åô„ÇãÂ†¥Âêà„ÄÅAppProject„ÉÜ„Éä„É≥„Éà„ÅØ„Åì„Çå„ÇíÂà∂Èôê„Åó„Åæ„Åõ„Çì„ÄÇ(1) application-controller„ÅØ„ÄÅargocd-cmd-params-cm„Åã„ÇâËá™Ë∫´„Åå„Ç¢„ÇØ„Çª„Çπ„Åß„Åç„ÇãNamespace„ÇíÂèñÂæó„Åó„Åæ„Åô„ÄÇapiVersion: v1kind: ConfigMapmetadata:  name: argocd-cmd-params-cm  namespace: foodata:# Ë®≠ÂÆö„Åó„Å™„ÅÑ„Åì„Å®„Åß„ÄÅapplication-controller„ÅØÂêå„ÅòNamespace„Å´„Åó„Åã„Ç¢„ÇØ„Çª„Çπ„Åß„Åç„Å™„Åè„Å™„Çã„ÄÇ# application.namespaces: \"*\"(2) application-controller„ÅØ„ÄÅÂêå„ÅòNamespace„Å´ÊâÄÂ±û„Åô„ÇãArgoCDÁ≥ª„Ç´„Çπ„Çø„É†„É™„ÇΩ„Éº„Çπ„Å´ÂØæ„Åó„Å¶„ÄÅReconciliation„ÇíÂÆüË°å„Åó„Åæ„Åô„ÄÇ(üö´Âà∂Èôê‰æã1) ÁÑ°Ë™çÂèØ„ÅÆNamespace„Å´Reconciliation„ÇíÂÆüË°å„Åó„Çà„ÅÜ„Å®„Åó„ÅüÂ†¥Âêà‰æã„Åà„Å∞„ÄÅapplication-controller„ÅåReconciliation„ÅÆÂØæË±°„Å®„Åô„ÇãNamespace„ÇíÈÅ∏„Åº„ÅÜ„Å®„Åó„Å¶„ÅÑ„Çã„Å®„Åó„Åæ„Åô„ÄÇ„Åô„Çã„Å®„ÄÅapplication-controller„ÅØÂÜÖÈÉ®„ÅßÊ§úË®º„É°„ÇΩ„ÉÉ„Éâ„ÇíÂÆüË°å„Åó„ÄÅÁÑ°Ë™çÂèØ„ÅÆNamespace (bar) „ÅØÈÅ∏„Å∞„Å™„ÅÑ„Çà„ÅÜ„Å´„Åó„Åæ„Åô„ÄÇargo-cd/controller/appcontroller_test.go at v2.7.10 ¬∑ argoproj/argo-cd ¬∑ GitHub07. „Åä„Çè„Çä„Å´Kubernetes„ÅÆ„Éû„É´„ÉÅ„ÉÜ„Éä„É≥„Éà„Éë„Çø„Éº„É≥„Å®ArgoCD„Åß„ÅÆ„Éë„Çø„Éº„É≥ÂÆüË∑µ„Çí„ÇÇ„Çä„ÇÇ„ÇäÂ∏ÉÊïô„Åó„Åæ„Åó„Åü„ÄÇ„ÅÇ„Çâ„ÇÜ„ÇãÈù¢„Åã„Çâ„Éû„Éã„Éï„Çß„Çπ„Éà„ÅÆ„Éá„Éó„É≠„Ç§„ÇíÂà∂Èôê„Åó„Å¶„Åè„Çå„Çã„ÄÅAppProject„ÉÜ„Éä„É≥„Éà„ÅÆÁ¥†Êô¥„Çâ„Åó„Åï„Åå‰ºù„Çè„Çä„Åæ„Åó„Åü„Åß„Åó„Çá„ÅÜ„Åã„ÄÇKubernetes„ÅÆ„Éû„É´„ÉÅ„ÉÜ„Éä„É≥„Éà„Éë„Çø„Éº„É≥„ÇíArgoCD„Åß„Å©„ÅÜÂÆüË∑µ„Åô„Çã„Åπ„Åç„Åã„ÄÅ„Å´„Å§„ÅÑ„Å¶Âõ∞„Å£„Å¶„ÅÑ„ÇãÊñπ„ÅÆÂä©„Åë„Å´„Å™„Çå„Å∞Âπ∏„ÅÑ„Åß„ÅôüëçË¨ùËæûÊú¨Ë®ò‰∫ã„ÅÆ„Çø„Ç§„Éà„É´„ÅØ„ÄÅÁßÅ„ÅåÂ¥áÊãù„Åó„Å¶„ÅÑ„Çã„Éâ„É°„Ç§„É≥ÈßÜÂãïË®≠Ë®à„ÅÆÊõ∏Á±ç \"ÂÆüË∑µ„Éâ„É°„Ç§„É≥ÈßÜÂãïË®≠Ë®à\" „Åã„ÇâÊãùÂÄü„Åó„Åæ„Åó„Åüüôè„Åæ„Åü„ÄÅArgoCD„Åß„ÅÆ„Éë„Çø„Éº„É≥ÂÆüË∑µ„ÅÆÂèéÈõÜ„Å´„ÅÇ„Åü„Çä„ÄÅ‰ª•‰∏ã„ÅÆÊñπ„Åã„Çâ„ÅÆÊÑèË¶ã„ÇÇÂèÇËÄÉ„Å´„Åï„Åõ„Å¶„ÅÑ„Åü„Å†„Åç„Åæ„Åó„Åü„ÄÇ@toversus26 „Åï„Çì„Åì„ÅÆÂ†¥„ÅßÊÑüË¨ùÁî≥„Åó‰∏ä„Åí„Åæ„Åôüôáüèª‚ÄçË®ò‰∫ãÈñ¢ÈÄ£„ÅÆ„Åä„Åô„Åô„ÇÅÊõ∏Á±çGitOps Cookbook: Kubernetes Automation in Practice (English Edition)‰ΩúËÄÖ:Vinto, Natale,Bueno, Alex SotoO'Reilly MediaAmazonGitOps and Kubernetes: Continuous Deployment with Argo CD, Jenkins X, and Flux‰ΩúËÄÖ:Yuen, Billy,Matyushentsev, Alexander,Ekenstam, Todd,Suen, JesseManning PublicationsAmazon","isoDate":"2023-08-18T02:06:46.000Z","dateMiliSeconds":1692324406000,"authorName":"Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π","authorId":"hiroki-hasegawa"},{"title":"„ÄêTerraformüßëüèª‚ÄçüöÄ„Äëtfstate„Éï„Ç°„Ç§„É´„ÅÆÂàÜÂâ≤„Éë„Çø„Éº„É≥„Å®„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê„Å∏„ÅÆÈÅ©Áî®","link":"https://hiroki-hasegawa.hatenablog.jp/entry/2023/07/05/001756","contentSnippet":"„Åì„ÅÆË®ò‰∫ã„Åã„ÇâÂæó„Çâ„Çå„ÇãÁü•Ë≠ò„Åì„ÅÆË®ò‰∫ã„ÇíË™≠„ÇÄ„Å®„ÄÅ‰ª•‰∏ã„Çí \"ÂÆåÂÖ®„Å´ÁêÜËß£\" „Åß„Åç„Åæ„Åô‚úåÔ∏èTerraform„ÅÆtfstate„Éï„Ç°„Ç§„É´„ÇíÂàÜÂâ≤„Åô„ÇãÁõÆÁöÑ„Å®„ÄÅ„Ç™„Çπ„Çπ„É°„ÅÆÂàÜÂâ≤„Éë„Çø„Éº„É≥„Å´„Å§„ÅÑ„Å¶ (‚òÖ„ÅßË°®Áèæ)Terraform„ÅÆ„É™„Éù„Ç∏„Éà„É™„ÇÑ„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê„ÅÆË®≠Ë®à„Å´„Å§„ÅÑ„Å¶Ë®ò‰∫ã„ÅÆ„Åñ„Å£„Åè„Çä„Åó„ÅüÂÜÖÂÆπ„ÅØ„ÄÅ‰ª•‰∏ã„ÅÆ„Çπ„É©„Ç§„Éâ„Åã„Çâ„Ç≠„É£„ÉÉ„ÉÅ„Ç¢„ÉÉ„Éó„Åß„Åç„Å°„ÇÉ„ÅÑ„Åæ„ÅôÔºÅ    „Åì„ÅÆË®ò‰∫ã„Åã„ÇâÂæó„Çâ„Çå„ÇãÁü•Ë≠ò01. „ÅØ„Åò„ÇÅ„Å´02. „Å™„Åú tfstate „Éï„Ç°„Ç§„É´„ÇíÂàÜÂâ≤„Åô„Çã„ÅÆ„ÅãÂàÜÂâ≤„Åó„Å™„Åã„Å£„ÅüÂ†¥ÂêàÂàÜÂâ≤„Åó„ÅüÊñπ„Åå„ÅÑ„ÅÑÂ†¥ÂêàÂàÜÂâ≤„Åó„Å™„ÅÑÊñπ„Åå„ÅÑ„ÅÑÂ†¥Âêà03. tfstate „Éï„Ç°„Ç§„É´„ÅÆÂàÜÂâ≤ÂàÜÂâ≤„ÅÆÂ¢ÉÁïåÁä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥‰æùÂ≠òÈñ¢‰øÇÂõ≥„Å®„ÅØ‰æùÂ≠òÈñ¢‰øÇ„ÅÆË°®Áèæ‚ñº ‰æùÂ≠òÈñ¢‰øÇ„ÅÆË°®ÁèæË®òÊ≥ï‚ñº ‰æùÂ≠òÈñ¢‰øÇ„Åå„Å™„ÅÑÂ†¥Âêà‚ñº ‰æùÂ≠òÈñ¢‰øÇ„Åå„ÅÇ„ÇãÂ†¥Âêà04. tfstate „Éï„Ç°„Ç§„É´„Å´Âü∫„Å•„Åè„Åù„ÅÆ‰ªñ„ÅÆË®≠Ë®à„É™„Éù„Ç∏„Éà„É™ üê± „ÅÆË®≠Ë®à„É™„Éù„Ç∏„Éà„É™ÂàÜÂâ≤„Éá„Ç£„É¨„ÇØ„Éà„É™ üìÇ ÊßãÊàê„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ ü™£ „ÅÆË®≠Ë®à„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„ÉâÂàÜÂâ≤„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê05. Áä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇ„ÅÆÂÆöÁæ©ÊñπÊ≥ïterraform_remote_state„Éñ„É≠„ÉÉ„ÇØ„ÅÆÂ†¥Âêàterraform_remote_state„Éñ„É≠„ÉÉ„ÇØ„Å´„Çà„Çã‰æùÂ≠òÁä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥„É™„Éù„Ç∏„Éà„É™„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàêAWS„É™„ÇΩ„Éº„ÇπÂà•data„Éñ„É≠„ÉÉ„ÇØ„ÅÆÂ†¥ÂêàAWS„É™„ÇΩ„Éº„ÇπÂà•data„Éñ„É≠„ÉÉ„ÇØ„Å´„Çà„Çã‰æùÂ≠òÁä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥„É™„Éù„Ç∏„Éà„É™„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê06. tfstate „Éï„Ç°„Ç§„É´„ÅÆÂàÜÂâ≤„Éë„Çø„Éº„É≥„Ç™„Çπ„Çπ„É°„Å™Ë®≠Ë®à„ÅÆ‰∏ÄË¶ßÂ§ßÂàÜÈ°û (‰∏äÂ±§/‰∏ãÂ±§/‰∏≠ÈñìÂ±§) „Å®„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê„ÅÆÈñ¢‰øÇ„É™„Éù„Ç∏„Éà„É™„ÅÆÂ†¥Âêà„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆÂ†¥Âêà07. ‰∏äÂ±§„ÅÆÂàÜÂâ≤ (Êé®Â•®)‰∏äÂ±§„ÅÆÂàÜÂâ≤„Å´„Å§„ÅÑ„Å¶„Éó„É≠„Éê„Ç§„ÉÄ„Éº„ÅÆ„Ç¢„Ç´„Ç¶„É≥„ÉàÂà• - ‚òÖ‚òÖ‚òÖ„Åì„ÅÆÂàÜÂâ≤ÊñπÊ≥ï„Å´„Å§„ÅÑ„Å¶„Äê„Éó„É≠„Éê„Ç§„ÉÄ„Éº„Ç¢„Ç´„Ç¶„É≥„ÉàÂà•„ÄëÁä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥„Äê„Éó„É≠„Éê„Ç§„ÉÄ„Éº„Ç¢„Ç´„Ç¶„É≥„ÉàÂà•„Äë„É™„Éù„Ç∏„Éà„É™„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‚ñº Áï∞„Å™„Çã„É™„Éù„Ç∏„Éà„É™„ÅÆÂ†¥Âêà‚ñº Âêå„Åò„É™„Éù„Ç∏„Éà„É™„ÅÆÂ†¥Âêà„Äê„Éó„É≠„Éê„Ç§„ÉÄ„Éº„Ç¢„Ç´„Ç¶„É≥„ÉàÂà•„Äë„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‚ñº Áï∞„Å™„Çã„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆÂ†¥Âêà‚ñº Âêå„Åò„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆÂ†¥Âêà08. ‰∏ãÂ±§„ÅÆÂàÜÂâ≤ (Êé®Â•®)‰∏ãÂ±§„ÅÆÂàÜÂâ≤„Å´„Å§„ÅÑ„Å¶ÂÆüË°åÁí∞Â¢ÉÂà• - ‚òÖ‚òÖ‚òÖ„Åì„ÅÆÂàÜÂâ≤ÊñπÊ≥ï„Å´„Å§„ÅÑ„Å¶„ÄêÂÆüË°åÁí∞Â¢ÉÂà•„ÄëÁä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥„ÄêÂÆüË°åÁí∞Â¢ÉÂà•„Äë„É™„Éù„Ç∏„Éà„É™„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‚ñº Áï∞„Å™„Çã„É™„Éù„Ç∏„Éà„É™„ÅÆÂ†¥Âêà‚ñº Âêå„Åò„É™„Éù„Ç∏„Éà„É™„ÅÆÂ†¥Âêà„ÄêÂÆüË°åÁí∞Â¢ÉÂà•„Äë„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‚ñº Áï∞„Å™„Çã„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆÂ†¥Âêà‚ñº Âêå„Åò„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ x AWS„Ç¢„Ç´„Ç¶„É≥„ÉàÂà•„Å´Áï∞„Å™„ÇãÂÆüË°åÁí∞Â¢É „ÅÆÂ†¥Âêà‚ñº Âêå„Åò„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ x Âçò‰∏Ä„ÅÆAWS„Ç¢„Ç´„Ç¶„É≥„ÉàÂÜÖ„Å´ÂÖ®„Å¶„ÅÆÂÆüË°åÁí∞Â¢É „ÅÆÂ†¥Âêà09. ‰∏≠ÈñìÂ±§„ÅÆÂàÜÂâ≤ (‰ªªÊÑè)‰∏≠ÈñìÂ±§„ÅÆÂàÜÂâ≤„Å´„Å§„ÅÑ„Å¶ÈÅãÁî®„ÉÅ„Éº„É†Ë≤¨ÂãôÁØÑÂõ≤Âà• - ‚òÖ‚òÖ„Åì„ÅÆÂàÜÂâ≤ÊñπÊ≥ï„Å´„Å§„ÅÑ„Å¶„Äê„ÉÅ„Éº„É†Âà•„ÄëÁä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥„Äê„ÉÅ„Éº„É†Âà•„Äë„É™„Éù„Ç∏„Éà„É™„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‚ñº Áï∞„Å™„Çã„É™„Éù„Ç∏„Éà„É™„ÅÆÂ†¥Âêà‚ñº Âêå„Åò„É™„Éù„Ç∏„Éà„É™„ÅÆÂ†¥Âêà„Äê„ÉÅ„Éº„É†Âà•„Äë„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‚ñº Áï∞„Å™„Çã„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆÂ†¥Âêà‚ñº Âêå„Åò„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆÂ†¥Âêà„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆ„Çµ„Éñ„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÂà• - ‚òÖ‚òÖ„Åì„ÅÆÂàÜÂâ≤ÊñπÊ≥ï„Å´„Å§„ÅÑ„Å¶„Äê„Çµ„Éñ„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÂà•„ÄëÁä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥„Äê„Çµ„Éñ„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÂà•„Äë„É™„Éù„Ç∏„Éà„É™„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‚ñº Áï∞„Å™„Çã„É™„Éù„Ç∏„Éà„É™„ÅÆÂ†¥Âêà‚ñº Âêå„Åò„É™„Éù„Ç∏„Éà„É™„ÅÆÂ†¥Âêà„Äê„Çµ„Éñ„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÂà•„Äë„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‚ñº Áï∞„Å™„Çã„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆÂ†¥Âêà‚ñº Âêå„Åò„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆÂ†¥ÂêàÈÅãÁî®„ÉÅ„Éº„É†Ë≤¨ÂãôÁØÑÂõ≤Âà• √ó „Éó„É≠„ÉÄ„ÇØ„Éà„Çµ„Éñ„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÂà• - ‚òÖ„Åì„ÅÆÂàÜÂâ≤ÊñπÊ≥ï„Å´„Å§„ÅÑ„Å¶„Äê„ÉÅ„Éº„É†Âà• √ó „Çµ„Éñ„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÂà•„ÄëÁä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥„Äê„ÉÅ„Éº„É†Âà• √ó „Çµ„Éñ„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÂà•„Äë„É™„Éù„Ç∏„Éà„É™„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‚ñº Áï∞„Å™„Çã„É™„Éù„Ç∏„Éà„É™„ÅÆÂ†¥Âêà‚ñº Âêå„Åò„É™„Éù„Ç∏„Éà„É™„ÅÆÂ†¥Âêà„Äê„ÉÅ„Éº„É†Âà• √ó „Çµ„Éñ„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÂà•„Äë„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‚ñº Áï∞„Å™„Çã„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆÂ†¥Âêà‚ñº Âêå„Åò„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆÂ†¥ÂêàÂêå„Åò„ÉÜ„Éä„É≥„ÉàÂÜÖ„ÅÆ„Éó„É≠„ÉÄ„ÇØ„ÉàÂà•„Åì„ÅÆÂàÜÂâ≤ÊñπÊ≥ï„Å´„Å§„ÅÑ„Å¶„ÄêÂêå„Åò„ÉÜ„Éä„É≥„ÉàÂÜÖ„ÅÆ„Éó„É≠„ÉÄ„ÇØ„Éà„ÄëÁä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥„ÄêÂêå„Åò„ÉÜ„Éä„É≥„ÉàÂÜÖ„ÅÆ„Éó„É≠„ÉÄ„ÇØ„Éà„Äë„É™„Éù„Ç∏„Éà„É™„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‚ñº Áï∞„Å™„Çã„É™„Éù„Ç∏„Éà„É™„ÅÆÂ†¥Âêà‚ñº Âêå„Åò„É™„Éù„Ç∏„Éà„É™„ÅÆÂ†¥Âêà„ÄêÂêå„Åò„ÉÜ„Éä„É≥„ÉàÂÜÖ„ÅÆ„Éó„É≠„ÉÄ„ÇØ„Éà„Äë„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‚ñº Áï∞„Å™„Çã„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆÂ†¥Âêà‚ñº Âêå„Åò„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆÂ†¥ÂêàAWS„É™„ÇΩ„Éº„Çπ„ÅÆÁ®ÆÈ°û„Ç∞„É´„Éº„ÉóÂà•„Åì„ÅÆÂàÜÂâ≤ÊñπÊ≥ï„Å´„Å§„ÅÑ„Å¶„ÄêÁ®ÆÈ°û„Ç∞„É´„Éº„ÉóÂà•„ÄëÁä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥„ÄêÁ®ÆÈ°û„Ç∞„É´„Éº„ÉóÂà•„Äë„É™„Éù„Ç∏„Éà„É™„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‚ñº Áï∞„Å™„Çã„É™„Éù„Ç∏„Éà„É™„ÅÆÂ†¥Âêà‚ñº Âêå„Åò„É™„Éù„Ç∏„Éà„É™„ÅÆÂ†¥Âêà„ÄêÁ®ÆÈ°û„Ç∞„É´„Éº„ÉóÂà•„Äë„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‚ñº Áï∞„Å™„Çã„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆÂ†¥Âêà‚ñº Âêå„Åò„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆÂ†¥ÂêàAWS„É™„ÇΩ„Éº„Çπ„ÅÆÁä∂ÊÖã„ÅÆÂ§âÊõ¥È†ªÂ∫¶„Ç∞„É´„Éº„ÉóÂà•„Åì„ÅÆÂàÜÂâ≤ÊñπÊ≥ï„Å´„Å§„ÅÑ„Å¶„ÄêÂ§âÊõ¥È†ªÂ∫¶„Ç∞„É´„Éº„ÉóÂà•„ÄëÁä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥„ÄêÂ§âÊõ¥È†ªÂ∫¶„Ç∞„É´„Éº„ÉóÂà•„Äë„É™„Éù„Ç∏„Éà„É™„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‚ñº Áï∞„Å™„Çã„É™„Éù„Ç∏„Éà„É™„ÅÆÂ†¥Âêà‚ñº Âêå„Åò„É™„Éù„Ç∏„Éà„É™„ÅÆÂ†¥Âêà„ÄêÂ§âÊõ¥È†ªÂ∫¶„Ç∞„É´„Éº„ÉóÂà•„Äë„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‚ñº Áï∞„Å™„Çã„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆÂ†¥Âêà‚ñº Âêå„Åò„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆÂ†¥Âêà10. „Åä„Çè„Çä„Å´Ë¨ùËæûË®ò‰∫ãÈñ¢ÈÄ£„ÅÆ„Åä„Åô„Åô„ÇÅÊõ∏Á±ç01. „ÅØ„Åò„ÇÅ„Å´„Å©„ÅÜ„ÇÇ„ÄÅMitchell Hashimoto „Åß„Åô„ÄÇ„Åï„Å¶ÊúÄËøë„ÅÆÊ•≠Âãô„Åß„ÄÅÂÖ®„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆÊäÄË°ìÂü∫Áõ§ÈñãÁô∫„ÉÅ„Éº„É†„Å´Êê∫„Çè„Å£„Å¶„Åä„Çä„ÄÅ„ÉÅ„Éº„É†„Åå‰Ωø„Å£„Å¶„ÅÑ„ÇãTerraformüßëüèª‚ÄçüöÄ„ÅÆ„É™„Éù„Ç∏„Éà„É™„Çí„É™„Éó„É¨„Ç§„Çπ„Åô„Çã‰ΩúÊ•≠„ÇíÊãÖÂΩì„Åó„Åæ„Åó„Åü„ÄÇ„Åì„ÅÆ„É™„Éù„Ç∏„Éà„É™„Åß„ÅØÂçò‰∏Ä„ÅÆtfstate„Éï„Ç°„Ç§„É´„ÅåÁä∂ÊÖã„ÇíÊåÅ„Å°ÈÅé„Åé„Å¶„ÅÑ„ÇãË™≤È°å„ÇíÊä±„Åà„Å¶„ÅÑ„Åü„Åü„ÇÅ„ÄÅË™≤È°å„Å´Âêà„Å£„ÅüÈÅ©Âàá„Å™ÂàÜÂâ≤„Éë„Çø„Éº„É≥„Åß„É™„Éó„É¨„Ç§„Çπ„Åó„Åæ„Åó„Åü„ÄÇ‰ªäÂõû„ÅØ„ÄÅ„Åì„ÅÆÊôÇ„Å´Êï¥ÁêÜ„Åó„ÅüÂàÜÂâ≤„Éë„Çø„Éº„É≥ (AWSÂêë„Åë) „ÇíË®ò‰∫ã„ÅßËß£Ë™¨„Åó„Åæ„Åó„Åü„ÄÇ„ÇÇ„Å°„Çç„Çì„ÄÅGoogleCloud„ÇÑAzure„Åß„ÇÇË™≠„ÅøÊèõ„Åà„Å¶„ÅÑ„Åü„Å†„Åë„Çå„Å∞„ÄÅÂêå„Åò„Çà„ÅÜ„Å´ÈÅ©Áî®„Åß„Åç„Åæ„Åô„ÄÇÁü•„ÇãÈôê„Çä„ÅÆÂàÜÂâ≤„Éë„Çø„Éº„É≥„ÇíË®òËºâ„Åó„Åü„Å®„Åì„Çç„ÄÅÊÉÖÂ†±Èáè„Åå„Ç®„Ç∞„ÅÑ„Åì„Å®„Å´„Å™„Å£„Å¶„Åó„Åæ„Å£„Åü„Åü„ÇÅ„ÄÅÊ∞ó„Å´„Å™„ÇãÂàÜÂâ≤„Éë„Çø„Éº„É≥„Å†„ÅëÊãæ„Å£„Å¶Â∏∞„Å£„Å¶„ÅÑ„Åü„Å†„Åë„Çã„Å®„Éè„ÉÉ„Éî„Éº„Åß„Åôüôè„Åù„Çå„Åß„ÅØ„ÄÅ„ÇÇ„Çä„ÇÇ„ÇäÂ∏ÉÊïô„Åó„Å¶„ÅÑ„Åç„Åæ„Åôüòó02. „Å™„Åú tfstate „Éï„Ç°„Ç§„É´„ÇíÂàÜÂâ≤„Åô„Çã„ÅÆ„Åã%%{init: { 'theme': \"default\", 'themeVariables': { 'commitLabelFontSize': '13px' }}}%%gitGraph   commit id: \"8c8e6\"   commit id: \"0e3c3\"     branch feature/foo     checkout feature/foo     commit id: \"4e9e8\"     commit id: \"da005\"   checkout main     branch feature/bar     commit id: \"2d52f\"   checkout main   commit id: \"e74d6\"     branch feature/baz     commit id: \"f6881\"ÂàÜÂâ≤„Åó„Å™„Åã„Å£„ÅüÂ†¥Âêà„Åù„ÇÇ„Åù„ÇÇ„ÄÅ„Å™„Åútfstate„Éï„Ç°„Ç§„É´„ÇíÂàÜÂâ≤„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çã„ÅÆ„Åß„Åó„Çá„ÅÜ„Åã„ÄÇtfstate„Éï„Ç°„Ç§„É´„ÇíÂàÜÂâ≤„Åó„Å™„Åã„Å£„Åü„Å®‰ªÆÂÆö„Åó„Åæ„Åô„ÄÇÊßò„ÄÖ„Å™„Ç§„É≥„Éï„É©„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÇíÂçò‰∏Ä„ÅÆtfstate„Éï„Ç°„Ç§„É´„ÅßÁä∂ÊÖã„ÇíÊåÅ„Å§Â†¥Âêà„ÄÅ1Âõû„ÅÆterraform„Ç≥„Éû„É≥„ÉâÂÖ®„Å¶„ÅÆ„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊìç‰Ωú„Åß„Åç„Å¶Ê•Ω„Åß„Åô„ÄÇ„Åü„Å†„Åó„ÄÅË§áÊï∞„ÅÆ‰ΩúÊ•≠„Éñ„É©„É≥„ÉÅ„Åå„ÅÇ„ÇãÁä∂Ê≥Å„Å†„Å®ÁÖ©„Çè„Åó„ÅÑ„Åì„Å®„ÅåËµ∑„Åì„Çä„Åæ„Åô„ÄÇÂêÑ‰ΩúÊ•≠„Éñ„É©„É≥„ÉÅ„Åß„Ç§„É≥„Éï„É©„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÂ§âÊõ¥„Åó„Åã„Åë„Å¶„ÅÑ„Çã„Å®„ÄÅ‰ªñ„ÅÆ‰ΩúÊ•≠„Éñ„É©„É≥„ÉÅ„Åã„ÇâÂΩ±Èüø„ÇíÂèó„Åë„ÄÅterraform„Ç≥„Éû„É≥„Éâ„Åßtarget„Ç™„Éó„Ç∑„Éß„É≥„ÅåÂøÖË¶Å„Å´„Å™„Å£„Å¶„Åó„Åæ„ÅÑ„Åæ„Åô„ÄÇ‰ªñ„Å´„ÇÇ„ÄÅterraform„Ç≥„Éû„É≥„Éâ„ÅÆÂÆå‰∫Ü„Å´ÊôÇÈñì„Åå„Åã„Åã„Çä„Åô„Åé„Çã„Å®„ÅÑ„Å£„ÅüÂïèÈ°å„ÇÇËµ∑„Åì„Çã„Åã„ÇÇ„Åó„Çå„Åæ„Åõ„Çì„ÄÇÂçò‰∏Ä„ÅÆtfstate„Éï„Ç°„Ç§„É´„ÅßÁÆ°ÁêÜ„Åô„Çã„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅåÂ§ö„Åè„Å™„Çã„Åª„Å©„ÄÅ„Åì„Çå„Çâ„ÅÆÂïèÈ°å„ÅØÈ°ïËëó„Å´„Å™„Çä„Åæ„Åô„ÄÇÂàÜÂâ≤„Åó„ÅüÊñπ„Åå„ÅÑ„ÅÑÂ†¥Âêà„Åù„ÅÆ‰∏ÄÊñπ„Åß„ÄÅtfstate„Éï„Ç°„Ç§„É´„Çí„ÅÑ„ÅÑÊÑü„Åò„Å´ÂàÜÂâ≤„Åó„Åü„Å®‰ªÆÂÆö„Åó„Åæ„Åô„ÄÇÂêÑ‰ΩúÊ•≠„Éñ„É©„É≥„ÉÅ„Åß„ÅØ„ÄÅ„Åæ„Çã„ÅßÊöóÈªôÁöÑ„Å´target„Ç™„Éó„Ç∑„Éß„É≥„Åå„Å§„ÅÑ„Åü„Çà„ÅÜ„Å´„ÄÅ‰ªñ„ÅÆ‰ΩúÊ•≠„Éñ„É©„É≥„ÉÅ„Åã„ÇâÂΩ±Èüø„ÇíÂèó„Åë„Åö„Å´terraform„Ç≥„Éû„É≥„Éâ„ÇíÂÆüË°å„Åß„Åç„Åæ„Åô„ÄÇ„Çà„Å£„Å¶„ÄÅÂêÑtfstate„Éï„Ç°„Ç§„É´„ÇíÊìç‰Ωú„Åß„Åç„ÇãÁÆ°ÁêÜËÄÖ„ÅØ‰∫í„ÅÑ„Å´ÂΩ±Èüø„ÇíÂèó„Åë„Åö„Å´„ÄÅterraform„Ç≥„Éû„É≥„Éâ„ÅÆÁµêÊûú„ÇíÂæó„Çâ„Çå„Çã„Çà„ÅÜ„Å´„Å™„Çä„Åæ„Åô„ÄÇTerraform: Up and Running: Writing Infrastructure as CodeOrganizing With Multiple States - DevOps with Terraform - CloudCastsÂàÜÂâ≤„Åó„Å™„ÅÑÊñπ„Åå„ÅÑ„ÅÑÂ†¥ÂêàÈÅãÁî®„É´„Éº„É´„ÇÑÈñãÁô∫ËÄÖ‰∫∫Êï∞„ÅåÁêÜÁî±„Åß‰ΩúÊ•≠„ÅåË°ùÁ™Å„Åõ„Åö„ÄÅtarget„Ç™„Éó„Ç∑„Éß„É≥„ÅåÂøÖË¶Å„Å™„ÅÑÁä∂Ê≥Å„Åß„ÅÇ„Çå„Å∞„ÄÅtfstate„Éï„Ç°„Ç§„É´„ÅØÂàÜÂâ≤„Åó„Å™„Åè„Å¶„ÇÇ„Çà„ÅÑ„Åß„Åó„Çá„ÅÜ„ÄÇtfstate„Éï„Ç°„Ç§„É´„ÇíÂàÜÂâ≤„Åô„Çã„É°„É™„ÉÉ„Éà„ÅåÂ∞ë„Å™„ÅÑ„Åß„ÅôüôÖüèª‚Äç03. tfstate „Éï„Ç°„Ç§„É´„ÅÆÂàÜÂâ≤ÂàÜÂâ≤„ÅÆÂ¢ÉÁïå„Åù„Çå„Åß„ÅØ„ÄÅtfstate„Éï„Ç°„Ç§„É´„ÅÆÂàÜÂâ≤„ÅÆÂ¢ÉÁïå„ÅØ„Å©„ÅÆ„Çà„ÅÜ„Å´„Åó„Å¶Ë¶ã„Å§„Åë„Çå„Å∞„Çà„ÅÑ„ÅÆ„Åß„Åó„Çá„ÅÜ„Åã„ÄÇ„Åì„Çå„ÇíË¶ã„Å§„Åë„Çã„Ç≥„ÉÑ„ÅØ„ÄÅ„Åß„Åç„Çã„Å†„ÅëÁõ∏‰∫í„Å´‰æùÂ≠ò„Åó„Å™„ÅÑ„Ç§„É≥„Éï„É©„É™„ÇΩ„Éº„Çπ„ÅÆÈñ¢‰øÇ „Å´Ê≥®ÁõÆ„Åô„Çã„Åì„Å®„Å†„Å®ËÄÉ„Åà„Å¶„ÅÑ„Åæ„Åô„ÄÇ„Åì„Åì„Åß„ÅÑ„ÅÜ‰æùÂ≠ò„Å®„ÅØ„ÄÅ\"tfstate„Éï„Ç°„Ç§„É´„Åå‰ªñ„ÅÆtfstate„Éï„Ç°„Ç§„É´„ÅÆÁä∂ÊÖã„Çí‰ΩøÁî®„Åô„Çã„Åì„Å®\" „Åß„Åô„ÄÇ„ÇÇ„ÅÜÂ∞ë„ÅóÂÖ∑‰ΩìÁöÑ„Å´Ë®ÄË™ûÂåñ„Åô„Çã„Å®„ÄÅ\"ÁâπÂÆö„ÅÆ„Ç§„É≥„Éï„É©„É™„ÇΩ„Éº„Çπ„Åå‰ªñ„ÅÆË®≠ÂÆöÂÄ§„ÇíÂèÇÁÖß„Åô„Çã„Åì„Å®\" „Åß„Åô„ÄÇÁä∂ÊÖã„Çí„Åª„Å®„Çì„Å©‰ΩøÁî®„ÅóÂêà„Çè„Å™„ÅÑ (‰∫í„ÅÑ„Å´Ë®≠ÂÆöÂÄ§„ÅÆÂèÇÁÖßÊï∞„ÅåÂ∞ë„Å™„ÅÑ) „Ç§„É≥„Éï„É©„É™„ÇΩ„Éº„ÇπÂêåÂ£´„Çí„ÄÅÁï∞„Å™„Çãtfstate„Éï„Ç°„Ç§„É´„ÅßÁÆ°ÁêÜ„Åó„Åæ„Åô„ÄÇÁï∞„Å™„Çãtfstate„Éï„Ç°„Ç§„É´„ÅßÁÆ°ÁêÜ„Åß„Åç„ÇãÂàÜÂâ≤„Éë„Çø„Éº„É≥„Å´„Å§„ÅÑ„Å¶„ÅØÂæåËø∞„Åó„Åæ„Åô„ÄÇ‚ñ∂ „Äé‰æùÂ≠ò„Äè„Å®„ÅÑ„ÅÜÁî®Ë™û„Å´„Å§„ÅÑ„Å¶tfstate„Éï„Ç°„Ç§„É´„Åß„ÇÇÂêå„ÅòÁî®Ë™û„ÅßË°®Áèæ„Åô„Çã„Åì„Å®„Å´„Åó„Åæ„Åó„Åü„ÄÇ@tmknom „Åï„Çì„ÅåËø∞„Åπ„Å¶„ÅÑ„ÇãÈÄö„Çä„ÄÅTerraform„Çí„Çà„Çä„Çà„ÅèË®≠Ë®à„Åô„Çã„Åü„ÇÅ„Å´„ÅØ„ÄÅ„Äé„ÇΩ„Éï„Éà„Ç¶„Çß„Ç¢„ÅÆÂü∫Á§éÁü•Ë≠ò„Äè„ÅåÂøÖË¶Å„Åß„ÅôüëçÁä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥‰æùÂ≠òÈñ¢‰øÇÂõ≥„Å®„ÅØÂàÜÂâ≤„Åó„Åütfstate„Éï„Ç°„Ç§„É´Èñì„ÅÆÁä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇ„ÇíË°®Áèæ„Åó„ÅüÂõ≥„Åß„Åô„ÄÇ„Éó„É≠„Éê„Ç§„ÉÄ„Éº„ÅÆ„Ç¢„Ç´„Ç¶„É≥„Éà„ÅÆÁä∂ÊÖã„Çítfstate„Éï„Ç°„Ç§„É´„ÅßÁÆ°ÁêÜ„Åó„Å¶„ÅÑ„Çã„Åì„Å®„ÇíÊÉ≥ÂÉè„Åó„Å¶„Åø„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ%%{init:{'theme':'default'}}%%flowchart TB    subgraph AWS„Ç¢„Ç´„Ç¶„É≥„Éà        foo[\"tfstate„Éï„Ç°„Ç§„É´\"]    end‰ºº„Åü„ÇÇ„ÅÆ„Å®„Åó„Å¶terraform graph„Ç≥„Éû„É≥„Éâ„Å´„Çà„Çã„Ç∞„É©„Éï„Åå„ÅÇ„Çä„Åæ„Åô„Åå„ÄÅ„Åì„Çå„ÅØ„Ç§„É≥„Éï„É©„É™„ÇΩ„Éº„ÇπÈñì„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥„Åß„Åô„ÄÇtfstate„Éï„Ç°„Ç§„É´Èñì„ÅßÁõ∏‰∫í„Å´‰æùÂ≠òÈñ¢‰øÇ„Åå„ÅÇ„Çã„Åã„Çâ„Å®„ÅÑ„Å£„Å¶„ÄÅÂÄãÂà•„ÅÆ„Ç§„É≥„Éï„É©„É™„ÇΩ„Éº„ÇπÈñì„ÅßÂæ™Áí∞ÂèÇÁÖß„ÅåËµ∑„Åì„Å£„Å¶„Åó„Åæ„ÅÜ„Å®„ÅÑ„ÅÜ„Çè„Åë„Åß„ÅØ„Å™„ÅÑ„Åß„Åô„ÄÇÁ∂ö„ÅÑ„Å¶„ÄÅ‰æùÂ≠òÈñ¢‰øÇ„Åå„ÅÇ„ÇãÂ†¥Âêà„Å®ÁÑ°„ÅÑÂ†¥Âêà„Åß„ÄÅ„Å©„ÅÆ„Çà„ÅÜ„Å™‰æùÂ≠òÈñ¢‰øÇÂõ≥„Å´„Å™„Çã„Åã„ÇíÁ¥π‰ªã„Åó„Å¶„ÅÑ„Åç„Åæ„Åô„ÄÇCommand: graph | Terraform | HashiCorp Developer‰æùÂ≠òÈñ¢‰øÇ„ÅÆË°®Áèæ‚ñº ‰æùÂ≠òÈñ¢‰øÇ„ÅÆË°®ÁèæË®òÊ≥ïtfstate„Éï„Ç°„Ç§„É´Èñì„ÅßÁä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇ„Åå„ÅÇ„ÇãÂ†¥Âêà„ÄÅ„Åì„Çå„ÇíÂõ≥„ÅßË°®Áèæ„Åô„Çã„Å®ÂàÜÂâ≤„ÅÆÁä∂Ê≥Å„Åå„Çè„Åã„Çä„ÇÑ„Åô„Åè„Å™„Çä„Åæ„Åô„ÄÇ„Äé‰æùÂ≠ò„Äè„ÅØ„ÄÅ---\u003e (Ê≥¢Á∑öÁü¢Âç∞) „ÅßË°®Áèæ„Åô„Çã„Åì„Å®„Å®„Åó„Åæ„Åô„ÄÇ‰æùÂ≠òÈñ¢‰øÇ„Åå„ÅÇ„ÇãÂ†¥Âêà„Å´„Å§„ÅÑ„Å¶„ÅØ„ÄÅÂæåËø∞„Åó„Åæ„Åô„ÄÇ‚ñ∂ „Äé‰æùÂ≠ò„Äè„ÅÆÊ≥¢Á∑öÁü¢Âç∞„Å´„Å§„ÅÑ„Å¶---\u003e (Ê≥¢Á∑öÁü¢Âç∞) „ÅßË°®Áèæ„Åó„Åæ„Åô„ÄÇ„Åù„ÅÆ„Åü„ÇÅ‰æøÂÆú‰∏ä„ÄÅtfstate„Éï„Ç°„Ç§„É´„Åß„ÇÇÂêå„ÅòË®òÂè∑„ÅßË°®Áèæ„Åô„Çã„Åì„Å®„Å´„Åó„Åæ„Åó„Åüüëç‚ñº ‰æùÂ≠òÈñ¢‰øÇ„Åå„Å™„ÅÑÂ†¥Âêà‰æã„Åà„Å∞„ÄÅAWS„É™„ÇΩ„Éº„Çπ„Åã„Çâ„Å™„Çã„Éó„É≠„ÉÄ„ÇØ„Éà„Çí„ÅÑ„Åè„Å§„Åã„ÅÆtfstate„Éï„Ç°„Ç§„É´ (foo-tfstate„ÄÅbar-tfstate) „Å´ÂàÜÂâ≤„Åó„Åü„Å®‰ªÆÂÆö„Åó„Åæ„Åô„ÄÇ„Åì„Åì„Åß‰ªÆÂÆö„Åó„ÅüÁä∂Ê≥Å„Åß„ÅØ„ÄÅ tfstate „Éï„Ç°„Ç§„É´Èñì„Å´‰æùÂ≠òÈñ¢‰øÇ„ÅØ„Å™„ÅÑ„Å®„Åó„Åæ„Åô„ÄÇ„Åù„ÅÆ„Åü„ÇÅ„ÄÅÊÉ≥ÂÆö„Åï„Çå„ÇãÁä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Å´„Å™„Çä„Åæ„Åô„ÄÇtfstate„Éï„Ç°„Ç§„É´Èñì„Å´‰æùÂ≠òÈñ¢‰øÇ„Åå„Å™„ÅÑÁä∂Ê≥Å„Åå„Éô„Çπ„Éà„Åß„Åô„ÄÇ---title: tfstate„Éï„Ç°„Ç§„É´Èñì„Å´‰æùÂ≠òÈñ¢‰øÇ„ÅØ„Å™„ÅÑ---%%{init:{'theme':'default'}}%%flowchart TB    subgraph AWS„Ç¢„Ç´„Ç¶„É≥„Éà        foo[\"foo-tfstate\"]        bar[\"bar-tfstate\"]    end‚ñº ‰æùÂ≠òÈñ¢‰øÇ„Åå„ÅÇ„ÇãÂ†¥ÂêàÂêåÊßò„Å´ÂàÜÂâ≤„Åó„Åü„Å®‰ªÆÂÆö„Åó„Åæ„Åô„ÄÇ„Åì„Åì„Åß‰ªÆÂÆö„Åó„ÅüÁä∂Ê≥Å„Åß„ÅØ„ÄÅ foo-tfstate ‚û°Ô∏é bar-tfstate „ÅÆÊñπÂêë„Å´‰æùÂ≠ò„Åó„Å¶„ÅÑ„Çã„Å®„Åó„Åæ„Åô„ÄÇ„Åù„ÅÆ„Åü„ÇÅ„ÄÅ---\u003e (Ê≥¢Á∑öÁü¢Âç∞) „Çí‰ΩøÁî®„Åó„Å¶„ÄÅÊÉ≥ÂÆö„Åï„Çå„ÇãÁä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Å´„Å™„Çä„Åæ„Åô„ÄÇ„Å™„Åä„ÄÅ‰æùÂ≠òÊñπÂêë„ÅØÁä∂Ê≥Å„Å´„Çà„Å£„Å¶Áï∞„Å™„Çã„Åì„Å®„Çí„ÅîÂÆπËµ¶„Åè„Å†„Åï„ÅÑ„ÄÇ---title: foo-tfstate„Éï„Ç°„Ç§„É´„ÅØ„ÄÅbar-tfstate„Éï„Ç°„Ç§„É´„Å´‰æùÂ≠ò---%%{init:{'theme':'default'}}%%flowchart TD    subgraph AWS„Ç¢„Ç´„Ç¶„É≥„Éà        foo[\"foo-tfstate\"]        bar[\"bar-tfstate\"]    end    foo -. ‰æùÂ≠ò .-\u003e bar04. tfstate „Éï„Ç°„Ç§„É´„Å´Âü∫„Å•„Åè„Åù„ÅÆ‰ªñ„ÅÆË®≠Ë®à„É™„Éù„Ç∏„Éà„É™ üê± „ÅÆË®≠Ë®à„É™„Éù„Ç∏„Éà„É™ÂàÜÂâ≤„Åì„Åì„Åæ„Åß„Åß„ÄÅtfstate„Éï„Ç°„Ç§„É´ÂàÜÂâ≤„Å´„Å§„ÅÑ„Å¶Á∞°Âçò„Å´Á¥π‰ªã„Åó„Åæ„Åó„Åü„ÄÇ„É™„Éù„Ç∏„Éà„É™„ÅÆÂàÜÂâ≤„ÅØ„ÄÅtfstate„Éï„Ç°„Ç§„É´ÂàÜÂâ≤„Å´Âü∫„Å•„ÅÑ„Å¶Ë®≠Ë®à„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇÂèØËÉΩ„Åß„ÅÇ„Çå„Å∞„ÄÅ1ÂÄã„ÅÆ„É™„Éù„Ç∏„Éà„É™„Å´1ÂÄã„ÅÆtfstate„Éï„Ç°„Ç§„É´„Çí„Åä„Åè„Åì„Å®„ÅåÊúõ„Åæ„Åó„ÅÑ„Åß„Åô„ÄÇÁï∞„Å™„Çã„É™„Éù„Ç∏„Éà„É™„Å´tfstate„Éï„Ç°„Ç§„É´„Çí„Åä„ÅÑ„ÅüÊñπ„Åå„Çà„ÅÑÂ†¥Âêà„Å´„Å§„ÅÑ„Å¶„ÅØ„ÄÅÂàÜÂâ≤„Éë„Çø„Éº„É≥ „ÅßË™¨Êòé„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇüê± foo-repository/‚îú‚îÄ‚îÄ backend.tf # foo„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã...üê± bar-repository/‚îú‚îÄ‚îÄ backend.tf # bar„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã...„Éá„Ç£„É¨„ÇØ„Éà„É™ üìÇ ÊßãÊàê„É™„Éù„Ç∏„Éà„É™ÂÜÖ„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê„ÇÇ„ÄÅtfstate„Éï„Ç°„Ç§„É´ÂàÜÂâ≤„Å´Âü∫„Å•„ÅÑ„Å¶Ë®≠Ë®à„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇÁéáÁõ¥„Å´Ë®Ä„ÅÜ„Å®„ÄÅTerraform„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê„ÅÆ„Éë„Çø„Éº„É≥„ÅØÁÑ°Êï∞„Å´„ÅÇ„Çä„Åæ„Åô„ÄÇ„Åù„ÅÆ„Åü„ÇÅ„ÄÅÂü∫Ê∫ñ„Å™„Åó„Å´„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê„ÇíËÄÉ„Åà„Çã„Å®‰Ωï„Åß„ÇÇ„ÅÇ„Çä „Å´„Å™„Å£„Å¶„Åó„Åæ„ÅÑ„Åæ„Åô„ÄÇ„Åù„ÅÆ‰∏ÄÊñπ„Åß„ÄÅtfstate„Éï„Ç°„Ç§„É´ÂàÜÂâ≤„Å´Âü∫„Å•„ÅÑ„Å¶Ë®≠Ë®à„Åô„Çã„Åì„Å®„Å´„Çà„Çä„ÄÅÊòéÁ¢∫„Å™„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê„Éë„Çø„Éº„É≥ „Å®„Åó„Å¶ÊäΩÂá∫ÂèØËÉΩ„Å´„Å™„Çä„Åæ„Åô„ÄÇüê± repository/‚îú‚îÄ‚îÄ üìÇ foo/‚îÇ    ‚îú‚îÄ‚îÄ backend.tf # foo„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ...‚îÇ‚îî‚îÄ‚îÄ üìÇ bar/      ‚îú‚îÄ‚îÄ backend.tf # bar„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã      ...‚ñ∂ „É≠„Éº„Ç´„É´„É¢„Ç∏„É•„Éº„É´„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê„ÅÆË®≠Ë®à„Å´„Å§„ÅÑ„Å¶resource„ÄÅdata) „ÅÆ„Çª„ÉÉ„Éà„Çí‰Ωø„ÅÑÂõû„Åô„Åì„Å®„ÇíÁõÆÁöÑ„Å®„Åó„Åü„ÄÅ„É≠„Éº„Ç´„É´„É¢„Ç∏„É•„Éº„É´„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ‰ªäÂõû„ÄÅ„Åì„Çå„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê„ÅØË®≠Ë®à„Å´Âê´„ÇÅ„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇÊ∑∑Âêå„Åó„ÇÑ„Åô„ÅÑ„ÅÆ„Åß„Åô„Åå„ÄÅtfstate„Éï„Ç°„Ç§„É´ÂàÜÂâ≤„Å´Âü∫„Å•„Åè„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê„Å®„É≠„Éº„Ç´„É´„É¢„Ç∏„É•„Éº„É´ÂÜÖ„ÅÆ„Åù„Çå„ÅØ„ÄÅÂÖ®„ÅèÂà•„ÅÆ„ÉÜ„Éº„Éû„Å®„Åó„Å¶Âàá„ÇäÈõ¢„Åó„Å¶ËÄÉ„Åà„Çã„Åì„Å®„Åå„Åß„Åç„Åæ„Åôüëç„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ ü™£ „ÅÆË®≠Ë®à„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„ÉâÂàÜÂâ≤Êú¨Ë®ò‰∫ã„Åß„ÅØ„ÄÅ„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„Å®„Åó„Å¶AWS S3„Éê„Ç±„ÉÉ„Éà„Çí‰ΩøÁî®„Åô„Çã„Åì„Å®„ÇíÊÉ≥ÂÆö„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆÂàÜÂâ≤„ÅØ„ÄÅtfstate„Éï„Ç°„Ç§„É´ÂàÜÂâ≤„Å´Âü∫„Å•„ÅÑ„Å¶Ë®≠Ë®à„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇÁï∞„Å™„Çã„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„Å´tfstate„Éï„Ç°„Ç§„É´„Çí„Åä„ÅÑ„ÅüÊñπ„Åå„Çà„ÅÑÂ†¥Âêà„Å´„Å§„ÅÑ„Å¶„ÅØ„ÄÅÂàÜÂâ≤„Éë„Çø„Éº„É≥ „ÅßË™¨Êòé„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇü™£ foo-bucket/‚îÇ‚îî‚îÄ‚îÄ terraform.tfstate # foo„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ü™£ bar-bucket/‚îÇ‚îî‚îÄ‚îÄ terraform.tfstate # bar„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê„ÇÇ„Åó„ÄÅ„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„Çítfstate„Éï„Ç°„Ç§„É´ÂàÜÂâ≤„Å´Âü∫„Å•„ÅÑ„Å¶ÂàÜÂâ≤„Åó„Å™„Åã„Å£„Åü„Å®„Åó„Åæ„Åô„ÄÇ„Åù„ÅÆÂ†¥Âêà„ÅØ„ÄÅ‰ª£„Çè„Çä„Å´„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„ÉâÂÜÖ„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê„Çítfstate„Éï„Ç°„Ç§„É´ÂàÜÂâ≤„Å´Âü∫„Å•„ÅÑ„Å¶Ë®≠Ë®à„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇü™£ bucket/‚îú‚îÄ‚îÄ üìÇ foo/‚îÇ    ‚îî‚îÄ‚îÄ terraform.tfstate # foo„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§‚îÇ‚îî‚îÄ‚îÄ üìÇ bar/      ‚îî‚îÄ‚îÄ terraform.tfstate # bar„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§05. Áä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇ„ÅÆÂÆöÁæ©ÊñπÊ≥ïterraform_remote_state„Éñ„É≠„ÉÉ„ÇØ„ÅÆÂ†¥Âêàterraform_remote_state„Éñ„É≠„ÉÉ„ÇØ„Å´„Çà„Çã‰æùÂ≠òterraform_remote_state„Éñ„É≠„ÉÉ„ÇØ„Å´„ÅØ„ÄÅ‰ª•‰∏ã„ÅÆ„É°„É™„Éá„É°„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ „Ç¢„Éº„Ç≠„ÉÜ„ÇØ„ÉÅ„É£ÁâπÊÄß  „É°„É™„ÉÉ„Éà ‚≠ïÔ∏è                                                                        „Éá„É°„É™„ÉÉ„Éà √ó                                                                                                                                                      ÂèØË™≠ÊÄß                 -                                                                                  terraform_remote_state„Éñ„É≠„ÉÉ„ÇØ„Å´Âä†„Åà„Å¶output„Éñ„É≠„ÉÉ„ÇØ„ÇÇÂÆüË£Ö„ÅåÂøÖË¶Å„Åß„ÅÇ„Çä„ÄÅoutput„Éñ„É≠„ÉÉ„ÇØ„ÅØ‰æùÂ≠òÂÖà„ÅÆAWS„É™„ÇΩ„Éº„Çπ„Åå‰∏ÄË¶ã„Åó„Å¶„Çè„Åã„Çä„Å´„Åè„ÅÑ„ÄÇ                             Êã°ÂºµÊÄß                 ‰æùÂ≠òÂÖà„ÅÆAWS„É™„ÇΩ„Éº„Çπ„Å´Èñ¢„Çè„Çâ„Åö„ÄÅÂêå„Åòterraform_remote_state„Éñ„É≠„ÉÉ„ÇØ„Çí‰Ωø„ÅÑÂõû„Åõ„Çã„ÄÇ  -                                                                                                                                                                     ‰øùÂÆàÊÄß                 -                                                                                  ‰æùÂ≠òÂÖà„Å®‰æùÂ≠òÂÖÉ„ÅÆÈñì„ÅßTerraform„ÅÆ„Éê„Éº„Ç∏„Éß„É≥„Å´Â∑Æ„Åå„ÅÇ„Çä„Åô„Åé„Çã„Å®„ÄÅtfstate„Éï„Ç°„Ç§„É´Èñì„Åß‰∫íÊèõÊÄß„Åå„Å™„Åè„Å™„Çä„ÄÅterraform_remote_state„Éñ„É≠„ÉÉ„ÇØ„ÅÆÂá¶ÁêÜ„ÅåÂ§±Êïó„Åô„Çã„ÄÇ Êú¨Ë®ò‰∫ã„Åß„ÅØ„ÄÅ terraform_remote_state „Éñ„É≠„ÉÉ„ÇØ„Çí‰ΩøÁî®„Åó„Å¶„ÄÅÁä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇ„ÇíÂÆöÁæ© „Åó„Å¶„ÅÑ„Åç„Åæ„Åô„ÄÇtfstate„Éï„Ç°„Ç§„É´„Åå‰ªñ„ÅÆtfstate„Éï„Ç°„Ç§„É´„Å´‰æùÂ≠ò„Åô„ÇãÊñπÊ≥ï„Å®„Åó„Å¶„ÄÅÂæåËø∞„ÅÆAWS„É™„ÇΩ„Éº„ÇπÂà•data„Éñ„É≠„ÉÉ„ÇØ„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇThe terraform_remote_state Data Source | Terraform | HashiCorp DeveloperÁä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥‰æã„Åà„Å∞„ÄÅAWS„É™„ÇΩ„Éº„Çπ„Åã„Çâ„Å™„Çã„Éó„É≠„ÉÄ„ÇØ„Éà„Çí„ÅÑ„Åè„Å§„Åã„ÅÆtfstate„Éï„Ç°„Ç§„É´ (foo-tfstate„ÄÅbar-tfstate) „Å´ÂàÜÂâ≤„Åó„Åü„Å®‰ªÆÂÆö„Åó„Åæ„Åô„ÄÇ„Åì„Åì„Åß‰ªÆÂÆö„Åó„ÅüÁä∂Ê≥Å„Åß„ÅØ„ÄÅbar-tfstate„Éï„Ç°„Ç§„É´„ÅØVPC„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å£„Å¶„Åä„Çä„ÄÅ foo-tfstate „Éï„Ç°„Ç§„É´„ÅØ bar-tfstate „Éï„Ç°„Ç§„É´„Å´‰æùÂ≠ò„Åó„Å¶„ÅÑ„Çã„Å®„Åó„Åæ„Åô„ÄÇ„Åù„ÅÆ„Åü„ÇÅ„ÄÅÊÉ≥ÂÆö„Åï„Çå„ÇãÁä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Å´„Å™„Çä„Åæ„Åô„ÄÇ„Å™„Åä„ÄÅ‰æùÂ≠òÊñπÂêë„ÅØÁä∂Ê≥Å„Å´„Çà„Å£„Å¶Áï∞„Å™„Çã„Åì„Å®„Çí„ÅîÂÆπËµ¶„Åè„Å†„Åï„ÅÑ„ÄÇ---title: terraform_remote_state„Éñ„É≠„ÉÉ„ÇØ„Çí‰ΩøÁî®„Åó„Åü‰æùÂ≠òÈñ¢‰øÇ---%%{init:{'theme':'default'}}%%flowchart TD    subgraph bucket        foo[\"foo-tfstate\"]        bar[\"bar-tfstate\"]    end    foo -. VPC„ÅÆÁä∂ÊÖã„Å´‰æùÂ≠ò .-\u003e bar„É™„Éù„Ç∏„Éà„É™„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàêtfstate„Éï„Ç°„Ç§„É´ÂàÜÂâ≤„Å´Âü∫„Å•„ÅÑ„Å¶„ÄÅ„É™„Éù„Ç∏„Éà„É™„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‰æã„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Å´„Å™„Çä„Åæ„Åô„ÄÇ„Éá„Ç£„É¨„ÇØ„Éà„É™„ÅÆË®≠Ë®àÊñπÊ≥ï„ÅØ„ÄÅÂàÜÂâ≤„Éë„Çø„Éº„É≥ „ÅßË™¨Êòé„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇüê± repository/‚îú‚îÄ‚îÄ üìÇ foo/‚îÇ    ‚îú‚îÄ‚îÄ backend.tf # foo„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ‚îú‚îÄ‚îÄ remote_state.tf # terraform_remote_state„Éñ„É≠„ÉÉ„ÇØ„Çí‰ΩøÁî®„Åó„ÄÅbar-tfstate „Éï„Ç°„Ç§„É´„Å´‰æùÂ≠ò„Åô„Çã‚îÇ    ‚îú‚îÄ‚îÄ provider.tf‚îÇ    ...‚îÇ‚îî‚îÄ‚îÄ üìÇ bar/      ‚îú‚îÄ‚îÄ backend.tf # bar„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã      ‚îú‚îÄ‚îÄ output.tf # ‰ªñ„ÅÆ tfstate „Éï„Ç°„Ç§„É´„Åã„Çâ‰æùÂ≠ò„Åï„Çå„Çã      ‚îú‚îÄ‚îÄ provider.tf      ...foo-tfstate„Éï„Ç°„Ç§„É´„Ååbar-tfstate„Éï„Ç°„Ç§„É´„Å´‰æùÂ≠ò„Åô„Çã„Åü„ÇÅ„Å´ÂøÖË¶Å„Å™ÂÆüË£Ö„ÅØ„ÄÅ‰ª•‰∏ã„ÅÆÈÄö„Çä„Å´„Å™„Çä„Åæ„Åô„ÄÇresource \"example\" \"foo\" {  # foo„É™„ÇΩ„Éº„Çπ„ÅØ„ÄÅbar-tfstate „Éï„Ç°„Ç§„É´„ÅÆVPC„Å´‰æùÂ≠ò„Åô„Çã  vpc_id = data.terraform_remote_state.bar.outputs.bar_vpc_id  ...}data \"terraform_remote_state\" \"bar\" { backend = \"s3\"  config = {    bucket = \"tfstate\"    key    = \"bar/terraform.tfstate\"    region = \"ap-northeast-1\"  }}# VPC„ÅÆÁä∂ÊÖã„ÅØ„ÄÅbar-tfstate „Éï„Ç°„Ç§„É´„ÅßÊåÅ„Å§output \"bar_vpc_id\" {  value = aws_vpc.bar.id}resource \"aws_vpc\" \"bar\" {  ...}„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàêtfstate„Éï„Ç°„Ç§„É´ÂàÜÂâ≤„Å´Âü∫„Å•„ÅÑ„Å¶„ÄÅ„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„ÉâÂÜÖ„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‰æã„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Å´„Å™„Çä„Åæ„Åô„ÄÇü™£ bucket/‚îú‚îÄ‚îÄ üìÇ foo‚îÇ    ‚îî‚îÄ‚îÄ terraform.tfstate # foo„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§‚îÇ‚îî‚îÄ‚îÄ üìÇ bar      ‚îî‚îÄ‚îÄ terraform.tfstate # bar„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§AWS„É™„ÇΩ„Éº„ÇπÂà•data„Éñ„É≠„ÉÉ„ÇØ„ÅÆÂ†¥ÂêàAWS„É™„ÇΩ„Éº„ÇπÂà•data„Éñ„É≠„ÉÉ„ÇØ„Å´„Çà„Çã‰æùÂ≠òAWS„É™„ÇΩ„Éº„ÇπÂà•data„Éñ„É≠„ÉÉ„ÇØ„Å´„ÅØ„ÄÅ‰ª•‰∏ã„ÅÆ„É°„É™„Éá„É°„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ „Ç¢„Éº„Ç≠„ÉÜ„ÇØ„ÉÅ„É£ÁâπÊÄß  „É°„É™„ÉÉ„Éà ‚≠ïÔ∏è                                                                                                                                     „Éá„É°„É™„ÉÉ„Éà √ó                                                 ÂèØË™≠ÊÄß                 ‰æùÂ≠òÂÖà„ÅÆAWS„É™„ÇΩ„Éº„Çπ„Åå„Çè„Åã„Çä„ÇÑ„Åô„ÅÑ„ÄÇ                                                                                                             -                                                                Êã°ÂºµÊÄß                 -                                                                                                                                               ‰æùÂ≠òÂÖà„ÅÆAWS„É™„ÇΩ„Éº„ÇπÂà•data„Éñ„É≠„ÉÉ„ÇØ„ÅåÂøÖË¶Å„Åß„ÅÇ„Çã„ÄÇ                ‰øùÂÆàÊÄß                 ‰æùÂ≠òÂÖà„Å®‰æùÂ≠òÂÖÉ„ÅÆÈñì„ÅßTerraform„ÅÆ„Éê„Éº„Ç∏„Éß„É≥„Å´Â∑Æ„Åå„ÅÇ„Å£„Å¶„ÇÇ„ÄÅtfstate„Éï„Ç°„Ç§„É´Èñì„ÅßÁõ¥Êé•ÁöÑ„Å´‰æùÂ≠ò„Åô„Çã„Çè„Åë„Åß„ÅØ„Å™„ÅÑ„Åü„ÇÅ„ÄÅ„Éê„Éº„Ç∏„Éß„É≥Â∑Æ„ÅÆÂΩ±Èüø„ÇíÂèó„Åë„Å™„ÅÑ„ÄÇ  -                                                 ‰ªäÂõû„ÅØ‰ΩøÁî®„Åó„Åæ„Åõ„Çì„Åå„ÄÅ‰æùÂ≠òÈñ¢‰øÇ„ÅÆ‰ªñ„ÅÆÂÆöÁæ©ÊñπÊ≥ï„Å®„Åó„Å¶„ÄÅAWS„É™„ÇΩ„Éº„ÇπÂà•data„Éñ„É≠„ÉÉ„ÇØ„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ„Åì„Çå„ÅØ„ÄÅtfstate„Éï„Ç°„Ç§„É´„ÅåËá™Ë∫´‰ª•Â§ñ (‰æãÔºö„Ç≥„É≥„ÇΩ„Éº„É´ÁîªÈù¢„ÄÅ‰ªñ„ÅÆtfstate„Éï„Ç°„Ç§„É´) „Åß‰ΩúÊàê„Åï„Çå„ÅüAWS„É™„ÇΩ„Éº„Çπ„ÅÆÁä∂ÊÖã„Å´‰æùÂ≠ò„Åô„Çã„Åü„ÇÅ„Å´‰ΩøÁî®„Åß„Åç„Åæ„Åô„ÄÇterraform_remote_state„Éñ„É≠„ÉÉ„ÇØ„Å®„ÅØÁï∞„Å™„Çä„ÄÅÁõ¥Êé•ÁöÑ„Å´„ÅØtfstate„Éï„Ç°„Ç§„É´„Å´‰æùÂ≠ò„Åó„Åæ„Åõ„Çì„ÄÇAWS„É™„ÇΩ„Éº„ÇπÂà•data„Éñ„É≠„ÉÉ„ÇØ„ÅÆÂ†¥Âêà„ÅØ„ÄÅÂÆüÈöõ„ÅÆAWS„É™„ÇΩ„Éº„Çπ„ÅÆÁä∂ÊÖã„Å´‰æùÂ≠ò„Åô„Çã„Åì„Å®„Å´„Çà„Çä„ÄÅÈñìÊé•ÁöÑ„Å´AWS„É™„ÇΩ„Éº„Çπ„ÅÆtfstate„Éï„Ç°„Ç§„É´„Å´‰æùÂ≠ò„Åô„Çã„Åì„Å®„Å´„Å™„Çä„Åæ„Åô„ÄÇData Sources - Configuration Language | Terraform | HashiCorp DeveloperÁä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥‰æã„Åà„Å∞„ÄÅAWS„É™„ÇΩ„Éº„ÇπÂà•data„Éñ„É≠„ÉÉ„ÇØ„ÇÇÂêåÊßò„Å´„Åó„Å¶„ÄÅAWS„É™„ÇΩ„Éº„Çπ„Åã„Çâ„Å™„Çã„Éó„É≠„ÉÄ„ÇØ„Éà„Çí„ÅÑ„Åè„Å§„Åã„ÅÆtfstate„Éï„Ç°„Ç§„É´ (foo-tfstate„ÄÅbar-tfstate) „Å´ÂàÜÂâ≤„Åó„Åü„Å®‰ªÆÂÆö„Åó„Åæ„Åô„ÄÇ„Åì„Åì„Åß‰ªÆÂÆö„Åó„ÅüÁä∂Ê≥Å„Åß„ÅØ„ÄÅbar-tfstate„Éï„Ç°„Ç§„É´„ÅØVPC„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å£„Å¶„Åä„Çä„ÄÅ foo-tfstate „Éï„Ç°„Ç§„É´„ÅØ bar-tfstate „Éï„Ç°„Ç§„É´„Å´‰æùÂ≠ò„Åó„Å¶„ÅÑ„Çã„Å®„Åó„Åæ„Åô„ÄÇÊÉ≥ÂÆö„Åï„Çå„ÇãÁä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Å´„Å™„Çä„Åæ„Åô„ÄÇ„Å™„Åä„ÄÅ‰æùÂ≠òÊñπÂêë„ÅØÁä∂Ê≥Å„Å´„Çà„Å£„Å¶Áï∞„Å™„Çã„Åì„Å®„Çí„ÅîÂÆπËµ¶„Åè„Å†„Åï„ÅÑ„ÄÇ---title: data„Éñ„É≠„ÉÉ„ÇØ„Çí‰ΩøÁî®„Åó„Åü‰æùÂ≠òÈñ¢‰øÇ---%%{init:{'theme':'default'}}%%flowchart TD    subgraph bucket        foo[\"foo-tfstate\"]        bar[\"bar-tfstate\"]    end    foo -. VPC„ÅÆÁä∂ÊÖã„Å´‰æùÂ≠ò .-\u003e bar„É™„Éù„Ç∏„Éà„É™„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê„ÅØ„ÄÅtfstate„Éï„Ç°„Ç§„É´ÂàÜÂâ≤„Å´Âü∫„Å•„ÅÑ„Å¶„ÄÅ‰ª•‰∏ã„ÅÆÈÄö„Çä„Å´„Å™„Çä„Åæ„Åô„ÄÇüê± repository/‚îú‚îÄ‚îÄ üìÇ foo/‚îÇ    ‚îú‚îÄ‚îÄ backend.tf # foo„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ‚îú‚îÄ‚îÄ data.tf # data„Éñ„É≠„ÉÉ„ÇØ„Çí‰ΩøÁî®„Åó„ÄÅbar-tfstate „Éï„Ç°„Ç§„É´„Å´‰æùÂ≠ò„Åô„Çã‚îÇ    ‚îú‚îÄ‚îÄ provider.tf‚îÇ    ...‚îÇ‚îî‚îÄ‚îÄ üìÇ bar/      ‚îú‚îÄ‚îÄ backend.tf # bar„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã      ‚îú‚îÄ‚îÄ provider.tf      ...foo-tfstate„Éï„Ç°„Ç§„É´„Ååbar-tfstate„Éï„Ç°„Ç§„É´„Å´‰æùÂ≠ò„Åô„Çã„Åü„ÇÅ„Å´ÂøÖË¶Å„Å™ÂÆüË£Ö„ÅØ„ÄÅ‰ª•‰∏ã„ÅÆÈÄö„Çä„Å´„Å™„Çä„Åæ„Åô„ÄÇ# foo„É™„ÇΩ„Éº„Çπ„ÅÆÁä∂ÊÖã„ÅØ„ÄÅfoo-tfstate „Éï„Ç°„Ç§„É´„ÅßÊåÅ„Å§resource \"example\" \"foo\" {  # foo„É™„ÇΩ„Éº„Çπ„ÅØ„ÄÅbar-tfstate „Éï„Ç°„Ç§„É´„ÅÆVPC„Å´‰æùÂ≠ò„Åô„Çã  vpc_id     = data.aws_vpc.bar.id}# VPC„ÅÆÁä∂ÊÖã„ÅØ„ÄÅbar-tfstate „Éï„Ç°„Ç§„É´„ÅßÊåÅ„Å§data \"aws_vpc\" \"bar\" {  filter {    name   = \"tag:Name\"    values = [\"\u003cbar-tfstate„ÅåÊåÅ„Å§VPC„ÅÆÂêçÂâç\u003e\"]  }}„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàêtfstate„Éï„Ç°„Ç§„É´ÂàÜÂâ≤„Å´Âü∫„Å•„ÅÑ„Å¶„ÄÅ„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„ÉâÂÜÖ„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‰æã„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Å´„Å™„Çä„Åæ„Åô„ÄÇü™£ bucket/‚îú‚îÄ‚îÄ üìÇ foo‚îÇ    ‚îî‚îÄ‚îÄ terraform.tfstate # foo„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§‚îÇ‚îî‚îÄ‚îÄ üìÇ bar      ‚îî‚îÄ‚îÄ terraform.tfstate # bar„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§06. tfstate „Éï„Ç°„Ç§„É´„ÅÆÂàÜÂâ≤„Éë„Çø„Éº„É≥„Ç™„Çπ„Çπ„É°„Å™Ë®≠Ë®à„ÅÆ‰∏ÄË¶ßÂâçËø∞„ÅÆÈÄö„Çä„ÄÅtfstate„Éï„Ç°„Ç§„É´„ÅÆÂàÜÂâ≤„ÅÆÂ¢ÉÁïå„ÅØ„ÄÅ„Äé‰ªñ„ÅÆÁä∂ÊÖã„Å´„Åß„Åç„Çã„Å†„Åë‰æùÂ≠ò„Åó„Å™„ÅÑ„É™„ÇΩ„Éº„Çπ„ÅÆÈñ¢‰øÇ„Äè„Åã„ÇâË¶ã„Å§„Åë„Çã„Åì„Å®„Åå„Åß„Åç„Åæ„Åô„ÄÇÂàÜÂâ≤„Åó„Åô„Åé„Çã„Å® terraform_remote_state„Éñ„É≠„ÉÉ„ÇØÂú∞ÁçÑ „Å´„Å™„Çã„Åü„ÇÅ„ÄÅÁ¥∞„Åã„Åô„Åé„ÅöÁ≤ó„Åô„Åé„Å™„ÅÑÈÅ©Âàá„Å™Â¢ÉÁïå„ÇíË¶ã„Å§„Åë„Å¶„ÅÑ„Åç„Åæ„Åó„Çá„ÅÜ„ÄÇ‰ªäÂõû„ÅØ„ÄÅÁßÅ„ÅåËÄÉ„Åà„ÇãÂàÜÂâ≤„Éë„Çø„Éº„É≥„Çí„ÅÑ„Åè„Å§„ÅãÁ¥π‰ªã„Åó„Åæ„Åô„ÄÇÂÖ®„Å¶„ÅåÂÆüÁî®ÁöÑ„Å™„Éë„Çø„Éº„É≥„Å®„ÅÑ„ÅÜ„Çè„Åë„Åß„Å™„ÅÑ„Åü„ÇÅ„ÄÅ„Ç™„Çπ„Çπ„É°„Åô„Çã„ÇÇ„ÅÆ„Çí ‚òÖ „Å®„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇÊé®Â•®„Éª‰ªªÊÑè    tfstateÂàÜÂâ≤„Éë„Çø„Éº„É≥Â§ßÂàÜÈ°û    tfstateÂàÜÂâ≤„Éë„Çø„Éº„É≥Â∞èÂàÜÈ°û„Ç™„Çπ„Çπ„É°    ÂØæÂøú„Åô„Çã„É™„Éù„Ç∏„Éà„É™ÊßãÊàê üê±    ÂØæÂøú„Åô„Çã„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„ÉâÊßãÊàê ü™£  Êé®Â•®    ‰∏äÂ±§    „Éó„É≠„Éê„Ç§„ÉÄ„Éº„ÅÆ„Ç¢„Ç´„Ç¶„É≥„ÉàÂà•    ‚òÖ‚òÖ‚òÖ    „É™„Éù„Ç∏„Éà„É™Ëá™‰Ωì„Åæ„Åü„ÅØ‰∏äÂ±§„Éá„Ç£„É¨„ÇØ„Éà„É™    „É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„ÉâËá™‰Ωì„Åæ„Åü„ÅØ‰∏äÂ±§„Éá„Ç£„É¨„ÇØ„Éà„É™  ‰∏ãÂ±§ÂÆüË°åÁí∞Â¢ÉÂà•    ‚òÖ‚òÖ‚òÖ    ‰∏ãÂ±§„Éá„Ç£„É¨„ÇØ„Éà„É™    ‰∏ãÂ±§„Éá„Ç£„É¨„ÇØ„Éà„É™  ‰ªªÊÑè    ‰∏≠ÈñìÂ±§    ÈÅãÁî®„ÉÅ„Éº„É†Ë≤¨ÂãôÁØÑÂõ≤Âà•    ‚òÖ‚òÖ    ‰∏≠ÈñìÂ±§„Éá„Ç£„É¨„ÇØ„Éà„É™    ‰∏≠ÈñìÂ±§„Éá„Ç£„É¨„ÇØ„Éà„É™  „Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆ„Çµ„Éñ„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÂà•    ‚òÖ‚òÖ  ÈÅãÁî®„ÉÅ„Éº„É†Ë≤¨ÂãôÁØÑÂõ≤Âà•√ó„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆ„Çµ„Éñ„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÂà•(ÁµÑ„ÅøÂêà„Çè„Åõ)    ‚òÖ  Âêå„Åò„ÉÜ„Éä„É≥„ÉàÂÜÖ„ÅÆ„Éó„É≠„ÉÄ„ÇØ„ÉàÂà•      AWS„É™„ÇΩ„Éº„Çπ„ÅÆÁ®ÆÈ°û„Ç∞„É´„Éº„ÉóÂà•      AWS„É™„ÇΩ„Éº„Çπ„ÅÆÁä∂ÊÖã„ÅÆÂ§âÊõ¥È†ªÂ∫¶„Ç∞„É´„Éº„ÉóÂà•      Â§ßÂàÜÈ°û (‰∏äÂ±§/‰∏ãÂ±§/‰∏≠ÈñìÂ±§) „Å®„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê„ÅÆÈñ¢‰øÇ„É™„Éù„Ç∏„Éà„É™„ÅÆÂ†¥ÂêàË®ò‰∫ãÂÜÖ„ÅÆ„Åì„Åì „Åß„ÄÅ„É™„Éù„Ç∏„Éà„É™ÂÜÖ„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê„ÅØtfstate„Éï„Ç°„Ç§„É´ÂàÜÂâ≤„Å´Âü∫„Å•„ÅÑ„Å¶Ë®≠Ë®à„Åô„Çã„Åπ„Åç„ÄÅ„Å®„ÅÑ„ÅÜË™¨Êòé„Çí„Åó„Åæ„Åó„Åü„ÄÇtfstate„Éï„Ç°„Ç§„É´„ÅÆÂàÜÂâ≤„Éë„Çø„Éº„É≥„ÅØ„ÄÅ‰∏äÂ±§/‰∏ãÂ±§/‰∏≠ÈñìÂ±§ „ÅÆÂ±§„Å´Â§ßÂà•„Åß„Åç„Åæ„Åô„ÄÇ„Åì„Çå„Çâ„ÅÆÂ±§„ÅØ„ÄÅ‰ª•‰∏ã„ÅÆÈÄö„Çä„É™„Éù„Ç∏„Éà„É™Ëá™‰Ωì„Éª„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê„ÅÆË®≠Ë®àÊñπÊ≥ï„Å´ÂΩ±Èüø„Åó„Åæ„Åô„ÄÇ# „É™„Éù„Ç∏„Éà„É™Ëá™‰Ωì„ÇíÂàÜÂâ≤„Åô„ÇãÂ†¥Âêàüê± ‰∏äÂ±§/‚îú‚îÄ‚îÄ üìÇ ‰∏≠ÈñìÂ±§/‚îÇ    ‚îú‚îÄ‚îÄ üìÇ ‰∏ãÂ±§/‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # ÂàÜÂâ≤„Åï„Çå„Åü tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ‚îÇ    ...‚îÇ    ‚îÇ...# „É™„Éù„Ç∏„Éà„É™ÂÜÖ„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™„ÇíÂàÜÂâ≤„Åô„ÇãÂ†¥Âêàüê± „É™„Éù„Ç∏„Éà„É™/‚îú‚îÄ‚îÄ üìÇ ‰∏äÂ±§/‚îÇ    ‚îú‚îÄ‚îÄ üìÇ ‰∏≠ÈñìÂ±§/‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ üìÇ ‰∏ãÂ±§/‚îÇ    ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # ÂàÜÂâ≤„Åï„Çå„Åü tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ‚îÇ    ‚îÇ    ...‚îÇ    ‚îÇ    ‚îÇ...„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆÂ†¥ÂêàË®ò‰∫ãÂÜÖ„ÅÆ„Åì„Åì „Åß„ÄÅ„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê„Å´„Å§„ÅÑ„Å¶„ÇÇË®ÄÂèä„Åó„Åæ„Åó„Åü„ÄÇ„Åì„Çå„Çâ„ÅÆÂ±§„ÅØ„ÄÅ‰ª•‰∏ã„ÅÆÈÄö„Çä„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„ÉâËá™‰Ωì„Éª„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê„ÅÆË®≠Ë®àÊñπÊ≥ï„Å´ÂΩ±Èüø„Åó„Åæ„Åô„ÄÇ# „É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„ÉâËá™‰Ωì„ÇíÂàÜÂâ≤„Åô„ÇãÂ†¥Âêàü™£ ‰∏äÂ±§/‚îú‚îÄ‚îÄ üìÇ ‰∏≠ÈñìÂ±§/‚îÇ    ‚îú‚îÄ‚îÄ üìÇ ‰∏ãÂ±§/‚îÇ    ‚îÇ    ‚îî‚îÄ‚îÄ terraform.tfstate # ÂàÜÂâ≤„Åï„Çå„ÅüÁä∂ÊÖã„ÇíÊåÅ„Å§‚îÇ    ‚îÇ‚îÇ    ‚îÇ...# „É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„ÉâÂÜÖ„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™„ÇíÂàÜÂâ≤„Åô„ÇãÂ†¥Âêàü™£ bucket/‚îú‚îÄ‚îÄ üìÇ ‰∏äÂ±§/‚îÇ    ‚îú‚îÄ‚îÄ üìÇ ‰∏≠ÈñìÂ±§/‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ üìÇ ‰∏ãÂ±§/‚îÇ    ‚îÇ    ‚îÇ    ‚îî‚îÄ‚îÄ terraform.tfstate # ÂàÜÂâ≤„Åï„Çå„ÅüÁä∂ÊÖã„ÇíÊåÅ„Å§‚îÇ    ‚îÇ    ‚îÇ‚îÇ    ‚îÇ    ‚îÇ...07. ‰∏äÂ±§„ÅÆÂàÜÂâ≤ (Êé®Â•®)‰∏äÂ±§„ÅÆÂàÜÂâ≤„Å´„Å§„ÅÑ„Å¶‰∏äÂ±§„ÅÆÂàÜÂâ≤„ÅØ Êé®Â•® „Åß„Åô„ÄÇTerraform„Å´Êê∫„Çè„ÇãÁÆ°ÁêÜËÄÖ„ÅÆÊï∞„ÅåÂ∞ë„Å™„Åè„Å¶„ÇÇÊé°Áî®„Åó„ÅüÊñπ„Åå„Çà„ÅÑ„Åß„Åô„ÄÇtfstate„Éï„Ç°„Ç§„É´„Çí„Éë„Çø„Éº„É≥„Å´Âøú„Åò„Å¶ÂàÜÂâ≤„Åó„ÄÅ„Åì„Çå„Å´Âü∫„Å•„ÅÑ„Å¶„Éá„Ç£„É¨„ÇØ„Éà„É™„Éª„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÇÇË®≠Ë®à„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇ„Éó„É≠„Éê„Ç§„ÉÄ„Éº„ÅÆ„Ç¢„Ç´„Ç¶„É≥„ÉàÂà• - ‚òÖ‚òÖ‚òÖ„Åì„ÅÆÂàÜÂâ≤ÊñπÊ≥ï„Å´„Å§„ÅÑ„Å¶‰∏äÂ±§ÂàÜÂâ≤„ÅÆ‰∏≠„Åß„ÇÇ„ÄÅÂü∫Êú¨ÁöÑ„Å™ÊñπÊ≥ï„ÅÆ1„Å§„Åß„Åô„ÄÇ„Éó„É≠„Éê„Ç§„ÉÄ„Éº„ÅÆ„Ç¢„Ç´„Ç¶„É≥„ÉàÂà•„Å´tfstate„Éï„Ç°„Ç§„É´„ÇíÂàÜÂâ≤„Åó„ÄÅ‰∏äÂ±§„ÇÇ„Åì„Çå„Å´Âü∫„Å•„ÅÑ„Å¶Ë®≠Ë®à„Åó„Åæ„Åô„ÄÇ„Åì„ÅÆÂàÜÂâ≤ÊñπÊ≥ï„Å´„Çà„Çä„ÄÅÂêÑ„Éó„É≠„Éê„Ç§„ÉÄ„Éº„ÅÆÁÆ°ÁêÜËÄÖ„Åå‰∫í„ÅÑ„Å´ÂΩ±Èüø„ÇíÂèó„Åë„Åö„Å´„ÄÅterraform„Ç≥„Éû„É≥„Éâ„ÅÆÁµêÊûú„ÇíÂæó„Çâ„Çå„Çã„Çà„ÅÜ„Å´„Å™„Çä„Åæ„Åô„ÄÇ‚ñ∂ „Åä„Åô„Åô„ÇÅÂ∫¶„Å´„Å§„ÅÑ„Å¶tfstate„Éï„Ç°„Ç§„É´„ÅßÁä∂ÊÖã„ÇíÁÆ°ÁêÜ„Åõ„Åñ„Çã„ÇíÂæó„Å™„ÅÑÂ†¥Âêà„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ‰æã„Åà„Å∞„ÄÅKubernetes„ÅÆ„Éó„É≠„Éê„Ç§„ÉÄ„Éº„ÅØ„ÄÅEKS„Å®Âêå„Åòtfstate„Éï„Ç°„Ç§„É´„ÅßÁÆ°ÁêÜ„Åó„ÅüÊñπ„Åå„Çà„ÅÑ„Åß„ÅôüëçTerraform Registry„Äê„Éó„É≠„Éê„Ç§„ÉÄ„Éº„Ç¢„Ç´„Ç¶„É≥„ÉàÂà•„ÄëÁä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥‰æã„Åà„Å∞„ÄÅ‰ª•‰∏ã„ÅÆ„Éó„É≠„Éê„Ç§„ÉÄ„Éº„Çí‰ΩøÁî®„Åó„Åü„ÅÑÁä∂Ê≥Å„Å®‰ªÆÂÆö„Åó„Åæ„Åô„ÄÇ‰∏ªË¶Å„Éó„É≠„Éê„Ç§„ÉÄ„Éº (AWS)„Ç¢„Éó„É™/„Ç§„É≥„Éï„É©Áõ£Ë¶ñ„Éó„É≠„Éê„Ç§„ÉÄ„Éº (Datadog)„Ç∏„Éß„ÉñÁõ£Ë¶ñ„Éó„É≠„Éê„Ç§„ÉÄ„Éº (Healthchecks)„Ç§„É≥„Ç∑„Éá„É≥„ÉàÁÆ°ÁêÜ„Éó„É≠„Éê„Ç§„ÉÄ„Éº (PagerDuty)„Åì„Åì„Åß‰ªÆÂÆö„Åó„ÅüÁä∂Ê≥Å„Åß„ÅØ„ÄÅÂêÑ„Éó„É≠„Éê„Ç§„ÉÄ„Éº„ÅÆ tfstate „Éï„Ç°„Ç§„É´Èñì„ÅßÁä∂ÊÖã„ÅåÁõ∏‰∫í„Å´‰æùÂ≠ò„Åó„Å¶„ÅÑ„Çã„Å®„Åó„Åæ„Åô„ÄÇAWS„É™„ÇΩ„Éº„ÇπÈñì„ÅÆÁõ∏‰∫í‰æùÂ≠ò„Åß„ÅØ„Å™„ÅÑ„Åü„ÇÅ„ÄÅÂæ™Áí∞ÂèÇÁÖß„ÅØËµ∑„Åì„Çä„Åæ„Åõ„Çì„ÄÇ„Åù„ÅÆ„Åü„ÇÅ„ÄÅÊÉ≥ÂÆö„Åï„Çå„ÇãÁä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Å´„Å™„Çä„Åæ„Åô„ÄÇ„Å™„Åä„ÄÅ‰æùÂ≠òÊñπÂêë„ÅØÁä∂Ê≥Å„Å´„Çà„Å£„Å¶Áï∞„Å™„Çã„Åì„Å®„Çí„ÅîÂÆπËµ¶„Åè„Å†„Åï„ÅÑ„ÄÇ---title: „Éó„É≠„Éê„Ç§„ÉÄ„Éº„ÅÆ„Ç¢„Ç´„Ç¶„É≥„ÉàÂà•---%%{init:{'theme':'default'}}%%flowchart LR    subgraph PagerDuty        pagerDuty[\"tfstate\"]    end    subgraph Healthchecks        healthchecks[\"tfstate\"]    end    subgraph Datadog        datadog[\"tfstate\"]    end    subgraph AWS        aws[\"tfstate\"]    end    aws -...-\u003e datadog    aws -...-\u003e healthchecks    aws -...-\u003e pagerDuty    datadog -...-\u003e aws    healthchecks -...-\u003e aws    pagerDuty -...-\u003e aws„Äê„Éó„É≠„Éê„Ç§„ÉÄ„Éº„Ç¢„Ç´„Ç¶„É≥„ÉàÂà•„Äë„É™„Éù„Ç∏„Éà„É™„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‚ñº Áï∞„Å™„Çã„É™„Éù„Ç∏„Éà„É™„ÅÆÂ†¥Âêà„Éó„É≠„Éê„Ç§„ÉÄ„Éº„Ç¢„Ç´„Ç¶„É≥„ÉàÂà•„Å´ÂàÜÂâ≤„Åó„Åütfstate„Éï„Ç°„Ç§„É´„Çí„ÄÅÁï∞„Å™„Çã„É™„Éù„Ç∏„Éà„É™„ÅßÁÆ°ÁêÜ„Åó„Åæ„Åô„ÄÇ‰æã„Åà„Å∞„ÄÅtfstate„Éï„Ç°„Ç§„É´ÂàÜÂâ≤„Å´Âü∫„Å•„ÅÑ„Å¶„ÄÅ„É™„Éù„Ç∏„Éà„É™„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‰æã„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Å´„Å™„Çä„Åæ„Åô„ÄÇÂâçËø∞„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥„ÅÆÁä∂Ê≥Å„Å®‰ªÆÂÆö„Åó„Åæ„Åô„ÄÇüê± aws-repository/‚îú‚îÄ‚îÄ backend.tf # AWS„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îú‚îÄ‚îÄ output.tf # ‰ªñ„ÅÆ tfstate „Éï„Ç°„Ç§„É´„Åã„Çâ‰æùÂ≠ò„Åï„Çå„Çã‚îú‚îÄ‚îÄ remote_state.tf # terraform_remote_state „Éñ„É≠„ÉÉ„ÇØ„Çí‰ΩøÁî®„Åô„Çã‚îú‚îÄ‚îÄ provider.tf...üê± datadog-repository/‚îú‚îÄ‚îÄ backend.tf # Datadog„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îú‚îÄ‚îÄ output.tf # ‰ªñ„ÅÆ tfstate „Éï„Ç°„Ç§„É´„Åã„Çâ‰æùÂ≠ò„Åï„Çå„Çã‚îú‚îÄ‚îÄ remote_state.tf # terraform_remote_state „Éñ„É≠„ÉÉ„ÇØ„Çí‰ΩøÁî®„Åô„Çã‚îú‚îÄ‚îÄ provider.tf...üê± healthchecks-repository/‚îú‚îÄ‚îÄ backend.tf # Healthchecks„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îú‚îÄ‚îÄ output.tf # ‰ªñ„ÅÆ tfstate „Éï„Ç°„Ç§„É´„Åã„Çâ‰æùÂ≠ò„Åï„Çå„Çã‚îú‚îÄ‚îÄ remote_state.tf # terraform_remote_state „Éñ„É≠„ÉÉ„ÇØ„Çí‰ΩøÁî®„Åô„Çã‚îú‚îÄ‚îÄ provider.tf...üê± pagerduty-repository/‚îú‚îÄ‚îÄ backend.tf # PagerDuty„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îú‚îÄ‚îÄ output.tf # ‰ªñ„ÅÆ tfstate „Éï„Ç°„Ç§„É´„Åã„Çâ‰æùÂ≠ò„Åï„Çå„Çã‚îú‚îÄ‚îÄ remote_state.tf # terraform_remote_state „Éñ„É≠„ÉÉ„ÇØ„Çí‰ΩøÁî®„Åô„Çã‚îú‚îÄ‚îÄ provider.tf...‚ñº Âêå„Åò„É™„Éù„Ç∏„Éà„É™„ÅÆÂ†¥Âêà„Éó„É≠„Éê„Ç§„ÉÄ„Éº„Ç¢„Ç´„Ç¶„É≥„ÉàÂà•„Å´ÂàÜÂâ≤„Åó„Åütfstate„Éï„Ç°„Ç§„É´„Çí„ÄÅÂêå„Åò„É™„Éù„Ç∏„Éà„É™„ÅßÁÆ°ÁêÜ„Åó„Åæ„Åô„ÄÇ‰æã„Åà„Å∞„ÄÅtfstate„Éï„Ç°„Ç§„É´ÂàÜÂâ≤„Å´Âü∫„Å•„ÅÑ„Å¶„ÄÅ„É™„Éù„Ç∏„Éà„É™„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‰æã„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Å´„Å™„Çä„Åæ„Åô„ÄÇÂâçËø∞„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥„ÅÆÁä∂Ê≥Å„Å®‰ªÆÂÆö„Åó„Åæ„Åô„ÄÇüê± repository/‚îú‚îÄ‚îÄ üìÇ aws/‚îÇ    ‚îú‚îÄ‚îÄ backend.tf # AWS„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ‚îú‚îÄ‚îÄ output.tf # ‰ªñ„ÅÆ tfstate „Éï„Ç°„Ç§„É´„Åã„Çâ‰æùÂ≠ò„Åï„Çå„Çã‚îÇ    ‚îú‚îÄ‚îÄ remote_state.tf # terraform_remote_state „Éñ„É≠„ÉÉ„ÇØ„Çí‰ΩøÁî®„Åô„Çã‚îÇ    ‚îú‚îÄ‚îÄ provider.tf‚îÇ    ...‚îÇ‚îú‚îÄ‚îÄ üìÇ datadog/‚îÇ    ‚îú‚îÄ‚îÄ backend.tf # Datadog„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ‚îú‚îÄ‚îÄ output.tf # ‰ªñ„ÅÆ tfstate „Éï„Ç°„Ç§„É´„Åã„Çâ‰æùÂ≠ò„Åï„Çå„Çã‚îÇ    ‚îú‚îÄ‚îÄ remote_state.tf # terraform_remote_state „Éñ„É≠„ÉÉ„ÇØ„Çí‰ΩøÁî®„Åô„Çã‚îÇ    ‚îú‚îÄ‚îÄ provider.tf‚îÇ    ...‚îÇ‚îú‚îÄ‚îÄ üìÇ healthchecks/‚îÇ    ‚îú‚îÄ‚îÄ backend.tf # Healthchecks„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ‚îú‚îÄ‚îÄ output.tf # ‰ªñ„ÅÆ tfstate „Éï„Ç°„Ç§„É´„Åã„Çâ‰æùÂ≠ò„Åï„Çå„Çã‚îÇ    ‚îú‚îÄ‚îÄ remote_state.tf # terraform_remote_state „Éñ„É≠„ÉÉ„ÇØ„Çí‰ΩøÁî®„Åô„Çã‚îÇ    ‚îú‚îÄ‚îÄ provider.tf‚îÇ    ...‚îÇ‚îî‚îÄ‚îÄ üìÇ pagerduty/      ‚îú‚îÄ‚îÄ backend.tf # PagerDuty„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã      ‚îú‚îÄ‚îÄ output.tf # ‰ªñ„ÅÆ tfstate „Éï„Ç°„Ç§„É´„Åã„Çâ‰æùÂ≠ò„Åï„Çå„Çã      ‚îú‚îÄ‚îÄ remote_state.tf # terraform_remote_state „Éñ„É≠„ÉÉ„ÇØ„Çí‰ΩøÁî®„Åô„Çã      ‚îú‚îÄ‚îÄ provider.tf      ...„Äê„Éó„É≠„Éê„Ç§„ÉÄ„Éº„Ç¢„Ç´„Ç¶„É≥„ÉàÂà•„Äë„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‚ñº Áï∞„Å™„Çã„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆÂ†¥Âêà„Éó„É≠„Éê„Ç§„ÉÄ„Éº„Ç¢„Ç´„Ç¶„É≥„ÉàÂà•„Å´ÂàÜÂâ≤„Åó„Åütfstate„Éï„Ç°„Ç§„É´„Çí„ÄÅÁï∞„Å™„Çã„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅßÁÆ°ÁêÜ„Åó„Åæ„Åô„ÄÇ‰æã„Åà„Å∞„ÄÅtfstate„Éï„Ç°„Ç§„É´ÂàÜÂâ≤„Å´Âü∫„Å•„ÅÑ„Å¶„ÄÅ„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„ÉâÂÜÖ„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‰æã„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Å´„Å™„Çä„Åæ„Åô„ÄÇÂâçËø∞„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥„ÅÆÁä∂Ê≥Å„Å®‰ªÆÂÆö„Åó„Åæ„Åô„ÄÇü™£ aws-bucket/‚îÇ‚îî‚îÄ‚îÄ terraform.tfstate # AWS„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ü™£ datadog-bucket/‚îÇ‚îî‚îÄ‚îÄ terraform.tfstate # Datadog„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ü™£ healthchecks-bucket/‚îÇ‚îî‚îÄ‚îÄ terraform.tfstate # Healthchecks„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ü™£ pagerduty-bucket/‚îÇ‚îî‚îÄ‚îÄ terraform.tfstate # PagerDuty„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§‚ñº Âêå„Åò„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆÂ†¥Âêà„Éó„É≠„Éê„Ç§„ÉÄ„Éº„Ç¢„Ç´„Ç¶„É≥„ÉàÂà•„Å´ÂàÜÂâ≤„Åó„Åütfstate„Éï„Ç°„Ç§„É´„Çí„ÄÅÂêå„Åò„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅßÁÆ°ÁêÜ„Åó„Åæ„Åô„ÄÇ‰æã„Åà„Å∞„ÄÅtfstate„Éï„Ç°„Ç§„É´ÂàÜÂâ≤„Å´Âü∫„Å•„ÅÑ„Å¶„ÄÅ„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„ÉâÂÜÖ„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‰æã„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Å´„Å™„Çä„Åæ„Åô„ÄÇÂâçËø∞„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥„ÅÆÁä∂Ê≥Å„Å®‰ªÆÂÆö„Åó„Åæ„Åô„ÄÇü™£ bucket/‚îú‚îÄ‚îÄ üìÇ aws‚îÇ    ‚îî‚îÄ‚îÄ terraform.tfstate # AWS„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§‚îÇ‚îú‚îÄ‚îÄ üìÇ datadog‚îÇ    ‚îî‚îÄ‚îÄ terraform.tfstate # Datadog„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§‚îÇ‚îú‚îÄ‚îÄ üìÇ healthchecks‚îÇ    ‚îî‚îÄ‚îÄ terraform.tfstate # Healthchecks„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§‚îÇ‚îî‚îÄ‚îÄ üìÇ pagerduty      ‚îî‚îÄ‚îÄ terraform.tfstate # PagerDuty„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§08. ‰∏ãÂ±§„ÅÆÂàÜÂâ≤ (Êé®Â•®)‰∏ãÂ±§„ÅÆÂàÜÂâ≤„Å´„Å§„ÅÑ„Å¶‰∏ãÂ±§„ÅÆÂàÜÂâ≤„ÅØ Êé®Â•® „Åß„Åô„ÄÇTerraform„Å´Êê∫„Çè„ÇãÁÆ°ÁêÜËÄÖ„ÅÆÊï∞„ÅåÂ∞ë„Å™„Åè„Å¶„ÇÇÊé°Áî®„Åó„ÅüÊñπ„Åå„Çà„ÅÑ„Åß„Åô„ÄÇtfstate„Éï„Ç°„Ç§„É´„Çí„Éë„Çø„Éº„É≥„Å´Âøú„Åò„Å¶ÂàÜÂâ≤„Åó„ÄÅ„Åì„Çå„Å´Âü∫„Å•„ÅÑ„Å¶„Éá„Ç£„É¨„ÇØ„Éà„É™„Éª„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÇÇË®≠Ë®à„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇÂÆüË°åÁí∞Â¢ÉÂà• - ‚òÖ‚òÖ‚òÖ„Åì„ÅÆÂàÜÂâ≤ÊñπÊ≥ï„Å´„Å§„ÅÑ„Å¶‰∏ãÂ±§ÂàÜÂâ≤„ÅÆ‰∏≠„Åß„ÇÇ„ÄÅÂü∫Êú¨ÁöÑ„Å™ÊñπÊ≥ï„ÅÆ1„Å§„Åß„Åô„ÄÇÂÆüË°åÁí∞Â¢ÉÂà•„Å´tfstate„Éï„Ç°„Ç§„É´„ÇíÂàÜÂâ≤„Åó„ÄÅ‰∏ãÂ±§„ÇÇ„Åì„Çå„Å´Âü∫„Å•„ÅÑ„Å¶Ë®≠Ë®à„Åó„Åæ„Åô„ÄÇ„Åì„ÅÆÂàÜÂâ≤ÊñπÊ≥ï„Å´„Çà„Çä„ÄÅÂêÑÂÆüË°åÁí∞Â¢É„ÅÆÁÆ°ÁêÜËÄÖ„Åå‰∫í„ÅÑ„Å´ÂΩ±Èüø„ÇíÂèó„Åë„Åö„Å´„ÄÅterraform„Ç≥„Éû„É≥„Éâ„ÅÆÁµêÊûú„ÇíÂæó„Çâ„Çå„Çã„Çà„ÅÜ„Å´„Å™„Çä„Åæ„Åô„ÄÇTerraform: Up and Running: Writing Infrastructure as CodeHow to manage Terraform state. A guide to file layout, isolation, and‚Ä¶ | by Yevgeniy Brikman | Gruntwork‚ñ∂ „Åä„Åô„Åô„ÇÅÂ∫¶„Å´„Å§„ÅÑ„Å¶„ÄêÂÆüË°åÁí∞Â¢ÉÂà•„ÄëÁä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥‰æã„Åà„Å∞„ÄÅ‰ª•‰∏ã„ÅÆÂÆüË°åÁí∞Â¢É„ÇíÊßãÁØâ„Åó„Åü„ÅÑÁä∂Ê≥Å„Å®‰ªÆÂÆö„Åó„Åæ„Åô„ÄÇTesÁí∞Â¢É (Ê§úË®ºÁí∞Â¢É)StgÁí∞Â¢É („É¶„Éº„Ç∂„ÉºÂèó„ÅëÂÖ•„ÇåÁí∞Â¢É)PrdÁí∞Â¢É (Êú¨Áï™Áí∞Â¢É)„Åã„Å§„ÄÅ‰ª•‰∏ã„ÅÆ„Éó„É≠„Éê„Ç§„ÉÄ„Éº„Çí‰ΩøÁî®„Åó„Åü„ÅÑÁä∂Ê≥Å„Å®‰ªÆÂÆö„Åó„Åæ„Åô„ÄÇ‰∏ªË¶Å„Éó„É≠„Éê„Ç§„ÉÄ„Éº (AWS)„Ç¢„Éó„É™/„Ç§„É≥„Éï„É©Áõ£Ë¶ñ„Éó„É≠„Éê„Ç§„ÉÄ„Éº (Datadog)„Ç∏„Éß„ÉñÁõ£Ë¶ñ„Éó„É≠„Éê„Ç§„ÉÄ„Éº (Healthchecks)„Ç§„É≥„Ç∑„Éá„É≥„ÉàÁÆ°ÁêÜ„Éó„É≠„Éê„Ç§„ÉÄ„Éº (PagerDuty)„Åì„Åì„Åß‰ªÆÂÆö„Åó„ÅüÁä∂Ê≥Å„Åß„ÅØ„ÄÅÂêÑÂÆüË°åÁí∞Â¢É„ÅÆ tfstate „Éï„Ç°„Ç§„É´„ÅØ‰ªñ„ÅÆÂÆüË°åÁí∞Â¢É„Å´„ÅØ‰æùÂ≠ò„Åó„Å¶„ÅÑ„Å™„ÅÑ„Å®„Åó„Åæ„Åô„ÄÇ„Åù„ÅÆ„Åü„ÇÅ„ÄÅÊÉ≥ÂÆö„Åï„Çå„ÇãÁä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Å´„Å™„Çä„Åæ„Åô„ÄÇ„Å™„Åä„ÄÅ‰æùÂ≠òÊñπÂêë„ÅØÁä∂Ê≥Å„Å´„Çà„Å£„Å¶Áï∞„Å™„Çã„Åì„Å®„Çí„ÅîÂÆπËµ¶„Åè„Å†„Åï„ÅÑ„ÄÇ---title: ÂÆüË°åÁí∞Â¢ÉÂà•---%%{init:{'theme':'default'}}%%flowchart LR    subgraph PagerDuty        pagerDuty[\"tfstate\"]    end    subgraph Healthchecks        healthchecks[\"tfstate\"]    end    subgraph Datadog        datadog[\"tfstate\"]    end    subgraph AWS        subgraph tes-bucket            tes[\"tfstate\"]        end        subgraph stg-bucket            stg[\"tfstate\"]        end        subgraph prd-bucket            prd[\"tfstate\"]        end    end    tes -...-\u003e datadog    tes -...-\u003e healthchecks    tes -...-\u003e pagerDuty    datadog -...-\u003e tes    healthchecks -...-\u003e tes    pagerDuty -...-\u003e tes„ÄêÂÆüË°åÁí∞Â¢ÉÂà•„Äë„É™„Éù„Ç∏„Éà„É™„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‚ñº Áï∞„Å™„Çã„É™„Éù„Ç∏„Éà„É™„ÅÆÂ†¥Âêà„Éó„É≠„Éê„Ç§„ÉÄ„Éº„Ç¢„Ç´„Ç¶„É≥„ÉàÂà•„Å´tfstate„Éï„Ç°„Ç§„É´„ÇíÂàÜÂâ≤„Åô„Çã„Åì„Å®„ÅØÊé®Â•®„Å®„Åó„Å¶„ÅÑ„Çã„Åü„ÇÅ„ÄÅ„Åù„ÅÆ‰∏ä„Åß„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê„ÇíËÄÉ„Åà„Åæ„Åô„ÄÇ‰æã„Åà„Å∞„ÄÅtfstate„Éï„Ç°„Ç§„É´ÂàÜÂâ≤„Å´Âü∫„Å•„ÅÑ„Å¶„ÄÅ„É™„Éù„Ç∏„Éà„É™„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‰æã„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Å´„Å™„Çä„Åæ„Åô„ÄÇÂâçËø∞„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥„ÅÆÁä∂Ê≥Å„Å®‰ªÆÂÆö„Åó„Åæ„Åô„ÄÇüê± aws-repository/‚îú‚îÄ‚îÄ output.tf # ‰ªñ„ÅÆ tfstate „Éï„Ç°„Ç§„É´„Åã„Çâ‰æùÂ≠ò„Åï„Çå„Çã‚îú‚îÄ‚îÄ remote_state.tf # terraform_remote_state „Éñ„É≠„ÉÉ„ÇØ„Çí‰ΩøÁî®„Åô„Çã‚îú‚îÄ‚îÄ provider.tf‚îú‚îÄ‚îÄ üìÇ tes/ # TesÁí∞Â¢É‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # TesÁí∞Â¢É„ÅÆAWS„É™„ÇΩ„Éº„Çπ„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ...‚îÇ‚îú‚îÄ‚îÄ üìÇ stg/ # StgÁí∞Â¢É‚îî‚îÄ‚îÄ üìÇ prd/ # PrdÁí∞Â¢Éüê± datadog-repository/‚îú‚îÄ‚îÄ output.tf # ‰ªñ„ÅÆ tfstate „Éï„Ç°„Ç§„É´„Åã„Çâ‰æùÂ≠ò„Åï„Çå„Çã‚îú‚îÄ‚îÄ remote_state.tf # terraform_remote_state „Éñ„É≠„ÉÉ„ÇØ„Çí‰ΩøÁî®„Åô„Çã‚îú‚îÄ‚îÄ provider.tf‚îú‚îÄ‚îÄ üìÇ tes/‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # TesÁí∞Â¢É„ÅÆDatadog„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ...‚îÇ‚îú‚îÄ‚îÄ üìÇ stg/‚îî‚îÄ‚îÄ üìÇ prd/üê± healthchecks-repository/‚îú‚îÄ‚îÄ output.tf # ‰ªñ„ÅÆ tfstate „Éï„Ç°„Ç§„É´„Åã„Çâ‰æùÂ≠ò„Åï„Çå„Çã‚îú‚îÄ‚îÄ remote_state.tf # terraform_remote_state „Éñ„É≠„ÉÉ„ÇØ„Çí‰ΩøÁî®„Åô„Çã‚îú‚îÄ‚îÄ provider.tf‚îú‚îÄ‚îÄ üìÇ tes/‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # Healthchecs„ÅÆTesÁí∞Â¢É„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ...‚îÇ‚îú‚îÄ‚îÄ üìÇ stg/‚îî‚îÄ‚îÄ üìÇ prd/üê± pagerduty-repository/‚îú‚îÄ‚îÄ output.tf # ‰ªñ„ÅÆ tfstate „Éï„Ç°„Ç§„É´„Åã„Çâ‰æùÂ≠ò„Åï„Çå„Çã‚îú‚îÄ‚îÄ remote_state.tf # terraform_remote_state „Éñ„É≠„ÉÉ„ÇØ„Çí‰ΩøÁî®„Åô„Çã‚îú‚îÄ‚îÄ provider.tf‚îú‚îÄ‚îÄ üìÇ tes/‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # TesÁí∞Â¢É„ÅÆPagerDuty„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ...‚îÇ‚îú‚îÄ‚îÄ üìÇ stg/‚îî‚îÄ‚îÄ üìÇ prd/‚ñº Âêå„Åò„É™„Éù„Ç∏„Éà„É™„ÅÆÂ†¥Âêà„Éó„É≠„Éê„Ç§„ÉÄ„Éº„Ç¢„Ç´„Ç¶„É≥„ÉàÂà•„Å´tfstate„Éï„Ç°„Ç§„É´„ÇíÂàÜÂâ≤„Åô„Çã„Åì„Å®„ÅØÊé®Â•®„Å®„Åó„Å¶„ÅÑ„Çã„Åü„ÇÅ„ÄÅ„Åù„ÅÆ‰∏ä„Åß„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê„ÇíËÄÉ„Åà„Åæ„Åô„ÄÇ‰æã„Åà„Å∞„ÄÅtfstate„Éï„Ç°„Ç§„É´ÂàÜÂâ≤„Å´Âü∫„Å•„ÅÑ„Å¶„ÄÅ„É™„Éù„Ç∏„Éà„É™„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‰æã„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Å´„Å™„Çä„Åæ„Åô„ÄÇÂâçËø∞„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥„ÅÆÁä∂Ê≥Å„Å®‰ªÆÂÆö„Åó„Åæ„Åô„ÄÇüê± repository/‚îú‚îÄ‚îÄ üìÇ aws/‚îÇ    ‚îú‚îÄ‚îÄ output.tf # ‰ªñ„ÅÆ tfstate „Éï„Ç°„Ç§„É´„Åã„Çâ‰æùÂ≠ò„Åï„Çå„Çã‚îÇ    ‚îú‚îÄ‚îÄ remote_state.tf # terraform_remote_state „Éñ„É≠„ÉÉ„ÇØ„Çí‰ΩøÁî®„Åô„Çã‚îÇ    ‚îú‚îÄ‚îÄ provider.tf‚îÇ    ‚îú‚îÄ‚îÄ üìÇ tes/ # TesÁí∞Â¢É‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # TesÁí∞Â¢É„ÅÆAWS„É™„ÇΩ„Éº„Çπ„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ‚îÇ    ...‚îÇ    ‚îÇ‚îÇ    ‚îú‚îÄ‚îÄ üìÇ stg/ # StgÁí∞Â¢É‚îÇ    ‚îî‚îÄ‚îÄ üìÇ prd/ # PrdÁí∞Â¢É‚îÇ‚îú‚îÄ‚îÄ üìÇ datadog/‚îÇ    ‚îú‚îÄ‚îÄ output.tf # ‰ªñ„ÅÆ tfstate „Éï„Ç°„Ç§„É´„Åã„Çâ‰æùÂ≠ò„Åï„Çå„Çã‚îÇ    ‚îú‚îÄ‚îÄ remote_state.tf # terraform_remote_state „Éñ„É≠„ÉÉ„ÇØ„Çí‰ΩøÁî®„Åô„Çã‚îÇ    ‚îú‚îÄ‚îÄ provider.tf‚îÇ    ‚îú‚îÄ‚îÄ üìÇ tes/‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # TesÁí∞Â¢É„ÅÆDatadog„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ‚îÇ    ...‚îÇ    ‚îÇ‚îÇ    ‚îú‚îÄ‚îÄ üìÇ stg/‚îÇ    ‚îî‚îÄ‚îÄ üìÇ prd/‚îÇ‚îú‚îÄ‚îÄ üìÇ healthchecks/‚îÇ    ‚îú‚îÄ‚îÄ output.tf # ‰ªñ„ÅÆ tfstate „Éï„Ç°„Ç§„É´„Åã„Çâ‰æùÂ≠ò„Åï„Çå„Çã‚îÇ    ‚îú‚îÄ‚îÄ remote_state.tf # terraform_remote_state „Éñ„É≠„ÉÉ„ÇØ„Çí‰ΩøÁî®„Åô„Çã‚îÇ    ‚îú‚îÄ‚îÄ provider.tf‚îÇ    ‚îú‚îÄ‚îÄ üìÇ tes/‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # TesÁí∞Â¢É„ÅÆHealthchecks„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ‚îÇ    ...‚îÇ    ‚îÇ‚îÇ    ‚îú‚îÄ‚îÄ üìÇ stg/‚îÇ    ‚îî‚îÄ‚îÄ üìÇ prd/‚îÇ‚îî‚îÄ‚îÄ üìÇ pagerduty/      ‚îú‚îÄ‚îÄ output.tf # ‰ªñ„ÅÆ tfstate „Éï„Ç°„Ç§„É´„Åã„Çâ‰æùÂ≠ò„Åï„Çå„Çã      ‚îú‚îÄ‚îÄ remote_state.tf # terraform_remote_state „Éñ„É≠„ÉÉ„ÇØ„Çí‰ΩøÁî®„Åô„Çã      ‚îú‚îÄ‚îÄ provider.tf      ‚îú‚îÄ‚îÄ üìÇ tes/      ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # TesÁí∞Â¢É„ÅÆPagerDuty„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã      ‚îÇ    ...      ‚îÇ      ‚îú‚îÄ‚îÄ üìÇ stg/      ‚îî‚îÄ‚îÄ üìÇ prd/„ÄêÂÆüË°åÁí∞Â¢ÉÂà•„Äë„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‚ñº Áï∞„Å™„Çã„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆÂ†¥ÂêàÂÆüË°åÁí∞Â¢ÉÂà•„Å´ÂàÜÂâ≤„Åó„Åütfstate„Éï„Ç°„Ç§„É´„Çí„ÄÅÁï∞„Å™„Çã„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅßÁÆ°ÁêÜ„Åó„Åæ„Åô„ÄÇtfstate„Éï„Ç°„Ç§„É´ÂàÜÂâ≤„Å´Âü∫„Å•„ÅÑ„Å¶„ÄÅ„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„ÉâÂÜÖ„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‰æã„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Å´„Å™„Çä„Åæ„Åô„ÄÇ‰æã„Åà„Å∞„ÄÅÂâçËø∞„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥„ÅÆÁä∂Ê≥Å„Å®‰ªÆÂÆö„Åó„Åæ„Åô„ÄÇü™£ tes-aws-bucket/‚îÇ‚îî‚îÄ‚îÄ terraform.tfstate # TesÁí∞Â¢É„ÅÆAWS„É™„ÇΩ„Éº„Çπ„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ü™£ tes-datadog-bucket/‚îÇ‚îî‚îÄ‚îÄ terraform.tfstate # TesÁí∞Â¢É„ÅÆDatadog„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ü™£ tes-healthchecks-bucket/‚îÇ‚îî‚îÄ‚îÄ terraform.tfstate # TesÁí∞Â¢É„ÅÆHealthchecks„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ü™£ tes-pagerduty-bucket/‚îÇ‚îî‚îÄ‚îÄ terraform.tfstate # TesÁí∞Â¢É„ÅÆPagerDuty„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§‚ñº Âêå„Åò„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ x AWS„Ç¢„Ç´„Ç¶„É≥„ÉàÂà•„Å´Áï∞„Å™„ÇãÂÆüË°åÁí∞Â¢É „ÅÆÂ†¥Âêà„Éó„É≠„Éê„Ç§„ÉÄ„Éº„Ç¢„Ç´„Ç¶„É≥„ÉàÂà•„Å´ÂàÜÂâ≤„Åó„Åütfstate„Éï„Ç°„Ç§„É´„Çí„ÄÅÂêå„Åò„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅßÁÆ°ÁêÜ„Åó„Åæ„Åô„ÄÇ„Åæ„Åü„ÄÅAWS„Ç¢„Ç´„Ç¶„É≥„ÉàÂà•„Å´Áï∞„Å™„ÇãÂÆüË°åÁí∞Â¢É„Çí‰ΩúÊàê„Åó„Å¶„ÅÑ„Çã„Å®‰ªÆÂÆö„Åó„Åæ„Åô„ÄÇ‰æã„Åà„Å∞„ÄÅtfstate„Éï„Ç°„Ç§„É´ÂàÜÂâ≤„Å´Âü∫„Å•„ÅÑ„Å¶„ÄÅ„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„ÉâÂÜÖ„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‰æã„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Å´„Å™„Çä„Åæ„Åô„ÄÇÂâçËø∞„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥„ÅÆÁä∂Ê≥Å„Å®‰ªÆÂÆö„Åó„Åæ„Åô„ÄÇ# TesÁí∞Â¢É„ÅÆÁä∂ÊÖã„ÅÆ„Åø„ÇíÁÆ°ÁêÜ„Åô„Çã„Éê„Ç±„ÉÉ„Éàü™£ tes-bucket/‚îú‚îÄ‚îÄ üìÇ aws/‚îÇ    ‚îî‚îÄ‚îÄ terraform.tfstate # TesÁí∞Â¢É„ÅÆAWS„É™„ÇΩ„Éº„Çπ„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§‚îÇ‚îú‚îÄ‚îÄ üìÇ datadog/‚îÇ    ‚îî‚îÄ‚îÄ terraform.tfstate # TesÁí∞Â¢É„ÅÆDatadog„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§‚îÇ‚îú‚îÄ‚îÄ üìÇ healthchecks/‚îÇ    ‚îî‚îÄ‚îÄ terraform.tfstate # TesÁí∞Â¢É„ÅÆHealthchecks„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§‚îÇ‚îî‚îÄ‚îÄ üìÇ pagerduty/      ‚îî‚îÄ‚îÄ terraform.tfstate # TesÁí∞Â¢É„ÅÆPagerDuty„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§# StgÁí∞Â¢É„ÅÆÁä∂ÊÖã„ÅÆ„Åø„ÇíÁÆ°ÁêÜ„Åô„Çã„Éê„Ç±„ÉÉ„Éàü™£ stg-bucket/‚îÇ...# PrdÁí∞Â¢É„ÅÆÁä∂ÊÖã„ÅÆ„Åø„ÇíÁÆ°ÁêÜ„Åô„Çã„Éê„Ç±„ÉÉ„Éàü™£ prd-bucket/‚îÇ...‚ñº Âêå„Åò„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ x Âçò‰∏Ä„ÅÆAWS„Ç¢„Ç´„Ç¶„É≥„ÉàÂÜÖ„Å´ÂÖ®„Å¶„ÅÆÂÆüË°åÁí∞Â¢É „ÅÆÂ†¥Âêà„Éó„É≠„Éê„Ç§„ÉÄ„Éº„Ç¢„Ç´„Ç¶„É≥„ÉàÂà•„Å´ÂàÜÂâ≤„Åó„Åütfstate„Éï„Ç°„Ç§„É´„Çí„ÄÅÂêå„Åò„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅßÁÆ°ÁêÜ„Åó„Åæ„Åô„ÄÇ„Åæ„Åü„ÄÅÂçò‰∏Ä„ÅÆAWS„Ç¢„Ç´„Ç¶„É≥„ÉàÂÜÖ„Å´ÂÖ®ÂÆüË°åÁí∞Â¢É„Çí‰ΩúÊàê„Åó„Å¶„ÅÑ„Çã„Å®„Åó„Åæ„Åô„ÄÇ‰æã„Åà„Å∞„ÄÅtfstate„Éï„Ç°„Ç§„É´ÂàÜÂâ≤„Å´Âü∫„Å•„ÅÑ„Å¶„ÄÅ„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„ÉâÂÜÖ„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‰æã„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Å´„Å™„Çä„Åæ„Åô„ÄÇÂâçËø∞„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥„ÅÆÁä∂Ê≥Å„Å®‰ªÆÂÆö„Åó„Åæ„Åô„ÄÇü™£ bucket/‚îú‚îÄ‚îÄ üìÇ aws/‚îÇ    ‚îú‚îÄ‚îÄ üìÇ tes/ # TesÁí∞Â¢É‚îÇ    ‚îÇ    ‚îî‚îÄ‚îÄ terraform.tfstate # TesÁí∞Â¢É„ÅÆAWS„É™„ÇΩ„Éº„Çπ„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§‚îÇ    ‚îÇ‚îÇ    ‚îú‚îÄ‚îÄ üìÇ stg/ # StgÁí∞Â¢É‚îÇ    ‚îî‚îÄ‚îÄ üìÇ prd/ # PrdÁí∞Â¢É‚îÇ‚îú‚îÄ‚îÄ üìÇ datadog/‚îÇ    ‚îú‚îÄ‚îÄ üìÇ tes/‚îÇ    ‚îÇ    ‚îî‚îÄ‚îÄ terraform.tfstate # TesÁí∞Â¢É„ÅÆDatadog„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§‚îÇ    ‚îÇ‚îÇ    ‚îú‚îÄ‚îÄ üìÇ stg/‚îÇ    ‚îî‚îÄ‚îÄ üìÇ prd/‚îÇ‚îú‚îÄ‚îÄ üìÇ healthchecks/‚îÇ    ‚îú‚îÄ‚îÄ üìÇ tes/‚îÇ    ‚îÇ    ‚îî‚îÄ‚îÄ terraform.tfstate # TesÁí∞Â¢É„ÅÆHealthchecks„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§‚îÇ    ‚îÇ‚îÇ    ‚îú‚îÄ‚îÄ üìÇ stg/‚îÇ    ‚îî‚îÄ‚îÄ üìÇ prd/‚îÇ‚îî‚îÄ‚îÄ üìÇ pagerduty/      ‚îú‚îÄ‚îÄ üìÇ tes/      ‚îÇ    ‚îî‚îÄ‚îÄ terraform.tfstate # TesÁí∞Â¢É„ÅÆPagerDuty„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§      ‚îÇ      ‚îú‚îÄ‚îÄ üìÇ stg/      ‚îî‚îÄ‚îÄ üìÇ prd/09. ‰∏≠ÈñìÂ±§„ÅÆÂàÜÂâ≤ (‰ªªÊÑè)‰∏≠ÈñìÂ±§„ÅÆÂàÜÂâ≤„Å´„Å§„ÅÑ„Å¶‰∏≠ÈñìÂ±§„ÅÆÂàÜÂâ≤„ÅØ ‰ªªÊÑè „Åß„Åô„ÄÇTerraform„Å´Êê∫„Çè„ÇãÁÆ°ÁêÜËÄÖ„ÅåÂ§ö„Åè„Å™„Çã„Åª„Å©„ÄÅÂäπÂäõ„ÇíÁô∫ÊèÆ„Åó„Åæ„Åô„ÄÇÈÅãÁî®„ÉÅ„Éº„É†Ë≤¨ÂãôÁØÑÂõ≤Âà• - ‚òÖ‚òÖ„Åì„ÅÆÂàÜÂâ≤ÊñπÊ≥ï„Å´„Å§„ÅÑ„Å¶ÈÅãÁî®„ÉÅ„Éº„É† (‰æãÔºö„Ç¢„Éó„É™„ÉÅ„Éº„É†„ÄÅ„Ç§„É≥„Éï„É©„ÉÅ„Éº„É†) „ÅÆAWS„É™„ÇΩ„Éº„Çπ„ÅÆË≤¨ÂãôÁØÑÂõ≤Âà•„Åßtfstate„Éï„Ç°„Ç§„É´„ÇíÂàÜÂâ≤„Åó„ÄÅ‰∏≠ÈñìÂ±§„ÇÇ„Åì„Çå„Å´Âü∫„Å•„ÅÑ„Å¶Ë®≠Ë®à„Åó„Åæ„Åô„ÄÇ„Åì„ÅÆÂàÜÂâ≤ÊñπÊ≥ï„Å´„Çà„Çä„ÄÅÂêÑÈÅãÁî®„ÉÅ„Éº„É†„Åå‰∫í„ÅÑ„Å´ÂΩ±Èüø„ÇíÂèó„Åë„Åö„Å´„ÄÅterraform„Ç≥„Éû„É≥„Éâ„ÅÆÁµêÊûú„ÇíÂæó„Çâ„Çå„Çã„Çà„ÅÜ„Å´„Å™„Çä„Åæ„Åô„ÄÇAWS CloudFormation best practices - AWS CloudFormationTerraform in Action (English Edition)‚ñ∂ „Åä„Åô„Åô„ÇÅÂ∫¶„Å´„Å§„ÅÑ„Å¶„Äê„ÉÅ„Éº„É†Âà•„ÄëÁä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥‰æã„Åà„Å∞„ÄÅ‰ª•‰∏ã„ÅÆÈÅãÁî®„ÉÅ„Éº„É†„Å´ÂàÜÂâ≤„Åó„ÅüÁä∂Ê≥Å„Å®‰ªÆÂÆö„Åó„Åæ„Åô„ÄÇfrontend„ÉÅ„Éº„É† („Ç¢„Éó„É™„ÅÆ„Éï„É≠„É≥„Éà„Ç®„É≥„ÉâÈ†òÂüüÊãÖÂΩì)backend„ÉÅ„Éº„É† („Ç¢„Éó„É™„ÅÆ„Éê„ÉÉ„ÇØ„Ç®„É≥„ÉâÈ†òÂüüÊãÖÂΩì)sre„ÉÅ„Éº„É† („Ç§„É≥„Éï„É©È†òÂüüÊãÖÂΩì)„Åì„Åì„Åß‰ªÆÂÆö„Åó„ÅüÁä∂Ê≥Å„Åß„ÅØ„ÄÅÂêÑ„ÉÅ„Éº„É†„ÅåÁÆ°ÁêÜ„Åô„Çã tfstate „Éï„Ç°„Ç§„É´Èñì„ÅßÁä∂ÊÖã„ÅåÁõ∏‰∫í„Å´‰æùÂ≠ò„Åó„Å¶„ÅÑ„Çã„Å®„Åó„Åæ„Åô„ÄÇAWS„É™„ÇΩ„Éº„ÇπÈñì„ÅÆÁõ∏‰∫í‰æùÂ≠ò„Åß„ÅØ„Å™„ÅÑ„Åü„ÇÅ„ÄÅÂæ™Áí∞ÂèÇÁÖß„ÅØËµ∑„Åì„Çä„Åæ„Åõ„Çì„ÄÇ„Åù„ÅÆ„Åü„ÇÅ„ÄÅÊÉ≥ÂÆö„Åï„Çå„ÇãÁä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Å´„Å™„Çä„Åæ„Åô„ÄÇ„Å™„Åä„ÄÅ‰æùÂ≠òÊñπÂêë„ÅØÁä∂Ê≥Å„Å´„Çà„Å£„Å¶Áï∞„Å™„Çã„Åì„Å®„Çí„ÅîÂÆπËµ¶„Åè„Å†„Åï„ÅÑ„ÄÇ---title: ÈÅãÁî®„ÉÅ„Éº„É†Ë≤¨ÂãôÁØÑÂõ≤Âà•---%%{init:{'theme':'default'}}%%flowchart TB    subgraph AWS        subgraph tes-bucket            frontend[\"frontend-team-tfstate\u003cbr\u003e(CloudFront, S3, „Å™„Å©)\"]            backend[\"backend-team-tfstate\u003cbr\u003e(API Gateway, ElastiCache, RDS, SES, SNS, „Å™„Å©)\"]            sre[\"sre-team-tfstate\u003cbr\u003e(ALB, CloudWatch, EC2, ECS, EKS, IAM, VPC, „Å™„Å©)\"]            frontend-..-\u003esre            backend-..-\u003esre            sre-..-\u003efrontend            sre-..-\u003ebackend        end    subgraph stg-bucket        stg[\"tfstate\"]    end    subgraph prd-bucket        prd[\"tfstate\"]    end    end„Äê„ÉÅ„Éº„É†Âà•„Äë„É™„Éù„Ç∏„Éà„É™„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‚ñº Áï∞„Å™„Çã„É™„Éù„Ç∏„Éà„É™„ÅÆÂ†¥Âêà„Åì„ÅÆÂ†¥Âêà„Åß„ÅØ„ÄÅÈÅãÁî®„ÉÅ„Éº„É†Ë≤¨ÂãôÁØÑÂõ≤Âà•„Å´ÂàÜÂâ≤„Åó„Åütfstate„Éï„Ç°„Ç§„É´„Çí„ÄÅÂêå„Åò„É™„Éù„Ç∏„Éà„É™„ÅßÁÆ°ÁêÜ„Åó„Åæ„Åô„ÄÇ‰æã„Åà„Å∞„ÄÅtfstate„Éï„Ç°„Ç§„É´ÂàÜÂâ≤„Å´Âü∫„Å•„ÅÑ„Å¶„ÄÅ„É™„Éù„Ç∏„Éà„É™„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‰æã„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Å´„Å™„Çä„Åæ„Åô„ÄÇ„Åì„ÅÆ‰æã„Åß„ÅØ„ÄÅÁä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥„Å®Âêå„ÅòÁä∂Ê≥Å„Çí‰ªÆÂÆö„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇüê± aws-frontend-team-repository/ # frontend„ÉÅ„Éº„É†‚îú‚îÄ‚îÄ output.tf # ‰ªñ„ÅÆ tfstate „Éï„Ç°„Ç§„É´„Åã„Çâ‰æùÂ≠ò„Åï„Çå„Çã‚îú‚îÄ‚îÄ provider.tf‚îú‚îÄ‚îÄ remote_state.tf # terraform_remote_state „Éñ„É≠„ÉÉ„ÇØ„Çí‰ΩøÁî®„Åô„Çã‚îú‚îÄ‚îÄ cloudfront.tf‚îú‚îÄ‚îÄ s3.tf‚îú‚îÄ‚îÄ üìÇ tes/ # TesÁí∞Â¢É‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # frontend„ÉÅ„Éº„É†„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ...‚îÇ‚îú‚îÄ‚îÄ üìÇ stg/ # StgÁí∞Â¢É‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # frontend„ÉÅ„Éº„É†„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ...‚îÇ‚îî‚îÄ‚îÄ üìÇ prd/ # PrdÁí∞Â¢É      ‚îú‚îÄ‚îÄ backend.tfvars # frontend„ÉÅ„Éº„É†„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã      ...üê± aws-backend-team-repository/ # backend„ÉÅ„Éº„É†‚îú‚îÄ‚îÄ output.tf # ‰ªñ„ÅÆ tfstate „Éï„Ç°„Ç§„É´„Åã„Çâ‰æùÂ≠ò„Åï„Çå„Çã‚îú‚îÄ‚îÄ provider.tf‚îú‚îÄ‚îÄ remote_state.tf # terraform_remote_state „Éñ„É≠„ÉÉ„ÇØ„Çí‰ΩøÁî®„Åô„Çã‚îú‚îÄ‚îÄ elasticache.tf‚îú‚îÄ‚îÄ ses.tf‚îú‚îÄ‚îÄ sns.tf‚îú‚îÄ‚îÄ rds.tf‚îú‚îÄ‚îÄ üìÇ tes‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # backend„ÉÅ„Éº„É†„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ...‚îÇ‚îú‚îÄ‚îÄ üìÇ stg‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # backend„ÉÅ„Éº„É†„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ...‚îÇ‚îî‚îÄ‚îÄ üìÇ prd      ‚îú‚îÄ‚îÄ backend.tfvars # backend„ÉÅ„Éº„É†„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã       ...üê± aws-sre-team-repository/ # sre„ÉÅ„Éº„É†‚îú‚îÄ‚îÄ output.tf # ‰ªñ„ÅÆ tfstate „Éï„Ç°„Ç§„É´„Åã„Çâ‰æùÂ≠ò„Åï„Çå„Çã‚îú‚îÄ‚îÄ provider.tf‚îú‚îÄ‚îÄ remote_state.tf # terraform_remote_state „Éñ„É≠„ÉÉ„ÇØ„Çí‰ΩøÁî®„Åô„Çã‚îú‚îÄ‚îÄ alb.tf‚îú‚îÄ‚îÄ cloudwatch.tf‚îú‚îÄ‚îÄ ec2.tf‚îú‚îÄ‚îÄ ecs.tf‚îú‚îÄ‚îÄ eks.tf‚îú‚îÄ‚îÄ iam.tf‚îú‚îÄ‚îÄ vpc.tf‚îú‚îÄ‚îÄ üìÇ tes‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # sre„ÉÅ„Éº„É†„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ...‚îÇ‚îú‚îÄ‚îÄ üìÇ stg‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # sre„ÉÅ„Éº„É†„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ...‚îÇ‚îî‚îÄ‚îÄ üìÇ prd      ‚îú‚îÄ‚îÄ backend.tfvars # sre„ÉÅ„Éº„É†„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã      ...‚ñº Âêå„Åò„É™„Éù„Ç∏„Éà„É™„ÅÆÂ†¥Âêà„Åì„ÅÆÂ†¥Âêà„Åß„ÅØ„ÄÅÈÅãÁî®„ÉÅ„Éº„É†Ë≤¨ÂãôÁØÑÂõ≤Âà•„Å´ÂàÜÂâ≤„Åó„Åütfstate„Éï„Ç°„Ç§„É´„Çí„ÄÅÁï∞„Å™„Çã„É™„Éù„Ç∏„Éà„É™„ÅßÁÆ°ÁêÜ„Åó„Åæ„Åô„ÄÇ‰æã„Åà„Å∞„ÄÅtfstate„Éï„Ç°„Ç§„É´ÂàÜÂâ≤„Å´Âü∫„Å•„ÅÑ„Å¶„ÄÅ„É™„Éù„Ç∏„Éà„É™„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‰æã„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Å´„Å™„Çä„Åæ„Åô„ÄÇ„Åì„ÅÆ‰æã„Åß„ÅØ„ÄÅÁä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥„Å®Âêå„ÅòÁä∂Ê≥Å„Çí‰ªÆÂÆö„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇüê± aws-repository/‚îú‚îÄ‚îÄ üìÇ frontend-team # frontend„ÉÅ„Éº„É†‚îÇ    ‚îú‚îÄ‚îÄ provider.tf‚îÇ    ‚îú‚îÄ‚îÄ output.tf # ‰ªñ„ÅÆ tfstate „Éï„Ç°„Ç§„É´„Åã„Çâ‰æùÂ≠ò„Åï„Çå„Çã‚îÇ    ‚îú‚îÄ‚îÄ remote_state.tf # terraform_remote_state „Éñ„É≠„ÉÉ„ÇØ„Çí‰ΩøÁî®„Åô„Çã‚îÇ    ‚îú‚îÄ‚îÄ cloudfront.tf‚îÇ    ‚îú‚îÄ‚îÄ s3.tf‚îÇ    ‚îú‚îÄ‚îÄ üìÇ tes/ # TesÁí∞Â¢É‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # frontend„ÉÅ„Éº„É†„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ‚îÇ    ...‚îÇ    ‚îÇ‚îÇ    ‚îú‚îÄ‚îÄ üìÇ stg/ # StgÁí∞Â¢É‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # frontend„ÉÅ„Éº„É†„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ‚îÇ    ...‚îÇ    ‚îÇ‚îÇ    ‚îî‚îÄ‚îÄ üìÇ prd/ # PrdÁí∞Â¢É‚îÇ          ‚îú‚îÄ‚îÄ backend.tfvars # frontend„ÉÅ„Éº„É†„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ          ...‚îÇ‚îú‚îÄ‚îÄ üìÇ backend-team # backend„ÉÅ„Éº„É†‚îÇ    ‚îú‚îÄ‚îÄ provider.tf‚îÇ    ‚îú‚îÄ‚îÄ output.tf # ‰ªñ„ÅÆ tfstate „Éï„Ç°„Ç§„É´„Åã„Çâ‰æùÂ≠ò„Åï„Çå„Çã‚îÇ    ‚îú‚îÄ‚îÄ remote_state.tf # terraform_remote_state „Éñ„É≠„ÉÉ„ÇØ„Çí‰ΩøÁî®„Åô„Çã‚îÇ    ‚îú‚îÄ‚îÄ elasticache.tf‚îÇ    ‚îú‚îÄ‚îÄ ses.tf‚îÇ    ‚îú‚îÄ‚îÄ sns.tf‚îÇ    ‚îú‚îÄ‚îÄ rds.tf‚îÇ    ‚îú‚îÄ‚îÄ üìÇ tes‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # backend„ÉÅ„Éº„É†„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ‚îÇ    ...‚îÇ    ‚îÇ‚îÇ    ‚îú‚îÄ‚îÄ üìÇ stg‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # backend„ÉÅ„Éº„É†„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ‚îÇ    ...‚îÇ    ‚îÇ‚îÇ    ‚îî‚îÄ‚îÄ üìÇ prd‚îÇ          ‚îú‚îÄ‚îÄ backend.tfvars # backend„ÉÅ„Éº„É†„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ          ...‚îÇ‚îî‚îÄ‚îÄ üìÇ sre-team # sre„ÉÅ„Éº„É†      ‚îú‚îÄ‚îÄ provider.tf      ‚îú‚îÄ‚îÄ output.tf # ‰ªñ„ÅÆ tfstate „Éï„Ç°„Ç§„É´„Åã„Çâ‰æùÂ≠ò„Åï„Çå„Çã      ‚îú‚îÄ‚îÄ remote_state.tf # terraform_remote_state „Éñ„É≠„ÉÉ„ÇØ„Çí‰ΩøÁî®„Åô„Çã      ‚îú‚îÄ‚îÄ alb.tf      ‚îú‚îÄ‚îÄ cloudwatch.tf      ‚îú‚îÄ‚îÄ ec2.tf      ‚îú‚îÄ‚îÄ ecs.tf      ‚îú‚îÄ‚îÄ eks.tf      ‚îú‚îÄ‚îÄ iam.tf      ‚îú‚îÄ‚îÄ vpc.tf      ‚îú‚îÄ‚îÄ üìÇ tes      ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # sre„ÉÅ„Éº„É†„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã      ‚îÇ    ...      ‚îÇ      ‚îú‚îÄ‚îÄ üìÇ stg      ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # sre„ÉÅ„Éº„É†„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã      ‚îÇ    ...      ‚îÇ      ‚îî‚îÄ‚îÄ üìÇ prd           ‚îú‚îÄ‚îÄ backend.tfvars # sre„ÉÅ„Éº„É†„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã           ...„Äê„ÉÅ„Éº„É†Âà•„Äë„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‚ñº Áï∞„Å™„Çã„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆÂ†¥ÂêàÈÅãÁî®„ÉÅ„Éº„É†Ë≤¨ÂãôÁØÑÂõ≤Âà•„ÅÆÂ†¥Âêà„ÄÅÁï∞„Å™„Çã„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅßÁÆ°ÁêÜ„Åô„Çã„Å®„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅåÂ¢ó„ÅàÈÅé„Åé„Å¶„Åó„Åæ„ÅÑ„Åæ„Åô„ÄÇ„Åù„ÅÆ„Åü„ÇÅ„ÄÅ„Åì„Çå„ÅØ„ÅäÂãß„ÇÅ„Åó„Åæ„Åõ„Çì„ÄÇ‚ñº Âêå„Åò„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆÂ†¥Âêà„Åì„ÅÆÂ†¥Âêà„Åß„ÅØ„ÄÅ„Éó„É≠„Éê„Ç§„ÉÄ„Éº„Ç¢„Ç´„Ç¶„É≥„ÉàÂà•„Å´ÂàÜÂâ≤„Åó„Åütfstate„Éï„Ç°„Ç§„É´„Çí„ÄÅÁï∞„Å™„Çã„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅßÁÆ°ÁêÜ„Åó„Åæ„Åô„ÄÇ‰æã„Åà„Å∞„ÄÅtfstate„Éï„Ç°„Ç§„É´ÂàÜÂâ≤„Å´Âü∫„Å•„ÅÑ„Å¶„ÄÅ„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„ÉâÂÜÖ„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‰æã„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Å´„Å™„Çä„Åæ„Åô„ÄÇ„Åì„ÅÆ‰æã„Åß„ÅØ„ÄÅÁä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥„Å®Âêå„ÅòÁä∂Ê≥Å„Çí‰ªÆÂÆö„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ# TesÁí∞Â¢É„ÅÆÁä∂ÊÖã„ÅÆ„Åø„ÇíÁÆ°ÁêÜ„Åô„Çã„Éê„Ç±„ÉÉ„Éàü™£ tes-bucket/‚îú‚îÄ‚îÄ üìÇ frontend-team‚îÇ    ‚îî‚îÄ‚îÄ terraform.tfstate # frontend„ÉÅ„Éº„É†„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§‚îÇ‚îú‚îÄ‚îÄ üìÇ backend-team‚îÇ    ‚îî‚îÄ‚îÄ terraform.tfstate # backend„ÉÅ„Éº„É†„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§‚îÇ‚îî‚îÄ‚îÄ üìÇ sre-team      ‚îî‚îÄ‚îÄ terraform.tfstate # sre„ÉÅ„Éº„É†„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§# StgÁí∞Â¢É„ÅÆÁä∂ÊÖã„ÅÆ„Åø„ÇíÁÆ°ÁêÜ„Åô„Çã„Éê„Ç±„ÉÉ„Éàü™£ stg-bucket/‚îÇ...# PrdÁí∞Â¢É„ÅÆÁä∂ÊÖã„ÅÆ„Åø„ÇíÁÆ°ÁêÜ„Åô„Çã„Éê„Ç±„ÉÉ„Éàü™£ prd-bucket/‚îÇ...„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆ„Çµ„Éñ„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÂà• - ‚òÖ‚òÖ„Åì„ÅÆÂàÜÂâ≤ÊñπÊ≥ï„Å´„Å§„ÅÑ„Å¶„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆ„Çµ„Éñ„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà (‰æãÔºö„Ç¢„Éó„É™„ÄÅ„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ„ÄÅË™çË®º/Ë™çÂèØ„ÄÅÁõ£Ë¶ñ„Å™„Å©) Âà•„Åßtfstate„Éï„Ç°„Ç§„É´„ÇíÂàÜÂâ≤„Åó„ÄÅ‰∏≠ÈñìÂ±§„ÇÇ„Åì„Çå„Å´Âü∫„Å•„ÅÑ„Å¶Ë®≠Ë®à„Åó„Åæ„Åô„ÄÇ„Åì„ÅÆÂàÜÂâ≤ÊñπÊ≥ï„Å´„Çà„Çä„ÄÅ„Çµ„Éñ„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁÆ°ÁêÜËÄÖ„Åå‰∫í„ÅÑ„Å´ÂΩ±Èüø„ÇíÂèó„Åë„Åö„Å´„ÄÅterraform„Ç≥„Éû„É≥„Éâ„ÅÆÁµêÊûú„ÇíÂæó„Çâ„Çå„Çã„Çà„ÅÜ„Å´„Å™„Çä„Åæ„Åô„ÄÇThings to Know Before Working With Terraform ‚Äì Part 1 | EndavaTerraform organization ‚Äî Part I : What if you split your components ? | by Amine Charot | Medium‚ñ∂ „Åä„Åô„Åô„ÇÅÂ∫¶„Å´„Å§„ÅÑ„Å¶terraform_remote_state„Éñ„É≠„ÉÉ„ÇØÂú∞ÁçÑ„Å´„Å™„Å£„Å¶„ÅÑ„Åè„Åü„ÇÅ„ÄÅÈÅ©Âàá„Å™Êï∞ (3„Äú5ÂÄã„Åè„Çâ„ÅÑ) „Å´„Åó„Å¶„Åä„Åè„Çà„ÅÜ„Å´Ê≥®ÊÑè„ÅåÂøÖË¶Å„Åß„Åô„ÄÇ„Åì„ÅÆÂàÜÂâ≤ÊñπÊ≥ï„ÅØ„ÄÅÂæåËø∞„ÅÆAWS„É™„ÇΩ„Éº„Çπ„ÅÆÁ®ÆÈ°û„Ç∞„É´„Éº„Éó„Å®„Åî„Å£„Å°„ÇÉ„Å´„Å™„Å£„Å¶„Åó„Åæ„ÅÜÂ†¥Âêà„Åå„ÅÇ„Çã„Åü„ÇÅ„ÄÅ„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆ„Çµ„Éñ„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„Å®„Åó„Å¶ÊÑèË≠òÁöÑ„Å´ÂàÜÂâ≤„Åï„Åõ„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åôüëç„Äê„Çµ„Éñ„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÂà•„ÄëÁä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥‰æã„Åà„Å∞„ÄÅ‰ª•‰∏ã„ÅÆ„Çµ„Éñ„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„Å´ÂàÜÂâ≤„Åó„ÅüÁä∂Ê≥Å„Å®‰ªÆÂÆö„Åó„Åæ„Åô„ÄÇapplication (Web3Â±§Á≥ª)auth (Ë™çË®º/Ë™çÂèØÁ≥ª)monitor (Áõ£Ë¶ñÁ≥ª)network („Éç„ÉÉ„Éà„ÉØ„Éº„ÇØÁ≥ª)„Åì„Åì„Åß‰ªÆÂÆö„Åó„ÅüÁä∂Ê≥Å„Åß„ÅØ„ÄÅÂêÑ„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆ tfstate „Éï„Ç°„Ç§„É´„ÅÆ‰æùÂ≠ò„ÅØ‰∏ÄÊñπÂêëÊúÄÁµÇÁöÑ„Å´„ÄÅnetwork„Çµ„Éñ„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÇÑauth„Çµ„Éñ„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆ tfstate „Éï„Ç°„Ç§„É´„Å´‰æùÂ≠ò„Åó„Å¶„ÅÑ„Çã„Å®„Åó„Åæ„Åô„ÄÇ„Åù„ÅÆ„Åü„ÇÅ„ÄÅÊÉ≥ÂÆö„Åï„Çå„ÇãÁä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Å´„Å™„Çä„Åæ„Åô„ÄÇ„Å™„Åä„ÄÅ‰æùÂ≠òÊñπÂêë„ÅØÁä∂Ê≥Å„Å´„Çà„Å£„Å¶Áï∞„Å™„Çã„Åì„Å®„Çí„ÅîÂÆπËµ¶„Åè„Å†„Åï„ÅÑ„ÄÇ---title: „Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆ„Çµ„Éñ„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÂà•---%%{init:{'theme':'default'}}%%flowchart TB    subgraph AWS        subgraph tes-bucket            application[\"application-tfstate\u003cbr\u003eWeb3Â±§„Å®Âë®Ëæ∫AWS„É™„ÇΩ„Éº„Çπ\u003cbr\u003e(ALB, APIGateway, CloudFront, EC2, ECS, EKS, RDS, S3, SNS, „Å™„Å©)\"]            auth[\"auth-tfstate\u003cbr\u003e(IAM„Å™„Å©)\"]            monitor[\"monitor-tfstate\u003cbr\u003e(CloudWatch, „Å™„Å©)\"]            network[\"network-tfstate\u003cbr\u003e(Route53, VPC, „Å™„Å©)\"]            application-..-\u003enetwork            application-..-\u003eauth            monitor-..-\u003eapplication        end        subgraph stg-bucket            stg[\"tfstate\"]        end        subgraph prd-bucket            prd[\"tfstate\"]        end        end„Äê„Çµ„Éñ„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÂà•„Äë„É™„Éù„Ç∏„Éà„É™„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‚ñº Áï∞„Å™„Çã„É™„Éù„Ç∏„Éà„É™„ÅÆÂ†¥Âêà„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆ„Çµ„Éñ„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÂà•„ÅÆÂàÜÂâ≤„Éë„Çø„Éº„É≥„ÅÆÂ†¥Âêà„ÄÅÁï∞„Å™„Çã„É™„Éù„Ç∏„Éà„É™„ÅßÁÆ°ÁêÜ„Åô„Çã„Å®„É™„Éù„Ç∏„Éà„É™„ÅåÂ¢ó„ÅàÈÅé„Åé„Å¶„Åó„Åæ„ÅÑ„Åæ„Åô„ÄÇ„Åù„ÅÆ„Åü„ÇÅ„ÄÅ„Åì„Çå„ÅØ„ÅäÂãß„ÇÅ„Åó„Åæ„Åõ„Çì„ÄÇ‚ñº Âêå„Åò„É™„Éù„Ç∏„Éà„É™„ÅÆÂ†¥Âêà„Åì„ÅÆÂ†¥Âêà„Åß„ÅØ„ÄÅ„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆ„Çµ„Éñ„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÂà•„Å´ÂàÜÂâ≤„Åó„Åütfstate„Éï„Ç°„Ç§„É´„Çí„ÄÅÂêå„Åò„É™„Éù„Ç∏„Éà„É™„ÅßÁÆ°ÁêÜ„Åó„Åæ„Åô„ÄÇ‰æã„Åà„Å∞„ÄÅtfstate„Éï„Ç°„Ç§„É´ÂàÜÂâ≤„Å´Âü∫„Å•„ÅÑ„Å¶„ÄÅ„É™„Éù„Ç∏„Éà„É™„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‰æã„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Å´„Å™„Çä„Åæ„Åô„ÄÇ„Åì„ÅÆ‰æã„Åß„ÅØ„ÄÅÁä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥„Å®Âêå„ÅòÁä∂Ê≥Å„Çí‰ªÆÂÆö„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇüê± aws-repository/‚îú‚îÄ‚îÄ üìÇ application/‚îÇ    ‚îú‚îÄ‚îÄ output.tf # ‰ªñ„ÅÆ tfstate „Éï„Ç°„Ç§„É´„Åã„Çâ‰æùÂ≠ò„Åï„Çå„Çã‚îÇ    ‚îú‚îÄ‚îÄ remote_state.tf # terraform_remote_state „Éñ„É≠„ÉÉ„ÇØ„Çí‰ΩøÁî®„Åô„Çã‚îÇ    ‚îú‚îÄ‚îÄ provider.tf‚îÇ    ‚îú‚îÄ‚îÄ alb.tf‚îÇ    ‚îú‚îÄ‚îÄ cloudfront.tf‚îÇ    ‚îú‚îÄ‚îÄ ec2.tf‚îÇ    ‚îú‚îÄ‚îÄ ecs.tf‚îÇ    ‚îú‚îÄ‚îÄ eks.tf‚îÇ    ‚îú‚îÄ‚îÄ ses.tf‚îÇ    ‚îú‚îÄ‚îÄ sns.tf‚îÇ    ‚îú‚îÄ‚îÄ üìÇ tes/ # TesÁí∞Â¢É‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # application„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ‚îÇ    ...‚îÇ    ‚îÇ‚îÇ    ‚îú‚îÄ‚îÄ üìÇ stg/ # StgÁí∞Â¢É‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # application„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ‚îÇ    ...‚îÇ    ‚îÇ‚îÇ    ‚îî‚îÄ‚îÄ üìÇ prd/ # PrdÁí∞Â¢É‚îÇ          ‚îú‚îÄ‚îÄ backend.tfvars # application„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ          ...‚îÇ‚îú‚îÄ‚îÄ üìÇ auth/‚îÇ    ‚îú‚îÄ‚îÄ provider.tf‚îÇ    ‚îú‚îÄ‚îÄ output.tf # ‰ªñ„ÅÆ tfstate „Éï„Ç°„Ç§„É´„Åã„Çâ‰æùÂ≠ò„Åï„Çå„Çã‚îÇ    ‚îú‚îÄ‚îÄ iam.tf‚îÇ    ‚îú‚îÄ‚îÄ üìÇ tes/ # TesÁí∞Â¢É‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # auth„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ‚îÇ    ...‚îÇ    ‚îÇ‚îÇ    ‚îú‚îÄ‚îÄ üìÇ stg/ # StgÁí∞Â¢É‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # auth„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ‚îÇ    ...‚îÇ    ‚îÇ‚îÇ    ‚îî‚îÄ‚îÄ üìÇ prd/ # PrdÁí∞Â¢É‚îÇ          ‚îú‚îÄ‚îÄ backend.tfvars # auth„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ          ...‚îÇ‚îú‚îÄ‚îÄ üìÇ monitor/‚îÇ    ‚îú‚îÄ‚îÄ provider.tf‚îÇ    ‚îú‚îÄ‚îÄ remote_state.tf # terraform_remote_state „Éñ„É≠„ÉÉ„ÇØ„Çí‰ΩøÁî®„Åô„Çã‚îÇ    ‚îú‚îÄ‚îÄ cloudwatch.tf‚îÇ    ‚îú‚îÄ‚îÄ üìÇ tes/ # TesÁí∞Â¢É‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # monitor„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ‚îÇ    ...‚îÇ    ‚îÇ‚îÇ    ‚îú‚îÄ‚îÄ üìÇ stg/ # StgÁí∞Â¢É‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # monitor„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ‚îÇ    ...‚îÇ    ‚îÇ‚îÇ    ‚îî‚îÄ‚îÄ üìÇ prd/ # PrdÁí∞Â¢É‚îÇ          ‚îú‚îÄ‚îÄ backend.tfvars # monitor„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ          ...‚îÇ‚îî‚îÄ‚îÄ üìÇ network      ‚îú‚îÄ‚îÄ provider.tf      ‚îú‚îÄ‚îÄ output.tf # ‰ªñ„ÅÆ tfstate „Éï„Ç°„Ç§„É´„Åã„Çâ‰æùÂ≠ò„Åï„Çå„Çã      ‚îú‚îÄ‚îÄ route53.tf      ‚îú‚îÄ‚îÄ vpc.tf      ‚îú‚îÄ‚îÄ üìÇ tes/ # TesÁí∞Â¢É      ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # network„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã      ‚îÇ    ...      ‚îÇ      ‚îú‚îÄ‚îÄ üìÇ stg/ # StgÁí∞Â¢É      ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # network„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã      ‚îÇ    ...      ‚îÇ      ‚îî‚îÄ‚îÄ üìÇ prd/ # PrdÁí∞Â¢É           ‚îú‚îÄ‚îÄ backend.tfvars # network„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã           ...„Äê„Çµ„Éñ„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÂà•„Äë„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‚ñº Áï∞„Å™„Çã„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆÂ†¥Âêà„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆ„Çµ„Éñ„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÂà•„ÅÆÂàÜÂâ≤„Éë„Çø„Éº„É≥„ÅÆÂ†¥Âêà„ÄÅÁï∞„Å™„Çã„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅßÁÆ°ÁêÜ„Åô„Çã„Å®„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅåÂ¢ó„ÅàÈÅé„Åé„Å¶„Åó„Åæ„ÅÑ„Åæ„Åô„ÄÇ„Åù„ÅÆ„Åü„ÇÅ„ÄÅ„Åì„Çå„ÅØ„ÅäÂãß„ÇÅ„Åó„Åæ„Åõ„Çì„ÄÇ‚ñº Âêå„Åò„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆÂ†¥Âêà„Åì„ÅÆÂ†¥Âêà„Åß„ÅØ„ÄÅ„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆ„Çµ„Éñ„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÂà•„Å´ÂàÜÂâ≤„Åó„Åütfstate„Éï„Ç°„Ç§„É´„Çí„ÄÅÁï∞„Å™„Çã„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅßÁÆ°ÁêÜ„Åó„Åæ„Åô„ÄÇ‰æã„Åà„Å∞„ÄÅtfstate„Éï„Ç°„Ç§„É´ÂàÜÂâ≤„Å´Âü∫„Å•„ÅÑ„Å¶„ÄÅ„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„ÉâÂÜÖ„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‰æã„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Å´„Å™„Çä„Åæ„Åô„ÄÇ„Åì„ÅÆ‰æã„Åß„ÅØ„ÄÅÁä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥„Å®Âêå„ÅòÁä∂Ê≥Å„Çí‰ªÆÂÆö„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ# TesÁí∞Â¢É„ÅÆÁä∂ÊÖã„ÅÆ„Åø„ÇíÁÆ°ÁêÜ„Åô„Çã„Éê„Ç±„ÉÉ„Éàü™£ tes-bucket/‚îú‚îÄ‚îÄ üìÇ application‚îÇ    ‚îî‚îÄ‚îÄ terraform.tfstate # application„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§‚îÇ‚îú‚îÄ‚îÄ üìÇ auth‚îÇ    ‚îî‚îÄ‚îÄ terraform.tfstate # auth„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§‚îÇ‚îú‚îÄ‚îÄ üìÇ monitor‚îÇ    ‚îî‚îÄ‚îÄ terraform.tfstate # monitor„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§‚îÇ‚îî‚îÄ‚îÄ üìÇ network      ‚îî‚îÄ‚îÄ terraform.tfstate # network„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§# StgÁí∞Â¢É„ÅÆÁä∂ÊÖã„ÅÆ„Åø„ÇíÁÆ°ÁêÜ„Åô„Çã„Éê„Ç±„ÉÉ„Éàü™£ stg-bucket/‚îÇ...# PrdÁí∞Â¢É„ÅÆÁä∂ÊÖã„ÅÆ„Åø„ÇíÁÆ°ÁêÜ„Åô„Çã„Éê„Ç±„ÉÉ„Éàü™£ prd-bucket/‚îÇ...ÈÅãÁî®„ÉÅ„Éº„É†Ë≤¨ÂãôÁØÑÂõ≤Âà• √ó „Éó„É≠„ÉÄ„ÇØ„Éà„Çµ„Éñ„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÂà• - ‚òÖ„Åì„ÅÆÂàÜÂâ≤ÊñπÊ≥ï„Å´„Å§„ÅÑ„Å¶ÈÅãÁî®„ÉÅ„Éº„É†Ë≤¨ÂãôÁØÑÂõ≤Âà•„Å®„Éó„É≠„ÉÄ„ÇØ„Éà„Çµ„Éñ„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÂà•„ÇíÁµÑ„ÅøÂêà„Çè„Åõ„Å¶tfstate„Éï„Ç°„Ç§„É´„ÇíÂàÜÂâ≤„Åó„ÄÅ‰∏≠ÈñìÂ±§„ÇÇ„Åì„Çå„Å´Âü∫„Å•„ÅÑ„Å¶Ë®≠Ë®à„Åó„Åæ„Åô„ÄÇ„Åì„ÅÆÂàÜÂâ≤ÊñπÊ≥ï„Å´„Çà„Çä„ÄÅÂêÑÈÅãÁî®„ÉÅ„Éº„É†ÂÜÖ„ÅÆ„Çµ„Éñ„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁÆ°ÁêÜËÄÖ„Åå‰∫í„ÅÑ„Å´ÂΩ±Èüø„ÇíÂèó„Åë„Åö„Å´„ÄÅterraform„Ç≥„Éû„É≥„Éâ„ÅÆÁµêÊûú„ÇíÂæó„Çâ„Çå„Çã„Çà„ÅÜ„Å´„Å™„Çä„Åæ„Åô„ÄÇ‚ñ∂ „Åä„Åô„Åô„ÇÅÂ∫¶„Å´„Å§„ÅÑ„Å¶„Äê„ÉÅ„Éº„É†Âà• √ó „Çµ„Éñ„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÂà•„ÄëÁä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥‰ª•‰∏ã„ÅÆÈÅãÁî®„ÉÅ„Éº„É†„Å´ÂàÜÂâ≤„Åó„ÅüÁä∂Ê≥Å„Å®‰ªÆÂÆö„Åó„Åæ„Åô„ÄÇ„Åæ„Åü„ÄÅÂêÑÈÅãÁî®„ÉÅ„Éº„É†„ÅßTerraform„ÇíÂ§âÊõ¥„Åß„Åç„ÇãÁÆ°ÁêÜËÄÖ„ÅåÁõ∏ÂΩìÊï∞„Åô„Çã„Åü„ÇÅ„ÄÅ„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆ„Çµ„Éñ„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÂà•„Å´„ÇÇÂàÜÂâ≤„Åó„Åü„Å®„Åó„Åæ„Åô„ÄÇfrontend„ÉÅ„Éº„É†applicationmonitorbackend„ÉÅ„Éº„É†applicationmonitorsre„ÉÅ„Éº„É†applicationauthmonitornetwork„Åì„Åì„Åß‰ªÆÂÆö„Åó„ÅüÁä∂Ê≥Å„Åß„ÅØ„ÄÅÂêÑ„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆtfstate„Éï„Ç°„Ç§„É´„ÅÆ‰æùÂ≠ò„ÅØ‰∏ÄÊñπÂêëÊúÄÁµÇÁöÑ„Å´„ÄÅsre„ÉÅ„Éº„É†„ÅÆÁÆ°ÁêÜ„Åô„Çã tfstate „Éï„Ç°„Ç§„É´„Å´‰æùÂ≠ò„Åó„Å¶„ÅÑ„Çã„Å®„Åó„Åæ„Åô„ÄÇ„Åù„ÅÆ„Åü„ÇÅ„ÄÅÊÉ≥ÂÆö„Åï„Çå„ÇãÁä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Å´„Å™„Çä„Åæ„Åô„ÄÇ„Å™„Åä„ÄÅ‰æùÂ≠òÊñπÂêë„ÅØÁä∂Ê≥Å„Å´„Çà„Å£„Å¶Áï∞„Å™„Çã„Åì„Å®„Çí„ÅîÂÆπËµ¶„Åè„Å†„Åï„ÅÑ„ÄÇ---title: ÈÅãÁî®„ÉÅ„Éº„É†Ë≤¨ÂãôÁØÑÂõ≤Âà• √ó „Éó„É≠„ÉÄ„ÇØ„Éà„Çµ„Éñ„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÂà•---%%{init:{'theme':'default'}}%%flowchart TB    subgraph AWS        subgraph tes-bucket            subgraph frontend-team               frontendApplication[\"application-tfstate\u003cbr\u003e(CloudFront, S3, „Å™„Å©)\"]               frontendMonitor[\"monitor-tfstate\u003cbr\u003e(CloudWatch, „Å™„Å©)\"]            end            subgraph backend-team                backendApplication[\"application-tfstate\u003cbr\u003e(API Gateway, ElastiCache, RDS, SES, SNS, „Å™„Å©)\"]                backendMonitor[\"monitor-tfstate\u003cbr\u003e(CloudWatch, „Å™„Å©)\"]            end            subgraph sre-team                sreApplication[\"application-tfstate\u003cbr\u003eWeb3Â±§„Å®Âë®Ëæ∫AWS„É™„ÇΩ„Éº„Çπ\u003cbr\u003e(ALB, EC2, ECS, EKS, SNS, „Å™„Å©)\"]                auth[\"auth-tfstate\u003cbr\u003e(IAM, „Å™„Å©)\"]                sreMonitor[\"monitor-tfstate\u003cbr\u003e(CloudWatch, „Å™„Å©)\"]                network[\"network-tfstate\u003cbr\u003e(Route53, VPC, „Å™„Å©)\"]            end            frontendApplication-...-\u003enetwork            sreApplication-...-\u003eauth            sreApplication-...-\u003enetwork            backendApplication-...-\u003eauth            backendApplication-...-\u003enetwork            frontendMonitor-...-\u003efrontendApplication            sreMonitor-...-\u003esreApplication            backendMonitor-...-\u003ebackendApplication        end    subgraph stg-bucket        stg[\"tfstate\"]    end    subgraph prd-bucket        prd[\"tfstate\"]    end    end„Äê„ÉÅ„Éº„É†Âà• √ó „Çµ„Éñ„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÂà•„Äë„É™„Éù„Ç∏„Éà„É™„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‚ñº Áï∞„Å™„Çã„É™„Éù„Ç∏„Éà„É™„ÅÆÂ†¥Âêà„Åì„ÅÆÂ†¥Âêà„Åß„ÅØ„ÄÅÈÅãÁî®„ÉÅ„Éº„É†Ë≤¨ÂãôÁØÑÂõ≤Âà•„Å®„Éó„É≠„ÉÄ„ÇØ„Éà„Çµ„Éñ„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÂà•„ÇíÁµÑ„ÅøÂêà„Çè„Åõ„Å¶ÂàÜÂâ≤„Åó„Åütfstate„Éï„Ç°„Ç§„É´„Çí„ÄÅÂêå„Åò„É™„Éù„Ç∏„Éà„É™„ÅßÁÆ°ÁêÜ„Åó„Åæ„Åô„ÄÇ‰æã„Åà„Å∞„ÄÅtfstate„Éï„Ç°„Ç§„É´ÂàÜÂâ≤„Å´Âü∫„Å•„ÅÑ„Å¶„ÄÅ„É™„Éù„Ç∏„Éà„É™„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‰æã„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Å´„Å™„Çä„Åæ„Åô„ÄÇ„Åì„ÅÆ‰æã„Åß„ÅØ„ÄÅÁä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥„Å®Âêå„ÅòÁä∂Ê≥Å„Çí‰ªÆÂÆö„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇüê± aws-frontend-team-repository/‚îú‚îÄ‚îÄ üìÇ application/‚îÇ    ‚îú‚îÄ‚îÄ provider.tf‚îÇ    ‚îú‚îÄ‚îÄ output.tf # ‰ªñ„ÅÆ tfstate „Éï„Ç°„Ç§„É´„Åã„Çâ‰æùÂ≠ò„Åï„Çå„Çã‚îÇ    ‚îú‚îÄ‚îÄ remote_state.tf # terraform_remote_state „Éñ„É≠„ÉÉ„ÇØ„Çí‰ΩøÁî®„Åô„Çã‚îÇ    ‚îú‚îÄ‚îÄ cloudfront.tf‚îÇ    ‚îú‚îÄ‚îÄ ses.tf‚îÇ    ‚îú‚îÄ‚îÄ üìÇ tes/ # TesÁí∞Â¢É‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # frontend„ÉÅ„Éº„É†„ÅåÁÆ°ÁêÜ„Åô„Çãapplication„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ‚îÇ    ...‚îÇ    ‚îÇ‚îÇ    ‚îú‚îÄ‚îÄ üìÇ stg/ # StgÁí∞Â¢É‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # frontend„ÉÅ„Éº„É†„ÅåÁÆ°ÁêÜ„Åô„Çãapplication„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ‚îÇ    ...‚îÇ    ‚îÇ‚îÇ    ‚îî‚îÄ‚îÄ üìÇ prd/ # PrdÁí∞Â¢É‚îÇ          ‚îú‚îÄ‚îÄ backend.tfvars # frontend„ÉÅ„Éº„É†„ÅåÁÆ°ÁêÜ„Åô„Çãapplication„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ          ...‚îÇ‚îî‚îÄ‚îÄ üìÇ monitor/      ‚îú‚îÄ‚îÄ provider.tf      ‚îú‚îÄ‚îÄ remote_state.tf # terraform_remote_state „Éñ„É≠„ÉÉ„ÇØ„Çí‰ΩøÁî®„Åô„Çã      ‚îú‚îÄ‚îÄ cloudwatch.tf      ‚îú‚îÄ‚îÄ üìÇ tes/ # TesÁí∞Â¢É      ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # frontend„ÉÅ„Éº„É†„ÅåÁÆ°ÁêÜ„Åô„Çãmonitor„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã      ‚îÇ    ...      ‚îÇ      ‚îú‚îÄ‚îÄ üìÇ stg/ # StgÁí∞Â¢É      ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # frontend„ÉÅ„Éº„É†„ÅåÁÆ°ÁêÜ„Åô„Çãmonitor„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã      ‚îÇ    ...      ‚îÇ      ‚îî‚îÄ‚îÄ üìÇ prd/ # PrdÁí∞Â¢É            ‚îú‚îÄ‚îÄ backend.tfvars # frontend„ÉÅ„Éº„É†„ÅåÁÆ°ÁêÜ„Åô„Çãmonitor„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã            ...üê± aws-backend-team-repository/‚îú‚îÄ‚îÄ üìÇ application/‚îÇ    ‚îú‚îÄ‚îÄ provider.tf‚îÇ    ‚îú‚îÄ‚îÄ output.tf # ‰ªñ„ÅÆ tfstate „Éï„Ç°„Ç§„É´„Åã„Çâ‰æùÂ≠ò„Åï„Çå„Çã‚îÇ    ‚îú‚îÄ‚îÄ remote_state.tf # terraform_remote_state „Éñ„É≠„ÉÉ„ÇØ„Çí‰ΩøÁî®„Åô„Çã‚îÇ    ‚îú‚îÄ‚îÄ api_gateway.tf‚îÇ    ‚îú‚îÄ‚îÄ elasticache.tf‚îÇ    ‚îú‚îÄ‚îÄ rds.tf‚îÇ    ‚îú‚îÄ‚îÄ ses.tf‚îÇ    ‚îú‚îÄ‚îÄ sns.tf‚îÇ    ‚îú‚îÄ‚îÄ üìÇ tes/ # TesÁí∞Â¢É‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # backend„ÉÅ„Éº„É†„ÅåÁÆ°ÁêÜ„Åô„Çãapplication„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ‚îÇ    ...‚îÇ    ‚îÇ‚îÇ    ‚îú‚îÄ‚îÄ üìÇ stg/ # StgÁí∞Â¢É‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # backend„ÉÅ„Éº„É†„ÅåÁÆ°ÁêÜ„Åô„Çãapplication„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ‚îÇ    ...‚îÇ    ‚îÇ‚îÇ    ‚îî‚îÄ‚îÄ üìÇ prd/ # PrdÁí∞Â¢É‚îÇ          ‚îú‚îÄ‚îÄ backend.tfvars # backend„ÉÅ„Éº„É†„ÅåÁÆ°ÁêÜ„Åô„Çãapplication„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ          ...‚îÇ‚îî‚îÄ‚îÄ üìÇ monitor/      ‚îú‚îÄ‚îÄ provider.tf      ‚îú‚îÄ‚îÄ remote_state.tf # terraform_remote_state „Éñ„É≠„ÉÉ„ÇØ„Çí‰ΩøÁî®„Åô„Çã      ‚îú‚îÄ‚îÄ cloudwatch.tf      ‚îú‚îÄ‚îÄ üìÇ tes/ # TesÁí∞Â¢É      ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # backend„ÉÅ„Éº„É†„ÅåÁÆ°ÁêÜ„Åô„Çãmonitor„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã      ‚îÇ    ...      ‚îÇ      ‚îú‚îÄ‚îÄ üìÇ stg/ # StgÁí∞Â¢É      ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # backend„ÉÅ„Éº„É†„ÅåÁÆ°ÁêÜ„Åô„Çãmonitor„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã      ‚îÇ    ...      ‚îÇ      ‚îî‚îÄ‚îÄ üìÇ prd/ # PrdÁí∞Â¢É            ‚îú‚îÄ‚îÄ backend.tfvars # backend„ÉÅ„Éº„É†„ÅåÁÆ°ÁêÜ„Åô„Çãmonitor„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã            ...üê± aws-sre-team-repository/‚îú‚îÄ‚îÄ üìÇ application/‚îÇ    ‚îú‚îÄ‚îÄ provider.tf‚îÇ    ‚îú‚îÄ‚îÄ output.tf # ‰ªñ„ÅÆ tfstate „Éï„Ç°„Ç§„É´„Åã„Çâ‰æùÂ≠ò„Åï„Çå„Çã‚îÇ    ‚îú‚îÄ‚îÄ remote_state.tf # terraform_remote_state „Éñ„É≠„ÉÉ„ÇØ„Çí‰ΩøÁî®„Åô„Çã‚îÇ    ‚îú‚îÄ‚îÄ alb.tf‚îÇ    ‚îú‚îÄ‚îÄ ec2.tf‚îÇ    ‚îú‚îÄ‚îÄ ecs.tf‚îÇ    ‚îú‚îÄ‚îÄ eks.tf‚îÇ    ‚îú‚îÄ‚îÄ üìÇ tes/ # TesÁí∞Â¢É‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # sre„ÉÅ„Éº„É†„ÅåÁÆ°ÁêÜ„Åô„Çãapplication„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ‚îÇ    ...‚îÇ    ‚îÇ‚îÇ    ‚îú‚îÄ‚îÄ üìÇ stg/ # StgÁí∞Â¢É‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # sre„ÉÅ„Éº„É†„ÅåÁÆ°ÁêÜ„Åô„Çãapplication„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ‚îÇ    ...‚îÇ    ‚îÇ‚îÇ    ‚îî‚îÄ‚îÄ üìÇ prd/ # PrdÁí∞Â¢É‚îÇ          ‚îú‚îÄ‚îÄ backend.tfvars # sre„ÉÅ„Éº„É†„ÅåÁÆ°ÁêÜ„Åô„Çãapplication„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ          ...‚îÇ‚îú‚îÄ‚îÄ üìÇ auth/‚îÇ    ‚îú‚îÄ‚îÄ provider.tf‚îÇ    ‚îú‚îÄ‚îÄ output.tf # ‰ªñ„ÅÆ tfstate „Éï„Ç°„Ç§„É´„Åã„Çâ‰æùÂ≠ò„Åï„Çå„Çã‚îÇ    ‚îú‚îÄ‚îÄ iam.tf‚îÇ    ‚îú‚îÄ‚îÄ üìÇ tes/ # TesÁí∞Â¢É‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # sre„ÉÅ„Éº„É†„ÅåÁÆ°ÁêÜ„Åô„Çãauth„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ‚îÇ    ...‚îÇ    ‚îÇ‚îÇ    ‚îú‚îÄ‚îÄ üìÇ stg/ # StgÁí∞Â¢É‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # sre„ÉÅ„Éº„É†„ÅåÁÆ°ÁêÜ„Åô„Çãauth„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ‚îÇ    ...‚îÇ    ‚îÇ‚îÇ    ‚îî‚îÄ‚îÄ üìÇ prd/ # PrdÁí∞Â¢É‚îÇ          ‚îú‚îÄ‚îÄ backend.tfvars # sre„ÉÅ„Éº„É†„ÅåÁÆ°ÁêÜ„Åô„Çãauth„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ          ...‚îÇ‚îú‚îÄ‚îÄ üìÇ monitor/‚îÇ    ‚îú‚îÄ‚îÄ provider.tf‚îÇ    ‚îú‚îÄ‚îÄ remote_state.tf # terraform_remote_state „Éñ„É≠„ÉÉ„ÇØ„Çí‰ΩøÁî®„Åô„Çã‚îÇ    ‚îú‚îÄ‚îÄ cloudwatch.tf‚îÇ    ‚îú‚îÄ‚îÄ üìÇ tes/ # TesÁí∞Â¢É‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # sre„ÉÅ„Éº„É†„ÅåÁÆ°ÁêÜ„Åô„Çãmonitor„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ‚îÇ    ...‚îÇ    ‚îÇ‚îÇ    ‚îú‚îÄ‚îÄ üìÇ stg/ # StgÁí∞Â¢É‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # sre„ÉÅ„Éº„É†„ÅåÁÆ°ÁêÜ„Åô„Çãmonitor„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ‚îÇ    ...‚îÇ    ‚îÇ‚îÇ    ‚îî‚îÄ‚îÄ üìÇ prd/ # PrdÁí∞Â¢É‚îÇ          ‚îú‚îÄ‚îÄ backend.tfvars # sre„ÉÅ„Éº„É†„ÅåÁÆ°ÁêÜ„Åô„Çãmonitor„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ          ...‚îÇ‚îî‚îÄ‚îÄ üìÇ network      ‚îú‚îÄ‚îÄ provider.tf      ‚îú‚îÄ‚îÄ output.tf # ‰ªñ„ÅÆ tfstate „Éï„Ç°„Ç§„É´„Åã„Çâ‰æùÂ≠ò„Åï„Çå„Çã      ‚îú‚îÄ‚îÄ route53.tf      ‚îú‚îÄ‚îÄ vpc.tf      ‚îú‚îÄ‚îÄ üìÇ tes/ # TesÁí∞Â¢É      ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # sre„ÉÅ„Éº„É†„ÅåÁÆ°ÁêÜ„Åô„Çãnetwork„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã      ‚îÇ    ...      ‚îÇ      ‚îú‚îÄ‚îÄ üìÇ stg/ # StgÁí∞Â¢É      ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # sre„ÉÅ„Éº„É†„ÅåÁÆ°ÁêÜ„Åô„Çãnetwork„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã      ‚îÇ    ...      ‚îÇ      ‚îî‚îÄ‚îÄ üìÇ prd/ # PrdÁí∞Â¢É            ‚îú‚îÄ‚îÄ backend.tfvars # sre„ÉÅ„Éº„É†„ÅåÁÆ°ÁêÜ„Åô„Çãnetwork„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã            ...‚ñº Âêå„Åò„É™„Éù„Ç∏„Éà„É™„ÅÆÂ†¥ÂêàÈÅãÁî®„ÉÅ„Éº„É†Ë≤¨ÂãôÁØÑÂõ≤Âà•„Å®„Éó„É≠„ÉÄ„ÇØ„Éà„Çµ„Éñ„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÂà•„ÇíÁµÑ„ÅøÂêà„Çè„Åõ„ÇãÂàÜÂâ≤„Éë„Çø„Éº„É≥„ÅÆÂ†¥Âêà„ÄÅÂêå„Åò„É™„Éù„Ç∏„Éà„É™„ÅßÁÆ°ÁêÜ„Åô„Çã„Å®„É™„Éù„Ç∏„Éà„É™„ÅåÂ∑®Â§ß„Å´„Å™„Å£„Å¶„Åó„Åæ„ÅÑ„Åæ„Åô„ÄÇ„Åù„ÅÆ„Åü„ÇÅ„ÄÅ„Åì„Çå„ÅØ„ÅäÂãß„ÇÅ„Åó„Åæ„Åõ„Çì„ÄÇ„Äê„ÉÅ„Éº„É†Âà• √ó „Çµ„Éñ„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÂà•„Äë„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‚ñº Áï∞„Å™„Çã„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆÂ†¥ÂêàÈÅãÁî®„ÉÅ„Éº„É†Ë≤¨ÂãôÁØÑÂõ≤Âà•„Å®„Éó„É≠„ÉÄ„ÇØ„Éà„Çµ„Éñ„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÂà•„ÇíÁµÑ„ÅøÂêà„Çè„Åõ„ÇãÂàÜÂâ≤„Éë„Çø„Éº„É≥„ÅÆÂ†¥Âêà„ÄÅÁï∞„Å™„Çã„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅßÁÆ°ÁêÜ„Åô„Çã„Å®„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅåÂ¢ó„ÅàÈÅé„Åé„Å¶„Åó„Åæ„ÅÑ„Åæ„Åô„ÄÇ„Åù„ÅÆ„Åü„ÇÅ„ÄÅ„Åì„Çå„ÅØ„ÅäÂãß„ÇÅ„Åó„Åæ„Åõ„Çì„ÄÇ‚ñº Âêå„Åò„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆÂ†¥Âêà„Åì„ÅÆÂ†¥Âêà„Åß„ÅØ„ÄÅÈÅãÁî®„ÉÅ„Éº„É†Ë≤¨ÂãôÁØÑÂõ≤Âà•„Å®„Éó„É≠„ÉÄ„ÇØ„Éà„Çµ„Éñ„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÂà•„ÇíÁµÑ„ÅøÂêà„Çè„Åõ„Å¶ÂàÜÂâ≤„Åó„Åütfstate„Éï„Ç°„Ç§„É´„Çí„ÄÅÁï∞„Å™„Çã„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅßÁÆ°ÁêÜ„Åó„Åæ„Åô„ÄÇ‰æã„Åà„Å∞„ÄÅtfstate„Éï„Ç°„Ç§„É´ÂàÜÂâ≤„Å´Âü∫„Å•„ÅÑ„Å¶„ÄÅ„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„ÉâÂÜÖ„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‰æã„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Å´„Å™„Çä„Åæ„Åô„ÄÇ„Åì„ÅÆ‰æã„Åß„ÅØ„ÄÅÁä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥„Å®Âêå„ÅòÁä∂Ê≥Å„Çí‰ªÆÂÆö„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ# TesÁí∞Â¢É„ÅÆÁä∂ÊÖã„ÅÆ„Åø„ÇíÁÆ°ÁêÜ„Åô„Çã„Éê„Ç±„ÉÉ„Éàü™£ tes-bucket/‚îú‚îÄ‚îÄ üìÇ frontend-team‚îÇ    ‚îú‚îÄ‚îÄ üìÇ application‚îÇ    ‚îÇ    ‚îî‚îÄ‚îÄ terraform.tfstate # frontend„ÉÅ„Éº„É†„ÅåÁÆ°ÁêÜ„Åô„Çãapplication„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§‚îÇ    ‚îÇ‚îÇ    ‚îî‚îÄ‚îÄ üìÇ monitor‚îÇ         ‚îî‚îÄ‚îÄ terraform.tfstate # frontend„ÉÅ„Éº„É†„ÅåÁÆ°ÁêÜ„Åô„Çãmonitor„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§‚îÇ‚îú‚îÄ‚îÄ üìÇ backend-team‚îÇ    ‚îú‚îÄ‚îÄ üìÇ application‚îÇ    ‚îÇ    ‚îî‚îÄ‚îÄ terraform.tfstate # backend„ÉÅ„Éº„É†„ÅåÁÆ°ÁêÜ„Åô„Çãapplication„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§‚îÇ    ‚îÇ‚îÇ    ‚îî‚îÄ‚îÄ üìÇ monitor‚îÇ          ‚îî‚îÄ‚îÄ terraform.tfstate # backend„ÉÅ„Éº„É†„ÅåÁÆ°ÁêÜ„Åô„Çãmonitor„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§‚îÇ‚îî‚îÄ‚îÄ üìÇ sre-team      ‚îú‚îÄ‚îÄ üìÇ application      ‚îÇ    ‚îî‚îÄ‚îÄ terraform.tfstate # sre„ÉÅ„Éº„É†„ÅåÁÆ°ÁêÜ„Åô„Çãapplication„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§      ‚îÇ      ‚îú‚îÄ‚îÄ üìÇ auth      ‚îÇ    ‚îî‚îÄ‚îÄ terraform.tfstate # sre„ÉÅ„Éº„É†„ÅåÁÆ°ÁêÜ„Åô„Çãauth„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§      ‚îÇ      ‚îú‚îÄ‚îÄ üìÇ monitor      ‚îÇ    ‚îî‚îÄ‚îÄ terraform.tfstate # sre„ÉÅ„Éº„É†„ÅåÁÆ°ÁêÜ„Åô„Çãmonitor„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§      ‚îÇ      ‚îî‚îÄ‚îÄ üìÇ network            ‚îî‚îÄ‚îÄ terraform.tfstate # sre„ÉÅ„Éº„É†„ÅåÁÆ°ÁêÜ„Åô„Çãnetwork„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§# StgÁí∞Â¢É„ÅÆÁä∂ÊÖã„ÅÆ„Åø„ÇíÁÆ°ÁêÜ„Åô„Çã„Éê„Ç±„ÉÉ„Éàü™£ stg-bucket/‚îÇ...# PrdÁí∞Â¢É„ÅÆÁä∂ÊÖã„ÅÆ„Åø„ÇíÁÆ°ÁêÜ„Åô„Çã„Éê„Ç±„ÉÉ„Éàü™£ prd-bucket/‚îÇ...Âêå„Åò„ÉÜ„Éä„É≥„ÉàÂÜÖ„ÅÆ„Éó„É≠„ÉÄ„ÇØ„ÉàÂà•„Åì„ÅÆÂàÜÂâ≤ÊñπÊ≥ï„Å´„Å§„ÅÑ„Å¶Âêå„Åò„ÉÜ„Éä„É≥„Éà (‰æãÔºöÂêå„ÅòAWS„Ç¢„Ç´„Ç¶„É≥„Éà„ÅÆÂêå„ÅòVPC) ÂÜÖ„Å´Ë§áÊï∞„ÅÆÂ∞è„Åï„Å™„Éó„É≠„ÉÄ„ÇØ„Éà„Åå„ÅÇ„ÇãÂ†¥Âêà„ÄÅ„Éó„É≠„ÉÄ„ÇØ„ÉàÂà•„Åßtfstate„Éï„Ç°„Ç§„É´„ÇíÂàÜÂâ≤„Åó„ÄÅ‰∏≠ÈñìÂ±§„ÇÇ„Åì„Çå„Å´Âü∫„Å•„ÅÑ„Å¶Ë®≠Ë®à„Åó„Åæ„Åô„ÄÇ„Åì„Åì„Åß„ÅÑ„ÅÜ„Éó„É≠„ÉÄ„ÇØ„Éà„ÅØ„ÄÅ„Ç¢„Éó„É™„ÇíÂãï„Åã„Åô„Éó„É©„ÉÉ„Éà„Éï„Ç©„Éº„É† (‰æãÔºöEKS„ÄÅECS„ÄÅAppRunner„ÄÅEC2) „Å®„Åù„Çå„ÇíÂèñ„ÇäÂ∑ª„ÅèAWS„É™„ÇΩ„Éº„Çπ„ÇíÊåá„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ„Åì„ÅÆÂàÜÂâ≤ÊñπÊ≥ï„Å´„Çà„Çä„ÄÅÂêÑ„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆÁÆ°ÁêÜËÄÖ„Åå‰∫í„ÅÑ„Å´ÂΩ±Èüø„ÇíÂèó„Åë„Åö„Å´„ÄÅterraform„Ç≥„Éû„É≥„Éâ„ÅÆÁµêÊûú„ÇíÂæó„Çâ„Çå„Çã„Çà„ÅÜ„Å´„Å™„Çä„Åæ„Åô„ÄÇ‚ñ∂ „Åä„Åô„Åô„ÇÅÂ∫¶„Å´„Å§„ÅÑ„Å¶„ÄêÂêå„Åò„ÉÜ„Éä„É≥„ÉàÂÜÖ„ÅÆ„Éó„É≠„ÉÄ„ÇØ„Éà„ÄëÁä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥‰æã„Åà„Å∞„ÄÅ‰ª•‰∏ã„ÅÆ„Éó„É≠„ÉÄ„ÇØ„Éà„Å´ÂàÜÂâ≤„Åó„ÅüÁä∂Ê≥Å„Å®‰ªÆÂÆö„Åó„Åæ„Åô„ÄÇfoo„Éó„É≠„ÉÄ„ÇØ„Éàbar„Éó„É≠„ÉÄ„ÇØ„ÉàÂÖ±Êúânetwork„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà (‰æãÔºöVPC„ÄÅRoute53)„Åì„Åì„Åß‰ªÆÂÆö„Åó„ÅüÁä∂Ê≥Å„Åß„ÅØ„ÄÅÂêÑ„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆ tfstate „Éï„Ç°„Ç§„É´„ÅÆ‰æùÂ≠ò„ÅØ‰∏ÄÊñπÂêëÊúÄÁµÇÁöÑ„Å´„ÄÅÂÖ±Êúânetwork„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆ tfstate „Éï„Ç°„Ç§„É´„Å´‰æùÂ≠ò„Åó„Å¶„ÅÑ„Çã„Å®„Åó„Åæ„Åô„ÄÇ„Åù„ÅÆ„Åü„ÇÅ„ÄÅÊÉ≥ÂÆö„Åï„Çå„ÇãÁä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Å´„Å™„Çä„Åæ„Åô„ÄÇ„Å™„Åä„ÄÅ‰æùÂ≠òÊñπÂêë„ÅØÁä∂Ê≥Å„Å´„Çà„Å£„Å¶Áï∞„Å™„Çã„Åì„Å®„Çí„ÅîÂÆπËµ¶„Åè„Å†„Åï„ÅÑ„ÄÇ---title: Âêå„Åò„ÉÜ„Éä„É≥„ÉàÂÜÖ„ÅÆ„Éó„É≠„ÉÄ„ÇØ„Éà---%%{init:{'theme':'default'}}%%flowchart TB    subgraph AWS        subgraph tes-bucket            foo-product[\"foo-product-tfstate\u003cbr\u003e(„Ç¢„Éó„É™„ÇíÂãï„Åã„Åô„Éó„É©„ÉÉ„Éà„Éï„Ç©„Éº„É†„ÅÆAWS„É™„ÇΩ„Éº„Çπ)\"]-..-\u003enetwork            bar-product[\"bar-product-tfstate\u003cbr\u003e(„Ç¢„Éó„É™„ÇíÂãï„Åã„Åô„Éó„É©„ÉÉ„Éà„Éï„Ç©„Éº„É†„ÅÆAWS„É™„ÇΩ„Éº„Çπ)\"]-..-\u003enetwork            network[\"network-tfstate\u003cbr\u003e(Route53, VPC)\"]        end    subgraph stg-bucket        stg[\"tfstate\"]    end    subgraph prd-bucket        prd[\"tfstate\"]    end    end„ÄêÂêå„Åò„ÉÜ„Éä„É≥„ÉàÂÜÖ„ÅÆ„Éó„É≠„ÉÄ„ÇØ„Éà„Äë„É™„Éù„Ç∏„Éà„É™„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‚ñº Áï∞„Å™„Çã„É™„Éù„Ç∏„Éà„É™„ÅÆÂ†¥Âêà„Åì„ÅÆÂ†¥Âêà„Åß„ÅØ„ÄÅÂêå„Åò„ÉÜ„Éä„É≥„ÉàÂÜÖ„ÅÆ„Éó„É≠„ÉÄ„ÇØ„Éà„Å´ÂàÜÂâ≤„Åó„Åütfstate„Éï„Ç°„Ç§„É´„Çí„ÄÅÁï∞„Å™„Çã„É™„Éù„Ç∏„Éà„É™„ÅßÁÆ°ÁêÜ„Åó„Åæ„Åô„ÄÇ‰æã„Åà„Å∞„ÄÅtfstate„Éï„Ç°„Ç§„É´ÂàÜÂâ≤„Å´Âü∫„Å•„ÅÑ„Å¶„ÄÅ„É™„Éù„Ç∏„Éà„É™„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‰æã„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Å´„Å™„Çä„Åæ„Åô„ÄÇÂâçËø∞„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥„ÅÆÁä∂Ê≥Å„Å®‰ªÆÂÆö„Åó„Åæ„Åô„ÄÇ# foo„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆ tfstate „Éï„Ç°„Ç§„É´„ÅÆ„É™„Éù„Ç∏„Éà„É™üê± aws-foo-product-repository/‚îú‚îÄ‚îÄ provider.tf‚îú‚îÄ‚îÄ remote_state.tf # terraform_remote_state „Éñ„É≠„ÉÉ„ÇØ„Çí‰ΩøÁî®„Åô„Çã‚îú‚îÄ‚îÄ üìÇ tes/ # TesÁí∞Â¢É‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # foo„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ...‚îÇ‚îú‚îÄ‚îÄ üìÇ stg/ # StgÁí∞Â¢É‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # foo„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ...‚îÇ‚îî‚îÄ‚îÄ üìÇ prd/ # PrdÁí∞Â¢É      ‚îú‚îÄ‚îÄ backend.tfvars # foo„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã      ...# bar„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆ tfstate „Éï„Ç°„Ç§„É´„ÅÆ„É™„Éù„Ç∏„Éà„É™üê± aws-bar-product-repository/‚îú‚îÄ‚îÄ provider.tf‚îú‚îÄ‚îÄ remote_state.tf # terraform_remote_state „Éñ„É≠„ÉÉ„ÇØ„Çí‰ΩøÁî®„Åô„Çã‚îú‚îÄ‚îÄ üìÇ tes/ # TesÁí∞Â¢É‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # bar„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ...‚îÇ‚îú‚îÄ‚îÄ üìÇ stg/ # StgÁí∞Â¢É‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # bar„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ...‚îÇ‚îî‚îÄ‚îÄ üìÇ prd/ # PrdÁí∞Â¢É      ‚îú‚îÄ‚îÄ backend.tfvars # bar„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã      ...# ÂÖ±Êúânetwork„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆ tfstate „Éï„Ç°„Ç§„É´„ÅÆ„É™„Éù„Ç∏„Éà„É™üê± aws-network-repository/‚îú‚îÄ‚îÄ output.tf # ‰ªñ„ÅÆ tfstate „Éï„Ç°„Ç§„É´„Åã„Çâ‰æùÂ≠ò„Åï„Çå„Çã‚îú‚îÄ‚îÄ provider.tf‚îú‚îÄ‚îÄ route53.tf‚îú‚îÄ‚îÄ vpc.tf‚îú‚îÄ‚îÄ üìÇ tes/ # TesÁí∞Â¢É‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # network„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ...‚îÇ‚îú‚îÄ‚îÄ üìÇ stg/ # StgÁí∞Â¢É‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # network„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ...‚îÇ‚îî‚îÄ‚îÄ üìÇ prd/ # PrdÁí∞Â¢É      ‚îú‚îÄ‚îÄ backend.tfvars # network„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã      ...‚ñº Âêå„Åò„É™„Éù„Ç∏„Éà„É™„ÅÆÂ†¥Âêà„Åì„ÅÆÂ†¥Âêà„Åß„ÅØ„ÄÅÂêå„Åò„ÉÜ„Éä„É≥„ÉàÂÜÖ„ÅÆ„Éó„É≠„ÉÄ„ÇØ„Éà„Å´ÂàÜÂâ≤„Åó„Åütfstate„Éï„Ç°„Ç§„É´„Çí„ÄÅÂêå„Åò„É™„Éù„Ç∏„Éà„É™„ÅßÁÆ°ÁêÜ„Åó„Åæ„Åô„ÄÇ‰æã„Åà„Å∞„ÄÅtfstate„Éï„Ç°„Ç§„É´ÂàÜÂâ≤„Å´Âü∫„Å•„ÅÑ„Å¶„ÄÅ„É™„Éù„Ç∏„Éà„É™„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‰æã„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Å´„Å™„Çä„Åæ„Åô„ÄÇÂâçËø∞„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥„ÅÆÁä∂Ê≥Å„Å®‰ªÆÂÆö„Åó„Åæ„Åô„ÄÇüê± aws-repository/‚îú‚îÄ‚îÄ üìÇ foo-product/‚îÇ    ‚îú‚îÄ‚îÄ provider.tf‚îÇ    ‚îú‚îÄ‚îÄ remote_state.tf # terraform_remote_state „Éñ„É≠„ÉÉ„ÇØ„Çí‰ΩøÁî®„Åô„Çã‚îÇ    ‚îú‚îÄ‚îÄ üìÇ tes/ # TesÁí∞Â¢É‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # foo„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ‚îÇ    ...‚îÇ    ‚îÇ‚îÇ    ‚îú‚îÄ‚îÄ üìÇ stg/ # StgÁí∞Â¢É‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # foo„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ‚îÇ    ...‚îÇ    ‚îÇ‚îÇ    ‚îî‚îÄ‚îÄ üìÇ prd/ # PrdÁí∞Â¢É‚îÇ          ‚îú‚îÄ‚îÄ backend.tfvars # foo„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ          ...‚îÇ‚îú‚îÄ‚îÄ üìÇ bar-product/‚îÇ    ‚îú‚îÄ‚îÄ provider.tf‚îÇ    ‚îú‚îÄ‚îÄ remote_state.tf # terraform_remote_state „Éñ„É≠„ÉÉ„ÇØ„Çí‰ΩøÁî®„Åô„Çã‚îÇ    ‚îú‚îÄ‚îÄ üìÇ tes/ # TesÁí∞Â¢É‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # bar„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ‚îÇ    ...‚îÇ    ‚îÇ‚îÇ    ‚îú‚îÄ‚îÄ üìÇ stg/ # StgÁí∞Â¢É‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # bar„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ‚îÇ    ...‚îÇ    ‚îÇ‚îÇ    ‚îî‚îÄ‚îÄ üìÇ prd/ # PrdÁí∞Â¢É‚îÇ          ‚îú‚îÄ‚îÄ backend.tfvars # bar„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ          ...‚îÇ‚îî‚îÄ‚îÄ üìÇ network      ‚îú‚îÄ‚îÄ provider.tf      ‚îú‚îÄ‚îÄ output.tf # ‰ªñ„ÅÆ tfstate „Éï„Ç°„Ç§„É´„Åã„Çâ‰æùÂ≠ò„Åï„Çå„Çã      ‚îú‚îÄ‚îÄ route53.tf      ‚îú‚îÄ‚îÄ vpc.tf      ‚îú‚îÄ‚îÄ üìÇ tes/ # TesÁí∞Â¢É      ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # network„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã      ‚îÇ    ...      ‚îÇ      ‚îú‚îÄ‚îÄ üìÇ stg/ # StgÁí∞Â¢É      ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # network„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã      ‚îÇ    ...      ‚îÇ      ‚îî‚îÄ‚îÄ üìÇ prd/ # PrdÁí∞Â¢É           ‚îú‚îÄ‚îÄ backend.tfvars # network„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã           ...„ÄêÂêå„Åò„ÉÜ„Éä„É≥„ÉàÂÜÖ„ÅÆ„Éó„É≠„ÉÄ„ÇØ„Éà„Äë„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‚ñº Áï∞„Å™„Çã„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆÂ†¥ÂêàÂêå„Åò„ÉÜ„Éä„É≥„ÉàÂÜÖ„ÅÆ„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆÂ†¥Âêà„ÄÅÁï∞„Å™„Çã„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅßÁÆ°ÁêÜ„Åô„Çã„Å®„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅåÂ¢ó„ÅàÈÅé„Åé„Å¶„Åó„Åæ„ÅÑ„Åæ„Åô„ÄÇ„Åù„ÅÆ„Åü„ÇÅ„ÄÅ„Åì„Çå„ÅØ„ÅäÂãß„ÇÅ„Åó„Åæ„Åõ„Çì„ÄÇ‚ñº Âêå„Åò„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆÂ†¥Âêà„Åì„ÅÆÂ†¥Âêà„Åß„ÅØ„ÄÅÂêå„Åò„ÉÜ„Éä„É≥„ÉàÂÜÖ„ÅÆ„Éó„É≠„ÉÄ„ÇØ„Éà„Å´ÂàÜÂâ≤„Åó„Åütfstate„Éï„Ç°„Ç§„É´„Çí„ÄÅÁï∞„Å™„Çã„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅßÁÆ°ÁêÜ„Åó„Åæ„Åô„ÄÇ‰æã„Åà„Å∞„ÄÅtfstate„Éï„Ç°„Ç§„É´ÂàÜÂâ≤„Å´Âü∫„Å•„ÅÑ„Å¶„ÄÅ„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„ÉâÂÜÖ„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‰æã„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Å´„Å™„Çä„Åæ„Åô„ÄÇÂâçËø∞„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥„ÅÆÁä∂Ê≥Å„Å®‰ªÆÂÆö„Åó„Åæ„Åô„ÄÇ# TesÁí∞Â¢É„ÅÆÁä∂ÊÖã„ÅÆ„Åø„ÇíÁÆ°ÁêÜ„Åô„Çã„Éê„Ç±„ÉÉ„Éàü™£ tes-bucket/‚îú‚îÄ‚îÄ üìÇ foo-product‚îÇ    ‚îî‚îÄ‚îÄ terraform.tfstate # foo„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§‚îÇ‚îú‚îÄ‚îÄ üìÇ bar-product‚îÇ    ‚îî‚îÄ‚îÄ terraform.tfstate # bar„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§‚îÇ‚îî‚îÄ‚îÄ üìÇ network      ‚îî‚îÄ‚îÄ terraform.tfstate # network„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§# StgÁí∞Â¢É„ÅÆÁä∂ÊÖã„ÅÆ„Åø„ÇíÁÆ°ÁêÜ„Åô„Çã„Éê„Ç±„ÉÉ„Éàü™£ stg-bucket/‚îÇ...# PrdÁí∞Â¢É„ÅÆÁä∂ÊÖã„ÅÆ„Åø„ÇíÁÆ°ÁêÜ„Åô„Çã„Éê„Ç±„ÉÉ„Éàü™£ prd-bucket/‚îÇ...AWS„É™„ÇΩ„Éº„Çπ„ÅÆÁ®ÆÈ°û„Ç∞„É´„Éº„ÉóÂà•„Åì„ÅÆÂàÜÂâ≤ÊñπÊ≥ï„Å´„Å§„ÅÑ„Å¶AWS„É™„ÇΩ„Éº„Çπ„ÅÆÁ®ÆÈ°û„Ç∞„É´„Éº„ÉóÂà•„Åßtfstate„Éï„Ç°„Ç§„É´„ÇíÂàÜÂâ≤„Åó„ÄÅ‰∏≠ÈñìÂ±§„ÇÇ„Åì„Çå„Å´Âü∫„Å•„ÅÑ„Å¶Ë®≠Ë®à„Åó„Åæ„Åô„ÄÇ„Åì„ÅÆÂàÜÂâ≤ÊñπÊ≥ï„Å´„Çà„Çä„ÄÅÂêÑAWS„É™„ÇΩ„Éº„Çπ„ÅÆÁ®ÆÈ°û„Ç∞„É´„Éº„Éó„ÇÇÁÆ°ÁêÜËÄÖ„Åå‰∫í„ÅÑ„Å´ÂΩ±Èüø„ÇíÂèó„Åë„Åö„Å´„ÄÅterraform„Ç≥„Éû„É≥„Éâ„ÅÆÁµêÊûú„ÇíÂæó„Çâ„Çå„Çã„Çà„ÅÜ„Å´„Å™„Çä„Åæ„Åô„ÄÇ‚ñ∂ „Åä„Åô„Åô„ÇÅÂ∫¶„Å´„Å§„ÅÑ„Å¶terraform_remote_state„Éñ„É≠„ÉÉ„ÇØÂú∞ÁçÑ„Å´„Å™„Å£„Å¶„ÅÑ„Åè„Åü„ÇÅ„ÄÅÈÅ©Âàá„Å™Êï∞ (3„Äú5ÂÄã„Åè„Çâ„ÅÑ) „Å´„Åó„Å¶„Åä„Åè„Çà„ÅÜ„Å´Ê≥®ÊÑè„ÅåÂøÖË¶Å„Åß„Åô„ÄÇÁâπ„Å´„Åì„ÅÆÂàÜÂâ≤ÊñπÊ≥ï„ÅØ„ÄÅ„Ç∞„É´„Éº„ÉóÊï∞„Åå„Å©„Çì„Å©„ÇìÂ¢ó„Åà„Å¶„ÅÑ„ÅèÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åôüòá„ÄêÁ®ÆÈ°û„Ç∞„É´„Éº„ÉóÂà•„ÄëÁä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥‰æã„Åà„Å∞„ÄÅ‰ª•‰∏ã„ÅÆÁ®ÆÈ°û„Ç∞„É´„Éº„Éó„Å´ÂàÜÂâ≤„Åó„ÅüÁä∂Ê≥Å„Å®‰ªÆÂÆö„Åó„Åæ„Åô„ÄÇapplication (Web„Çµ„Éº„Éê„Éº„ÄÅApp„Çµ„Éº„Éê„ÉºÁ≥ª)auth (Ë™çË®º/Ë™çÂèØÁ≥ª)datastore (DB„Çµ„Éº„Éê„ÉºÁ≥ª)cicd (CI/CDÁ≥ª)monitor (Áõ£Ë¶ñÁ≥ª)network („Éç„ÉÉ„Éà„ÉØ„Éº„ÇØÁ≥ª)„Åì„Åì„Åß‰ªÆÂÆö„Åó„ÅüÁä∂Ê≥Å„Åß„ÅØ„ÄÅÂêÑ„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆtfstate„Éï„Ç°„Ç§„É´„ÅÆ‰æùÂ≠ò„ÅØ‰∏ÄÊñπÂêëÊúÄÁµÇÁöÑ„Å´„ÄÅnetwork„Ç∞„É´„Éº„Éó„ÇÑauth„Ç∞„É´„Éº„Éó„ÅÆ tfstate „Éï„Ç°„Ç§„É´„Å´‰æùÂ≠ò„Åó„Å¶„ÅÑ„Çã„Å®„Åó„Åæ„Åô„ÄÇ„Åù„ÅÆ„Åü„ÇÅ„ÄÅÊÉ≥ÂÆö„Åï„Çå„ÇãÁä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Å´„Å™„Çä„Åæ„Åô„ÄÇ„Å™„Åä„ÄÅ‰æùÂ≠òÊñπÂêë„ÅØÁä∂Ê≥Å„Å´„Çà„Å£„Å¶Áï∞„Å™„Çã„Åì„Å®„Çí„ÅîÂÆπËµ¶„Åè„Å†„Åï„ÅÑ„ÄÇ---title: AWS„É™„ÇΩ„Éº„Çπ„ÅÆÁ®ÆÈ°û„Ç∞„É´„Éº„ÉóÂà•---%%{init:{'theme':'default'}}%%flowchart TB    subgraph AWS        subgraph tes-bucket            application[\"application-tfstate\u003cbr\u003e‰æã: ALB, API Gateway, CloudFront, EC2, ECS, EKS, SNS, „Å™„Å©\"]            auth[\"auth-tfstate\u003cbr\u003e‰æã: IAM, „Å™„Å©\"]            cicd[\"cicd-tfstate\u003cbr\u003e‰æã: Code3ÂÖÑÂºü, „Å™„Å©\"]            monitor[\"monitor-tfstate\u003cbr\u003e‰æã: CloudWatch, „Å™„Å©\"]            network[\"network-tfstate\u003cbr\u003e‰æã: Route53, VPC, „Å™„Å©\"]            datastore[\"datastore-tfstate\u003cbr\u003e‰æã: ElastiCache, RDS, S3, „Å™„Å©\"]            application-....-\u003eauth            application-..-\u003edatastore            application-...-\u003enetwork            cicd-..-\u003eapplication            datastore-..-\u003enetwork            monitor-..-\u003eapplication            monitor-..-\u003edatastore       end    subgraph stg-bucket        stg[\"tfstate\"]    end    subgraph prd-bucket        prd[\"tfstate\"]    end    end„ÄêÁ®ÆÈ°û„Ç∞„É´„Éº„ÉóÂà•„Äë„É™„Éù„Ç∏„Éà„É™„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‚ñº Áï∞„Å™„Çã„É™„Éù„Ç∏„Éà„É™„ÅÆÂ†¥ÂêàAWS„É™„ÇΩ„Éº„Çπ„ÅÆÁ®ÆÈ°û„Ç∞„É´„Éº„ÉóÂà•„ÅÆÂàÜÂâ≤„Éë„Çø„Éº„É≥„ÅÆÂ†¥Âêà„ÄÅÁï∞„Å™„Çã„É™„Éù„Ç∏„Éà„É™„ÅßÁÆ°ÁêÜ„Åô„Çã„Å®„É™„Éù„Ç∏„Éà„É™„ÅåÂ¢ó„ÅàÈÅé„Åé„Å¶„Åó„Åæ„ÅÑ„Åæ„Åô„ÄÇ„Åù„ÅÆ„Åü„ÇÅ„ÄÅ„Åì„Çå„ÅØ„ÅäÂãß„ÇÅ„Åó„Åæ„Åõ„Çì„ÄÇ‚ñº Âêå„Åò„É™„Éù„Ç∏„Éà„É™„ÅÆÂ†¥Âêà„Åì„ÅÆÂ†¥Âêà„Åß„ÅØ„ÄÅAWS„É™„ÇΩ„Éº„Çπ„ÅÆÁ®ÆÈ°û„Ç∞„É´„Éº„ÉóÂà•„Å´ÂàÜÂâ≤„Åó„Åütfstate„Éï„Ç°„Ç§„É´„Çí„ÄÅÂêå„Åò„É™„Éù„Ç∏„Éà„É™„ÅßÁÆ°ÁêÜ„Åó„Åæ„Åô„ÄÇ‰æã„Åà„Å∞„ÄÅtfstate„Éï„Ç°„Ç§„É´ÂàÜÂâ≤„Å´Âü∫„Å•„ÅÑ„Å¶„ÄÅ„É™„Éù„Ç∏„Éà„É™„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‰æã„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Å´„Å™„Çä„Åæ„Åô„ÄÇ„Åì„ÅÆ‰æã„Åß„ÅØ„ÄÅÁä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥„Å®Âêå„ÅòÁä∂Ê≥Å„Çí‰ªÆÂÆö„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇüê± aws-repository/‚îú‚îÄ‚îÄ üìÇ application/‚îÇ    ‚îú‚îÄ‚îÄ provider.tf‚îÇ    ‚îú‚îÄ‚îÄ remote_state.tf # terraform_remote_state „Éñ„É≠„ÉÉ„ÇØ„Çí‰ΩøÁî®„Åô„Çã‚îÇ    ‚îú‚îÄ‚îÄ output.tf # ‰ªñ„ÅÆ tfstate „Éï„Ç°„Ç§„É´„Åã„Çâ‰æùÂ≠ò„Åï„Çå„Çã‚îÇ    ‚îú‚îÄ‚îÄ alb.tf‚îÇ    ‚îú‚îÄ‚îÄ api_gateway.tf‚îÇ    ‚îú‚îÄ‚îÄ cloudfront.tf‚îÇ    ‚îú‚îÄ‚îÄ ec2.tf‚îÇ    ‚îú‚îÄ‚îÄ ecs.tf‚îÇ    ‚îú‚îÄ‚îÄ eks.tf‚îÇ    ‚îú‚îÄ‚îÄ ses.tf‚îÇ    ‚îú‚îÄ‚îÄ sns.tf‚îÇ    ‚îú‚îÄ‚îÄ üìÇ tes/ # TesÁí∞Â¢É‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # application„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ‚îÇ    ...‚îÇ    ‚îÇ‚îÇ    ‚îú‚îÄ‚îÄ üìÇ stg/ # StgÁí∞Â¢É‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # application„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ‚îÇ    ...‚îÇ    ‚îÇ‚îÇ    ‚îî‚îÄ‚îÄ üìÇ prd/ # PrdÁí∞Â¢É‚îÇ          ‚îú‚îÄ‚îÄ backend.tfvars # application„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ          ...‚îÇ‚îú‚îÄ‚îÄ üìÇ auth/‚îÇ    ‚îú‚îÄ‚îÄ provider.tf‚îÇ    ‚îú‚îÄ‚îÄ output.tf # ‰ªñ„ÅÆ tfstate „Éï„Ç°„Ç§„É´„Åã„Çâ‰æùÂ≠ò„Åï„Çå„Çã‚îÇ    ‚îú‚îÄ‚îÄ iam.tf‚îÇ    ‚îú‚îÄ‚îÄ üìÇ tes/ # TesÁí∞Â¢É‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # auth„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ‚îÇ    ...‚îÇ    ‚îÇ‚îÇ    ‚îú‚îÄ‚îÄ üìÇ stg/ # StgÁí∞Â¢É‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # auth„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ‚îÇ    ...‚îÇ    ‚îÇ‚îÇ    ‚îî‚îÄ‚îÄ üìÇ prd/ # PrdÁí∞Â¢É‚îÇ          ‚îú‚îÄ‚îÄ backend.tfvars # auth„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ          ...‚îÇ‚îú‚îÄ‚îÄ üìÇ cicd/‚îÇ    ‚îú‚îÄ‚îÄ provider.tf‚îÇ    ‚îú‚îÄ‚îÄ remote_state.tf # terraform_remote_state „Éñ„É≠„ÉÉ„ÇØ„Çí‰ΩøÁî®„Åô„Çã‚îÇ    ‚îú‚îÄ‚îÄ codebuild.tf‚îÇ    ‚îú‚îÄ‚îÄ codecommit.tf‚îÇ    ‚îú‚îÄ‚îÄ codedeploy.tf‚îÇ    ‚îú‚îÄ‚îÄ üìÇ tes/ # TesÁí∞Â¢É‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # cicd„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ‚îÇ    ...‚îÇ    ‚îÇ‚îÇ    ‚îú‚îÄ‚îÄ üìÇ stg/ # StgÁí∞Â¢É‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # cicd„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ‚îÇ    ...‚îÇ    ‚îÇ‚îÇ    ‚îî‚îÄ‚îÄ üìÇ prd/ # PrdÁí∞Â¢É‚îÇ          ‚îú‚îÄ‚îÄ backend.tfvars # cicd„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ          ...‚îÇ‚îú‚îÄ‚îÄ üìÇ datastore/‚îÇ    ‚îú‚îÄ‚îÄ provider.tf‚îÇ    ‚îú‚îÄ‚îÄ output.tf # ‰ªñ„ÅÆ tfstate „Éï„Ç°„Ç§„É´„Åã„Çâ‰æùÂ≠ò„Åï„Çå„Çã‚îÇ    ‚îú‚îÄ‚îÄ remote_state.tf # terraform_remote_state „Éñ„É≠„ÉÉ„ÇØ„Çí‰ΩøÁî®„Åô„Çã‚îÇ    ‚îú‚îÄ‚îÄ elasticache.tf‚îÇ    ‚îú‚îÄ‚îÄ rds.tf‚îÇ    ‚îú‚îÄ‚îÄ s3.tf‚îÇ    ‚îú‚îÄ‚îÄ üìÇ tes/ # TesÁí∞Â¢É‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # datastore„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ‚îÇ    ...‚îÇ    ‚îÇ‚îÇ    ‚îú‚îÄ‚îÄ üìÇ stg/ # StgÁí∞Â¢É‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # datastore„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ‚îÇ    ...‚îÇ    ‚îÇ‚îÇ    ‚îî‚îÄ‚îÄ üìÇ prd/ # PrdÁí∞Â¢É‚îÇ          ‚îú‚îÄ‚îÄ backend.tfvars # datastore„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ          ...‚îÇ‚îú‚îÄ‚îÄ üìÇ monitor/‚îÇ    ‚îú‚îÄ‚îÄ provider.tf‚îÇ    ‚îú‚îÄ‚îÄ remote_state.tf # terraform_remote_state „Éñ„É≠„ÉÉ„ÇØ„Çí‰ΩøÁî®„Åô„Çã‚îÇ    ‚îú‚îÄ‚îÄ cloudwatch.tf‚îÇ    ‚îú‚îÄ‚îÄ üìÇ tes/ # TesÁí∞Â¢É‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # monitor„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ‚îÇ    ...‚îÇ    ‚îÇ‚îÇ    ‚îú‚îÄ‚îÄ üìÇ stg/ # StgÁí∞Â¢É‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # monitor„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ‚îÇ    ...‚îÇ    ‚îÇ‚îÇ    ‚îî‚îÄ‚îÄ üìÇ prd/ # PrdÁí∞Â¢É‚îÇ          ‚îú‚îÄ‚îÄ backend.tfvars # monitor„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ          ...‚îÇ‚îî‚îÄ‚îÄ üìÇ network      ‚îú‚îÄ‚îÄ provider.tf      ‚îú‚îÄ‚îÄ output.tf # ‰ªñ„ÅÆ tfstate „Éï„Ç°„Ç§„É´„Åã„ÇâÂèÇÁÖß„Åß„Åç„Çã„Çà„ÅÜ„Å´„ÄÅoutput„Éñ„É≠„ÉÉ„ÇØ„ÇíÂÆöÁæ©„Åô„Çã      ‚îú‚îÄ‚îÄ route53.tf      ‚îú‚îÄ‚îÄ vpc.tf      ‚îú‚îÄ‚îÄ üìÇ tes/ # TesÁí∞Â¢É      ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # network„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã      ‚îÇ    ...      ‚îÇ      ‚îú‚îÄ‚îÄ üìÇ stg/ # StgÁí∞Â¢É      ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # network„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã      ‚îÇ    ...      ‚îÇ      ‚îî‚îÄ‚îÄ üìÇ prd/ # PrdÁí∞Â¢É           ‚îú‚îÄ‚îÄ backend.tfvars # network„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã           ...„ÄêÁ®ÆÈ°û„Ç∞„É´„Éº„ÉóÂà•„Äë„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‚ñº Áï∞„Å™„Çã„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆÂ†¥ÂêàAWS„É™„ÇΩ„Éº„Çπ„ÅÆÁ®ÆÈ°û„Ç∞„É´„Éº„ÉóÂà•„ÅÆÂàÜÂâ≤„Éë„Çø„Éº„É≥„ÅÆÂ†¥Âêà„ÄÅÁï∞„Å™„Çã„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅßÁÆ°ÁêÜ„Åô„Çã„Å®„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅåÂ¢ó„ÅàÈÅé„Åé„Å¶„Åó„Åæ„ÅÑ„Åæ„Åô„ÄÇ„Åù„ÅÆ„Åü„ÇÅ„ÄÅ„Åì„Çå„ÅØ„ÅäÂãß„ÇÅ„Åó„Åæ„Åõ„Çì„ÄÇ‚ñº Âêå„Åò„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆÂ†¥Âêà„Åì„ÅÆÂ†¥Âêà„Åß„ÅØ„ÄÅAWS„É™„ÇΩ„Éº„Çπ„ÅÆÁ®ÆÈ°û„Ç∞„É´„Éº„ÉóÂà•„Å´ÂàÜÂâ≤„Åó„Åütfstate„Éï„Ç°„Ç§„É´„Çí„ÄÅÁï∞„Å™„Çã„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅßÁÆ°ÁêÜ„Åó„Åæ„Åô„ÄÇ‰æã„Åà„Å∞„ÄÅtfstate„Éï„Ç°„Ç§„É´ÂàÜÂâ≤„Å´Âü∫„Å•„ÅÑ„Å¶„ÄÅ„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„ÉâÂÜÖ„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‰æã„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Å´„Å™„Çä„Åæ„Åô„ÄÇ„Åì„ÅÆ‰æã„Åß„ÅØ„ÄÅÁä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥„Å®Âêå„ÅòÁä∂Ê≥Å„Çí‰ªÆÂÆö„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ# TesÁí∞Â¢É„ÅÆÁä∂ÊÖã„ÅÆ„Åø„ÇíÁÆ°ÁêÜ„Åô„Çã„Éê„Ç±„ÉÉ„Éàü™£ tes-bucket/‚îú‚îÄ‚îÄ üìÇ application‚îÇ    ‚îî‚îÄ‚îÄ terraform.tfstate # application„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§‚îÇ‚îú‚îÄ‚îÄ üìÇ auth‚îÇ    ‚îî‚îÄ‚îÄ terraform.tfstate # auth„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§‚îÇ‚îú‚îÄ‚îÄ üìÇ cicd‚îÇ    ‚îî‚îÄ‚îÄ terraform.tfstate # cicd„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§‚îÇ‚îú‚îÄ‚îÄ üìÇ datastore‚îÇ    ‚îî‚îÄ‚îÄ terraform.tfstate # datastore„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§‚îÇ‚îú‚îÄ‚îÄ üìÇ monitor‚îÇ    ‚îî‚îÄ‚îÄ terraform.tfstate # monitor„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§‚îÇ‚îî‚îÄ‚îÄ üìÇ network      ‚îî‚îÄ‚îÄ terraform.tfstate # network„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§# StgÁí∞Â¢É„ÅÆÁä∂ÊÖã„ÅÆ„Åø„ÇíÁÆ°ÁêÜ„Åô„Çã„Éê„Ç±„ÉÉ„Éàü™£ stg-bucket/‚îÇ...# PrdÁí∞Â¢É„ÅÆÁä∂ÊÖã„ÅÆ„Åø„ÇíÁÆ°ÁêÜ„Åô„Çã„Éê„Ç±„ÉÉ„Éàü™£ prd-bucket/‚îÇ...AWS„É™„ÇΩ„Éº„Çπ„ÅÆÁä∂ÊÖã„ÅÆÂ§âÊõ¥È†ªÂ∫¶„Ç∞„É´„Éº„ÉóÂà•„Åì„ÅÆÂàÜÂâ≤ÊñπÊ≥ï„Å´„Å§„ÅÑ„Å¶AWS„É™„ÇΩ„Éº„Çπ„ÅÆÁä∂ÊÖã„ÅÆÂ§âÊõ¥È†ªÂ∫¶„Ç∞„É´„Éº„ÉóÂà•„Åßtfstate„Éï„Ç°„Ç§„É´„ÇíÂàÜÂâ≤„Åó„ÄÅ‰∏≠ÈñìÂ±§„ÇÇ„Åì„Çå„Å´Âü∫„Å•„ÅÑ„Å¶Ë®≠Ë®à„Åó„Åæ„Åô„ÄÇ„Åì„ÅÆÂàÜÂâ≤ÊñπÊ≥ï„Å´„Çà„Çä„ÄÅÂêÑÂ§âÊõ¥È†ªÂ∫¶„Ç∞„É´„Éº„Éó„ÅÆÁÆ°ÁêÜËÄÖ„Åå‰∫í„ÅÑ„Å´ÂΩ±Èüø„ÇíÂèó„Åë„Åö„Å´„ÄÅterraform„Ç≥„Éû„É≥„Éâ„ÅÆÁµêÊûú„ÇíÂæó„Çâ„Çå„Çã„Çà„ÅÜ„Å´„Å™„Çä„Åæ„Åô„ÄÇhttps://www.reddit.com/r/Terraform/comments/126jwa1/comment/jea9bjk/?utm_source=share\u0026utm_medium=web3x\u0026utm_name=web3xcss\u0026utm_term=1\u0026utm_content=share_button‚ñ∂ „Åä„Åô„Åô„ÇÅÂ∫¶„Å´„Å§„ÅÑ„Å¶„ÄêÂ§âÊõ¥È†ªÂ∫¶„Ç∞„É´„Éº„ÉóÂà•„ÄëÁä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥‰æã„Åà„Å∞„ÄÅ‰ª•‰∏ã„ÅÆÂ§âÊõ¥È†ªÂ∫¶„Ç∞„É´„Éº„Éó„Å´ÂàÜÂâ≤„Åó„ÅüÁä∂Ê≥Å„Å®‰ªÆÂÆö„Åó„Åæ„Åô„ÄÇÂ§âÊõ¥È´òÈ†ªÂ∫¶„Ç∞„É´„Éº„ÉóÂ§âÊõ¥‰∏≠È†ªÂ∫¶„Ç∞„É´„Éº„ÉóÂ§âÊõ¥‰ΩéÈ†ªÂ∫¶„Ç∞„É´„Éº„Éó„Åì„Åì„Åß‰ªÆÂÆö„Åó„ÅüÁä∂Ê≥Å„Åß„ÅØ„ÄÅÂêÑ„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆtfstate„Éï„Ç°„Ç§„É´„ÅÆ‰æùÂ≠ò„ÅØ‰∏ÄÊñπÂêëÊúÄÁµÇÁöÑ„Å´„ÄÅÂ§âÊõ¥‰ΩéÈ†ªÂ∫¶„Ç∞„É´„Éº„Éó„ÅÆ tfstate „Éï„Ç°„Ç§„É´„Å´‰æùÂ≠ò„Åó„Å¶„ÅÑ„Çã„Å®„Åó„Åæ„Åô„ÄÇ„Åù„ÅÆ„Åü„ÇÅ„ÄÅÊÉ≥ÂÆö„Åï„Çå„ÇãÁä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Å´„Å™„Çä„Åæ„Åô„ÄÇ„Å™„Åä„ÄÅ‰æùÂ≠òÊñπÂêë„ÅØÁä∂Ê≥Å„Å´„Çà„Å£„Å¶Áï∞„Å™„Çã„Åì„Å®„Çí„ÅîÂÆπËµ¶„Åè„Å†„Åï„ÅÑ„ÄÇ---title: AWS„É™„ÇΩ„Éº„Çπ„ÅÆÁä∂ÊÖã„ÅÆÂ§âÊõ¥È†ªÂ∫¶„Ç∞„É´„Éº„ÉóÂà•---%%{init:{'theme':'default'}}%%flowchart TB    subgraph AWS        subgraph tes-bucket            high[\"high-freq-tfstate\u003cbr\u003e‰æã: API Gateway, CloudFront, CloudWatch, IAM\"]            middle[\"middle-freq-tfstate\u003cbr\u003e‰æã: ALB, EC2, ECS, EKS, ElastiCache, RDS, S3, SES, SNS\"]            low[\"low-freq-tfstate\u003cbr\u003e‰æã: Route53, VPC\"]            high-...-\u003elow            middle-..-\u003elow        end    subgraph stg-bucket        stg[\"tfstate\"]    end    subgraph prd-bucket        prd[\"tfstate\"]    end    end„ÄêÂ§âÊõ¥È†ªÂ∫¶„Ç∞„É´„Éº„ÉóÂà•„Äë„É™„Éù„Ç∏„Éà„É™„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‚ñº Áï∞„Å™„Çã„É™„Éù„Ç∏„Éà„É™„ÅÆÂ†¥ÂêàAWS„É™„ÇΩ„Éº„Çπ„ÅÆÂ§âÊõ¥È†ªÂ∫¶„Ç∞„É´„Éº„ÉóÂà•„ÅÆÂàÜÂâ≤„Éë„Çø„Éº„É≥„ÅÆÂ†¥Âêà„ÄÅÁï∞„Å™„Çã„É™„Éù„Ç∏„Éà„É™„ÅßÁÆ°ÁêÜ„Åô„Çã„Å®„É™„Éù„Ç∏„Éà„É™„ÅåÂ¢ó„ÅàÈÅé„Åé„Å¶„Åó„Åæ„ÅÑ„Åæ„Åô„ÄÇ„Åù„ÅÆ„Åü„ÇÅ„ÄÅ„Åì„Çå„ÅØ„ÅäÂãß„ÇÅ„Åó„Åæ„Åõ„Çì„ÄÇ‚ñº Âêå„Åò„É™„Éù„Ç∏„Éà„É™„ÅÆÂ†¥Âêà„Åì„ÅÆÂ†¥Âêà„Åß„ÅØ„ÄÅAWS„É™„ÇΩ„Éº„Çπ„ÅÆÂ§âÊõ¥È†ªÂ∫¶„Ç∞„É´„Éº„ÉóÂà•„Å´ÂàÜÂâ≤„Åó„Åütfstate„Éï„Ç°„Ç§„É´„Çí„ÄÅÂêå„Åò„É™„Éù„Ç∏„Éà„É™„ÅßÁÆ°ÁêÜ„Åó„Åæ„Åô„ÄÇ‰æã„Åà„Å∞„ÄÅtfstate„Éï„Ç°„Ç§„É´ÂàÜÂâ≤„Å´Âü∫„Å•„ÅÑ„Å¶„ÄÅ„É™„Éù„Ç∏„Éà„É™„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‰æã„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Å´„Å™„Çä„Åæ„Åô„ÄÇ„Åì„ÅÆ‰æã„Åß„ÅØ„ÄÅÁä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥„Å®Âêå„ÅòÁä∂Ê≥Å„Çí‰ªÆÂÆö„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇüê± aws-repository/‚îú‚îÄ‚îÄ üìÇ high-freq # È´òÈ†ªÂ∫¶Â§âÊõ¥„Ç∞„É´„Éº„Éó‚îÇ    ‚îú‚îÄ‚îÄ provider.tf‚îÇ    ‚îú‚îÄ‚îÄ remote_state.tf # terraform_remote_state „Éñ„É≠„ÉÉ„ÇØ„Çí‰ΩøÁî®„Åô„Çã‚îÇ    ‚îú‚îÄ‚îÄ api_gateway.tf‚îÇ    ‚îú‚îÄ‚îÄ cloudfront.tf‚îÇ    ‚îú‚îÄ‚îÄ cloudwatch.tf‚îÇ    ‚îú‚îÄ‚îÄ ec2.tf‚îÇ    ‚îú‚îÄ‚îÄ ecs.tf‚îÇ    ‚îú‚îÄ‚îÄ eks.tf‚îÇ    ‚îú‚îÄ‚îÄ iam.tf‚îÇ    ‚îú‚îÄ‚îÄ üìÇ tes/ # TesÁí∞Â¢É‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # high-freq„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ‚îÇ    ...‚îÇ    ‚îÇ‚îÇ    ‚îú‚îÄ‚îÄ üìÇ stg/ # StgÁí∞Â¢É‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # high-freq„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ‚îÇ    ...‚îÇ    ‚îÇ‚îÇ    ‚îî‚îÄ‚îÄ üìÇ prd/ # PrdÁí∞Â¢É‚îÇ          ‚îú‚îÄ‚îÄ backend.tfvars # high-freq„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ          ...‚îÇ‚îú‚îÄ‚îÄ üìÇ low-freq # ‰ΩéÈ†ªÂ∫¶Â§âÊõ¥„Ç∞„É´„Éº„Éó‚îÇ    ‚îú‚îÄ‚îÄ provider.tf‚îÇ    ‚îú‚îÄ‚îÄ output.tf # ‰ªñ„ÅÆ tfstate „Éï„Ç°„Ç§„É´„Åã„Çâ‰æùÂ≠ò„Åï„Çå„Çã‚îÇ    ‚îú‚îÄ‚îÄ route53.tf‚îÇ    ‚îú‚îÄ‚îÄ vpc.tf‚îÇ    ‚îú‚îÄ‚îÄ üìÇ tes‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # low-freq„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ‚îÇ    ...‚îÇ    ‚îÇ‚îÇ    ‚îú‚îÄ‚îÄ üìÇ stg‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # low-freq„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ    ‚îÇ    ...‚îÇ    ‚îÇ‚îÇ    ‚îî‚îÄ‚îÄ üìÇ prd‚îÇ          ‚îú‚îÄ‚îÄ backend.tfvars # low-freq„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã‚îÇ          ...‚îÇ‚îî‚îÄ‚îÄ üìÇ middle-freq # ‰∏≠È†ªÂ∫¶Â§âÊõ¥„Ç∞„É´„Éº„Éó (È´òÈ†ªÂ∫¶„Å®„ÇÇ‰ΩéÈ†ªÂ∫¶„Å®„ÇÇË®Ä„Åà„Å™„ÅÑ„É™„ÇΩ„Éº„Çπ)      ‚îú‚îÄ‚îÄ provider.tf      ‚îú‚îÄ‚îÄ remote_state.tf # terraform_remote_state „Éñ„É≠„ÉÉ„ÇØ„Çí‰ΩøÁî®„Åô„Çã      ‚îú‚îÄ‚îÄ elasticache.tf      ‚îú‚îÄ‚îÄ rds.tf      ‚îú‚îÄ‚îÄ s3.tf      ‚îú‚îÄ‚îÄ ses.tf      ‚îú‚îÄ‚îÄ üìÇ tes      ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # middle-freq„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã      ‚îÇ    ...      ‚îÇ      ‚îú‚îÄ‚îÄ üìÇ stg      ‚îÇ    ‚îú‚îÄ‚îÄ backend.tfvars # middle-freq„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã      ‚îÇ    ...      ‚îÇ      ‚îî‚îÄ‚îÄ üìÇ prd           ‚îú‚îÄ‚îÄ backend.tfvars # middle-freq„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§ tfstate „Éï„Ç°„Ç§„É´„ÇíÊåáÂÆö„Åô„Çã           ...„ÄêÂ§âÊõ¥È†ªÂ∫¶„Ç∞„É´„Éº„ÉóÂà•„Äë„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‚ñº Áï∞„Å™„Çã„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆÂ†¥ÂêàAWS„É™„ÇΩ„Éº„Çπ„ÅÆÂ§âÊõ¥È†ªÂ∫¶„Ç∞„É´„Éº„ÉóÂà•„ÅÆÂàÜÂâ≤„Éë„Çø„Éº„É≥„ÅÆÂ†¥Âêà„ÄÅÁï∞„Å™„Çã„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅßÁÆ°ÁêÜ„Åô„Çã„Å®„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅåÂ¢ó„ÅàÈÅé„Åé„Å¶„Åó„Åæ„ÅÑ„Åæ„Åô„ÄÇ„Åù„ÅÆ„Åü„ÇÅ„ÄÅ„Åì„Çå„ÅØ„ÅäÂãß„ÇÅ„Åó„Åæ„Åõ„Çì„ÄÇ‚ñº Âêå„Åò„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅÆÂ†¥Âêà„Åì„ÅÆÂ†¥Âêà„Åß„ÅØ„ÄÅAWS„É™„ÇΩ„Éº„Çπ„ÅÆÂ§âÊõ¥È†ªÂ∫¶„Ç∞„É´„Éº„ÉóÂà•„Å´ÂàÜÂâ≤„Åó„Åütfstate„Éï„Ç°„Ç§„É´„Çí„ÄÅÁï∞„Å™„Çã„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„ÅßÁÆ°ÁêÜ„Åó„Åæ„Åô„ÄÇ‰æã„Åà„Å∞„ÄÅtfstate„Éï„Ç°„Ç§„É´ÂàÜÂâ≤„Å´Âü∫„Å•„ÅÑ„Å¶„ÄÅ„É™„É¢„Éº„Éà„Éê„ÉÉ„ÇØ„Ç®„É≥„ÉâÂÜÖ„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÊàê‰æã„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Å´„Å™„Çä„Åæ„Åô„ÄÇ„Åì„ÅÆ‰æã„Åß„ÅØ„ÄÅÁä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇÂõ≥„Å®Âêå„ÅòÁä∂Ê≥Å„Çí‰ªÆÂÆö„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ# TesÁí∞Â¢É„ÅÆÁä∂ÊÖã„ÅÆ„Åø„ÇíÁÆ°ÁêÜ„Åô„Çã„Éê„Ç±„ÉÉ„Éàü™£ tes-bucket/‚îú‚îÄ‚îÄ üìÇ high-freq‚îÇ    ‚îî‚îÄ‚îÄ terraform.tfstate # high-freq„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§‚îÇ‚îú‚îÄ‚îÄ üìÇ middle-freq‚îÇ    ‚îî‚îÄ‚îÄ terraform.tfstate # middle-freq„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§‚îÇ‚îî‚îÄ‚îÄ üìÇ low-freq      ‚îî‚îÄ‚îÄ terraform.tfstate # low-freq„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁä∂ÊÖã„ÇíÊåÅ„Å§# StgÁí∞Â¢É„ÅÆÁä∂ÊÖã„ÅÆ„Åø„ÇíÁÆ°ÁêÜ„Åô„Çã„Éê„Ç±„ÉÉ„Éàü™£ stg-bucket/‚îÇ...# PrdÁí∞Â¢É„ÅÆÁä∂ÊÖã„ÅÆ„Åø„ÇíÁÆ°ÁêÜ„Åô„Çã„Éê„Ç±„ÉÉ„Éàü™£ prd-bucket/‚îÇ...10. „Åä„Çè„Çä„Å´Terraform„ÅÆtfstate„Éï„Ç°„Ç§„É´„ÅÆÂàÜÂâ≤„Éë„Çø„Éº„É≥„Çí„ÇÇ„Çä„ÇÇ„ÇäÂ∏ÉÊïô„Åó„Åæ„Åó„Åü„ÄÇ„Åú„Å≤Êé°Áî®„Åó„Å¶„Åø„Åü„ÅÑÂàÜÂâ≤„Éë„Çø„Éº„É≥„ÅØ„ÅÇ„Å£„Åü„Åß„Åó„Çá„ÅÜ„Åã„ÄÇTerraform„ÅÆÈñãÁô∫ÁèæÂ†¥„ÅÆÂÖ∑‰ΩìÁöÑ„Å™Ë¶Å‰ª∂„ÅØÂçÉÂ∑Æ‰∏áÂà•„Åß„ÅÇ„Çä„ÄÅÁâπ„Å´tfstate„Éï„Ç°„Ç§„É´Èñì„ÅÆÁä∂ÊÖã„ÅÆ‰æùÂ≠òÈñ¢‰øÇ„ÅØÊßò„ÄÖ„Åß„Åô„ÄÇ„ÇÇ„Åó„ÄÅ„Åì„ÅÆË®ò‰∫ã„ÇíÂèÇËÄÉ„Å´Ë®≠Ë®à„Åó„Å¶„Åè„Å†„Åï„ÇãÊñπ„ÅØ„ÄÅÂàÜÂâ≤„Éë„Çø„Éº„É≥„ÇíÁèæÂ†¥„Å´ËêΩ„Å®„ÅóËæº„Çì„ÅßËß£Èáà„ÅÑ„Åü„Å†„Åë„Çã„Å®Âπ∏„ÅÑ„Åß„Åôüôáüèª‚Äç„ÄåËá™ÂàÜ„Çí‰ø°„Åò„Å¶„ÇÇ‚Ä¶‰ø°È†º„Å´Ë∂≥„Çã‰ª≤Èñì„Çí‰ø°„Åò„Å¶„ÇÇ‚Ä¶Ë™∞„Å´„ÇÇ„Çè„Åã„Çâ„Å™„ÅÑ‚Ä¶„Äç(„ÅäÂèãÈÅî„ÅÆ@nwiizo, 2023, Terraform Modules „ÅßÂÜçÂà©Áî®„Åß„Åç„Çã„ÅÆ„ÅßÊúÄÈ´ò„Åß„ÅØ„Å™„ÅÑ„Åß„Åó„Çá„ÅÜ„ÅãÔºü)Ë¨ùËæû‰ªäÂõû„ÄÅTerraform„ÅÆÂàÜÂâ≤„Éë„Çø„Éº„É≥„ÅÆÂèéÈõÜ„Å´„ÅÇ„Åü„Çä„ÄÅ‰ª•‰∏ã„ÅÆÊñπ„ÄÖ„Åã„Çâ„ÅÆÊÑèË¶ã„ÉªÂÆüË£ÖÊñπÊ≥ï„ÇÇÂèÇËÄÉ„Å´„Åï„Åõ„Å¶„ÅÑ„Åü„Å†„Åç„Åæ„Åó„Åü„ÄÇ@kiyo_12_07 „Åï„Çì@masasuzu „Åï„Çì@tozastation „Åï„Çì(„Ç¢„É´„Éï„Ç°„Éô„ÉÉ„ÉàÈ†Ü)„Åì„ÅÆÂ†¥„ÅßÊÑüË¨ùÁî≥„Åó‰∏ä„Åí„Åæ„Åôüôáüèª‚ÄçË®ò‰∫ãÈñ¢ÈÄ£„ÅÆ„Åä„Åô„Åô„ÇÅÊõ∏Á±çTerraform in Action (English Edition)‰ΩúËÄÖ:Winkler, ScottManningAmazonTerraform: Up and Running: Writing Infrastructure as Code‰ΩúËÄÖ:Brikman, YevgeniyO'Reilly MediaAmazon","isoDate":"2023-07-04T15:17:56.000Z","dateMiliSeconds":1688483876000,"authorName":"Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π","authorId":"hiroki-hasegawa"},{"title":"„ÄêArgoCDüêô„ÄëArgoCD„ÅÆ„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„Ç¢„Éº„Ç≠„ÉÜ„ÇØ„ÉÅ„É£„Å®Ëá™Âãï„Éá„Éó„É≠„Ç§„ÅÆ‰ªïÁµÑ„Åø","link":"https://hiroki-hasegawa.hatenablog.jp/entry/2023/05/02/145115","contentSnippet":"„Åì„ÅÆË®ò‰∫ã„Åã„ÇâÂæó„Çâ„Çå„ÇãÁü•Ë≠ò„Åì„ÅÆË®ò‰∫ã„ÇíË™≠„ÇÄ„Å®„ÄÅ‰ª•‰∏ã„Çí \"ÂÆåÂÖ®„Å´ÁêÜËß£\" „Åß„Åç„Åæ„Åô‚úåÔ∏èArgoCD„ÅÆ„Ç¢„Éº„Ç≠„ÉÜ„ÇØ„ÉÅ„É£„ÇíÊßãÊàê„Åô„Çã„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁ®ÆÈ°û„Å´„Å§„ÅÑ„Å¶ArgoCD„Åå„Éû„Éã„Éï„Çß„Çπ„Éà„ÇíËá™Âãï„Éá„Éó„É≠„Ç§„Åô„Çã‰ªïÁµÑ„Åø„Å´„Å§„ÅÑ„Å¶„Åì„ÅÆË®ò‰∫ã„Åã„ÇâÂæó„Çâ„Çå„ÇãÁü•Ë≠ò01. „ÅØ„Åò„ÇÅ„Å´02. Ê¶ÇË¶Å„Ç¢„Éº„Ç≠„ÉÜ„ÇØ„ÉÅ„É£„É¨„Ç§„É§„Éº„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà‰ªïÁµÑ„Åø(1) repo-server„Å´„Çà„Çã„ÇØ„É≠„Éº„É≥ÂèñÂæó(2) application-controller„Å´„Çà„Çã„Éû„Éã„Éï„Çß„Çπ„ÉàÂèñÂæó(3) application-controller„Å´„Çà„ÇãClusterÁ¢∫Ë™ç(4) application-controller„Å´„Çà„ÇãÂá¶ÁêÜÁµêÊûú‰øùÁÆ°(5) argocd-server„Å´„Çà„Çã„Ç≠„É£„ÉÉ„Ç∑„É•ÂèñÂæó(6) ÁÆ°ÁêÜËÄÖ„ÅÆ„É≠„Ç∞„Ç§„É≥(7) ID„Éó„É≠„Éê„Ç§„ÉÄ„Éº„Å∏„ÅÆË™çË®º„Éï„Çß„Éº„Ç∫ÂßîË≠≤(8) dex-server„Å´„Çà„ÇãË™çË®º„É™„ÇØ„Ç®„Çπ„ÉàÈÄÅ‰ø°(9) argocd-server„Å´„Çà„ÇãË™çÂèØ„Éï„Çß„Éº„Ç∫ÂÆüË°å(10) application-controller„Å´„Çà„Çã„Éû„Éã„Éï„Çß„Çπ„Éà„Éá„Éó„É≠„Ç§03. repo-serverrepo-server„Å®„ÅØ‰ªïÁµÑ„Åø(1) InitContainer„Å´„Çà„Çã„ÅäÂ•Ω„Åç„Å™„ÉÑ„Éº„É´„Ç§„É≥„Çπ„Éà„Éº„É´ \u0026 argocd-cli„Éê„Ç§„Éä„É™„Ç≥„Éî„Éº(2) repo-server„Å´„Çà„ÇãË™çË®ºÊÉÖÂ†±ÂèñÂæó(3) repo-server„ÅÆ„Çà„Çã„ÇØ„É≠„Éº„É≥ÂèñÂæó„Å®„Éù„Éº„É™„É≥„Ç∞(4) repo-server„Å´„Çà„Çã„Çµ„Ç§„Éâ„Ç´„Éº„Ç≥„Éº„É´(5) repo-server„Å´„Çà„ÇãÊöóÂè∑Âåñ„Ç≠„Éº„Å®ÊöóÂè∑ÂåñÂ§âÊï∞„ÅÆÂèñÂæó(6) „Çµ„Ç§„Éâ„Ç´„Éº„Å´„Çà„Çã„Éó„É©„Ç∞„Ç§„É≥Âá¶ÁêÜ„ÅÆÂèñÂæó(7) „Çµ„Ç§„Éâ„Ç´„Éº„Å´„Çà„Çã„Éó„É©„Ç∞„Ç§„É≥Âá¶ÁêÜ„ÅÆÂÆüË°å04. application-controller„ÄÅredis-serverapplication-controller„Å®„ÅØredis-server„Å®„ÅØ‰ªïÁµÑ„Åø(1) ArgoCDÁî®ClusterÁÆ°ÁêÜËÄÖ„ÅÆkubectl apply„Ç≥„Éû„É≥„Éâ(2) application-controller„Å´„Çà„ÇãArgoCDÁ≥ª„Ç´„Çπ„Çø„É†„É™„ÇΩ„Éº„Çπ„ÅÆReconciliation(3) application-controller„Å´„Çà„Çã„Éû„Éã„Éï„Çß„Çπ„ÉàÂèñÂæó(4) application-controller„Å´„Çà„Çã„Éò„É´„Çπ„ÉÅ„Çß„ÉÉ„ÇØ(5) application-controller„Å´„Çà„Çã„Éû„Éã„Éï„Çß„Çπ„ÉàÂ∑ÆÂàÜÊ§úÂá∫(6) application-controller„Å´„Çà„ÇãÂá¶ÁêÜÁµêÊûú‰øùÁÆ°(7) application-controller„Å´„Çà„Çã„Éû„Éã„Éï„Çß„Çπ„Éà„Éá„Éó„É≠„Ç§05. dex-serverdex-server„Å®„ÅØ‰ªïÁµÑ„Åø(1) „Éó„É≠„ÉÄ„ÇØ„ÉàÁî®ClusterÁÆ°ÁêÜËÄÖ„ÅÆ„É≠„Ç∞„Ç§„É≥(2) ID„Éó„É≠„Éê„Ç§„ÉÄ„Éº„Å∏„ÅÆË™çË®º„Éï„Çß„Éº„Ç∫ÂßîË≠≤(3) dex-server„Å´„Çà„ÇãË™çÂèØ„É™„ÇØ„Ç®„Çπ„Éà‰ΩúÊàê(4) dex-server„Å´„Çà„ÇãË™çÂèØ„É™„ÇØ„Ç®„Çπ„ÉàÈÄÅ‰ø°(5) ID„Éó„É≠„Éê„Ç§„ÉÄ„Éº„Å´„Çà„ÇãË™çË®º„Éï„Çß„Éº„Ç∫ÂÆüÊñΩ(6) argocd-server„Å´„Çà„ÇãË™çÂèØ„Éï„Çß„Éº„Ç∫ÂÆüÊñΩ06. argocd-server (argocd-apiserver)argocd-server„Å®„ÅØ‰ªïÁµÑ„Åø(1) application-controller„Å´„Çà„Çã„Éò„É´„Çπ„ÉÅ„Çß„ÉÉ„ÇØ(2) application-controller„Å´„Çà„Çã„Éû„Éã„Éï„Çß„Çπ„ÉàÂ∑ÆÂàÜÊ§úÂá∫(3) application-controller„Å´„Çà„ÇãÂá¶ÁêÜÁµêÊûú‰øùÁÆ°(4) application-controller„Å´„Çà„ÇãÂá¶ÁêÜÁµêÊûúÂèñÂæó(5) „Éó„É≠„ÉÄ„ÇØ„ÉàÁî®ClusterÁÆ°ÁêÜËÄÖ„ÅÆ„É≠„Ç∞„Ç§„É≥(6) Ingress„Ç≥„É≥„Éà„É≠„Éº„É©„Éº„Å´„Çà„Çã„É´„Éº„ÉÜ„Ç£„É≥„Ç∞(7) ID„Éó„É≠„Éê„Ç§„ÉÄ„Éº„Å∏„ÅÆË™çË®º„Éï„Çß„Éº„Ç∫ÂßîË≠≤(8) ID„Éó„É≠„Éê„Ç§„ÉÄ„Éº„Å´„Çà„ÇãË™çË®º„Éï„Çß„Éº„Ç∫ÂÆüÊñΩ(9) argocd-server„Å´„Çà„ÇãË™çÂèØ„Éï„Çß„Éº„Ç∫ÂÆüÊñΩ(10) application-controller„Å´„Çà„Çã„Éû„Éã„Éï„Çß„Çπ„Éà„Éá„Éó„É≠„Ç§07. „Ç¢„Éº„Ç≠„ÉÜ„ÇØ„ÉÅ„É£„ÅÆ„Åæ„Å®„ÇÅ08. „Åä„Çè„Çä„Å´Ë¨ùËæûË®ò‰∫ãÈñ¢ÈÄ£„ÅÆ„Åä„Åô„Åô„ÇÅÊõ∏Á±ç01. „ÅØ„Åò„ÇÅ„Å´„É≠„Ç±„ÉÉ„Éà„Å´‰πó„Çã„Çø„Ç≥„ÅÆ„ÉÑ„É©„ÅåËÖπÁ´ã„Å§„Çè„Éº„ÄÇÁîªÂÉèÂºïÁî®ÂÖÉÔºöArgo Project„Åï„Å¶ÊúÄËøë„ÅÆÊ•≠Âãô„Åß„ÄÅÂÖ®„Éó„É≠„ÉÄ„ÇØ„Éà„ÅÆÊäÄË°ìÂü∫Áõ§ÈñãÁô∫„ÉÅ„Éº„É†„Å´Êê∫„Çè„Å£„Å¶„Åä„Çä„ÄÅÂÖ®„Éó„É≠„ÉÄ„ÇØ„ÉàÂÖ±Êúâ„ÅÆArgoCDüêô„Å®AWS EKS„Çí„É™„Éó„É¨„Ç§„Çπ„Åó„Åæ„Åó„Åü„ÄÇ‰ªäÂõû„ÅØ„ÄÅÊé°Áî®„Åó„ÅüË®≠Ë®à„Éó„É©„ÇØ„ÉÜ„Ç£„Çπ„ÅÆÁ¥π‰ªã„ÇÇÂÖº„Å≠„Å¶„ÄÅArgoCD„ÅÆ„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„Ç¢„Éº„Ç≠„ÉÜ„ÇØ„ÉÅ„É£„Å®Ëá™Âãï„Éá„Éó„É≠„Ç§„ÅÆ‰ªïÁµÑ„Åø„ÇíË®ò‰∫ã„ÅßËß£Ë™¨„Åó„Åæ„Åó„Åü„ÄÇArgoCD„ÅØ„ÄÅkubectl„Ç≥„Éû„É≥„Éâ„Å´„Çà„Çã„Éû„Éã„Éï„Çß„Çπ„Éà„ÅÆ„Éá„Éó„É≠„Ç§„ÇíËá™ÂãïÂåñ„Åô„Çã„ÉÑ„Éº„É´„Åß„Åô„ÄÇArgoCD„ÅÆ„Ç¢„Éº„Ç≠„ÉÜ„ÇØ„ÉÅ„É£„Å´„ÅØÂ§âÈÅ∑„Åå„ÅÇ„Çä„ÄÅËß£Ë™¨„Åô„Çã„ÅÆ„ÅØÂü∑Á≠ÜÊôÇÁÇπ (2023/05/02) „ÅßÊúÄÊñ∞„ÅÆ 2.6 Á≥ª„ÅÆArgoCD„Åß„Åô„ÄÇ„Ç¢„Éº„Ç≠„ÉÜ„ÇØ„ÉÅ„É£„ÇÑ‰ªïÁµÑ„Åø„ÅØ„ÇÇ„Å°„Çç„Çì„ÄÅÂÄã„ÄÖ„ÅÆ„Éû„Éã„Éï„Çß„Çπ„Éà„ÅÆÂÆüË£Ö„Å´„ÇÇ„Å°„Çá„Å£„Å®„Å†„ÅëË®ÄÂèä„Åó„Åæ„Åô„ÄÇ„Åù„Çå„Åß„ÅØ„ÄÅ„ÇÇ„Çä„ÇÇ„ÇäÂ∏ÉÊïô„Åó„Å¶„ÅÑ„Åç„Åæ„Åôüòó02. Ê¶ÇË¶Å„Ç¢„Éº„Ç≠„ÉÜ„ÇØ„ÉÅ„É£„É¨„Ç§„É§„Éº„Åæ„Åö„ÅØ„ÄÅArgoCD„ÅÆ„Ç¢„Éº„Ç≠„ÉÜ„ÇØ„ÉÅ„É£„ÅÆ„É¨„Ç§„É§„Éº„Åå„Å©„ÅÆ„Çà„ÅÜ„Å´„Å™„Å£„Å¶„ÅÑ„Çã„Åã„ÇíË¶ã„Å¶„ÅÑ„Åç„Åæ„Åó„Çá„ÅÜ„ÄÇArgoCDÂÖ¨Âºè„Åã„Çâ„ÄÅ„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÂõ≥„ÅåÂÖ¨Èñã„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇÂõ≥„Åã„Çâ„ÄÅÊ¨°„ÅÆ„Çà„ÅÜ„Å™„Åì„Å®„Åå„Çè„Åã„Çä„Åæ„Åôüëá‰∏ã‰Ωç„É¨„Ç§„É§„ÉºÂêë„Åç„Å´„Åó„Åã‰æùÂ≠òÊñπÂêë„Åå„Å™„Åè„ÄÅ‰æã„Åà„Å∞„Ç≥„Ç¢„Éâ„É°„Ç§„É≥„Å®„Ç§„É≥„Éï„É©„ÅÆ„É¨„Ç§„É§„ÉºÈñì„Åß‰æùÂ≠òÊÄß„ÅØÈÄÜËª¢„Åï„Åõ„Å¶„ÅÑ„Å™„ÅÑ„ÄÇ„É¨„Ç§„É§„Éº„ÅÆÁ®ÆÈ°û (UI„ÄÅ„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„ÄÅ„Ç≥„Ç¢„Éâ„É°„Ç§„É≥„ÄÅ„Ç§„É≥„Éï„É©) „Å®„Åù„Çå„Çâ„ÅÆ‰æùÂ≠òÊñπÂêë„Åã„Çâ„ÄÅ„É¨„Ç§„É§„Éº„Éâ„Ç¢„Éº„Ç≠„ÉÜ„ÇØ„ÉÅ„É£„ÅÆ„Çà„ÅÜ„Å™„É¨„Ç§„É§„Éº„Å´ÂàÜ„Åë„Å¶„ÅÑ„Çã„ÄÇÁâπ„Å´„Ç≥„Ç¢„Éâ„É°„Ç§„É≥„É¨„Ç§„É§„Éº„ÅåÁã¨Á´ã„Åó„Åü„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„Å´ÂàÜÂâ≤„Åï„Çå„Å¶„Åä„Çä„ÄÅ„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„Ç¢„Éº„Ç≠„ÉÜ„ÇØ„ÉÅ„É£„ÇíÊé°Áî®„Åó„Å¶„ÅÑ„Çã„ÄÇargo-cd/docs/developer-guide/architecture/components.md at v2.8.0 ¬∑ argoproj/argo-cd ¬∑ GitHub‚ñ∂ ArgoCD„ÅÆ„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„Ç¢„Éº„Ç≠„ÉÜ„ÇØ„ÉÅ„É£„ÅÆÂàÜÂâ≤Âçò‰Ωç„Å´„Å§„ÅÑ„Å¶Monolith to Microservices: Evolutionary Patterns to Transform Your Monolith (English Edition)‚ñ∂ ArgoCD„ÅÆ„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„Ç¢„Éº„Ç≠„ÉÜ„ÇØ„ÉÅ„É£„ÅÆË®≠Ë®àÂõ≥„Å´„Å§„ÅÑ„Å¶https://microsoft.github.io/code-with-engineering-playbook/design/diagram-types/DesignDiagramsTemplates/componentDiagrams/„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÊ¨°„Å´„ÄÅ„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁ®ÆÈ°û„ÇíÁ¥π‰ªã„Åó„Åæ„Åô„ÄÇArgoCD„ÅÆÂêÑ„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅåÁµÑ„ÅøÂêà„Çè„Åï„Çä„ÄÅ„Éû„Éã„Éï„Çß„Çπ„Éà„ÅÆËá™ÂãïÁöÑ„Å™„Éá„Éó„É≠„Ç§„ÇíÂÆüÁèæ„Åó„Åæ„Åô„ÄÇArgoCD (2.6Á≥ª) „ÅÆ„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅØ„ÅÑ„Åè„Å§„Åã„ÅÇ„Çä„ÄÅ‰∏ªË¶Å„Å™„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÁ®ÆÈ°û„Å®„É¨„Ç§„É§„Éº„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Åß„Åôüëá „Ç≥„É≥„Éù„Éº„Éç„É≥„Éà                       „É¨„Ç§„É§„Éº              Ê©üËÉΩ                                                                                                                                                                                                             argocd-server(argocd-apiserver)  UI„Éª„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥  „Åø„Çì„Å™„Åå„Çà„ÅèÁü•„ÇãArgoCD„ÅÆ„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ„Åß„Åô„ÄÇ„Åæ„Åü„ÄÅArgoCD„ÅÆAPI„Å®„Åó„Å¶„ÇÇÊ©üËÉΩ„Åó„Åæ„Åô„ÄÇÁèæÂú®„ÄÅË§áÊï∞„ÅÆ„É¨„Ç§„É§„Éº„ÅÆË≤¨Âãô„ÇíÊåÅ„Å£„Å¶„Åä„Çä„ÄÅÂ∞ÜÊù•ÁöÑ„Å´UI„Å®„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„ÅØÁï∞„Å™„Çã„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„Å´ÂàÜÂâ≤„Åï„Çå„Çã„Åã„ÇÇ„Åó„Çå„Åæ„Åõ„Çì„ÄÇ  application-controller               „Ç≥„Ç¢„Éâ„É°„Ç§„É≥          Cluster„Å´„Éû„Éã„Éï„Çß„Çπ„Éà„Çí„Éá„Éó„É≠„Ç§„Åó„Åæ„Åô„ÄÇ„Åæ„Åü„ÄÅArgoCDÁ≥ª„Ç´„Çπ„Çø„É†„É™„ÇΩ„Éº„Çπ„ÅÆ„Ç´„Çπ„Çø„É†„Ç≥„É≥„Éà„É≠„Éº„É©„Éº„Å®„Åó„Å¶„ÇÇÊ©üËÉΩ„Åó„Åæ„Åô„ÄÇ                                                                                            repo-server                          „Ç≥„Ç¢„Éâ„É°„Ç§„É≥          „Éû„Éã„Éï„Çß„Çπ„Éà/„ÉÅ„É£„Éº„Éà„É™„Éù„Ç∏„Éà„É™„Åã„Çâ„ÇØ„É≠„Éº„É≥„ÇíÂèñÂæó„Åó„Åæ„Åô„ÄÇ„Åæ„Åü„ÄÅ„ÇØ„É≠„Éº„É≥„Åã„Çâ„Éû„Éã„Éï„Çß„Çπ„Éà„Çí‰ΩúÊàê„Åó„Åæ„Åô„ÄÇ                                                                                                        redis-server                         „Ç§„É≥„Éï„É©              application-controller„ÅÆÂá¶ÁêÜÁµêÊûú„ÅÆ„Ç≠„É£„ÉÉ„Ç∑„É•„Çí‰øùÁÆ°„Åó„Åæ„Åô„ÄÇ                                                                                                                                                       dex-server                           „Ç§„É≥„Éï„É©              SSO„ÇíÊé°Áî®„Åô„ÇãÂ†¥Âêà„ÄÅargocd-server„ÅÆ‰ª£„Çè„Çä„Å´Ë™çÂèØ„É™„ÇØ„Ç®„Çπ„Éà„Çí‰ΩúÊàê„Åó„ÄÅ„Åæ„ÅüID„Éó„É≠„Éê„Ç§„ÉÄ„Éº„Å´ÈÄÅ‰ø°„Åó„Åæ„Åô„ÄÇ„Åì„Çå„Å´„Çà„Çä„ÄÅargocd-server‰∏ä„ÅÆË™çË®º„Éï„Çß„Éº„Ç∫„ÇíID„Éó„É≠„Éê„Ç§„ÉÄ„Éº„Å´ÂßîË≠≤„Åß„Åç„Åæ„Åô„ÄÇ                                 GitOps and Kubernetes: Continuous Deployment with Argo CD, Jenkins X, and Flux‰ª•Èôç„ÅÆÂõ≥„ÅÆÂá°‰æã„Åß„Åô„ÄÇArgoCD„ÅÆÂêÑ„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà (application-controller„ÄÅargocd-server„ÄÅdex-server„ÄÅrepo-server) „Å®ÂêÑ„É™„ÇΩ„Éº„Çπ (Application„ÄÅAppProject) „ÇíÂå∫Âà•„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ‰ªïÁµÑ„Åø„Åù„Çå„Åß„ÅØ„ÄÅArgoCD„ÅØ„ÄÅ„Å©„ÅÆ„Çà„ÅÜ„Å´„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÇíÁµÑ„ÅøÂêà„Çè„Åõ„Å¶„ÄÅ„Éû„Éã„Éï„Çß„Çπ„Éà„Çí„Éá„Éó„É≠„Ç§„Åô„Çã„ÅÆ„Åß„Åó„Çá„ÅÜ„Åã„ÄÇ„Åì„Åì„Åß„ÅØ„Éó„É≠„ÉÄ„ÇØ„ÉàÁî®ClusterÁÆ°ÁêÜËÄÖ („Éá„Éó„É≠„Ç§ÂÖà„Å®„Å™„ÇãCluster„ÇíÁÆ°ÁêÜ„Åô„Çã„Ç®„É≥„Ç∏„Éã„Ç¢) „ÅØ„ÄÅArgoCD„ÅÆ„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ„Çí‰ªã„Åó„Å¶„Éû„Éã„Éï„Çß„Çπ„Éà„Çí„Éá„Éó„É≠„Ç§„Åô„Çã„Å®„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇ„Åæ„Åö„ÅØ„ÄÅÊ¶ÇË¶Å„ÇíË™¨Êòé„Åó„Å¶„ÅÑ„Åç„Åæ„Åô„ÄÇ(1) repo-server„Å´„Çà„Çã„ÇØ„É≠„Éº„É≥ÂèñÂæóArgoCD„ÅÆCluster‰∏ä„Åß„ÄÅrepo-server„Åå„Éû„Éã„Éï„Çß„Çπ„Éà/„ÉÅ„É£„Éº„Éà„É™„Éù„Ç∏„Éà„É™„ÅÆ„ÇØ„É≠„Éº„É≥„ÇíÂèñÂæó„Åó„Åæ„Åô„ÄÇ(2) application-controller„Å´„Çà„Çã„Éû„Éã„Éï„Çß„Çπ„ÉàÂèñÂæóapplication-controller„ÅØ„ÄÅrepo-server„Åã„Çâ„Éû„Éã„Éï„Çß„Çπ„Éà„ÇíÂèñÂæó„Åó„Åæ„Åô„ÄÇ(3) application-controller„Å´„Çà„ÇãClusterÁ¢∫Ë™çapplication-controller„ÅØ„ÄÅ„Éó„É≠„ÉÄ„ÇØ„ÉàÁî®Cluster„ÅÆÁèæÁä∂„ÇíÁ¢∫Ë™ç„Åó„Åæ„Åô„ÄÇ(4) application-controller„Å´„Çà„ÇãÂá¶ÁêÜÁµêÊûú‰øùÁÆ°application-controller„ÅØ„ÄÅÂá¶ÁêÜÁµêÊûú„Çíredis-server„Å´‰øùÁÆ°„Åó„Åæ„Åô„ÄÇ(5) argocd-server„Å´„Çà„Çã„Ç≠„É£„ÉÉ„Ç∑„É•ÂèñÂæóargocd-server„ÅØ„ÄÅredis-server„Åã„Çâ„Ç≠„É£„ÉÉ„Ç∑„É•„ÇíÂèñÂæó„Åó„Åæ„Åô„ÄÇ(6) ÁÆ°ÁêÜËÄÖ„ÅÆ„É≠„Ç∞„Ç§„É≥„Éó„É≠„ÉÄ„ÇØ„ÉàÁî®ClusterÁÆ°ÁêÜËÄÖ„ÅØ„ÄÅargocd-server„Å´„É≠„Ç∞„Ç§„É≥„Åó„Çà„ÅÜ„Å®„Åó„Åæ„Åô„ÄÇ(7) ID„Éó„É≠„Éê„Ç§„ÉÄ„Éº„Å∏„ÅÆË™çË®º„Éï„Çß„Éº„Ç∫ÂßîË≠≤argocd-server„ÅØ„ÄÅ„É≠„Ç∞„Ç§„É≥ÊôÇ„Å´ID„Éó„É≠„Éê„Ç§„ÉÄ„Éº„Å´Ë™çË®º„Éï„Çß„Éº„Ç∫„ÇíÂßîË≠≤„Åô„Çã„Åü„ÇÅ„Å´„ÄÅdex-server„Çí„Ç≥„Éº„É´„Åó„Åæ„Åô„ÄÇ‚ñ∂ argocd-server„ÅÆ„É≠„Ç∞„Ç§„É≥ÊâãÊ≥ï„Å´„Å§„ÅÑ„Å¶(8) dex-server„Å´„Çà„ÇãË™çË®º„É™„ÇØ„Ç®„Çπ„ÉàÈÄÅ‰ø°dex-server„ÅØ„ÄÅID„Éó„É≠„Éê„Ç§„ÉÄ„Éº„Å´Ë™çÂèØ„É™„ÇØ„Ç®„Çπ„Éà„Çí‰ΩúÊàê„Åó„ÄÅ„Åì„Çå„ÇíID„Éó„É≠„Éê„Ç§„ÉÄ„Éº„Å´ÈÄÅ‰ø°„Åó„Åæ„Åô„ÄÇ(9) argocd-server„Å´„Çà„ÇãË™çÂèØ„Éï„Çß„Éº„Ç∫ÂÆüË°åargocd-server„ÅßË™çÂèØ„Éï„Çß„Éº„Ç∫„ÇíÂÆüÊñΩ„Åó„Åæ„Åô„ÄÇ„É≠„Ç∞„Ç§„É≥„ÅåÂÆå‰∫Ü„Åó„ÄÅ„Éó„É≠„ÉÄ„ÇØ„ÉàÁî®ClusterÁÆ°ÁêÜËÄÖ„ÅØË™çÂèØ„Çπ„Ç≥„Éº„Éó„Å´Âøú„Åò„Å¶„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ„ÇíÊìç‰Ωú„Åß„Åç„Åæ„Åô„ÄÇ‚ñ∂ ArgoCD„Çí„Å©„ÅÆCluster„ÅßÁÆ°ÁêÜ„Åô„Çã„Åã„Å´„Å§„ÅÑ„Å¶(10) application-controller„Å´„Çà„Çã„Éû„Éã„Éï„Çß„Çπ„Éà„Éá„Éó„É≠„Ç§application-controller„ÅØ„ÄÅCluster„Å´„Éû„Éã„Éï„Çß„Çπ„Éà„Çí„Éá„Éó„É≠„Ç§„Åó„Åæ„Åô„ÄÇ„Éû„Éã„Éï„Çß„Çπ„Éà„ÅÆ„Éá„Éó„É≠„Ç§„ÅÆ‰ªïÁµÑ„Åø„Çí„Åñ„Å£„Åè„ÇäÁ¥π‰ªã„Åó„Åæ„Åó„Åü„ÄÇ„Åü„Å†„Åì„Çå„Å†„Å®ÂÖ®„ÅèÈù¢ÁôΩ„Åè„Å™„ÅÑ„Åü„ÇÅ„ÄÅÂêÑ„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÂÖ∑‰ΩìÁöÑ„Å™Âá¶ÁêÜ„Å®„ÄÅÂêÑ„ÄÖ„Åå„Å©„ÅÆ„Çà„ÅÜ„Å´ÈÄö‰ø°„Åó„Å¶„ÅÑ„Çã„ÅÆ„Åã„ÇíË™¨Êòé„Åó„Åæ„Åô‚úåÔ∏è03. repo-serverrepo-server„Å®„ÅØ„Åæ„Åö„ÅØ„ÄÅ„Ç≥„Ç¢„Éâ„É°„Ç§„É≥„É¨„Ç§„É§„Éº„Å´„ÅÇ„Çãrepo-server„Åß„Åô„ÄÇ„Éû„Éã„Éï„Çß„Çπ„Éà/„ÉÅ„É£„Éº„Éà„É™„Éù„Ç∏„Éà„É™ (‰æãÔºöGiHub„ÄÅGitHub Pages„ÄÅArtifact Hub„ÄÅAWS ECR„ÄÅArtifact Registry„Å™„Å©) „Åã„Çâ„ÇØ„É≠„Éº„É≥„ÇíÂèñÂæó„Åó„Åæ„Åô„ÄÇrepo-server„ÇíÊåÅ„Å§Pod„Å´„ÅØ„ÄÅ‰ªñ„Å´ËªΩÈáè„Ç≥„É≥„ÉÜ„Éä„Ç§„É°„Éº„Ç∏„Åã„Çâ„Å™„ÇãInitContainer„Å®„Çµ„Ç§„Éâ„Ç´„Éº (cmp-server) „Åå„Åä„Çä„ÄÅ„Åù„Çå„Åû„ÇåÊ©üËÉΩ„ÅåÂàá„ÇäÂàÜ„Åë„Çâ„Çå„Å¶„ÅÑ„Åæ„Åôüëç‰ªïÁµÑ„Åø(1) InitContainer„Å´„Çà„Çã„ÅäÂ•Ω„Åç„Å™„ÉÑ„Éº„É´„Ç§„É≥„Çπ„Éà„Éº„É´ \u0026 argocd-cli„Éê„Ç§„Éä„É™„Ç≥„Éî„Éºrepo-server„ÅÆËµ∑ÂãïÊôÇ„Å´„ÄÅInitContainer„Åß„ÅäÂ•Ω„Åç„Å™„Éû„Éã„Éï„Çß„Çπ„ÉàÁÆ°ÁêÜ„ÉÑ„Éº„É´ (Helm„ÄÅKustomize„Å™„Å©) „ÇÑ„Éó„É©„Ç∞„Ç§„É≥ (helm-secrets„ÄÅKSOPS„ÄÅSOPS„ÄÅargocd-vault-plugin„Å™„Å©) „Çí„Ç§„É≥„Çπ„Éà„Éº„É´„Åó„Åæ„Åô„ÄÇ„Åæ„Åü„ÄÅ„Çµ„Ç§„Éâ„Ç´„Éº„ÅÆcmp-server„Åß„ÅØËµ∑ÂãïÊôÇ„Å´/var/run/argocd/argocd-cmp-server„Ç≥„Éû„É≥„Éâ„ÇíÂÆüË°å„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„ÄÅInitContainer („Åì„Åì„Åß„ÅØcopyutil„Ç≥„É≥„ÉÜ„Éä) „Çí‰ΩøÁî®„Åó„Å¶„ÄÅArgoCD„ÅÆ„Ç≥„É≥„ÉÜ„Éä„Ç§„É°„Éº„Ç∏„Åã„Çâargocd-cli„ÅÆ„Éê„Ç§„Éä„É™„Éï„Ç°„Ç§„É´„Çí„Ç≥„Éî„Éº„Åó„Åæ„Åô„ÄÇrepo-server„ÅÆ„Åñ„Å£„Åè„Çä„Åó„ÅüÂÆüË£Ö‰æã„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Åß„Åôüëá„Åì„Åì„Åß„ÅØ„ÄÅArgoCD„Åß‰Ωø„ÅÑ„Åü„ÅÑ„ÉÑ„Éº„É´ (Helm„ÄÅSOPS„ÄÅhelm-secrets) „ÇíInitContainer„Åß„Ç§„É≥„Çπ„Éà„Éº„É´„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇapiVersion: v1kind: Podmetadata:  name: argocd-repo-server  namespace: argocdspec:  containers:    - name: repo-server      image: quay.io/argoproj/argocd:latest  initContainers:    # Helm„Çí„Ç§„É≥„Çπ„Éà„Éº„É´„Åô„ÇãInitContainer    - name: helm-installer      image: alpine:latest      command:        - /bin/sh        - -c      args:        - |          # „Ç§„É≥„Çπ„Éà„Éº„É´Âá¶ÁêÜ      volumeMounts:        - mountPath: /custom-tools          name: custom-tools    # SOPS„Çí„Ç§„É≥„Çπ„Éà„Éº„É´„Åô„ÇãInitContainer    - name: sops-installer      image: alpine:latest      command:        - /bin/sh        - -c      args:        - |          # „Ç§„É≥„Çπ„Éà„Éº„É´Âá¶ÁêÜ      volumeMounts:        - mountPath: /custom-tools          name: custom-tools    # helm-secrets„Çí„Ç§„É≥„Çπ„Éà„Éº„É´„Åô„ÇãInitContainer    - name: helm-secrets-installer      image: alpine:latest      command:        - /bin/sh        - -c      args:        - |          # „Ç§„É≥„Çπ„Éà„Éº„É´Âá¶ÁêÜ      volumeMounts:        - mountPath: /helm-working-dir/plugins          name: helm-working-dir    ...    # cmp-server„Å´argocd-cli„ÅÆ„Éê„Ç§„Éä„É™„Çí„Ç≥„Éî„Éº„Åô„ÇãInitContainer    - name: copyutil      image: quay.io/argoproj/argocd:latest      command:        - cp        - -n        - /usr/local/bin/argocd        - /var/run/argocd/argocd-cmp-server      volumeMounts:        - name: var-files          mountPath: /var/run/argocd  # Pod„ÅÆÂÖ±Êúâ„Éú„É™„É•„Éº„É†  volumes:    - name: custom-tools      emptyDir: {}    - name: var-files      emptyDir: {}Custom Tooling - Argo CD - Declarative GitOps CD for Kubernetes‚ñ∂ ArgoCD„ÅÆ„Ç≥„É≥„ÉÜ„Éä„Ç§„É°„Éº„Ç∏„Å´ÁµÑ„ÅøËæº„Åæ„Çå„Å¶„ÅÑ„Çã„ÉÑ„Éº„É´„Å´„Å§„ÅÑ„Å¶quay.io/argoproj/argocd) „Å´„ÅØ„ÄÅ„ÅÑ„Åè„Å§„Åã„ÅÆ„ÉÑ„Éº„É´ (‰æãÔºöHelm„ÄÅKustomize„ÄÅKs„ÄÅJsonnet„Å™„Å©) „ÅÆÊé®Â•®„Éê„Éº„Ç∏„Éß„É≥„Åå„ÅÇ„Çâ„Åã„Åò„ÇÅ„Ç§„É≥„Çπ„Éà„Éº„É´„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ„Åù„ÅÆ„Åü„ÇÅ„ÄÅ„Åì„Çå„Çâ„ÅÆ„ÉÑ„Éº„É´„ÅÆ„Éó„É©„Ç∞„Ç§„É≥ (‰æãÔºöhelm-secrets) „Çí‰ΩøÁî®„Åô„ÇãÂ†¥Âêà„ÄÅ‰∏äË®ò„ÅÆ„Ç≥„É≥„ÉÜ„Éä„Ç§„É°„Éº„Ç∏„Åã„Çâ„Å™„Çãrepo-serverÂÜÖ„ÅÆ„ÉÑ„Éº„É´„Çícmp-server„Å´„Ç≥„Éî„Éº„Åô„Çå„Å∞„Çà„ÅÑ„ÅÆ„Åß„ÅØ„ÄÅ„Å®ÊÄù„Å£„ÅüÊñπ„Åå„ÅÑ„Çã„Åã„ÇÇ„Åó„Çå„Åæ„Åõ„Çì„ÄÇ„Åì„ÅÆÊñπÊ≥ï„ÅØÂÖ®„ÅèÂïèÈ°å„Å™„Åè„ÄÅcmp-server„ÅÆ/usr/local/bin„Éá„Ç£„É¨„ÇØ„Éà„É™ÈÖç‰∏ã„Å´„ÉÑ„Éº„É´„Çí„Ç≥„Éî„Éº„Åô„Çã„Çà„ÅÜ„Å´„ÄÅInitContainer„ÇíÂÆöÁæ©„Åó„Å¶„ÇÇ„Çà„ÅÑ„Åß„Åô„ÄÇapiVersion: v1kind: Podmetadata:  name: argocd-repo-server  namespace: foospec:  containers:    - name: repo-server      image: quay.io/argoproj/argocd:latest      volumeMounts:        - mountPath: /usr/local/bin/helm          # Pod„ÅÆÂÖ±Êúâ„Éú„É™„É•„Éº„É†„Çí‰ªã„Åó„Å¶„ÄÅrepo-server„ÅßHelm„Çí‰ΩøÁî®„Åô„Çã„ÄÇ          name: custom-tools  initContainers:    - name: copy-helm      image: quay.io/argoproj/argocd:latest      # InitContainer‰∏ä„ÅÆHelm„ÇíVolume„Å´„Ç≥„Éî„Éº„Åô„Çã      command:        - /bin/cp        - -n        - /usr/local/bin/helm        - /custom-tools/helm      volumeMounts:        - mountPath: /custom-tools          name: custom-tools  # ÂÖ±Êúâ„Éú„É™„É•„Éº„É†  volumes:    - name: custom-tools      emptyDir: {}ÂèçÂØæ„Å´„ÄÅ„Åì„Çå„Çâ„ÉÑ„Éº„É´„ÇíInitContainer„Åß„Ç§„É≥„Çπ„Éà„Éº„É´„ÅóÁõ¥„ÅôÂ†¥Âêà„ÅØ„ÄÅArgoCD‰∏ä„Åß„ÅÆÊé®Â•®„Éê„Éº„Ç∏„Éß„É≥„Çí„Å°„ÇÉ„Çì„Å®„Ç§„É≥„Çπ„Éà„Éº„É´„Åô„Çã„Çà„ÅÜ„Å´„Åó„Åæ„Åó„Çá„ÅÜüëç2.6Á≥ª„Åß„ÅØ„ÄÅArgoCD„ÅÆ„É™„Éù„Ç∏„Éà„É™ÂÜÖ„ÅÆtool-versions.sh„Éï„Ç°„Ç§„É´„Å´„ÄÅHelm„ÅÆ„Éê„Éº„Ç∏„Éß„É≥„ÅåÂÆöÁæ©„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇspec:  ...  initContainers:    - name: helm-installer      image: alpine:latest      command:        - /bin/sh        - -c      # ArgoCD„ÅÆ„É™„Éù„Ç∏„Éà„É™‰∏ä„ÅÆtool-versions.sh„Éï„Ç°„Ç§„É´„Åã„Çâ„ÄÅHelm„ÅÆ„Éê„Éº„Ç∏„Éß„É≥„ÇíÂèñÂæó„Åô„Çã      args:        - |          apk --update add curl wget          ARGOCD_VERSION=$(curl -s https://raw.githubusercontent.com/argoproj/argo-helm/argo-cd-\u003cArgoCD„ÅÆ„Éê„Éº„Ç∏„Éß„É≥\u003e/charts/argo-cd/Chart.yaml | grep appVersion | sed -e 's/^[^: ]*: //')          HELM_RECOMMENDED_VERSION=$(curl -s https://raw.githubusercontent.com/argoproj/argo-cd/\"${ARGOCD_VERSION}\"/hack/tool-versions.sh | grep helm3_version | sed -e 's/^[^=]*=//')          wget -q https://get.helm.sh/helm-v\"${HELM_RECOMMENDED_VERSION}\"-linux-amd64.tar.gz          tar -xvf helm-v\"${HELM_RECOMMENDED_VERSION}\"-linux-amd64.tar.gz          cp ./linux-amd64/helm /custom-tools/          chmod +x /custom-tools/helm      volumeMounts:        - mountPath: /custom-tools          name: custom-tools  ...argo-cd/hack/tool-versions.sh at v2.6.0 ¬∑ argoproj/argo-cd ¬∑ GitHub(2) repo-server„Å´„Çà„ÇãË™çË®ºÊÉÖÂ†±ÂèñÂæórepo-server„ÅØ„ÄÅSecret (argocd-repo-creds) „Åã„Çâ„É™„Éù„Ç∏„Éà„É™„ÅÆË™çË®ºÊÉÖÂ†±„ÇíÂèñÂæó„Åó„Åæ„Åô„ÄÇargocd-repo-creds„Åß„ÅØ„É™„Éù„Ç∏„Éà„É™„ÅÆË™çË®ºÊÉÖÂ†±„ÅÆ„ÉÜ„É≥„Éó„É¨„Éº„Éà„ÇíÁÆ°ÁêÜ„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇÊåáÂÆö„Åó„ÅüÊñáÂ≠óÂàó„Åã„ÇâÂßã„Åæ„Çã (ÂâçÊñπ‰∏ÄËá¥) URL„ÇíÊåÅ„Å§„É™„Éù„Ç∏„Éà„É™„Å´Êé•Á∂ö„Åô„ÇãÂ†¥Âêà„ÄÅ„Åù„Çå„Çâ„ÅÆÊé•Á∂ö„ÅßË™çË®ºÊÉÖÂ†±„Çí‰∏ÄÊã¨„Åó„Å¶ÈÅ©Áî®„Åß„Åç„Åæ„Åô„ÄÇargocd-repo-creds„ÅÆ„Åñ„Å£„Åè„Çä„Åó„ÅüÂÆüË£Ö‰æã„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Åß„Åôüëá„Åì„Åì„Åß„ÅØ„ÄÅ„É™„Éù„Ç∏„Éà„É™„ÅÆSSHÂÖ¨ÈñãÈçµË™çË®º„ÇíÊé°Áî®„Åó„ÄÅargocd-repo-creds„Å´ÂÖ±ÈÄö„ÅÆÁßòÂØÜÈçµ„ÇíË®≠ÂÆö„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇapiVersion: v1kind: Secretmetadata:  name: argocd-repo-creds-github  namespace: argocd  labels:    argocd.argoproj.io/secret-type: repo-credstype: Opaquedata:  type: git  url: https://github.com/hiroki-hasegawa  # ÁßòÂØÜÈçµ  sshPrivateKey: |    MIIC2 ...„ÅÇ„Å®„ÅØ„ÄÅÂêÑ„É™„Éù„Ç∏„Éà„É™„ÅÆSecret (argocd-repo) „Å´URL„ÇíË®≠ÂÆö„Åó„Å¶„Åä„Åç„Åæ„Åô„ÄÇ„Åô„Çã„Å®„ÄÅÂÖà„Åª„Å©„ÅÆargocd-repo-creds„ÅÆURL„Å´ÂâçÊñπ‰∏ÄËá¥„Åô„ÇãURL„ÇíÊåÅ„Å§Secret„Å´„ÅØ„ÄÅ‰∏ÄÊã¨„Åó„Å¶ÁßòÂØÜÈçµ„ÅåÈÅ©Áî®„Åï„Çå„Åæ„Åô„ÄÇ# foo-repository„Çí„Éù„Éº„É™„É≥„Ç∞„Åô„Çã„Åü„ÇÅ„ÅÆargocd-repoapiVersion: v1kind: Secretmetadata:  namespace: argocd  name: foo-argocd-repo  labels:    argocd.argoproj.io/secret-type: repositorytype: Opaquedata:  # Ë™çË®ºÊÉÖÂ†±„ÅØË®≠ÂÆö„Åó„Å™„ÅÑ„ÄÇ  # „ÉÅ„É£„Éº„Éà„É™„Éù„Ç∏„Éà„É™Âêç  name: bar-repository  # https://github.com/hiroki-hasegawa „Å´ÂâçÊñπ‰∏ÄËá¥„Åô„Çã„ÄÇ  url: https://github.com/hiroki-hasegawa/bar-chart.git---# baz-repository„Çí„Éù„Éº„É™„É≥„Ç∞„Åô„Çã„Åü„ÇÅ„ÅÆargocd-repoapiVersion: v1kind: Secretmetadata:  namespace: foo  name: baz-argocd-repo  labels:    argocd.argoproj.io/secret-type: repositorytype: Opaquedata:  # Ë™çË®ºÊÉÖÂ†±„ÅØË®≠ÂÆö„Åó„Å™„ÅÑ„ÄÇ  # „ÉÅ„É£„Éº„Éà„É™„Éù„Ç∏„Éà„É™Âêç  name: baz-repository  # https://github.com/hiroki-hasegawa „Å´ÂâçÊñπ‰∏ÄËá¥„Åô„Çã„ÄÇ  url: https://github.com/hiroki-hasegawa/baz-chart.gitDeclarative Setup - Argo CD - Declarative GitOps CD for Kubernetes(3) repo-server„ÅÆ„Çà„Çã„ÇØ„É≠„Éº„É≥ÂèñÂæó„Å®„Éù„Éº„É™„É≥„Ç∞repo-server„ÅØ„ÄÅË™çË®ºÊÉÖÂ†±„Çí‰ΩøÁî®„Åó„Å¶„ÄÅ„É™„Éù„Ç∏„Éà„É™„Å´git clone„Ç≥„Éû„É≥„Éâ„ÇíÂÆüË°å„Åó„Åæ„Åô„ÄÇÂèñÂæó„Åó„Åü„ÇØ„É≠„Éº„É≥„Çí„ÄÅ/tmp/_argocd-repo„Éá„Ç£„É¨„ÇØ„Éà„É™ÈÖç‰∏ã„Å´UUID„ÅÆÂêçÂâç„Åß‰øùÁÆ°„Åó„Åæ„Åô„ÄÇ„Åæ„Åü„ÄÅ„É™„Éù„Ç∏„Éà„É™„ÅÆÂ§âÊõ¥„Çí„Éù„Éº„É™„É≥„Ç∞„Åó„ÄÅÂ§âÊõ¥„ÇíÊ§úÁü•„Åó„ÅüÂ†¥Âêà„ÅØgit fetch„Ç≥„Éû„É≥„Éâ„ÇíÂÆüË°å„Åó„Åæ„Åô„ÄÇ# „ÇØ„É≠„Éº„É≥„Åå‰øùÁÆ°„Åï„Çå„Å¶„ÅÑ„Çã„Åì„Å®„ÇíÁ¢∫Ë™ç„Åß„Åç„Çã$ kubectl -it exec argocd-repo-server \\    -c repo-server \\    -n foo \\    -- bash -c \"ls /tmp/_argocd-repo/\u003cURL„Å´Âü∫„Å•„ÅèUUID\u003e\"# „É™„Éù„Ç∏„Éà„É™ÂÜÖ„ÅÆ„Éï„Ç°„Ç§„É´Chart.yaml  README.md  templates  values.yamlcustom repo-server - where is the local cache kept? ¬∑ argoproj argo-cd ¬∑ Discussion #9889 ¬∑ GitHub‚ñ∂ repo-server„Åß„ÅÆ„ÇØ„É≠„Éº„É≥‰øùÁÆ°ÂÖà„ÅÆ„Éê„Éº„Ç∏„Éß„É≥Â∑ÆÁï∞„Å´„Å§„ÅÑ„Å¶2.3‰ª•Ââç„Åß„ÅØ„ÄÅrepo-server„ÅØ/tmp„Éá„Ç£„É¨„ÇØ„Éà„É™ÈÖç‰∏ã„Å´URL„Å´Âü∫„Å•„ÅèÂêçÂâç„Åß„ÇØ„É≠„Éº„É≥„Çí‰øùÁÆ°„Åó„Åæ„Åô„ÄÇ$ kubectl -it exec argocd-repo-server \\    -c repo-server \\    -n foo \\    -- bash -c \"ls /tmp/https___github.com_hiroki-hasegawa_foo-repository\"# „É™„Éù„Ç∏„Éà„É™ÂÜÖ„ÅÆ„Éï„Ç°„Ç§„É´Chart.yaml  README.md  templates  values.yaml(4) repo-server„Å´„Çà„Çã„Çµ„Ç§„Éâ„Ç´„Éº„Ç≥„Éº„É´repo-server„ÅØ„ÄÅËá™Ë∫´„Å´„Éû„Ç¶„É≥„Éà„Åï„Çå„Åü„ÅÑ„Åè„Å§„Åã„ÅÆ„Éû„Éã„Éï„Çß„Çπ„ÉàÁÆ°ÁêÜ„ÉÑ„Éº„É´ (‰æãÔºöHelm„ÄÅKustomize) „ÇíÂÆüË°å„Åô„ÇãÊ©üËÉΩ„ÇíÊåÅ„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ„Åó„Åã„Åó„ÄÅÂÆüË°å„Åß„Åç„Å™„ÅÑ„ÉÑ„Éº„É´„Åß„ÅØ„Çµ„Ç§„Éâ„Ç´„Éº (cmp-server) „Çí„Ç≥„Éº„É´„Åó„Åæ„Åô„ÄÇ„Åì„ÅÆÊôÇ„ÄÅApplication„ÅÆ.spec.source.plugin„Ç≠„Éº„Åß„Éó„É©„Ç∞„Ç§„É≥Âêç„ÇíÊåáÂÆö„Åô„Çã„Å®„ÄÅ„Åù„ÅÆApplication„Åß„ÅØ„Çµ„Ç§„Éâ„Ç´„Éº„Çí„Ç≥„Éº„É´„Åó„Åæ„Åô„ÄÇÈÄÜ„ÇíË®Ä„Åà„Å∞„ÄÅ„Éó„É©„Ç∞„Ç§„É≥Âêç„ÇíÊåáÂÆö„Åó„Å¶„ÅÑ„Å™„ÅÑApplication„ÅØ„ÄÅ„Çµ„Ç§„Éâ„Ç´„Éº„Çí„Ç≥„Éº„É´„Åó„Å™„ÅÑ „Åß„Åô„ÄÇapiVersion: argoproj.io/v1alpha1kind: Applicationmetadata:  name: foo-application  namespace: foospec:  source:    plugin:      name: helm-secrets # „Åì„ÅÆ„Éó„É©„Ç∞„Ç§„É≥Âêç„ÅØ„ÄÅConfigManagementPlugin„ÅÆmetadata.name„Ç≠„Éº„Å´Ë®≠ÂÆö„Åó„Åü„ÇÇ„ÅÆ  ...„Åì„ÅÆ„Ç≥„Éº„É´„ÅØ„ÄÅVolume‰∏ä„ÅÆUnix„Éâ„É°„Ç§„É≥„ÇΩ„Ç±„ÉÉ„Éà„ÇíÁµåÁî±„Åó„Åæ„Åô„ÄÇUnix„Éâ„É°„Ç§„É≥„ÇΩ„Ç±„ÉÉ„Éà„ÅÆ„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„ÅÆÂÆü‰Ωì„ÅØ.sock„Éï„Ç°„Ç§„É´„Åß„Åô„ÄÇ$ kubectl exec -it argocd-repo-server -c foo-plugin-cmp-server\\    -- bash -c \"ls /home/argocd/cmp-server/plugins/\"foo-plugin.sock‚ñ∂ Unix„ÇΩ„Ç±„ÉÉ„Éà„Éâ„É°„Ç§„É≥„Å´„Å§„ÅÑ„Å¶ASCII.jpÔºöUnix„Éâ„É°„Ç§„É≥„ÇΩ„Ç±„ÉÉ„Éà (1/2)(5) repo-server„Å´„Çà„ÇãÊöóÂè∑Âåñ„Ç≠„Éº„Å®ÊöóÂè∑ÂåñÂ§âÊï∞„ÅÆÂèñÂæócmp-server„ÅØ„ÄÅÊöóÂè∑Âåñ„Ç≠„Éº (‰æãÔºöAWS KMS„ÄÅGoogle CKM„Å™„Å©) „Çí‰ΩøÁî®„Åó„Å¶Secret„Çπ„Éà„Ç¢ (‰æãÔºöAWS SecretManager„ÄÅGoogle SecretManager„ÄÅSOPS„ÄÅVault„Å™„Å©) „ÅÆÊöóÂè∑ÂåñÂ§âÊï∞„ÇíÂæ©Âè∑Âåñ„Åó„Åæ„Åô„ÄÇ‚ñ∂ „ÇØ„É©„Ç¶„Éâ„Éó„É≠„Éê„Ç§„ÉÄ„Éº„ÅÆÊöóÂè∑Âåñ„Ç≠„Éº„Çí‰ΩøÁî®„Åô„Çã„Åü„ÇÅ„Å´ÂøÖË¶Å„Å™Ë®ºÊòéÊõ∏„Å´„Å§„ÅÑ„Å¶/etc/ssl„Éá„Ç£„É¨„ÇØ„Éà„É™ („Éá„Ç£„É¨„ÇØ„Éà„É™„ÅØOS„Å´„Çà„Å£„Å¶Áï∞„Å™„Çã) „Å´Ë®ºÊòéÊõ∏„ÅåÁÑ°„Åè„ÄÅcmp-server„ÅåHTTPS„Éó„É≠„Éà„Ç≥„É´„Çí‰ΩøÁî®„Åß„Åç„Å™„ÅÑÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ„Åù„ÅÆÂ†¥Âêà„ÅØ„ÄÅ„ÅäÂ•Ω„Åç„Å™ÊñπÊ≥ï„ÅßË®ºÊòéÊõ∏„Çí„Ç§„É≥„Çπ„Éà„Éº„É´„Åó„ÄÅ„Ç≥„É≥„ÉÜ„Éä„Å´„Éû„Ç¶„É≥„Éà„Åô„Çã„Çà„ÅÜ„Å´„Åó„Å¶„Åè„Å†„Åï„ÅÑüëçapiVersion: v1kind: Podmetadata:  name: argocd-repo-server  namespace: foospec:  containers:    - name: repo-server      image: quay.io/argoproj/argocd:latest  ...    # „Çµ„Ç§„Éâ„Ç´„Éº„ÅÆcmp-server    - name: helm-secrets-cmp-server      image: ubuntu:latest      ...      volumeMounts:        # „Çµ„Ç§„Éâ„Ç´„Éº„ÅåAWS KMS„Çí‰ΩøÁî®„Åô„ÇãÊôÇ„Å´HTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÈÄÅ‰ø°„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çã„Åü„ÇÅ„ÄÅË®ºÊòéÊõ∏„Çí„Éû„Ç¶„É≥„Éà„Åô„Çã        - name: certificate          mountPath: /etc/ssl  ...  initContainers:    - name: certificate-installer      image: ubuntu:latest      command:        - /bin/sh        - -c      args:        - |          apt-get update -y          # „É´„Éº„ÉàË®ºÊòéÊõ∏„Çí„Ç§„É≥„Çπ„Éà„Éº„É´„Åô„Çã          apt-get install -y ca-certificates          # Ë®ºÊòéÊõ∏„ÇíÊõ¥Êñ∞„Åô„Çã          update-ca-certificates      volumeMounts:        - mountPath: /etc/ssl          name: certificate  volumes:    - name: certificate      emptyDir: {}(6) „Çµ„Ç§„Éâ„Ç´„Éº„Å´„Çà„Çã„Éó„É©„Ç∞„Ç§„É≥Âá¶ÁêÜ„ÅÆÂèñÂæócmp-server„ÅØ„ÄÅ„Éû„Éã„Éï„Çß„Çπ„ÉàÁÆ°ÁêÜ„ÉÑ„Éº„É´„ÅÆ„Éó„É©„Ç∞„Ç§„É≥ (helm-secrets„ÄÅargocd-vault-plugin„Å™„Å©) „ÇíÂÆüË°å„Åó„Åæ„Åô„ÄÇ„Åì„ÅÆÊôÇ„Éû„Éã„Éï„Çß„Çπ„Éà„ÅÆ‰ΩúÊàêÊôÇ„ÅÆ„Éó„É©„Ç∞„Ç§„É≥„Å®„Åó„Å¶„ÄÅConfigMapÈÖç‰∏ã„ÅÆConfigManagementPlugin„Åß„Éó„É©„Ç∞„Ç§„É≥„ÅÆÂá¶ÁêÜ„ÇíÂÆöÁæ©„Åó„Åæ„Åô„ÄÇ„Åñ„Å£„Åè„Çä„Åó„ÅüÂÆüË£Ö‰æã„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Åß„Åôüëá„Åì„Åì„Åß„ÅØ„ÄÅ„Éó„É©„Ç∞„Ç§„É≥„Å®„Åó„Å¶helm-secrets„ÇíÊé°Áî®„Åó„ÄÅhelm secrets template„Ç≥„Éû„É≥„Éâ„ÅÆÂÆüË°å„ÇíÂÆöÁæ©„Åó„Åæ„Åô„ÄÇapiVersion: v1kind: ConfigMapmetadata:  name: argocd-cmp-cm  namespace: foodata:  helm-secrets-plugin.yaml: |    apiVersion: argoproj.io/v1alpha1    kind: ConfigManagementPlugin    metadata:      namespace: foo      name: helm-secrets # „Åì„ÅÆ„Éó„É©„Ç∞„Ç§„É≥Âêç„ÅØ„ÄÅApplication„ÅÆspec.source.plugin„Ç≠„Éº„ÅßÊåáÂÆö„Åó„Åü„ÇÇ„ÅÆ    spec:      generate:        command:          - /bin/bash          - -c        args:          - |            set -o pipefail            helm secrets template -f $ARGOCD_ENV_SECRETS -f $ARGOCD_ENV_VALUES -n $ARGOCD_APP_NAMESPACE $ARGOCD_APP_NAME .  foo-plugin.yaml: |    ...‚ñ∂ ConfigManagementPlugin„ÅÆ„Éï„Ç°„Ç§„É´Âêç„Å´„Å§„ÅÑ„Å¶(7) „Çµ„Ç§„Éâ„Ç´„Éº„Å´„Çà„Çã„Éó„É©„Ç∞„Ç§„É≥Âá¶ÁêÜ„ÅÆÂÆüË°åcmp-server„ÅØ„Éó„É©„Ç∞„Ç§„É≥„ÇíÂÆüË°å„Åó„ÄÅSecret„ÇíÂê´„ÇÄ„Éû„Éã„Éï„Çß„Çπ„Éà„Çí‰ΩúÊàê„Åó„Åæ„Åô„ÄÇConfigMapÈÖç‰∏ã„ÅÆ„Éï„Ç°„Ç§„É´„Çíplugin.yaml„ÅÆÂêçÂâç„Åß„Çµ„Ç§„Éâ„Ç´„Éº„Å´„Éû„Ç¶„É≥„Éà„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ„Åæ„Åü„ÄÅÂÖà„Åª„Å©„ÅÆUnix„Éâ„É°„Ç§„É≥„ÇΩ„Ç±„ÉÉ„Éà„ÅÆ.sock„Éï„Ç°„Ç§„É´„ÇÑ„ÄÅ cmp-server„Åå„Éó„É©„Ç∞„Ç§„É≥„ÇíÂÆüË°å„Åô„Çã„Åü„ÇÅ„ÅÆÂêÑ„Éê„Ç§„Éä„É™„Éï„Ç°„Ç§„É´„ÇÇ„Éû„Ç¶„É≥„Éà„ÅåÂøÖË¶Å„Åß„Åô„ÄÇ„Åñ„Å£„Åè„Çä„Åó„ÅüÂÆüË£Ö‰æã„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Åß„Åôüëá„Åì„Åì„Åß„ÅØ„ÄÅhelm-secrets„Éó„É©„Ç∞„Ç§„É≥„ÇíÂÆüË°å„Åô„Çã„Çµ„Ç§„Éâ„Ç´„Éº (helm-secrets-cmp-server) „Çí‰ΩúÊàê„Åó„Åæ„Åô„ÄÇapiVersion: v1kind: Podmetadata:  name: argocd-repo-serverspec:  containers:    # repo-server    - name: repo-server      image: quay.io/argoproj/argocd:latest    ...    # helm-secrets„ÅÆcmp-server    - name: helm-secrets-cmp-server      # „Ç≥„É≥„ÉÜ„Éä„Ç§„É°„Éº„Ç∏„ÅØËªΩÈáè„Å´„Åô„Çã      image: ubuntu:latest      command:        - /var/run/argocd/argocd-cmp-server      env:        # helm„Éó„É©„Ç∞„Ç§„É≥„ÅÆÂ†¥ÊâÄ„ÇíË®≠ÂÆö„Åô„Çã        - name: HELM_PLUGINS          value: /helm-working-dir/plugins      securityContext:        runAsNonRoot: true        runAsUser: 999      volumeMounts:        # „É™„Éù„Ç∏„Éà„É™„ÅÆ„ÇØ„É≠„Éº„É≥„Çí„Ç≥„É≥„ÉÜ„Éä„Å´„Éû„Ç¶„É≥„Éà„Åô„Çã        - name: tmp          mountPath: /tmp        # ConfigManagementPlugin„ÅÆ„Éû„Éã„Éï„Çß„Çπ„Éà (helm-secrets.yaml) „Çí \"plugin.yaml\" „ÅÆÂêçÂâç„Åß„Ç≥„É≥„ÉÜ„Éä„Å´„Éû„Ç¶„É≥„Éà„Åô„Çã        - name: argocd-cmp-cm          mountPath: /home/argocd/cmp-server/config/plugin.yaml          subPath: helm-secrets.yaml        # „Ç≥„É≥„ÉÜ„ÉäÈñì„ÅßÈÄö‰ø°„Åô„Çã„Åü„ÇÅ„ÅÆUnix„Éâ„É°„Ç§„É≥„ÇΩ„Ç±„ÉÉ„Éà„Éï„Ç°„Ç§„É´„Çí„Ç≥„É≥„ÉÜ„Éä„Å´„Éû„Ç¶„É≥„Éà„Åô„Çã        - name: plugins          mountPath: /home/argocd/cmp-server/plugins        # ‰ªªÊÑè„ÅÆ„ÉÑ„Éº„É´„ÅÆ„Éê„Ç§„Éä„É™„Éï„Ç°„Ç§„É´„Çí„Ç≥„É≥„ÉÜ„Éä„Å´„Éû„Ç¶„É≥„Éà„Åô„Çã        - name: custom-tools          mountPath: /usr/local/bin        # helm„Éó„É©„Ç∞„Ç§„É≥„ÅÆ„Éê„Ç§„Éä„É™„Çí„Ç≥„É≥„ÉÜ„Éä„Å´„Éû„Ç¶„É≥„Éà„Åô„Çã        - name: helm-working-dir          mountPath: /helm-working-dir/plugins      ...  # Pod„ÅÆÂÖ±Êúâ„Éú„É™„É•„Éº„É†  volumes:    # „É™„Éù„Ç∏„Éà„É™„ÅÆ„ÇØ„É≠„Éº„É≥„ÇíÂê´„ÇÄ    - name: tmp      emptyDir: {}    # Helm„Å™„Å©„ÅÆ‰ªªÊÑè„ÅÆ„ÉÑ„Éº„É´„ÇíÂê´„ÇÄ    - name: custom-tools      emptyDir: {}    # helm„Éó„É©„Ç∞„Ç§„É≥„ÇíÂê´„ÇÄ    - name: helm-working-dir      emptyDir: {}‚ñ∂ „Éû„Ç¶„É≥„ÉàÊôÇ„ÅÆConfigManagementPlugin„ÅÆ„Éï„Ç°„Ç§„É´Âêç„Å´„Å§„ÅÑ„Å¶v2.6„Åß„ÅØ„ÄÅConfigManagementPlugin„ÅÆ„Éû„Éã„Éï„Çß„Çπ„Éà„Çí/home/argocd/cmp-server/config„Éá„Ç£„É¨„ÇØ„Éà„É™„Å´„ÄÅplugin.yaml„ÅÆÂêçÂâç„Åß„Éû„Ç¶„É≥„Éà„Åó„Å™„ÅÑ„Å®„ÅÑ„Åë„Åæ„Åõ„Çì„ÄÇ„Åì„Çå„ÅØ„ÄÅcmp-server„ÅÆËµ∑Âãï„Ç≥„Éû„É≥„Éâ (/var/run/argocd/argocd-cmp-server) „Ååplugin.yaml„ÅÆÂêçÂâç„Åó„ÅãÊâ±„Åà„Å™„ÅÑ„Åü„ÇÅ„Åß„Åô„ÄÇArgoCDÂÖ¨Âºè„ÅÆË¶ãËß£„Åß„ÄÅ„Çµ„Ç§„Éâ„Ç´„Éº„Åß„ÅØÂçò‰∏Ä„ÅÆ„Éó„É©„Ç∞„Ç§„É≥„Åó„ÅãÂÆüË°å„Åß„Åç„Å™„ÅÑ„Çà„ÅÜ„Å´Ë®≠Ë®à„Åó„Å¶„ÅÑ„Çã„Å®„ÅÆ„Ç≥„É°„É≥„Éà„Åå„ÅÇ„Çä„Åæ„Åó„Åü„ÄÇ‰ªäÂæå„ÅÆ„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„ÅßÊîπÂñÑ„Åï„Çå„ÇãÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„Åå„ÄÅv2.6„Åß„ÅØ„ÄÅConfigManagementPlugin„ÅÆÊï∞„Å†„Åëcmp-server„ÅåÂøÖË¶Å„Å´„Å™„Å£„Å¶„Åó„Åæ„ÅÑ„Åæ„Åôüôáüèª‚Äçuse multiple plugins in sidecar installation method ¬∑ argoproj argo-cd ¬∑ Discussion #12278 ¬∑ GitHub‚ñ∂ Kustomize„ÅÆ„Éó„É©„Ç∞„Ç§„É≥„Çí„Å©„ÅÆ„Ç≥„É≥„ÉÜ„Éä„ÅßÂÆüË°å„Åô„Çã„Åã„Å´„Å§„ÅÑ„Å¶‚ñ∂ „ÇØ„É©„Ç¶„Éâ„Éó„É≠„Éê„Ç§„ÉÄ„Éº„ÅÆSecret„Çπ„Éà„Ç¢„ÇíÊé°Áî®„Åô„ÇãÂ†¥Âêà„Å´„Å§„ÅÑ„Å¶How to Manage Kubernetes Secrets with GitOps for Secure Deployments - Akuity Blog04. application-controller„ÄÅredis-serverapplication-controller„Å®„ÅØ„Ç≥„Ç¢„Éâ„É°„Ç§„É≥„É¨„Ç§„É§„Éº„Å´„ÅÇ„Çãapplication-controller„Åß„Åô„ÄÇCluster„Å´„Éû„Éã„Éï„Çß„Çπ„Éà„Çí„Éá„Éó„É≠„Ç§„Åó„Åæ„Åô„ÄÇ„Åæ„Åü„ÄÅArgoCDÁ≥ª„Ç´„Çπ„Çø„É†„É™„ÇΩ„Éº„Çπ„ÅÆ„Ç´„Çπ„Çø„É†„Ç≥„É≥„Éà„É≠„Éº„É©„Éº„Å®„Åó„Å¶„ÇÇÊ©üËÉΩ„Åó„Åæ„Åô„ÄÇredis-server„Å®„ÅØ„Ç§„É≥„Éï„É©„É¨„Ç§„É§„Éº„Å´„ÅÇ„Çãredis-server„Åß„Åô„ÄÇapplication-controller„ÅÆÂá¶ÁêÜÁµêÊûú„ÅÆ„Ç≠„É£„ÉÉ„Ç∑„É•„Çí‰øùÁÆ°„Åó„Åæ„Åô„ÄÇ‰ªïÁµÑ„Åø(1) ArgoCDÁî®ClusterÁÆ°ÁêÜËÄÖ„ÅÆkubectl apply„Ç≥„Éû„É≥„ÉâArgoCDÁî®Cluster„ÅÆÁÆ°ÁêÜËÄÖ„ÅØ„ÄÅCluster„Å´ArgoCDÁ≥ª„ÅÆ„Ç´„Çπ„Çø„É†„É™„ÇΩ„Éº„Çπ (‰æãÔºöApplication„ÄÅAppProject„Å™„Å©)„ÄÄ„Çí„Éá„Éó„É≠„Ç§„Åó„Åæ„Åô„ÄÇ‚ñ∂ ArgoCDËá™‰Ωì„ÅÆ„Éá„Éó„É≠„Ç§„Å´argo-helm„ÇíÊé°Áî®„Åô„ÇãÂ†¥Âêà„Å´„Å§„ÅÑ„Å¶GitHub - argoproj/argo-helm: ArgoProj Helm Charts„Åü„Å†„ÅóHelm„ÅÆÈáçË¶Å„Å™‰ªïÊßò„Å®„Åó„Å¶„ÄÅ„ÉÅ„É£„Éº„Éà„ÅÆÊõ¥Êñ∞ÊôÇ„Å´‰ΩøÁî®„Åô„Çãhelm upgrade„Ç≥„Éû„É≥„Éâ„ÅØ„ÄÅCRD„Çí‰ΩúÊàê„Åß„Åç„Çã‰∏ÄÊñπ„Åß„Åì„Çå„ÇíÂ§âÊõ¥„Åß„Åç„Åæ„Åõ„Çì„ÄÇHelm„ÅßCRD„Çí‰ΩúÊàê„Åô„Çã„Å®Helm„ÅÆÁÆ°ÁêÜ„É©„Éô„É´„ÅåÊåøÂÖ•„Åï„Çå„Å¶„Åó„Åæ„ÅÜ„Åü„ÇÅ„ÄÅ‰ΩúÊàê„ÅÆÊôÇÁÇπ„Åã„ÇâCRD„ÅåHelm„ÅÆÁÆ°ÁêÜÂ§ñ„Å®„Å™„Çã„Çà„ÅÜ„Å´„ÄÅkubectl„Ç≥„Éû„É≥„Éâ„ÅßCRD„Çí‰ΩúÊàê„Åó„ÅüÊñπ„Åå„Çà„ÅÑ„Åß„Åôüëç$ kubectl diff -k \"https://github.com/argoproj/argo-cd/manifests/crds?ref=\u003c„Éê„Éº„Ç∏„Éß„É≥„Çø„Ç∞\u003e\"$ kubectl apply -k \"https://github.com/argoproj/argo-cd/manifests/crds?ref=\u003c„Éê„Éº„Ç∏„Éß„É≥„Çø„Ç∞\u003e\"ArgoCD‰∏ä„ÅßHelm„Çí‰ΩøÁî®„Åó„Å¶„Éá„Éó„É≠„Ç§„Åô„ÇãÂ†¥Âêà„ÅØ„Åì„ÅÆ‰ªïÊßò„ÇíÊ∞ó„Å´„Åó„Å™„Åè„Å¶„Çà„ÅÑ„ÅÆ„Åã„Å™„ÄÅ„Å®ÊÄù„Å£„ÅüÊñπ„Åå„ÅÑ„Çã„Åã„ÇÇ„Åó„Çå„Å™„ÅÑ„Åß„Åô„ÄÇ„Åß„Åô„ÅåÊú¨Ë®ò‰∫ã„ÅßËß£Ë™¨„Åó„ÅüÈÄö„Çä„ÄÅArgoCD„ÅØcmp-server„ÅÆhelm template„Ç≥„Éû„É≥„Éâ („Åì„ÅÆÊôÇ„ÄÅ--include-crds„Ç™„Éó„Ç∑„Éß„É≥„ÅåÊúâÂäπ„Å´„Å™„Å£„Å¶„ÅÑ„Çã) „ÇÑ„ÄÅapplication-controller„ÅÆkubectl apply„Ç≥„Éû„É≥„Éâ„ÇíÁµÑ„ÅøÂêà„Çè„Åõ„Å¶„Éû„Éã„Éï„Çß„Çπ„Éà„Çí„Éá„Éó„É≠„Ç§„Åó„Å¶„ÅÑ„Çã„Åü„ÇÅ„ÄÅCRD„ÇÇ„Å°„ÇÉ„Çì„Å®Êõ¥Êñ∞„Åó„Å¶„Åè„Çå„Åæ„ÅôüëçüèªÔ∏èHelm | Custom Resource Definitions(2) application-controller„Å´„Çà„ÇãArgoCDÁ≥ª„Ç´„Çπ„Çø„É†„É™„ÇΩ„Éº„Çπ„ÅÆReconciliationkube-controller-manager„ÅØ„ÄÅapplication-controller„ÇíÊìç‰Ωú„Åó„ÄÅReconciliation„ÇíÂÆüÊñΩ„Åó„Åæ„Åô„ÄÇapplication-controller„ÅØ„ÄÅEtcd‰∏ä„Å´Ê∞∏Á∂öÂåñ„Åï„Çå„Åü„Éû„Éã„Éï„Çß„Çπ„Éà„Å®Âêå„ÅòÁä∂ÊÖã„ÅÆArgoCDÁ≥ª„Ç´„Çπ„Çø„É†„É™„ÇΩ„Éº„Çπ„Çí‰ΩúÊàê/Â§âÊõ¥„Åó„Åæ„Åô„ÄÇ‚ñ∂ „Ç´„Çπ„Çø„É†„Ç≥„É≥„Éà„É≠„Éº„É©„Éº„Åß„ÇÇ„ÅÇ„Çãapplication-controller„Å´„Å§„ÅÑ„Å¶How Operators work in Kubernetes | Red Hat Developer(3) application-controller„Å´„Çà„Çã„Éû„Éã„Éï„Çß„Çπ„ÉàÂèñÂæóapplication-controller„ÅØ„ÄÅrepo-server„Åã„Çâ„É™„Éù„Ç∏„Éà„É™„ÅÆ„Éû„Éã„Éï„Çß„Çπ„Éà„ÇíÂèñÂæó„Åó„Åæ„Åô„ÄÇÂèñÂæó„Åó„Åü„Éû„Éã„Éï„Çß„Çπ„Éà„ÅØ„ÄÅrepo-server„ÅÆ„Çµ„Ç§„Éâ„Ç´„Éº„Åß„ÅÇ„Çãcmp-server„Åå‰ΩúÊàê„Åó„Åü„ÇÇ„ÅÆ„Åß„Åô„ÄÇ(4) application-controller„Å´„Çà„Çã„Éò„É´„Çπ„ÉÅ„Çß„ÉÉ„ÇØapplication-controller„ÅØ„ÄÅ„Éó„É≠„ÉÄ„ÇØ„ÉàÁî®Cluster„Çí„Éò„É´„Çπ„ÉÅ„Çß„ÉÉ„ÇØ„Åó„Åæ„Åô„ÄÇapplication-controller„Å´„ÅØ„ÄÅgitops-engine„Éë„ÉÉ„Ç±„Éº„Ç∏„ÅåÂÜÖËîµ„Åï„Çå„Å¶„Åä„Çä„ÄÅ„Åì„Çå„ÅØ„Éò„É´„Çπ„ÉÅ„Çß„ÉÉ„ÇØ„Åã„Çâ„Éá„Éó„É≠„Ç§„Åæ„Åß„ÅÆÂü∫Êú¨ÁöÑ„Å™Âá¶ÁêÜ„ÇíÂÆüË°å„Åó„Åæ„Åô„ÄÇ‚ñ∂ gitops-engine„Éë„ÉÉ„Ç±„Éº„Ç∏„Å´„Å§„ÅÑ„Å¶v0.7.0 „Åß„ÅØ‰ª•‰∏ã„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™„Åã„Çâ„Å™„Çä„Åæ„Åôüëáüê± gitops-engine/‚îú‚îÄ‚îÄ üìÇ pkg‚îÇ    ‚îú‚îÄ‚îÄ cache‚îÇ    ‚îú‚îÄ‚îÄ diff   # „É™„Éù„Ç∏„Éà„É™„Å®Cluster„ÅÆÈñì„ÅÆ„Éû„Éã„Éï„Çß„Çπ„Éà„ÅÆÂ∑ÆÂàÜ„ÇíÊ§úÂá∫„Åô„Çã„ÄÇArgoCD„ÅÆDiffÊ©üËÉΩ„Å´Áõ∏ÂΩì„Åô„Çã„ÄÇ‚îÇ    ‚îú‚îÄ‚îÄ engine # ‰ªñ„ÅÆ„Éë„ÉÉ„Ç±„Éº„Ç∏„Çí‰Ωø„ÅÑ„ÄÅGitOps„ÅÆ‰∏ÄÈÄ£„ÅÆÂá¶ÁêÜ„ÇíÂÆüË°å„Åô„Çã„ÄÇ‚îÇ    ‚îú‚îÄ‚îÄ health # Cluster„ÅÆ„Çπ„ÉÜ„Éº„Çø„Çπ„Çí„ÉÅ„Çß„ÉÉ„ÇØ„Åô„Çã„ÄÇArgoCD„ÅÆ„Éò„É´„Çπ„ÉÅ„Çß„ÉÉ„ÇØÊ©üËÉΩ„Å´Áõ∏ÂΩì„Åô„Çã„ÄÇ‚îÇ    ‚îú‚îÄ‚îÄ sync   # Cluster„Å´„Éû„Éã„Éï„Çß„Çπ„Éà„Çí„Éá„Éó„É≠„Ç§„Åô„Çã„ÄÇArgoCD„ÅÆSyncÊ©üËÉΩ„Å´Áõ∏ÂΩì„Åô„Çã„ÄÇ‚îÇ    ‚îî‚îÄ‚îÄ utils  # ‰ªñ„ÅÆ„Éë„ÉÉ„Ç±„Éº„Ç∏„Å´Ê±éÁî®ÁöÑ„Å™Èñ¢Êï∞„ÇíÊèê‰æõ„Åô„Çã„ÄÇ‚îÇ...gitops-engine/specs/design-top-down.md at v0.7.0 ¬∑ argoproj/gitops-engine ¬∑ GitHub(5) application-controller„Å´„Çà„Çã„Éû„Éã„Éï„Çß„Çπ„ÉàÂ∑ÆÂàÜÊ§úÂá∫application-controller„ÅØ„ÄÅ„Éó„É≠„ÉÄ„ÇØ„ÉàÁî®Cluster„ÅÆ„Éû„Éã„Éï„Çß„Çπ„Éà„Å®„ÄÅrepo-server„Åã„ÇâÂèñÂæó„Åó„Åü„Éû„Éã„Éï„Çß„Çπ„Éà„ÅÆÂ∑ÆÂàÜ„ÇíÊ§úÂá∫„Åó„Åæ„Åô„ÄÇ„Åì„Åì„Åß„ÄÅkubectl diff„Ç≥„Éû„É≥„Éâ„ÅÆÂÆüË°å„ÅåËá™ÂãïÂåñ„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ(6) application-controller„Å´„Çà„ÇãÂá¶ÁêÜÁµêÊûú‰øùÁÆ°application-controller„ÅØ„ÄÅÂá¶ÁêÜÁµêÊûú„Çíredis-server„Å´‰øùÁÆ°„Åó„Åæ„Åô„ÄÇredis-server„ÅØ„ÄÅApplication„ÇÑ„É™„Éù„Ç∏„Éà„É™„ÅÆ„Ç≥„Éü„ÉÉ„Éà„ÅÆÂçò‰Ωç„Åß„ÄÅapplication-controller„ÅÆÂá¶ÁêÜÁµêÊûú„Çí‰øùÁÆ°„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ$ kubectl exec -it argocd-redis-server \\    -n foo \\    -- sh -c \"redis-cli --raw\"127.0.0.1:6379\u003e keys *...app|resources-tree|\u003cApplicationÂêç\u003e|\u003c„Ç≠„É£„ÉÉ„Ç∑„É•„Éê„Éº„Ç∏„Éß„É≥\u003ecluster|info|\u003c„Éó„É≠„ÉÄ„ÇØ„ÉàÁî®Cluster„ÅÆURL\u003e|\u003c„Ç≠„É£„ÉÉ„Ç∑„É•„Éê„Éº„Ç∏„Éß„É≥\u003egit-refs|\u003c„Éû„Éã„Éï„Çß„Çπ„Éà/„ÉÅ„É£„Éº„Éà„É™„Éù„Ç∏„Éà„É™„ÅÆURL\u003e|\u003c„Ç≠„É£„ÉÉ„Ç∑„É•„Éê„Éº„Ç∏„Éß„É≥\u003emfst|app.kubernetes.io/instance|\u003cApplicationÂêç\u003e|\u003cÊúÄÊñ∞„ÅÆ„Ç≥„Éü„ÉÉ„Éà„Éè„ÉÉ„Ç∑„É•ÂÄ§\u003e|\u003c„Éá„Éó„É≠„Ç§ÂÖàNamespace\u003e|*****|\u003c„Ç≠„É£„ÉÉ„Ç∑„É•„Éê„Éº„Ç∏„Éß„É≥\u003e...(7) application-controller„Å´„Çà„Çã„Éû„Éã„Éï„Çß„Çπ„Éà„Éá„Éó„É≠„Ç§application-controller„ÅØ„ÄÅApplication„ÅÆÊìç‰Ωú„Å´Âøú„Åò„Å¶„ÄÅCluster„Å´„Éû„Éã„Éï„Çß„Çπ„Éà„Çí„Éá„Éó„É≠„Ç§„Åó„Åæ„Åô„ÄÇ„Åì„Åì„Åß„ÄÅkubectl apply„Ç≥„Éû„É≥„Éâ„ÅÆÂÆüË°å„ÅåËá™ÂãïÂåñ„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ‚ñ∂ application-controller„Åå„Éû„Éã„Éï„Çß„Çπ„Éà„ÇíÊìç‰Ωú„Åó„ÅüË®ºÊã†„Å´„Å§„ÅÑ„Å¶metadata.managedFields„Ç≠„Éº„Åå„ÅÇ„Çä„ÄÅ‰Ωï„Åå„Åù„ÅÆ„Éû„Éã„Éï„Çß„Çπ„Éà„Çí‰ΩúÊàê/Â§âÊõ¥„Åó„Åü„ÅÆ„Åã„ÇíÁ¢∫Ë™ç„Åß„Åç„Åæ„Åô„ÄÇÂÆüÈöõ„Å´„Éû„Éã„Éï„Çß„Çπ„Éà„ÇíÁ¢∫Ë™ç„Åó„Å¶„Åø„Çã„Å®„ÄÅÁ¢∫„Åã„Å´application-controller„Åå„Éû„Éã„Éï„Çß„Çπ„Éà„Çí‰ΩúÊàê/Â§âÊõ¥„Åó„Å¶„Åè„Çå„Åü„Åì„Å®„ÇíÁ¢∫Ë™ç„Åß„Åç„Åæ„Åô„ÄÇapiVersion: apps/v1kind: Deploymentmetadata:  managedFields:    # ArgoCD„ÅÆapplication-controller„Å´„Çà„ÇãÁÆ°ÁêÜ    - manager: argocd-application-controller      apiVersion: apps/v1      # kube-apiserver„Å´ÂØæ„Åô„Çã„É™„ÇØ„Ç®„Çπ„ÉàÂÜÖÂÆπ      operation: Update      time: \"2022-01-01T16:00:00.000Z\"      # ArgoCD„ÅÆapplication-controller„ÅåÁÆ°ÁêÜ„Åô„Çã„Éû„Éã„Éï„Çß„Çπ„Éà„ÅÆ„Ç≠„ÉºÈÉ®ÂàÜ      fields: ...Ô∏èServer-Side Apply | Kubernetes05. dex-serverdex-server„Å®„ÅØ„Ç§„É≥„Éï„É©„É¨„Ç§„É§„Éº„Å´„ÅÇ„Çãdex-server„Åß„Åô„ÄÇSSO (‰æãÔºöOAuth 2.0„ÄÅSAML„ÄÅOIDC) „ÇíÊé°Áî®„Åô„ÇãÂ†¥Âêà„ÄÅargocd-server„ÅÆ‰ª£„Çè„Çä„Å´Ë™çÂèØ„É™„ÇØ„Ç®„Çπ„Éà„Çí‰ΩúÊàê„Åó„ÄÅ„Åæ„ÅüID„Éó„É≠„Éê„Ç§„ÉÄ„Éº (‰æãÔºöGitHub„ÄÅKeycloak„ÄÅAWS Cognito„ÄÅGoogle Auth„Å™„Å©) „Å´ÈÄÅ‰ø°„Åó„Åæ„Åô„ÄÇ„Åì„Çå„Å´„Çà„Çä„ÄÅargocd-server‰∏ä„ÅÆË™çË®º„Éï„Çß„Éº„Ç∫„ÇíID„Éó„É≠„Éê„Ç§„ÉÄ„Éº„Å´ÂßîË≠≤„Åß„Åç„Åæ„Åô„ÄÇGitHub - dexidp/dex: OpenID Connect (OIDC) identity and OAuth 2.0 provider with pluggable connectors‚ñ∂ dex-server„ÅÆÂøÖË¶ÅÊÄß„Å´„Å§„ÅÑ„Å¶2.0„ÄÅSAML) „Çí‰ΩøÁî®„Åô„ÇãÂ†¥Âêà„ÅØ„ÄÅdex-server„ÇíÊé°Áî®„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„ÅôüëçÔ∏èOverview - Argo CD - Declarative GitOps CD for Kubernetes‰ªïÁµÑ„Åø(1) „Éó„É≠„ÉÄ„ÇØ„ÉàÁî®ClusterÁÆ°ÁêÜËÄÖ„ÅÆ„É≠„Ç∞„Ç§„É≥„Éó„É≠„ÉÄ„ÇØ„ÉàÁî®ClusterÁÆ°ÁêÜËÄÖ„Åå„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ (argocd-server) „Å´SSO„Çí‰ΩøÁî®„Åó„Å¶„É≠„Ç∞„Ç§„É≥„Åó„Çà„ÅÜ„Å®„Åó„Åæ„Åô„ÄÇ(2) ID„Éó„É≠„Éê„Ç§„ÉÄ„Éº„Å∏„ÅÆË™çË®º„Éï„Çß„Éº„Ç∫ÂßîË≠≤argocd-server„ÅØ„ÄÅË™çË®º„Éï„Çß„Éº„Ç∫„ÇíID„Éó„É≠„Éê„Ç§„ÉÄ„Éº„Å´ÂßîË≠≤„Åô„Çã„Åü„ÇÅ„Å´„ÄÅdex-server„Çí„Ç≥„Éº„É´„Åó„Åæ„Åô„ÄÇ‚ñ∂ Ë™çË®º„Éï„Çß„Éº„Ç∫„ÅÆÂßîË≠≤„Å´„Å§„ÅÑ„Å¶Authentication and Authorization - Argo CD - Declarative GitOps CD for Kubernetes(3) dex-server„Å´„Çà„ÇãË™çÂèØ„É™„ÇØ„Ç®„Çπ„Éà‰ΩúÊàêdex-server„ÅØ„ÄÅË™çÂèØ„É™„ÇØ„Ç®„Çπ„Éà„Çí‰ΩúÊàê„Åó„Åæ„Åô„ÄÇË™çÂèØ„É™„ÇØ„Ç®„Çπ„Éà„Å´ÂøÖË¶Å„Å™ÊÉÖÂ†±„ÅØ„ÄÅConfigMap (argocd-cm) „ÅßË®≠ÂÆö„Åó„Å¶„Åä„ÅèÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇargocd-cm„ÅÆ„Åñ„Å£„Åè„Çä„Åó„ÅüÂÆüË£Ö‰æã„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Åß„Åôüëá„Åì„Åì„Åß„ÅØ„ÄÅID„Éó„É≠„Éê„Ç§„ÉÄ„Éº„ÇíGitHub„Å®„Åó„ÄÅË™çÂèØ„É™„ÇØ„Ç®„Çπ„Éà„Å´ÂøÖË¶Å„Å™„ÇØ„É©„Ç§„Ç¢„É≥„ÉàID„Å®„ÇØ„É©„Ç§„Ç¢„É≥„Éà„Ç∑„Éº„ÇØ„É¨„ÉÉ„Éà„ÇíË®≠ÂÆö„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇapiVersion: v1kind: ConfigMapmetadata:  namespace: foo  name: argocd-cmdata:  dex.config: |    connectors:      - type: github        id: github        name: GitHub SSO        config:          clientID: *****          clientSecret: *****        # dex-server„ÅåË™çÂèØ„É¨„Çπ„Éù„É≥„Çπ„Å´„Çà„Çã„É™„ÉÄ„Ç§„É¨„ÇØ„Éà„ÇíÂèó‰ø°„Åô„ÇãURL„ÇíË®≠ÂÆö„Åô„Çã        redirectURI: https://example.com/api/dex/callback‚ñ∂ dex-server„ÅÆË®≠ÂÆö„Å´„Å§„ÅÑ„Å¶dex.config„Ç≠„ÉºÈÖç‰∏ã„ÅÆË®≠ÂÆöÊñπÊ≥ï„ÅØ„ÄÅdex„ÅÆ„Éâ„Ç≠„É•„É°„É≥„Éà„Çí„Åø„Çã„Å®„Çà„ÅÑ„Åß„ÅôüëçAuthentication Through GitHub |(4) dex-server„Å´„Çà„ÇãË™çÂèØ„É™„ÇØ„Ç®„Çπ„ÉàÈÄÅ‰ø°dex-server„ÅØ„ÄÅÂâç„ÅÆÊâãÈ†Ü„Åß‰ΩúÊàê„Åó„ÅüË™çÂèØ„É™„ÇØ„Ç®„Çπ„Éà„ÇíID„Éó„É≠„Éê„Ç§„ÉÄ„Éº„Å´ÈÄÅ‰ø°„Åó„Åæ„Åô„ÄÇ(5) ID„Éó„É≠„Éê„Ç§„ÉÄ„Éº„Å´„Çà„ÇãË™çË®º„Éï„Çß„Éº„Ç∫ÂÆüÊñΩID„Éó„É≠„Éê„Ç§„ÉÄ„ÉºÂÅ¥„ÅßSSO„ÅÆË™çË®º„Éï„Çß„Éº„Ç∫„ÇíÂÆüÊñΩ„Åó„Åæ„Åô„ÄÇID„Éó„É≠„Éê„Ç§„ÉÄ„Éº„ÅØ„ÄÅ„Ç≥„Éº„É´„Éê„ÉÉ„ÇØURL (\u003cArgoCD„ÅÆ„Éâ„É°„Ç§„É≥Âêç\u003e/api/dex/callback) „ÇíÊåáÂÆö„Åó„Å¶„ÄÅË™çÂèØ„É¨„Çπ„Éù„É≥„Çπ„ÇíÈÄÅ‰ø°„Åó„Åæ„Åô„ÄÇË™çÂèØ„É¨„Çπ„Éù„É≥„Çπ„ÅØ„É™„ÉÄ„Ç§„É¨„ÇØ„Éà„ÇíÁô∫Áîü„Åï„Åõ„ÄÅargocd-server„Çí‰ªã„Åó„Å¶„ÄÅÂÜç„Å≥dex-server„Å´Â±ä„Åç„Åæ„Åô„ÄÇ„Åì„ÅÆÂæå„ÄÅdex-server„ÅØID„Éó„É≠„Éê„Ç§„ÉÄ„Éº„ÅÆ„Éà„Éº„ÇØ„É≥„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„Å´„É™„ÇØ„Ç®„Çπ„Éà„ÇíÈÄÅ‰ø°„Åó„ÄÅ„Åæ„ÅüID„Éó„É≠„Éê„Ç§„ÉÄ„Éº„Åã„Çâ„Éà„Éº„ÇØ„É≥ („Ç¢„ÇØ„Çª„Çπ„Éà„Éº„ÇØ„É≥„ÄÅID„Éà„Éº„ÇØ„É≥„Å™„Å©) „ÇÑ„É¶„Éº„Ç∂„ÉºÊÉÖÂ†±„ÇíÂèñÂæó„Åó„Åæ„Åô„ÄÇ„Åü„Å†„ÄÅSSO„ÅÆÁ®ÆÈ°û„Å´„Çà„Å£„Å¶‰ªïÁµÑ„Åø„ÅåÁï∞„Å™„Çã„Åü„ÇÅ„ÄÅË©≥Á¥∞„ÅØÁúÅÁï•„Åó„Åæ„Åô„ÄÇ‚ñ∂ dex-server„ÅÆ„Ç≥„Éº„É´„Éê„ÉÉ„ÇØURL„Å´„Å§„ÅÑ„Å¶Developer settings„Çø„Éñ „ÅßSSO„ÇíË®≠ÂÆö„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„ÄÅ„Åì„ÅÆÊôÇ„Å´Authorization callback URL„Å®„ÅÑ„ÅÜË®≠ÂÆöÁÆáÊâÄ„Åå„ÅÇ„Çã„ÅØ„Åö„Åß„Åôüëçüèª(6) argocd-server„Å´„Çà„ÇãË™çÂèØ„Éï„Çß„Éº„Ç∫ÂÆüÊñΩargocd-server„ÅØ„ÄÅAuthZ„ÅßË™çÂèØ„Éï„Çß„Éº„Ç∫„ÇíÂÆüÊñΩ„Åó„Åæ„Åô„ÄÇConfigMap (argocd-rbac-cm) „ÇíÂèÇÁÖß„Åó„ÄÅID„Éó„É≠„Éê„Ç§„ÉÄ„Éº„Åã„ÇâÂèñÂæó„Åó„Åü„É¶„Éº„Ç∂„Éº„ÇÑ„Ç∞„É´„Éº„Éó„Å´„ÄÅArgoCDÁ≥ª„Ç´„Çπ„Çø„É†„É™„ÇΩ„Éº„Çπ„Å´Èñ¢„Åô„ÇãË™çÂèØ„Çπ„Ç≥„Éº„Éó„Çí‰ªò‰∏é„Åó„Åæ„Åô„ÄÇ„Åñ„Å£„Åè„Çä„Åó„ÅüÂÆüË£Ö‰æã„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Åß„Åôüëá„Åì„Åì„Åß„ÅØ„ÄÅdeveloper„É≠„Éº„É´„Å´„ÅØdev„Å®„ÅÑ„ÅÜAppProject„Å´Â±û„Åô„ÇãArgoCDÁ≥ª„Ç´„Çπ„Çø„É†„É™„ÇΩ„Éº„Çπ„Å´„ÅÆ„Åø„ÄÅ„Åæ„Åümaintainer„É≠„Éº„É´„Å´„ÅØÂÖ®„Å¶„ÅÆAppProject„ÅÆÊìç‰Ωú„ÇíË®±ÂèØ„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ„Åæ„Åü„Åì„Çå„Çâ„ÅÆ„É≠„Éº„É´„Çí„ÄÅID„Éó„É≠„Éê„Ç§„ÉÄ„Éº„ÅßË™çË®º„Åï„Çå„Åü„Ç∞„É´„Éº„Éó„Å´Á¥ê„Å•„Åë„Å¶„ÅÑ„Åæ„Åô„ÄÇÁâπÂÆö„ÅÆArgoCDÁ≥ª„Ç´„Çπ„Çø„É†„É™„ÇΩ„Éº„Çπ„ÅÆ„Åø„Å∏„ÅÆ„Ç¢„ÇØ„Çª„Çπ„ÇíË®±ÂèØ„Åô„Çå„Å∞„ÄÅÁµêÊûú„Å®„Åó„Å¶ÁâπÂÆö„ÅÆCluster„Å∏„ÅÆ„Éá„Éó„É≠„Ç§„ÅÆ„Åø„ÇíË®±ÂèØ„Åó„Åü„Åì„Å®„Å´„Å™„Çä„Åæ„ÅôüëçapiVersion: v1kind: ConfigMapmetadata:  name: argocd-rbac-cm  namespace: foodata:  # „Éá„Éï„Ç©„É´„Éà„ÅÆ„É≠„Éº„É´  policy.default: role:developer  policy.csv: |    p, role:developer, *, *, dev/*/*, allow    p, role:maintainer, *, *, dev/*/*, allow    p, role:maintainer, *, *, prd/*/*, allow    g, developers, role:developer    g, maintainers, role:maintainer  scopes: \"[groups]\"‚ñ∂ AppProject„ÅÆË™çÂèØÂÆöÁæ©„ÅÆË®òÊ≥ï„Å´„Å§„ÅÑ„Å¶Casbin „ÅÆË®òÊ≥ï„Çí‰ΩøÁî®„Åó„Åæ„Åô„ÄÇ‰ªäÂõû„ÅÆÂÆüË£Ö‰æã„Åß‰ΩøÁî®„Åó„Åüp („Éë„Éº„Éü„ÉÉ„Ç∑„Éß„É≥) „Å®g („Ç∞„É´„Éº„Éó) „Åß„ÅØ„ÄÅ‰ª•‰∏ã„ÇíË®òÊ≥ï„Çí‰ΩøÁî®„Åß„Åç„Åæ„ÅôüëçapiVersion: v1kind: ConfigMapmetadata:  name: argocd-rbac-cm  namespace: argocddata:  policy.default: role:readonly  policy.csv: |    # „É≠„Éº„É´„Å®ArgoCDÁ≥ª„Ç´„Çπ„Çø„É†„É™„ÇΩ„Éº„Çπ„ÅÆË™çÂèØ„Çπ„Ç≥„Éº„Éó„ÇíÂÆöÁæ©„Åô„Çã    p, role:\u003c„É≠„Éº„É´Âêç\u003e, \u003cKubernetes„É™„ÇΩ„Éº„Çπ„ÅÆÁ®ÆÈ°û\u003e, \u003c„Ç¢„ÇØ„Ç∑„Éß„É≥Âêç\u003e, \u003cAppProjectÂêç\u003e/\u003cApplication„ÅÆNamespaceÂêç\u003e/\u003cApplicationÂêç\u003e, \u003cË®±Âê¶\u003e    # Ë™çË®ºÊ∏à„Åø„Ç∞„É´„Éº„Éó„Å´„É≠„Éº„É´„ÇíÁ¥ê‰ªò„Åë„Çã    g, \u003c„Ç∞„É´„Éº„ÉóÂêç\u003e, role:\u003c„É≠„Éº„É´Âêç\u003e  scopes: \"[groups]\"RBAC Configuration - Argo CD - Declarative GitOps CD for Kubernetes06. argocd-server (argocd-apiserver)argocd-server„Å®„ÅØÊúÄÂæå„Å´„ÄÅ„Ç§„É≥„Éï„É©„É¨„Ç§„É§„Éº„Å´„ÅÇ„Çãargocd-server„Åß„Åô„ÄÇ„Äéargocd-apiserver„Äè„Å®„ÇÇÂëº„Å∞„Çå„Åæ„Åô„ÄÇ„Åø„Çì„Å™„Åå„Çà„ÅèÁü•„ÇãArgoCD„ÅÆ„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ„Åß„Åô„ÄÇ„Åæ„Åü„ÄÅArgoCD„ÅÆAPI„Å®„Åó„Å¶„ÇÇÊ©üËÉΩ„Åó„ÄÅ‰ªñ„ÅÆ„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„Å®ÈÄö‰ø°„Åó„Åæ„Åôü¶Ñ‰ªïÁµÑ„Åø(1) application-controller„Å´„Çà„Çã„Éò„É´„Çπ„ÉÅ„Çß„ÉÉ„ÇØapplication-controller„ÅØ„ÄÅ„Éó„É≠„ÉÄ„ÇØ„ÉàÁî®Cluster„Çí„Éò„É´„Çπ„ÉÅ„Çß„ÉÉ„ÇØ„Åó„Åæ„Åô„ÄÇ(2) application-controller„Å´„Çà„Çã„Éû„Éã„Éï„Çß„Çπ„ÉàÂ∑ÆÂàÜÊ§úÂá∫application-controller„ÅØ„ÄÅ„Éó„É≠„ÉÄ„ÇØ„ÉàÁî®Cluster„ÅÆ„Éû„Éã„Éï„Çß„Çπ„Éà„Å®„ÄÅ„Éù„Éº„É™„É≥„Ç∞ÂØæË±°„ÅÆ„É™„Éù„Ç∏„Éà„É™„ÅÆ„Éû„Éã„Éï„Çß„Çπ„Éà„ÅÆÂ∑ÆÂàÜ„ÇíÊ§úÂá∫„Åó„Åæ„Åô„ÄÇ(3) application-controller„Å´„Çà„ÇãÂá¶ÁêÜÁµêÊûú‰øùÁÆ°application-controller„ÅØ„ÄÅÂá¶ÁêÜÁµêÊûú„Çíredis-server„Å´‰øùÁÆ°„Åó„Åæ„Åô„ÄÇ(4) application-controller„Å´„Çà„ÇãÂá¶ÁêÜÁµêÊûúÂèñÂæóargocd-server„ÅØ„ÄÅredis-server„Åã„ÇâÂá¶ÁêÜÁµêÊûú„ÇíÂèñÂæó„Åó„Åæ„Åô„ÄÇ(5) „Éó„É≠„ÉÄ„ÇØ„ÉàÁî®ClusterÁÆ°ÁêÜËÄÖ„ÅÆ„É≠„Ç∞„Ç§„É≥„Éó„É≠„ÉÄ„ÇØ„ÉàÁî®ClusterÁÆ°ÁêÜËÄÖ„Åå„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ (argocd-server) „Å´SSO„Çí‰ΩøÁî®„Åó„Å¶„É≠„Ç∞„Ç§„É≥„Åó„Çà„ÅÜ„Å®„Åó„Åæ„Åô„ÄÇ(6) Ingress„Ç≥„É≥„Éà„É≠„Éº„É©„Éº„Å´„Çà„Çã„É´„Éº„ÉÜ„Ç£„É≥„Ç∞Ingress„Ç≥„É≥„Éà„É≠„Éº„É©„Éº„ÅØ„ÄÅIngress„ÅÆ„É´„Éº„ÉÜ„Ç£„É≥„Ç∞„É´„Éº„É´„ÇíÂèÇÁÖß„Åó„ÄÅargocd-server„Å´„É´„Éº„ÉÜ„Ç£„É≥„Ç∞„Åó„Åæ„Åô„ÄÇ(7) ID„Éó„É≠„Éê„Ç§„ÉÄ„Éº„Å∏„ÅÆË™çË®º„Éï„Çß„Éº„Ç∫ÂßîË≠≤argocd-server„ÅØ„ÄÅ„É≠„Ç∞„Ç§„É≥ÊôÇ„Å´ID„Éó„É≠„Éê„Ç§„ÉÄ„Éº„Å´Ë™çË®º„Éï„Çß„Éº„Ç∫„ÇíÂßîË≠≤„Åô„Çã„Åü„ÇÅ„Å´„ÄÅdex-server„Çí„Ç≥„Éº„É´„Åó„Åæ„Åô„ÄÇ(8) ID„Éó„É≠„Éê„Ç§„ÉÄ„Éº„Å´„Çà„ÇãË™çË®º„Éï„Çß„Éº„Ç∫ÂÆüÊñΩID„Éó„É≠„Éê„Ç§„ÉÄ„Éº‰∏ä„ÅßË™çË®º„Éï„Çß„Éº„Ç∫„ÅåÂÆå‰∫Ü„Åó„Åæ„Åô„ÄÇargocd-server„ÅØ„ÄÅConfigMap (argocd-rbac-cm) „ÇíÂèÇÁÖß„Åó„ÄÅ„Éó„É≠„ÉÄ„ÇØ„ÉàÁî®ClusterÁÆ°ÁêÜËÄÖ„Å´Ë™çÂèØ„Çπ„Ç≥„Éº„Éó„Çí‰ªò‰∏é„Åó„Åæ„Åô„ÄÇ(9) argocd-server„Å´„Çà„ÇãË™çÂèØ„Éï„Çß„Éº„Ç∫ÂÆüÊñΩargocd-server„ÅØ„ÄÅË™çÂèØ„Çπ„Ç≥„Éº„Éó„Å´Âøú„Åò„Å¶„ÄÅ„Éó„É≠„ÉÄ„ÇØ„ÉàÁî®ClusterÁÆ°ÁêÜËÄÖ„ÅåApplication„ÇíÊìç‰ΩúÂèØËÉΩ„Å´„Åó„Åæ„Åô„ÄÇ‚ñ∂ Namespaced„Çπ„Ç≥„Éº„Éó„É¢„Éº„Éâ„Å´„Å§„ÅÑ„Å¶apiVersion: v1kind: ConfigMapmetadata:  name: argocd-cmd-params-cm  namespace: foodata:  # Ë®≠ÂÆö„Åó„Å¶„ÅØ„ÉÄ„É°  # application.namespaces: \"*\" # ÂÖ®„Å¶„ÅÆNamespace„ÇíË®±ÂèØ„Åô„Çã„ÄÇapiVersion: argoproj.io/v1alpha1kind: AppProjectmetadata:  name: dev-foo-project  namespace: foospec:  # Ë®≠ÂÆö„Åó„Å¶„ÅØ„ÉÄ„É°  # sourceNamespaces:  #  - \"foo\"„Åì„Çå„Çâ„Å´„Çà„Çä„ÄÅfoo„ÅÆNamespace„Å´Â±û„Åô„ÇãArgoCD„ÅØ„ÄÅ‰ªñ„ÅÆNamespace„Å´„ÅØ„Ç¢„ÇØ„Çª„Çπ„Åß„Åç„Å™„Åè„Å™„Çä„Åæ„ÅôüëçInstallation - Argo CD - Declarative GitOps CD for Kubernetes(10) application-controller„Å´„Çà„Çã„Éû„Éã„Éï„Çß„Çπ„Éà„Éá„Éó„É≠„Ç§„Éó„É≠„ÉÄ„ÇØ„ÉàÁî®ClusterÁÆ°ÁêÜËÄÖ„ÅØ„ÄÅ„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ (argocd-server) „Çí‰ΩøÁî®„Åó„Å¶„ÄÅCluster„Å´„Éû„Éã„Éï„Çß„Çπ„Éà„ÇíSync„Åó„Åæ„Åô„ÄÇ„Åì„ÅÆÊôÇ„ÄÅApplication„Çí‰ªã„Åó„Å¶application-controller„ÇíÊìç‰Ωú„Åó„ÄÅ„Éû„Éã„Éï„Çß„Çπ„Éà„Çí„Éá„Éó„É≠„Ç§„Åó„Åæ„Åô„ÄÇÂõ≥„Åß„ÅØ„ÄÅApp Of Apps„Éë„Çø„Éº„É≥„ÇíÊé°Áî®„Åó„Åü„Å®‰ªÆÂÆö„Åó„Å¶„ÅÑ„Åæ„Åôüë®‚Äçüë©‚Äçüëß‚Äçüë¶‚ñ∂ App Of Apps„Éë„Çø„Éº„É≥„Å´„Å§„ÅÑ„Å¶07. „Ç¢„Éº„Ç≠„ÉÜ„ÇØ„ÉÅ„É£„ÅÆ„Åæ„Å®„ÇÅ‰ªä„Åæ„Åß„ÅÆÂÖ®„Å¶„ÅÆÊÉÖÂ†±„Çí„Åñ„Å£„Åè„ÇäÊï¥ÁêÜ„Åó„Å¶Á∞°Áï•Âåñ„Åô„Çã„Å®„ÄÅArgoCD„ÅØ‰ª•‰∏ã„ÅÆ‰ªïÁµÑ„Åø„Åß„Éû„Éã„Éï„Çß„Çπ„Éà„Çí„Éá„Éó„É≠„Ç§„Åô„Çã„Åì„Å®„Å´„Å™„Çä„Åæ„Åôüëá08. „Åä„Çè„Çä„Å´ArgoCD„Å´„Çà„Çã„Éá„Éó„É≠„Ç§„ÅÆ‰ªïÁµÑ„Åø„ÅÆ‰ªïÁµÑ„Åø„Çí„ÇÇ„Çä„ÇÇ„ÇäÂ∏ÉÊïô„Åó„Åæ„Åó„Åü„ÄÇArgoCD„ÅØ„ÄÅUI„Åå‰Ωø„ÅÑ„ÇÑ„Åô„Åè„ÄÅ‰ªïÁµÑ„Åø„ÅÆË©≥Á¥∞„ÇíÁü•„Çâ„Åö„Å®„ÇÇÊØîËºÉÁöÑÁ∞°Âçò„Å´ÈÅãÁî®„Åß„Åç„Çã„Åü„ÇÅ„ÄÅ„É¶„Éº„Ç∂„Éº„Éï„É¨„É≥„Éâ„É™„Éº„Å™„ÉÑ„Éº„É´„Å†„Å®ÊÄù„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ„ÇÇ„ÅóArgoCD„Çí‰Ωø„Çè„Åö„Å´„Éû„Éã„Éï„Çß„Çπ„Éà„Çí„Éá„Éó„É≠„Ç§„Åó„Å¶„ÅÑ„ÇãÊñπ„ÅØ„ÄÅArgoCD„ÅÆÊé°Áî®„Çí„Éè„Ç§„Éë„Éº„Éª„Ç¶„É´„Éà„É©„Éª„Ç¢„É´„ÉÜ„Ç£„É°„ÉÉ„Éà„Åä„Åô„Åô„ÇÅ„Åó„Åæ„ÅôüëçË¨ùËæûArgoCD„ÅÆË®≠Ë®à„Å´„ÅÇ„Åü„Çä„ÄÅ‰ª•‰∏ã„ÅÆÊñπ„Å´ÊúâÁõä„Å™„Éó„É©„ÇØ„ÉÜ„Ç£„Çπ„Çí„ÅîÊïôÊéà„ÅÑ„Åü„Å†„Åç„Åæ„Åó„Åü„ÄÇ@yaml_villager „Åï„Çì„Åì„ÅÆÂ†¥„ÅßÊÑüË¨ùÁî≥„Åó‰∏ä„Åí„Åæ„Åôüôáüèª‚ÄçË®ò‰∫ãÈñ¢ÈÄ£„ÅÆ„Åä„Åô„Åô„ÇÅÊõ∏Á±çGitOps Cookbook: Kubernetes Automation in Practice (English Edition)‰ΩúËÄÖ:Vinto, Natale,Bueno, Alex SotoO'Reilly MediaAmazonGitOps and Kubernetes: Continuous Deployment with Argo CD, Jenkins X, and Flux‰ΩúËÄÖ:Yuen, Billy,Matyushentsev, Alexander,Ekenstam, Todd,Suen, JesseManning PublicationsAmazon","isoDate":"2023-05-02T05:42:57.000Z","dateMiliSeconds":1683006177000,"authorName":"Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π","authorId":"hiroki-hasegawa"},{"title":"„ÄêIstio‚õµÔ∏è„ÄëIstio„ÇíÂÆâÂÖ®„Å´„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„Åô„Çã„Ç´„Éä„É™„Ç¢ÊñπÂºè„Å®„Åù„ÅÆ‰ªïÁµÑ„Åø","link":"https://hiroki-hasegawa.hatenablog.jp/entry/2023/02/26/202548","contentSnippet":"„Åì„ÅÆË®ò‰∫ã„Åã„ÇâÂæó„Çâ„Çå„ÇãÁü•Ë≠ò„Åì„ÅÆË®ò‰∫ã„ÇíË™≠„ÇÄ„Å®„ÄÅ‰ª•‰∏ã„Çí \"ÂÆåÂÖ®„Å´ÁêÜËß£\" „Åß„Åç„Åæ„Åô‚úåÔ∏èIstio„ÅÆ„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„ÉâÊâãÊ≥ï„ÅÆÁ®ÆÈ°û„Å´„Å§„ÅÑ„Å¶ÂÆâÂÖ®„Å™„Ç´„Éä„É™„Ç¢ÊñπÂºè„ÅÆ‰ªïÁµÑ„Åø„Å´„Å§„ÅÑ„Å¶„Åì„ÅÆË®ò‰∫ã„Åã„ÇâÂæó„Çâ„Çå„ÇãÁü•Ë≠ò01. „ÅØ„Åò„ÇÅ„Å´02. „Å™„ÅúÂÆâÂÖ®„Å™„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„ÅåÂøÖË¶Å„Å™„ÅÆ„ÅãËµ∑„Åì„Çä„ÅÜ„ÇãÂïèÈ°åÊé°Áî®„Åô„Çã„Åπ„Åç„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„ÉâÊâãÊ≥ï03. „Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„ÉâÊâãÊ≥ï„ÇíË™¨Êòé„Åô„ÇãÂâç„Å´„Ç´„Éä„É™„Ç¢„É™„É™„Éº„Çπ„Å®„ÅØ„Ç´„Éä„É™„Ç¢„É™„É™„Éº„Çπ„ÅÆÊâãÈ†Ü(1) Êñ∞Áí∞Â¢É„ÅÆ„É™„É™„Éº„Çπ(2) Êñ∞Áí∞Â¢É„Å∏„ÅÆÈáç„Åø‰ªò„Åë„É´„Éº„ÉÜ„Ç£„É≥„Ç∞(3) ÂÆüÂú∞ÁöÑ„ÉÜ„Çπ„Éà„ÅÆÂÆüÊñΩ(4) Èáç„Åø‰ªò„Åë„ÅÆÊÆµÈöéÁöÑÂ§âÊõ¥„Äé„Ç´„Éä„É™„Ç¢„É™„É™„Éº„Çπ„Äè„ÅÆÂëºÁß∞„ÅÆÁî±Êù•04. „Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„ÉâÊâãÊ≥ï„ÅÆÊ¶ÇË¶Å(1) „Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„ÉâÂâç„ÅÆÊ§úË®º(2) Êñ∞Istiod„ÅÆ„Ç§„É≥„Çπ„Éà„Éº„É´(3) Webhook„ÅÆÂÆõÂÖà„ÅÆService„ÅÆÂ§âÊõ¥(4) Istio IngressGateway„Çí„Ç§„É≥„Éó„É¨„Éº„Çπ„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ(5) ‰∏ÄÈÉ®„ÅÆNamespace„ÅÆistio-proxy„Ç≥„É≥„ÉÜ„Éä„Çí„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ(6) „É¶„Éº„Ç∂„ÅÆÊâã„ÇíÂÄü„Çä„Åü„ÉÜ„Çπ„Éà(7) istio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅÆÊÆµÈöéÁöÑ„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ(8) ÊóßIstiod„ÅÆ„Ç¢„É≥„Ç§„É≥„Çπ„Éà„Éº„É´05. „Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„ÉâÊâãÊ≥ï„ÅÆË©≥Á¥∞istioctl „Ç≥„Éû„É≥„Éâ„Çí‰ΩøÁî®„Åó„Åü„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„ÉâÂâçÊèêNamespaceIstiodIstio IngressGateway„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ(1) „Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„ÉâÂâç„ÅÆÊ§úË®º„Åì„Åì„ÅßÂÆüÊñΩ„Åô„Çã„Åì„Å®istioctl x precheck„Ç≥„Éû„É≥„Éâkubectl get„Ç≥„Éû„É≥„Éâ‚ñº Istiod„ÅÆDeployment‚ñº Webhook„ÅÆÂÆõÂÖà„ÅÆService‚ñº ÂÆõÂÖà„ÅÆService„ÇíÊ±∫„ÇÅ„ÇãMutatingWebhookConfiguration(2) Êñ∞Istiod„ÅÆ„Ç§„É≥„Çπ„Éà„Éº„É´„Åì„Åì„ÅßÂÆüÊñΩ„Åô„Çã„Åì„Å®istioctl version„Ç≥„Éû„É≥„Éâistioctl install„Ç≥„Éû„É≥„Éâkubectl get„Ç≥„Éû„É≥„Éâ‚ñº Istiod„ÅÆDeployment‚ñº Webhook„ÅÆÂÆõÂÖà„ÅÆService‚ñº Webhook„ÅÆÂÆõÂÖà„ÅÆService„ÇíÊ±∫„ÇÅ„ÇãMutatingWebhookConfiguration(3) Webhook„ÅÆÂÆõÂÖà„ÅÆService„ÅÆÂ§âÊõ¥„Åì„Åì„ÅßÂÆüÊñΩ„Åô„Çã„Åì„Å®istioctl tag set„Ç≥„Éû„É≥„Éâ(4) Istio IngressGateway„Çí„Ç§„É≥„Éó„É¨„Éº„Çπ„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„Åì„Åì„ÅßÂÆüÊñΩ„Åô„Çã„Åì„Å®kubectl rollout restart„Ç≥„Éû„É≥„Éâ(5) ‰∏ÄÈÉ®„ÅÆNamespace„ÅÆistio-proxy„Ç≥„É≥„ÉÜ„Éä„Çí„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„Åì„Åì„ÅßÂÆüÊñΩ„Åô„Çã„Åì„Å®kubectl rollout restart„Ç≥„Éû„É≥„Éâ(6) „É¶„Éº„Ç∂„ÅÆÊâã„ÇíÂÄü„Çä„Åü„ÉÜ„Çπ„Éà„Åì„Åì„ÅßÂÆüÊñΩ„Åô„Çã„Åì„Å®„ÇÇ„ÅóÂïèÈ°å„ÅåËµ∑„Åì„Å£„ÅüÂ†¥Âêà(7) istio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅÆÊÆµÈöéÁöÑ„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„Åì„Åì„ÅßÂÆüÊñΩ„Åô„Çã„Åì„Å®kubectl rollout restart„Ç≥„Éû„É≥„Éâ(8) ÊóßIstiod„ÅÆ„Ç¢„É≥„Ç§„É≥„Çπ„Éà„Éº„É´„Åì„Åì„ÅßÂÆüÊñΩ„Åô„Çã„Åì„Å®istioctl uninstall„Ç≥„Éû„É≥„Éâkubectl get„Ç≥„Éû„É≥„Éâ‚ñº Istiod„ÅÆDeployment‚ñº Webhook„ÅÆÂÆõÂÖà„ÅÆService‚ñº ÂÆõÂÖà„ÅÆService„ÇíÊ±∫„ÇÅ„ÇãMutatingWebhookConfiguration06. „Åä„Çè„Çä„Å´Ë®ò‰∫ãÈñ¢ÈÄ£„ÅÆ„Åä„Åô„Åô„ÇÅÊõ∏Á±ç01. „ÅØ„Åò„ÇÅ„Å´Èö†„Åó„Åæ„Åõ„Çì„ÄÇÊúâÂêâÂºòË°å„ÅÆ„Çµ„É≥„Éá„Éº„Éä„Ç§„Éà„Éâ„É™„Éº„Éû„Éº „ÅØ‰∫∫Áîü„ÅÆ„Éê„Ç§„Éñ„É´„Åß„Åô„ÄÇ„Åï„Å¶„ÄÅÊúÄËøë„ÅÆÊ•≠Âãô„ÅßIstio‚õµÔ∏è„Çí„Å≤„Åü„Åô„Çâ„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ‰ªäÂõû„ÅØ„ÄÅÊé°Áî®„Åó„Åü„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„ÉâÊâãÊ≥ï„ÅÆÁ¥π‰ªã„ÇÇÂÖº„Å≠„Å¶„ÄÅIstio„ÅÆÂÆâÂÖ®„Å™„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„ÉâÊâãÊ≥ï„ÅÆ‰ªïÁµÑ„Åø„ÇíË®ò‰∫ã„ÅßËß£Ë™¨„Åó„Åæ„Åó„Åü„ÄÇIstio„ÅÆ„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„ÉâÊâãÊ≥ï„Å´„ÅØÂ§âÈÅ∑„Åå„ÅÇ„Çä„ÄÅËß£Ë™¨„Åô„Çã„ÅÆ„ÅØÂü∑Á≠ÜÊôÇÁÇπ (2023/02/26) „ÅßÊúÄÊñ∞„ÅÆ 1.14 Á≥ª„ÅÆ„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„ÉâÊâãÊ≥ï„Åß„Åô„ÄÇ„Åù„Çå„Åß„ÅØ„ÄÅ„ÇÇ„Çä„ÇÇ„ÇäÂ∏ÉÊïô„Åó„Å¶„ÅÑ„Åç„Åæ„Åôüòó02. „Å™„ÅúÂÆâÂÖ®„Å™„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„ÅåÂøÖË¶Å„Å™„ÅÆ„ÅãËµ∑„Åì„Çä„ÅÜ„ÇãÂïèÈ°å„Åù„ÇÇ„Åù„ÇÇ„ÄÅ„Å™„ÅúIstio„ÅßÂÆâÂÖ®„Å™„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„ÇíÊé°Áî®„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çã„ÅÆ„Åß„Åó„Çá„ÅÜ„Åã„ÄÇIstio„ÅßÂïèÈ°å„ÅåËµ∑„Åì„Çã„Å®„ÄÅPodÂÜÖ„ÅÆistio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅåÊ≠£„Åó„ÅèÁ®ºÂÉç„Åõ„Åö„ÄÅ„Ç∑„Çπ„ÉÜ„É†„Å´Â§ß„Åç„Å™ÂΩ±Èüø„Çí‰∏é„Åà„ÇãÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ‰æã„Åà„Å∞„ÄÅistio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅÆPod„Å∏„ÅÆ„Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥„Åå„Åö„Å£„Å®ÂÆå‰∫Ü„Åõ„Åö„ÄÅ„Ç¢„Éó„É™„Ç≥„É≥„ÉÜ„Éä„Å∏„ÅÆÈÄö‰ø°„ÅåÂÖ®„Å¶ÈÅÆÊñ≠„Åï„Çå„Çã„Å®„ÅÑ„Å£„Åü„Åì„Å®„ÅåËµ∑„Åì„Çã„Åì„Å®„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇÊé°Áî®„Åô„Çã„Åπ„Åç„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„ÉâÊâãÊ≥ïÂü∑Á≠ÜÊôÇÁÇπ (2023/02/26) „Åß„ÅØ„ÄÅIstiod„Ç≥„É≥„Éà„É≠„Éº„É´„Éó„É¨„Éº„É≥ (‰ª•Èôç„ÄÅIstiod„Å®„Åó„Åæ„Åô) „ÅÆ„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„ÉâÊâãÊ≥ï„Å´„ÅØ„ÄÅ„Äé„Ç§„É≥„Éó„É¨„Éº„ÇπÊñπÂºè„Äè„Å®„Äé„Ç´„Éä„É™„Ç¢ÊñπÂºè„Äè„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ„Åæ„ÅüÂêà„Çè„Åõ„Å¶„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„ÅåÂøÖË¶Å„Å™Istio IngressGateway„Å´„ÅØ„ÄÅ„Åù„ÅÆÊâãÊ≥ï„Å´„Äé„Ç§„É≥„Éó„É¨„Éº„ÇπÊñπÂºè„Äè„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ‰ªäÂõû„ÅÆÂÆâÂÖ®„Å™„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„ÉâÊâãÊ≥ï„Å®„Åó„Å¶„ÄÅIstiod„Åß„ÅØ„Äé„Ç´„Éä„É™„Ç¢„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„Äè„ÄÅIstio IngressGateway„Åß„ÅØ„Äé„Ç§„É≥„Éó„É¨„Éº„Çπ„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„Äè„ÇíÊé°Áî®„Åó„Åæ„Åô„ÄÇIstio / Canary UpgradesIstio / Installing Gateways03. „Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„ÉâÊâãÊ≥ï„ÇíË™¨Êòé„Åô„ÇãÂâç„Å´„Ç´„Éä„É™„Ç¢„É™„É™„Éº„Çπ„Å®„ÅØIstiod„ÅÆ„Ç´„Éä„É™„Ç¢„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„ÅåÁêÜËß£„Åó„ÇÑ„Åô„Åè„Å™„Çã„Çà„ÅÜ„Å´„ÄÅ„Ç´„Éä„É™„Ç¢„É™„É™„Éº„Çπ„Åã„ÇâË™¨Êòé„Åó„Åü„ÅÑ„Å®ÊÄù„ÅÑ„Åæ„Åô„ÄÇ„Ç´„Éä„É™„Ç¢„É™„É™„Éº„Çπ„ÅØ„ÄÅÂÆüÈöõ„ÅÆ„É¶„Éº„Ç∂„Éº„Å´„ÉÜ„Çπ„Éà„Åó„Å¶„ÇÇ„Çâ„ÅÑ„Å™„Åå„Çâ„É™„É™„Éº„Çπ„Åô„ÇãÊâãÊ≥ï„Åß„Åô„ÄÇ„ÇÇ„Åó„Ç´„Éä„É™„Ç¢„É™„É™„Éº„Çπ„Çí„ÅîÂ≠òÁü•„ÅÆÊñπ„ÅØ„ÄÅ 04. „Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„ÉâÊâãÊ≥ï„ÅÆÊ¶ÇË¶Å „Åæ„ÅßÈ£õ„Å∞„Åó„Å¶„Åè„Å†„Åï„ÅÑüôáüèª‚Äç„Ç´„Éä„É™„Ç¢„É™„É™„Éº„Çπ„ÅÆÊâãÈ†Ü„Ç´„Éä„É™„Ç¢„É™„É™„Éº„Çπ„ÅØ„ÄÅ‰∏ÄÈÉ®„ÅÆ„É¶„Éº„Ç∂„Éº„ÇíÁä†Áâ≤„Å´„Åô„Çã„Åì„Å®„Å´„Å™„Çã‰∏ÄÊñπ„Åß„ÄÅ„Ç¢„Éó„É™„ÇíÂÆüÂú∞ÁöÑ„Å´„ÉÜ„Çπ„Éà„Åß„Åç„ÇãÁÇπ„ÅßÂÑ™„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇÊâãÈ†Ü„Çí‰∫§„Åà„Å™„Åå„ÇâË™¨Êòé„Åó„Åæ„Åô„ÄÇCanary Release(1) Êñ∞Áí∞Â¢É„ÅÆ„É™„É™„Éº„ÇπÊóßÁí∞Â¢É„ÅÆ„Ç¢„Éó„É™„ÇíÊÆã„Åó„Åü„Åæ„Åæ„ÄÅÊñ∞Áí∞Â¢É„Çí„É™„É™„Éº„Çπ„Åó„Åæ„Åô„ÄÇ„Åì„ÅÆÊÆµÈöé„Åß„ÅØ„ÄÅÂÖ®„Å¶„ÅÆ„É¶„Éº„Ç∂„Éº (100%) „ÇíÊóßÁí∞Â¢É„Å´„É´„Éº„ÉÜ„Ç£„É≥„Ç∞„Åó„Åæ„Åô„ÄÇ(2) Êñ∞Áí∞Â¢É„Å∏„ÅÆÈáç„Åø‰ªò„Åë„É´„Éº„ÉÜ„Ç£„É≥„Ç∞„É≠„Éº„Éâ„Éê„É©„É≥„Çµ„Éº„ÅßÈáç„Åø‰ªò„Åë„ÇíÂ§âÊõ¥„Åó„ÄÅ‰∏ÄÈÉ®„ÅÆ„É¶„Éº„Ç∂„Éº („Åì„Åì„Åß„ÅØ10%) „ÇíÊñ∞Áí∞Â¢É„Å´„É´„Éº„ÉÜ„Ç£„É≥„Ç∞„Åó„Åæ„Åô„ÄÇ(3) ÂÆüÂú∞ÁöÑ„ÉÜ„Çπ„Éà„ÅÆÂÆüÊñΩ„É¶„Éº„Ç∂„Éº„ÅÆÊâã„ÇíÂÄü„Çä„Å¶Êñ∞Áí∞Â¢É„ÇíÂÆüÂú∞ÁöÑ„Å´„ÉÜ„Çπ„Éà„Åó„Åæ„Åô (‰æãÔºöË©≤ÂΩì„ÅÆ„Ç®„É©„Éº„É°„Éà„É™„ÇØ„Çπ„ÅåÂü∫Ê∫ñÂÄ§„ÇíÊ∫Ä„Åü„Åô„Åã) „ÄÇ(4) Èáç„Åø‰ªò„Åë„ÅÆÊÆµÈöéÁöÑÂ§âÊõ¥Êñ∞Áí∞Â¢É„Å´ÂïèÈ°å„ÅåËµ∑„Åì„Çâ„Å™„Åë„Çå„Å∞„ÄÅÈáç„Åø‰ªò„Åë„ÇíÊÆµÈöéÁöÑ„Å´Â§âÊõ¥„Åó„ÄÅÊúÄÁµÇÁöÑ„Å´„ÅØÂÖ®„Å¶„ÅÆ„É¶„Éº„Ç∂„Éº (100%) „ÇíÊñ∞Áí∞Â¢É„Å´„É´„Éº„ÉÜ„Ç£„É≥„Ç∞„Åó„Åæ„Åô„ÄÇ„Äé„Ç´„Éä„É™„Ç¢„É™„É™„Éº„Çπ„Äè„ÅÆÂëºÁß∞„ÅÆÁî±Êù•„Ç´„Éä„É™„Ç¢„É™„É™„Éº„Çπ„Å´„Å§„ÅÑ„Å¶„ÅØ„ÄÅ„Åù„ÅÆÂëºÁß∞„ÅÆÁî±Êù•„ÇíÁü•„Çã„Å®„ÄÅ„Çà„ÇäÁêÜËß£„ÅåÊ∑±„Åæ„Çä„Åæ„Åô„ÄÇ„Ç´„Éä„É™„Ç¢„É™„É™„Éº„Çπ„ÅØ„ÄÅ20‰∏ñÁ¥ÄÈ†É„ÅÆÁÇ≠ÂùëÂä¥ÂÉçËÄÖ„ÅÆÂç±Ê©üÂØüÁü•ÊñπÊ≥ï„Å´Áî±Êù•„Åó„Åæ„Åô„ÄÇÁÇ≠Èâ±ÂÜÖ„Å´„ÅØÊúâÊØí„Å™‰∏ÄÈÖ∏ÂåñÁÇ≠Á¥†„ÅåÁô∫Áîü„Åô„ÇãÂ†¥ÊâÄ„Åå„ÅÇ„Çä„Åæ„Åô„Åå„ÄÅ„Åì„Çå„ÅØÁÑ°Ëâ≤ÁÑ°Ëá≠„Å™„Åü„ÇÅ„ÄÅÊ∞ó„Å•„Åè„Åì„Å®„Å´ÈÅÖ„Çå„ÇãÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ„Åù„Åì„ÅßÂΩìÊôÇ„ÅÆÁÇ≠Èâ±Âä¥ÂÉçËÄÖ„ÅØ„ÄÅ‰∏ÄÈÖ∏ÂåñÁÇ≠Á¥†„Å´ÊïèÊÑü„Å™„Äé„Ç´„Éä„É™„Ç¢„Äè„ÇíÁÇ≠Èâ±ÂÜÖ„Å´ÊåÅ„Å°Ëæº„Åø„ÄÅ„Ç´„Éä„É™„Ç¢„ÅÆÊßòÂ≠ê„Åã„Çâ‰∏ÄÈÖ∏ÂåñÁÇ≠Á¥†„ÅÆÂ≠òÂú®„ÇíÂØüÁü•„Åô„Çã„Çà„ÅÜ„Å´„Åó„Å¶„ÅÑ„Åü„Åù„ÅÜ„Åß„Åô„ÄÇ„Å§„Åæ„Çä„ÄÅÂÖà„Åª„Å©„ÅÆ„ÄéÁä†Áâ≤„Å´„Å™„Çã‰∏ÄÈÉ®„ÅÆ„É¶„Éº„Ç∂„Éº„Äè„Åå„ÄÅ„Åì„Åì„Åß„ÅÑ„ÅÜ„Ç´„Éä„É™„Ç¢„Å®„ÅÑ„ÅÜ„Çè„Åë„Åß„Åôüò®ÁîªÂÉèÂºïÁî®ÂÖÉÔºöGeorge McCaa, U.S. Bureau of MinesAbout canary deployment in simple words04. „Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„ÉâÊâãÊ≥ï„ÅÆÊ¶ÇË¶Å„Ç´„Éä„É™„Ç¢„É™„É™„Éº„Çπ„ÇíÁêÜËß£„Åó„Åü„Å®„Åì„Çç„Åß„ÄÅIstio„ÅÆÂÆâÂÖ®„Å™„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„ÉâÊâãÊ≥ï„ÅÆÊ¶ÇË¶Å„ÇíË™¨Êòé„Åó„Åæ„Åô„ÄÇ„Åä„Åä„Çà„Åù‰ª•‰∏ã„ÅÆÊâãÈ†Ü„Åã„Çâ„Å™„Çä„Åæ„Åô„ÄÇ„Å™„ÅäÂêÑÁï™Âè∑„ÅØ„ÄÅ05. „Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„ÉâÊâãÊ≥ï„ÅÆË©≥Á¥∞ „ÅÆ (1) „Äú (8) „Å´ÂØæÂøú„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ(1) „Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„ÉâÂâç„ÅÆÊ§úË®ºÊóßIstiod„ÅåÁ®ºÂÉç„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ„Åì„Åì„Åß„ÄÅ„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„ÅåÂèØËÉΩ„Åã„Å©„ÅÜ„Åã„ÇíÊ§úË®º„Åó„Å¶„Åä„Åç„Åæ„Åô„ÄÇ(2) Êñ∞Istiod„ÅÆ„Ç§„É≥„Çπ„Éà„Éº„É´Êñ∞Istiod (discovery„Ç≥„É≥„ÉÜ„Éä) „Çí„Ç§„É≥„Çπ„Éà„Éº„É´„Åó„Åæ„Åô„ÄÇ(3) Webhook„ÅÆÂÆõÂÖà„ÅÆService„ÅÆÂ§âÊõ¥Êñ∞Istiod„ÅÆistio-proxy„Ç≥„É≥„ÉÜ„Éä„Çí„Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥„Åß„Åç„Çã„Çà„ÅÜ„Å´„ÄÅWebhook„ÅÆÂÆõÂÖà„ÅÆService„ÇíÂ§âÊõ¥„Åó„Åæ„Åô„ÄÇ„Åì„ÅÆÊâãÈ†Ü„ÅØÈáçË¶Å„Åß„ÄÅÂæå„ÅÆ  (3) Webhook„ÅÆÂÆõÂÖà„ÅÆService„ÅÆÂ§âÊõ¥ „ÅßË©≥Á¥∞„ÇíË™¨Êòé„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ(4) Istio IngressGateway„Çí„Ç§„É≥„Éó„É¨„Éº„Çπ„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„ÉâIstio IngressGateway„Çí„Ç§„É≥„Éó„É¨„Éº„Çπ„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„Åó„Åæ„Åô„ÄÇ(5) ‰∏ÄÈÉ®„ÅÆNamespace„ÅÆistio-proxy„Ç≥„É≥„ÉÜ„Éä„Çí„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ‰∏ÄÈÉ®„ÅÆNamespace„Åß„ÄÅistio-proxy„Ç≥„É≥„ÉÜ„Éä„Çí„Ç´„Éä„É™„Ç¢„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„Åó„Åæ„Åô„ÄÇ‚ñ∂Ô∏é „Äé„Ç´„Éä„É™„Ç¢„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„Äè„ÅÆÂëºÁß∞„Å´„Å§„ÅÑ„Å¶istio-proxy„Ç≥„É≥„ÉÜ„Éä„Çí‰∏ÄÊñâ„Å´„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„Åô„Çã„ÅÆ„Åß„ÅØ„Å™„Åè„ÄÅÊÆµÈöéÁöÑ„Å´„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„Åó„Å¶„ÅÑ„ÅèÊßòÂ≠ê„Çí„Äé„Ç´„Éä„É™„Ç¢„Äè„Å®ÂëºÁß∞„Åó„Å¶„ÅÑ„Çã„ÄÅ„Å®ÂÄã‰∫∫ÁöÑ„Å´Êé®Ê∏¨„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ„ÇÇ„Åó„Äé„Ç´„Éä„É™„Ç¢„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„Äè„ÅÆÁî±Êù•„Çí„ÅîÂ≠ò„Åò„ÅÆÊñπ„ÅØ„ÄÅ„Åú„Å≤Êïô„Åà„Å¶„ÅÑ„Åü„Å†„Åë„Çã„Å®üôáüèª‚Äç(6) „É¶„Éº„Ç∂„ÅÆÊâã„ÇíÂÄü„Çä„Åü„ÉÜ„Çπ„Éà„É¶„Éº„Ç∂„Éº„ÅÆÊâã„ÇíÂÄü„Çä„Å¶„ÄÅÂÆüÂú∞ÁöÑ„Å´„ÉÜ„Çπ„Éà„Åó„Åæ„Åô (‰æãÔºöË©≤ÂΩì„ÅÆ„Ç®„É©„Éº„É°„Éà„É™„ÇØ„Çπ„ÅåÂü∫Ê∫ñÂÄ§‰ª•‰∏ã„ÇíÊ∫Ä„Åü„Åô„Åã) „ÄÇ(7) istio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅÆÊÆµÈöéÁöÑ„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„ÉâÊñ∞Istiod„ÅÆistio-proxy„Ç≥„É≥„ÉÜ„Éä„Å´ÂïèÈ°å„ÅåËµ∑„Åì„Çâ„Å™„Åë„Çå„Å∞„ÄÅ‰ªñ„ÅÆNamespace„Åß„ÇÇistio-proxy„Ç≥„É≥„ÉÜ„Éä„ÇíÊÆµÈöéÁöÑ„Å´„Ç´„Éä„É™„Ç¢„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„Åó„Å¶„ÅÑ„Åç„Åæ„Åô„ÄÇ‰∏ÄÊñπ„Åß„ÇÇ„ÅóÂïèÈ°å„ÅåËµ∑„Åì„Çå„Å∞„ÄÅNamespace„ÅÆistio-proxy„Ç≥„É≥„ÉÜ„Éä„Å®Istio IngressGateway„Çí„ÉÄ„Ç¶„É≥„Ç∞„É¨„Éº„Éâ„Åó„Åæ„Åô„ÄÇ(8) ÊóßIstiod„ÅÆ„Ç¢„É≥„Ç§„É≥„Çπ„Éà„Éº„É´ÊúÄÂæå„Å´„ÄÅÊóßIstiod„Çí„Ç¢„É≥„Ç§„É≥„Çπ„Éà„Éº„É´„Åó„Åæ„Åô„ÄÇIstio / Canary Upgrades05. „Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„ÉâÊâãÊ≥ï„ÅÆË©≥Á¥∞istioctl „Ç≥„Éû„É≥„Éâ„Çí‰ΩøÁî®„Åó„Åü„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„Åì„Åì„Åã„Çâ„ÅØ„ÄÅ04. „Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„ÉâÊâãÊ≥ï„ÅÆÊ¶ÇË¶Å „ÇíÊ∑±„Åº„Å£„Å¶„ÅÑ„Åç„Åæ„Åô„ÄÇ‰ªäÂõû„ÅØ„ÄÅ„Éâ„Ç≠„É•„É°„É≥„Éà„Åß‰∏ÄÁï™ÂÑ™ÂÖà„Åó„Å¶Ë®òËºâ„Åï„Çå„Å¶„ÅÑ„Çã istioctl „Ç≥„Éû„É≥„Éâ„Çí‰ΩøÁî®„Åó„ÅüÊâãÈ†Ü „ÇíË™¨Êòé„Åó„Åæ„Åô„ÄÇ„Å™„ÅäÂêÑÁï™Âè∑„ÅØ„ÄÅ04. „Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„ÉâÊâãÊ≥ï„ÅÆÊ¶ÇË¶Å „ÅÆ (1) „Äú (8) „Å´ÂØæÂøú„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ‚ñ∂Ô∏é „Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„Å´‰ΩøÁî®„Åô„Çã„ÉÑ„Éº„É´„Å´„Å§„ÅÑ„Å¶istioctl„Ç≥„Éû„É≥„Éâ‰ª•Â§ñ„ÅÆ„ÉÑ„Éº„É´ (‰æãÔºöhelm„Ç≥„Éû„É≥„Éâ„ÄÅhelmfile„Ç≥„Éû„É≥„Éâ„ÄÅArgoCD) „Çí‰ΩøÁî®„Åó„Å¶„ÇÇ„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„Åß„Åç„Åæ„Åô„ÄÇÁ¥∞„Åã„Å™ÊâãÈ†Ü„ÅåÁï∞„Å™„Çã„Å†„Åë„Åß„ÄÅ„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„ÉâÊâãÊ≥ï„ÅÆÊ¶ÇË¶Å„ÅØÂêå„Åò„Åß„ÅôüôÜüèª‚ÄçÂâçÊèêNamespace„Åæ„ÅöÊúÄÂàù„Å´„ÄÅÂâçÊèê„Å®„Å™„ÇãÁä∂Ê≥Å„ÇíË®≠ÂÆö„Åó„Å¶„Åä„Åç„Åæ„Åô„ÄÇÂêÑNamespace„ÅÆistio.io/rev„É©„Éô„É´„Å´default„ÅåË®≠ÂÆö„Åï„Çå„Å¶„ÅÑ„Çã„Å®„Åó„Åæ„Åô„ÄÇ$ kubectl get namespace -L istio.io/revNAME              STATUS   AGE   REVfoo               Active   34d   defaultbar               Active   34d   defaultbaz               Active   34d   defaultistio-ingress     Active   34d   default...‚ñ∂Ô∏é istio.io/rev„É©„Éô„É´ÂÄ§„ÅÆ„Ç®„Ç§„É™„Ç¢„Çπ„Å´„Å§„ÅÑ„Å¶istio.io/rev„É©„Éô„É´ÂÄ§„ÅØ„ÄÅ„Å©„Çì„Å™„Ç®„Ç§„É™„Ç¢„Çπ„Åß„ÇÇ„Çà„ÅÑ„Åß„Åô„ÄÇ„Çà„Åè„ÅÇ„Çã„Ç®„Ç§„É™„Ç¢„Çπ„Å®„Åó„Å¶default„ÇÑstable„Çí‰ΩøÁî®„Åó„Åæ„Åôüëç„Åï„Çâ„Å´„ÄÅ„Éû„Éã„Éï„Çß„Çπ„Éà„Å´Êõ∏„ÅçËµ∑„Åì„Åô„Å®‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å´„Å™„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇapiVersion: v1kind: Namespacemetadata:  name: foo  labels:    istio.io/rev: default„Åì„ÅÆistio.io/rev„É©„Éô„É´„Åå„ÅÇ„Çã„Åì„Å®„Å´„Çà„Çä„ÄÅ„Åù„ÅÆNamespace„ÅÆPod„Å´istio-proxy„Ç≥„É≥„ÉÜ„Éä„ÇíËá™ÂãïÁöÑ„Å´„Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥„Åó„Åæ„Åô„ÄÇ‚ñ∂Ô∏é istio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅÆ„Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥„ÅÆ‰ªïÁµÑ„Åø„Å´„Å§„ÅÑ„Å¶„Å´„Å§„ÅÑ„Å¶istio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅÆ„Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥„ÅÆ‰ªïÁµÑ„Åø„Å´„Å§„ÅÑ„Å¶„ÅØ„ÄÅ‰ªäÂõûË®ÄÂèä„Åó„Å¶„Åä„Çä„Åæ„Åõ„Çì„ÄÇ‰ª•‰∏ã„ÅÆË®ò‰∫ã„ÅßËß£Ë™¨„Åó„Å¶„ÅÑ„Åæ„Åô„Åü„ÇÅ„ÄÅ„ÇÇ„ÅóÊ∞ó„Å´„Å™„ÇãÊñπ„ÅØ„Çà„Çç„Åó„Åè„Å©„ÅÜ„Åûüôáüèª‚ÄçIstiod„Åô„Åß„Å´1-14-6„ÅÆIstiod„ÅåÂãï„ÅÑ„Å¶„Åä„Çä„ÄÅ1-15-4„Å´„Ç´„Éä„É™„Ç¢„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„Åó„Åæ„Åô„ÄÇIstiod„ÅØDeploymentÈÖç‰∏ã„ÅÆPod„Åß„ÅÇ„Çä„ÄÅ„Åì„ÅÆPod„ÅØIstiod„ÅÆÂÆü‰Ωì„Åß„ÅÇ„Çãdiscovery„Ç≥„É≥„ÉÜ„Éä„ÇíÊåÅ„Å°„Åæ„Åô„ÄÇ$ kubectl get deployment -n istio-system -l app=istiodNAME                   READY   UP-TO-DATE   AVAILABLE   AGEistiod-1-14-6          1/1     1            1           47s # 1-14-6Istio IngressGatewayIstio IngressGateway„ÅØIstiod„Å®„ÅØÁï∞„Å™„ÇãNamespace„ÅßÂãï„ÅÑ„Å¶„Åä„Çä„ÄÅ„Ç§„É≥„Éó„É¨„Éº„Çπ„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„Åó„Åæ„Åô„ÄÇIstio IngressGateway„ÅØistio-proxy„Ç≥„É≥„ÉÜ„Éä„ÇíÊåÅ„Å°„Åæ„Åô„ÄÇ$ kubectl get deployment -n istio-ingressNAME                   READY   UP-TO-DATE   AVAILABLE   AGEistio-ingressgateway   1/1     1            1           47s‚ñ∂Ô∏é Istiod„Å®Istio IngressGateway„ÇíÂãï„Åã„ÅôNamespace„Å´„Å§„ÅÑ„Å¶Istio / Installing Gateways„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„ÇπÂêÑNamespace„Åß„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„ÅåÂãï„ÅÑ„Å¶„ÅÑ„Åæ„Åô„ÄÇ„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„ÅÆPod„ÅØistio-proxy„Ç≥„É≥„ÉÜ„Éä„ÇíÊåÅ„Å°„Åæ„Åô„ÄÇ$ kubectl get deployment -n fooNAME   READY   UP-TO-DATE   AVAILABLE   AGEfoo    2/2     1            1           47s...$ kubectl get deployment -n barNAME   READY   UP-TO-DATE   AVAILABLE   AGEbar    2/2     1            1           47s..$ kubectl get deployment -n bazNAME   READY   UP-TO-DATE   AVAILABLE   AGEbaz    2/2     1            1           47s...(1) „Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„ÉâÂâç„ÅÆÊ§úË®º„Åì„Åì„ÅßÂÆüÊñΩ„Åô„Çã„Åì„Å®„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„ÉâÂâç„Å´„ÄÅÁèæÂú®„ÅÆKubernetes Cluster„Åå„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„ÉâË¶Å‰ª∂„ÇíÊ∫Ä„Åü„Åó„Å¶„ÅÑ„Çã„Åã„ÇíÊ§úË®º„Åó„Åæ„Åô„ÄÇBefore you upgradeistioctl x precheck„Ç≥„Éû„É≥„Éâistioctl x precheck„Ç≥„Éû„É≥„Éâ„ÇíÂÆüË°å„Åó„ÄÅ„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„ÉâË¶Å‰ª∂„ÇíÊ§úË®º„Åó„Åæ„Åô„ÄÇÂïèÈ°å„Åå„Å™„Åë„Çå„Å∞„ÄÅistioctl„Ç≥„Éû„É≥„Éâ„ÅØNo issue ...„ÅÆÊñáË®Ä„ÇíÂá∫Âäõ„Åó„Åæ„Åô„ÄÇ$ istioctl x precheck‚úÖ No issues found when checking the cluster.Istiois safe to install or upgrade!  To get started, check out https://istio.io/latest/docs/setup/getting-started/‚ñ∂Ô∏é „Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„ÉâË¶Å‰ª∂„ÅåÊ∫Ä„Åü„Å™„ÅÑÂ†¥Âêà„Å´„Å§„ÅÑ„Å¶istioctl x precheck„Ç≥„Éû„É≥„Éâ„ÅØ„Ç®„É©„ÉºÊñáË®Ä„ÇíÂá∫Âäõ„Åó„Åæ„Åô„ÄÇ‰æã„Åà„Å∞„ÄÅIstio„ÅÆistio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅÆ„Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥„Åß„ÅØkube-apiserver„Å®ÈÄö‰ø°„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ„Åù„ÅÆ„Åü„ÇÅ„ÄÅkube-apiserver„ÅÆ„Éê„Éº„Ç∏„Éß„É≥„ÅåÂè§„Åô„Åé„Çã„Åõ„ÅÑ„ÅßIstio„ÅåÈùûÂØæÂøú„Åß„ÅÇ„Çã„Å®„ÄÅ„Ç®„É©„Éº„Å´„Å™„Çä„Åæ„Åôüò≠kubectl get„Ç≥„Éû„É≥„Éâ‚ñº Istiod„ÅÆDeploymentkubectl get„Ç≥„Éû„É≥„Éâ„ÇíÂÆüË°å„Åó„ÄÅÁèæÂú®„ÅÆIstiod„ÅÆ„Éê„Éº„Ç∏„Éß„É≥„ÇíÁ¢∫Ë™ç„Åó„Åæ„ÅôüëÄ„Åæ„Åö„ÅØIstiod„ÅÆDeployment„ÇíÁ¢∫Ë™ç„Åô„Çã„Å®„ÄÅ1-14-6„ÅÆDeployment„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ$ kubectl get deployment -n istio-system -l app=istiodNAME                   READY   UP-TO-DATE   AVAILABLE   AGEistiod-1-14-6          1/1     1            1           47s # 1-14-6istio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅÆ„Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥„ÅÆ‰ªïÁµÑ„Åø„Åß„ÅÑ„ÅÜ„Å®„ÄÅ‰ª•‰∏ã„ÅÆËµ§Êû†„ÅÆË¶ÅÁ¥†„Åß„Åôüëá‚ñº Webhook„ÅÆÂÆõÂÖà„ÅÆServiceÊ¨°„Å´„ÄÅ Service„ÇíÁ¢∫Ë™ç„Åô„Çã„Å®„ÄÅ1-14-6„ÅÆService„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ$ kubectl get service -n istio-system -l app=istiodNAME            TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)                                 AGEistiod-1-14-6   ClusterIP   10.96.93.151     \u003cnone\u003e        15010/TCP,15012/TCP,443/TCP,15014/TCP   109s # 1-14-6„Åì„ÅÆService„ÅØ„ÄÅkube-apiserver„Åã„ÇâIstiod„Å∏„ÅÆWebhook„Çí‰ª≤‰ªã„Åô„Çã„Åì„Å®„Å´„Çà„Çä„ÄÅistio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅÆ„Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥„ÇíÂèØËÉΩ„Å´„Åó„Åæ„Åô„ÄÇistio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅÆ„Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥„ÅÆ‰ªïÁµÑ„Åø„Åß„ÅÑ„ÅÜ„Å®„ÄÅ‰ª•‰∏ã„ÅÆËµ§Êû†„ÅÆË¶ÅÁ¥†„Åß„Åôüëá‚ñº ÂÆõÂÖà„ÅÆService„ÇíÊ±∫„ÇÅ„ÇãMutatingWebhookConfigurationÊúÄÂæå„Å´„ÄÅMutatingWebhookConfiguration„ÇíÁ¢∫Ë™ç„Åô„Çã„Å®„ÄÅistio-revision-tag-\u003c„Ç®„Ç§„É™„Ç¢„Çπ\u003e„Å®istio-sidecar-injector-\u003c„É™„Éì„Ç∏„Éß„É≥Áï™Âè∑\u003e„ÅÆMutatingWebhookConfiguration„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ$ kubectl get mutatingwebhookconfigurationsNAME                            WEBHOOKS   AGEistio-revision-tag-default      2          114s  # „Ç´„Éä„É™„Ç¢„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„ÉâÁî®istio-sidecar-injector-1-14-6   2          2m16s # „Ç§„É≥„Éó„É¨„Éº„Çπ„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„ÉâÁî®„ÅÆ„Åü„ÇÅ‰ªäÂõû„ÅØË®ÄÂèä„Åó„Å™„ÅÑistio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅÆ„Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥„ÅÆ‰ªïÁµÑ„Åø„Åß„ÅÑ„ÅÜ„Å®„ÄÅ‰ª•‰∏ã„ÅÆËµ§Êû†„ÅÆË¶ÅÁ¥†„Åß„Åôüëá„Åì„Çå„Çâ„ÅÆ„ÅÜ„Å°„ÄÅÂâçËÄÖ (istio-revision-tag-\u003c„Ç®„Ç§„É™„Ç¢„Çπ\u003e) „Çí„Ç´„Éä„É™„Ç¢„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„ÅÆ„Åü„ÇÅ„Å´‰ΩøÁî®„Åó„Åæ„Åô„ÄÇ„Åì„ÅÆMutatingWebhookConfiguration„ÅØ„ÄÅWebhook„ÅÆÂÆõÂÖà„ÅÆService„ÇíÊ±∫„ÇÅ„Çã„Åü„ÇÅ„ÄÅÁµêÊûúÁöÑ„Å´istio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅÆ„Éê„Éº„Ç∏„Éß„É≥„ÇíÊ±∫„ÇÅ„Åæ„Åô„ÄÇ„Åì„Åì„Åß„ÄÅMutatingWebhookConfiguration„ÅÆistio.io/rev„É©„Éô„É´„Å®istio.io/tag„É©„Éô„É´„ÅÆÂÄ§„ÇÇÁ¢∫Ë™ç„Åó„Å¶„Åä„Åç„Åæ„Åô„ÄÇ$ kubectl get mutatingwebhookconfiguration istio-revision-tag-default -o yaml \\    | yq '.metadata.labels'...istio.io/rev: 1-14-6istio.io/tag: default...istio.io/rev„É©„Éô„É´„ÅØIstiod„ÅÆ„Éê„Éº„Ç∏„Éß„É≥„ÄÅistio.io/tag„É©„Éô„É´„ÅØ„Åì„Çå„ÅÆ„Ç®„Ç§„É™„Ç¢„Çπ„ÇíË°®„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ„Åæ„Åü„ÄÅ.webhooks[].namespaceSelector„Ç≠„ÉºÈÖç‰∏ã„ÅÆistio.io/rev„Ç≠„Éº„ÅÆÊ§úÁü•„É´„Éº„É´„ÇíÁ¢∫Ë™ç„Åó„Åæ„Åô„ÄÇ$ kubectl get mutatingwebhookconfiguration istio-revision-tag-default -o yaml \\    | yq '.webhooks[]'...namespaceSelector:  matchExpressions:    - key: istio.io/rev      operator: In      values:        - default...Âêà„Çè„Åõ„Å¶„ÄÅ.webhooks[].clientConfig.service„Ç≠„ÉºÈÖç‰∏ã„ÅÆService„ÇíÂêçÂâç„ÇíÁ¢∫Ë™ç„Åó„Åæ„Åô„ÄÇ$ kubectl get mutatingwebhookconfiguration istio-revision-tag-default -o yaml \\    | yq '.webhooks[].clientConfig'...service:  name: istiod-1-14-6...‚ñ∂Ô∏é MutatingWebhookConfiguration„ÅÆÂΩπÂâ≤„Å´„Å§„ÅÑ„Å¶istio.io/rev„É©„Éô„É´„Å´default„ÇíË®≠ÂÆö„Åó„Å¶„ÅÇ„Çã„Å®„Åó„Åæ„Åô„ÄÇ„Åô„Çã„Å®„ÄÅ‰∏äË®ò„ÅÆMutatingWebhookConfiguration„Åå„Åì„Çå„ÇíÊ§úÁü•„Åó„Åæ„Åô„ÄÇMutatingWebhookConfiguration„Å´„ÅØdefault„Å´ÂØæÂøú„Åô„ÇãIstio„ÅÆ„É™„Éì„Ç∏„Éß„É≥„ÅåÂÆöÁæ©„Åï„Çå„Å¶„Åä„Çä„ÄÅkube-apiserver„ÅåÁâπÂÆö„ÅÆIstio„ÅÆ„Éê„Éº„Ç∏„Éß„É≥„ÅÆService„Å´Webhook„ÇíÈÄÅ‰ø°ÂèØËÉΩ„Å´„Å™„Çä„Åæ„ÅôüéâIstio / Safely upgrade the Istio control plane with revisions and tags(2) Êñ∞Istiod„ÅÆ„Ç§„É≥„Çπ„Éà„Éº„É´„Åì„Åì„ÅßÂÆüÊñΩ„Åô„Çã„Åì„Å®„Åù„Çå„Åß„ÅØ„ÄÅÊñ∞Istiod„Çí„Ç§„É≥„Çπ„Éà„Éº„É´„Åó„Åæ„Åô„ÄÇControl planeistioctl version„Ç≥„Éû„É≥„ÉâÊñ∞„Åó„Åè„Ç§„É≥„Çπ„Éà„Éº„É´„Åô„ÇãIstiod„ÅÆ„Éê„Éº„Ç∏„Éß„É≥„ÅØ„ÄÅistioctl„Ç≥„Éû„É≥„Éâ„ÅÆ„Éê„Éº„Ç∏„Éß„É≥„ÅßÊ±∫„Åæ„Çä„Åæ„Åô„ÄÇ„Åù„Åì„Åß„ÄÅistioctl version„Ç≥„Éû„É≥„Éâ„ÇíÂÆüË°å„Åó„ÄÅ„Åì„Çå„ÅÆ„Éê„Éº„Ç∏„Éß„É≥„ÇíÁ¢∫Ë™ç„Åó„Åæ„Åô„ÄÇ$ istioctl versionclient version: 1.15.4        # „Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„ÉâÂÖà„ÅÆ„Éê„Éº„Ç∏„Éß„É≥control plane version: 1.14.6 # ÁèæÂú®„ÅÆ„Éê„Éº„Ç∏„Éß„É≥data plane version: 1.14.6istioctl install„Ç≥„Éû„É≥„Éâ„Ç´„Éä„É™„Ç¢„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„ÅÆÂ†¥Âêà„ÄÅistioctl install„Ç≥„Éû„É≥„Éâ„ÇíÂÆüË°å„Åó„Åæ„Åô„ÄÇ„Éâ„Ç≠„É•„É°„É≥„Éà„Åß„ÅØrevision„Ç≠„Éº„ÅÆÂÄ§„Ååcanary„Åß„Åô„Åå„ÄÅ‰ªäÂõû„ÅØ1-15-4„Å®„Åó„Åæ„Åô„ÄÇ„Åì„ÅÆÂÄ§„ÅØ„ÄÅIstio„Åå‰ΩøÁî®„Åô„ÇãÊßò„ÄÖ„Å™Kubernetes„É™„ÇΩ„Éº„Çπ„ÅÆÊé•Â∞æËæû„ÇÑ„ÄÅÂêÑ„É™„ÇΩ„Éº„Çπ„ÅÆistio.io/rev„É©„Éô„É´„ÅÆÂÄ§„Å´„Å™„Çä„Åæ„Åô„ÄÇ$ istioctl install --set revision=1-15-4WARNING: Istio is being upgraded from 1.14.6 -\u003e 1.15.4WARNING: Before upgrading, you may wish to use 'istioctl analyze' to check for IST0002 and IST0135 deprecation warnings.‚úÖ Istio core installed‚úÖ Istiod installed‚úÖ Ingress gateways installed‚úÖ Installation completeThank you for installing Istio 1.15.  Please take a few minutes to tell us about your install/upgrade experience!‚ñ∂Ô∏é „Ç´„Éä„É™„Ç¢„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„ÅßÊåáÂÆö„Åß„Åç„Çã„Éê„Éº„Ç∏„Éß„É≥Â∑Æ„Å´„Å§„ÅÑ„Å¶revision„Ç≠„Éº„Çí‰ΩøÁî®„Åó„Åü„Ç´„Éä„É™„Ç¢„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„Åß„ÅØ„ÄÅ2„Å§„ÅÆÂÖà„ÅÆ„Éû„Ç§„Éä„Éº„Éê„Éº„Ç∏„Éß„É≥„Åæ„Åß„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„Åß„Åç„Åæ„Åô„ÄÇ‰æã„Åà„Å∞„ÄÅÁèæÂú®„ÅÆIstio„Åå1.14.6„Åß„ÅÇ„Çã„Å™„Çâ„ÄÅ1.16Á≥ª„Åæ„ÅßÂØæÂøú„Åó„Å¶„ÅÑ„Åæ„ÅôüëçIstio / Canary Upgradeskubectl get„Ç≥„Éû„É≥„Éâ‚ñº Istiod„ÅÆDeploymentkubectl get„Ç≥„Éû„É≥„Éâ„ÇíÂÆüË°å„Åó„ÄÅistioctl install„Ç≥„Éû„É≥„Éâ„Åß‰Ωï„Çí„Ç§„É≥„Çπ„Éà„Éº„É´„Åó„Åü„ÅÆ„Åã„ÇíÁ¢∫Ë™ç„Åó„Åæ„ÅôüëÄ„Åæ„Åö„ÅØIstiod„ÅÆDeployment„ÇíÁ¢∫Ë™ç„Åô„Çã„Å®„ÄÅ1-15-4„Å®„ÅÑ„ÅÜDeployment„ÅåÊñ∞„Åó„ÅèÂ¢ó„Åà„Å¶„ÅÑ„Åæ„Åô„ÄÇ$ kubectl get deployment -n istio-system -l app=istiodNAME            READY   UP-TO-DATE   AVAILABLE   AGEistiod-1-14-6   1/1     1            1           47s # 1-14-6istiod-1-15-4   1/1     1            1           47s # 1-15-4Êé•Â∞æËæû„ÅÆ1-15-4„ÅØ„ÄÅrevision„Ç≠„Éº„ÅÆÂÄ§„ÅßÊ±∫„Åæ„Çä„Åæ„Åô„ÄÇ„Åì„ÅÆÊÆµÈöé„Åß„ÅØ„ÄÅÊóßIstiod„Å®Êñ∞Istio„Åå‰∏¶Ë°åÁöÑ„Å´Á®ºÂÉç„Åó„Å¶„Åä„Çä„ÄÅkube-apiserver„ÅØ„Åæ„Å†ÊóßIstiod„Å®ÈÄö‰ø°„Åó„Å¶„ÅÑ„Åæ„Åô‰ªä„ÅÆÁä∂Ê≥Å„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Åß„Åôüëá‚ñº Webhook„ÅÆÂÆõÂÖà„ÅÆServiceÊ¨°„Å´ Webhook„ÅÆÂÆõÂÖà„ÅÆService„ÇíÁ¢∫Ë™ç„Åô„Çã„Å®„ÄÅistiod-1-15-4„Å®„ÅÑ„ÅÜService„ÅåÊñ∞„Åó„ÅèÂ¢ó„Åà„Å¶„ÅÑ„Åæ„Åô„ÄÇ$ kubectl get service -n istio-system -l app=istiodNAME            TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)                                 AGEistiod-1-14-6   ClusterIP   10.96.93.151     \u003cnone\u003e        15010/TCP,15012/TCP,443/TCP,15014/TCP   109s # 1-14-6istiod-1-15-4   ClusterIP   10.104.186.250   \u003cnone\u003e        15010/TCP,15012/TCP,443/TCP,15014/TCP   87s  # 1-15-4„Åì„ÅÆÊÆµÈöé„Åß„ÅØ„ÄÅ„Åæ„Å†Webhook„ÅÆÂÆõÂÖà„ÅØistiod-1-14-6„ÅÆService„Åß„Åô„ÄÇ‰ªä„ÅÆÁä∂Ê≥Å„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Åß„Åôüëá‚ñº Webhook„ÅÆÂÆõÂÖà„ÅÆService„ÇíÊ±∫„ÇÅ„ÇãMutatingWebhookConfigurationÊúÄÂæå„Å´MutatingWebhookConfiguration„ÇíÁ¢∫Ë™ç„Åô„Çã„Å®„ÄÅistio-sidecar-injector-1-15-4„Å®„ÅÑ„ÅÜMutatingWebhookConfiguration„ÅåÊñ∞„Åó„ÅèÂ¢ó„Åà„Å¶„ÅÑ„Åæ„Åô„ÄÇ$ kubectl get mutatingwebhookconfigurationsNAME                            WEBHOOKS   AGEistio-revision-tag-default      2          114s  # „Ç´„Éä„É™„Ç¢„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„Åß‰ΩøÁî®„Åô„Çãistio-sidecar-injector-1-14-6   2          2m16sistio-sidecar-injector-1-15-4   2          2m16s„Ç´„Éä„É™„Ç¢„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„Åß„ÅØ„ÄÅistio-revision-tag-\u003c„Ç®„Ç§„É™„Ç¢„Çπ\u003e„ÅÆMutatingWebhookConfiguration„Çí‰ΩøÁî®„Åó„Åæ„Åô„ÄÇ‰ªä„ÅÆÁä∂Ê≥Å„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Åß„Åôüëá‚ñ∂Ô∏é „Ç¢„É≥„Ç§„É≥„Çπ„Éà„Éº„É´„Å´„Å§„ÅÑ„Å¶(3) Webhook„ÅÆÂÆõÂÖà„ÅÆService„ÅÆÂ§âÊõ¥„Åì„Åì„ÅßÂÆüÊñΩ„Åô„Çã„Åì„Å®„Åì„ÅÆÊâãÈ†Ü„Åß„ÅØ„ÄÅ„Ç®„Ç§„É™„Ç¢„Çπ„ÅÆistio.io/tag„É©„Éô„É´„ÅÆÂÄ§„ÅØ„Åù„ÅÆ„Åæ„Åæ„Å´„Åó„Å¶„Åä„Åç„ÄÅ‰∏ÄÊñπ„Åßistio.io/rev„É©„Éô„É´„ÅÆÂÄ§„ÇíÂ§âÊõ¥„Åó„Åæ„Åô„ÄÇ„Åï„Çâ„Å´„ÄÅWebhook„ÅÆÂÆõÂÖà„ÅÆService„ÇíÂ§âÊõ¥„Åó„Åæ„Åô„ÄÇDefault tagSafely upgrade the Istio control plane with revisions and tagsistioctl tag set„Ç≥„Éû„É≥„Éâistioctl tag set„Ç≥„Éû„É≥„Éâ„ÇíÂÆüË°å„Åó„ÄÅistio.io/rev„É©„Éô„É´„ÅÆÂÄ§„Å®ÂÆõÂÖà„ÅÆService„ÇíÂ§âÊõ¥„Åó„Åæ„Åô„ÄÇ$ istioctl tag set default --revision 1-15-4 --overwriteÂÆüË°åÂæå„Å´„ÄÅ„ÇÇ„ÅÜ‰∏ÄÂ∫¶MutatingWebhookConfiguration„ÇíÁ¢∫Ë™ç„Åô„Çã„Å®„ÄÅistio.io/rev„É©„Éô„É´„ÅÆÂÄ§„ÅåÂ§â„Çè„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ$ kubectl get mutatingwebhookconfiguration istio-revision-tag-default -o yaml \\    | yq '.metadata.labels'...istio.io/rev: 1-15-4istio.io/tag: default...„Åæ„Åü„ÄÅWebhook„ÅÆÂÆõÂÖà„ÅÆService„ÇÇÂ§â„Çè„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ$ kubectl get mutatingwebhookconfiguration istio-revision-tag-default -o yaml \\    | yq '.webhooks[].clientConfig'...service:  name: istiod-1-15-4...„Åì„Çå„Çâ„Å´„Çà„Çä„ÄÅWebhook„ÅÆÂÆõÂÖà„Åå 1-15-4 „ÅÆService „Å®„Å™„Çä„Åæ„Åô„ÄÇ„Åù„ÅÆ„Åü„ÇÅ„ÄÅ 1-15-4 „ÅÆ istio-proxy „Ç≥„É≥„ÉÜ„Éä„Çí„Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥„Åß„Åç„Çã „Çà„ÅÜ„Å´„Å™„Çä„Åæ„Åô„ÄÇ‰ªä„ÅÆÁä∂Ê≥Å„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Åß„Åôüëá(4) Istio IngressGateway„Çí„Ç§„É≥„Éó„É¨„Éº„Çπ„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„Åì„Åì„ÅßÂÆüÊñΩ„Åô„Çã„Åì„Å®Webhook„ÅÆÂÆõÂÖà„Åå1-15-4„ÅÆService„Å´Â§â„Çè„Å£„Åü„Å®„Åì„Çç„Åß„ÄÅIstio IngressGateway„Çí„Ç§„É≥„Éó„É¨„Éº„Çπ„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„Åó„Åæ„Åô„ÄÇIn place upgradekubectl rollout restart„Ç≥„Éû„É≥„Éâkubectl rollout restart„Ç≥„Éû„É≥„Éâ„ÇíÂÆüË°å„Åó„ÄÅIstio IngressGateway„Çí„Ç§„É≥„Éó„É¨„Éº„Çπ„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„Åó„Åæ„Åô„ÄÇ$ kubectl rollout restart deployment istio-ingressgateway-n istio-ingressÂÜç‰ΩúÊàê„Åó„ÅüPod„ÅÆ„Ç§„É°„Éº„Ç∏„ÇíÁ¢∫Ë™ç„Åó„Å¶„Åø„Çã„Å®„ÄÅistio-proxy„Ç≥„É≥„ÉÜ„Éä„Çí1-15-4„Å´„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„Åß„Åç„Å¶„ÅÑ„Åæ„Åô„ÄÇ$ kubectl get pod bar -n bar -o yaml | yq '.spec.containers[].image'docker.io/istio/proxyv2:1.15.4 # istio-proxy„Ç≥„É≥„ÉÜ„Éä‚ñ∂Ô∏é istioctl proxy-status„Ç≥„Éû„É≥„Éâ„Å´„Å§„ÅÑ„Å¶kubectl get„Ç≥„Éû„É≥„Éâ„ÅÆ‰ª£„Çè„Çä„Å´„ÄÅistioctl proxy-status„Ç≥„Éû„É≥„Éâ„Çí‰ΩøÁî®„Åó„Å¶„ÄÅ„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„ÅÆÂÆå‰∫Ü„ÇíÁ¢∫Ë™ç„Åó„Å¶„ÇÇ„Çà„ÅÑ„Åß„Åô„ÄÇ‰ªä„ÅÆÁä∂Ê≥Å„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Åß„Åôüëá‚ñ∂Ô∏é Istio IngressGateway„ÅÆÈÄö‰ø°ÈÅÆÊñ≠„Å´„Å§„ÅÑ„Å¶(5) ‰∏ÄÈÉ®„ÅÆNamespace„ÅÆistio-proxy„Ç≥„É≥„ÉÜ„Éä„Çí„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„Åì„Åì„ÅßÂÆüÊñΩ„Åô„Çã„Åì„Å®Á∂ö„Åë„Å¶„ÄÅ‰∏ÄÈÉ®„ÅÆNamespace„ÅÆistio-proxy„Ç≥„É≥„ÉÜ„Éä„Çí„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„Åó„Åæ„Åô„ÄÇPod„ÅÆÂÜç‰ΩúÊàê„Å´„Çà„Çä„ÄÅÊñ∞Istiod„ÅÆistio-proxy„Ç≥„É≥„ÉÜ„Éä„Åå„Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥„Åï„Çå„Çã„Åü„ÇÅ„ÄÇistio-proxy„Ç≥„É≥„ÉÜ„Éä„Çí„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„Åß„Åç„Åæ„Åô„ÄÇData planekubectl rollout restart„Ç≥„Éû„É≥„ÉâÂâçÊèê„Å´„ÅÇ„Çã„Çà„ÅÜ„Å´„ÄÅNamespace„Å´„ÅØ foo bar baz „Åå„ÅÇ„Çä„Åæ„Åô„ÄÇkubectl rollout restart„Ç≥„Éû„É≥„Éâ„ÇíÂÆüË°å„Åó„ÄÅbar„ÅÆistio-proxy„Ç≥„É≥„ÉÜ„Éä„Åã„Çâ„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„Åó„Åæ„Åô„ÄÇ$ kubectl rollout restart deployment bar -n barÂÜç‰ΩúÊàê„Åó„ÅüPod„ÅÆ„Ç§„É°„Éº„Ç∏„ÇíÁ¢∫Ë™ç„Åó„Å¶„Åø„Çã„Å®„ÄÅistio-proxy„Ç≥„É≥„ÉÜ„Éä„Çí1-15-4„Å´„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„Åß„Åç„Å¶„ÅÑ„Åæ„Åô„ÄÇ$ kubectl get pod bar -n bar -o yaml | yq '.spec.containers[].image'bar-app:1.0 # „Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπdocker.io/istio/proxyv2:1.15.4 # istio-proxy„Ç≥„É≥„ÉÜ„Éä‚ñ∂Ô∏é istioctl proxy-status„Ç≥„Éû„É≥„Éâ„Å´„Å§„ÅÑ„Å¶kubectl get„Ç≥„Éû„É≥„Éâ„ÅÆ‰ª£„Çè„Çä„Å´„ÄÅistioctl proxy-status„Ç≥„Éû„É≥„Éâ„Çí‰ΩøÁî®„Åó„Å¶„ÄÅ„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„ÅÆÂÆå‰∫Ü„ÇíÁ¢∫Ë™ç„Åó„Å¶„ÇÇ„Çà„ÅÑ„Åß„Åô„ÄÇ‰ªä„ÅÆÁä∂Ê≥Å„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Åß„Åôüëá(6) „É¶„Éº„Ç∂„ÅÆÊâã„ÇíÂÄü„Çä„Åü„ÉÜ„Çπ„Éà„Åì„Åì„ÅßÂÆüÊñΩ„Åô„Çã„Åì„Å®Istio„ÇíÈÉ®ÂàÜÁöÑ„Å´„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„Åó„Åü„Å®„Åì„Çç„Åß„ÄÅ„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„ÅåÂÆå‰∫Ü„Åó„ÅüNamespace„Çí„ÉÜ„Çπ„Éà„Åó„Åæ„Åô„ÄÇ„É¶„Éº„Ç∂„Éº„ÅÆÊâã„ÇíÂÄü„Çä„Å¶ÂÆüÂú∞ÁöÑ„Å´„ÉÜ„Çπ„Éà„Åó„Åæ„Åô (‰æãÔºöË©≤ÂΩì„ÅÆ„Ç®„É©„Éº„É°„Éà„É™„ÇØ„Çπ„ÅåÂü∫Ê∫ñÂÄ§„ÇíÊ∫Ä„Åü„Åô„Åã) „ÄÇ‰ªä„ÅÆÁä∂Ê≥Å„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Åß„Åôüëá„ÇÇ„ÅóÂïèÈ°å„ÅåËµ∑„Åì„Å£„ÅüÂ†¥Âêà„ÇÇ„ÅóÂïèÈ°å„ÅåËµ∑„Åì„Å£„ÅüÂ†¥Âêà„ÄÅ1-14-6„Å´„ÉÄ„Ç¶„É≥„Ç∞„É¨„Éº„Éâ„Åó„Å¶„ÅÑ„Åç„Åæ„Åô„ÄÇistioctl tag set„Ç≥„Éû„É≥„Éâ„ÇíÂÆüË°å„Åó„ÄÅistio.io/rev„É©„Éô„É´„ÅÆÂÄ§„ÇíÂÖÉ„Å´Êàª„Åó„Åæ„Åô„ÄÇ$ istioctl tag set default --revision 1-14-6 --overwrite„Åù„ÅÆÂæå„ÄÅkubectl rollout restart„Ç≥„Éû„É≥„Éâ„ÅÆÊâãÈ†Ü„ÇíÂÆüË°å„Åó„ÄÅistio-proxy„Ç≥„É≥„ÉÜ„Éä„Çí„ÉÄ„Ç¶„É≥„Ç∞„É¨„Éº„Éâ„Åó„Å¶„Åç„Åæ„Åô„ÄÇ(7) istio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅÆÊÆµÈöéÁöÑ„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„Åì„Åì„ÅßÂÆüÊñΩ„Åô„Çã„Åì„Å®ÂÖà„Åª„Å©„ÅÆNamespace„ÅßÂïèÈ°å„ÅåËµ∑„Åì„Çâ„Å™„Åë„Çå„Å∞„ÄÅÊÆã„Å£„ÅüNamespace (foo„ÄÅbaz„ÄÅ...) „ÅÆistio-proxy„Ç≥„É≥„ÉÜ„Éä„ÇÇÊÆµÈöéÁöÑ„Å´„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„Åó„Å¶„ÅÑ„Åç„Åæ„Åô„ÄÇkubectl rollout restart„Ç≥„Éû„É≥„ÉâÂêåÊßò„Å´kubectl rollout restart„Ç≥„Éû„É≥„Éâ„ÇíÂÆüË°å„Åó„ÄÅistio-proxy„Ç≥„É≥„ÉÜ„Éä„Åã„Çâ„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„Åó„Åæ„Åô„ÄÇ$ kubectl rollout restart deployment foo -n foo$ kubectl rollout restart deployment baz -n baz...ÊúÄÁµÇÁöÑ„Å´„ÄÅÂÖ®„Å¶„ÅÆNamespacem„ÅÆistio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅåÊñ∞„Åó„Åè„Å™„Çä„Åæ„Åô„ÄÇ‰ªä„ÅÆÁä∂Ê≥Å„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Åß„Åôüëá(8) ÊóßIstiod„ÅÆ„Ç¢„É≥„Ç§„É≥„Çπ„Éà„Éº„É´„Åì„Åì„ÅßÂÆüÊñΩ„Åô„Çã„Åì„Å®ÊúÄÂæå„Å´„ÄÅÊóßIstiod„ÅÆ„Ç¢„É≥„Ç§„É≥„Çπ„Éà„Éº„É´„Åó„Åæ„Åô„ÄÇUninstall old control planeistioctl uninstall„Ç≥„Éû„É≥„Éâistioctl uninstall„Ç≥„Éû„É≥„Éâ„ÇíÂÆüË°å„Åó„ÄÅÊóßIstiod„Çí„Ç¢„É≥„Ç§„É≥„Çπ„Éà„Éº„É´„Åó„Åæ„Åô„ÄÇ$ istioctl uninstall --revision 1-14-6‚úÖ Uninstall complete‰ªä„ÅÆÁä∂Ê≥Å„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Åß„Åôüëákubectl get„Ç≥„Éû„É≥„Éâ‚ñº Istiod„ÅÆDeploymentkubectl get„Ç≥„Éû„É≥„Éâ„ÇíÂÆüË°å„Åó„ÄÅistioctl uninstall„Ç≥„Éû„É≥„Éâ„Åß‰Ωï„Çí„Ç¢„É≥„Ç§„É≥„Çπ„Éà„Éº„É´„Åó„Åü„ÅÆ„Åã„ÇíÁ¢∫Ë™ç„Åó„Åæ„ÅôüëÄ„Åæ„Åö„ÅØIstiod„ÅÆDeployment„ÇíÁ¢∫Ë™ç„Åô„Çã„Å®„ÄÅ1-14-6„Å®„ÅÑ„ÅÜDeployment„ÅåÁÑ°„Åè„Å™„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ$ kubectl get deployment -n istio-system -l app=istiodNAME            READY   UP-TO-DATE   AVAILABLE   AGEistiod-1-15-4   1/1     1            1           47s # 1-15-4‚ñº Webhook„ÅÆÂÆõÂÖà„ÅÆServiceÊ¨°„Å´ Webhook„ÅÆÂÆõÂÖà„ÅÆService„ÇíÁ¢∫Ë™ç„Åô„Çã„Å®„ÄÅistiod-1-14-6„Å®„ÅÑ„ÅÜService„ÅåÁÑ°„Åè„Å™„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ$ kubectl get service -n istio-system -l app=istiodNAME            TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)                                 AGEistiod-1-15-4   ClusterIP   10.104.186.250   \u003cnone\u003e        15010/TCP,15012/TCP,443/TCP,15014/TCP   87s  # 1-15-4‚ñº ÂÆõÂÖà„ÅÆService„ÇíÊ±∫„ÇÅ„ÇãMutatingWebhookConfigurationÊúÄÂæå„Å´MutatingWebhookConfiguration„ÇíÁ¢∫Ë™ç„Åô„Çã„Å®„ÄÅistio-sidecar-injector-1-14-6„Å®„ÅÑ„ÅÜMutatingWebhookConfiguration„ÅåÁÑ°„Åè„Å™„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ$ kubectl get mutatingwebhookconfigurationsNAME                            WEBHOOKS   AGEistio-revision-tag-default      2          114s  # Ê¨°„ÅÆ„Ç´„Éä„É™„Ç¢„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„Åß„ÇÇ‰ΩøÁî®„Åô„Çãistio-sidecar-injector-1-15-4   2          2m16s„Åì„Çå„Åß„ÄÅÊñ∞Istiod„Å´ÂÆåÂÖ®„Å´ÂÖ•„ÇåÊõø„Çè„Å£„Åü„Åü„ÇÅ„ÄÅ„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„ÅØÂÆå‰∫Ü„Åß„Åô„ÄÇ‰ªä„ÅÆÁä∂Ê≥Å„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Åß„Åôüëá‚ñ∂Ô∏é „Ç¢„É≥„Ç§„É≥„Çπ„Éà„Éº„É´„Å´„Å§„ÅÑ„Å¶06. „Åä„Çè„Çä„Å´Istio„ÇíÂÆâÂÖ®„Å´„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„Åô„Çã„Ç´„Éä„É™„Ç¢ÊñπÂºè„Å®„Åù„ÅÆ‰ªïÁµÑ„Åø„Çí„ÇÇ„Çä„ÇÇ„ÇäÂ∏ÉÊïô„Åó„Åæ„Åó„Åü„ÄÇIstio„Å∏„ÅÆÊÑõ„ÅåÊ∫¢„Çå„Å¶„Åó„Åæ„ÅÑ„Åæ„Åó„Åü„ÄÇ„Åì„Çå„Åã„ÇâIstio„ÇíÊé°Áî®‰∫àÂÆö„ÅÆÊñπ„ÅØ„ÄÅIstio„ÇíÂÆâÂÖ®„Å´„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„Åô„Çã„Åü„ÇÅ„Å´ÂçÅÂàÜ„Å´Ê∫ñÂÇô„Åó„Å¶„Åä„Åè„Åì„Å®„Çí„ÅäÂãß„ÇÅ„Åó„Åæ„ÅôüëçË®ò‰∫ãÈñ¢ÈÄ£„ÅÆ„Åä„Åô„Åô„ÇÅÊõ∏Á±çIstio in Action (English Edition)‰ΩúËÄÖ:Posta, Christian E.,Maloku, RinorManningAmazonIstio: Up and Running: Using a Service Mesh to Connect, Secure, Control, and Observe‰ΩúËÄÖ:Calcote, Lee,Butcher, ZackO'Reilly MediaAmazon","isoDate":"2023-02-26T11:25:48.000Z","dateMiliSeconds":1677410748000,"authorName":"Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π","authorId":"hiroki-hasegawa"},{"title":"„ÄêIstio‚õµÔ∏è„Äë„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•„ÅÆÁôªÂ†¥ÁµåÁ∑Ø„Å®Istio„Çµ„Ç§„Éâ„Ç´„Éº„Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥„ÅÆ‰ªïÁµÑ„Åø","link":"https://hiroki-hasegawa.hatenablog.jp/entry/2023/01/14/223815","contentSnippet":"„Åì„ÅÆË®ò‰∫ã„Åã„ÇâÂæó„Çâ„Çå„ÇãÁü•Ë≠ò„Åì„ÅÆË®ò‰∫ã„ÇíË™≠„ÇÄ„Å®„ÄÅ‰ª•‰∏ã„Çí \"ÂÆåÂÖ®„Å´ÁêÜËß£\" „Åß„Åç„Åæ„Åô‚úåÔ∏è‰ª£Ë°®ÁöÑ„Å™„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•„ÅÆÁ®ÆÈ°û„Å´„Å§„ÅÑ„Å¶Istio„ÅÆ„Çµ„Ç§„Éâ„Ç´„Éº„Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥„ÅÆ‰ªïÁµÑ„Åø„Å´„Å§„ÅÑ„Å¶„Åì„ÅÆË®ò‰∫ã„Åã„ÇâÂæó„Çâ„Çå„ÇãÁü•Ë≠ò01. „ÅØ„Åò„ÇÅ„Å´02. „Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•„ÅåÁôªÂ†¥„Åó„ÅüÁµåÁ∑Ø„Å™„Åú„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•„ÅåÁôªÂ†¥„Åó„Åü„ÅÆ„Åã„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•„ÅÆ„É¢„Éá„É´„Çµ„Ç§„Éâ„Ç´„Éº„Éó„É≠„Ç≠„Ç∑„É°„ÉÉ„Ç∑„É•03. admission-controllers„Ç¢„Éâ„Ç™„É≥„Å´„Å§„ÅÑ„Å¶admission-controllers„Ç¢„Éâ„Ç™„É≥„Å®„ÅØadmission„Éó„É©„Ç∞„Ç§„É≥„ÅÆÁ®ÆÈ°ûMutatingAdmissionWebhook„Éó„É©„Ç∞„Ç§„É≥MutatingAdmissionWebhook„Éó„É©„Ç∞„Ç§„É≥„Å®„ÅØAdmissionReview„ÄÅAdmissionRequest„ÄÅAdmissionResponse‚ñº AdmissionReview‚ñº AdmissionRequest‚ñº AdmissionResponse04. „Çµ„Ç§„Éâ„Ç´„Éº„Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥„ÅÆ‰ªïÁµÑ„ÅøÂÖ®‰Ωì„ÅÆ„Éï„É≠„Éº„ÇØ„É©„Ç§„Ç¢„É≥„Éà ‚û°Ô∏é kube-apiserver„Åì„Åì„ÅßË™¨Êòé„Åô„Çã„Éï„É≠„ÉºÁÆáÊâÄ(1) Pod„ÅÆ‰ΩúÊàê„Çí„É™„ÇØ„Ç®„Çπ„Éàkube-apiserver ‚û°Ô∏é Service„Åì„Åì„ÅßË™¨Êòé„Åô„Çã„Éï„É≠„ÉºÁÆáÊâÄ(2) Ë™çË®º/Ë™çÂèØÂá¶ÁêÜ„Çí„Ç≥„Éº„É´(3) „Ç¢„Éâ„Ç™„É≥„ÅÆÂá¶ÁêÜ„Çí„Ç≥„Éº„É´(4) AdmissionRequest„Å´ÂÄ§„ÇíË©∞„ÇÅ„Çã(5) AdmissionReview„ÇíÈÄÅ‰ø°Service ‚û°Ô∏é webhook„Çµ„Éº„Éê„Éº„Åì„Åì„ÅßË™¨Êòé„Åô„Çã„Éï„É≠„ÉºÁÆáÊâÄ(6) 15017Áï™„Éù„Éº„Éà„Å´„Éù„Éº„Éà„Éï„Ç©„ÉØ„Éº„Éá„Ç£„É≥„Ç∞kube-apiserver ‚¨ÖÔ∏é Service ‚¨ÖÔ∏é webhook„Çµ„Éº„Éê„Éº (‚ÄªÈÄÜÂêë„Åç„ÅÆÁü¢Âç∞)„Åì„Åì„ÅßË™¨Êòé„Åô„Çã„Éï„É≠„ÉºÁÆáÊâÄ(7) patchÂá¶ÁêÜ„ÇíÂÆöÁæ©(8) AdmissionResponse„Å´ÂÄ§„ÇíË©∞„ÇÅ„Çã(9) AdmissionReview„ÇíËøî‰ø°kube-apiserver ‚û°Ô∏é etcd„Åì„Åì„ÅßË™¨Êòé„Åô„Çã„Éï„É≠„ÉºÁÆáÊâÄ(10) patchÂá¶ÁêÜ„Çí„Ç≥„Éº„É´(11) „Éû„Éã„Éï„Çß„Çπ„Éà„ÇíÊ∞∏Á∂öÂåñ„ÇØ„É©„Ç§„Ç¢„É≥„Éà ‚¨ÖÔ∏é kube-apiserver„Åì„Åì„ÅßË™¨Êòé„Åô„Çã„Éï„É≠„ÉºÁÆáÊâÄ(12) „Ç≥„Éº„É´ÂÆå‰∫Ü„ÇíËøî‰ø°‰ª•Èôç„ÅÆ‰ªïÁµÑ„Åø05. „Åä„Çè„Çä„Å´Ë®ò‰∫ãÈñ¢ÈÄ£„ÅÆ„Åä„Åô„Åô„ÇÅÊõ∏Á±ç01. „ÅØ„Åò„ÇÅ„Å´Êé®„Åó (Istio) „ÅåÂ∞ä„ÅÑüôèüôèüôè„Åï„Å¶„ÄÅÂâçÂõû„ÅÆË®ò‰∫ã„ÅÆÊôÇ„Å®ÂêåÊßò„Å´„ÄÅÊúÄËøë„ÅÆÊ•≠Âãô„Åß„ÇÇ„Ç™„É≥„Éó„É¨„Å®AWS‰∏ä„ÅÆIstio‚õµÔ∏è„Çí„Å≤„Åü„Åô„ÇâÂ≠êÂÆà„Çä„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ‰ªäÂõû„ÅØ„ÄÅÂ≠êÂÆà„Çä„ÅÆÂâçÊèêÁü•Ë≠ò„ÅÆÂæ©Áøí„ÇÇ„Åã„Å≠„Å¶„ÄÅ„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•„ÇíÂÆüË£Ö„Åô„ÇãIstio„Çµ„Ç§„Éâ„Ç´„Éº„Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥„ÇíË®ò‰∫ã„ÅßËß£Ë™¨„Åó„Åæ„Åó„Åü„ÄÇËß£Ë™¨„Åô„Çã„ÅÆ„ÅØ„ÄÅÂü∑Á≠ÜÊôÇÁÇπ (2023/01/14) ÊôÇÁÇπ„ÅßÊúÄÊñ∞„ÅÆ 1.14 Á≥ª„ÅÆIstio„Åß„Åô„ÄÇÂü∑Á≠ÜÊôÇÁÇπ (2023/01/14) „Åß„ÅØ„ÄÅIstio„ÅåÂÆüË£Ö„Åô„Çã„Çµ„Éº„Éì„É°„ÉÉ„Ç∑„É•„Å´„ÅØ„ÄÅ„Äé„Çµ„Ç§„Éâ„Ç´„Éº„Éó„É≠„Ç≠„Ç∑„É°„ÉÉ„Ç∑„É•„Äè„Å®„Äé„Ç¢„É≥„Éì„Ç®„É≥„Éà„É°„ÉÉ„Ç∑„É•„Äè„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ„Çµ„Ç§„Éâ„Ç´„Éº„Éó„É≠„Ç≠„Ç∑„É°„ÉÉ„Ç∑„É•„ÅÆ‰ªïÁµÑ„Åø„ÅÆËª∏„Å´„Å™„Å£„Å¶„ÅÑ„Çã„ÇÇ„ÅÆ„ÅØ„ÄÅ„Çµ„Ç§„Éâ„Ç´„Éº„Ç≥„É≥„ÉÜ„Éä„Åß„ÅÇ„Çãistio-proxy„Ç≥„É≥„ÉÜ„Éä„Åß„Åô„ÄÇIstio„ÅØ„ÄÅKubernetes„ÅÆPod„ÅÆ‰ΩúÊàêÊôÇ„Å´„ÄÅistio-proxy„Ç≥„É≥„ÉÜ„Éä„ÇíPodÂÜÖ„Å´Ëá™ÂãïÁöÑ„Å´„Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥ (Ê≥®ÂÖ•) „Åó„Åæ„Åô„Åù„Çå„Åß„ÅØ„ÄÅ„ÇÇ„Çä„ÇÇ„ÇäÂ∏ÉÊïô„Åó„Å¶„ÅÑ„Åç„Åæ„Åôüòó02. „Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•„ÅåÁôªÂ†¥„Åó„ÅüÁµåÁ∑Ø„Å™„Åú„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•„ÅåÁôªÂ†¥„Åó„Åü„ÅÆ„Åã„Åù„ÇÇ„Åù„ÇÇ„ÄÅ„Å™„Åú„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•„ÅåÁôªÂ†¥„Åó„Åü„ÅÆ„Åß„Åó„Çá„ÅÜ„Åã„ÄÇ„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„Ç¢„Éº„Ç≠„ÉÜ„ÇØ„ÉÅ„É£„ÅÆ„Ç∑„Çπ„ÉÜ„É†„Å´„ÅØ„ÄÅ„Ç¢„Éº„Ç≠„ÉÜ„ÇØ„ÉÅ„É£Âõ∫Êúâ„ÅÆ„Ç§„É≥„Éï„É©È†òÂüü„ÅÆÂïèÈ°å (‰æãÔºö„Çµ„Éº„Éì„Çπ„Éá„Ç£„Çπ„Ç´„Éê„É™„Éº„ÅÆÂøÖË¶ÅÊÄß„ÄÅ„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„ÇπÈñìÈÄö‰ø°„ÅÆÊöóÂè∑Âåñ„ÄÅ„ÉÜ„É¨„É°„Éà„É™„Éº‰ΩúÊàê„Å™„Å©) „Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ„Ç¢„Éó„É™„Ç®„É≥„Ç∏„Éã„Ç¢„ÅåÂêÑ„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„ÇπÂÜÖ„Å´„Ç§„É≥„Éï„É©È†òÂüü„ÅÆÂïèÈ°å„Å´Èñ¢„Åô„Çã„É≠„Ç∏„ÉÉ„ÇØ„ÇíÂÆüË£Ö„Åô„Çå„Å∞„ÄÅ„Åì„Çå„Çâ„ÅÆÂïèÈ°å„ÅÆËß£Ê±∫„Åß„Åç„Åæ„Åô„ÄÇ„Åó„Åã„Åó„ÄÅ„Ç¢„Éó„É™„Ç®„É≥„Ç∏„Éã„Ç¢„ÅØ„Ç¢„Éó„É™È†òÂüü„ÅÆÂïèÈ°å„Å´Ë≤¨Âãô„ÇíÊåÅ„Å°„ÄÅ„Ç§„É≥„Éï„É©È†òÂüü„ÅÆÂïèÈ°å„ÅØ„Ç§„É≥„Éï„É©„Ç®„É≥„Ç∏„Éã„Ç¢„ÅßËß£Ê±∫„Åô„Çã„Çà„ÅÜ„Å´„Åó„ÅüÊñπ„Åå„ÄÅ‰∫í„ÅÑ„Å´ÂäπÁéáÁöÑ„Å´ÈñãÁô∫„Åß„Åç„Åæ„Åô„ÄÇ„Åù„Åì„Åß„ÄÅ„Ç§„É≥„Éï„É©È†òÂüü„ÅÆÂïèÈ°å„ÇíËß£Ê±∫„Åô„Çã„É≠„Ç∏„ÉÉ„ÇØ„Çí„Çµ„Ç§„Éâ„Ç´„Éº„Å®„Åó„Å¶Âàá„ÇäÂàÜ„Åë„Åæ„Åô„ÄÇ„Åì„Çå„Å´„Çà„Çä„ÄÅ„Ç¢„Éó„É™„Ç®„É≥„Ç∏„Éã„Ç¢„Å®„Ç§„É≥„Éï„É©„Ç®„É≥„Ç∏„Éã„Ç¢„ÅÆË≤¨Âãô„ÇíÂàÜÈõ¢ÂèØËÉΩ„Å´„Å™„Çä„ÄÅÂáùÈõÜÂ∫¶„ÅåÈ´ò„Åè„Å™„Çä„Åæ„Åô„ÄÇ„Åæ„Åü„ÄÅ„Ç§„É≥„Éï„É©È†òÂüü„ÅÆÂÖ±ÈÄö„É≠„Ç∏„ÉÉ„ÇØ„Çí„Çµ„Ç§„Éâ„Ç´„Éº„Å®„Åó„Å¶ÂêÑ„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„Å´Êèê‰æõ„Åß„Åç„Çã„Åü„ÇÅ„ÄÅÂçòÁ¥îÊÄß„ÅåÈ´ò„Åæ„Çä„Åæ„Åô„ÄÇ„Åì„ÅÜ„ÅÑ„Å£„ÅüÊµÅ„Çå„ÅÆ‰∏≠„Åß„ÄÅ„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•„ÅåÁôªÂ†¥„Åó„Åæ„Åó„Åü„ÄÇservicemesh.es | Service Mesh ComparisonWhat is Service Mesh and why is it needed in Kubernetes?„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•„ÅÆ„É¢„Éá„É´ÂâçËø∞„ÅÆÈÄö„Çä„ÄÅ„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•„ÅÆÁôªÂ†¥Ââç„ÅØ„ÄÅ„Ç¢„Éó„É™„Ç®„É≥„Ç∏„Éã„Ç¢„ÅåÂêÑ„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„ÇπÂÜÖ„Å´„Ç§„É≥„Éï„É©È†òÂüü„ÅÆÂïèÈ°å„Å´Èñ¢„Åô„Çã„É≠„Ç∏„ÉÉ„ÇØ„ÇíÂÆüË£Ö„Åó„Å¶„ÅÑ„Åæ„Åó„Åü„ÄÇ„Åì„Çå„Çí„ÄÅ„ÄéÂÖ±Êúâ„É©„Ç§„Éñ„É©„É™„É¢„Éá„É´„Äè„Å®Âëº„Å≥„Åæ„Åô„ÄÇ„Åù„ÅÆÂæå„ÄÅ„Äé„Çµ„Ç§„Éâ„Ç´„Éº„É¢„Éá„É´„Äè„Å®„ÇÇÂëº„Å∞„Çå„Çã„Çµ„Ç§„Éâ„Ç´„Éº„Éó„É≠„Ç≠„Ç∑„É°„ÉÉ„Ç∑„É•„ÅåÁôªÂ†¥„Åó„Åæ„Åó„Åü„ÄÇÂü∑Á≠ÜÊôÇÁÇπ (2023/01/14) „Åß„ÅØ„ÄÅ„Äé„Ç´„Éº„Éç„É´„É¢„Éá„É´„Äè„Å®„ÇÇÂëº„Å∞„Çå„Çã„Çµ„Ç§„Éâ„Ç´„Éº„Éï„É™„Éº„É°„ÉÉ„Ç∑„É•„ÅåÁôªÂ†¥„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ„Çµ„Ç§„Éâ„Ç´„Éº„Éó„É≠„Ç≠„Ç∑„É°„ÉÉ„Ç∑„É•Istio„ÅÆ„Çµ„Ç§„Éâ„Ç´„Éº„Å´„Çà„Çã„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É• („Çµ„Ç§„Éâ„Ç´„Éº„Éó„É≠„Ç≠„Ç∑„É°„ÉÉ„Ç∑„É•) „ÅØ„ÄÅ„Çµ„Ç§„Éâ„Ç´„Éº„Ç≥„É≥„ÉÜ„Éä (istio-proxy„Ç≥„É≥„ÉÜ„Éä) „ÅåÁ®ºÂÉç„Åô„Çã„Éá„Éº„Çø„Éó„É¨„Éº„É≥„Çµ„Ç§„Éâ„Ç´„Éº„Çí‰∏≠Â§ÆÈõÜÊ®©ÁöÑ„Å´ÁÆ°ÁêÜ„Åô„ÇãIstiod (discovery„Ç≥„É≥„ÉÜ„Éä) „ÅåÁ®ºÂÉç„Åô„Çã„Ç≥„É≥„Éà„É≠„Éº„É´„Éó„É¨„Éº„É≥„Åã„Çâ„Å™„Çä„Åæ„Åô„ÄÇIstio / Architecture03. admission-controllers„Ç¢„Éâ„Ç™„É≥„Å´„Å§„ÅÑ„Å¶admission-controllers„Ç¢„Éâ„Ç™„É≥„Å®„ÅØIstio„ÅÆPodÂÜÖ„Å∏„ÅÆ„Çµ„Ç§„Éâ„Ç´„Éº„Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥„ÅÆÂâçÊèêÁü•Ë≠ò„Å®„Åó„Å¶„ÄÅadmission-controllers„Ç¢„Éâ„Ç™„É≥„ÇíÁêÜËß£„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ„ÇÇ„Åó„ÄÅadmission-controllers„Ç¢„Éâ„Ç™„É≥„Çí„ÅîÂ≠òÁü•„ÅÆÊñπ„ÅØ„ÄÅ 04. „Çµ„Ç§„Éâ„Ç´„Éº„Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥„ÅÆ‰ªïÁµÑ„Åø „Åæ„ÅßÈ£õ„Å∞„Åó„Å¶„Åè„Å†„Åï„ÅÑüôáüèª‚Äçkube-apiserver„Åß„ÅØ„ÄÅadmission-controllers„Ç¢„Éâ„Ç™„É≥„ÇíÊúâÂäπÂåñ„Åß„Åç„Åæ„Åô„ÄÇÊúâÂäπÂåñ„Åô„Çã„Å®„ÄÅË™çË®º„Çπ„ÉÜ„ÉÉ„Éó„Å®Ë™çÂèØ„Çπ„ÉÜ„ÉÉ„Éó„ÅÆÂæå„Å´mutating-admission„Çπ„ÉÜ„ÉÉ„Éó„Å®validating-admission„Çπ„ÉÜ„ÉÉ„Éó„ÇíÂÆüË°å„Åß„Åç„ÄÅadmission„Éó„É©„Ç∞„Ç§„É≥„ÅÆÁ®ÆÈ°û„Å´Âøú„Åò„ÅüÂá¶ÁêÜ„ÇíÊåøÂÖ•„Åß„Åç„Åæ„Åô„ÄÇ„ÇØ„É©„Ç§„Ç¢„É≥„Éà (kubectl„ÇØ„É©„Ç§„Ç¢„É≥„Éà„ÄÅKubernetes„É™„ÇΩ„Éº„Çπ) „Åã„Çâ„ÅÆ„É™„ÇØ„Ç®„Çπ„Éà (‰æãÔºöKubernetes„É™„ÇΩ„Éº„Çπ„Å´ÂØæ„Åô„Çã‰ΩúÊàê/Êõ¥Êñ∞/ÂâäÈô§„ÄÅkube-apiserver„Åã„Çâ„ÅÆ„Éó„É≠„Ç≠„Ç∑„Å∏„ÅÆËª¢ÈÄÅ) ÊôÇ„Å´„ÄÅÂêÑ„Çπ„ÉÜ„ÉÉ„Éó„Åßadmission„Éó„É©„Ç∞„Ç§„É≥„Å´„Çà„ÇãÂá¶ÁêÜ (‰æãÔºö„Ç¢„Éâ„Ç™„É≥„Éì„É´„Éà„Ç§„É≥Âá¶ÁêÜ„ÄÅÁã¨Ëá™Âá¶ÁêÜ) „ÇíÁô∫ÁÅ´„Åï„Åõ„Çâ„Çå„Åæ„Åô„ÄÇAdmission Control in Kubernetes | KubernetesKubernetes Best Practices: Blueprints for Building Successful Applications on Kubernetesadmission„Éó„É©„Ç∞„Ç§„É≥„ÅÆÁ®ÆÈ°ûadmission-controllers„Ç¢„Éâ„Ç™„É≥„ÅÆadmission„Éó„É©„Ç∞„Ç§„É≥„Å´„ÅØ„ÄÅ„Åü„Åè„Åï„Çì„ÅÆÁ®ÆÈ°û„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇIstio„ÅåPodÂÜÖ„Å´„Çµ„Ç§„Éâ„Ç´„Éº„Çí„Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥„Åô„ÇãÊôÇ„Å´‰ΩøÁî®„Åó„Å¶„ÅÑ„Çã„Ç¢„Éâ„Ç™„É≥„ÅØ„ÄÅ„ÄéMutatingAdmissionWebhook„Äè„Åß„Åô„ÄÇCertificateApprovalCertificateSigningCertificateSubjectRestrictionDefaultIngressClassDefaultStorageClassDefaultTolerationSecondsLimitRanger\"MutatingAdmissionWebhook\" üëà „Åì„ÇåNamespaceLifecyclePersistentVolumeClaimResizePodSecurityPriorityResourceQuotaRuntimeClassServiceAccountStorageObjectInUseProtectionTaintNodesByConditionValidatingAdmissionWebhookAdmission Control in Kubernetes | KubernetesMutatingAdmissionWebhook„Éó„É©„Ç∞„Ç§„É≥MutatingAdmissionWebhook„Éó„É©„Ç∞„Ç§„É≥„Å®„ÅØMutatingAdmissionWebhook„Éó„É©„Ç∞„Ç§„É≥„Çí‰ΩøÁî®„Åô„Çã„Å®„ÄÅmutating-admission„Çπ„ÉÜ„ÉÉ„ÉóÊôÇ„Å´„ÄÅ„É™„ÇØ„Ç®„Çπ„ÉàÂÜÖÂÆπ„ÇíÂ§âÊõ¥„Åô„ÇãÂá¶ÁêÜ„Çí„Éï„ÉÉ„ÇØ„Åß„Åç„Åæ„Åô„ÄÇ„Éï„ÉÉ„ÇØ„Åô„ÇãÂÖ∑‰ΩìÁöÑ„Å™Âá¶ÁêÜ„Å®„Åó„Å¶„ÄÅwebhook„Çµ„Éº„Éê„Éº„Å´AdmissionRequest„É™„ÇØ„Ç®„Çπ„Éà„Å®„Åó„Å¶ÈÄÅ‰ø°„Åô„Çã„Åì„Å®„Å´„Çà„Çä„ÄÅ„É¨„Çπ„Éù„É≥„Çπ„ÅÆAdmissionResponse„Å´Âøú„Åò„Å¶„É™„ÇØ„Ç®„Çπ„ÉàÂÜÖÂÆπ„ÇíÂãïÁöÑ„Å´Â§âÊõ¥„Åó„Åæ„Åô„ÄÇMutatingWebhookConfiguration„Åß„ÄÅMutatingAdmissionWebhook„Éó„É©„Ç∞„Ç§„É≥„ÅÆÁô∫ÁÅ´Êù°‰ª∂„ÇÑwebhook„Çµ„Éº„Éê„Éº„ÅÆÂÆõÂÖàÊÉÖÂ†±„ÇíË®≠ÂÆö„Åó„Åæ„Åô„ÄÇMutatingWebhookConfiguration„ÅÆÂÖ∑‰ΩìÁöÑ„Å™ÂÆüË£Ö„Å´„Å§„ÅÑ„Å¶„ÅØ„ÄÅ„Çµ„Ç§„Éâ„Ç´„Éº„Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥„ÅÆ‰ªïÁµÑ„Åø„ÅÆ‰∏≠„ÅßË™¨Êòé„Åó„Å¶„ÅÑ„Åç„Åæ„Åô„ÄÇDiving into Kubernetes MutatingAdmissionWebhook | by Morven Cao | IBM Cloud | MediumKubernetes Admission WebhookË¶öÊõ∏„Åç - gashirar's blogAdmission Webhook„Çí‰Ωú„Å£„Å¶ÈÅä„Çì„Åß„ÄÅ„Åù„ÅÆ‰ªïÁµÑ„Åø„ÇíÁêÜËß£„Åó„Çà„ÅÜÔºàË™¨ÊòéÁ∑®ÔºâAdmissionReview„ÄÅAdmissionRequest„ÄÅAdmissionResponse‚ñº AdmissionReviewAdmissionReview„ÅØ‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å™JSON„Åß„ÅÇ„Çä„ÄÅkube-apiserver„Å®webhook„Çµ„Éº„Éê„Éº„ÅÆÈñì„ÅßAdmissionRequest„Å®AdmissionResponse„ÇíÈÅã„Å≥„Åæ„Åô„ÄÇ{  \"apiVersion\": \"admission.k8s.io/v1\",  \"kind\": \"AdmissionReview\",  # AdmissionRequest  \"request\": {},  # AdmissionResponse  \"response\": {},}v1 package - k8s.io/api/admission/v1 - Go Packages‚ñº AdmissionRequestAdmissionRequest„ÅØ‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å™JSON„Åß„Åô„ÄÇkube-apiserver„Åå„ÇØ„É©„Ç§„Ç¢„É≥„Éà„Åã„ÇâÂèó‰ø°„Åó„ÅüÊìç‰ΩúÂÜÖÂÆπ„ÅåÊåÅ„Å§„Åì„Å®„Åå„Çè„Åã„Çä„Åæ„Åô„ÄÇ‰æã„ÅßÊåô„Åí„ÅüAdmissionRequest„Åß„ÅØ„ÄÅ„ÇØ„É©„Ç§„Ç¢„É≥„Éà„ÅåDeployment„ÇíCREATEÊìç‰Ωú„Åô„Çã„É™„ÇØ„Ç®„Çπ„Éà„Çíkube-apiserver„Å´ÈÄÅ‰ø°„Åó„Åü„Åì„Å®„Åå„Çè„Åã„Çä„Åæ„Åô„ÄÇ{  \"apiVersion\": \"admission.k8s.io/v1\",  \"kind\": \"AdmissionReview\",  # AdmissionRequest  \"request\": {    ...    # Â§âÊõ¥„Åï„Çå„ÇãKubernetes„É™„ÇΩ„Éº„Çπ„ÅÆÁ®ÆÈ°û„ÇíË°®„Åô„ÄÇ    \"resource\": {      \"group\": \"apps\",      \"version\": \"v1\",      \"resource\": \"deployments\"    },    # kube-apiserver„ÅÆÊìç‰Ωú„ÅÆÁ®ÆÈ°û„ÇíË°®„Åô„ÄÇ    \"operation\": \"CREATE\",    ...  }}Dynamic Admission Control | Kubernetes‚ñº AdmissionResponse‰∏ÄÊñπ„ÅßAdmissionResponse„ÅØ„ÄÅ‰æã„Åà„Å∞‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å™JSON„Åß„Åô„ÄÇAdmissionResponse„ÅØ„ÄÅ„Éû„Éã„Éï„Çß„Çπ„ÉàÂ§âÊõ¥Âá¶ÁêÜ„Çípatch„Ç≠„Éº„ÅÆÂÄ§„Å´ÊåÅ„Å°„ÄÅ„Åì„Çå„ÅØbase64ÊñπÂºè„Åß„Ç®„É≥„Ç≥„Éº„Éâ„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ{  \"apiVersion\": \"admission.k8s.io/v1\",  \"kind\": \"AdmissionReview\",  # AdmissionResponse  \"response\": {      \"uid\": \"\u003cvalue from request.uid\u003e\",      # ÂÆõÂÖà„ÅÆwebhook„Çµ„Éº„Éê„Éº„ÅåÂèó‰ø°„Åó„Åü„ÅãÂê¶„Åã„ÇíË°®„Åô„ÄÇ      \"allowed\": true,      # Path„Å´„Çà„ÇãPatchÂá¶ÁêÜ„ÇíË°å„ÅÜ„ÄÇ      \"patchType\": \"JSONPatch\",      # PatchÂá¶ÁêÜ„ÅÆÂØæË±°„Å®„Å™„ÇãKubernetes„É™„ÇΩ„Éº„Çπ„Å®Âá¶ÁêÜÂÜÖÂÆπ„ÇíË°®„Åô„ÄÇbase64ÊñπÂºè„Åß„Ç®„É≥„Ç≥„Éº„Éâ„Åï„Çå„Å¶„ÅÑ„Çã„ÄÇ      \"patch\": \"W3sib3AiOiAiYWRkIiwgInBhdGgiOiAiL3NwZWMvcmVwbGljYXMiLCAidmFsdWUiOiAzfV0=\",    },}„Ç®„É≥„Ç≥„Éº„ÉâÂÄ§„Çí„Éá„Ç≥„Éº„Éâ„Åó„Å¶„Åø„Çã„Å®„ÄÅ‰æã„Åà„Å∞‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å™patchÂá¶ÁêÜ„ÅåÂÆöÁæ©„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ# patch„Ç≠„Éº„Çíbase64ÊñπÂºè„Åß„Éá„Ç≥„Éº„Éâ„Åó„ÅüÂ†¥Âêà[{\"op\": \"add\", \"path\": \"/spec/replicas\", \"value\": 3}]„Éû„Éã„Éï„Çß„Çπ„Éà„Å´ÂØæ„Åô„ÇãÊìç‰Ωú (op) „ÄÅ„Ç≠„Éº (path) „ÄÅÂÄ§ (value) „ÅåË®≠ÂÆö„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇkube-apiserver„Åå„Åì„Çå„ÇíÂèó‰ø°„Åô„Çã„Å®„ÄÅÊåáÂÆö„Åï„Çå„Åü„Ç≠„Éº (.spec.replicas) „Å´ÂÄ§ (3) „Å´ËøΩÂä†„Åó„Åæ„Åô„ÄÇDynamic Admission Control | Kubernetes04. „Çµ„Ç§„Éâ„Ç´„Éº„Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥„ÅÆ‰ªïÁµÑ„ÅøÂÖ®‰Ωì„ÅÆ„Éï„É≠„ÉºÂâçÊèêÁü•Ë≠ò„ÇíË∏è„Åæ„Åà„Åü‰∏ä„Åß„ÄÅadmission-controllers„Ç¢„Éâ„Ç™„É≥„ÅÆ‰ªïÁµÑ„Åø„ÅÆ‰∏≠„Åß„ÄÅ„Çµ„Ç§„Éâ„Ç´„Éº„ÅÆistio-proxy„Ç≥„É≥„ÉÜ„Éä„Åå„Å©„ÅÆ„Çà„ÅÜ„Å´Pod„Å´„Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥„Åï„Çå„Çã„ÅÆ„Åã„ÇíË¶ã„Å¶„ÅÑ„Åç„Åæ„Åó„Çá„ÅÜ„ÄÇÊúÄÂàù„Å´„ÄÅ„Çµ„Ç§„Éâ„Ç´„Éº„Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥„ÅÆ„Éï„É≠„Éº„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Å´„Å™„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ(ÁîªÂÉè„ÅØ„Çø„ÉñÈñã„ÅçÈñ≤Ë¶ß„ÇíÊé®Â•®)Istio in Action (English Edition)„ÇØ„É©„Ç§„Ç¢„É≥„Éà ‚û°Ô∏é kube-apiserver„Åì„Åì„ÅßË™¨Êòé„Åô„Çã„Éï„É≠„ÉºÁÆáÊâÄ„Äé„ÇØ„É©„Ç§„Ç¢„É≥„Éà ‚û°Ô∏é kube-apiserver„Äè„ÅÆÁÆáÊâÄ„ÇíË™¨Êòé„Åó„Åæ„Åô„ÄÇ(ÁîªÂÉè„ÅØ„Çø„ÉñÈñã„ÅçÈñ≤Ë¶ß„ÇíÊé®Â•®)(1) Pod„ÅÆ‰ΩúÊàê„Çí„É™„ÇØ„Ç®„Çπ„Éà„Åæ„Åö„ÅØ„ÄÅ„ÇØ„É©„Ç§„Ç¢„É≥„Éà„Ååkube-apiserver„Å´„É™„ÇØ„Ç®„Çπ„Éà„ÇíÈÄÅ‰ø°„Åô„Çã„Å®„Åì„Çç„Åß„Åô„ÄÇ„ÇØ„É©„Ç§„Ç¢„É≥„Éà (Deployment„ÄÅDaemonSet„ÄÅStatefulSet„ÄÅ„ÇíÂê´„ÇÄ) „ÅØ„ÄÅPod„ÅÆ‰ΩúÊàê„É™„ÇØ„Ç®„Çπ„Éà„Çíkube-apiserver„Å´ÈÄÅ‰ø°„Åó„Åæ„Åô„ÄÇ„Åì„ÅÆÊôÇ„ÅÆ„É™„ÇØ„Ç®„Çπ„ÉàÂÜÖÂÆπ„ÅØ„ÄÅ‰ª•‰∏ã„ÅÆÈÄö„Çä„Å®„Åó„Åæ„Åô„ÄÇ# Pod„Çí‰ΩúÊàê„Åô„Çã„ÄÇ$ kubectl apply -f foo-pod.yaml# foo-pod.yaml„Éï„Ç°„Ç§„É´apiVersion: v1kind: Podmetadata:  name: foo-pod  namespace: foo-namespacespec:  containers:    - name: foo      image: foo:1.0.0      ports:        - containerPort: 80„Åæ„ÅüNamespace„Åß„ÅØ„ÄÅ„ÅÇ„Çâ„Åã„Åò„ÇÅistio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅÆ„Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥„ÅåÊúâÂäπÂåñ„Åï„Çå„Å¶„ÅÑ„Çã„Å®„Åó„Åæ„Åô„ÄÇIstio„Åß„ÅØv1.10‰ª•Èôç„ÄÅ„É™„Éì„Ç∏„Éß„É≥„ÅÆÁï™Âè∑„ÅÆ„Ç®„Ç§„É™„Ç¢„Çπ„Çí‰ΩøÁî®„Åó„Å¶„ÄÅistio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅÆ„Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥„ÇíÊúâÂäπÂåñ„Åô„Çã„Çà„ÅÜ„Å´„Å™„Çä„Åæ„Åó„Åü„ÄÇapiVersion: v1kind: Namespacemetadata:  name: foo-namespace  labels:    # istio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅÆ„Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥„ÇíÊúâÂäπÂåñ„Åô„Çã„ÄÇ    # „Ç®„Ç§„É™„Ç¢„Çπ„ÅØËá™Áî±    istio.io/rev: \u003c„Ç®„Ç§„É™„Ç¢„Çπ\u003eIstio / Announcing Support for 1.8 to 1.10 Direct Upgrades‚ñ∂ istio.io/rev„É©„Éô„É´ÂÄ§„ÅÆ„Ç®„Ç§„É™„Ç¢„Çπ„Å´„Å§„ÅÑ„Å¶istio.io/rev„É©„Éô„É´ÂÄ§„ÅØ„ÄÅ„Å©„Çì„Å™„Ç®„Ç§„É™„Ç¢„Çπ„Åß„ÇÇ„Çà„ÅÑ„Åß„Åô„ÄÇ„Çà„Åè„ÅÇ„Çã„Ç®„Ç§„É™„Ç¢„Çπ„Å®„Åó„Å¶default„ÇÑstable„Çí‰ΩøÁî®„Åó„Åæ„Åôüëçkube-apiserver ‚û°Ô∏é Service„Åì„Åì„ÅßË™¨Êòé„Åô„Çã„Éï„É≠„ÉºÁÆáÊâÄ„Äékube-apiserver ‚û°Ô∏é Service„Äè„ÅÆÁÆáÊâÄ„ÇíË™¨Êòé„Åó„Åæ„Åô„ÄÇ(ÁîªÂÉè„ÅØ„Çø„ÉñÈñã„ÅçÈñ≤Ë¶ß„ÇíÊé®Â•®)(2) Ë™çË®º/Ë™çÂèØÂá¶ÁêÜ„Çí„Ç≥„Éº„É´kube-apiserver„ÅØ„ÄÅË™çË®º„Çπ„ÉÜ„ÉÉ„Éó„Å®Ë™çÂèØ„Çπ„ÉÜ„ÉÉ„Éó„Å´„Å¶„ÄÅ„ÇØ„É©„Ç§„Ç¢„É≥„Éà„Åã„Çâ„ÅÆ„É™„ÇØ„Ç®„Çπ„Éà„ÇíË®±ÂèØ„Åó„Åæ„Åô„ÄÇ(3) „Ç¢„Éâ„Ç™„É≥„ÅÆÂá¶ÁêÜ„Çí„Ç≥„Éº„É´kube-apiserver„ÅØ„ÄÅmutating-admission„Çπ„ÉÜ„ÉÉ„Éó„Å´„Å¶„ÄÅMutatingAdmissionWebhook„Éó„É©„Ç∞„Ç§„É≥„ÅÆÂá¶ÁêÜ„Çí„Ç≥„Éº„É´„Åó„Åæ„Åô„ÄÇÂâçÊèêÁü•Ë≠ò„ÅÆÈÉ®ÂàÜ„ÅßÂÖ∑‰ΩìÁöÑ„Å™ÂÆüË£Ö„ÇíÁúÅÁï•„Åó„Åæ„Åó„Åü„Åå„ÄÅIstio„ÅÆ„Éê„Éº„Ç∏„Éß„É≥1.14.3ÊôÇÁÇπ„Åß„ÄÅMutatingWebhookConfiguration„ÅØ‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å´„Å™„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇNamespace„Åß„Çµ„Ç§„Éâ„Ç´„Éº„Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥„ÇíÊúâÂäπÂåñ„Åô„ÇãÊôÇ„Å´‰ΩøÁî®„Åó„Åü„Ç®„Ç§„É™„Ç¢„Çπ„ÅØ„ÄÅ„Åì„ÅÆMutatingWebhookConfiguration„ÅßÂÆü‰Ωì„ÅÆ„É™„Éì„Ç∏„Éß„É≥Áï™Âè∑„Å®Á¥ê„Å•„ÅÑ„Å¶„ÅÑ„Åæ„Åô„ÄÇ$ kubectl get mutatingwebhookconfiguration istio-revision-tag-default -o yamlapiVersion: admissionregistration.k8s.io/v1beta1kind: MutatingWebhookConfigurationmetadata:  name: istio-revision-tag-default  labels:    app: sidecar-injector    # „Ç®„Ç§„É™„Ç¢„Çπ„ÅÆÂÆü‰Ωì    istio.io/rev: \u003c„É™„Éì„Ç∏„Éß„É≥Áï™Âè∑\u003e    # „É™„Éì„Ç∏„Éß„É≥Áï™Âè∑„ÅÆ„Ç®„Ç§„É™„Ç¢„Çπ    istio.io/tag: \u003c„Ç®„Ç§„É™„Ç¢„Çπ\u003ewebhooks:  - name: rev.namespace.sidecar-injector.istio.io    # MutatingAdmissionWebhook„Éó„É©„Ç∞„Ç§„É≥„ÅÆÂá¶ÁêÜ„ÅÆÁô∫ÁÅ´Êù°‰ª∂„ÇíÁôªÈå≤„Åô„Çã„ÄÇ    rules:      - apiGroups: [\"\"]        apiVersions: [\"v1\"]        operations: [\"CREATE\"]        resources: [\"pods\"]        scope: \"*\"    # Webhook„ÅÆÂâçÊÆµ„Å´„ÅÇ„ÇãService„ÅÆÊÉÖÂ†±„ÇíÁôªÈå≤„Åô„Çã„ÄÇ    clientConfig:      service:        name: istiod-\u003c„É™„Éì„Ç∏„Éß„É≥Áï™Âè∑\u003e        namespace: istio-system        path: \"/inject\" # „Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà        port: 443      caBundle: Ci0tLS0tQk ...    # NamespaceÂçò‰Ωç„ÅÆ„Çµ„Ç§„Éâ„Ç´„Éº„Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥    # ÁâπÂÆö„ÅÆNamespace„ÅßMutatingAdmissionWebhook„Éó„É©„Ç∞„Ç§„É≥„ÅÆÂá¶ÁêÜ„ÇíÁô∫ÁÅ´„Åï„Åõ„Çã„ÄÇ    namespaceSelector:      matchExpressions:        - key: istio.io/rev          operator: DoesNotExist        - key: istio-injection          operator: DoesNotExist    # PodÂçò‰Ωç„ÅÆ„Çµ„Ç§„Éâ„Ç´„Éº„Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥    # ÁâπÂÆö„ÅÆ„Ç™„Éñ„Ç∏„Çß„ÇØ„Éà„ÅßMutatingAdmissionWebhook„Éó„É©„Ç∞„Ç§„É≥„ÅÆÂá¶ÁêÜ„ÇíÁô∫ÁÅ´„Åï„Åõ„Çã„ÄÇ    objectSelector:      matchExpressions:        - key: sidecar.istio.io/inject          operator: NotIn          values:            - \"false\"        - key: istio.io/rev          operator: In          values:            - \u003c„Ç®„Ç§„É™„Ç¢„Çπ\u003e    ...MutatingWebhookConfiguration„Å´„ÅØ„ÄÅMutatingAdmissionWebhook„Éó„É©„Ç∞„Ç§„É≥„ÅÆÁô∫ÁÅ´Êù°‰ª∂„ÇÑwebhook„Çµ„Éº„Éê„Éº„ÅÆÂÆõÂÖàÊÉÖÂ†±„ÇíÂÆöÁæ©„Åó„Åæ„Åô„ÄÇMutatingAdmissionWebhook„Éó„É©„Ç∞„Ç§„É≥„ÅÆÁô∫ÁÅ´Êù°‰ª∂„Å´Èñ¢„Åó„Å¶„ÄÅ‰æã„Åà„Å∞Istio„Åß„ÅØ„ÄÅ Namespace„ÇÑPod.metadata.labels„Ç≠„Éº„Å´Âøú„Åò„Å¶„Çµ„Ç§„Éâ„Ç´„Éº„Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥„ÅÆÊúâÂäπÂåñ/ÁÑ°ÂäπÂåñ„ÇíÂàá„ÇäÊõø„Åà„Çã„Åì„Å®„Åå„Åß„Åç„ÄÅ„Åì„Çå„ÇíMutatingAdmissionWebhook„Éó„É©„Ç∞„Ç§„É≥„ÅßÂà∂Âæ°„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇwebhook„Çµ„Éº„Éê„Éº„ÅÆÂÆõÂÖàÊÉÖÂ†±„Å´Èñ¢„Åó„Å¶„ÄÅIstio„Åß„ÅØwebhook„Çµ„Éº„Éê„Éº„ÅÆÂâçÊÆµ„Å´Service„ÇíÈÖçÁΩÆ„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇMutatingAdmissionWebhook„Éó„É©„Ç∞„Ç§„É≥„ÅåÁô∫ÁÅ´„Åó„ÅüÂ†¥Âêà„ÄÅService„ÅÆ/inject:443„Å´HTTPS„Éó„É≠„Éà„Ç≥„É´„ÅÆ„É™„ÇØ„Ç®„Çπ„Éà„ÇíÈÄÅ‰ø°„Åô„Çã„Çà„ÅÜ„Å´„Å™„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ„Åæ„Åü„ÄÅÂÆõÂÖà„ÅÆService„ÅÆÂêçÂâç„Ååistiod-\u003c„É™„Éì„Ç∏„Éß„É≥Áï™Âè∑\u003e„Å®„Å™„Å£„Å¶„ÅÑ„Çã„Åì„Å®„Åã„Çâ„ÇÇ„Çè„Åã„Çã„Çà„ÅÜ„Å´„ÄÅService„ÅØÁâπÂÆö„ÅÆ„Éê„Éº„Ç∏„Éß„É≥„ÅÆIstiod„Ç≥„É≥„Éà„É≠„Éº„É´„Éó„É¨„Éº„É≥„Å´ÂØæÂøú„Åó„Å¶„Åä„Çä„ÄÅÊÉ≥ÂÆöÂ§ñ„ÅÆ„Éê„Éº„Ç∏„Éß„É≥„ÅÆIstiod„Ç≥„É≥„Éà„É≠„Éº„É´„Éó„É¨„Éº„É≥„ÇíÊåáÂÆö„Åó„Å™„ÅÑ„Çà„ÅÜ„Å´Âà∂Âæ°„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ‰∏ÄÊñπ„ÅßÁô∫ÁÅ´„Åó„Å™„Åã„Å£„ÅüÂ†¥Âêà„Å´„ÅØ„ÄÅ‰ª•Èôç„ÅÆAdmissionReview„ÅÆÂá¶ÁêÜ„Å´„ÅØÈÄ≤„Åø„Åæ„Åõ„Çì„ÄÇ(4) AdmissionRequest„Å´ÂÄ§„ÇíË©∞„ÇÅ„Çãkube-apiserver„ÅØ„ÄÅmutating-admission„Çπ„ÉÜ„ÉÉ„Éó„Å´„Å¶„ÄÅ„ÇØ„É©„Ç§„Ç¢„É≥„Éà„Åã„Çâ„ÅÆ„É™„ÇØ„Ç®„Çπ„ÉàÂÜÖÂÆπ (Pod„ÅÆ‰ΩúÊàê„É™„ÇØ„Ç®„Çπ„Éà) „ÇíAdmissionReveiewÊßãÈÄ†‰Ωì„ÅÆAdmissionRequest„Å´Ë©∞„ÇÅ„Åæ„Åô„ÄÇ{  \"apiVersion\": \"admission.k8s.io/v1\",  \"kind\": \"AdmissionReview\",  # AdmissionRequest  \"request\": {    ...    # Â§âÊõ¥„Åï„Çå„ÇãKubernetes„É™„ÇΩ„Éº„Çπ„ÅÆÁ®ÆÈ°û„ÇíË°®„Åô„ÄÇ    \"resource\": {      \"group\": \"core\",      \"version\": \"v1\",      \"resource\": \"pods\"    },    # kube-apiserver„ÅÆÊìç‰Ωú„ÅÆÁ®ÆÈ°û„ÇíË°®„Åô„ÄÇ    \"operation\": \"CREATE\",    ...  }}(5) AdmissionReview„ÇíÈÄÅ‰ø°kube-apiserver„ÅØ„ÄÅmutating-admission„Çπ„ÉÜ„ÉÉ„Éó„Å´„Å¶„ÄÅService„ÅÆ/inject:443„Å´AdmissionReviewÊßãÈÄ†‰Ωì„ÇíÈÄÅ‰ø°„Åó„Åæ„Åô„ÄÇService ‚û°Ô∏é webhook„Çµ„Éº„Éê„Éº„Åì„Åì„ÅßË™¨Êòé„Åô„Çã„Éï„É≠„ÉºÁÆáÊâÄ„ÄéService ‚û°Ô∏é webhook„Çµ„Éº„Éê„Éº„Äè„ÅÆÁÆáÊâÄ„ÇíË™¨Êòé„Åó„Åæ„Åô„ÄÇ(ÁîªÂÉè„ÅØ„Çø„ÉñÈñã„ÅçÈñ≤Ë¶ß„ÇíÊé®Â•®)(6) 15017Áï™„Éù„Éº„Éà„Å´„Éù„Éº„Éà„Éï„Ç©„ÉØ„Éº„Éá„Ç£„É≥„Ç∞Service„ÅØ„ÄÅ/inject:443„Åß„É™„ÇØ„Ç®„Çπ„Éà„ÇíÂèó‰ø°„Åó„ÄÅdiscovery„Ç≥„É≥„ÉÜ„Éä„ÅÆ15017Áï™„Éù„Éº„Éà„Å´„Éù„Éº„Éà„Éï„Ç©„ÉØ„Éº„Éá„Ç£„É≥„Ç∞„Åó„Åæ„Åô„ÄÇIstio„ÅÆ„Éê„Éº„Ç∏„Éß„É≥1.14.3ÊôÇÁÇπ„Åß„ÄÅService„ÅØ‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å´„Å™„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ$ kubectl get svc istiod-service -n istio-system -o yamlapiVersion: v1kind: Servicemetadata:  labels:    app: istiod  name: istiod-\u003c„É™„Éì„Ç∏„Éß„É≥Áï™Âè∑\u003e  namespace: istio-systemspec:  type: ClusterIP  selector:    app: istiod    istio.io/rev: \u003c„É™„Éì„Ç∏„Éß„É≥Áï™Âè∑\u003e  ports:    - name: grpc-xds      port: 15010      protocol: TCP      targetPort: 15010    - name: https-dns      port: 15012      protocol: TCP      targetPort: 15012    # webhook„Çµ„Éº„Éê„Éº„Å´„Éù„Éº„Éà„Éï„Ç©„ÉØ„Éº„Éá„Ç£„É≥„Ç∞„Åô„Çã„ÄÇ    - name: https-webhook      port: 443      protocol: TCP      targetPort: 15017    - name: http-monitoring      port: 15014      protocol: TCP      targetPort: 15014.spec.selector.istio.io/rev„Ç≠„Éº„Å´„ÄÅ„Éù„Éº„Éà„Éï„Ç©„ÉØ„Éº„Éá„Ç£„É≥„Ç∞ÂÖà„ÅÆPod„ÇíÊåáÂÆö„Åô„Çã„Åü„ÇÅ„ÅÆ„É™„Éì„Ç∏„Éß„É≥Áï™Âè∑„ÅåË®≠ÂÆö„Åï„Çå„Å¶„Åä„Çä„ÄÅ„Åì„ÅÆPod„ÅØdiscovery„Ç≥„É≥„ÉÜ„Éä„ÇíÊåÅ„Å°„Åæ„Åô„ÄÇIstio„ÅØ„ÄÅdiscovery„Ç≥„É≥„ÉÜ„ÉäÂÜÖ„Åßwebhook„Çµ„Éº„Éê„Éº„ÇíÂÆüË°å„Åó„ÄÅ15017Áï™„Éù„Éº„Éà„Åß„É™„ÇØ„Ç®„Çπ„Éà„ÇíÂæÖ„Å°Âèó„Åë„Åæ„Åô„ÄÇ‚ñ∂ istio.io/rev`discovery`„Ç≥„É≥„ÉÜ„Éä„ÅÆÂæÖ„Å°Âèó„Åë„Éù„Éº„Éà„Å´„Å§„ÅÑ„Å¶discovery„Ç≥„É≥„ÉÜ„Éä„Åå„É™„ÇØ„Ç®„Çπ„Éà„ÇíÂæÖ„Å°Âèó„Åë„Å¶„ÅÑ„Çã„Éù„Éº„ÉàÁï™Âè∑„ÇíË¶ã„Å¶„Åø„Çã„Å®„ÄÅ15017Áï™„Éù„Éº„Éà„Åß„É™„ÉÉ„Çπ„É≥„Åó„Å¶„ÅÑ„Çã„Åì„Å®„ÇíÁ¢∫Ë™ç„Åß„Åç„Åæ„Åôüëç$ kubectl exec foo-istiod -n istio-system -- netstat -tulpnActive Internet connections (only servers)Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program nametcp        0      0 127.0.0.1:9876          0.0.0.0:*               LISTEN      1/pilot-discoverytcp6       0      0 :::15017                :::*                    LISTEN      1/pilot-discoverytcp6       0      0 :::8080                 :::*                    LISTEN      1/pilot-discoverytcp6       0      0 :::15010                :::*                    LISTEN      1/pilot-discoverytcp6       0      0 :::15012                :::*                    LISTEN      1/pilot-discoverytcp6       0      0 :::15014                :::*                    LISTEN      1/pilot-discoveryistio/pkg/kube/inject/webhook.go at 1.14.3 ¬∑ istio/istio ¬∑ GitHubhttps://istio.io/latest/docs/ops/deployment/requirements/#ports-used-by-istiokube-apiserver ‚¨ÖÔ∏é Service ‚¨ÖÔ∏é webhook„Çµ„Éº„Éê„Éº (‚ÄªÈÄÜÂêë„Åç„ÅÆÁü¢Âç∞)„Åì„Åì„ÅßË™¨Êòé„Åô„Çã„Éï„É≠„ÉºÁÆáÊâÄ„Äékube-apiserver ‚¨ÖÔ∏é Service ‚¨ÖÔ∏é webhook„Çµ„Éº„Éê„Éº„Äè„ÅÆÁÆáÊâÄ„ÇíË™¨Êòé„Åó„Åæ„Åô„ÄÇÁü¢Âç∞„ÅåÈÄÜÂêë„Åç„Å™„Åì„Å®„Å´Ê≥®ÊÑè„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ(ÁîªÂÉè„ÅØ„Çø„ÉñÈñã„ÅçÈñ≤Ë¶ß„ÇíÊé®Â•®)(7) patchÂá¶ÁêÜ„ÇíÂÆöÁæ©‰ªïÁµÑ„Åø„ÅÆ‰∏≠„Åß„ÇÇ„ÄÅ„Åì„Åì„ÅØÈáçË¶Å„Å™ÈÉ®ÂàÜ„Åß„Åô„ÄÇdiscovery„Ç≥„É≥„ÉÜ„ÉäÂÜÖ„ÅÆwebhook„Çµ„Éº„Éê„Éº„ÅØ„ÄÅ„É™„ÇØ„Ç®„Çπ„ÉàÂÜÖÂÆπ„ÇíÊõ∏„ÅçÊèõ„Åà„Çã„Åü„ÇÅ„ÅÆpatchÂá¶ÁêÜ„ÇíÂÆöÁæ©„Åó„Åæ„Åô„ÄÇwebhook„Çµ„Éº„Éê„Éº„ÅØ„ÄÅ„Éû„Éã„Éï„Çß„Çπ„Éà„ÅÆ.spec.containers[1]„Éë„Çπ„Å´istio-proxy„Ç≠„Éº„ÇíËøΩÂä†„Åï„Åõ„Çã„Çà„ÅÜ„Å™patchÂá¶ÁêÜ„ÇíÂÆöÁæ©„Åó„Åæ„Åô„ÄÇ„Åì„ÅÆÂÆöÁæ©„Å´„Çà„Å£„Å¶„ÄÅÁµêÊûúÁöÑ„Å´„Çµ„Ç§„Éâ„Ç´„Éº„ÅÆ„Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥„ÅåËµ∑„Åì„Çã„Å®„ÅÑ„ÅÜ„Åì„Å®„Å´„Å™„Çä„Åæ„Åô„ÄÇ[  ...  {    \"op\": \"add\",    # .spec.initContainers[1] „ÇíÊåáÂÆö„Åô„Çã„ÄÇ    \"path\": \"/spec/initContainers/1\",    # „Éû„Éã„Éï„Çß„Çπ„Éà„Å´ËøΩÂä†„Åï„Çå„ÇãÊßãÈÄ†„ÇíË°®„Åô„ÄÇ    \"value\": {      \"name\": \"istio-init\",      \"resources\": {                     ...      }    }  },  {    \"op\": \"add\",    # .spec.containers[1] „ÇíÊåáÂÆö„Åô„Çã„ÄÇ    \"path\": \"/spec/containers/1\",    # „Éû„Éã„Éï„Çß„Çπ„Éà„Å´ËøΩÂä†„Åï„Çå„ÇãÊßãÈÄ†„ÇíË°®„Åô„ÄÇ    \"value\": {      \"name\": \"istio-proxy\",      \"resources\": {                     ...      }    }  }  ...]istio/pkg/kube/inject/webhook.go at 1.14.3 ¬∑ istio/istio ¬∑ GitHubistio/pkg/kube/inject/webhook_test.go at 1.14.3 ¬∑ istio/istio ¬∑ GitHub„Åì„ÅÆÊôÇ„ÄÅ„Çµ„Ç§„Éâ„Ç´„Éº„ÅÆ„ÉÜ„É≥„Éó„É¨„Éº„Éà„Å´Ââ≤„ÇäÂΩì„Å¶„Çâ„Çå„ÅüÂÄ§„Åå„ÄÅpatchÂá¶ÁêÜ„ÇíÂÜÖÂÆπ„ÇíÊ±∫„ÇÅ„Åæ„Åô„ÄÇtype SidecarTemplateData struct {    TypeMeta             metav1.TypeMeta    DeploymentMeta       metav1.ObjectMeta    ObjectMeta           metav1.ObjectMeta    Spec                 corev1.PodSpec    ProxyConfig          *meshconfig.ProxyConfig    MeshConfig           *meshconfig.MeshConfig    Values               map[string]interface{}    Revision             string    EstimatedConcurrency int    ProxyImage           string}...istio/pkg/kube/inject/inject.go at 1.14.3 ¬∑ istio/istio ¬∑ GitHub‚ñ∂ patchÂá¶ÁêÜ„Åß„Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥„Åô„Çã„Ç≥„É≥„ÉÜ„Éä„Å´„Å§„ÅÑ„Å¶istio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅÆ‰ªñ„Å´„ÄÅInitContainer„ÅÆistio-init„Ç≥„É≥„ÉÜ„Éä„ÇÇ„Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥ÂèØËÉΩ„Å´„Åó„Åæ„Åô„ÄÇ„Åì„ÅÆistio-init„Ç≥„É≥„ÉÜ„Éä„ÅØ„ÄÅPodÂÜÖ„Å´iptables„ÅÆ„É´„Éº„É´„ÇíÈÅ©Áî®„Åó„ÄÅPod„ÅÆ„Ç§„É≥„Éê„Ç¶„É≥„ÉâÈÄö‰ø°Ôºè„Ç¢„Ç¶„Éà„Éê„Ç¶„É≥„ÉâÈÄö‰ø°„Çíistio-proxy„Ç≥„É≥„ÉÜ„Éä„Å´„É™„ÉÄ„Ç§„É¨„ÇØ„Éà„Åï„Åõ„ÇãË≤¨Âãô„ÇíÊãÖ„ÅÑ„Åæ„Åôüí™üèªIstio Sidecar's interception mechanism for traffic - SoByte(8) AdmissionResponse„Å´ÂÄ§„ÇíË©∞„ÇÅ„Çãdiscovery„Ç≥„É≥„ÉÜ„ÉäÂÜÖ„ÅÆwebhook„Çµ„Éº„Éê„Éº„ÅØ„ÄÅpatchÂá¶ÁêÜ„ÅÆÂÆöÁæ©„ÇíAdmissionReveiewÊßãÈÄ†‰Ωì„ÅÆAdmissionResponse„Å´Ë©∞„ÇÅ„Åæ„Åô„ÄÇpatch„Ç≠„Éº„ÅÆÂÄ§„Å´„ÄÅÂÖà„Åª„Å©„ÅÆpatchÂá¶ÁêÜ„ÅÆÂÆöÁæ©„Çíbase64ÊñπÂºè„Åß„Ç®„É≥„Ç≥„Éº„Éâ„Åó„ÅüÊñáÂ≠óÂàó„ÅåÂâ≤„ÇäÂΩì„Å¶„Çâ„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ{  \"apiVersion\": \"admission.k8s.io/v1\",  \"kind\": \"AdmissionReview\",  # AdmissionResponse  \"response\": {      \"uid\": \"*****\",      \"allowed\": true,      \"patchType\": \"JSONPatch\",      # PatchÂá¶ÁêÜ„ÅÆÂØæË±°„Å®„Å™„ÇãKubernetes„É™„ÇΩ„Éº„Çπ„Å®Âá¶ÁêÜÂÜÖÂÆπ„ÇíË°®„Åô„ÄÇbase64ÊñπÂºè„Åß„Ç®„É≥„Ç≥„Éº„Éâ„Åï„Çå„Å¶„ÅÑ„Çã„ÄÇ      \"patch\": \"\u003cÂÖà„Åª„Å©„ÅÆpatchÂá¶ÁêÜ„ÅÆÂÆöÁæ©„Çíbase64ÊñπÂºè„Åß„Ç®„É≥„Ç≥„Éº„Éâ„Åó„ÅüÊñáÂ≠óÂàó\u003e\",    },}istio/pkg/kube/inject/webhook.go at 1.14.3 ¬∑ istio/istio ¬∑ GitHub(9) AdmissionReview„ÇíËøî‰ø°discovery„Ç≥„É≥„ÉÜ„ÉäÂÜÖ„ÅÆwebhook„Çµ„Éº„Éê„Éº„ÅØ„ÄÅAdmissionReviewÊßãÈÄ†‰Ωì„Çí„É¨„Çπ„Éù„É≥„Çπ„Å®„Åó„Å¶kube-apiserver„Å´Ëøî‰ø°„Åó„Åæ„Åô„ÄÇkube-apiserver ‚û°Ô∏é etcd„Åì„Åì„ÅßË™¨Êòé„Åô„Çã„Éï„É≠„ÉºÁÆáÊâÄ„Äékube-apiserver ‚û°Ô∏é etcd„Äè„ÅÆÁÆáÊâÄ„ÇíË™¨Êòé„Åó„Åæ„Åô„ÄÇ(ÁîªÂÉè„ÅØ„Çø„ÉñÈñã„ÅçÈñ≤Ë¶ß„ÇíÊé®Â•®)(10) patchÂá¶ÁêÜ„Çí„Ç≥„Éº„É´kube-apiserver„ÅØ„ÄÅAdmissionReviewÊßãÈÄ†‰Ωì„ÇíÂèó‰ø°„Åó„ÄÅAdmissionResponse„Å´Âøú„Åò„Å¶„É™„ÇØ„Ç®„Çπ„ÉàÂÜÖÂÆπ„ÇíÊõ∏„ÅçÊèõ„Åà„Åæ„Åô„ÄÇpatchÂá¶ÁêÜ„ÅÆÂÆöÁæ©„ÇíAdmissionReviewÊßãÈÄ†‰Ωì„Åã„ÇâÂèñ„ÇäÂá∫„Åó„ÄÅ„ÇØ„É©„Ç§„Ç¢„É≥„Éà„Åã„Çâ„ÅÆ„É™„ÇØ„Ç®„Çπ„ÉàÂÜÖÂÆπ„ÇíÊõ∏„ÅçÊèõ„Åà„Åæ„Åô„ÄÇÂÖ∑‰ΩìÁöÑ„Å´„ÅØ„ÄÅistio-proxy„Ç≥„É≥„ÉÜ„Éä„Å®istio-init„Ç≥„É≥„ÉÜ„Éä„Çí‰ΩúÊàê„Åô„Çã„Åü„ÇÅ„Å´„ÄÅ„É™„ÇØ„Ç®„Çπ„Éà„Åó„Åü„Éû„Éã„Éï„Çß„Çπ„Éà„ÅÆË©≤ÂΩìÁÆáÊâÄ„Å´„Ç≠„Éº„ÇíËøΩÂä†„Åó„Åæ„Åô„ÄÇapiVersion: v1kind: Podmetadata:  name: foo-pod  namespace: foo-namespacespec:  containers:    - name: foo      image: foo:1.0.0      ports:        - containerPort: 80    # kube-apiserver„ÅåËøΩÂä†    - name: istio-proxy      ...  # kube-apiserver„ÅåËøΩÂä†  initContainers:    - name: istio-init    ...(11) „Éû„Éã„Éï„Çß„Çπ„Éà„ÇíÊ∞∏Á∂öÂåñkube-apiserver„ÅØ„ÄÅetcd„Å´Pod„ÅÆ„Éû„Éã„Éï„Çß„Çπ„Éà„ÇíÊ∞∏Á∂öÂåñ„Åó„Åæ„Åô„ÄÇ„ÇØ„É©„Ç§„Ç¢„É≥„Éà ‚¨ÖÔ∏é kube-apiserver„Åì„Åì„ÅßË™¨Êòé„Åô„Çã„Éï„É≠„ÉºÁÆáÊâÄ„Äé„ÇØ„É©„Ç§„Ç¢„É≥„Éà ‚¨ÖÔ∏é kube-apiserver„Äè„ÅÆÁÆáÊâÄ„ÇíË™¨Êòé„Åó„Åæ„Åô„ÄÇ(ÁîªÂÉè„ÅØ„Çø„ÉñÈñã„ÅçÈñ≤Ë¶ß„ÇíÊé®Â•®)(12) „Ç≥„Éº„É´ÂÆå‰∫Ü„ÇíËøî‰ø°kube-apiserver„ÅØ„ÄÅ„ÇØ„É©„Ç§„Ç¢„É≥„Éà„Å´„É¨„Çπ„Éù„É≥„Çπ„ÇíÂèó‰ø°„Åó„Åæ„Åô„ÄÇ$ kubectl apply -f foo-pod.yaml# kube-apiserver„Åã„Çâ„É¨„Çπ„Éù„É≥„Çπ„ÅåËøî„Å£„Å¶„Åè„Çãpod \"foo-pod\" created‰ª•Èôç„ÅÆ‰ªïÁµÑ„Åø(ÁîªÂÉè„ÅØ„Çø„ÉñÈñã„ÅçÈñ≤Ë¶ß„ÇíÊé®Â•®)kube-apiserver„ÅØ„ÄÅ‰ªñ„ÅÆNode„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà (kube-controlleretcd„ÄÅkube-scheduler„ÄÅkubelet„Å™„Å©) „Å®ÈÄö‰ø°„Åó„ÄÅPod„Çí‰ΩúÊàê„Åó„Åæ„Åô„ÄÇ„Åì„ÅÆPod„ÅÆ„Éû„Éã„Éï„Çß„Çπ„Éà„ÅØ„ÄÅ„Ç¢„Éó„É™„Ç≥„É≥„ÉÜ„Éä„ÅÆ‰ªñ„Å´„ÄÅistio-proxy„Ç≥„É≥„ÉÜ„Éä„Å®istio-init„Ç≥„É≥„ÉÜ„Éä„ÇíÊåÅ„Å°„Åæ„Åô„ÄÇÁµêÊûú„Å®„Åó„Å¶„ÄÅ„Çµ„Ç§„Éâ„Ç´„Éº„Ç≥„É≥„ÉÜ„Éä„ÅÆistio-proxy„Ç≥„É≥„ÉÜ„Éä„Çí„Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥„Åó„Åü„Åì„Å®„Å´„Å™„Çä„Åæ„Åô„ÄÇ‚ñ∂ kube-apiserver„Å®‰ªñ„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÈÄö‰ø°„Å´„Å§„ÅÑ„Å¶Kubernetes Master Components: Etcd, API Server, Controller Manager, and Scheduler | by Jorge Acetozi | jorgeacetozi | Medium05. „Åä„Çè„Çä„Å´„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•„ÅÆÁôªÂ†¥„Å®Istio„ÅÆ„Çµ„Ç§„Éâ„Ç´„Éº„Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥„ÅÆ‰ªïÁµÑ„Åø„Çí„ÇÇ„Çä„ÇÇ„ÇäÂ∏ÉÊïô„Åó„Åæ„Åó„Åü„ÄÇIstio„Å∏„ÅÆÊÑõ„ÅåÊ∫¢„Çå„Å¶„Åó„Åæ„ÅÑ„Åæ„Åó„Åü„ÄÇ‰ªäÂõûÁôªÂ†¥„Åó„ÅüMutatingAdmissionWebhook„Éó„É©„Ç∞„Ç§„É≥„Å´Èñ¢„Åó„Å¶„ÄÅÁßÅ„ÅÆÈñ¢„Çè„Å£„Å¶„ÅÑ„Çã„Éó„É≠„ÉÄ„ÇØ„Éà„Åß„ÅØIstio‰ª•Â§ñ (‰æãÔºöCertManager„ÄÅPrometheus„ÄÅAWS„ÅÆaws-eks-vpc-cni„Ç¢„Éâ„Ç™„É≥„Å™„Å©) „Åß„ÇÇ‰ΩøÁî®„Åó„Å¶„ÅÑ„Åæ„Åô‚úåÔ∏è„Åù„ÅÆ„Åü„ÇÅ„ÄÅMutatingAdmissionWebhook„Éó„É©„Ç∞„Ç§„É≥„Çí„Å©„ÅÆ„Çà„ÅÜ„Å´‰Ωø„Å£„Å¶„ÅÑ„Çã„ÅÆ„Åã„Çí‰∏ÄÂ∫¶Áü•„Çå„Å∞„ÄÅÁü•Ë≠ò„ÅÆÊ±éÁî®ÊÄß„ÅåÈ´ò„ÅÑ„Å®ËÄÉ„Åà„Å¶„ÅÑ„Åæ„Åô„ÄÇ„Çµ„Ç§„Éâ„Ç´„Éº„Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥„ÅØIstio„Åß„ÇÇÂü∫Êú¨ÁöÑ„Å™Ê©üËÉΩ„Åß„ÅÇ„Çä„ÄÅ„ÇÇ„ÅóÊú™‰ΩìÈ®ì„ÅÆÊñπ„Åå„ÅÑ„Çâ„Å£„Åó„ÇÉ„Çå„Å∞„ÄÅ„ÅäÊâãÂÖÉ„Åß„Çµ„Ç§„Éâ„Ç´„Éº„Ç≥„É≥„ÉÜ„Éä„ÅåËøΩÂä†„Åï„Çå„Çã„Åì„Å®„ÇíÁ¢∫Ë™ç„Åó„Å¶„ÅÑ„Åü„Å†„Åè„Å®„Çà„ÅÑ„Åã„ÇÇ„Åó„Çå„Åæ„Åõ„ÇìüëçË®ò‰∫ãÈñ¢ÈÄ£„ÅÆ„Åä„Åô„Åô„ÇÅÊõ∏Á±çIstio in Action (English Edition)‰ΩúËÄÖ:Posta, Christian E.,Maloku, RinorManningAmazonIstio: Up and Running: Using a Service Mesh to Connect, Secure, Control, and Observe‰ΩúËÄÖ:Calcote, Lee,Butcher, ZackO'Reilly MediaAmazon","isoDate":"2023-01-14T13:38:15.000Z","dateMiliSeconds":1673703495000,"authorName":"Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π","authorId":"hiroki-hasegawa"},{"title":"„ÄêIstio‚õµÔ∏è„ÄëIstio„ÅÆ„Çµ„Éº„Éì„ÇπÈñìÈÄö‰ø°„ÇíÂÆüÁèæ„Åô„Çã„Çµ„Éº„Éì„Çπ„Éá„Ç£„Çπ„Ç´„Éê„É™„Éº„ÅÆ‰ªïÁµÑ„Åø","link":"https://hiroki-hasegawa.hatenablog.jp/entry/2022/12/25/060000","contentSnippet":"„Åì„ÅÆË®ò‰∫ã„Åã„ÇâÂæó„Çâ„Çå„ÇãÁü•Ë≠ò„Åì„ÅÆË®ò‰∫ã„ÇíË™≠„ÇÄ„Å®„ÄÅ‰ª•‰∏ã„Çí \"ÂÆåÂÖ®„Å´ÁêÜËß£\" „Åß„Åç„Åæ„Åô‚úåÔ∏è„Çµ„Éº„Éì„Çπ„Éá„Ç£„Çπ„Ç´„Éê„É™„Éº„ÅÆÁ®ÆÈ°û„Å´„Å§„ÅÑ„Å¶Istio„ÅÆ„Çµ„Éº„Éì„ÇπÈñìÈÄö‰ø°„ÇíÂÆüÁèæ„Åô„Çã„Çµ„Éº„Éì„Çπ„Éá„Ç£„Çπ„Ç´„Éê„É™„Éº„ÅÆ‰ªïÁµÑ„Åø„Å´„Å§„ÅÑ„Å¶Ë®ò‰∫ã„ÅÆ„Åñ„Å£„Åè„Çä„Åó„ÅüÂÜÖÂÆπ„ÅØ„ÄÅ‰ª•‰∏ã„ÅÆ„Çπ„É©„Ç§„Éâ„Åã„Çâ„Ç≠„É£„ÉÉ„ÉÅ„Ç¢„ÉÉ„Éó„Åß„Åç„Å°„ÇÉ„ÅÑ„Åæ„ÅôÔºÅ    „Åì„ÅÆË®ò‰∫ã„Åã„ÇâÂæó„Çâ„Çå„ÇãÁü•Ë≠ò01. „ÅØ„Åò„ÇÅ„Å´02. „Çµ„Éº„Éì„Çπ„Éá„Ç£„Çπ„Ç´„Éê„É™„Éº„Å´„Å§„ÅÑ„Å¶„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„Ç¢„Éº„Ç≠„ÉÜ„ÇØ„ÉÅ„É£„Å´„Åä„Åë„Çã„Çµ„Éº„Éì„Çπ„Éá„Ç£„Çπ„Ç´„Éê„É™„Éº„Çµ„Éº„Éì„Çπ„Éá„Ç£„Çπ„Ç´„Éê„É™„Éº„Å®„ÅØ„Å™„Åú„Çµ„Éº„Éì„Çπ„Éá„Ç£„Çπ„Ç´„Éê„É™„Éº„ÅåÂøÖË¶Å„Å™„ÅÆ„Åã„Çµ„Éº„Éì„Çπ„Éá„Ç£„Çπ„Ç´„Éê„É™„Éº„ÅÆË¶ÅÁ¥†„Çµ„Éº„Éì„Çπ„Éá„Ç£„Çπ„Ç´„Éê„É™„Éº„ÅÆ„Éë„Çø„Éº„É≥„Çµ„Éº„Éì„Çπ„Éá„Ç£„Çπ„Ç´„Éê„É™„Éº„ÅÆ„Éë„Çø„Éº„É≥„Å®„ÅØ„Çµ„Éº„Éê„Éº„Çµ„Ç§„Éâ„Éë„Çø„Éº„É≥„ÇØ„É©„Ç§„Ç¢„É≥„Éà„Çµ„Ç§„Éâ„Éë„Çø„Éº„É≥03. Istio„ÅÆ„Çµ„Éº„Éì„Çπ„Éá„Ç£„Çπ„Ç´„Éê„É™„Éº„ÅÆ‰ªïÁµÑ„ÅøÂÖ®‰ΩìÂÉè(1) kube-apiserver„Å´„Çà„ÇãÂÆõÂÖàÊÉÖÂ†±‰øùÁÆ°(2) discovery„Ç≥„É≥„ÉÜ„Éä„Å´„Çà„ÇãÂÆõÂÖàÊÉÖÂ†±‰øùÁÆ°(3) istio-proxy„Ç≥„É≥„ÉÜ„Éä„Å´„Çà„ÇãÂÆõÂÖàÊÉÖÂ†±ÂèñÂæó(4) istio-proxy„Ç≥„É≥„ÉÜ„Éä„Å´„Çà„Çã„É™„ÇØ„Ç®„Çπ„ÉàÂèó‰ø°(5) istio-proxy„Ç≥„É≥„ÉÜ„Éä„Å´„Çà„Çã„É≠„Éº„Éâ„Éê„É©„É≥„Ç∑„É≥„Ç∞discovery„Ç≥„É≥„ÉÜ„Éä„ÅÆ‰ªïÁµÑ„Åø(1) kube-apiserver„Å´„Çà„ÇãÂÆõÂÖàÊÉÖÂ†±‰øùÁÆ°(2) discovery„Ç≥„É≥„ÉÜ„Éä„Å´„Çà„ÇãÂÆõÂÖàÊÉÖÂ†±‰øùÁÆ°(3) istio-proxy„Ç≥„É≥„ÉÜ„Éä„Å´„Çà„ÇãÂÆõÂÖàÊÉÖÂ†±ÂèñÂæóistio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅÆ‰ªïÁµÑ„Åø(1) kube-apiserver„Å´„Çà„ÇãÂÆõÂÖàÊÉÖÂ†±‰øùÁÆ°(2) discovery„Ç≥„É≥„ÉÜ„Éä„Å´„Çà„ÇãÂÆõÂÖàÊÉÖÂ†±‰øùÁÆ°(3) istio-proxy„Ç≥„É≥„ÉÜ„Éä„Å´„Çà„ÇãÂÆõÂÖàÊÉÖÂ†±ÂèñÂæó(4) istio-proxy„Ç≥„É≥„ÉÜ„Éä„Å´„Çà„Çã„É™„ÇØ„Ç®„Çπ„ÉàÂèó‰ø°(5) istio-proxy„Ç≥„É≥„ÉÜ„Éä„Å´„Çà„Çã„É™„ÇØ„Ç®„Çπ„ÉàÂèó‰ø°04. istio-proxy„Ç≥„É≥„ÉÜ„ÉäÂÜÖ„ÅÆEnvoy„ÅÆ‰ªïÁµÑ„ÅøÂÖ®‰ΩìÂÉè(1) ÈÄÅ‰ø°ÂÖÉ„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„Åã„Çâ„É™„ÇØ„Ç®„Çπ„ÉàÂèó‰ø°(2) Envoy„Å´„Çà„Çã„É™„Çπ„Éä„ÉºÈÅ∏Êäû(3) Envoy„Å´„Çà„Çã„É´„Éº„ÉàÈÅ∏Êäû(4) Envoy„Å´„Çà„Çã„ÇØ„É©„Çπ„Çø„ÉºÈÅ∏Êäû(5) Envoy„Å´„Çà„Çã„Ç®„É≥„Éâ„Éù„Ç§„É≥„ÉàÈÅ∏Êäû(6) ÂÆõÂÖà„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„Å∏„ÅÆ„É™„ÇØ„Ç®„Çπ„ÉàÈÄÅ‰ø°Envoy„ÅåADS-API„Åã„ÇâÂèñÂæó„Åó„ÅüÂÆõÂÖàÊÉÖÂ†±„ÇíË¶ã„Å¶„Åø„Çà„ÅÜconfig_dump„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„É™„Çπ„Éä„Éº‚ñº Á¢∫Ë™çÊñπÊ≥ï‚ñº ÁµêÊûú„É´„Éº„Éà‚ñº Á¢∫Ë™çÊñπÊ≥ï‚ñº ÁµêÊûú„ÇØ„É©„Çπ„Çø„Éº‚ñº Á¢∫Ë™çÊñπÊ≥ï‚ñº ÁµêÊûú„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà‚ñº Á¢∫Ë™çÊñπÊ≥ï‚ñº ÁµêÊûúEnvoy„ÅÆÂá¶ÁêÜ„ÅÆÊµÅ„Çå„ÅÆ„Åæ„Å®„ÇÅ(1) ÈÄÅ‰ø°ÂÖÉ„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„Åã„Çâ„É™„ÇØ„Ç®„Çπ„ÉàÂèó‰ø°(2) Envoy„Å´„Çà„Çã„É™„Çπ„Éä„ÉºÈÅ∏Êäû(3) Envoy„Å´„Çà„Çã„É´„Éº„ÉàÈÅ∏Êäû(4) Envoy„Å´„Çà„Çã„ÇØ„É©„Çπ„Çø„ÉºÈÅ∏Êäû(5) Envoy„Å´„Çà„Çã„ÇØ„É©„Çπ„Çø„ÉºÈÅ∏Êäû(6) ÂÆõÂÖà„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„Å∏„ÅÆ„É™„ÇØ„Ç®„Çπ„ÉàÈÄÅ‰ø°05. „Åä„Çè„Çä„Å´Ë¨ùËæûË®ò‰∫ãÈñ¢ÈÄ£„ÅÆ„Åä„Åô„Åô„ÇÅÊõ∏Á±ç01. „ÅØ„Åò„ÇÅ„Å´Êé®„Åó (Istio) „ÅåÂ∞ä„ÅÑüôèüôèüôè3-shake Advent Calender 2022 ÊúÄÁµÇÊó•„ÅÆË®ò‰∫ã„Åß„ÅôüéÖÊôÆÊÆµ„ÄÅÁßÅ„ÅØ ‰ø∫„ÅÆÊäÄË°ì„Éé„Éº„Éà „Å´Áü•Ë¶ã„ÇíË®òÈå≤„Åó„Å¶„Åä„Çä„ÄÅ„ÅØ„Å¶„Å™„Éñ„É≠„Ç∞„ÅØ„Éá„Éì„É•„ÉºÊà¶„Å®„Å™„Çä„Åæ„Åô„ÄÇÊúÄËøë„ÅÆÊ•≠Âãô„Åß„ÄÅ„Ç™„É≥„Éó„É¨„Å®AWS‰∏ä„ÅÆIstio‚õµÔ∏è„Çí„Å≤„Åü„Åô„ÇâÂ≠êÂÆà„Çä„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ‰ªäÂõû„ÅØ„ÄÅÂ≠êÂÆà„Çä„ÅÆÂâçÊèêÁü•Ë≠ò„ÅÆÂæ©Áøí„ÇÇ„Åã„Å≠„Å¶„ÄÅIstio„ÅÆ„Çµ„Éº„Éì„ÇπÈñìÈÄö‰ø°„ÇíÂÆüÁèæ„Åô„Çã„Çµ„Éº„Éì„Çπ„Éá„Ç£„Çπ„Ç´„Éê„É™„Éº„ÅÆ‰ªïÁµÑ„Åø„ÇíË®ò‰∫ã„ÅßËß£Ë™¨„Åó„Åæ„Åó„Åü„ÄÇIstio„ÅÆÊ©üËÉΩ„ÅÆ1„Å§„Åß„ÅÇ„Çã„Çµ„Éº„Éì„Çπ„Éá„Ç£„Çπ„Ç´„Éê„É™„Éº„ÅØ„ÄÅ„Åù„ÅÆ‰ªïÁµÑ„Åø„ÅÆÂ§ö„Åè„ÇíEnvoy„Å´È†º„Å£„Å¶„ÅÑ„Çã„Åü„ÇÅ„ÄÅÂêà„Çè„Åõ„Å¶Envoy„ÅÆ‰ªïÁµÑ„Åø„ÇÇË™¨Êòé„Åó„Åæ„Åô„ÄÇ„Åù„Çå„Åß„ÅØ„ÄÅ„ÇÇ„Çä„ÇÇ„ÇäÂ∏ÉÊïô„Åó„Å¶„ÅÑ„Åç„Åæ„Åôüòó02. „Çµ„Éº„Éì„Çπ„Éá„Ç£„Çπ„Ç´„Éê„É™„Éº„Å´„Å§„ÅÑ„Å¶„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„Ç¢„Éº„Ç≠„ÉÜ„ÇØ„ÉÅ„É£„Å´„Åä„Åë„Çã„Çµ„Éº„Éì„Çπ„Éá„Ç£„Çπ„Ç´„Éê„É™„Éº„Çµ„Éº„Éì„Çπ„Éá„Ç£„Çπ„Ç´„Éê„É™„Éº„Å®„ÅØÂπ≥Êòì„Å™Ë®ÄËëâ„ÅßË®Ä„ÅÑÊèõ„Åà„Çã„Å® „Çµ„Éº„Éì„ÇπÈñìÈÄö‰ø° „Åß„Åô„ÄÇ„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„Ç¢„Éº„Ç≠„ÉÜ„ÇØ„ÉÅ„É£„Åß„ÅØ„ÄÅ„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„Åã„Çâ„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„Å´„É™„ÇØ„Ç®„Çπ„Éà„ÇíÈÄÅ‰ø°„Åô„ÇãÂ†¥Èù¢„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ„Çµ„Éº„Éì„Çπ„Éá„Ç£„Çπ„Ç´„Éê„É™„Éº„Å®„ÅØ„ÄÅÂÆõÂÖà„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„ÅÆÂÆõÂÖàÊÉÖÂ†± (‰æãÔºöIP„Ç¢„Éâ„É¨„Çπ„ÄÅÂÆåÂÖ®‰øÆÈ£æ„Éâ„É°„Ç§„É≥Âêç„Å™„Å©) „ÇíÊ§úÂá∫„Åó„ÄÅÈÄÅ‰ø°ÂÖÉ„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„ÅåÂÆõÂÖà„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„Å´„É™„ÇØ„Ç®„Çπ„Éà„ÇíÁ∂ôÁ∂öÁöÑ„Å´ÈÄÅ‰ø°ÂèØËÉΩ„Å´„Åô„Çã‰ªïÁµÑ„Åø„ÅÆ„Åì„Å®„Åß„Åô„ÄÇ„Å™„Åú„Çµ„Éº„Éì„Çπ„Éá„Ç£„Çπ„Ç´„Éê„É™„Éº„ÅåÂøÖË¶Å„Å™„ÅÆ„Åã„Åù„ÇÇ„Åù„ÇÇ„ÄÅ„Å™„Åú„Çµ„Éº„Éì„Çπ„Éá„Ç£„Çπ„Ç´„Éê„É™„Éº„ÅåÂøÖË¶Å„Å™„ÅÆ„Åß„Åó„Çá„ÅÜ„Åã„ÄÇ„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„Ç¢„Éº„Ç≠„ÉÜ„ÇØ„ÉÅ„É£„Åß„ÅØ„ÄÅ„Ç∑„Çπ„ÉÜ„É†„ÅÆ‰ø°È†ºÊÄß (ÂÆö„ÇÅ„Çâ„Çå„ÅüÊù°‰ª∂‰∏ã„ÅßÂÆö„ÇÅ„Çâ„Çå„ÅüÊúüÈñì„Å´„Çè„Åü„Çä„ÄÅÈöúÂÆ≥„ÇíÁô∫Áîü„Åï„Åõ„Çã„Åì„Å®„Å™„ÅèÂÆüË°å„Åô„ÇãÁ®ãÂ∫¶) „ÇíÊãÖ‰øù„Åô„Çã„Åü„ÇÅ„Å´„ÄÅ„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„ÅÆ„Ç§„É≥„Çπ„Çø„É≥„Çπ„ÅÆËá™Âãï„Çπ„Ç±„Éº„É™„É≥„Ç∞„ÇíÊé°Áî®„Åó„Åæ„Åô„ÄÇ„Åì„ÅÆÊôÇ„ÄÅËá™Âãï„Çπ„Ç±„Éº„É™„É≥„Ç∞„ÅÆ„Çπ„Ç±„Éº„É´„Ç¢„Ç¶„Éà„Åß„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„ÅåÂ¢óÂä†„Åô„Çã„Åü„Å≥„Å´„ÄÅÂêÑ„Ç§„É≥„Çπ„Çø„É≥„Çπ„Å´„ÅØÊñ∞„Åó„ÅÑÂÆõÂÖàÊÉÖÂ†±„ÅåÂâ≤„ÇäÂΩì„Å¶„Çâ„Çå„Å¶„Åó„Åæ„ÅÑ„Åæ„Åô„ÄÇ„Åæ„Åü„ÄÅ„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„Åå‰Ωú„ÇäÁõ¥„Åï„Çå„ÅüÂ†¥Âêà„Å´„ÇÇ„ÄÅÂÆõÂÖàÊÉÖÂ†±„ÅØÊõ¥Êñ∞„Åï„Çå„Å¶„Åó„Åæ„ÅÑ„Åæ„Åô„ÄÇ„Åì„ÅÆ„Çà„ÅÜ„Å´„ÄÅ„Åü„Å®„Åà„Ç§„É≥„Çπ„Çø„É≥„Çπ„ÅÆÂÆõÂÖàÊÉÖÂ†±„ÅåÊõ¥Êñ∞„Åï„Çå„Åü„Å®„Åó„Å¶„ÇÇ„ÄÅ„Ç§„É≥„Çπ„Çø„É≥„Çπ„Å∏„ÅÆ„É™„ÇØ„Ç®„Çπ„Éà„Å´Â§±Êïó„Åó„Å™„ÅÑ‰ªïÁµÑ„Åø„ÅåÂøÖË¶Å„Åß„Åô„ÄÇ„Çµ„Éº„Éì„Çπ„Éá„Ç£„Çπ„Ç´„Éê„É™„Éº„ÅÆË¶ÅÁ¥†„Çµ„Éº„Éì„Çπ„Éá„Ç£„Çπ„Ç´„Éê„É™„Éº„ÅÆ‰ªïÁµÑ„Åø„ÅØ„ÄÅÊ¨°„ÅÆË¶ÅÁ¥†„Åã„Çâ„Å™„Çä„Åæ„Åô„ÄÇÂêçÂâçËß£Ê±∫„ÅØ„ÄÅDNS„Éô„Éº„Çπ„ÅÆ„Çµ„Éº„Éì„Çπ„Éá„Ç£„Çπ„Ç´„Éê„É™„Éº (‰æãÔºöCoreDNS + Service + kube-proxy„Å´„Çà„Çã„Çµ„Éº„Éì„Çπ„Éá„Ç£„Çπ„Ç´„Éê„É™„Éº) „ÅßÂøÖË¶Å„Å®„Å™„Çä„ÄÅIstio„Åß„ÅØ‰Ωø„ÅÑ„Åæ„Åõ„Çì„ÄÇ„Åù„ÅÆ„Åü„ÇÅ„ÄÅÊú¨Ë®ò‰∫ã„Åß„ÅØË®ÄÂèä„Åó„Å™„ÅÑ„Åì„Å®„Å®„Åó„Åæ„Åôüôáüèª‚Äç Ë¶ÅÁ¥†                    Ë≤¨Âãô                                                              ÈÄÅ‰ø°ÂÖÉ„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ  „É™„ÇØ„Ç®„Çπ„Éà„ÇíÈÄÅ‰ø°„Åô„Çã„ÄÇ                                            ÂÆõÂÖà„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ    „É™„ÇØ„Ç®„Çπ„Éà„ÇíÂèó‰ø°„Åô„Çã„ÄÇ                                            „Çµ„Éº„Éì„Çπ„É¨„Ç∏„Çπ„Éà„É™      ÂÆõÂÖà„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„ÅÆÂÆõÂÖàÊÉÖÂ†±„Çí‰øùÁÆ°„Åô„Çã„ÄÇ                        „É≠„Éº„Éâ„Éê„É©„É≥„Çµ„Éº        ÂÆõÂÖà„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„ÅÆ„Ç§„É≥„Çπ„Çø„É≥„Çπ„Å´„É≠„Éº„Éâ„Éê„É©„É≥„Ç∑„É≥„Ç∞„Åô„Çã„ÄÇ      ÂêçÂâçËß£Ê±∫                ÂÆõÂÖà„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„Å∏„ÅÆ„É™„ÇØ„Ç®„Çπ„ÉàÈÄÅ‰ø°ÊôÇ„Å´„ÄÅÂêçÂâçËß£Ê±∫ÂèØËÉΩ„Å´„Åô„Çã„ÄÇ „Çµ„Éº„Éì„Çπ„Éá„Ç£„Çπ„Ç´„Éê„É™„Éº„ÅÆ„Éë„Çø„Éº„É≥„Çµ„Éº„Éì„Çπ„Éá„Ç£„Çπ„Ç´„Éê„É™„Éº„ÅÆ„Éë„Çø„Éº„É≥„Å®„ÅØ„Çµ„Éº„Éì„Çπ„Éá„Ç£„Çπ„Ç´„Éê„É™„Éº„ÅÆÂÆüË£ÖÊñπÊ≥ï„Å´„ÅØ„ÅÑ„Åè„Å§„ÅãÁ®ÆÈ°û„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇIstio„ÅÆ„Çµ„Éº„Éì„Çπ„Éá„Ç£„Çπ„Ç´„Éê„É™„Éº„ÅØ„ÄÅ„Åì„ÅÆ„ÅÜ„Å°„ÅÆ„Çµ„Éº„Éê„Éº„Çµ„Ç§„Éâ„Éë„Çø„Éº„É≥„ÇíÂÆüË£Ö„Åó„Åü„ÇÇ„ÅÆ„Å´„Å™„Çä„Åæ„Åô„ÄÇ„Çµ„Éº„Éê„Éº„Çµ„Ç§„Éâ„Éë„Çø„Éº„É≥ÈÄÅ‰ø°ÂÖÉ„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„Åã„Çâ„ÄÅÂïè„ÅÑÂêà„Çè„Åõ„Å®„É≠„Éº„Éâ„Éê„É©„É≥„Ç∑„É≥„Ç∞„ÅÆË≤¨Âãô„ÅåÂàá„ÇäÈõ¢„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇÈÄÅ‰ø°ÂÖÉ„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„ÅØ„ÄÅ„É≠„Éº„Éâ„Éê„É©„É≥„Çµ„Éº„Å´„É™„ÇØ„Ç®„Çπ„Éà„ÇíÈÄÅ‰ø°„Åó„Åæ„Åô„ÄÇ„É≠„Éº„Éâ„Éê„É©„É≥„Çµ„Éº„ÅØ„ÄÅÂÆõÂÖà„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„ÅÆÂ†¥ÊâÄ„Çí„Çµ„Éº„Éì„Çπ„É¨„Ç∏„Çπ„Éà„É™„Å´Âïè„ÅÑÂêà„Çè„Åõ„ÄÅ„Åæ„Åü„É™„ÇØ„Ç®„Çπ„Éà„Çí„É≠„Éº„Éâ„Éê„É©„É≥„Ç∑„É≥„Ç∞„Åô„ÇãË≤¨Âãô„ÇíÊãÖ„Å£„Å¶„ÅÑ„Åæ„Åôüí™üèª(‰æã) Istio„ÄÅLinkerd„ÄÅCoreDNS„ÄÅAWS ALB„Å™„Å©Cloud Native Patterns: Designing change-tolerant software (English Edition)Pattern: Server-side service discovery„ÇØ„É©„Ç§„Ç¢„É≥„Éà„Çµ„Ç§„Éâ„Éë„Çø„Éº„É≥ÈÄö‰ø°„ÅÆÈÄÅ‰ø°ÂÖÉ„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„ÅØ„ÄÅÂÆõÂÖà„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„ÅÆÂ†¥ÊâÄ„Çí„Çµ„Éº„Éì„Çπ„É¨„Ç∏„Çπ„Éà„É™„Å´Âïè„ÅÑÂêà„Çè„Åõ„ÄÅ„Åï„Çâ„Å´„É≠„Éº„Éâ„Éê„É©„É≥„Ç∑„É≥„Ç∞„Åô„ÇãË≤¨Âãô„ÇíÊãÖ„ÅÑ„Åæ„Åô„ÄÇ(‰æã) Netflix„ÅÆEureka„ÄÅkube-proxy„Å™„Å©Cloud Native Patterns: Designing change-tolerant software (English Edition)Pattern: Client-side service discoveryService Discovery in Kubernetes: Combining the Best of Two Worlds03. Istio„ÅÆ„Çµ„Éº„Éì„Çπ„Éá„Ç£„Çπ„Ç´„Éê„É™„Éº„ÅÆ‰ªïÁµÑ„ÅøIstio„ÅåÂÆüË£Ö„Åô„Çã„Çµ„Éº„Éì„Çπ„É°„ÉÉ„Ç∑„É•„Å´„ÅØ„ÄÅ„Çµ„Ç§„Éâ„Ç´„Éº„Éó„É≠„Ç≠„Ç∑„É°„ÉÉ„Ç∑„É•„Å®„Ç¢„É≥„Éì„Ç®„É≥„Éà„É°„ÉÉ„Ç∑„É•„Åå„ÅÇ„Çä„ÄÅ‰ªäÂõû„ÅØ„Çµ„Ç§„Éâ„Ç´„Éº„Éó„É≠„Ç≠„Ç∑„É°„ÉÉ„Ç∑„É•„ÅÆ„Çµ„Éº„Éì„Çπ„Éá„Ç£„Çπ„Ç´„Éê„É™„Éº„ÇíÂèñ„Çä‰∏ä„Åí„Åæ„Åô„ÄÇIstio„ÅÆ„Çµ„Éº„Éì„Çπ„Éá„Ç£„Çπ„Ç´„Éê„É™„Éº„ÅØ„ÄÅdiscovery„Ç≥„É≥„ÉÜ„Éä„Å®istio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅåËª∏„Å®„Å™„Çä„ÄÅ„Çµ„Éº„Éê„Éº„Çµ„Ç§„Éâ„Éë„Çø„Éº„É≥„ÅÆ„Çµ„Éº„Éì„Çπ„Éá„Ç£„Çπ„Ç´„Éê„É™„Éº„ÇíÂÆüË£Ö„Åó„Åæ„Åô„ÄÇÂÖ®‰ΩìÂÉè(1) „Äú (6) „ÅÆÂÖ®‰ΩìÂÉè„ÅØ„ÄÅ‰ª•‰∏ã„ÅÆÈÄö„Çä„Åß„Åôüëáistio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅØ„ÄÅ„Çµ„Éº„Éì„Çπ„É¨„Ç∏„Çπ„Éà„É™„Å∏„ÅÆÂïè„ÅÑÂêà„Çè„Åõ„Å®„ÄÅ„É≠„Éº„Éâ„Éê„É©„É≥„Ç∑„É≥„Ç∞„Åô„ÇãË≤¨Âãô„ÇíÊãÖ„Å£„Å¶„ÅÑ„Çã„Åì„Å®„Å´Ê≥®ÁõÆ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ(1) kube-apiserver„Å´„Çà„ÇãÂÆõÂÖàÊÉÖÂ†±‰øùÁÆ°kube-apiserver„ÅØ„ÄÅPodÁ≠â„ÅÆÂÆõÂÖàÊÉÖÂ†±„ÇíetcdÁ≠â„Å´‰øùÁÆ°„Åó„Åæ„Åô„ÄÇ„Åì„Çå„ÅØ„ÄÅKubernetes„ÅÆÈÄöÂ∏∏„ÅÆ‰ªïÁµÑ„Åø„Åß„Åô„ÄÇ(2) discovery„Ç≥„É≥„ÉÜ„Éä„Å´„Çà„ÇãÂÆõÂÖàÊÉÖÂ†±‰øùÁÆ°discovery„Ç≥„É≥„ÉÜ„Éä„ÅØ„ÄÅkube-apiserver„Åã„ÇâPodÁ≠â„ÅÆÂÆõÂÖàÊÉÖÂ†±„ÇíÂèñÂæó„Åó„ÄÅËá™Ë∫´„Å´‰øùÁÆ°„Åó„Åæ„Åô„ÄÇ(3) istio-proxy„Ç≥„É≥„ÉÜ„Éä„Å´„Çà„ÇãÂÆõÂÖàÊÉÖÂ†±ÂèñÂæóistio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅØ„ÄÅdiscovery„Ç≥„É≥„ÉÜ„Éä„Åã„ÇâPodÁ≠â„ÅÆÂÆõÂÖàÊÉÖÂ†±„ÇíÂèåÊñπÂêë„Çπ„Éà„É™„Éº„Éü„É≥„Ç∞RPC„ÅßÂèñÂæó„Åó„Åæ„Åô„ÄÇ(4) istio-proxy„Ç≥„É≥„ÉÜ„Éä„Å´„Çà„Çã„É™„ÇØ„Ç®„Çπ„ÉàÂèó‰ø°ÈÄÅ‰ø°ÂÖÉ„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„Åå„É™„ÇØ„Ç®„Çπ„Éà„ÇíÈÄÅ‰ø°„Åó„Åæ„Åô„ÄÇ„Çµ„Éº„Éê„Éº„Çµ„Ç§„Éâ„Éë„Çø„Éº„É≥„Åß„ÅÆË≤¨ÂãôÈÄö„Çä„ÄÅÈÄÅ‰ø°ÂÖÉ„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„ÅØ„É≠„Éº„Éâ„Éê„É©„É≥„Çµ„Éº („Åì„Åì„Åß„ÅØistio-proxy„Ç≥„É≥„ÉÜ„Éä) „Å´„É™„ÇØ„Ç®„Çπ„Éà„ÇíÈÄÅ‰ø°„Åó„Åæ„Åô„ÄÇ„Åì„ÅÆÊôÇ„ÄÅÈÄÅ‰ø°ÂÖÉ„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„Ååistio-proxy„Ç≥„É≥„ÉÜ„Éä„Å´Áõ¥Êé•ÁöÑ„Å´„É™„ÇØ„Ç®„Çπ„Éà„ÇíÈÄÅ‰ø°„Åó„Å¶„ÅÑ„Çã„Å®„ÅÑ„ÅÜ„Çà„Çä„ÅØ„ÄÅiptables„Ååistio-proxy„Ç≥„É≥„ÉÜ„Éä„Å´„É™„ÇØ„Ç®„Çπ„Éà„Çí„É™„ÉÄ„Ç§„É¨„ÇØ„Éà„Åó„Åæ„Åô„ÄÇistio-proxy„Ç≥„É≥„ÉÜ„Éä„Åì„Çå„ÇíÂèó‰ø°„Åó„Åæ„Åô„ÄÇ(5) istio-proxy„Ç≥„É≥„ÉÜ„Éä„Å´„Çà„Çã„É≠„Éº„Éâ„Éê„É©„É≥„Ç∑„É≥„Ç∞istio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅØ„ÄÅ„É™„ÇØ„Ç®„Çπ„Éà„Çí„É≠„Éº„Éâ„Éê„É©„É≥„Ç∑„É≥„Ç∞„Åó„ÄÅ„Åæ„ÅüÂÆõÂÖàPod„Å´ÈÄÅ‰ø°„Åó„Åæ„Åô„ÄÇIstio in ActionJimmy SongTech-ËµµÂåñÂÜ∞ÁöÑÂçöÂÆ¢ | Zhaohuabing Blogdiscovery„Ç≥„É≥„ÉÜ„Éä„ÅÆ‰ªïÁµÑ„ÅøÂÖ®‰ΩìÂÉè„ÅÆ‰∏≠„Åã„Çâ„ÄÅdiscovery„Ç≥„É≥„ÉÜ„Éä„ÇíË©≥„Åó„ÅèË¶ã„Å¶„Åø„Åæ„Åó„Çá„ÅÜ„ÄÇdiscovery„Ç≥„É≥„ÉÜ„Éä„ÅØ„ÄÅÂà•ÂêçIstiod„Å®Âëº„Å∞„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇXDS-API„Å®„ÅÑ„ÅÜ„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„ÇíÂÖ¨Èñã„Åó„Å¶„Åä„Çä„ÄÅXDS-API„ÅÆ„ÅÜ„Å°„ÄÅ„Çµ„Éº„Éì„Çπ„Éá„Ç£„Çπ„Ç´„Éê„É™„Éº„Å´Èñ¢‰øÇ„Åô„ÇãAPI„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Åß„Åô„ÄÇ‰ªäÂõû„ÅØË©≥„Åó„ÅèË®ÄÂèä„Åó„Åæ„Åõ„Çì„Åå„ÄÅistio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅåHTTPS„É™„ÇØ„Ç®„Çπ„Éà„ÇíÂá¶ÁêÜ„Åô„Çã„Åü„ÇÅ„Å´„ÄÅË®ºÊòéÊõ∏„ÇíÈÖçÂ∏É„Åô„Çã„Åü„ÇÅ„ÅÆSDS-API„ÇÇ„ÅÇ„Çä„Åæ„Åô„ÄÇ API„ÅÆÁ®ÆÈ°û  Ë™¨Êòé                                                   LDS-API    Envoy„ÅÆ„É™„Çπ„Éä„Éº„ÇíÂèñÂæó„Åß„Åç„Çã„ÄÇ                          RDS-API    Envoy„ÅÆ„É´„Éº„Éà„ÇíÂèñÂæó„Åß„Åç„Çã„ÄÇ                            CDS-API    Envoy„ÅÆ„ÇØ„É©„Çπ„Çø„Éº„ÇíÂèñÂæó„Åß„Åç„Çã„ÄÇ                        EDS-API    Envoy„ÅÆ„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„Åß„Åç„Çã„ÄÇ                          ADS-API    ÂêÑXDS-API„Åã„ÇâÂèñÂæó„Åß„Åç„ÇãÂÆõÂÖàÊÉÖÂ†±„ÇíÊï¥ÁêÜ„Åó„Å¶ÂèñÂæó„Åß„Åç„Çã„ÄÇ Istio in Action(1) kube-apiserver„Å´„Çà„ÇãÂÆõÂÖàÊÉÖÂ†±‰øùÁÆ°kube-apiserver„Å´„Çà„ÇãÂÆõÂÖàÊÉÖÂ†±‰øùÁÆ° „Å®Âêå„Åò„Åß„Åô„ÄÇ(2) discovery„Ç≥„É≥„ÉÜ„Éä„Å´„Çà„ÇãÂÆõÂÖàÊÉÖÂ†±‰øùÁÆ°discovery„Ç≥„É≥„ÉÜ„Éä„Å´„Çà„ÇãÂÆõÂÖàÊÉÖÂ†±‰øùÁÆ° „Å®Âêå„Åò„Åß„Åô„ÄÇ(3) istio-proxy„Ç≥„É≥„ÉÜ„Éä„Å´„Çà„ÇãÂÆõÂÖàÊÉÖÂ†±ÂèñÂæóXDS-API„Å®istio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅÆÈñì„Åß„ÅØ„ÄÅgRPC„ÅÆÂèåÊñπÂêë„Çπ„Éà„É™„Éº„Éü„É≥„Ç∞RPC„ÅÆÊé•Á∂ö„ÅåÁ¢∫Á´ã„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ„Åù„ÅÆ„Åü„ÇÅ„ÄÅistio-proxy„Ç≥„É≥„ÉÜ„Éä„Åã„Çâ„ÅÆ„É™„ÇØ„Ç®„Çπ„Éà„Å´Âøú„Åò„Å¶ÂÆõÂÖàÊÉÖÂ†±„ÇíËøîÂç¥„Åô„Çã„Å†„Åë„Åß„Å™„Åè„ÄÅ„É™„ÇØ„Ç®„Çπ„Éà„Åå„Å™„Åè„Å®„ÇÇ„ÄÅXDS-API„Åã„Çâ„ÇÇistio-proxy„Ç≥„É≥„ÉÜ„Éä„Å´ÂØæ„Åó„Å¶ÂÆõÂÖàÊÉÖÂ†±„ÇíÈÄÅ‰ø°„Åó„Åæ„Åô„ÄÇXDS-API„ÅÆ„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„Åå„ÅÑ„Åè„Å§„Åã„ÅÇ„Çä„ÄÅÂêÑ„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„Åã„ÇâÂÆõÂÖàÊÉÖÂ†±„ÇíÂèñÂæó„Åß„Åç„Åæ„Åô„ÄÇ‰∏ÄÊñπ„Åß„ÄÅÂêÑ„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„Åã„Çâ„Éê„É©„Éê„É©„Å´ÂÆõÂÖàÊÉÖÂ†±„ÇíÂèñÂæó„Åô„Çã„Å®„ÄÅEnvoy‰∏ä„Åß„Åì„Çå„ÇíÊï¥ÁêÜ„Åô„ÇãÊôÇ„Å´„ÄÅÂÆõÂÖàÊÉÖÂ†±„ÅÆ„Éê„Éº„Ç∏„Éß„É≥„ÅÆ‰∏çÊï¥Âêà„ÅåËµ∑„Åì„ÇãÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ„Åù„ÅÆ„Åü„ÇÅ„ÄÅIstio„ÅØÂÆüÈöõ„Å´„ÅØADS-API„Çí‰ΩøÁî®„Åó„Å¶ÂÆõÂÖàÊÉÖÂ†±„ÇíÂèñÂæó„Åó„Åæ„Åô„ÄÇistio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅÆ‰ªïÁµÑ„ÅøÂÖ®‰ΩìÂÉè„ÅÆ‰∏≠„Åã„Çâ„ÄÅistio-proxy„Ç≥„É≥„ÉÜ„Éä„ÇíË©≥„Åó„ÅèË¶ã„Å¶„Åø„Åæ„Åó„Çá„ÅÜ„ÄÇIstio in ActionJimmy SongTech-ËµµÂåñÂÜ∞ÁöÑÂçöÂÆ¢ | Zhaohuabing Blog(1) kube-apiserver„Å´„Çà„ÇãÂÆõÂÖàÊÉÖÂ†±‰øùÁÆ°kube-apiserver„Å´„Çà„ÇãÂÆõÂÖàÊÉÖÂ†±‰øùÁÆ° „Å®Âêå„Åò„Åß„Åô„ÄÇ(2) discovery„Ç≥„É≥„ÉÜ„Éä„Å´„Çà„ÇãÂÆõÂÖàÊÉÖÂ†±‰øùÁÆ°discovery„Ç≥„É≥„ÉÜ„Éä„Å´„Çà„ÇãÂÆõÂÖàÊÉÖÂ†±‰øùÁÆ° „Å®Âêå„Åò„Åß„Åô„ÄÇ(3) istio-proxy„Ç≥„É≥„ÉÜ„Éä„Å´„Çà„ÇãÂÆõÂÖàÊÉÖÂ†±ÂèñÂæóistio-proxy„Ç≥„É≥„ÉÜ„Éä„Åß„ÅØ„ÄÅpilot-agent„Å®Envoy„ÅåÁ®ºÂÉç„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇÂÖà„Åª„Å©istio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅØ„ÄÅÂèåÊñπÂêë„Çπ„Éà„É™„Éº„Éü„É≥„Ç∞RPC„ÅßADS-API„Åã„ÇâÂÆõÂÖàÊÉÖÂ†±„ÇíÂèñÂæó„Åô„Çã„Å®Ë™¨Êòé„Åó„Åæ„Åó„Åü„ÄÇÂé≥ÂØÜ„Å´„ÅØEnvoy„Åå„ÄÅpilot-agent„Çí‰ªã„Åó„Å¶„ÄÅADS-API„Åã„ÇâÂèåÊñπÂêë„Çπ„Éà„É™„Éº„Éü„É≥„Ç∞RPC„ÅßÂÆõÂÖàÊÉÖÂ†±„ÇíÂèñÂæó„Åó„Åæ„Åô„ÄÇ(4) istio-proxy„Ç≥„É≥„ÉÜ„Éä„Å´„Çà„Çã„É™„ÇØ„Ç®„Çπ„ÉàÂèó‰ø°istio-proxy„Ç≥„É≥„ÉÜ„Éä„Å´„Çà„Çã„É™„ÇØ„Ç®„Çπ„ÉàÂèó‰ø° „Å®Âêå„Åò„Åß„Åô„ÄÇ(5) istio-proxy„Ç≥„É≥„ÉÜ„Éä„Å´„Çà„Çã„É™„ÇØ„Ç®„Çπ„ÉàÂèó‰ø°Envoy„ÅØADS-API„Åã„ÇâÂèñÂæó„Åó„ÅüÂÆõÂÖàÊÉÖÂ†±„Å´Âü∫„Å•„ÅÑ„Å¶„ÄÅÂÆõÂÖà„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„ÅÆ„Ç§„É≥„Çπ„Çø„É≥„Çπ„Å´„É≠„Éº„Éâ„Éê„É©„É≥„Ç∑„É≥„Ç∞„Åó„Åæ„Åô„ÄÇ04. istio-proxy„Ç≥„É≥„ÉÜ„ÉäÂÜÖ„ÅÆEnvoy„ÅÆ‰ªïÁµÑ„ÅøÂÖ®‰ΩìÂÉèEnvoy„ÅåADS-API„Åã„ÇâÂèñÂæó„Åó„ÅüÂÆõÂÖàÊÉÖÂ†±„ÇíË¶ã„Å¶„ÅÑ„ÅèÂâç„Å´„ÄÅEnvoy„ÅÆÂá¶ÁêÜ„ÅÆÊµÅ„Çå„ÇíËß£Ë™¨„Åó„Åæ„Åô„ÄÇistio-proxy„Ç≥„É≥„ÉÜ„ÉäÂÜÖ„ÅÆEnvoy„Åß„ÅØ„ÄÅ‰ª•‰∏ã„ÅÆ‰ªïÁµÑ„Åø„ÅßHTTP„É™„ÇØ„Ç®„Çπ„Éà„ÇíÂá¶ÁêÜ„Åó„Åæ„Åô„ÄÇ(1) „Äú (6) „ÅÆÂÖ®‰ΩìÂÉè„ÅØ„ÄÅ‰ª•‰∏ã„ÅÆÈÄö„Çä„Åß„ÅôüëáIstio in Action (English Edition)Istio: Up and Running: Using a Service Mesh to Connect, Secure, Control, and ObserveArchitecture Analysis of Istio: The Most Popular Service Mesh Project - Alibaba Cloud Community(1) ÈÄÅ‰ø°ÂÖÉ„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„Åã„Çâ„É™„ÇØ„Ç®„Çπ„ÉàÂèó‰ø°istio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅØ„ÄÅÈÄÅ‰ø°ÂÖÉ„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„Åã„Çâ„É™„ÇØ„Ç®„Çπ„Éà„ÇíÂèó‰ø°„Åó„Åæ„Åô„ÄÇ(2) Envoy„Å´„Çà„Çã„É™„Çπ„Éä„ÉºÈÅ∏ÊäûEnvoy„ÅØ„ÄÅ„É™„ÇØ„Ç®„Çπ„Éà„ÅÆÂÆõÂÖàÊÉÖÂ†± (‰æãÔºöÂÆõÂÖàIP„Ç¢„Éâ„É¨„Çπ„ÄÅ„Éù„Éº„ÉàÁï™Âè∑„ÄÅ„Éë„Çπ„ÄÅ„Éõ„Çπ„Éà„Å™„Å©) „Å´Âøú„Åò„Å¶„É™„Çπ„Éä„Éº„ÇíÈÅ∏„Å≥„Åæ„Åô„ÄÇ(3) Envoy„Å´„Çà„Çã„É´„Éº„ÉàÈÅ∏ÊäûEnvoy„ÅØ„ÄÅ„É™„Çπ„Éä„Éº„Å´Á¥ê„Å•„Åè„É´„Éº„Éà„ÇíÈÅ∏„Å≥„Åæ„Åô„ÄÇ‚ñ∂ TCP„É™„ÇØ„Ç®„Çπ„Éà„ÇíÂá¶ÁêÜ„Åô„ÇãÂ†¥Âêà„Å´„Å§„ÅÑ„Å¶Debugging Your Debugging Tools: What to do When Your Service Mesh Goes Down | PPT(4) Envoy„Å´„Çà„Çã„ÇØ„É©„Çπ„Çø„ÉºÈÅ∏ÊäûEnvoy„ÅØ„ÄÅ„ÇØ„É©„Çπ„Çø„Éº„Å´Á¥ê„Å•„Åè„ÇØ„É©„Çπ„Çø„Éº„ÇíÈÅ∏„Å≥„Åæ„Åô„ÄÇ(5) Envoy„Å´„Çà„Çã„Ç®„É≥„Éâ„Éù„Ç§„É≥„ÉàÈÅ∏ÊäûEnvoy„ÅØ„ÄÅ„ÇØ„É©„Çπ„Çø„Éº„Å´Á¥ê„Å•„Åè„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„ÇíÈÅ∏„Å≥„Åæ„Åô„ÄÇ(6) ÂÆõÂÖà„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„Å∏„ÅÆ„É™„ÇØ„Ç®„Çπ„ÉàÈÄÅ‰ø°Envoy„ÅØ„ÄÅ„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„Å´ÂØæÂøú„Åô„Çã„Ç§„É≥„Çπ„Çø„É≥„Çπ„Å´„É™„ÇØ„Ç®„Çπ„Éà„ÇíÈÄÅ‰ø°„Åó„Åæ„Åô„ÄÇEnvoy„ÅßÁ¢∫Ë™ç„Åó„ÅüÂÆõÂÖàÊÉÖÂ†±„ÇíüëÜ„Å´ÂΩì„Å¶„ÅØ„ÇÅ„Å¶Ë¶ã„Å¶„ÅÑ„Åè„Åì„Å®„Å´„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇEnvoy„ÅåADS-API„Åã„ÇâÂèñÂæó„Åó„ÅüÂÆõÂÖàÊÉÖÂ†±„ÇíË¶ã„Å¶„Åø„Çà„ÅÜconfig_dump„Ç®„É≥„Éâ„Éù„Ç§„É≥„ÉàÂÆüÈöõ„Å´Envoy„Å´ÁôªÈå≤„Åï„Çå„Å¶„ÅÑ„ÇãÂÆõÂÖàÊÉÖÂ†±„ÅØ„ÄÅistio-proxy„Ç≥„É≥„ÉÜ„ÉäËá™‰Ωì„ÅÆlocalhost:15000/config_dump„Åã„ÇâJSONÂΩ¢Âºè„ÅßÂèñÂæó„Åß„Åç„Åæ„Åô„ÄÇ„ÇÇ„Åó„ÅäÊâãÂÖÉ„Å´Istio„Åå„ÅÇ„ÇãÂ†¥Âêà„ÅØ„ÄÅEnvoy„Å´„Å©„Çì„Å™ÂÆõÂÖàÊÉÖÂ†±„ÅåÁôªÈå≤„Åï„Çå„Å¶„ÅÑ„Çã„Åã„ÄÅEnvoy„ÇíÂÜíÈô∫„Åó„Å¶„Åø„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ$ kubectl exec \\    -it foo-pod \\    -n foo-namespace \\    -c istio-proxy \\    -- bash -c \"curl http://localhost:15000/config_dump\" | yq -P‚ñ∂ ÂÆõÂÖàÊÉÖÂ†±„ÇíË¶ã„ÇÑ„Åô„Åè„Åô„Çãyq„Ç≥„Éû„É≥„Éâ„Å´„Å§„ÅÑ„Å¶yq„Ç≥„Éû„É≥„Éâ„ÅßYAML„Å´Â§âÊèõ„Åô„Çã„Å®Ë¶ã„ÇÑ„Åô„Åè„Å™„Çä„Åæ„Åôüëç„É™„Çπ„Éä„Éº‚ñº Á¢∫Ë™çÊñπÊ≥ïistio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅåADS-API„Åã„ÇâÂèñÂæó„Åó„Åü„É™„Çπ„Éä„Éº„ÅØ„ÄÅ/config_dump?resource={dynamic_listeners}„Åã„ÇâÁ¢∫Ë™ç„Åß„Åç„Åæ„Åô„ÄÇ„Åì„Åì„Åß„ÅØ„ÄÅfoo-podÂÜÖ„Åßbar-pod„ÅÆ„É™„Çπ„Éä„Éº„ÇíÁ¢∫Ë™ç„Åó„Åü„Å®‰ªÆÂÆö„Åó„Åæ„Åô„ÄÇ$ kubectl exec \\    -it foo-pod \\    -n foo-namespace \\    -c istio-proxy \\    -- bash -c \"curl http://localhost:15000/config_dump?resource={dynamic_listeners}\" | yq -P‚ñº ÁµêÊûú‰ª•‰∏ã„ÇíÁ¢∫Ë™ç„Åß„Åç„Åæ„Åó„Åü„ÄÇÂÆõÂÖàIP„Ç¢„Éâ„É¨„Çπ„ÇÑÂÆõÂÖà„Éù„Éº„ÉàÁï™Âè∑„Å´Âøú„Åò„Å¶„É™„Çπ„Éä„Éº„ÇíÈÅ∏„Åπ„Çã„Çà„ÅÜ„Å´„Å™„Å£„Å¶„Åä„Çä„ÄÅ„Åì„Åì„Åß„ÅØ\u003c‰ªªÊÑè„ÅÆIP„Ç¢„Éâ„É¨„Çπ\u003e:50002„ÄÇ„É™„Çπ„Éä„Éº„Å´Á¥ê„Å•„Åè„É´„Éº„Éà„ÅÆÂêçÂâçconfigs:  - \"@type\": type.googleapis.com/envoy.admin.v3.ListenersConfigDump.DynamicListener    # „É™„Çπ„Éä„ÉºÂêç    name: 0.0.0.0_50002    active_state:      version_info: 2022-11-24T12:13:05Z/468      listener:        \"@type\": type.googleapis.com/envoy.config.listener.v3.Listener        name: 0.0.0.0_50002        address:          socket_address:            # Âèó‰ø°„Åó„Åü„Éë„Ç±„ÉÉ„Éà„ÅÆ„ÅÜ„Å°„Åß„ÄÅÂÆõÂÖàIP„Ç¢„Éâ„É¨„Çπ„Åß„Éï„Ç£„É´„Çø„É™„É≥„Ç∞            address: 0.0.0.0            # Âèó‰ø°„Åó„Åü„Éë„Ç±„ÉÉ„Éà„ÅÆ„ÅÜ„Å°„Åß„ÄÅÂÆõÂÖà„Éù„Éº„ÉàÁï™Âè∑„Åß„Éï„Ç£„É´„Çø„É™„É≥„Ç∞            port_value: 50002        filter_chains:          - filter_chain_match:              transport_protocol: raw_buffer              application_protocols:                - http/1.1                - h2c            filters:              - name: envoy.filters.network.http_connection_manager                typed_config:                  \"@type\": type.googleapis.com/envoy.extensions.filters.network.http_connection_manager.v3.HttpConnectionManager                  stat_prefix: outbound_0.0.0.0_50001                  rds:                    config_source:                      ads: {}                      initial_fetch_timeout: 0s                      resource_api_version: V3                    # Êú¨„É™„Çπ„Éä„Éº„Å´Á¥ê„Å•„Åè„É´„Éº„Éà„ÅÆÂêçÂâç                    route_config_name: 50002  ...  - \"@type\": type.googleapis.com/envoy.admin.v3.ListenersConfigDump.DynamicListener  ...Administration interface ‚Äî envoy 1.32.0-dev-bfa0e0 documentationConfigDump (proto) ‚Äî envoy 1.32.0-dev-bfa0e0 documentation„É´„Éº„Éà‚ñº Á¢∫Ë™çÊñπÊ≥ïistio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅåADS-API„Åã„ÇâÂèñÂæó„Åó„Åü„É™„Çπ„Éä„Éº„ÅØ„ÄÅ/config_dump?resource={dynamic_route_configs}„Åã„ÇâÁ¢∫Ë™ç„Åß„Åç„Åæ„Åô„ÄÇ„Åì„Åì„Åß„ÅØ„ÄÅfoo-podÂÜÖ„Åßbar-pod„ÅÆ„É´„Éº„Éà„ÇíÁ¢∫Ë™ç„Åó„Åü„Å®‰ªÆÂÆö„Åó„Åæ„Åô„ÄÇ$ kubectl exec \\    -it foo-pod \\    -n foo-namespace \\    -c istio-proxy \\    -- bash -c \"curl http://localhost:15000/config_dump?resource={dynamic_route_configs}\" | yq -P‚ñº ÁµêÊûú„Ç≥„Éû„É≥„Éâ„ÇíÂÆüË°å„Åô„Çã„Å®YAML„ÇíÂèñÂæó„Åß„Åç„ÄÅ‰ª•‰∏ã„ÇíÁ¢∫Ë™ç„Åß„Åç„Åæ„Åó„Åü„ÄÇ„É™„Çπ„Éä„Éº„ÇíÂèñÂæó„Åó„ÅüÊôÇ„Å´Á¢∫Ë™ç„Åß„Åç„Åü„É´„Éº„Éà„ÅÆÂêçÂâç„É™„ÇØ„Ç®„Çπ„Éà„ÅÆ„Éë„Çπ„ÇÑHost„Éò„ÉÉ„ÉÄ„Éº„Å´Âøú„Åò„Å¶„É´„Éº„Éà„ÇíÈÅ∏„Åπ„Çã„Çà„ÅÜ„Å´„Å™„Å£„Å¶„ÅÑ„Çã„É´„Éº„Éà„Å´Á¥ê„Å•„Åè„ÇØ„É©„Çπ„Çø„Éº„ÅÆÂêçÂâçconfigs:  - \"@type\": type.googleapis.com/envoy.admin.v3.RoutesConfigDump.DynamicRouteConfig    version_info: 2022-11-24T12:13:05Z/468    route_config:      \"@type\": type.googleapis.com/envoy.config.route.v3.RouteConfiguration      # „É´„Éº„Éà„ÅÆÂêçÂâç      name: 50002      virtual_hosts:        - name: bar-service.bar-namespace.svc.cluster.local:50002          # „Éõ„Çπ„Éà„Éô„Éº„Çπ„É´„Éº„ÉÜ„Ç£„É≥„Ç∞          domains:            - bar-service.bar-namespace.svc.cluster.local            - bar-service.bar-namespace.svc.cluster.local:50002            - bar-service            - bar-service:50002            - bar-service.bar-namespace.svc            - bar-service.bar-namespace.svc:50002            - bar-service.bar-namespace            - bar-service.bar-namespace:50002            - 172.16.0.2            - 172.16.0.2:50002          routes:            - match:                # „Éë„Çπ„Éô„Éº„Çπ„É´„Éº„ÉÜ„Ç£„É≥„Ç∞                prefix: /              route:                # Êú¨„É´„Éº„Éà„Å´Á¥ê„Å•„Åè„ÇØ„É©„Çπ„Çø„Éº„ÅÆÂêçÂâç                cluster: outbound|50002|v1|bar-service.bar-namespace.svc.cluster.local                timeout: 0s                retry_policy:                  retry_on: connect-failure,refused-stream,unavailable,cancelled,retriable-status-codes                  num_retries: 2                  retry_host_predicate:                    - name: envoy.retry_host_predicates.previous_hosts                  host_selection_retry_max_attempts: \"5\"                  retriable_status_codes:                    - 503                max_stream_duration:                  max_stream_duration: 0s                  grpc_timeout_header_max: 0s              decorator:                operation: bar-service.bar-namespace.svc.cluster.local:50002/*  ...  - '@type': type.googleapis.com/envoy.admin.v3.RoutesConfigDump.DynamicRouteConfig  ...Administration interface ‚Äî envoy 1.32.0-dev-bfa0e0 documentationConfigDump (proto) ‚Äî envoy 1.32.0-dev-bfa0e0 documentation„ÇØ„É©„Çπ„Çø„Éº‚ñº Á¢∫Ë™çÊñπÊ≥ïistio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅåADS-API„Åã„ÇâÂèñÂæó„Åó„Åü„ÇØ„É©„Çπ„Çø„Éº„ÅØ„ÄÅ/config_dump?resource={dynamic_active_clusters}„Åã„ÇâÁ¢∫Ë™ç„Åß„Åç„Åæ„Åô„ÄÇ„Åì„Åì„Åß„ÅØ„ÄÅfoo-podÂÜÖ„Åßbar-pod„ÅÆ„ÇØ„É©„Çπ„Çø„Éº„ÇíÁ¢∫Ë™ç„Åó„Åü„Å®‰ªÆÂÆö„Åó„Åæ„Åô„ÄÇ$ kubectl exec \\    -it foo-pod \\    -n foo-namespace \\    -c istio-proxy \\    -- bash -c \"curl http://localhost:15000/config_dump?resource={dynamic_active_clusters}\" | yq -P‚ñº ÁµêÊûú„Ç≥„Éû„É≥„Éâ„ÇíÂÆüË°å„Åô„Çã„Å®YAML„ÇíÂèñÂæó„Åß„Åç„ÄÅ‰ª•‰∏ã„ÇíÁ¢∫Ë™ç„Åß„Åç„Åæ„Åó„Åü„ÄÇ„É´„Éº„Éà„ÇíÂèñÂæó„Åó„ÅüÊôÇ„Å´Á¢∫Ë™ç„Åß„Åç„Åü„ÇØ„É©„Çπ„Çø„Éº„ÅÆÂêçÂâç„ÇØ„É©„Çπ„Çø„Éº„Å´Á¥ê„Å•„Åè„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„ÅÆË¶™Âêçconfigs:  - \"@type\": type.googleapis.com/envoy.admin.v3.ClustersConfigDump.DynamicCluster    version_info: 2022-11-24T12:13:05Z/468    cluster:      \"@type\": type.googleapis.com/envoy.config.cluster.v3.Cluster      # „ÇØ„É©„Çπ„Çø„Éº„ÅÆÂêçÂâç      name: outbound|50002|v1|bar-service.bar-namespace.svc.cluster.local      type: EDS      eds_cluster_config:        eds_config:          ads: {}          initial_fetch_timeout: 0s          resource_api_version: V3        # Êú¨„ÇØ„É©„Çπ„Çø„Éº„Å´Á¥ê„Å•„Åè„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„ÅÆË¶™Âêç        service_name: outbound|50002|v1|bar-service.bar-namespace.svc.cluster.local  ...  - \"@type\": type.googleapis.com/envoy.admin.v3.ClustersConfigDump.DynamicCluster  ...Administration interface ‚Äî envoy 1.32.0-dev-bfa0e0 documentationConfigDump (proto) ‚Äî envoy 1.32.0-dev-bfa0e0 documentation„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà‚ñº Á¢∫Ë™çÊñπÊ≥ïistio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅåADS-API„Åã„ÇâÂèñÂæó„Åó„Åü„ÇØ„É©„Çπ„Çø„Éº„ÅØ„ÄÅ/config_dump?include_eds„Åã„ÇâÁ¢∫Ë™ç„Åß„Åç„Åæ„Åô„ÄÇ„Åì„Åì„Åß„ÅØ„ÄÅfoo-podÂÜÖ„Åßbar-pod„ÅÆ„ÇØ„É©„Çπ„Çø„Éº„ÇíÁ¢∫Ë™ç„Åó„Åü„Å®‰ªÆÂÆö„Åó„Åæ„Åô„ÄÇ$ kubectl exec \\    -it foo-pod \\    -n foo-namespace \\    -c istio-proxy \\    -- bash -c \"curl http://localhost:15000/config_dump?include_eds\" | yq -P‚ñº ÁµêÊûú„Ç≥„Éû„É≥„Éâ„ÇíÂÆüË°å„Åô„Çã„Å®YAML„ÇíÂèñÂæó„Åß„Åç„ÄÅ‰ª•‰∏ã„ÇíÁ¢∫Ë™ç„Åß„Åç„Åæ„Åó„Åü„ÄÇ„ÇØ„É©„Çπ„Çø„Éº„ÇíÂèñÂæó„Åó„ÅüÊôÇ„Å´Á¢∫Ë™ç„Åß„Åç„Åü„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„ÅÆË¶™Âêçbar-pod„ÅÆ„Ç§„É≥„Çπ„Çø„É≥„Çπ„Åå3ÂÄã„ÅÇ„Çã„Åü„ÇÅ„ÄÅ3ÂÄã„ÅÆ„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„Åå„ÅÇ„Çä„Åæ„Åôconfigs:  dynamic_endpoint_configs:    - endpoint_config:        \"@type\": type.googleapis.com/envoy.config.endpoint.v3.ClusterLoadAssignment        # „Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„ÅÆË¶™Âêç        cluster_name: outbound|50002|v1|bar-service.bar-namespace.svc.cluster.local        endpoints:          - locality:              region: ap-northeast-1              zone: ap-northeast-1a            lb_endpoints:              - endpoint:                  address:                    socket_address:                      # ÂÜóÈï∑Âåñ„Åï„Çå„Åübar-pod„ÅÆIP„Ç¢„Éâ„É¨„Çπ                      address: 11.0.0.1                      # bar-podÂÜÖ„ÅÆ„Ç≥„É≥„ÉÜ„Éä„ÅåÂæÖ„Å°Âèó„Åë„Å¶„ÅÑ„Çã„Éù„Éº„ÉàÁï™Âè∑                      port_value: 50002                  health_check_config: {}                health_status: HEALTHY                metadata:                  filter_metadata:                    istio:                      workload: bar                    envoy.transport_socket_match:                      tlsMode: istio                # „É≠„Éº„Éâ„Éê„É©„É≥„Ç∑„É≥„Ç∞„Ç¢„É´„Ç¥„É™„Ç∫„É†„ÇíÊ±∫„ÇÅ„ÇãÊï∞ÂÄ§                load_balancing_weight: 1          - locality:              region: ap-northeast-1              zone: ap-northeast-1d            lb_endpoints:              - endpoint:                  address:                    socket_address:                      # ÂÜóÈï∑Âåñ„Åï„Çå„Åübar-pod„ÅÆIP„Ç¢„Éâ„É¨„Çπ                      address: 11.0.0.2                      # bar-podÂÜÖ„ÅÆ„Ç≥„É≥„ÉÜ„Éä„ÅåÂæÖ„Å°Âèó„Åë„Å¶„ÅÑ„Çã„Éù„Éº„ÉàÁï™Âè∑                      port_value: 50002                  health_check_config: {}                health_status: HEALTHY                metadata:                  filter_metadata:                    istio:                      workload: bar                    envoy.transport_socket_match:                      tlsMode: istio                # „É≠„Éº„Éâ„Éê„É©„É≥„Ç∑„É≥„Ç∞„Ç¢„É´„Ç¥„É™„Ç∫„É†„ÇíÊ±∫„ÇÅ„ÇãÊï∞ÂÄ§                load_balancing_weight: 1          - locality:              region: ap-northeast-1              zone: ap-northeast-1d            lb_endpoints:              - endpoint:                  address:                    socket_address:                      # ÂÜóÈï∑Âåñ„Åï„Çå„Åübar-pod„ÅÆIP„Ç¢„Éâ„É¨„Çπ                      address: 11.0.0.3                      # bar-podÂÜÖ„ÅÆ„Ç≥„É≥„ÉÜ„Éä„ÅåÂæÖ„Å°Âèó„Åë„Å¶„ÅÑ„Çã„Éù„Éº„ÉàÁï™Âè∑                      port_value: 50002                  health_check_config: {}                health_status: HEALTHY                metadata:                  filter_metadata:                    istio:                      workload: bar                    envoy.transport_socket_match:                      tlsMode: istio                # „É≠„Éº„Éâ„Éê„É©„É≥„Ç∑„É≥„Ç∞„Ç¢„É´„Ç¥„É™„Ç∫„É†„ÇíÊ±∫„ÇÅ„ÇãÊï∞ÂÄ§                load_balancing_weight: 1        policy:          overprovisioning_factor: 140    ...    - endpoint_config:    ...Administration interface ‚Äî envoy 1.32.0-dev-bfa0e0 documentationConfigDump (proto) ‚Äî envoy 1.32.0-dev-bfa0e0 documentation‚ñ∂ Envoy„ÅÆË≤†Ëç∑ÂàÜÊï£ÊñπÂºè„Å´„Å§„ÅÑ„Å¶load_balancing_weight„Ç≠„ÉºÂÄ§„ÅåÁ≠â„Åó„ÅÑÂ†¥Âêà„ÄÅEnvoy„ÅØP2C„Ç¢„É´„Ç¥„É™„Ç∫„É†„Å´Âü∫„Å•„ÅÑ„Å¶„É≠„Éº„Éâ„Éê„É©„É≥„Ç∑„É≥„Ç∞„Åó„Åæ„ÅôüëçEnvoy„ÅÆÂá¶ÁêÜ„ÅÆÊµÅ„Çå„ÅÆ„Åæ„Å®„ÇÅÁ¢∫Ë™ç„Åß„Åç„ÅüÂÆõÂÖàÊÉÖÂ†±„Çí„ÄÅEnvoy„ÅÆÂá¶ÁêÜ„ÅÆÊµÅ„Çå„Å´ÂΩì„Å¶„ÅØ„ÇÅ„Å¶„Åø„Åæ„Åó„Åü„ÄÇ(1) ÈÄÅ‰ø°ÂÖÉ„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„Åã„Çâ„É™„ÇØ„Ç®„Çπ„ÉàÂèó‰ø°ÈÄÅ‰ø°ÂÖÉ„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„ÅØ„ÄÅÂÆõÂÖà„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ (\u003c‰ªªÊÑè„ÅÆIP\u003e/:50002) „Å´„É™„ÇØ„Ç®„Çπ„Éà„ÇíÈÄÅ‰ø°„Åó„Åæ„Åô„ÄÇ„Çµ„Ç§„Éâ„Ç´„Éº„Ç≥„É≥„ÉÜ„Éä„ÅÆistio-proxy„Ç≥„É≥„ÉÜ„Éä„ÅØ„Åì„Çå„ÇíÂèó‰ø°„Åó„Åæ„Åô„ÄÇ(2) Envoy„Å´„Çà„Çã„É™„Çπ„Éä„ÉºÈÅ∏ÊäûEnvoy„ÅØ„ÄÅ„É™„ÇØ„Ç®„Çπ„Éà„ÅÆÂÆõÂÖà (IP„Ç¢„Éâ„É¨„Çπ„ÄÅ„Éù„Éº„ÉàÁï™Âè∑„ÄÅ„Éë„Çπ) „Åã„ÇâPod„ÅÆ„É™„Çπ„Éä„Éº (0.0.0.0_50002) „ÇíÈÅ∏„Å≥„Åæ„Åô„ÄÇ(3) Envoy„Å´„Çà„Çã„É´„Éº„ÉàÈÅ∏ÊäûEnvoy„ÅØ„ÄÅ„É™„Çπ„Éä„Éº„Å´Á¥ê„Å•„ÅèPod„ÅÆ„É´„Éº„Éà (50002) „ÇíÈÅ∏„Å≥„Åæ„Åô„ÄÇ(4) Envoy„Å´„Çà„Çã„ÇØ„É©„Çπ„Çø„ÉºÈÅ∏ÊäûEnvoy„ÅØ„ÄÅ„ÇØ„É©„Çπ„Çø„Éº„Å´Á¥ê„Å•„ÅèPod„ÅÆ„ÇØ„É©„Çπ„Çø„Éº (outbound|50002|v1|bar-service.bar-namespace.svc.cluster.local) „ÇíÈÅ∏„Å≥„Åæ„Åô„ÄÇ(5) Envoy„Å´„Çà„Çã„ÇØ„É©„Çπ„Çø„ÉºÈÅ∏ÊäûEnvoy„ÅØ„ÄÅ„ÇØ„É©„Çπ„Çø„Éº„Å´Á¥ê„Å•„ÅèPod„ÅÆ„Ç§„É≥„Çπ„Çø„É≥„Çπ„ÅÆ„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà (11.0.0.X/:50002) „ÇíÈÅ∏„Å≥„Åæ„Åô„ÄÇ(6) ÂÆõÂÖà„Éû„Ç§„ÇØ„É≠„Çµ„Éº„Éì„Çπ„Å∏„ÅÆ„É™„ÇØ„Ç®„Çπ„ÉàÈÄÅ‰ø°Envoy„ÅØ„ÄÅ„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„ÅÆÂÆõÂÖà„Å´Pod„ÅÆ„É™„ÇØ„Ç®„Çπ„Éà„ÇíÈÄÅ‰ø°„Åó„Åæ„Åô„ÄÇ„Çµ„Éº„Éì„Çπ„Éá„Ç£„Çπ„Ç´„Éê„É™„Éº„ÅÆÂÜíÈô∫„ÅØ‰ª•‰∏ä„Åß„Åô‚õµ05. „Åä„Çè„Çä„Å´Istio„ÅÆÊ©üËÉΩ„ÅÆ1„Å§„Åß„ÅÇ„Çã„Äé„Çµ„Éº„Éì„Çπ„Éá„Ç£„Çπ„Ç´„Éê„É™„Éº„Äè„ÅÆ‰ªïÁµÑ„Åø„Çí„ÄÅEnvoy„Çí‰∫§„Åà„Å™„Åå„Çâ„ÇÇ„Çä„ÇÇ„ÇäÂ∏ÉÊïô„Åó„Åæ„Åó„Åü„ÄÇÊÑõ„ÅåÊ∫¢„Çå„Å¶„Åó„Åæ„ÅÑ„Åæ„Åó„Åü„ÄÇIstio„ÅÆÊ©üËÉΩ„Çí1„Å§„Å®„Å£„Å¶„ÇÇ„ÄÅË§áÈõë„Å™‰ªïÁµÑ„Åø„ÅßÂÆüÁèæ„Åó„Å¶„ÅÑ„Çã„Åì„Å®„Åå„ÅäÂàÜ„Åã„Çä„ÅÑ„Åü„Å†„Åë„Åü„Åã„Å®ÊÄù„ÅÑ„Åæ„Åô„ÄÇIstio„ÅÇ„Çä„Åå„Å®„ÅÜüôèüôèüôèË¨ùËæû3-shake SRE Tech Talk „Åß„ÅÆÁô∫Ë°®ÂâçÂæå„Å´„ÄÅ‰ª•‰∏ã„ÅÆÊñπ„ÄÖ„Å´Áô∫Ë°®ÂÜÖÂÆπ„Å´„Å§„ÅÑ„Å¶Âä©Ë®Ä„Çí„ÅÑ„Åü„Å†„Åç„Åæ„Åó„Åü„ÄÇ@ido_kara_deru „Åï„Çì@yosshi_ „Åï„Çì@yteraoka „Åï„Çì(„Ç¢„É´„Éï„Ç°„Éô„ÉÉ„ÉàÈ†Ü)„Åæ„Åü„ÄÅ‰ªäÂõû„ÅÆ 3-shake Advent Calender 2022 „ÅØ„ÄÅ‰ª•‰∏ã„ÅÆÊñπ„ÄÖ„Å´‰ºÅÁîª„ÅÑ„Åü„Å†„Åç„Åæ„Åó„Åü„ÄÇ@jigyakkuma_ „Åï„Çì@nwiizo „Åï„Çì(„Ç¢„É´„Éï„Ç°„Éô„ÉÉ„ÉàÈ†Ü)ÁöÜÊßò„Å´ÊÑüË¨ùÁî≥„Åó‰∏ä„Åí„Åæ„Åôüôáüèª‚ÄçË®ò‰∫ãÈñ¢ÈÄ£„ÅÆ„Åä„Åô„Åô„ÇÅÊõ∏Á±çIstio in Action (English Edition)‰ΩúËÄÖ:Posta, Christian E.,Maloku, RinorManningAmazonIstio: Up and Running: Using a Service Mesh to Connect, Secure, Control, and Observe‰ΩúËÄÖ:Calcote, Lee,Butcher, ZackO'ReillyAmazon","isoDate":"2022-12-24T21:00:00.000Z","dateMiliSeconds":1671915600000,"authorName":"Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π","authorId":"hiroki-hasegawa"},{"title":"‚õµÔ∏è Istio„ÅÆ„Çµ„Éº„Éì„ÇπÈñìÈÄö‰ø°„ÇíÂÆüÁèæ„Åô„Çã„Çµ„Éº„Éì„Çπ„Éá„Ç£„Çπ„Ç´„Éê„É™„Éº„ÅÆ‰ªïÁµÑ„Åø","link":"https://speakerdeck.com/hiroki_hasegawa/istioniyorusahisuteisukaharinoshi-zu-mi","contentSnippet":"„Äé3-shake SRE Tech Talk„Äè„ÅÆÁôªÂ£áË≥áÊñô„Åß„Åô\r\rIstio„ÅÆ„Çµ„Éº„Éì„Çπ„Éá„Ç£„Çπ„Ç´„Éê„É™„Éº„ÅÆ‰ªïÁµÑ„Åø„Å´„Å§„ÅÑ„Å¶„ÄÅEnvoy„Çí‰∫§„Åà„Å™„Åå„ÇâËß£Ë™¨„Åó„Åæ„Åó„Åü„ÄÇ\r\r„Çπ„É©„Ç§„Éâ„Åß„ÅØ‰ªïÁµÑ„Åø„ÅÆË©≥Á¥∞„ÇíËß£Ë™¨„Åß„Åç„Åæ„Åõ„Çì„Åß„Åó„Åü„ÅÆ„Åß„ÄÅ„Åú„Å≤ÂÖÉË®ò‰∫ã (Istio„ÅÆ„Çµ„Éº„Éì„ÇπÈñìÈÄö‰ø°„ÇíÂÆüÁèæ„Åô„Çã„Çµ„Éº„Éì„Çπ„Éá„Ç£„Çπ„Ç´„Éê„É™„Éº„ÅÆ‰ªïÁµÑ„Åø) „ÇÇÂèÇÁÖß„Åè„Å†„Åï„ÅÑüëç\r\rüê¶ „ÉÑ„Ç§„Éº„ÉàÔºöhttps://x.com/Hiroki__IT/status/1603344099368570880","isoDate":"2022-12-15T05:00:00.000Z","dateMiliSeconds":1671080400000,"authorName":"Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π","authorId":"hiroki-hasegawa"},{"title":"„ÄêIstio‚õµÔ∏è„Äë\"3-shake SRE Tech Talk\" „Å´ÁôªÂ£á","link":"https://hiroki-hasegawa.hatenablog.jp/entry/2022/12/15/025523","contentSnippet":"Áô∫Ë°®„Çπ„É©„Ç§„Éâ„Åã„ÇâÂæó„Çâ„Çå„ÇãÁü•Ë≠òÁô∫Ë°®„Çπ„É©„Ç§„Éâ„ÇíË¶ã„Çã„Å®„ÄÅ‰ª•‰∏ã„Çí \"ÂÆåÂÖ®„Å´ÁêÜËß£\" „Åß„Åç„Åæ„Åô‚úåÔ∏èIstio„ÅÆ„Çµ„Éº„Éì„Çπ„Éá„Ç£„Çπ„Ç´„Éê„É™„Éº„ÅÆ‰ªïÁµÑ„Åø„Å´„Å§„ÅÑ„Å¶Áô∫Ë°®„Çπ„É©„Ç§„Éâ„Åã„ÇâÂæó„Çâ„Çå„ÇãÁü•Ë≠ò„Ç§„Éô„É≥„ÉàÂêçÁô∫Ë°®„Çπ„É©„Ç§„Éâ„Ç§„Éô„É≥„ÉàÂêç„Ç™„ÉÉ„ÇπÔºÅ„Ç™„É©Èï∑Ë∞∑Â∑ùÔºÅ‚úãüèª„ÄéIstio„ÅÆ„Çµ„Éº„Éì„ÇπÈñìÈÄö‰ø°„ÇíÂÆüÁèæ„Åô„Çã„Çµ„Éº„Éì„Çπ„Éá„Ç£„Çπ„Ç´„Éê„É™„Éº„ÅÆ‰ªïÁµÑ„Åø„Äè„Å¶„ÅÑ„ÅÜ„ÉÜ„Éº„Éû„Åß„ÄÅ 3-shake SRE Tech Talk „Å´ÁôªÂ£á„Åó„Åü„ÅûÔºÅhttps://3-shake.connpass.com/event/267080/Áô∫Ë°®„Çπ„É©„Ç§„Éâ„Åø„Çì„Å™ÔºÅ„Çπ„É©„Ç§„Éâ„Åú„Å£„Å¶„ÅáË¶ã„Å¶„Åè„Çå„Çà„Å™ÔºÅÊú¨Êó•„ÅÆÁô∫Ë°®Ë≥áÊñô„Åß„ÅôÔºÅ‚õµÔ∏è#SRETThttps://t.co/0MKMYVa77u‚Äî Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π (Âú∞‰∏ãÂº∑Âà∂Âä¥ÂÉçËÄÖ) (@Hiroki__IT) December 15, 2022 „Å°„Å™„ÄÅÁô∫Ë°®ÂÜÖÂÆπ„ÅÆË©≥Á¥∞„ÅØ„Åì„ÅÆË®ò‰∫ã„Çí„Åø„Å¶„Åè„Çå„Çà„Å™ÔºÅ","isoDate":"2022-12-15T03:00:00.000Z","dateMiliSeconds":1671073200000,"authorName":"Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π","authorId":"hiroki-hasegawa"},{"title":"üîç ÂèØË¶≥Ê∏¨ÊÄß„Å´ÂÖ•ÈñÄ„Åó„Çà„ÅÜ","link":"https://speakerdeck.com/hiroki_hasegawa/ke-guan-ce-xing-niru-men-siyou","contentSnippet":"Á§æÂÜÖLT„Å´„Å¶„ÄÅÂèØË¶≥Ê∏¨ÊÄß„ÇíÂ∏ÉÊïô„Åó„Çà„ÅÜ„Å®Ë©¶„Åø„Åæ„Åó„Åü ï‚óîœñ‚óî î\r\rÈñ¢ÈÄ£„ÉÜ„Éº„ÉûÔºàSRE„Å´ÂÖ•ÈñÄ„Åó„Çà„ÅÜÔºâÔºö\rhttps://speakerdeck.com/hiroki_hasegawa/sreniru-men-siyou","isoDate":"2021-10-22T04:00:00.000Z","dateMiliSeconds":1634875200000,"authorName":"Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π","authorId":"hiroki-hasegawa"},{"title":"üèóÔ∏è „Éâ„É°„Ç§„É≥ÈßÜÂãïË®≠Ë®à„Å®‰æùÂ≠òÊÄßÈÄÜËª¢„ÅÆÂéüÂâá","link":"https://speakerdeck.com/hiroki_hasegawa/domeinqu-dong-she-ji-toyi-cun-xing-ni-zhuan-falseyuan-ze","contentSnippet":"Á§æÂÜÖLT„Å´„Å¶„ÄÅ„Éâ„É°„Ç§„É≥ÈßÜÂãïË®≠Ë®à„Å®‰æùÂ≠òÊÄßÈÄÜËª¢„ÅÆÂéüÂâá„ÇíÂ∏ÉÊïô„Åó„Åæ„Åó„Åü ï‚óîœñ‚óî î\r\r„ÅØ„Å¶„Å™„Éñ„ÉÉ„ÇØ„Éû„Éº„ÇØ„ÅÆ„Ç≥„É°„É≥„Éà„ÇÇ„Å©„ÅÜ„ÅûÔºÅ\r\r„Å™„Åä„ÄÅ„Éâ„É°„Ç§„É≥ÈßÜÂãïË®≠Ë®à„ÇíÁêÜËß£„Åô„Çã„Åü„ÇÅ„Å´„ÅØ„ÄÅ‰æùÂ≠ò„Å´„Å§„ÅÑ„Å¶„ÇÇÁü•„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ\r\rÊòØÈùû„ÄÅ‰æùÂ≠òÈñ¢‰øÇ„Å®‰æùÂ≠ò„Ç™„Éñ„Ç∏„Çß„ÇØ„ÉàÊ≥®ÂÖ•„ÇÇ„ÅîÂèÇÁÖß„Åè„Å†„Åï„ÅÑüëçüèª","isoDate":"2021-08-06T04:00:00.000Z","dateMiliSeconds":1628222400000,"authorName":"Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π","authorId":"hiroki-hasegawa"},{"title":"ü§ùüèª ‰æùÂ≠òÈñ¢‰øÇ„Å®‰æùÂ≠ò„Ç™„Éñ„Ç∏„Çß„ÇØ„ÉàÊ≥®ÂÖ•","link":"https://speakerdeck.com/hiroki_hasegawa/yi-cun-guan-xi-toyi-cun-obuziekutozhu-ru","contentSnippet":"Á§æÂÜÖLT„Å´„Å¶„ÄÅ‰æùÂ≠òÈñ¢‰øÇ„Å®‰æùÂ≠ò„Ç™„Éñ„Ç∏„Çß„ÇØ„ÉàÊ≥®ÂÖ•„ÇíÂ∏ÉÊïô„Åó„Çà„ÅÜ„Å®Ë©¶„Åø„Åæ„Åó„Åü ï‚óîœñ‚óî î\r\rÈñ¢ÈÄ£„ÉÜ„Éº„ÉûÔºà„Éâ„É°„Ç§„É≥ÈßÜÂãïË®≠Ë®à„Å®‰æùÂ≠òÊÄßÈÄÜËª¢„ÅÆÂéüÂâáÔºâÔºö\rhttps://speakerdeck.com/hiroki_hasegawa/domeinqu-dong-she-ji-toyi-cun-xing-ni-zhuan-falseyuan-ze","isoDate":"2021-06-25T04:00:00.000Z","dateMiliSeconds":1624593600000,"authorName":"Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π","authorId":"hiroki-hasegawa"},{"title":"üê≠ Go„Å´ÂÖ•ÈñÄ„Åó„Çà„ÅÜ","link":"https://speakerdeck.com/hiroki_hasegawa/goniru-men-siyou","contentSnippet":"Á§æÂÜÖLT„Å´„Å¶„ÄÅGo„ÇíÂ∏ÉÊïô„Åó„Çà„ÅÜ„Å®Ë©¶„Åø„Åæ„Åó„Åü ï‚óîœñ‚óî î","isoDate":"2021-05-27T04:00:00.000Z","dateMiliSeconds":1622088000000,"authorName":"Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π","authorId":"hiroki-hasegawa"},{"title":"‚ôæÔ∏è SRE„Å´ÂÖ•ÈñÄ„Åó„Çà„ÅÜ","link":"https://speakerdeck.com/hiroki_hasegawa/sreniru-men-siyou","contentSnippet":"Á§æÂÜÖLT„Å´„Å¶„ÄÅSREÁî®Ë™û„ÇíÂ∏ÉÊïô„Åó„Çà„ÅÜ„Å®Ë©¶„Åø„Åæ„Åó„Åü ï‚óîœñ‚óî î","isoDate":"2021-05-07T04:00:00.000Z","dateMiliSeconds":1620360000000,"authorName":"Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π","authorId":"hiroki-hasegawa"},{"title":"üê≠ LambdaÈñ¢Êï∞„ÇíGo„ÅßÂÆüË£Ö„Åó„Å¶„Åø„ÅüË©±","link":"https://speakerdeck.com/hiroki_hasegawa/lambdaguan-shu-wogodeshi-zhuang-sitemitahua","contentSnippet":"Á§æÂÜÖLT„Å´„Å¶„ÄÅGo„ÇíÂ∏ÉÊïô„Åó„Çà„ÅÜ„Å®Ë©¶„Åø„Åæ„Åó„Åü ï‚óîœñ‚óî î","isoDate":"2021-03-26T04:00:00.000Z","dateMiliSeconds":1616731200000,"authorName":"Èï∑Ë∞∑Â∑ù Â∫ÉÊ®π","authorId":"hiroki-hasegawa"}]},"__N_SSG":true},"page":"/members/[id]","query":{"id":"hiroki-hasegawa"},"buildId":"A15k4OyZ31AG-4RRHRo6F","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>