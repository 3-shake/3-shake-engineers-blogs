<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="icon shortcut" type="image/png" href="https://blog.3-shake.com//logo.png"/><link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;500;700&amp;family=Roboto:wght@300;400;500;700&amp;display=swap" rel="stylesheet"/><title>skikkh | 3-shake Engineers&#x27; Blogs</title><meta property="og:title" content="skikkh"/><meta property="og:url" content="https://blog.3-shake.com//members/skikkh"/><meta name="twitter:card" content="summary_large_image"/><meta property="og:site" content="3-shake Engineers&#x27; Blogs"/><meta property="og:image" content="https://blog.3-shake.com//og.png"/><link rel="canonical" href="https://blog.3-shake.com//members/skikkh"/><link rel="preload" href="/_next/static/css/f1bef31af337ade93f2e.css" as="style"/><link rel="stylesheet" href="/_next/static/css/f1bef31af337ade93f2e.css" data-n-g=""/><noscript data-n-css="true"></noscript><link rel="preload" href="/_next/static/chunks/main-8a83f0fd99327c4684a8.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.1daf1ec1ecf144ee9147.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.9e003f150a446b53bdd9.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-7b618a3f94d3d1fc38ed.js" as="script"/><link rel="preload" href="/_next/static/chunks/81b50c7ab23905e464b4340eb234bd6ea389d26b.11690c1c506f2f27e9a5.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/members/%5Bid%5D-82bdc617ad4a0fa06a9e.js" as="script"/></head><body><div id="__next"><header class="site-header"><div class="content-wrapper"><div class="site-header__inner"><a class="site-header__logo-link" href="/"><img src="/logo.svg" alt="3-shake Engineers&#x27; Blogs" class="site-header__logo-img"/><span class="site-header__logo-text">3-shake<br/>Engineers&#x27; Blogs</span></a><div class="site-header__links"><a href="https://3-shake.com/category/recruit/" class="site-header__link">Recruit</a><a href="https://3-shake.com/" class="site-header__link">Company</a></div></div></div></header><section class="member"><div class="content-wrapper"><header class="member-header"><div class="member-header__avatar"><img src="/avatars/skikkh.jpeg" alt="skikkh" width="100" height="100" class="member-header__avatar-img"/></div><h1 class="member-header__name">skikkh</h1><p class="member-header__bio">skikkh</p><div class="member-header__links"><a href="https://twitter.com/skikkh" class="member-header__link"><img src="/icons/twitter.svg" alt="Twitterのユーザー@skikkh" width="22" height="22"/></a><a href="https://github.com/skikkh" class="member-header__link"><img src="/icons/github.svg" alt="GitHubのユーザー@skikkh" width="22" height="22"/></a></div></header><div class="member-posts-container"><div class="post-list"><article class="post-link"><a class="post-link__author" href="/members/skikkh"><img src="/avatars/skikkh.jpeg" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">skikkh</div><time dateTime="2018-12-17T14:21:33.000Z" class="post-link__date">3 years ago</time></div></a><a href="https://qiita.com/skikkh/items/c59de1f5e188d0bbeb35" class="post-link__main-link"><h2 class="post-link__title">kubernetesにあるIngress Controller�の一覧を挙げてみる</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=qiita.com" width="14" height="14" class="post-link__site-favicon"/>qiita.com</div></a></article><article class="post-link"><a class="post-link__author" href="/members/skikkh"><img src="/avatars/skikkh.jpeg" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">skikkh</div><time dateTime="2018-09-30T09:33:37.000Z" class="post-link__date">4 years ago</time></div></a><a href="https://qiita.com/skikkh/items/ca236c512d314691b35c" class="post-link__main-link"><h2 class="post-link__title">ローカル環境でAnsibleの鍵交換がめんどくさい貴方に送るプラクティス</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=qiita.com" width="14" height="14" class="post-link__site-favicon"/>qiita.com</div></a></article><article class="post-link"><a class="post-link__author" href="/members/skikkh"><img src="/avatars/skikkh.jpeg" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">skikkh</div><time dateTime="2018-08-29T14:34:09.000Z" class="post-link__date">4 years ago</time></div></a><a href="https://qiita.com/skikkh/items/156c677e07ffc6b5b4ef" class="post-link__main-link"><h2 class="post-link__title">新人が学ぶAnsibleもくもく会 ネットワーク編 報告会</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=qiita.com" width="14" height="14" class="post-link__site-favicon"/>qiita.com</div></a></article><article class="post-link"><a class="post-link__author" href="/members/skikkh"><img src="/avatars/skikkh.jpeg" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">skikkh</div><time dateTime="2018-07-04T12:26:12.000Z" class="post-link__date">4 years ago</time></div></a><a href="https://qiita.com/skikkh/items/07c050a4cf62443d0a38" class="post-link__main-link"><h2 class="post-link__title">My Autohotkey Config</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=qiita.com" width="14" height="14" class="post-link__site-favicon"/>qiita.com</div></a></article><article class="post-link"><a class="post-link__author" href="/members/skikkh"><img src="/avatars/skikkh.jpeg" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">skikkh</div><time dateTime="2018-06-30T03:53:47.000Z" class="post-link__date">4 years ago</time></div></a><a href="https://qiita.com/skikkh/items/ec9395dda2127b62efa8" class="post-link__main-link"><h2 class="post-link__title">Vue.jsメモ（用語まとめ）</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=qiita.com" width="14" height="14" class="post-link__site-favicon"/>qiita.com</div></a></article><article class="post-link"><a class="post-link__author" href="/members/skikkh"><img src="/avatars/skikkh.jpeg" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">skikkh</div><time dateTime="2018-01-05T06:24:33.000Z" class="post-link__date">4 years ago</time></div></a><a href="https://qiita.com/skikkh/items/bb4234c56b1c9a623d7b" class="post-link__main-link"><h2 class="post-link__title">仮想通貨のポテンシャルをpythonでまとめて取得してみた</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=qiita.com" width="14" height="14" class="post-link__site-favicon"/>qiita.com</div></a></article><article class="post-link"><a class="post-link__author" href="/members/skikkh"><img src="/avatars/skikkh.jpeg" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">skikkh</div><time dateTime="2017-12-24T13:23:01.000Z" class="post-link__date">4 years ago</time></div></a><a href="https://qiita.com/skikkh/items/707e8a5def368a69e9a6" class="post-link__main-link"><h2 class="post-link__title">VScodeで快適LaTeX環境を構築する方法</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=qiita.com" width="14" height="14" class="post-link__site-favicon"/>qiita.com</div></a></article><article class="post-link"><a class="post-link__author" href="/members/skikkh"><img src="/avatars/skikkh.jpeg" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">skikkh</div><time dateTime="2017-12-23T17:28:07.000Z" class="post-link__date">4 years ago</time></div></a><a href="https://qiita.com/skikkh/items/171bde40a8dece3b2ec1" class="post-link__main-link"><h2 class="post-link__title">GPUに全く縁のない素人がCPUマイニングを構築してみた</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=qiita.com" width="14" height="14" class="post-link__site-favicon"/>qiita.com</div></a></article></div></div></div></section><footer class="site-footer"><div class="content-wrapper"><p>© <!-- -->3-shake Inc.</p></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"member":{"id":"skikkh","name":"skikkh","role":"SRE","bio":"skikkh","avatarSrc":"/avatars/skikkh.jpeg","sources":["https://qiita.com/skikkh/feed"],"includeUrlRegex":"","twitterUsername":"skikkh","githubUsername":"skikkh","websiteUrl":""},"postItems":[{"title":"kubernetesにあるIngress Controller�の一覧を挙げてみる","contentSnippet":"はじめにIngress ControllerはL7 Load Balancerの機能を果たすものであり、Ingressリソースはそのルールを定義したものです。このIngress Controllerを実際に実装したものは数多作られており、環境によって、大なり小なり記述方法が違ったり、特性が違ったりしています。そんな中で、本日はそれぞれのIngress ControllerをIntroできればと思います。 1Ingress Controllerskubernetes/ingress-nginxとnginxinc/kubernetes-ingress with NGINXNginxを利用したIngressには2つの種類があります。Kubernetes Community管理のkubernets/ingress-nginxとNGINX社とそのCommunityが管理するnginxinc/kubernetes-ingressです。下記にそれぞれの違いを挙げています。正確な情報としてはDifferences Between nginxinc/kubernetes-ingress and kubernetes/ingress-nginx Ingress Controllersを参照ください。特徴kubernetes/ingress-nginxnginxinc/kubernetes-ingress with NGINXnginxinc/kubernetes-ingress with NGINX Plus基本機能作者Kubernetes communityNGINX Inc and communityNGINX Inc and communityNGINバージョンCustom NGINX build that includes several third-party modulesNGINX official mainline buildNGINX Plus商用サポートN/AN/A含まれているLB設定同一ホストに複数のIngressルールをマージする利用可利用可利用可HTTP load balancing extensions - Annotationssupported annotationsを参照supported annotationsを参照supported annotationsを参照HTTP load balancing extensions -- ConfigMapsupported ConfigMap keysを参照supported ConfigMap keysを参照supported ConfigMap keysを参照TCP/UDPConfigMap経由ネイティブのNGINX設定によるConfigMap経由ネイティブのNGINX設定によるConfigMap経由Websocket利用可annotation経由で利用可annotation経由で利用可TCP SSLパススルーConfigMap経由で利用可利用不可利用不可JWT validation利用不可利用不可利用可セッション管理サードパーティモジュール経由で利用可利用不可利用可Configurationテンプレートtemplateを参照templatesを参照templatesを参照デプロイCommand-line引数argumentsを参照argumentsを参照argumentsを参照デフォルトサーバの為のTLS証明書と鍵command-line引数(必要に応じて)/ 自動生成command-line引数(必要に応じて)command-line引数(必要に応じて)Helmチャート利用可利用可利用可運用拡張ステータスサードパーティのモジュール経由利用不可利用可エンドポイントの動的再設定(設定の再リロードはしない)サードパーティのLuaモジュールによって利用可利用不可利用可ContourContourはEnvoyをデプロイするすることによって動作するIngress Controllerです。Traefikと同様に動的なコンフィギュレーションの更新をサポートしているのが特徴の一つかなと思います。また、Custom Resource Definition（CRD）によって新たに実装されたIngress API（IngressRoute）も利用することで既存のIngress APIの機能を拡張しているなどの特徴があります。その他の特徴として、WebSocket対応ヘルスチェック5種類のLB algorithm(RoundRobin, WeightedLeastRequest, RingHash, Maglev, Ramdom)また、IngressRouteの特徴としては以下のような感じになります。namespaceのVirtual hostsとTLS証明書の設定可否を制限する機能パスorドメインルーティングを別のnamespaceに委譲機能単一のルート内での複数のServiceの受け入れとトラフィックの負荷分散annotationなしでのServiceの重み付けとロードバランシング作成時のIngressRouteのバリデーションと作成後のステータスレポート標準のIngressとの比較は次のようになります。そこまで大きな記述差はないと言った印象です。ingress.yamlapiVersion: extensions/v1beta1kind: Ingressmetadata:  name: basicspec:  rules:  - host: foo-basic.bar.com    http:      paths:      - backend:          serviceName: s1          servicePort: 80ingressroute.yamlapiVersion: contour.heptio.com/v1beta1kind: IngressRoutemetadata:  name: basicspec:  virtualhost:    fqdn: foo-basic.bar.com  routes:    - match: /      services:        - name: s1          port: 80TraefikTraefikはContainous社が手掛けるHTTPリバースプロキシ/ロードバランサで、Docker Swarm、kubernetesやMarathonなどのオーケストレータに組み込むことができます。他のIngressと違い、Circuit breakersやWeb UIを備えていたりします。ちなみに、2018/12/11に、エンタープライズ版であるTraefikEEがpublic beta版として登場したようです。TraefikEEのクラスタ化において、TraefikEEはkubernetesのetcdのクラスタ化に使用される分散合意アルゴリズムであるRaftを使用しているそうです。これによって、TLS証明書と設定を安全に管理し、複製することができます。こちらはOSS版よりもより、HAや鍵の分散管理など分散アーキテクチャを強化しており、可用性やスケーラビリティ、安全性を確保するのに特化したみたいです。^TraefikEEではdata planeとcontrol planeでノードを管理するみたいですね。Istioのデジャヴを何か感じます。。。TraefikではDeployment若しくはDeamonSetにて、デプロイすることができます。以下にそのサンプルを上げておきます。traefik-deployment.yaml---apiVersion: v1kind: ServiceAccountmetadata:  name: traefik-ingress-controller  namespace: kube-system---kind: DeploymentapiVersion: extensions/v1beta1metadata:  name: traefik-ingress-controller  namespace: kube-system  labels:    k8s-app: traefik-ingress-lbspec:  replicas: 1  selector:    matchLabels:      k8s-app: traefik-ingress-lb  template:    metadata:      labels:        k8s-app: traefik-ingress-lb        name: traefik-ingress-lb    spec:      serviceAccountName: traefik-ingress-controller      terminationGracePeriodSeconds: 60      containers:      - image: traefik        name: traefik-ingress-lb        ports:        - name: http          containerPort: 80        - name: admin          containerPort: 8080        args:        - --api        - --kubernetes        - --logLevel=INFO---kind: ServiceapiVersion: v1metadata:  name: traefik-ingress-service  namespace: kube-systemspec:  selector:    k8s-app: traefik-ingress-lb  ports:    - protocol: TCP      port: 80      name: web    - protocol: TCP      port: 8080      name: admin  type: NodePortDeploymentからデプロイする代わりに、以下のように入力することで、stable/traefikのHelmチャートを利用することができます。helm install stable/traefikOther Controllers上記に挙げなかったIngress Controllerを以下に列挙します。F5 BIG-IP Controller for Kubernetesロードバランサの老舗であるF5のIngress Controller。サイトにある特徴を以下に列挙します。動的にBIG-IPオブジェクトの作成、管理、削除ができるNodePortもしくはClusterIPを経由で、BIG-IPデバイスからKubernetesクラスタにトラフィックを転送するF5 iAppsのサポートkubernetesによって作られたF5特有のVirtualServerオブジェクトを処理するF5特有の拡張機能の使用で、標準Kubernetes Ingressを処理する詳しくはF5 BIG-IP Controller for Kubernetesをご参照ください。Kong Ingress Controllerfor KubernetesKongの特徴を以下に挙げます。Kongの設定にIngressの使用ロードバランスしとアクティブ＆パッシブヘルスチェックのサポートリクエストがサービスにプロキシされる際に、カスタムコードを実行するプラグインを使用することで、リクエスト/レスポンスを即座に変更可能認証プラグインを使用してのサービス保護CRDを使用するKongの設定と宣言的なKongの管理詳しくはGithubのレポジトリKong/kubernetes-ingress-controllerをご参照ください。nghttpx Ingress ControllerZLab様によるzlabjp/nghttpx-ingress-lbはHTTP/2に対応したIngress ControllerでNginx Ingress Controllerをベースとして作られています。HAProxy多機能なプロキシサーバとして有名なHAProxyをIngress Controllerとして利用したのが、jcmoraisjr/haproxy-ingressになります。GKEGKEでは専用のIngress Controllerが既にデプロイされている為、省略。おわりにきれいにまとめることができませんでしたが、皆様の新たな情報収集としてお役に立てればと思います。何かご指摘あればコメントにてよろしくお願いします。今年も残りわずか、メリクリスマス。参考文献IngressTraefik DocumentationDifferences Between nginxinc/kubernetes-ingress and kubernetes/ingress-nginx Ingress Controllers[Kubernetes] オンプレでも GKE Like な Ingress を使うために 自作 Ingress Controller を実装してみたドキュメント量的に、時間を取らなかった事を大いに反省しています。 ↩","link":"https://qiita.com/skikkh/items/c59de1f5e188d0bbeb35","isoDate":"2018-12-17T14:21:33.000Z","dateMiliSeconds":1545056493000,"authorName":"skikkh","authorId":"skikkh"},{"title":"ローカル環境でAnsibleの鍵交換がめんどくさい貴方に送るプラクティス","contentSnippet":"はじめに平成の時分も終わりに近づく中、野分立ち尽くす天災に人々は翻弄され、お家で過ごすのを余儀なくされる日が多いように思います。1今日のような一日は、自然とQiitaにたどり着き、PVが増えるのではないかと勝手に邪推する筆者です。さて、話は閑話休題。ローカル環境で、仮想マシン立ててAnsible環境作る際に、コントロールノードからターゲットノードにSSHの鍵交換をすると思うのですが、ターゲットノードが多い際の交換を一つ一つssh-copy-idしていくのは甚だ煩わしいこととお感じではないでしょうか。はじめに鍵交換をしてしまえば、後はLet's Ansible2するだけなのですが、めんどくさがりの権化である私はどうもこの作業すら億劫になります。ローカルマシンで冗長構成のWebサーバなんてのを作って遊んでをするときは最初が兎にも角にもめんどくさい。環境構築こそ、一番ラクに終わらせて後はInfrastructure as Code(IaC)していくのが本分なのではないでしょうか。EnvironmentmacOS Mojave 10.14Vagrant 2.1.5VartualBox 5.2.16 r123759 (Qt5.6.3)CentOS7のbox(今回はVagrant Cloudのgeerlingguy/centos7を使用)※ご自身の環境に合わせて事前に用意をして下さい仮想環境を立てる今回の例では、10台のノードをVagrantで立てます。その際、1台をコントロールノード、残り9台をコントロールノードとして使用します。任意のディレクトリ下でinitをしましょう。$ vagrant init geerlingguy/centos7作成したディレクトリにVagrantfileが作成されるので、下記のように記述して下さい。参考URL：Vagrant CloudVagrantfileVagrant.configure(\"2\") do |config|  config.ssh.insert_key = false  config.vm.box = \"geerlingguy/centos7\"  N = 10  (1..N).each do |node_id|    config.vm.define \"node#{node_id}\" do |server|      server.vm.hostname = \"server#{node_id}\"      server.vm.network \"private_network\", ip: \"192.168.200.#{10+node_id}\"    end  endend上記のVagrantfileでは、192.168.200.0のプライベートネットワークに連番で、192.168.200.11から192.168.200.20のIPがそれぞれのノードに振られます。また、同様にそれぞれのSSHする際のノード名はnode1:10、machinehostnameはserver1:10という名前が割り当てられます。参考URL：Loop Over VM Definitions次に、boxを登録した後、vagrant upします。この例では、事前にvagrant box addはする必要がなく、vagrant initした際にboxをpullします。# 全てのノードを起動する$ vagrant up# コントロールノード(node1)に接続$ vagrant ssh node1コントロールノードの設定expectで全てのノードに送る# ansivbleｒとexepctをnode1にインストールしておく[vagrant@server1 ~]$ sudo yum -y install ansible expect仮想マシンが10台起動した後、node1からnode2:10を操作する場合、全てに鍵を送らないといけません。expectを使用することで、それぞれのIPアドレスに対する対話形式のコマンドラインを全て変数で渡して処理することができます。#!/bin/shexport LANG=Cpw=\"vagrant\"for i in `seq 12 20`do    expect -c \"    set timeout 5    spawn ssh-copy-id -o StrictHostKeyChecking=no -i $HOME/.ssh/id_rsa.pub 192.168.200.$i    expect \\\"password:\\\"    send \\\"${pw}\\n\\\"    expect \\\"$\\\"    exit 0    \"done詳しくは、@ine1127 様のLinuxの対話がめんどくさい?そんな時こそ自動化だ！-expect編-の記事をお読み下さい。鍵を作成後、シェルスクリプトを動かしてみましょう。成功していれば、Number of key(s) added: 1の記述がそれぞれのサーバに対して表示されるはずです。# 公開鍵を作成 （名前を変更した場合、適宜スクリプトの変更をする）[vagrant@server1 ~]$ ssh-keygen# 実行権限を与える[vagrant@server1 ~]$ chmod 755 copy_ssh_keys.sh[vagrant@server1 ~]$ ./copy_ssh_keys.shAnsibleの実行確認インベントリは連番であれば上記のように記載できます。inventory.ini[vm_nodes]192.168.200.[12:20]最後にAnsibleで意思疎通ができるかpingコマンドを送ってみましょう。$ ansible vm_nodes -i inventory.ini -m ping192.168.200.14 | SUCCESS =\u003e {    \"changed\": false,    \"ping\": \"pong\"}192.168.200.15 | SUCCESS =\u003e {    \"changed\": false,    \"ping\": \"pong\"}192.168.200.13 | SUCCESS =\u003e {    \"changed\": false,    \"ping\": \"pong\"}192.168.200.12 | SUCCESS =\u003e {    \"changed\": false,    \"ping\": \"pong\"}192.168.200.16 | SUCCESS =\u003e {    \"changed\": false,    \"ping\": \"pong\"}192.168.200.17 | SUCCESS =\u003e {    \"changed\": false,    \"ping\": \"pong\"}192.168.200.18 | SUCCESS =\u003e {    \"changed\": false,    \"ping\": \"pong\"}192.168.200.19 | SUCCESS =\u003e {    \"changed\": false,    \"ping\": \"pong\"}192.168.200.20 | SUCCESS =\u003e {    \"changed\": false,    \"ping\": \"pong\"}SUCCESSが返ってこれば成功です。おめでとうございます。おわりに私が思いついた方法として上記の例を取り上げましたが、もっといい方法があるのではないかと個人的に思っております。そういった意味でベストプラクティスではなくプラクティスというタイトルをつけさせていただきました。上記よりも適切な方法があるのでれば、コメントにて教えていただければ幸いでございます。最後までお読み頂きありがとうございました。被災された皆様に心よりお見舞い申し上げます。我が実家も同様に。 ↩なんとなく言ってみたかった。 ↩","link":"https://qiita.com/skikkh/items/ca236c512d314691b35c","isoDate":"2018-09-30T09:33:37.000Z","dateMiliSeconds":1538300017000,"authorName":"skikkh","authorId":"skikkh"},{"title":"新人が学ぶAnsibleもくもく会 ネットワーク編 報告会","contentSnippet":"はじめにお久しぶりのエントリになります。新卒でインフラエンジニアをしている小心者のひよこです。このような職種に身をおいてはや5ヶ月というところで、世の中を幅広く見渡してみると、どうやら世は大クラウド時代を嚆矢として、様々なレイヤーでの自動化、KubenetesによるMonolithからMicroservicesへの移行など大きな転換の潮流が生まれているようでした。GoogleのSREの成功もその一つですかね。1その流れの中、人生は得てしてめんどくさいという怠惰の海を漂流していた僕は、その行く末に構成管理ツールというユートピアを見つけ出し、Ansibleもくもく会に参加することなりました。（完）2閑話休題、本日は2018年8月28日に開催されたAnsibleもくもく会 （第5回）ネットワーク編のブログ報告という形で記事を書かせていただきたいと思います。今回は、技術的な内容に踏み込まず、勉強会の要旨として報告できればと存じます。また、前回のAnsibleもくもく会も参加しているということもあり、今回の勉強会との違いも少しながら含めながらお話できればと思います。TL;DREtherpadによる質問対応がよい有償版Red Hatサポートエンジニアの方の質問対応2つのネットワーク間のGREトンネル作成構成管理の学習できるad-hocなコマンドラインからPlaybook、Roleまでをワンストップで学習できるネットワークもくもく会演習の順序としては、アドホックコマンドによるターミナル上でAnsibleの実際の動作の確認Playbookを使用したバックアップ設定ファイルの作成PlaybookによるGREトンネルの作成DNSなどの追加のネットワーク設定実習4までで作成したPlaybookをロールに分けて実行という感じになっています。また、別途演習として、Towerのインストールから設定、Job Templateの作成と実行という演習が存在した。流れ的には前回のもくもく会と一緒であったが、アドホックモードからネットワークに関する設定が入っており、全体としてはやはりネットワーク管理者のようなエンジニア向けだった印象に感じました。Etherpadによる質問対応質問受付は直接のサポート以外にも―リモートの方は必然とですが―Ehterpadによる質問の受付を行っておりました。前回もですが、Etherpadの質問受付が盛り上がっており、今回は私も数点質問させていただきました。質問の内容はRed Hatの中村さんによるもくもく会備忘録を参照していただければと思います。下記に一部抜粋させていただきます。サポート体制今回わからなかったこと、気になったことは積極的に質問させていただきました。実際にRed Hatのサポートエンジニアをしている方々が答えてくれるということもあり、特に初学者にとっての助け舟という意味では凄くいい環境だと思いました。以下、私がした質問内容（他にもしたのですが、失念してしまいました。）Q. PLAY RECAPにてokとchangedが実行するたびに変わるのはなぜか？A. シェルモジュールとコマンド系は冪等性が担保されないGREの接続演習下記表のように独立した２つのネットワーク（172.16.0.0/16と172.17.0.0/16）をGREによるトンネル接続を構成管理によって自動化するという演習を行いました。ansibleコントロール用ホスト、ターゲット用ホスト、そしてCisco IOSのルータ2台という環境を予め整備した状態で、Ansibleを利用したネットワークの構成管理をワンストップで集中して学べるのはRed Hat主催のもくもく会に参加してならではの学びだったように思いました。音楽と社長提供のおやつ流れる音楽が凄く心地よく、大変リラックスした状態で取り組むことができました。快適空間での集中力の高まりがすごかったのでもしよかったらなんの音楽か今度教えて下さい。また、僕はRed Hat社長提供のお菓子を貪り付きながらモクモク作業をしていました。まとめ前回はTowerのインストールまでいかなかったのですが、理解が進みTowerの作成まで演習を終えることができ、理解もより深まった状態でスムーズに進められました。チュートリアルがしっかりしており、また環境も予め用意してくれている為、ネットワークやサーバ複数台用意して、という環境整備活動がままならない僕のような業界どんぐりの方でも、楽しみながら進められるかと思いました。業界経験の浅いサーバサイドエンジニア、インフラエンジニアの方でこのエントリを読んでくださった方は是非参加してほしいですね。3最後にAnsibleユーザ会のSlackを盛り上げようということで、誠に勝手ながら宣伝をして本日のエントリを締めたいと思います。余談僕は最初に参加する前、受講要件に「Linuxの基礎操作（vi エディタ、各種ファイルの操作）が可能であること」の記載を見て、なぜか敷居の高さを感じてしまい、応募をためらっていましたが、一旦参加してみると、特に難しいコマンド操作を要求されるわけでもなく、至って当たり前のファイル操作やvimの操作ができれば問題ないという感じでした。余り変に気を張ってしまうのもよくないってやつですね。同時にコミュニティとしての雰囲気もよく、結果としてAnsibleを含め素敵な出会いがありました。今後、教える側として積極的にアウトプットをしていけたらと思います。4追記URLが間違っていたので修正（2018年8月29日）最近だと8月23日までのオライリーのSRE実践本が無料で入手できました ↩人生まで行き着くと広義に渡りすぎていると重んじては憚らない ↩単純に若い同士の仲間がほしい ↩次回のAnsible Night in TokyoではLTで発表したいです ↩","link":"https://qiita.com/skikkh/items/156c677e07ffc6b5b4ef","isoDate":"2018-08-29T14:34:09.000Z","dateMiliSeconds":1535553249000,"authorName":"skikkh","authorId":"skikkh"},{"title":"My Autohotkey Config","contentSnippet":"備忘録として基本的な機能使って書いたのみなので、大した感じではないですめちゃくちゃ雑記なので悪しからず個人的に左手で全部済ませれるように無変換 + Xを多用している使用頻度が高いものは★Autohotkey.ahk#UseHook            ;以降に記述されたホットキーはすべてフックを使用;------------------------------------------------------------------------------;   無効;------------------------------------------------------------------------------; 矯正用 馴れたらInsertだけ残してコメントアウト Enter::Return                       ;Enter無効BS::Return                          BS無効Delete::Return                      ;Delete無効Right::Return                       ;Right無効sc029::Return                       ;半角/全角無効sc::Return                          ;Esc無効Ins::Return                         ;Insert無効;------------------------------------------------------------------------------;   with 無変換キー;------------------------------------------------------------------------------sc07B \u0026 h::Send,{Blind}{Left}       ;無変換 + H = Left ★sc07B \u0026 j::Send,{Blind}{Down}       ;無変換 + J = Down ★sc07B \u0026 k::Send,{Blind}{Up}         ;無変換 + K = Up ★sc07B \u0026 l::Send,{Blind}{Right}      ;無変換 + L = Right ★sc07B \u0026 y::Send,{Blind}{Home}       ;無変換 + Y = Home ★sc07B \u0026 u::Send,{Blind}{PgDn}       ;無変換 + U = PageDown ★sc07B \u0026 i::Send,{Blind}{PgUp}       ;無変換 + I = PageUp ★sc07B \u0026 o::Send,{Blind}{End}        ;無変換 + O = End ★sc07B \u0026 a::Send,{Blind}!{F4}        ;無変換 + A = ウィンドウを閉じる ★sc07B \u0026 sc079::Reload               ;無変換 + 変換 = AutoHotKeyスクリプトのリロードsc07B \u0026 E::Send,{Blind}{Enter}      ;無変換 + E = Enter ★sc07B \u0026 Q::Send,{Blind}{BS}         ;無変換 + Q = BackSpace ★sc07B \u0026 W::Send,{Blind}{Del}        ;無変換 + W = Deletesc07B \u0026 6::Send,{Blind}{F6}         ;無変換 + 6 = F6sc07B \u0026 7::Send,{Blind}{F7}         ;無変換 + 7 = F7sc07B \u0026 8::Send,{Blind}{F8}         ;無変換 + 8 = F8sc07B \u0026 9::Send,{Blind}{F9}         ;無変換 + 9 = F9sc07B \u0026 0::Send,{Blind}{F10}        ;無変換 + 0 = F10sc07B \u0026 -::Send,{Blind}{F11}        ;無変換 + - = F11sc07B \u0026 ^::Send,{Blind}{F12}        ;無変換 + ^ = F12sc07B \u0026 s::Send,{Browser_Back}      ;無変換 + s = 戻る(ブラウザ) ★sc07B \u0026 d::Send,{Browser_Forward}   ;無変換 + d = 進む(ブラウザ) ★; これがないとIMEで無変換・変換をMac風にできないsc07B::Send,{sc07B}                 ;無変換は無変換として使用する;------------------------------------------------------------------------------;   with 変換キー;------------------------------------------------------------------------------sc079 \u0026 1::Send,{Blind}{F1}         ;変換 + 1 = F1sc079 \u0026 2::Send,{Blind}{F2}         ;変換 + 2 = F2sc079 \u0026 3::Send,{Blind}{F3}         ;変換 + 3 = F3sc079 \u0026 4::Send,{Blind}{F4}         ;変換 + 4 = F4sc079 \u0026 5::Send,{Blind}{F5}         ;変換 + 5 = F5; 同上：こちらは念のためにsc079::Send,{sc079}                 ;変換は変換として使用する;------------------------------------------------------------------------------;   with 単体その他キー;------------------------------------------------------------------------------^j::Send,{Esc}                      ;Ctrl + j = Esc ★;Esc::                              ;Esc長押しでウィンドウ閉じる  KeyWait, Esc, T0.2    send,!{F4}return; Wikiの使用：他人がよく触るのであれば使用しない方がいいかもUp::                                ; ↑ = 音量を上げるSend,{Volume_Up 1}                  ;上げる量を増やしたい場合は入力回数を変更ReturnDown::                              ; ↓ = 音量を下げるSend,{Volume_Down 1}                ;下げる量を増やしたい場合は入力回数を変更ReturnLeft::                              ; ← = ミュートSend,{Volume_Mute}                  ;ミュートのON/OFF切り替えReturn; 全然使用していない。。。+sc029::                            ;半角/全角+Shift…ブラウザとアクティブウィンドウを切り替え    if ControlNum = 1    {        WinActivate , ahk_id %Active_WinID%        ControlNum = 0    }    else    {        WinGet, Active_WinID, ID, A        WinActivate , ahk_exe chrome.exe    };------------------------------------------------------------------------------#HotkeyInterval 200                 ;指定時間の間に実行できる最大のホットキー数を設定デスクトップの右側に寄せるコマンドWin + →をWin + 無変換 + lでやろうとするとWin + lがトリガーされてロックがかかっちゃうというナントモストレスフルな状況になっちゃいます（そもそも3キー以上はしんどい） おわりにEnter, Delは手の位置にかなっていて凄く使いやすくてお気に入りです。特にEnterとかEnterとかAutohotkeyスキル高くなってもっといい感じにチューニングできれば、再び更新or記事書きます。","link":"https://qiita.com/skikkh/items/07c050a4cf62443d0a38","isoDate":"2018-07-04T12:26:12.000Z","dateMiliSeconds":1530707172000,"authorName":"skikkh","authorId":"skikkh"},{"title":"Vue.jsメモ（用語まとめ）","contentSnippet":"個人的まとめです初学者なので間違っていればご指摘いただければ幸いです。随時更新。データバインディングデータ（Javascript）と描画（html）を結びつける仕組みデータに変化があれば自動的にDOMを更新することが可能従来の場合legacy.jsvar el = document.getElementById('app')el.innerText = 'Hello Vue.js'Vue.jsの場合vue.jsvar app = new Vue({  el: '#app',  data: {    message: 'Hello Vue.js!'  }})el: #app - mountする要素data: {} - アプリケーションで使用するデータ行数的には長く見えるが、従来のDOM更新（ライブラリを使用しない）は数が増えると同じ手続きが増えてしまう。ディレクティブv-から始まる属性データバインディングに使用アプリケーション内のデータ用オブジェクトのプロパティを生成e.g. v-bind :value .sync = \"message\"左から、ディレクティブ, 引数, 修飾子, 値(JavaScriptの式)一例：v-model, v-on, v-bind, v-if, v-else-if, v-else, v-show, v-forデータ駆動(data-driven)データを中心としたアプリケーション設計データの状態によって動的に（自動的に）、描画やアクションなどが変わるNuxt.js(ナクスジェーエス)、VuePressVue.jsの拡張フレームワークライフサイクルフックVueインスタンスの特定のタイミングでの自動呼び出しリアクティブデータ、リアクティブシステムgetしたときsetしたときのフック処理が登録された反応できるデータリアクティブシステムのひとつにデータバインディングがある機能DOM更新の最適化加工したデータの同期変更の検知⇒フックした処理の自動実行Mustache(マスタッシュ){{ hoge }}で記述する記法hogeプロパティをbindする（常に同期するので、DOM更新のためのコードを記述しなくてよい）","link":"https://qiita.com/skikkh/items/ec9395dda2127b62efa8","isoDate":"2018-06-30T03:53:47.000Z","dateMiliSeconds":1530330827000,"authorName":"skikkh","authorId":"skikkh"},{"title":"仮想通貨のポテンシャルをpythonでまとめて取得してみた","contentSnippet":"使用環境python 3.5.1Anaconda 4.0.0前置きCoinMarketCapというサイトに記載されている情報を元に、仮に他のアルトがビットコインの時価総額に到達した場合、対BTC比でどのぐらいのポテンシャル（現在価格からどのぐらいの倍率で伸びるのか）があるのかをみることで今後のアルトコインのポテンシャル測ることが出来ます。これは他の上位アルトコインがビットコインのドミナンスを食いつぶした場合のエグジットのポイントの目安にも約に立つと個人的に思っております。そんなわけで、やっていきたいと思います。導出手順APIの取得まず、CoinMarketCap JSON API Documentation Version1のTicker（相場一覧）を取得するため、APIにGETメソッドをリクエストします。cmc_coin_potential.pyimport urllib.requestimport jsonurl = 'https://api.coinmarketcap.com/v1/ticker/?limit=100'response = urllib.request.urlopen(url)cmc_ticker = json.loads(response.read().decode('utf8'))?limit=のパラメータの数値を変更することで、取得したい数を変更することができます。ここでは2-100位のポテンシャルを調べたいので100を指定しています。次にurllib.request.urlopenにてurlにリクエストを投げて、返ってきたデータをresponseに格納します。これはhttp.client.HTTPResponse型で格納されているため、.read()で読み込み、json.loadsにてpythonで扱えるデータ型に変換します。中身はリスト型にそれぞれのコインが辞書型で格納されています。以下が実際のデータになります。[{    \"id\": \"bitcoin\",     \"name\": \"Bitcoin\",     \"symbol\": \"BTC\",     \"rank\": \"1\",     \"price_usd\": \"15424.4\",     \"price_btc\": \"1.0\",     \"24h_volume_usd\": \"22149000000.0\",     \"market_cap_usd\": \"258868090810\",     \"available_supply\": \"16783025.0\",     \"total_supply\": \"16783025.0\",     \"max_supply\": \"21000000.0\",     \"percent_change_1h\": \"-0.78\",     \"percent_change_24h\": \"1.89\",     \"percent_change_7d\": \"3.84\",     \"last_updated\": \"1515129861\"}, {    \"id\": \"ripple\",     \"name\": \"Ripple\",     \"symbol\": \"XRP\",     \"rank\": \"2\",     \"price_usd\": \"3.18734\",     \"price_btc\": \"0.00021254\",     \"24h_volume_usd\": \"7896020000.0\",     \"market_cap_usd\": \"123474825937\",     \"available_supply\": \"38739144847.0\",     \"total_supply\": \"99993093880.0\",     \"max_supply\": \"100000000000\",     \"percent_change_1h\": \"-1.3\",     \"percent_change_24h\": \"-9.92\",     \"percent_change_7d\": \"106.57\",     \"last_updated\": \"1515129841\"}]導出方法ポテンシャルはビットコイン価格からビットコインとの発行枚数を比較した倍率を割り、更にそれの結果をそれぞれの通貨の価格で割って算出します。って言ってもわかりませんよね。参考までに、式を記載しておきます。(BTC価格 ÷ (アルト発行枚数 ÷ BTC発行枚数)) ÷ アルト価格これを上位100位までに当てはめて実行します。cmc_coin_potential.pybtc_supply = float(cmc_ticker[0]['available_supply'])btc_price_usd = float(cmc_ticker[0]['price_usd'])all_id = []all_supply = []all_price = []potential_result = []for i in range(len(cmc_ticker) - 1):    all_id.append(cmc_ticker[i + 1]['id'])    all_supply.append(float(cmc_ticker[i + 1]['available_supply']))    all_price.append(float(cmc_ticker[i + 1]['price_usd']))    potential_result.append(round(((btc_price_usd / (all_supply[i] / btc_supply)) / all_price[i]), 2))まず、はじめにリストの先頭にあるBTCの供給量と価格をそれぞれbtc_supply, btc_price_usdに格納します。この際、取り出される情報が文字列であったので、float()を使って変換しています。次に上位アルトの名前all_id（後で、書き出しの際に使用します）、供給量all_supply、価格all_priceを格納するリストを作成し、.append()を使用してリストに全てのアルトコインの情報を追加しています。この際、ビットコインの情報が入らないように要素の数を1つずらしています。それらの情報からポテンシャルを算出し、potential_resultに結果を追加していきます。書き出し書き出しには、Pandasの書き出しが楽なので、それを使用しました。cmc_coin_potential.pyimport pandas as pdpotential_df = pd.DataFrame({'id': all_id, 'potential_result': potential_result}, index=list(range(2, len(cmc_ticker) + 1)))potential_df.to_csv('cmc_coin_potential.csv')idと、potential_resultのデータフレームを作成し、csvファイルにて書き出しています。出力結果は以下のようになります。(見やすいようにPDFで出力しています)6位でテンバガー、21位でハンドレットバガーを狙えるポテンシャルがあるという結果になりました。勿論、ビットコインと同等の価値になったらの話なんですが、それでも凄いポテンシャルですね。備考floatで全て変換しているのは冗長だな、と書いてから思いました。また、何かアドバイスがあればコメント残して頂ければ幸いです。では。","link":"https://qiita.com/skikkh/items/bb4234c56b1c9a623d7b","isoDate":"2018-01-05T06:24:33.000Z","dateMiliSeconds":1515133473000,"authorName":"skikkh","authorId":"skikkh"},{"title":"VScodeで快適LaTeX環境を構築する方法","contentSnippet":"何故ローカルにLaTeXを導入するのかまず前提として、世の中にはCloud Latexという便利なWebサービスが、株式会社アカリク様によって提供されています。確かに、ローカルにLaTeXを導入しなくてもよいし、卒論だけに利用するといったライトユーザ層がLaTeXを使用するのに最適だと思います。しかし、ローカルでファイルを落とすには一々ダウンロードをしなければならず、ローカルとの連携という面では不便に感じるものもあります。身内話になりますが、先日ライトユーザの一人である友人が卒論提出前日に、記述している文章を全て飛ばしてしまうという大事故が起きてしまいました。幸い、Cloud LaTeX Teamの皆様の迅速な対応によりこの危機から免れましたが、やはり、このような事故も生じないといは言い切れず、ローカルでデータを保持しておいたいというのが人の性だと思います。(Cloud LaTeXではバックアップを取って置くことを予め注記しています。)LaTeXにはデフォルト統合環境であるTeXWorksがあるのですが、基本的に私はUXの優れたソフトウェアないしCLIしか使用したくないし、プロトタイプのようなダサいUXは以ての外なのであります。そこで今回、VScodeでライトユーザが快適に使えるローカル環境を構築する方法を書いていきたいと思います。主にWindowsのユーザの読者の方を対象にしています。インストールTeX Live 2017バージョン20160404.0以降のLuaTeX-jaはTeX Live 2015以前では動作しない為、最新のディストリビューションであるTeX Live 2017(2017/12/24執筆時点)からインストーラをダウンロードしましょう。上記はWindowsのインストーラになるのでその他のOSの場合、こちらを参考にして下さい。全てのパッケージをダウンロードするのにものすごく時間がかかるので、明らかに不必要なパッケージスイートはインストールの時点で外すのがいいのかもしれません。VScode次に、VScodeをダウンロードしましょう。特に問題がなければ最新の安定版を落として下さい。インストールが終わったら起動画面でCtrl + Shift + X（MacOS:⇧ + ⌘ + X）を入力して、検索窓にlatexと入力し、一番上に出てくるLaTeX Workshopをインストールして後、再読込みします。LuaLaTeXLuaTEX-jaパッケージは、次世代標準TEXであるLuaTeXの上で、pTeXと同等/それ以上の品質の日本語組版を実現させようとするマクロパッケージである。LuaLaTeXのプロジェクトチームは冒頭にて、商用印刷でも通用するpTeXに日本人は甘えてしまい、海外の拡張機能などに比べてギャップが今も尚あることに嘆いています。ということで、プロジェクトチームが勧める次世代標準のLuaTeXを使用します。LuaJITLaTeXを導入する場合LuaLaTeXを速度的に1.3倍ほど軽量化したLuaJITLaTeXを使用する設定をしておきましょう。ただし、LuaLaTeXをダウンロードするには少々面倒なのですが、@Tats_U_氏がその面倒を一発で終わらすスクリプトを書いているので、もし利用する場合は、そちらを参照にして下さい。また、フォントを変更したくてサイズの大きなフォントを利用する場合、LuaJITLaTeXを使用できるようにするこの項目は飛ばしても構いません。詳しくは、後述するフォントの変更を参照して下さい。プリアンブルの記述方法sample.tex\\documentclass[autodetect-engine,dvipdfmx-if-dvi,ja=standard]{bxjsarticle} \\begin{document}  こんにちは、人生。 \\end{document}\\documentclassに上記のように記述しておくことで、仮にpLaTeX,upLaTeX, XeTeXなど別のエンジンを利用した際にも、柔軟にコンパイルができるようになるので、こちらを利用しましょう。 LuaLaTeXをVScodeに設定する単一のコンパイル再度、VScodeを開き、Ctrl + ,（MacOS:⌘ + ,）で設定ファイルを開き、画面右側のユーザ設定にあるsettings.jsonファイルに以下の記述を加えて下さい。既に別の設定されている場合、その設定の下に\",\"区切りで\"latex-workshop.latex.toolchain\"の記述を加えて下さい。settings.json{    \"latex-workshop.latex.toolchain\": [        {            \"command\": \"luajitlatex\",            \"args\": [                \"--cmdx\",                \"--fmt=luajitlatex.fmt\",                \"%DOCFILE%\"            ]        }    ]}これでコンパイルができるようになります。参考文献を参照する場合参考文献を参照する場合、本来であれば、4回もコンパイルを回さなければならず、非常に煩わしいものの一つになっております。ここではLaTeX Workshopではtoolcahinを利用することにより全てのコンパイルを一度に行なってくれます。これで文献を利用する場合も完璧ですね。settings.json{    \"latex-workshop.latex.toolchain\": [        {            \"command\": \"luajitlatex\",            \"args\": [                \"--cmdx\",                \"--fmt=luajitlatex.fmt\",                \"%DOCFILE%\"            ]        },        {            \"command\": \"upbibtex\",            \"args\": [                \"%DOCFILE%\"            ]        },        {            \"command\": \"luajitlatex\",            \"args\": [                \"--cmdx\",                \"--fmt=luajitlatex.fmt\",                \"%DOCFILE%\"            ]        },        {            \"command\": \"luajitlatex\",            \"args\": [                \"--cmdx\",                \"--fmt=luajitlatex.fmt\",                \"%DOCFILE%\"            ]        }    ],}bibファイルの参照方法はここでは記載しませんが、私のVScodeの環境では\\bibliography{myrefs}と記載してmyrefsが参照できないでエラーが生じました。この場合、./myrefsとカレントディレクトリを明示することで、参照できたので、エラーがもし出た方がいれば試してみて下さい。使い方基本的には、*.texファイルを保存した段階で自動的にコンパイルが始まります。LaTeXのコンパイル画面を表示する場合、Ctrl + Shift + U（MacOS:⇧ + ⌘ + U）で見れます。主に使用するアクションCtrl + Alt + Lを押してLaTeX Workshop Actionsを開きます。（Macのショートカットがわかりませんでした、VScodeのショートカットページで探してみて下さい）主に使用されるであろうアクションを以下にあげます。Build Latex Project - latex-workshop.latex.toolchainにある一連のコマンドを実行View PDF file in new tab - VScodeのnew tabでPDFを開くSyncTeX from Cursor - SyncTeXの機能を使用して、文字をPDFに合わすClean up auxiliary files - auxiliaryファイルを削除するCount words in LaTeX document - 文字数をカウントします。句読点、節の見出しなどはカウントされませんでしたLaTeX Workshop設定自動コンパイルのキャンセルもし、保存された段階で自動コンパイルを行なってほしくない場合、settings.jsonに以下のように追記して下さい。settings.json{    \"latex-workshop.latex.autoBuild.onSave.enabled\": false}Auxiliaryファイルの自動削除中にはLaTeXをローカルを使用するのを忌避する理由の一つとしてauxiliaryファイルが大量に生産されて鬱陶しいというのもあると思います。そのような場合はsettings.jsonに以下のように追記することによってコンパイルが終わると自動的に一連のauxiliaryファイルが削除されます。settings.json{    \"latex-workshop.latex.clean.enabled\": true}スッキリしましたね。ChkTeXによる構文チェック設定ファイルに以下の記述をすることで、自動的に構文チェックを行なってくれます。ただ、私は日本語にやたらと反応してしまうため、ChkTeXは使用しておりません。ChkTeXの詳細はドキュメント（英語）をご覧ください。settings.json{    \"latex-workshop.chktex.enabled\": true }フォントの変更和文標準フォントのIPAexではなく、別のフォントを使用したい場合もあると思います。私の場合、個人的にはタイプフェイスデザイナーの西塚涼子氏 1の作ったフォントが凄く好きなのでAdobeとGoogleの共同開発フォントであるNoto Serif CJK JP(源ノ明朝)*に変更したいと思います。GoogleのGoogle Noto Fontsに行ってNoto Sans CJK JP/Noto Serif CJK JPをダウンロードし、インストールLuaLaTeXのフォントDBにフォントを登録するDBに登録されていることを確認プリアンブルにluatexja-presetパッケージを記載フォントDBへの登録LuaTeXのOpenTypeフォントを参照するDBにはインストールしたフォントが自動的に登録されません。そこで、ターミナル（cmdやpowershell）を開いて、フォントDBを更新します。# dbの更新\u003e luaotfload-tool --update# Noto Serif CJK JPがdbに登録されているか確認\u003e luaotfload-tool --find=\"notoserifcjkjp\"luaotfload | resolve : Font \"notoserifcjkjp\" found!# Noto Sans CJK JPがdbに登録されているか確認\u003e luaotfload-tool --find=\"notosanscjkjp\"luaotfload | resolve : Font \"notosanscjkjp\" found!found!と出ていれば後は、プリアンブルに次のように記述すれば自動的に設定されます。no-mathは数式の場合においてフォントを無視するものとなります。sample.tex\\documentclass[autodetect-engine,dvipdfmx-if-dvi,ja=standard]{bxjsarticle}\\usepackage[noto-otf, no-math]{luatexja-preset} \\begin{document}  こんにちは、人生。 \\end{document}気をつける点としては、Adobeから落とした場合とGoogleの場合で落とした場合で、同じフォントにも関わらず、フォントの名前が異なることです。（前者はSource Han Sans/Source e Han Serif、後者はNoto Sans CJK JP/Noto Serif CJK JP）したがって、Adobeのフォントを落とした場合、プリアンブルはsourcehan-jpに変更する必要があります。LuaLaTeXへの変更開発チームがサイズの大きいフォントを利用した場合、LuaJITLaTeXのコンパイル速度が異常に遅くなると言っており、私の環境で試してみたところ、LuaJITLaTeXを用いた場合42.7秒、LuaLaTeXを使用した場合16.11秒という歴然とした差が生じました。そこで、Noto fontsを利用する場合、settings.jsonのlatexworkshop.latex.toolchainを書き換えて、LuaLaTeXを使用するように設定を変更しておきましょう。settings.json{    \"latex-workshop.latex.toolchain\": [        {            \"command\": \"lualatex\",            \"args\": [                \"--cmdx\",                \"--fmt=lualatex.fmt\",                \"%DOCFILE%\"            ]        }    ]}上手くいけば、IPAexフォントが、Noto Serif CJK JPに変更されます。勿論、Unicode文字もうまく表示されていますね。Noto Serif CJK JPの場合IPAexの場合注意点原稿のソースファイルの文字コードはUTF-8 固定にしなければならない動作が遅い、軽量化したLuaJITLaTeXでも上記のようにフォントによっては物凄く重くなる場合があるpTeXで使用できたzw, zhという単位は使用できず\\zw, \\zhのような制御綴にしないといけない為、現在のpTeXで使用しているマクロや*.styファイルにそれらの単位表記が含まれる場合、置換などで変更する必要がある参考URLはじめてTeXを使う人が知っておくといいことまとめLuaTEX-ja パッケージ LuaTEX-jaプロジェクトチーム (2016/11/12最終更新)LaTeX Workshop - Visual Studio MarketplaceLuaLaTeXでフォントサンプル集が作りたい！最近もAdobeが貂明朝を発表して話題になりましたね。 ↩","link":"https://qiita.com/skikkh/items/707e8a5def368a69e9a6","isoDate":"2017-12-24T13:23:01.000Z","dateMiliSeconds":1514121781000,"authorName":"skikkh","authorId":"skikkh"},{"title":"GPUに全く縁のない素人がCPUマイニングを構築してみた","contentSnippet":"ブロックチェーンのAdvent Calendar 2017が空いてたので飛び入りで参加さしてもらいました。私の前提としては、GPUを使う人生をそもそも歩んでこなかったし、グラフィックなんてCPUの内蔵グラフィックスあるんやからそれ使えればええんや！と思ってる人でした。確かにそう思ってました。ました。。。しかし、世は大GPU時代。機械学習での画像処理はGPUがないと回せないし、HMDで未来を体験したくてもオンボードグラフィックでは無理。もちろんマイニングなんて以ての外。そして、Youtuberになるた(ry途方に暮れていたひねくれ者の私はCPUマイニングという僥倖に出会ったのであった。という長い前置きは置いといて、中身に入りましょう。今回はWindowsに限って話します。実行ファイルのダウンロードまずはBitzenyの公式サイトから自身のOSに合った実行ファイルをダウンロードして下さい。殆どの方がSSE4.1をダウンロードして問題はないとは思いますが、気になる方はこちらを確認するとよいでしょう。注意していただきたい点が、minerd.exeにウイルスが混入していた事が過去にあり、殆どのアンチウイルスソフトでminerd.exeがウイルス判定されます。1したがって、アンチウイルスソフトの設定でminerd.exeをホワイトリストに登録して下さい。また、ホワイトリストに入れてもソフトによってはアプリケーションレベルでのファイアウォールに引っかかり、通信できない場合もあるので、そうなった際も、別個ホワイトリストに入れて頂けたらと思います。プールマイニング次にマイニングプールでは、個別に掘るのは厳しくなっている現状もあり、マイニングプールを行う前提で話を進めます。2マイニングプールは多数あり、以下に一部抜粋させていただきます。（worker数は本エントリ記載時点）その他のプールはBitzenyWikiをご覧ください。詳しい登録方法などはここでは省略します。BitZeny選民プール-High Hashrate pool- - 招待制、140workersみずたまり（bitzenyマイニングプール） - 800workersLA Bitzeny Pool - 国内最大、6,654workersハッシュレートに自信のある方(最低5Hz/s必要)は招待制にはなりますが、選民プールが個人的におすすめです。運営している方が、TwitterやBitzenyフォーラムにおり、連絡が付きやすいという点でも安心できると思います。また、 サーバによっては非常に不安定なところもあるので、マイニングプール変更に備えて以下に記載するworker設定は同様にしておいた方がいいと思います。ログイン後、それぞれのサイトのMy Account\u003eMy Workersでworkerを登録をします。次にワーカー名とパスワードを設定し、Add New Workerをクリックします。私の場合、ワーカー名はどのホストかわかるように、パスワードはデフォルトでpasswordとしています。名前に関して、全てのホストを同じworkerとして登録することは可能ですが、PC毎に分けることを推奨しています。（台数が多くなると管理がしにくくなるため）batファイルの作成とマイニング次に、ローカル環境に戻ってバッチファイルの設定をします。ここで、保存してある場所にPATHが通ってなければ、環境変数にminerd.exeを保存してある場所を記述しておきましょう。下記の例では、%USERNAME%下にダウンロードしたディレクトリをフルパスで指定する場合の例を以下に記載します。3zny_miner.batC:\\Users\\%USERNAME%\\minerd.exe -a yescrypt -o     stratum+tcp://jp.lapool.me:3114 -u ユーザ名.ワーカー名 -p パスワードプールはLA Bitzeny Poolになります。プールによって難易度別にポート番号を分けている場合もあるので適宜確認して下さい。他のプールに変更する場合は、stratum+tcp:\\\\以下のドメイン名とポート番号を適宜変更して下さい。この場合もbatファイルにPATHを通している必要があります。batファイルを実行して、以下のように(yay!!)と画面にでればマイニングができています。簡単ですね。おめでとうございます。バックグラウンドで動かしたい場合マイニングPCで作業をしていてターミナルが邪魔という事があります。その場合はWIndowsに標準で含まれているVBScriptを使用してzny_miner_bg.vbsを作成し、バックグラウンドで実行しましょう。スクリプトは以下になります。zny_miner_bg.vbsを実行すれば、バックグラウンドでマイニングされます。zny_miner_bg.vbsSet sh = CreateObject(\"WScript.Shell\")sh.Run \"miner.bat\" ,0 ,Falseバックグラウンドで動作するので、まずはbatファイルで正しくマイニングできているかテストしておくといいのかもしれません。上記のような場合、taskmgrを開いて、minerd.exeのプロセスの優先度を下げたりして、CPUリソースを上手く分けたほうがいいかもしれません。（尤も、CPUマイニング専用PCとして利用する人が多いとは思いますが、、、）ウォレットをどこで保持するか公式サイトにあるウォレットでもいいのですが、初回に2014年からのブロックの全記録を更新するため、最新の状態まで記録するのに最低でも半日以上かかります。また、その後の起動も鬼のように遅くストレスがたまるだけなので正直あまりオススメできません。そこで、Webウォレットのbitzenyウォレットを利用しましょう。また、マイニングプールで得られたコインはプールの自動送金機能などを使用して、各自自身のウォレットに送金しておきましょう。先日、ウクライナの取引所Liquiの1200億円のハッキングなんて話もあり、Webで持つのは一抹の不安はありますが、サーバダウンで落ちまくったりするプールサーバに直置きするよりかは自身のWebウォレットを持っておく方がまだ安心できるのではないでしょうか？最後に既に行なってる人には当たり前レベルの話になってしまいましたが、CPUでもマイニングできるという事をしらない人はこれを期にマイニングをはじめてみては如何でしょうか。ところで最近、BItzenyの開発者(@bitzeny)が戻ってきたみたいで、一部界隈では盛り上がってますね。大量保有者が存在する現状をどうするんだろうか、と個人的に心配しております。気になったことといえば、プールマイニングにて自身でブロックを掘り当てた場合、個人で掘っても同様の難易度で発見者になる可能性があるのかということです。Bitzenyフォーラムでも掘り当てられるスペックがあるのであれば、ソロマイニングでも掘り当てられるという人もいれば、皆のハッシュレートを使ってるのでソロでは掘り当てられないと言っている人もいます。どちらが正しいのですかね。詳しい方教えて頂けると幸いです。それでは。現在は問題ありません。 ↩Bitcoinのような状態ではありません。 ↩stratumってNTPのプロトコルだと思ってました。 ↩","link":"https://qiita.com/skikkh/items/171bde40a8dece3b2ec1","isoDate":"2017-12-23T17:28:07.000Z","dateMiliSeconds":1514050087000,"authorName":"skikkh","authorId":"skikkh"}]},"__N_SSG":true},"page":"/members/[id]","query":{"id":"skikkh"},"buildId":"XYfZrq_XdEabSkednvp3f","nextExport":false,"isFallback":false,"gsp":true,"head":[["meta",{"name":"viewport","content":"width=device-width"}],["meta",{"charSet":"utf-8"}],["link",{"rel":"icon shortcut","type":"image/png","href":"https://blog.3-shake.com//logo.png"}],["link",{"href":"https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;500;700\u0026family=Roboto:wght@300;400;500;700\u0026display=swap","rel":"stylesheet"}],["title",{"children":"skikkh | 3-shake Engineers' Blogs"}],["meta",{"property":"og:title","content":"skikkh"}],["meta",{"property":"og:url","content":"https://blog.3-shake.com//members/skikkh"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"property":"og:site","content":"3-shake Engineers' Blogs"}],["meta",{"property":"og:image","content":"https://blog.3-shake.com//og.png"}],["link",{"rel":"canonical","href":"https://blog.3-shake.com//members/skikkh"}]]}</script><script nomodule="" src="/_next/static/chunks/polyfills-4beebf4ac9054f0bf4e6.js"></script><script src="/_next/static/chunks/main-8a83f0fd99327c4684a8.js" async=""></script><script src="/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" async=""></script><script src="/_next/static/chunks/framework.1daf1ec1ecf144ee9147.js" async=""></script><script src="/_next/static/chunks/commons.9e003f150a446b53bdd9.js" async=""></script><script src="/_next/static/chunks/pages/_app-7b618a3f94d3d1fc38ed.js" async=""></script><script src="/_next/static/chunks/81b50c7ab23905e464b4340eb234bd6ea389d26b.11690c1c506f2f27e9a5.js" async=""></script><script src="/_next/static/chunks/pages/members/%5Bid%5D-82bdc617ad4a0fa06a9e.js" async=""></script><script src="/_next/static/XYfZrq_XdEabSkednvp3f/_buildManifest.js" async=""></script><script src="/_next/static/XYfZrq_XdEabSkednvp3f/_ssgManifest.js" async=""></script></body></html>