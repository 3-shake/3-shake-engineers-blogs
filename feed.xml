<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>3-shake Engineers' Blogs</title>
        <link>https://blog.3-shake.com/</link>
        <description>3-shake ã«æ‰€å±ã™ã‚‹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®ãƒ–ãƒ­ã‚°è¨˜äº‹ã‚’ã¾ã¨ã‚ã¦ã„ã¾ã™ã€‚</description>
        <lastBuildDate>Wed, 01 Mar 2023 11:27:24 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>ja</language>
        <image>
            <title>3-shake Engineers' Blogs</title>
            <url>https://blog.3-shake.com/og.png</url>
            <link>https://blog.3-shake.com/</link>
        </image>
        <copyright>3-shake Inc.</copyright>
        <item>
            <title><![CDATA[Snowflakeã§ã®ã‚³ã‚¹ãƒˆç®¡ç†]]></title>
            <link>https://zenn.dev/nedoko_dok0dko/articles/ffe6450c4cd851</link>
            <guid>https://zenn.dev/nedoko_dok0dko/articles/ffe6450c4cd851</guid>
            <pubDate>Tue, 28 Feb 2023 10:45:26 GMT</pubDate>
            <content:encoded><![CDATA[Snowflakeã‚’æœ€è¿‘è§¦ã£ã¦ã¿ã‚‹ã“ã¨ãŒã‚ã£ãŸã®ã§ã€ã‚³ã‚¹ãƒˆå‘¨ã‚Šã«ã¤ã„ã¦å€‹äººçš„ã«èª¿ã¹ãŸãƒ­ã‚°å‚è€ƒãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆâ†“Snowflakeã§ã®ã‚³ã‚¹ãƒˆç®¡ç† | Snowflake Documentation ãŠå“æ›¸ãSnowflakeã®ã‚³ã‚¹ãƒˆã«ã¤ã„ã¦Snowflakeã®ã‚³ã‚¹ãƒˆèª¿æŸ»Snowflakeã®ã‚³ã‚¹ãƒˆåˆ¶å¾¡ Snowflakeã®ã‚³ã‚¹ãƒˆã«ã¤ã„ã¦Snowflakeã§ã®ã‚³ã‚¹ãƒˆã¯æ¬¡ã®3ã¤ã®é ˜åŸŸã«åˆ†é¡ã•ã‚Œã‚‹ã€‚ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°: ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†(ä»®æƒ³ã‚¦ã‚§ã‚¢ãƒã‚¦ã‚¹)ã€Snowflakeç®¡ç†(Snowpipeãªã©ã®ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹æ©Ÿèƒ½)ã€ãŠã‚ˆã³ã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸: ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°...]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[APIã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆè¨­è¨ˆã§æ°—ã‚’ã¤ã‘ã¦ã„ã‚‹ã“ã¨~ãƒã‚¨ãƒ ç·¨~]]></title>
            <link>https://qiita.com/bayobayo0324/items/4b21a71c5fb0e0202fbc</link>
            <guid>https://qiita.com/bayobayo0324/items/4b21a71c5fb0e0202fbc</guid>
            <pubDate>Tue, 28 Feb 2023 01:07:37 GMT</pubDate>
            <content:encoded><![CDATA[ã“ã®è¨˜äº‹ã¯ï¼Ÿæ—¥ã€…ã®æ¥­å‹™ã®ãªã‹ã§ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒãƒ¼ãƒ ã®ç«‹å ´ã§APIã‚’åˆ©ç”¨ã—ãŸã‚Šãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIãƒãƒ¼ãƒ ã®ç«‹å ´ã§APIã‚’è¨­è¨ˆå®Ÿè£…æ”¹ä¿®ã—ãŸã‚Šã™ã‚‹ç§ã®ãƒã‚¨ãƒ ã¿ãŸã„ãªã‚‚ã®ã§ã™ã€‚ã¿ãªã•ã¾ãŒæ—¥ã€…ã®æ¥­å‹™ã«ç–²ã‚Œâ€¦]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Charm è£½ã® Go ãƒ­ã‚®ãƒ³ã‚°ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€ŒLogã€ã‚’è©¦ã—ã¦ã¿ã‚‹]]></title>
            <link>https://zenn.dev/kou_pg_0131/articles/charm-log-introduction</link>
            <guid>https://zenn.dev/kou_pg_0131/articles/charm-log-introduction</guid>
            <pubDate>Mon, 27 Feb 2023 09:29:55 GMT</pubDate>
            <content:encoded><![CDATA[Charm è£½ã® Go ãƒ­ã‚®ãƒ³ã‚°ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒå‡ºãŸã®ã§æ—©é€Ÿè©¦ã—ã¦ã¿ãŸãƒ¡ãƒ¢ã§ã™ã€‚https://github.com/charmbracelet/log æ¤œè¨¼ç’°å¢ƒGo v1.20charmbracelet/log v0.1.1 ä½¿ã„æ–¹ åŸºæœ¬çš„ãªä½¿ã„æ–¹ä»¥ä¸‹ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã†ã¨ç‰¹å®šã®ãƒ¬ãƒ™ãƒ«ã®ãƒ­ã‚°ã‚’å‡ºåŠ›ã—ã¾ã™ã€‚log.Debug()log.Info()log.Warn()log.Error()log.Fatal()log.Print() ã¯è¨­å®šã•ã‚Œã¦ã„ã‚‹ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ã«é–¢ä¿‚ãªãå‡ºåŠ›ã•ã‚Œã¾ã™ã€‚package mainimport "github.com/cha...]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[ã€Istioâ›µï¸ã€‘å®‰å…¨ãªã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰æ‰‹æ³•ã®ä»•çµ„ã¿]]></title>
            <link>https://hiroki-hasegawa.hatenablog.jp/entry/2023/02/26/202548</link>
            <guid>https://hiroki-hasegawa.hatenablog.jp/entry/2023/02/26/202548</guid>
            <pubDate>Sun, 26 Feb 2023 11:25:48 GMT</pubDate>
            <content:encoded><![CDATA[01. ã¯ã˜ã‚ã«02. Istioã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰æ‰‹æ³•ã‚’èª¬æ˜ã™ã‚‹å‰ã«ã‚«ãƒŠãƒªã‚¢ãƒªãƒªãƒ¼ã‚¹ã¨ã¯ã‚«ãƒŠãƒªã‚¢ãƒªãƒªãƒ¼ã‚¹ã®æ‰‹é †ã€ï¼‘ã€‘ã€ï¼’ã€‘ã€ï¼“ã€‘ã€ï¼”ã€‘ã€ã‚«ãƒŠãƒªã‚¢ãƒªãƒªãƒ¼ã‚¹ã€ã®å‘¼ç§°ã®ç”±æ¥03. ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰æ‰‹æ³•ã®æ¦‚è¦æ‰‹é †ã€ï¼‘ã€‘ã€ï¼’ã€‘ã€ï¼“ã€‘ã€ï¼”ã€‘ã€ï¼•ã€‘ã€ï¼–ã€‘ã€ï¼—ã€‘ã€ï¼˜ã€‘04. ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰æ‰‹æ³•ã®è©³ç´°æ‰‹é †å‰æNamespaceIstiodIngressGatewayãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã€ï¼‘ã€‘ ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰å‰ã®æ¤œè¨¼ã“ã“ã§å®Ÿæ–½ã™ã‚‹ã“ã¨istioctl x precheckã‚³ãƒãƒ³ãƒ‰kubectl getã‚³ãƒãƒ³ãƒ‰â–¼ Istiodã®Deploymentâ–¼ Webhookã®å®›å…ˆã®Serviceâ–¼ å®›å…ˆã®Serviceã‚’æ±ºã‚ã‚‹MutatingWebhookConfigurationã€ï¼’ã€‘ æ–°Istiodã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã“ã“ã§å®Ÿæ–½ã™ã‚‹ã“ã¨istioctl versionã‚³ãƒãƒ³ãƒ‰istioctl installã‚³ãƒãƒ³ãƒ‰kubectl getã‚³ãƒãƒ³ãƒ‰â–¼ Istiodã®Deploymentâ–¼ Webhookã®å®›å…ˆã®Serviceâ–¼ Webhookã®å®›å…ˆã®Serviceã‚’æ±ºã‚ã‚‹MutatingWebhookConfigurationã€ï¼“ã€‘ Webhookã®å®›å…ˆã®Serviceã®å¤‰æ›´ã“ã“ã§å®Ÿæ–½ã™ã‚‹ã“ã¨istioctl tag setã‚³ãƒãƒ³ãƒ‰ã€ï¼”ã€‘ IngressGatewayã‚’ã‚¤ãƒ³ãƒ—ãƒ¬ãƒ¼ã‚¹ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã“ã“ã§å®Ÿæ–½ã™ã‚‹ã“ã¨kubectl rollout restartã‚³ãƒãƒ³ãƒ‰ã€ï¼•ã€‘ ä¸€éƒ¨ã®Namespaceã®istio-proxyã‚³ãƒ³ãƒ†ãƒŠã‚’ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã“ã“ã§å®Ÿæ–½ã™ã‚‹ã“ã¨kubectl rollout restartã‚³ãƒãƒ³ãƒ‰ã€ï¼–ã€‘ ãƒ¦ãƒ¼ã‚¶ã®æ‰‹ã‚’å€Ÿã‚ŠãŸãƒ†ã‚¹ãƒˆã“ã“ã§å®Ÿæ–½ã™ã‚‹ã“ã¨ã‚‚ã—å•é¡ŒãŒèµ·ã“ã£ãŸå ´åˆã€ï¼—ã€‘ istio-proxyã‚³ãƒ³ãƒ†ãƒŠã®æ®µéšçš„ãªã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã“ã“ã§å®Ÿæ–½ã™ã‚‹ã“ã¨kubectl rollout restartã‚³ãƒãƒ³ãƒ‰ã€ï¼˜ã€‘ æ—§Istiodã®ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã“ã“ã§å®Ÿæ–½ã™ã‚‹ã“ã¨istioctl uninstallã‚³ãƒãƒ³ãƒ‰kubectl getã‚³ãƒãƒ³ãƒ‰â–¼ Istiodã®Deploymentâ–¼ Webhookã®å®›å…ˆã®Serviceâ–¼ å®›å…ˆã®Serviceã‚’æ±ºã‚ã‚‹MutatingWebhookConfiguration05. ãŠã‚ã‚Šã«01. ã¯ã˜ã‚ã«éš ã—ã¾ã›ã‚“ã€‚æœ‰å‰å¼˜è¡Œã®ã‚µãƒ³ãƒ‡ãƒ¼ãƒŠã‚¤ãƒˆãƒ‰ãƒªãƒ¼ãƒãƒ¼ãŒç”ŸããŒã„ã§ã™ã€‚ã•ã¦ä»Šå›ã¯ã€Istioã®å®‰å…¨ãªã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰æ‰‹æ³•ã®ä»•çµ„ã¿ã«é–¢ã™ã‚‹è¨˜äº‹ã‚’æŠ•ç¨¿ã—ã¾ã—ãŸğŸš€åŸ·ç­†æ™‚ç‚¹ (2023/02/26) ã§ã¯ã€Istioã®Istiodã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ—ãƒ¬ãƒ¼ãƒ³ (ä»¥é™ã€Istiodã¨ã—ã¾ã™) ã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰æ‰‹æ³•ã«ã¯ã€ã€ã‚¤ãƒ³ãƒ—ãƒ¬ãƒ¼ã‚¹æ–¹å¼ã€ã¨ã€ã‚«ãƒŠãƒªã‚¢æ–¹å¼ã€ãŒã‚ã‚Šã¾ã™ã€‚ã¾ãŸåˆã‚ã›ã¦ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ãŒå¿…è¦ãªIstioã®IngressGatewayã«ã‚‚ã€ãã®æ‰‹æ³•ã«ã€ã‚¤ãƒ³ãƒ—ãƒ¬ãƒ¼ã‚¹æ–¹å¼ã€ã¨ã€ã‚«ãƒŠãƒªã‚¢æ–¹å¼ã€ãŒã‚ã‚Šã¾ã™ã€‚ä»Šå›ã®å®‰å…¨ãªã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰æ‰‹æ³•ã¨ã—ã¦ã€Istiodã§ã¯ã€ã‚«ãƒŠãƒªã‚¢ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã€ã€IngressGatewayã§ã¯ã€ã‚¤ãƒ³ãƒ—ãƒ¬ãƒ¼ã‚¹ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã€ã‚’æ¡ç”¨ã—ã¾ã™ã€‚ãã‚Œã§ã¯ã€Istioã®å®‰å…¨ãªã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰æ‰‹æ³•ã®ä»•çµ„ã¿ã‚’ã‚‚ã‚Šã‚‚ã‚Šå¸ƒæ•™ã—ã‚ˆã†ã¨æ€ã„ã¾ã™ğŸ˜— (æ²¼ã®ã¾ã‚ã‚Šã«é¤Œã‚’ã¾ã)â†ªï¸ å‚è€ƒï¼šIstio / Canary UpgradesIstio / Installing Gateways02. Istioã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰æ‰‹æ³•ã‚’èª¬æ˜ã™ã‚‹å‰ã«ã‚«ãƒŠãƒªã‚¢ãƒªãƒªãƒ¼ã‚¹ã¨ã¯Istiodã®ã‚«ãƒŠãƒªã‚¢ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ãŒç†è§£ã—ã‚„ã™ããªã‚‹ã‚ˆã†ã«ã€ã‚«ãƒŠãƒªã‚¢ãƒªãƒªãƒ¼ã‚¹ã‹ã‚‰èª¬æ˜ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚ã‚«ãƒŠãƒªã‚¢ãƒªãƒªãƒ¼ã‚¹ã¯ã€å®Ÿéš›ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ãƒ†ã‚¹ãƒˆã—ã¦ã‚‚ã‚‰ã„ãªãŒã‚‰ãƒªãƒªãƒ¼ã‚¹ã™ã‚‹æ‰‹æ³•ã§ã™ã€‚ã‚‚ã—ã‚«ãƒŠãƒªã‚¢ãƒªãƒªãƒ¼ã‚¹ã‚’ã”å­˜çŸ¥ã®æ–¹ã¯ã€ 03. ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰æ‰‹æ³•ã®æ¦‚è¦ ã¾ã§é£›ã°ã—ã¦ãã ã•ã„ğŸ™‡ğŸ»â€â™‚ï¸ã‚«ãƒŠãƒªã‚¢ãƒªãƒªãƒ¼ã‚¹ã®æ‰‹é †ã‚«ãƒŠãƒªã‚¢ãƒªãƒªãƒ¼ã‚¹ã¯ã€ä¸€éƒ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’çŠ ç‰²ã«ã™ã‚‹ã“ã¨ã«ãªã‚‹ä¸€æ–¹ã§ã€ã‚¢ãƒ—ãƒªã‚’å®Ÿåœ°çš„ã«ãƒ†ã‚¹ãƒˆã§ãã‚‹ç‚¹ã§å„ªã‚Œã¦ã„ã¾ã™ã€‚æ‰‹é †ã‚’äº¤ãˆãªãŒã‚‰èª¬æ˜ã—ã¾ã™ã€‚â†ªï¸ å‚è€ƒï¼šCanaryReleaseã€ï¼‘ã€‘æ—§ç’°å¢ƒã®ã‚¢ãƒ—ãƒªã‚’æ®‹ã—ãŸã¾ã¾ã€æ–°ç’°å¢ƒã‚’ãƒªãƒªãƒ¼ã‚¹ã—ã¾ã™ã€‚ã“ã®æ®µéšã§ã¯ã€å…¨ã¦ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ (100%) ã‚’æ—§ç’°å¢ƒã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã—ã¾ã™ã€‚ã€ï¼’ã€‘ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µãƒ¼ã§é‡ã¿ä»˜ã‘ã‚’å¤‰æ›´ã—ã€ä¸€éƒ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ (ã“ã“ã§ã¯10%) ã‚’æ–°ç’°å¢ƒã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã—ã¾ã™ã€‚ã€ï¼“ã€‘ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ‰‹ã‚’å€Ÿã‚Šã¦æ–°ç’°å¢ƒã‚’å®Ÿåœ°çš„ã«ãƒ†ã‚¹ãƒˆã—ã¾ã™ (ä¾‹ï¼šè©²å½“ã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãŒåŸºæº–å€¤ã‚’æº€ãŸã™ã‹) ã€‚ã€ï¼”ã€‘æ–°ç’°å¢ƒã«å•é¡ŒãŒèµ·ã“ã‚‰ãªã‘ã‚Œã°ã€é‡ã¿ä»˜ã‘ã‚’æ®µéšçš„ã«å¤‰æ›´ã—ã€æœ€çµ‚çš„ã«ã¯å…¨ã¦ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ (100%) ã‚’æ–°ç’°å¢ƒã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã—ã¾ã™ã€‚ã€ã‚«ãƒŠãƒªã‚¢ãƒªãƒªãƒ¼ã‚¹ã€ã®å‘¼ç§°ã®ç”±æ¥ã‚«ãƒŠãƒªã‚¢ãƒªãƒªãƒ¼ã‚¹ã«ã¤ã„ã¦ã¯ã€ãã®å‘¼ç§°ã®ç”±æ¥ã‚’çŸ¥ã‚‹ã¨ã€ã‚ˆã‚Šç†è§£ãŒæ·±ã¾ã‚Šã¾ã™ã€‚ã‚«ãƒŠãƒªã‚¢ãƒªãƒªãƒ¼ã‚¹ã¯ã€20ä¸–ç´€é ƒã®ç‚­å‘åŠ´åƒè€…ã®å±æ©Ÿå¯ŸçŸ¥æ–¹æ³•ã«ç”±æ¥ã—ã¾ã™ã€‚ç‚­é‰±å†…ã«ã¯æœ‰æ¯’ãªä¸€é…¸åŒ–ç‚­ç´ ãŒç™ºç”Ÿã™ã‚‹å ´æ‰€ãŒã‚ã‚Šã¾ã™ãŒã€ã“ã‚Œã¯ç„¡è‰²ç„¡è‡­ãªã®ã§ã€æ°—ã¥ãã“ã¨ã«é…ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ãã“ã§å½“æ™‚ã®ç‚­é‰±åŠ´åƒè€…ã¯ã€ä¸€é…¸åŒ–ç‚­ç´ ã«æ•æ„Ÿãªã€ã‚«ãƒŠãƒªã‚¢ã€ã‚’ç‚­é‰±å†…ã«æŒã¡è¾¼ã¿ã€ã‚«ãƒŠãƒªã‚¢ã®æ§˜å­ã‹ã‚‰ä¸€é…¸åŒ–ç‚­ç´ ã®å­˜åœ¨ã‚’å¯ŸçŸ¥ã™ã‚‹ã‚ˆã†ã«ã—ã¦ã„ãŸãã†ã§ã™ã€‚ã¤ã¾ã‚Šã€å…ˆã®ã€çŠ ç‰²ã«ãªã‚‹ä¸€éƒ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã€ãŒã€ã“ã“ã§ã„ã†ã‚«ãƒŠãƒªã‚¢ã¨ã„ã†ã‚ã‘ã§ã™ğŸ˜¨ç”»åƒå¼•ç”¨ï¼šGeorge McCaa, U.S. Bureau of Minesâ†ªï¸ å‚è€ƒï¼šAbout canary deployment in simple wordsThis Device Was Used to Resuscitate Canaries in Coal Mines After They Signaled Danger03. ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰æ‰‹æ³•ã®æ¦‚è¦æ‰‹é †ã‚«ãƒŠãƒªã‚¢ãƒªãƒªãƒ¼ã‚¹ã«ã¤ã„ã¦ç†è§£ã—ãŸã¨ã“ã‚ã§ã€Istioã®å®‰å…¨ãªã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰æ‰‹æ³•ã®æ¦‚è¦ã‚’èª¬æ˜ã—ã¾ã™ã€‚ãŠãŠã‚ˆãä»¥ä¸‹ã®æ‰‹é †ã‹ã‚‰ãªã‚Šã¾ã™ã€‚ã€ï¼‘ã€‘æ—§IstiodãŒç¨¼åƒã—ã¦ã„ã¾ã™ã€‚ã€ï¼’ã€‘æ–°Istiod (discoveryã‚³ãƒ³ãƒ†ãƒŠ) ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚ã€ï¼“ã€‘æ–°Istiodã®istio-proxyã‚³ãƒ³ãƒ†ãƒŠã‚’ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã§ãã‚‹ã‚ˆã†ã«ã€Webhookã®å®›å…ˆã®Serviceã‚’å¤‰æ›´ã—ã¾ã™ã€‚ã“ã®æ‰‹é †ã¯é‡è¦ã§ã€å¾Œã®istioctl tag setã‚³ãƒãƒ³ãƒ‰ã®ç®‡æ‰€ã§è©³ç´°ã‚’èª¬æ˜ã—ã¦ã„ã¾ã™ã€‚ã€ï¼”ã€‘IngressGatewayã‚’ã‚¤ãƒ³ãƒ—ãƒ¬ãƒ¼ã‚¹ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã—ã¾ã™ã€‚ã€ï¼•ã€‘ä¸€éƒ¨ã®Namespaceã§ã€istio-proxyã‚³ãƒ³ãƒ†ãƒŠã‚’ã‚«ãƒŠãƒªã‚¢ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã—ã¾ã™ã€‚ã“ã“ã§ã€ã‚«ãƒŠãƒªã‚¢ãƒªãƒªãƒ¼ã‚¹ã®ã‚ˆã†ãªé‡ã¿ä»˜ã‘ãŒãªãã€ã‚«ãƒŠãƒªã‚¢ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã®ã€ã‚«ãƒŠãƒªã‚¢ã€ã¨ã„ã†å‘¼ç§°ã«é•å’Œæ„Ÿã‚’æŒã¤æ–¹ãŒã„ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã“ã‚Œã«ã¤ã„ã¦ã¯ã€å…¨ã¦ã®Namespaceã®istio-proxyã‚³ãƒ³ãƒ†ãƒŠã‚’ä¸€æ–‰ã«ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã™ã‚‹ã®ã§ã¯ãªãã€æ®µéšçš„ã«ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã—ã¦ã„ãæ§˜å­ã‚’ã€ã‚«ãƒŠãƒªã‚¢ã€ã¨å‘¼ç§°ã—ã¦ã„ã‚‹ã€ã¨å€‹äººçš„ã«æ¨æ¸¬ã—ã¦ã„ã¾ã™ã€‚ã‚‚ã—ã€ã‚«ãƒŠãƒªã‚¢ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã€ã®ç”±æ¥ã‚’ã”å­˜ã˜ã®æ–¹ã¯ã€æ•™ãˆã¦ã„ãŸã ããŸã„ã§ã™ğŸ™‡ğŸ»â€â™‚ï¸ã€ï¼–ã€‘ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ‰‹ã‚’å€Ÿã‚Šã¦ã€å®Ÿåœ°çš„ã«ãƒ†ã‚¹ãƒˆã—ã¾ã™ (ä¾‹ï¼šè©²å½“ã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãŒåŸºæº–å€¤ä»¥ä¸‹ã‚’æº€ãŸã™ã‹) ã€‚ã€ï¼—ã€‘æ–°Istiodã®istio-proxyã‚³ãƒ³ãƒ†ãƒŠã«å•é¡ŒãŒèµ·ã“ã‚‰ãªã‘ã‚Œã°ã€ä»–ã®Namespaceã§ã‚‚istio-proxyã‚³ãƒ³ãƒ†ãƒŠã‚’æ®µéšçš„ã«ã‚«ãƒŠãƒªã‚¢ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã—ã¦ã„ãã¾ã™ã€‚ä¸€æ–¹ã§ã‚‚ã—å•é¡ŒãŒèµ·ã“ã‚Œã°ã€Namespaceã®istio-proxyã‚³ãƒ³ãƒ†ãƒŠã¨IngressGatewayã‚’ãƒ€ã‚¦ãƒ³ã‚°ãƒ¬ãƒ¼ãƒ‰ã—ã¾ã™ã€‚ã€ï¼˜ã€‘æœ€å¾Œã«ã€æ—§Istiodã‚’ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚â†ªï¸ å‚è€ƒï¼šIstio / Canary Upgrades04. ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰æ‰‹æ³•ã®è©³ç´°æ‰‹é †ã“ã“ã‹ã‚‰ã¯ã€03. ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰æ‰‹æ³•ã®æ¦‚è¦ ã‚’æ·±ã¼ã£ã¦ã„ãã¾ã™ã€‚ãƒ¤ã‚µã‚¤ãƒ‹ãƒ³ãƒ‹ã‚¯ã‚¢ãƒ–ãƒ©ãƒã‚·ãƒã‚·ãªèª¬æ˜ã«ãªã£ã¦ã—ã¾ã£ãŸã®ã§ã€ã“ã“ã¾ã§ã‚’é£Ÿã¹åˆ‡ã‚ŒãŸæ–¹ã®ã¿é€²ã‚€ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ğŸ¥ºä»Šå›ã¯ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ä¸€ç•ªå„ªå…ˆã—ã¦è¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹istioctlã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ãŸæ‰‹é †ã‚’èª¬æ˜ã—ã¾ã™ã€‚ã‚‚ã¡ã‚ã‚“ã€ä»–ã®ãƒ„ãƒ¼ãƒ« (ä¾‹ï¼šHelmã€ArgoCD) ã‚’ä½¿ç”¨ã—ã¦ã‚‚ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã§ãã¾ã™ã€‚ç´°ã‹ãªæ‰‹é †ãŒç•°ãªã‚‹ã ã‘ã§ã€ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰æ‰‹æ³•ã®æ¦‚è¦ã«é–¢ã—ã¦ã¯åŒã˜ã§ã™ğŸ™†â€â™‚ï¸ãã‚Œã§ã¯ã€03. ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰æ‰‹æ³•ã®æ¦‚è¦ ã®ã€ï¼‘ã€‘ã€œã€ï¼˜ã€‘ã«å¯¾å¿œã•ã›ãªãŒã‚‰èª¬æ˜ã—ã¦ã„ãã‚¾ã€‚å‰æNamespaceã¾ãšæœ€åˆã«ã€å‰æã¨ãªã‚‹çŠ¶æ³ã‚’è¨­å®šã—ã¦ãŠãã¾ã™ã€‚å„Namespaceã®istio.io/revãƒ©ãƒ™ãƒ«ã«defaultãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã¨ã—ã¾ã™ã€‚$ kubectl get namespace -L istio.io/revNAME              STATUS   AGE   REVfoo               Active   34d   defaultbar               Active   34d   defaultbaz               Active   34d   defaultistio-ingress     Active   34d   default...ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã«æ›¸ãèµ·ã“ã™ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚apiVersion: v1kind: Namespacemetadata:  name: foo  labels:    istio.io/rev: defaultã‚¨ã‚¤ãƒªã‚¢ã‚¹ã¯ã©ã‚“ãªå€¤ã§ã‚‚å•é¡Œãªãã€ã‚ˆãã‚ã‚‹ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã¨ã—ã¦defaultã‚„stableãªã©ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ã“ã®istio.io/revãƒ©ãƒ™ãƒ«ãŒã‚ã‚‹ã“ã¨ã§ã€ãã®Namespaceã®Podã«istio-proxyã‚³ãƒ³ãƒ†ãƒŠã‚’è‡ªå‹•çš„ã«ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã—ã¾ã™ã€‚istio-proxyã‚³ãƒ³ãƒ†ãƒŠã®ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã«ã¤ã„ã¦ã¯ã€ã“ã¡ã‚‰è¨˜äº‹ã§èª¬æ˜ã—ã¦ãŠã‚Šã€ã‚‚ã—æ°—ã«ãªã‚‹æ–¹ã¯ã“ã¡ã‚‰ã‚‚ã‚ˆã‚ã—ãã©ã†ãğŸ™‡ğŸ»â€â™‚ï¸Istiodã™ã§ã«1-14-6ã®IstiodãŒå‹•ã„ã¦ãŠã‚Šã€1-15-4ã«ã‚«ãƒŠãƒªã‚¢ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã—ã¾ã™ã€‚Istiodã¯Deploymenté…ä¸‹ã®Podã§ã‚ã‚Šã€ã“ã®Podã¯Istiodã®å®Ÿä½“ã§ã‚ã‚‹discoveryã‚³ãƒ³ãƒ†ãƒŠã‚’æŒã¡ã¾ã™ã€‚$ kubectl get deployment -n istio-system -l app=istiodNAME                   READY   UP-TO-DATE   AVAILABLE   AGEistiod-1-14-6          1/1     1            1           47s # 1-14-6IngressGatewayIngressGatewayã¯Istiodã¨ã¯ç•°ãªã‚‹Namespaceã§å‹•ã„ã¦ãŠã‚Šã€ã‚¤ãƒ³ãƒ—ãƒ¬ãƒ¼ã‚¹ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã—ã¾ã™ã€‚IngressGatewayã¯istio-proxyã‚³ãƒ³ãƒ†ãƒŠã‚’æŒã¡ã¾ã™ã€‚$ kubectl get deployment -n istio-ingressNAME                   READY   UP-TO-DATE   AVAILABLE   AGEistio-ingressgateway   1/1     1            1           47sè£œè¶³ã¨ã—ã¦ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã§ã¯ã€Istiodã¨Gatewayã¯ç•°ãªã‚‹Namespaceã§å‹•ã‹ã™ã“ã¨ãŒæ¨å¥¨ã•ã‚Œã¦ã„ã¾ã™ã€‚â†ªï¸ å‚è€ƒï¼šIstio / Installing Gatewaysãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹å„Namespaceã§ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ãŒå‹•ã„ã¦ã„ã¾ã™ã€‚ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã®Podã¯istio-proxyã‚³ãƒ³ãƒ†ãƒŠã‚’æŒã¡ã¾ã™ã€‚$ kubectl get deployment -n fooNAME   READY   UP-TO-DATE   AVAILABLE   AGEfoo    2/2     1            1           47s...$ kubectl get deployment -n barNAME   READY   UP-TO-DATE   AVAILABLE   AGEbar    2/2     1            1           47s..$ kubectl get deployment -n bazNAME   READY   UP-TO-DATE   AVAILABLE   AGEbaz    2/2     1            1           47s...ã€ï¼‘ã€‘ ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰å‰ã®æ¤œè¨¼ã“ã“ã§å®Ÿæ–½ã™ã‚‹ã“ã¨ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰å‰ã«ã€ç¾åœ¨ã®Kubernetes ClusterãŒã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰è¦ä»¶ã‚’æº€ãŸã—ã¦ã„ã‚‹ã‹ã‚’æ¤œè¨¼ã—ã¾ã™ã€‚â†ªï¸ å‚è€ƒï¼šBefore you upgradeistioctl x precheckã‚³ãƒãƒ³ãƒ‰istioctl x precheckã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã€ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰è¦ä»¶ã‚’æ¤œè¨¼ã—ã¾ã™ã€‚$ istioctl x precheckâœ… No issues found when checking the cluster.Istiois safe to install or upgrade!  To get started, check out https://istio.io/latest/docs/setup/getting-started/å•é¡ŒãŒãªã‘ã‚Œã°ã€istioctlã‚³ãƒãƒ³ãƒ‰ã¯No issue ...ã®æ–‡è¨€ã‚’å‡ºåŠ›ã—ã¾ã™ã€‚ã‚‚ã—ã€å•é¡ŒãŒã‚ã‚‹å ´åˆã€istioctlã‚³ãƒãƒ³ãƒ‰ã¯ã‚¨ãƒ©ãƒ¼æ–‡è¨€ã‚’å‡ºåŠ›ã—ã¾ã™ã€‚ä¾‹ãˆã°ã€Istioã®istio-proxyã‚³ãƒ³ãƒ†ãƒŠã®ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯kube-apiserverã¨é€šä¿¡ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ãã®ãŸã‚ã€kube-apiserverã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒå¤ã™ãã‚‹ã›ã„ã§IstioãŒéå¯¾å¿œã§ã‚ã‚‹ã¨ã€ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™ã€‚kubectl getã‚³ãƒãƒ³ãƒ‰â–¼ Istiodã®Deploymentkubectl getã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã€ç¾åœ¨ã®Istiodã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç¢ºèªã—ã¾ã™ğŸ‘€ã¾ãšã¯Istiodã®Deploymentã‚’ç¢ºèªã™ã‚‹ã¨ã€1-14-6ã®DeploymentãŒã‚ã‚Šã¾ã™ã€‚$ kubectl get deployment -n istio-system -l app=istiodNAME                   READY   UP-TO-DATE   AVAILABLE   AGEistiod-1-14-6          1/1     1            1           47s # 1-14-6istio-proxyã‚³ãƒ³ãƒ†ãƒŠã®ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã®ä»•çµ„ã¿ã§ã„ã†ã¨ã€ä»¥ä¸‹ã®èµ¤æ ã®è¦ç´ ã§ã™ğŸ‘‡â–¼ Webhookã®å®›å…ˆã®Serviceæ¬¡ã«ã€ Serviceã‚’ç¢ºèªã™ã‚‹ã¨ã€1-14-6ã®ServiceãŒã‚ã‚Šã¾ã™ã€‚$ kubectl get service -n istio-system -l app=istiodNAME            TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)                                 AGEistiod-1-14-6   ClusterIP   10.96.93.151     <none>        15010/TCP,15012/TCP,443/TCP,15014/TCP   109s # 1-14-6ã“ã®Serviceã¯ã€kube-apiserverã‹ã‚‰Istiodã¸ã®Webhookã‚’ä»²ä»‹ã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€istio-proxyã‚³ãƒ³ãƒ†ãƒŠã®ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã‚’å¯èƒ½ã«ã—ã¾ã™ã€‚istio-proxyã‚³ãƒ³ãƒ†ãƒŠã®ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã®ä»•çµ„ã¿ã§ã„ã†ã¨ã€ä»¥ä¸‹ã®èµ¤æ ã®è¦ç´ ã§ã™ğŸ‘‡â–¼ å®›å…ˆã®Serviceã‚’æ±ºã‚ã‚‹MutatingWebhookConfigurationæœ€å¾Œã«ã€MutatingWebhookConfigurationã‚’ç¢ºèªã™ã‚‹ã¨ã€istio-revision-tag-<ã‚¨ã‚¤ãƒªã‚¢ã‚¹>ã¨istio-sidecar-injector-<ãƒªãƒ“ã‚¸ãƒ§ãƒ³ç•ªå·>ã®MutatingWebhookConfigurationãŒã‚ã‚Šã¾ã™ã€‚$ kubectl get mutatingwebhookconfigurationsNAME                            WEBHOOKS   AGEistio-revision-tag-default      2          114s  # ã‚«ãƒŠãƒªã‚¢ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ç”¨istio-sidecar-injector-1-14-6   2          2m16s # ã‚¤ãƒ³ãƒ—ãƒ¬ãƒ¼ã‚¹ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ç”¨ã®ãŸã‚ä»Šå›ã¯è¨€åŠã—ãªã„istio-proxyã‚³ãƒ³ãƒ†ãƒŠã®ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã®ä»•çµ„ã¿ã§ã„ã†ã¨ã€ä»¥ä¸‹ã®èµ¤æ ã®è¦ç´ ã§ã™ğŸ‘‡ã“ã‚Œã‚‰ã®ã†ã¡ã€å‰è€… (istio-revision-tag-<ã‚¨ã‚¤ãƒªã‚¢ã‚¹>) ã‚’ã‚«ãƒŠãƒªã‚¢ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã®ãŸã‚ã«ä½¿ç”¨ã—ã¾ã™ã€‚ã“ã®MutatingWebhookConfigurationã¯ã€Webhookã®å®›å…ˆã®Serviceã‚’æ±ºã‚ã‚‹ãŸã‚ã€çµæœçš„ã«istio-proxyã‚³ãƒ³ãƒ†ãƒŠã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æ±ºã‚ã¾ã™ã€‚ã“ã“ã§ã€MutatingWebhookConfigurationã®istio.io/revãƒ©ãƒ™ãƒ«ã¨istio.io/tagãƒ©ãƒ™ãƒ«ã®å€¤ã‚‚ç¢ºèªã—ã¦ãŠãã¾ã™ã€‚$ kubectl get mutatingwebhookconfiguration istio-revision-tag-default -o yaml \    | yq '.metadata.labels'...istio.io/rev: 1-14-6istio.io/tag: default...istio.io/revãƒ©ãƒ™ãƒ«ã¯Istiodã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã€istio.io/tagãƒ©ãƒ™ãƒ«ã¯ã“ã‚Œã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚ã¾ãŸã€.webhooks[].namespaceSelectorã‚­ãƒ¼é…ä¸‹ã®istio.io/revã‚­ãƒ¼ã®æ¤œçŸ¥ãƒ«ãƒ¼ãƒ«ã‚’ç¢ºèªã—ã¾ã™ã€‚$ kubectl get mutatingwebhookconfiguration istio-revision-tag-default -o yaml \    | yq '.webhooks[]'...namespaceSelector:  matchExpressions:    - key: istio.io/rev      operator: In      values:        - default...åˆã‚ã›ã¦ã€.webhooks[].clientConfig.serviceã‚­ãƒ¼é…ä¸‹ã®Serviceã‚’åå‰ã‚’ç¢ºèªã—ã¾ã™ã€‚$ kubectl get mutatingwebhookconfiguration istio-revision-tag-default -o yaml \    | yq '.webhooks[].clientConfig'...service:  name: istiod-1-14-6...æ•´ç†ã™ã‚‹ã¨ã€Namespaceã§istio.io/revãƒ©ãƒ™ãƒ«ã«defaultã‚’è¨­å®šã—ã¦ãŠã‘ã°ã€MutatingWebhookConfigurationãŒãã‚Œã‚’æ¤œçŸ¥ã—ã€ç‰¹å®šã®Istioã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®Serviceã«Webhookã‚’é€ä¿¡ã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚â†ªï¸ Istio / Safely upgrade the Istio control plane with revisions and tagsã€ï¼’ã€‘ æ–°Istiodã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã“ã“ã§å®Ÿæ–½ã™ã‚‹ã“ã¨ãã‚Œã§ã¯ã€æ–°Istiodã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚â†ªï¸ å‚è€ƒï¼šControl planeistioctl versionã‚³ãƒãƒ³ãƒ‰æ–°ã—ãã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹Istiodã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ã€istioctlã‚³ãƒãƒ³ãƒ‰ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§æ±ºã¾ã‚Šã¾ã™ã€‚ãã“ã§ã€istioctl versionã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã€ã“ã‚Œã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç¢ºèªã—ã¾ã™ã€‚$ istioctl versionclient version: 1.15.4        # ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰å…ˆã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³control plane version: 1.14.6 # ç¾åœ¨ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³data plane version: 1.14.6istioctl installã‚³ãƒãƒ³ãƒ‰ã‚«ãƒŠãƒªã‚¢ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã®å ´åˆã€istioctl installã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯revisionã‚­ãƒ¼ã®å€¤ãŒcanaryã§ã™ãŒã€ä»Šå›ã¯1-15-4ã¨ã—ã¾ã™ã€‚ã“ã®å€¤ã¯ã€IstioãŒä½¿ç”¨ã™ã‚‹æ§˜ã€…ãªKubernetesãƒªã‚½ãƒ¼ã‚¹ã®æ¥å°¾è¾ã‚„ã€å„ç¨®ãƒªã‚½ãƒ¼ã‚¹ã®istio.io/revãƒ©ãƒ™ãƒ«ã®å€¤ã«ãªã‚Šã¾ã™ã€‚$ istioctl install --set revision=1-15-4WARNING: Istio is being upgraded from 1.14.6 -> 1.15.4WARNING: Before upgrading, you may wish to use 'istioctl analyze' to check for IST0002 and IST0135 deprecation warnings.âœ… Istio core installedâœ… Istiod installedâœ… Ingress gateways installedâœ… Installation completeThank you for installing Istio 1.15.  Please take a few minutes to tell us about your install/upgrade experience!kubectl getã‚³ãƒãƒ³ãƒ‰â–¼ Istiodã®Deploymentkubectl getã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã€istioctl installã‚³ãƒãƒ³ãƒ‰ã§ä½•ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã®ã‹ã‚’ç¢ºèªã—ã¾ã™ğŸ‘€ã¾ãšã¯Istiodã®Deploymentã‚’ç¢ºèªã™ã‚‹ã¨ã€1-15-4ã¨ã„ã†DeploymentãŒæ–°ã—ãå¢—ãˆã¦ã„ã¾ã™ã€‚$ kubectl get deployment -n istio-system -l app=istiodNAME            READY   UP-TO-DATE   AVAILABLE   AGEistiod-1-14-6   1/1     1            1           47s # 1-14-6istiod-1-15-4   1/1     1            1           47s # 1-15-4æ¥å°¾è¾ã®1-15-4ã¯ã€revisionã‚­ãƒ¼ã®å€¤ã§æ±ºã¾ã‚Šã¾ã™ã€‚ã“ã®æ®µéšã§ã¯ã€æ—§Istiodã¨æ–°IstioãŒä¸¦è¡Œçš„ã«ç¨¼åƒã—ã¦ãŠã‚Šã€kube-apiserverã¯ã¾ã æ—§Istiodã¨é€šä¿¡ã—ã¦ã„ã¾ã™ä»Šã®çŠ¶æ³ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ğŸ‘‡â–¼ Webhookã®å®›å…ˆã®Serviceæ¬¡ã« Webhookã®å®›å…ˆã®Serviceã‚’ç¢ºèªã™ã‚‹ã¨ã€istiod-1-15-4ã¨ã„ã†ServiceãŒæ–°ã—ãå¢—ãˆã¦ã„ã¾ã™ã€‚$ kubectl get service -n istio-system -l app=istiodNAME            TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)                                 AGEistiod-1-14-6   ClusterIP   10.96.93.151     <none>        15010/TCP,15012/TCP,443/TCP,15014/TCP   109s # 1-14-6istiod-1-15-4   ClusterIP   10.104.186.250   <none>        15010/TCP,15012/TCP,443/TCP,15014/TCP   87s  # 1-15-4ã“ã®æ®µéšã§ã¯ã€ã¾ã Webhookã®å®›å…ˆã¯istiod-1-14-6ã®Serviceã§ã™ã€‚ä»Šã®çŠ¶æ³ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ğŸ‘‡â–¼ Webhookã®å®›å…ˆã®Serviceã‚’æ±ºã‚ã‚‹MutatingWebhookConfigurationæœ€å¾Œã«MutatingWebhookConfigurationã‚’ç¢ºèªã™ã‚‹ã¨ã€istio-sidecar-injector-1-15-4ã¨ã„ã†MutatingWebhookConfigurationãŒæ–°ã—ãå¢—ãˆã¦ã„ã¾ã™ã€‚$ kubectl get mutatingwebhookconfigurationsNAME                            WEBHOOKS   AGEistio-revision-tag-default      2          114s  # ã‚«ãƒŠãƒªã‚¢ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã§ä½¿ç”¨ã™ã‚‹istio-sidecar-injector-1-14-6   2          2m16sistio-sidecar-injector-1-15-4   2          2m16sã‚«ãƒŠãƒªã‚¢ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã§ã¯ã€istio-revision-tag-<ã‚¨ã‚¤ãƒªã‚¢ã‚¹>ã®MutatingWebhookConfigurationã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ä»Šã®çŠ¶æ³ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ğŸ‘‡â€» å®Ÿã¯ã€ä»–ã«ã‚‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ã‚‹ã‚‚ã®ãŒã‚ã‚‹ã®ã§ã™ãŒã€è©±ã‚’ã‚ã‹ã‚Šã‚„ã™ãã™ã‚‹ãŸã‚ã«ã€ä»Šå›ã¯è¨€åŠã—ã¦ã„ã¾ã›ã‚“ğŸ™‡ğŸ»â€â™‚ï¸ã€ï¼“ã€‘ Webhookã®å®›å…ˆã®Serviceã®å¤‰æ›´ã“ã“ã§å®Ÿæ–½ã™ã‚‹ã“ã¨ã“ã®æ‰‹é †ã§ã¯ã€ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã®istio.io/tagãƒ©ãƒ™ãƒ«ã¯ãã®ã¾ã¾ã«ã€istio.io/revãƒ©ãƒ™ãƒ«ã®å€¤ã‚’å¤‰æ›´ã—ã¾ã™ã€‚ã•ã‚‰ã«ã€Webhookã®å®›å…ˆã®Serviceã‚’å¤‰æ›´ã—ã¾ã™ã€‚â†ªï¸ å‚è€ƒï¼šDefault tagSafely upgrade the Istio control plane with revisions and tagsistioctl tag setã‚³ãƒãƒ³ãƒ‰istioctl tag setã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã€istio.io/revãƒ©ãƒ™ãƒ«ã®å€¤ã¨å®›å…ˆã®Serviceã‚’å¤‰æ›´ã—ã¾ã™ã€‚$ istioctl tag set default --revision 1-15-4 --overwriteå®Ÿè¡Œå¾Œã«ã€ã‚‚ã†ä¸€åº¦MutatingWebhookConfigurationã‚’ç¢ºèªã™ã‚‹ã¨ã€istio.io/revãƒ©ãƒ™ãƒ«ã®å€¤ãŒå¤‰ã‚ã£ã¦ã„ã¾ã™ã€‚$ kubectl get mutatingwebhookconfiguration istio-revision-tag-default -o yaml \    | yq '.metadata.labels'...istio.io/rev: 1-15-4istio.io/tag: default...ã¾ãŸã€Webhookã®å®›å…ˆã®Serviceã‚‚å¤‰ã‚ã£ã¦ã„ã¾ã™ã€‚$ kubectl get mutatingwebhookconfiguration istio-revision-tag-default -o yaml \    | yq '.webhooks[].clientConfig'...service:  name: istiod-1-15-4...ã“ã‚Œã‚‰ã«ã‚ˆã‚Šã€Webhookã®å®›å…ˆãŒ1-15-4ã®Serviceã¨ãªã‚‹ãŸã‚ã€1-15-4ã®istio-proxyã‚³ãƒ³ãƒ†ãƒŠã‚’ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ä»Šã®çŠ¶æ³ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ğŸ‘‡ã€ï¼”ã€‘ IngressGatewayã‚’ã‚¤ãƒ³ãƒ—ãƒ¬ãƒ¼ã‚¹ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã“ã“ã§å®Ÿæ–½ã™ã‚‹ã“ã¨Webhookã®å®›å…ˆãŒ1-15-4ã®Serviceã«å¤‰ã‚ã£ãŸã¨ã“ã‚ã§ã€IngressGatewayã‚’ã‚¤ãƒ³ãƒ—ãƒ¬ãƒ¼ã‚¹ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã—ã¾ã™ã€‚â†ªï¸ å‚è€ƒï¼šIn place upgradekubectl rollout restartã‚³ãƒãƒ³ãƒ‰kubectl rollout restartã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã€IngressGatewayã‚’ã‚¤ãƒ³ãƒ—ãƒ¬ãƒ¼ã‚¹ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã—ã¾ã™ã€‚$ kubectl rollout restart deployment istio-ingressgateway-n istio-ingresså†ä½œæˆã—ãŸPodã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ç¢ºèªã—ã¦ã¿ã‚‹ã¨ã€istio-proxyã‚³ãƒ³ãƒ†ãƒŠã‚’1-15-4ã«ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã§ãã¦ã„ã¾ã™ã€‚$ kubectl get pod bar -n bar -o yaml | yq '.spec.containers[].image'docker.io/istio/proxyv2:1.15.4 # istio-proxyã‚³ãƒ³ãƒ†ãƒŠä»Šã®çŠ¶æ³ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ğŸ‘‡ãªãŠã€IngressGatewayã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰æ™‚ã€ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã¸ã®ã‚¤ãƒ³ãƒã‚¦ãƒ³ãƒ‰é€šä¿¡ãŒé®æ–­ã•ã‚Œã¦ã—ã¾ã†ã¨æ€ã£ãŸæ–¹ãŒã„ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã“ã®ç‚¹ã«ã¤ã„ã¦ã¯ã€DeploymentãŒãƒ­ãƒ¼ãƒªãƒ³ã‚°ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã§IngressGatewayã®Podã‚’å…¥ã‚Œæ›¿ãˆã‚‹ãŸã‚ã€å®‰å¿ƒã—ã¦ã„ãŸã ã„ã¦å•é¡Œã‚ã‚Šã¾ã›ã‚“ğŸ™†â€â™‚ï¸ã€ï¼•ã€‘ ä¸€éƒ¨ã®Namespaceã®istio-proxyã‚³ãƒ³ãƒ†ãƒŠã‚’ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã“ã“ã§å®Ÿæ–½ã™ã‚‹ã“ã¨ç¶šã‘ã¦ã€ä¸€éƒ¨ã®Namespaceã®istio-proxyã‚³ãƒ³ãƒ†ãƒŠã‚’ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã—ã¾ã™ã€‚Podã®å†ä½œæˆã«ã‚ˆã‚Šã€æ–°Istiodã®istio-proxyã‚³ãƒ³ãƒ†ãƒŠãŒã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã•ã‚Œã‚‹ãŸã‚ã€‚istio-proxyã‚³ãƒ³ãƒ†ãƒŠã‚’ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã§ãã¾ã™ã€‚â†ªï¸ å‚è€ƒï¼šData planekubectl rollout restartã‚³ãƒãƒ³ãƒ‰å‰æã«ã‚ã‚‹ã‚ˆã†ã«ã€Namespaceã«ã¯ foo bar baz ãŒã‚ã‚Šã¾ã™ã€‚kubectl rollout restartã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã€barã®istio-proxyã‚³ãƒ³ãƒ†ãƒŠã‹ã‚‰ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã—ã¾ã™ã€‚$ kubectl rollout restart deployment bar -n barå†ä½œæˆã—ãŸPodã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ç¢ºèªã—ã¦ã¿ã‚‹ã¨ã€istio-proxyã‚³ãƒ³ãƒ†ãƒŠã‚’1-15-4ã«ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã§ãã¦ã„ã¾ã™ã€‚$ kubectl get pod bar -n bar -o yaml | yq '.spec.containers[].image'bar-app:1.0 # ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹docker.io/istio/proxyv2:1.15.4 # istio-proxyã‚³ãƒ³ãƒ†ãƒŠä»Šã®çŠ¶æ³ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ğŸ‘‡ã€ï¼–ã€‘ ãƒ¦ãƒ¼ã‚¶ã®æ‰‹ã‚’å€Ÿã‚ŠãŸãƒ†ã‚¹ãƒˆã“ã“ã§å®Ÿæ–½ã™ã‚‹ã“ã¨Istioã‚’éƒ¨åˆ†çš„ã«ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã—ãŸã¨ã“ã‚ã§ã€ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ãŒå®Œäº†ã—ãŸNamespaceã‚’ãƒ†ã‚¹ãƒˆã—ã¾ã™ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ‰‹ã‚’å€Ÿã‚Šã¦å®Ÿåœ°çš„ã«ãƒ†ã‚¹ãƒˆã—ã¾ã™ (ä¾‹ï¼šè©²å½“ã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãŒåŸºæº–å€¤ã‚’æº€ãŸã™ã‹) ã€‚ä»Šã®çŠ¶æ³ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ğŸ‘‡ã‚‚ã—å•é¡ŒãŒèµ·ã“ã£ãŸå ´åˆã‚‚ã—å•é¡ŒãŒèµ·ã“ã£ãŸå ´åˆã€1-14-6ã«ãƒ€ã‚¦ãƒ³ã‚°ãƒ¬ãƒ¼ãƒ‰ã—ã¦ã„ãã¾ã™ã€‚istioctl tag setã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã€istio.io/revãƒ©ãƒ™ãƒ«ã®å€¤ã‚’å…ƒã«æˆ»ã—ã¾ã™ã€‚$ istioctl tag set default --revision 1-14-6 --overwriteãã®å¾Œã€kubectl rollout restartã‚³ãƒãƒ³ãƒ‰ã®æ‰‹é †ã‚’å®Ÿè¡Œã—ã€istio-proxyã‚³ãƒ³ãƒ†ãƒŠã‚’ãƒ€ã‚¦ãƒ³ã‚°ãƒ¬ãƒ¼ãƒ‰ã—ã¦ãã¾ã™ã€‚ã€ï¼—ã€‘ istio-proxyã‚³ãƒ³ãƒ†ãƒŠã®æ®µéšçš„ãªã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã“ã“ã§å®Ÿæ–½ã™ã‚‹ã“ã¨å…ˆã®Namespaceã§å•é¡ŒãŒèµ·ã“ã‚‰ãªã‘ã‚Œã°ã€æ®‹ã£ãŸNamespace (fooã€bazã€...) ã®istio-proxyã‚³ãƒ³ãƒ†ãƒŠã‚‚æ®µéšçš„ã«ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã—ã¦ã„ãã¾ã™ã€‚kubectl rollout restartã‚³ãƒãƒ³ãƒ‰åŒæ§˜ã«kubectl rollout restartã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã€istio-proxyã‚³ãƒ³ãƒ†ãƒŠã‹ã‚‰ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã—ã¾ã™ã€‚$ kubectl rollout restart deployment foo -n foo$ kubectl rollout restart deployment baz -n baz...æœ€çµ‚çš„ã«ã€å…¨ã¦ã®Namespacemã®istio-proxyã‚³ãƒ³ãƒ†ãƒŠãŒæ–°ã—ããªã‚Šã¾ã™ã€‚ä»Šã®çŠ¶æ³ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ğŸ‘‡ã€ï¼˜ã€‘ æ—§Istiodã®ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã“ã“ã§å®Ÿæ–½ã™ã‚‹ã“ã¨æœ€å¾Œã«ã€æ—§Istiodã®ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚â†ªï¸ å‚è€ƒï¼šUninstall old control planeistioctl uninstallã‚³ãƒãƒ³ãƒ‰istioctl uninstallã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã€æ—§Istiodã‚’ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚$ istioctl uninstall --revision 1-14-6âœ… Uninstall completeä»Šã®çŠ¶æ³ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ğŸ‘‡kubectl getã‚³ãƒãƒ³ãƒ‰â–¼ Istiodã®Deploymentkubectl getã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã€istioctl uninstallã‚³ãƒãƒ³ãƒ‰ã§ä½•ã‚’ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã®ã‹ã‚’ç¢ºèªã—ã¾ã™ğŸ‘€ã¾ãšã¯Istiodã®Deploymentã‚’ç¢ºèªã™ã‚‹ã¨ã€1-14-6ã¨ã„ã†DeploymentãŒç„¡ããªã£ã¦ã„ã¾ã™ã€‚$ kubectl get deployment -n istio-system -l app=istiodNAME            READY   UP-TO-DATE   AVAILABLE   AGEistiod-1-15-4   1/1     1            1           47s # 1-15-4â–¼ Webhookã®å®›å…ˆã®Serviceæ¬¡ã« Webhookã®å®›å…ˆã®Serviceã‚’ç¢ºèªã™ã‚‹ã¨ã€istiod-1-14-6ã¨ã„ã†ServiceãŒç„¡ããªã£ã¦ã„ã¾ã™ã€‚$ kubectl get service -n istio-system -l app=istiodNAME            TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)                                 AGEistiod-1-15-4   ClusterIP   10.104.186.250   <none>        15010/TCP,15012/TCP,443/TCP,15014/TCP   87s  # 1-15-4â–¼ å®›å…ˆã®Serviceã‚’æ±ºã‚ã‚‹MutatingWebhookConfigurationæœ€å¾Œã«MutatingWebhookConfigurationã‚’ç¢ºèªã™ã‚‹ã¨ã€istio-sidecar-injector-1-14-6ã¨ã„ã†MutatingWebhookConfigurationãŒç„¡ããªã£ã¦ã„ã¾ã™ã€‚$ kubectl get mutatingwebhookconfigurationsNAME                            WEBHOOKS   AGEistio-revision-tag-default      2          114s  # æ¬¡ã®ã‚«ãƒŠãƒªã‚¢ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã§ã‚‚ä½¿ç”¨ã™ã‚‹istio-sidecar-injector-1-15-4   2          2m16sã“ã‚Œã§ã€æ–°Istiodã«å®Œå…¨ã«å…¥ã‚Œæ›¿ã‚ã£ãŸãŸã‚ã€ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã¯å®Œäº†ã§ã™ã€‚ä»Šã®çŠ¶æ³ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ğŸ‘‡â€» å®Ÿã¯ã€ä»–ã«ã‚‚ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ã‚‹ã‚‚ã®ãŒã‚ã‚‹ã®ã§ã™ãŒã€è©±ã‚’ã‚ã‹ã‚Šã‚„ã™ãã™ã‚‹ãŸã‚ã«ã€ä»Šå›ã¯è¨€åŠã—ã¦ã„ã¾ã›ã‚“ğŸ™‡ğŸ»â€â™‚ï¸05. ãŠã‚ã‚Šã«Istioã®å®‰å…¨ãªã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰æ‰‹æ³•ã®ä»•çµ„ã¿ã‚’ã‚‚ã‚Šã‚‚ã‚Šå¸ƒæ•™ã—ã¾ã—ãŸã€‚Istioã¸ã®æ„›ãŒæº¢ã‚Œã¦ã—ã¾ã„ã¾ã—ãŸã€‚Istioã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã®ç•°å¸¸ãŒã‚·ã‚¹ãƒ†ãƒ ã«ä¸ãˆã‚‹å½±éŸ¿åŠ›ã¯éå¸¸ã«å¤§ããã€æ§˜ã€…ãªå•é¡Œ (ä½“é¨“è«‡ï¼šistio-proxyã‚³ãƒ³ãƒ†ãƒŠã®Podã¸ã®ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ãŒãšã£ã¨å®Œäº†ã›ãšã€ã‚¢ãƒ—ãƒªã‚³ãƒ³ãƒ†ãƒŠã‚’ä½œæˆã§ããªã„) ãŒèµ·ã“ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ğŸ˜‡ã“ã‚Œã‹ã‚‰Istioã‚’æ¡ç”¨äºˆå®šã®æ–¹ã¯ã€Istioã‚’å®‰å…¨ã«ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã™ã‚‹ãŸã‚ã«ååˆ†ã«æº–å‚™ã—ã¦ãŠãã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ğŸ‘]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[LINE ã«é€ã£ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ Google Home ã«èª­ã¿ä¸Šã’ã•ã›ã‚‹]]></title>
            <link>https://blog.1q77.com/2023/02/line-bot-tts/</link>
            <guid>https://blog.1q77.com/2023/02/line-bot-tts/</guid>
            <pubDate>Sat, 25 Feb 2023 12:51:58 GMT</pubDate>
            <content:encoded><![CDATA[ä»¤å’Œã®æ™‚ä»£ã€å®¶ã«å›ºå®šé›»è©±ã¯ãªãã€å¤–å‡ºå…ˆã‹ã‚‰å®¶æ—ã«ç›´ãã«ç­”ãˆã¦æ¬²ã—ã„ã“ã¨ãŒã‚ã£ã¦ã‚‚ã‚¹ãƒãƒ›ã¯ãƒãƒŠãƒ¼ãƒ¢ãƒ¼ãƒ‰ã§æ‰‹å…ƒã«ç½®ã„ã¦ãªã‘ã‚Œã°æ°—ã¥ãã“ã¨ãŒã§ãã¾ã›ã‚“ã€‚ ãã‚“ãªã‚ã‘ã§ã€]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Mosquitto ã§ AWS IoT Core ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ Publish/Subscribe ã™ã‚‹]]></title>
            <link>https://zenn.dev/kou_pg_0131/articles/aws-iot-core-mosquitto</link>
            <guid>https://zenn.dev/kou_pg_0131/articles/aws-iot-core-mosquitto</guid>
            <pubDate>Mon, 20 Feb 2023 10:00:32 GMT</pubDate>
            <content:encoded><![CDATA[ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã® MQTT ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ–ãƒ­ãƒ¼ã‚«ãƒ¼ã§ã‚ã‚‹ Mosquitto ã‚’ä½¿ç”¨ã—ã¦ Mac ã§ AWS IoT Core ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ Publish/Subscribe ã‚’è¡Œã†æ‰‹é †ã®ãƒ¡ãƒ¢ã€‚https://mosquitto.org/ æº–å‚™ Mosquitto ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«Publish/Subscribe ã‚’è¡Œã†ãƒ‡ãƒã‚¤ã‚¹ã« Mosquitto ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚ä»Šå›ã¯ Mac ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚Homebrew ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã¯æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚$ brew install mosquittoãã®ä»–ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ã«ã¤ã„ã¦ã¯...]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[AWS IoT ãƒ«ãƒ¼ãƒ«ã§ Timestream ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ä¿å­˜ã™ã‚‹]]></title>
            <link>https://zenn.dev/kou_pg_0131/articles/aws-iot-rule-to-timestream</link>
            <guid>https://zenn.dev/kou_pg_0131/articles/aws-iot-rule-to-timestream</guid>
            <pubDate>Mon, 20 Feb 2023 09:32:19 GMT</pubDate>
            <content:encoded><![CDATA[ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ Timestream ã«ä¿å­˜ã™ã‚‹ IoT ãƒ«ãƒ¼ãƒ«ã‚’ä½œæˆã—ã¦ MQTT ãƒ†ã‚¹ãƒˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§å‹•ä½œç¢ºèªã™ã‚‹ã¾ã§ã®æ‰‹é †ãƒ¡ãƒ¢ã€‚ æ‰‹é † 1. Timestream ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œæˆã™ã‚‹Timestream ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œæˆã—ã¦ã„ãã¾ã™ã€‚Amazon Timestream ã®ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§å·¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã€ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œæˆ ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚å„é …ç›®ã‚’æ¬¡ã®ã‚ˆã†ã«å…¥åŠ›ã—ã¾ã™ã€‚é …ç›®å€¤è¨­å®šã‚’é¸æŠæ¨™æº–ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åå‰ä»»æ„ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åã€‚ä»Šå›ã¯ example ã¨ã—ã¾ã™ã€‚ãã®ä»–ã®è¨­å®šã¯å¿…è¦ã«å¿œã˜ã¦å…¥...]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Casbinã®ãƒãƒªã‚·ãƒ¼ã‚’å‹•çš„ãƒ»åŒæœŸçš„ã«RDBç®¡ç†ã™ã‚‹ã¨ãã®æ³¨æ„ç‚¹]]></title>
            <link>https://qiita.com/bayobayo0324/items/1aa72baafefa2dee5147</link>
            <guid>https://qiita.com/bayobayo0324/items/1aa72baafefa2dee5147</guid>
            <pubDate>Mon, 20 Feb 2023 01:26:43 GMT</pubDate>
            <content:encoded><![CDATA[ã©ã‚“ãªè¨˜äº‹ï¼Ÿå‰å›ã€Casbinã§å­¦ã¶ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ãƒ¢ãƒ‡ãƒ«RBACã‚’æ›¸ã„ãŸã‚ã¨ã«ã€æ›¸ãè¶³ã‚Šãªã„ãªã¨æ„Ÿã˜ã¦ã„ãŸã®ã§å†åº¦Casbinã«ã¤ã„ã¦æ›¸ã„ã¦ã¿ã‚ˆã†ã‹ã¨ã€‚å¼•ãç¶šãCasbinã¨Goã«ã¤ã„ã¦ã€æ¥­å‹™ã§å¾—â€¦]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[ã€è‡ªç”±ç ”ç©¶ã«ã¯å‘ã‹ãªã„ã‚¦ã‚§ãƒ–ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã€ã¨ã„ã†ã‚¿ã‚¤ãƒˆãƒ«ã§ç™»å£‡ã—ã¾ã—ãŸã€‚]]></title>
            <link>https://syu-m-5151.hatenablog.com/entry/2023/02/18/201252</link>
            <guid>https://syu-m-5151.hatenablog.com/entry/2023/02/18/201252</guid>
            <pubDate>Sat, 18 Feb 2023 11:12:52 GMT</pubDate>
            <content:encoded><![CDATA[æ¦‚è¦ã€ä»Šæ›´èã‘ãªã„ã€‘Linuxã®ã—ãã¿ - Forkwell Library #16 ã¨ã„ã†ã‚¤ãƒ™ãƒ³ãƒˆã«ã€è‡ªç”±ç ”ç©¶ã«ã¯å‘ã‹ãªã„ã‚¦ã‚§ãƒ–ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ - ã‚µã‚¤ãƒˆé‹ç”¨ç®¡ç†ã‚’å–ã‚Šå·»ãç’°å¢ƒã®å¤‰åŒ– Cloud Nativeæ™‚ä»£ã«è€ƒãˆã‚‹Linux ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã€ã¨ã„ã†ã‚¿ã‚¤ãƒˆãƒ«ã§ç™»å£‡ã—ã¾ã—ãŸã€‚è‡ªç”±ç ”ç©¶ã«ã¯å‘ã‹ãªã„ã‚¦ã‚§ãƒ–ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã„ã†ã®ã¯2023å¹´ã«ãŠã„ã¦æˆ‘æµã§ã‚¦ã‚§ãƒ–ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã‚„ã£ã¦ã„ãé™ç•ŒãŒã‚ã‚‹ã¨ã„ã†æ€ã„ãŒã‚ã£ã¦ã“ã®ã‚¿ã‚¤ãƒˆãƒ«ã«ã—ã¾ã—ãŸã€‚ãŒã€ã‚¿ã‚¤ãƒˆãƒ«ãŒä»°ã€…ã—ã™ãã¦è³‡æ–™ä½œæˆã«ã¨ã¦ã‚‚æ™‚é–“ãŒã‹ã‹ã‚Šã¾ã—ãŸã€‚è³‡æ–™ç™»å£‡è³‡æ–™ã«ãªã‚Šã¾ã™ã€‚ speakerdeck.comã‚ã¨ãŒãä¸Šè¨˜ã§ã¯æˆ‘æµã§ã‚¦ã‚§ãƒ–ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã‚„ã£ã¦ã„ãé™ç•ŒãŒã‚ã‚‹ã¨è¨€ã£ã¦ã¾ã—ãŸã€‚ãŒã€è‡ªç”±ç ”ç©¶ã«ã¯å‘ã‹ãªã„æ®ºäººã¨ã„ã†å°èª¬ã‚’ç›´è¿‘ã§èª­ã‚“ã§ã„ã¦ä¾é ¼ã•ã‚ŒãŸã®ã§ã‚¿ã‚¤ãƒˆãƒ«ã‚’æ‹å€Ÿã—ãŸã ã‘ã§ã—ãŸã€‚ã‚¦ã‚§ãƒ–ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã«é–¢ã—ã¦ã„ã†ã¨ãƒ‘ãƒ–ãƒªãƒƒã‚¯ã‚¯ãƒ©ã‚¦ãƒ‰ã‚„IaCãã®ä»–è«¸ã€…ã®æ–‡åŒ–ã®ç™»å ´ã‚„ç™ºå±•ã«ã‚ˆã‚Š2010å¹´ã‚ˆã‚Šã¯æ´—ç·´ã•ã‚Œã¦ã„ã¦å®Ÿã¯çŸ¥è­˜ä½“ç³»ã‚’æ§‹ç¯‰ã—ã‚ˆã†ã¨æ€ãˆã°ã„ãã¤ã‹ã®æ‹¬ã‚Šã§ã§ããŸã‚Šã™ã‚‹ã‚“ã˜ã‚ƒãªã„ã‹ãªã¨æ€ã£ã¦é…”ã£æ‰•ã£ãŸå‹¢ã„ã§ã¾ã¨ã‚ã¦ã¿ãŸã€‚ãŒã§ããŸã‚‚ã®ã‚’æœç¢ºèªã™ã‚‹ã¨å…¬é–‹ã™ã‚‹è‡ªä¿¡ãŒãªã‹ã£ãŸã®ã§ã‚„ã‚ã¦ãŠãã¾ã—ãŸã€‚ã©ã“ã‹ã§ä¿®æ­£ã—ã¦ç™ºè¡¨ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚æœ€è¿‘ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã‚¯ãƒ©ã‚¦ãƒ‰ä¸Šã®Linuxã§ãƒ“ãƒ«ãƒ‰ã—ã¦ã‚¯ãƒ©ã‚¦ãƒ‰ä¸Šã®Linux ã§ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ã‚¯ãƒ©ã‚¦ãƒ‰ä¸Šã®Linuxã§å‹•ã‹ã™ã®ã§çµå±€æ§˜ã€…ãªçŸ¥è­˜ãŒæ±‚ã‚ã‚‰ã‚Œã‚‹ã‚ˆã£ã¦è©±ã§ã—ãŸã€‚ã‚ã¨ã€é–¢ä¿‚ãªã„ã®ã§ã™ãŒä»Šå›ã®ç™»å£‡ã®ãŸã‚ã«AWSã§å®Ÿç¾ã™ã‚‹ãƒ¢ãƒ€ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¥é–€ã‚’èª­ã¿ã¾ã—ãŸã€‚AWSã‚’ä½¿ã‚ãªãã¦ã‚‚å…·ä½“çš„ã«ãƒ¢ãƒ€ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚¤ãƒ³ãƒ•ãƒ©ã‚’è€ƒãˆã‚‹ã®ã«ã¨ã¦ã‚‚è‰¯ã„æœ¬ã ã£ãŸã®ã§ä¸€ç·’ã«ã‚ªã‚¹ã‚¹ãƒ¡ã—ã¦ãŠãã¾ã™ã€‚å‚è€ƒè³‡æ–™ã‚¦ã‚§ãƒ–ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼»è©¦ã—ã¦ç†è§£ï¼½Linuxã®ã—ãã¿ã€€â€•å®Ÿé¨“ã¨å›³è§£ã§å­¦ã¶OSã€ä»®æƒ³ãƒã‚·ãƒ³ã€ã‚³ãƒ³ãƒ†ãƒŠã®åŸºç¤çŸ¥è­˜ã€å¢—è£œæ”¹è¨‚ç‰ˆã€‘ã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒ¦ãƒ¼ã‚¶ãƒ¼ãªã‚‰çŸ¥ã£ã¦ãŠãã¹ãLinuxã‚·ã‚¹ãƒ†ãƒ ã®ä»•çµ„ã¿è©³è§£ ã‚·ã‚¹ãƒ†ãƒ ãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ ç¬¬2ç‰ˆã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ“ãƒªãƒ†ã‚£ãƒ»ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°AWSã§å®Ÿç¾ã™ã‚‹ãƒ¢ãƒ€ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¥é–€ ã€œã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ã€ã‚³ãƒ³ãƒ†ãƒŠã€ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã§ä½•ãŒã§ãã‚‹ã®ã‹ç¶™ç¶šçš„ãƒ‡ãƒªãƒãƒªãƒ¼ã®ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢å·¥å­¦ã€€ã‚‚ã£ã¨æ—©ãã€ã‚‚ã£ã¨è‰¯ã„ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚’ä½œã‚‹ãŸã‚ã®ç§˜è¨£ãƒãƒ¼ãƒ ãŒæ©Ÿèƒ½ã™ã‚‹ã¨ã¯ã©ã†ã„ã†ã“ã¨ã‹â”€â”€ã€Œå­¦ç¿’åŠ›ã€ã¨ã€Œå®Ÿè¡ŒåŠ›ã€ã‚’é«˜ã‚ã‚‹å®Ÿè·µã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚ˆå¿ƒç†çš„å®‰å…¨æ€§ã®ã¤ãã‚Šã‹ãŸ]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Helm Chart ã®æ­©ãæ–¹ å°å…¥å‰ã«èª­ã¿ãŸã„ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã¤ã„ã¦]]></title>
            <link>https://syu-m-5151.hatenablog.com/entry/2023/02/16/141433</link>
            <guid>https://syu-m-5151.hatenablog.com/entry/2023/02/16/141433</guid>
            <pubDate>Thu, 16 Feb 2023 05:14:33 GMT</pubDate>
            <content:encoded><![CDATA[Helm  ã‚’å°å…¥ã™ã‚‹å‰ã«Chartã«ã¤ã„ã¦èª­ã‚“ã§ãŠã„ã¦ã»ã—ã„ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ã¾ã¨ã¾ã—ãŸã€‚Chart ã®ä½œæˆå„ãƒ•ã‚¡ã‚¤ãƒ«ã®èª¬æ˜ã«ã¤ã„ã¦Chart.yamlvalues.yaml.helmignoretemplate/templates/NOTES.txttemplates/_helpers.tplHelm ã«ã¤ã„ã¦çŸ¥ã‚‹Helm Template Language ã®è¨˜æ³•values.yaml ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹Helm Template ã§åˆ©ç”¨ã§ãã‚‹é–¢æ•°Helm Chart ã§åˆ©ç”¨ã§ãã‚‹åˆ¶å¾¡æ§‹æ–‡Named Templates ã‚’ç”¨ã„ã¦ä¸€ã¤ã®ãƒšãƒ¼ã‚¸ã§å®šç¾©ã—ã¦ã„ãç©ºç™½ã‚’ç®¡ç†ã™ã‚‹ - ã®è©±Helm Chart ã‚’ã‚ˆãã—ã¦ã„ãHelm Chart ã®ãƒ‡ãƒãƒƒã‚°Helm Chart ã®ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°Helm Chart ã®ãƒ†ã‚¹ãƒˆHelm Chart ã®ãƒªãƒã‚¸ãƒˆãƒªåŒ–ã•ã„ã”ã«å‚è€ƒè³‡æ–™Chart ã®ä½œæˆhelm create ã§Helm Chart ã‚’ä½œæˆã—ã¾ã™ã€‚Chart ã¨ã¯ã€Kubernetes ãƒªã‚½ãƒ¼ã‚¹ã®ã¾ã¨ã¾ã‚Šã‚’å®šç¾©ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ç¾¤ã®ã“ã¨ã§ã™ã€‚helm create ã§æ§‹ç¯‰ã—ãŸã‚‚ã®é››å½¢ã¯ã“ã“ã§ã§ãã¾ã™ã€‚ä¸­èº«ã‚’è¦‹ã‚Œã‚Œã°ãªã‚“ã¨ãªãå‹•ãã‚‚ã‚ã‹ã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã®ã§å®Ÿéš›ã«æ‰‹ã‚’å‹•ã‹ã—ãªãŒã‚‰èª­ã‚“ã§ã‚‚ã‚‰ãˆã‚‹ã¨å¬‰ã—ã„ã§ã™ã€‚$ helm create mychartCreating mychart$ tree -a ./mychart./chart-namemychart/â”œâ”€â”€ .helmignoreâ”œâ”€â”€ Chart.yamlâ”œâ”€â”€ chartsâ”œâ”€â”€ templatesâ”‚Â Â  â”œâ”€â”€ NOTES.txtâ”‚Â Â  â”œâ”€â”€ _helpers.tplâ”‚Â Â  â”œâ”€â”€ deployment.yamlâ”‚Â Â  â”œâ”€â”€ hpa.yamlâ”‚Â Â  â”œâ”€â”€ ingress.yamlâ”‚Â Â  â”œâ”€â”€ service.yamlâ”‚Â Â  â”œâ”€â”€ serviceaccount.yamlâ”‚Â Â  â””â”€â”€ testsâ”‚Â Â      â””â”€â”€ test-connection.yamlâ””â”€â”€ values.yamlã“ã‚Œã«ã‚ˆã‚Šã€mychart ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒä½œæˆã•ã‚Œã¾ã™ã€‚ç‰¹åˆ¥ãªã“ã¨ãŒãªã‘ã‚Œã°åŸºæœ¬çš„ã«ã¯ã“ã‚Œã‚’ãƒ™ãƒ¼ã‚¹ã«ä½œæˆã—ã¦ã„ãã“ã¨ã«ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚Helm CreateVim ã«ã‚‚ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ ãŒã‚ã‚‹ã®ã§åˆ©ç”¨ã—ã¦ã„ã‚‹ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã”ã¨ã«å…¥ã‚Œã¦ã„ãŸã ã‘ã‚Œã°ã¨æ€ã„ã¾ã™ã€‚å„ãƒ•ã‚¡ã‚¤ãƒ«ã®èª¬æ˜ã«ã¤ã„ã¦ä½œæˆã—ãŸ mychart ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ã—ã¦ã€Chart ã®è¨­å®šã‚’ç·¨é›†ã—ã¾ã™ã€‚Chart.yamlChart.yaml ã¯ã€ä½œæˆã—ãŸ Chart ã®ãƒ¡ã‚¿æƒ…å ±ã‚’ç®¡ç†ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚å¹¾ã¤ã‹ã®å¿…é ˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã¨è¿½åŠ ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ãŒã‚ã‚Šã¾ã™ã€‚è©³ç´°ã¯å…¬å¼ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª­ã‚“ã§ãã ã•ã„ã€‚Chart.yamlvalues.yamlvalues.yaml ã¯ã€Helm Template Language ã§åˆ©ç”¨ã™ã‚‹å¤‰æ•°ã®ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’æŒ‡å®šã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚ä¸Šæ›¸ãã—ãŸã„æ™‚ã¯åˆ¥é€”æŒ‡å®šã—ã¦ã‚ã’ã¾ã™ã€‚ãƒãƒ£ãƒ¼ãƒˆå†…ã®values.yamlãƒ•ã‚¡ã‚¤ãƒ«ã‚µãƒ–ãƒãƒ£ãƒ¼ãƒˆã®å ´åˆã€è¦ªãƒãƒ£ãƒ¼ãƒˆã®values.yamlãƒ•ã‚¡ã‚¤ãƒ«helm install ã¾ãŸã¯ helm upgrade ã« -f ãƒ•ãƒ©ã‚°ã‚’ä»˜ã‘ã¦æ¸¡ã—ãŸå ´åˆã® values ãƒ•ã‚¡ã‚¤ãƒ« (helm install -f myvals.yaml ./mychart)set ã§æ¸¡ã•ã‚Œã‚‹å€‹ã€…ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ (helm install --set foo=bar ./mychart ã®ã‚ˆã†ã«)Values Files.helmignoreChart ã‚’ãƒªãƒã‚¸ãƒˆãƒªåŒ–ã™ã‚‹éš›ã«ã¯ã€ä½œæˆã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ä¸€å¼ã‚’ helm package ã‚³ãƒãƒ³ãƒ‰ã‚’åˆ©ç”¨ã—ã¦ tar ãƒ•ã‚¡ã‚¤ãƒ«ã«ã™ã‚‹ã®ã§ã™ãŒã€.helmignore ã‚’åˆ©ç”¨ã™ã‚‹ã¨ã€ãã® tar ãƒ•ã‚¡ã‚¤ãƒ«ã«å«ã‚ãŸããªã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã§ãã‚‹ã‚ˆã†ãªã‚Šã¾ã™ã€‚The .helmignore filetemplate/templates/ ã¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ç”¨ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ã™ã€‚ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ã—ã¦åˆ©ç”¨ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ãŒç´å…¥ã•ã‚Œã¦ã„ã¾ã™ã€‚A First Templatetemplates/NOTES.txttemplates/NOTES.txt ã¯ã€Chart ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚„ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ãŸæ™‚ã«ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ä¸Šã§è¡¨ç¤ºã•ã‚Œã‚‹æ–‡è¨€ã‚’è¨˜è¿°ã§ãã¾ã™ã€‚ã‚¢ã‚¯ã‚»ã‚¹ã™ã¹ãURLã‚„ãƒªãƒªãƒ¼ã‚¹çµæœãŒè¦‹ã‚Œã‚‹ã‚‚ã®ã‚’è¨˜è¼‰ã—ãŸã‚Šã—ã¦ã¾ã™ã€‚{{ .Chart.Name }} ã‚„ {{ .Chart.Version }} ã¨ã„ã£ãŸè¨˜è¿°ã§ãã¾ã™ã€ã“ã‚ŒãŒ Helm Template Language ã¨ãªã‚Šã¾ã™ã€‚Helm Template Language ã®è¨˜æ³•ã«ã¤ã„ã¦ã¯å¾Œè¿°ã€‚Creating a NOTES.txt Filetemplates/_helpers.tpltemplates/\_helpers.tpl ã¯ã€ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã§ã¯ãªãã€ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«å†…ã§åˆ©ç”¨ã•ã‚Œã‚‹ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ï¼ˆHelm ã§ã¯ Named Template ã¨å‘¼ã°ã‚Œã¾ã™ï¼‰ã‚’å®šç¾©ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã¨ãªã‚Šã¾ã™ã€‚Using "Partials" and Template IncludesHelm ã«ã¤ã„ã¦çŸ¥ã‚‹Helm Template Language ã®è¨˜æ³•ã‚³ãƒ¡ãƒ³ãƒˆã¯ # ã®ä»–ã€{{/*...*/}}ã®ã‚ˆã†ãªè¨˜æ³•ã‚’åˆ©ç”¨ã§ãã¾ã™ã€‚# ã‚’åˆ©ç”¨ã—ãŸã‚³ãƒ¡ãƒ³ãƒˆã¯ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ã§è¡¨ç¤ºã•ã‚Œã‚‹ã€ã¨ã„ã†é•ã„ãŒã‚ã‚Šã¾ã™ã€‚Comments (YAML Comments vs. Template Comments)values.yaml ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹Built-in Object ã¨ã¯ã€Helm Template Lunguage ã§åˆ©ç”¨ã§ãã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã„ã†ã‹ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¨ãªã‚Šã¾ã™ã€‚values.yaml ç­‰ã«å®šç¾©ã—ãŸå€¤ã‚’å–å¾—ã™ã‚‹ã«ã¯ã€Values ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå†…ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å¤‰æ•° ãªã«ãªã« ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã€ã¿ãŸã„ãªæ„Ÿã˜ã§åˆ©ç”¨ã™ã‚‹ã‚¤ãƒ¡ãƒ¼ã‚¸ã¨ãªã‚Šã¾ã™ã€‚Release ã®ã»ã‹ã€Valuesã‚„ Chart ã¨ã„ã£ãŸ Built-in Object ã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã™ã€‚Values ã¯ã€values.yaml ã«å®šç¾©ã•ã‚ŒãŸå€¤ã¸ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã€‚Chart ã¯ã€Chart.yaml ã«å®šç¾©ã•ã‚ŒãŸå€¤ã¸ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã€‚Built-in ObjectsHelm Template ã§åˆ©ç”¨ã§ãã‚‹é–¢æ•°Helmãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›¸ã„ã¦ã„ãã¨ã“ã†ã—ãŸã„ã‚ãã—ãŸã„ã¨ãªã‚‹ã¨æ€ã†ã®ã§ã™ãŒHelm Template Language å†…ã§ã¯ã€æ§˜ã€…ãªé–¢æ•°ãŒãƒ“ãƒ«ãƒˆã‚¤ãƒ³ã•ã‚Œã¦ã„ã¾ã™ã€‚Helmã¯60ä»¥ä¸Šã®åˆ©ç”¨å¯èƒ½ãªé–¢æ•°ã‚’æŒã£ã¦ã„ã¾ã™ã€‚ãã®ã†ã¡ã®ã„ãã¤ã‹ã¯ã€Go Tepï½plateè‡ªä½“ã§å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚{{ .Release.Name | quote }} ã¨ã„ã†è¨˜è¿°ãŒã‚ã£ãŸã¨ã—ã¦ã€.Release.Name ã¨ã„ã†å€¤ã«å¯¾ã—ã¦ã€ãƒ‘ã‚¤ãƒ—ã‚’ä»‹ã—ã€ quote ã¨ã„ã†å¼•ç”¨ç¬¦ã‚’ä»˜ä¸ã™ã‚‹é–¢æ•°ã‚’å®Ÿè¡Œã—ã¦ã„ã‚‹ã‚‚ã®ã«ãªã‚Šã¾ã™ã€‚ã“ã‚“ãªæ„Ÿã˜ã§ã€å®Ÿè¡Œã—ãŸã„é–¢æ•°ã‚’ãƒ‘ã‚¤ãƒ—ã‚’ä»‹ã—ã¦è¨˜è¿°ã—ã¦ã„ãã“ã¨ãªã‚Šã¾ã™ã€‚Template Function ListHelm Chart ã§åˆ©ç”¨ã§ãã‚‹åˆ¶å¾¡æ§‹æ–‡Helm ã«ã¯åˆ¶å¾¡æ§‹é€ ãŒåˆ©ç”¨ã§ãã¾ã™ã€‚ ã“ã‚Œã¯ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ç”Ÿæˆã®æµã‚Œã‚’åˆ¶å¾¡ã™ã‚‹æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚åˆ¶å¾¡æ§‹æ–‡ã¯ã€ä»¥ä¸‹ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚if/else for creating conditional blockswith to specify a scoperange, which provides a "for each"-style loopã¡ãªã¿ã«Go Tepï½plateè‡ªä½“ã§å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚Flow ControlNamed Templates ã‚’ç”¨ã„ã¦ä¸€ã¤ã®ãƒšãƒ¼ã‚¸ã§å®šç¾©ã—ã¦ã„ãåå‰ä»˜ããƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ã¯ã€å˜ã«ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸­ã§å®šç¾©ã•ã‚Œã€åå‰ãŒä»˜ã‘ã‚‰ã‚ŒãŸãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ã“ã¨ã§ã™ã€‚Named Template ã¯ã€{{ define }} ... {{ end }} ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã§å®šç¾©ã‚’è¡Œã„ã€{{ template }} ã‚„ {{ include }} ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã§ã€ãã®å€¤ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚Named Templatesã¡ãªã¿ã«{{ template }} ã§ãªãã€ {{ include }} ã—ãªã„ã¨ã€ãƒ‘ã‚¤ãƒ—ã‚’ä»‹ã—ãŸé–¢æ•°ã®å®Ÿè¡Œã§ããªã„ãŸã‚ã€{{ include }} ãŒè‰¯ã„ã€‚Using the 'include' Functionç©ºç™½ã‚’ç®¡ç†ã™ã‚‹ - ã®è©±ã¾ãšã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå®£è¨€ã®ä¸­æ‹¬å¼§ã®æ§‹æ–‡ã‚’ç‰¹åˆ¥ãªæ–‡å­—ã§å¤‰æ›´ã—ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚¨ãƒ³ã‚¸ãƒ³ã«ç©ºç™½ã‚’åˆ‡ã‚Šè©°ã‚ã‚‹ã‚ˆã†ã«æŒ‡ç¤ºã™ã‚‹ã€‚{{- xxx }} ã‚„ {{ XX -}}ã¨ã‹ã§å‡ºã¦ãã¦ã„ã‚‹ãƒã‚¤ãƒ•ãƒ³ã§ã™ãŒã€ã“ã‚Œã¯ Helm Template Lunguate ã‚’åˆ©ç”¨ã—ãŸè¡Œã®ç©ºç™½ã‚’ç®¡ç†ã™ã‚‹ã‚‚ã®ã§ã™ã€‚ãƒã‚¤ãƒ•ãƒ³ã®æœ‰ç„¡ã«ã‚ˆã‚Šç©ºç™½ã®é™¤å»ã‚’å®Ÿè¡Œã—ã¦ãã‚Œã¾ã™ã€‚ç©ºç™½ã‚’æ¶ˆã—ãŸã‚ã¨ã«indentã‚’è¿½åŠ ã™ã‚‹ã‚ˆã†ãªå½¢ã§åˆ©ç”¨ã—ãŸã‚Šã‚‚ã—ã¾ã™ã€‚Helm Chart ã‚’ã‚ˆãã—ã¦ã„ãHelm Chart ã‚’ãƒ‡ãƒãƒƒã‚°ã—ãŸã‚Šãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã™ã‚‹æ™‚ã®ãƒ’ãƒ³ãƒˆã‚’æ›¸ã„ã¦ã„ãã¾ã™ã€‚Helm Chart ã®ãƒ‡ãƒãƒƒã‚°Helm Chart ã§ã¯ãƒ‡ãƒãƒƒã‚°ã™ã‚‹æ–¹æ³•ã‚’ã„ãã¤ã‹ç”¨æ„ã—ã¦ã„ã¾ã™ã€‚Debugging Templateshelm lint ã¯ã€Chart ãŒãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã«æ²¿ã£ã¦ã„ã‚‹ã‹ã‚’ç¢ºèªã™ã‚‹ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚helm template --debug ã¯ãƒ­ãƒ¼ã‚«ãƒ«ã§Chart template ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’ãƒ†ã‚¹ãƒˆã—ã¾ã™ã€‚å›°ã£ãŸã‚‰ã“ã‚Œã§yaml ã‚’ç›´æ¥ã€ç¢ºèªã—ã¾ã™ã€‚helm install --dry-run --debugã¯ã€ã‚µãƒ¼ãƒãƒ¼ãŒãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã—ã€ãã®çµæœã®ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¿”ã™ã¨ã„ã†ç´ æ™´ã‚‰ã—ã„æ–¹æ³•ã§ã™ã€‚helm get manifestã¯ã€ã‚µãƒ¼ãƒãƒ¼ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ç¢ºèªã™ã‚‹è‰¯ã„æ–¹æ³•ã§ã™ã€‚Helm Chart ã®ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°Helm Chart ã®å“è³ªã‚’ã‚ã’ã‚‹ãŸã‚ã®ãƒ’ãƒ³ãƒˆã¨ã‚³ãƒ„ã‚’ã„ãã¤ã‹å–ã‚Šä¸Šã’ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®é–¢æ•°ã‚’çŸ¥ã‚Šæœ‰ç”¨ã¨åˆ¤æ–­ã™ã‚Œã°åˆ©ç”¨ã™ã‚‹æ–‡å­—åˆ—ã‚’å¼•ç”¨ã™ã‚‹ã€æ•´æ•°ã‚’å¼•ç”¨ã—ãªã„ã€‚ã“ã‚Œã¯çµ¶å¯¾ã«é ¼ã‚€ã€‚1ã¤ã®ã‚³ãƒãƒ³ãƒ‰ã§ãƒªãƒªãƒ¼ã‚¹ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¾ãŸã¯ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰Chart Development Tips and TricksHelm Chart ã®ãƒ†ã‚¹ãƒˆtemplates/tests/ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ä¸‹ã«ãŠã„ãŸãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€helm testã‚³ãƒãƒ³ãƒ‰ã«ã‚ˆã‚Šå®Ÿè¡Œã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚Chart TestsHelm Chart ã®ãƒªãƒã‚¸ãƒˆãƒªåŒ–ãƒªãƒã‚¸ãƒˆãƒªåŒ–ã™ã‚‹ã«ã¯ã€index.yaml ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ã¨Chart ä¸€å¼ã‚’å›ºã‚ãŸ tar ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é™çš„ Web ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã‚µã‚¤ãƒˆã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã“ã¨ã§å®Ÿç¾ã•ã‚Œã¾ã™ã€‚The Chart Repository Guideã•ã„ã”ã«ã“ã‚Œã‚‚ã‚ã‚Œã°èª­ã‚“ã§ã»ã—ã„ã¨ã„ã†å†…å®¹ãŒã‚ã‚Œã°åå‰ä»˜ãã§æ²è¼‰ã•ã›ã¦ã„ãŸã ãã®ã§é€£çµ¡ã„ãŸã ããŸã„ã§ã™ã€‚å‚è€ƒè³‡æ–™Helm Docs | Getting Started]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[é‹ç”¨ã®åŠ¹ç‡åŒ–ã‚’æ”¯ãˆã‚‹ AWS Systems Manager Automation ã®ç´¹ä»‹]]></title>
            <link>https://sreake.com/blog/aws-ssm-automation/</link>
            <guid>https://sreake.com/blog/aws-ssm-automation/</guid>
            <pubDate>Thu, 16 Feb 2023 02:40:28 GMT</pubDate>
            <content:encoded><![CDATA[AWS Systems Managerï¼ˆSSMï¼‰ã§ã¯é‹ç”¨ã«å½¹ç«‹ã¤æ©Ÿèƒ½ãŒæä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚ ãŸã ã—ã€æä¾›ã•ã‚Œã¦ã„ã‚‹æ©Ÿèƒ½ãŒå¤šãã€ä»Šã¾ã§ä½¿ç”¨ã—ãŸçµŒé¨“ãŒã‚ã‚‹ã®ã¯ä¸€éƒ¨ã®æ©Ÿèƒ½ã«é™ã‚‰ã‚Œã¦ã„ã¾ã—ãŸã®ã§ã€ã©ã®ã‚ˆã†ãªã“ã¨ãŒã§ãã‚‹ã®ã‹èª¿ã¹ã¦ã¿ [â€¦]The post é‹ç”¨ã®åŠ¹ç‡åŒ–ã‚’æ”¯ãˆã‚‹ AWS Systems Manager Automation ã®ç´¹ä»‹ first appeared on sreake.com | æ ªå¼ä¼šç¤¾ã‚¹ãƒªãƒ¼ã‚·ã‚§ã‚¤ã‚¯.]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[GitHub Actions ã§ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªã‚’ checkout ã™ã‚‹]]></title>
            <link>https://zenn.dev/kou_pg_0131/articles/gh-actions-checkout-private-repo</link>
            <guid>https://zenn.dev/kou_pg_0131/articles/gh-actions-checkout-private-repo</guid>
            <pubDate>Mon, 13 Feb 2023 09:40:56 GMT</pubDate>
            <content:encoded><![CDATA[GitHub Actions ã§åˆ¥ã®ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªã‚’ checkout ã™ã‚‹æ–¹æ³•ã®ãƒ¡ãƒ¢ã€‚ ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã“ã®è¨˜äº‹ã§ç´¹ä»‹ã™ã‚‹ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã®ãƒªãƒã‚¸ãƒˆãƒªã§ç®¡ç†ã—ã¦ã„ã¾ã™ã€‚https://github.com/koki-develop/gh-actions-checkout-private-repo-example å‰ç½®ãã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯æ¬¡ã® 2 é€šã‚Šã®æ–¹æ³•ã«ã¤ã„ã¦ã¾ã¨ã‚ã¾ã™ã€‚Deploy keys ã‚’ä½¿ã†æ–¹æ³•Personal Access Token ã‚’ä½¿ã†æ–¹æ³•ã„ãšã‚Œã®æ–¹æ³•ã‚‚ GitHub Actions ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’ä½œæˆã™ã‚‹ãƒªãƒã‚¸ãƒˆãƒªã¨ chec...]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Caddy ã® Internal TLS è¨¼æ˜æ›¸ã®æœ‰åŠ¹æœŸé–“ã‚’æŒ‡å®šã™ã‚‹]]></title>
            <link>https://blog.1q77.com/2023/02/caddy-internal-tls-cert-lifetime/</link>
            <guid>https://blog.1q77.com/2023/02/caddy-internal-tls-cert-lifetime/</guid>
            <pubDate>Thu, 09 Feb 2023 14:29:32 GMT</pubDate>
            <content:encoded><![CDATA[ä»¥å‰ ãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼ã§ https ã® Reverse Proxy ã‚’å®Ÿè¡Œã™ã‚‹ ã¨ã„ã†è¨˜äº‹ã§ Caddy ã‚’ä½¿ã†ã¨ local ã§ã®é–‹ç™ºç”¨ã«ä»»æ„ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã®è¨¼æ˜æ›¸ã‚’ç°¡å˜ã«ç™ºè¡Œã§ãã‚‹ã— CA ã®è¨¼æ˜æ›¸ã‚‚ OS ã®è¨¼æ˜æ›¸ã‚¹ãƒˆã‚¢ã«ä¿å­˜ã—ã¦ãã‚Œã‚‹ãŸ]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[ã€ãƒã‚¹ãƒˆãƒ¢ãƒ¼ãƒ†ãƒ ã¯ã˜ã‚ã¾ã—ãŸã€ã¨ã„ã†ã‚¿ã‚¤ãƒˆãƒ«ã§ç™»å£‡ã—ã¾ã—ãŸã€‚]]></title>
            <link>https://syu-m-5151.hatenablog.com/entry/2023/02/09/113316</link>
            <guid>https://syu-m-5151.hatenablog.com/entry/2023/02/09/113316</guid>
            <pubDate>Thu, 09 Feb 2023 02:33:16 GMT</pubDate>
            <content:encoded><![CDATA[æ¦‚è¦ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆã«ã©ã†å¯¾å¿œã—ã¦ããŸã‹ï¼Ÿã¿ã‚“ãªã§å­¦ã¶ãƒã‚¹ãƒˆãƒ¢ãƒ¼ãƒ†ãƒ  Lunch LT ã¨ã„ã†ã‚¤ãƒ™ãƒ³ãƒˆã§ã€ãƒã‚¹ãƒˆãƒ¢ãƒ¼ãƒ†ãƒ ã¯ã˜ã‚ã¾ã—ãŸã€ã¨ã„ã†ã‚¿ã‚¤ãƒˆãƒ«ã§ç™»å£‡ã—ã¾ã—ãŸã€‚ã“ã®ç™»å£‡ã«ã¯å…ƒè¨˜äº‹ãŒã‚ã£ã¦è‰¯ã„ãƒã‚¹ãƒˆãƒ¢ãƒ¼ãƒ†ãƒ ã‚’åŸ·ç­†ã™ã‚‹ãŸã‚ã«å¿…è¦ãª5ã¤ã®ãƒã‚¤ãƒ³ãƒˆã§ã™ã€‚ã“ã®è¨˜äº‹ã«å¯¾ã—ã¦ã„ãã¤ã‹ã®åŠ ç­†ä¿®æ­£ã‚’è¡Œã„è³‡æ–™ã«ã—ã¾ã—ãŸã€‚è³‡æ–™ç™»å£‡è³‡æ–™ã«ãªã‚Šã¾ã™ã€‚ speakerdeck.comã‚ã¨ãŒããƒã‚¹ãƒˆãƒ¢ãƒ¼ãƒ†ãƒ ã«ã¤ã„ã¦è€ƒãˆãŸã‚Šèª¿ã¹ã¦ã„ãã¨ä»•çµ„ã¿ã‚ˆã‚Šã‚‚çµ„ç¹”ã¨ã—ã¦ã®å¿ƒãŒã‘ãŒå¤§äº‹ã ã¨æ€ã„ã¾ã—ãŸã€‚ç™ºè¡¨ã®æ€§è³ªã‚„æ™‚é–“ã®éƒ½åˆä¸ŠSREã§ã®è©±ã«ç•™ã‚ãŸã®ã§ã™ãŒã€å“è³ªç®¡ç†ã«ã¤ã„ã¦ã‚‚è¨€åŠã—ãªãŒã‚‰ã¾ã¨ã‚ã¦ã„ãæ´»å‹•ã‚‚ã—ãŸã„ã€‚çµ„ç¹”ã‚’ä½œã£ã¦ã„ããªã‚‰ä¸‹ã®2å†Šã¯ã¨ã¦ã‚‚ã‚ªã‚¹ã‚¹ãƒ¡ã§ã™ã€‚å¿ƒç†çš„å®‰å…¨æ€§ã®ã¤ãã‚Šã‹ãŸã€€ã€Œå¿ƒç†çš„æŸ”è»Ÿæ€§ã€ãŒå›°é›£ã‚’ä¹—ã‚Šè¶Šãˆã‚‹ãƒãƒ¼ãƒ ã«å¤‰ãˆã‚‹ä½œè€…:çŸ³äº•é¼ä»‹æ—¥æœ¬èƒ½ç‡å”ä¼šãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆã‚»ãƒ³ã‚¿ãƒ¼Amazonå¤±æ•—ã®ç§‘å­¦ å¤±æ•—ã‹ã‚‰å­¦ç¿’ã™ã‚‹çµ„ç¹”ã€å­¦ç¿’ã§ããªã„çµ„ç¹”ä½œè€…:ãƒã‚·ãƒ¥ãƒ¼ãƒ»ã‚µã‚¤ãƒ‰ãƒ‡ã‚£ã‚¹ã‚«ãƒ´ã‚¡ãƒ¼ãƒ»ãƒˆã‚¥ã‚¨ãƒ³ãƒ†ã‚£ãƒ¯ãƒ³Amazonå“è³ªç®¡ç†ã«ã¤ã„ã¦ã¯ã“ã¡ã‚‰ã‚’å‚è€ƒã«ã—ã¾ã—ãŸã€‚å¤±æ•—ã‚’å¾Œæ‚”ã™ã‚‹ã€Œæ¥ã€ã¨ã—ã¦æ‰ãˆã¦ã¯ã„ã‘ãªã„ã€‚å­¦ç¿’ã™ã‚‹æ©Ÿä¼šã¨æ‰ãˆã€æ¬¡ã«æ´»ã‹ã›ã°è‰¯ã„ã€‚ãã®ãŸã‚ã®ã‚¹ã‚­ãƒ«ãŒå“è³ªç®¡ç†ã€‚ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«å“è³ªç®¡ç†ã®åŸºæœ¬ ç¬¬5ç‰ˆä½œè€…:å†…ç”° æ²»æ—¥çµŒBPãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°(æ—¥æœ¬çµŒæ¸ˆæ–°èå‡ºç‰ˆAmazonç™»å£‡ã—ãŸå¾¡ç¤¼ã‚’ã„ãŸã ã„ãŸã€‚ã€ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆã«ã©ã†å¯¾å¿œã—ã¦ããŸã‹ï¼Ÿã¿ã‚“ãªã§å­¦ã¶ãƒã‚¹ãƒˆãƒ¢ãƒ¼ãƒ†ãƒ  Lunch LTã€ã¨ã„ã†ã‚¤ãƒ™ãƒ³ãƒˆç™»å£‡ã®å¾¡ç¤¼å“ã‚’ã„ãŸã ã‘ã¾ã—ãŸã€‚ã€€#LT_findy pic.twitter.com/9ll5ig0ZjAâ€” nwiizo (@nwiizo) 2023å¹´2æœˆ21æ—¥  å‚è€ƒè³‡æ–™SREã¨ã¯ãªã«ã‹https://sreake.com/blog/what-is-sre/è‰¯ã„ãƒã‚¹ãƒˆãƒ¢ãƒ¼ãƒ†ãƒ ã‚’åŸ·ç­†ã™ã‚‹ãŸã‚ã«å¿…è¦ãª5ã¤ã®ãƒã‚¤ãƒ³ãƒˆhttps://sreake.com/blog/5point-good-postmortem/Part III. Practiceshttps://sre.google/sre-book/part-III-practices/SRE ã‚µã‚¤ãƒˆãƒªãƒ©ã‚¤ã‚¢ãƒ“ãƒªãƒ†ã‚£ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°https://www.oreilly.co.jp/books/9784873117911/ã‚¦ã‚§ãƒ–ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³https://www.oreilly.co.jp/books/9784873114934/Postmortem Culture: Learning from Failurehttps://sre.google/sre-book/postmortem-culture/ãƒãƒ¼ãƒ ãŒæ©Ÿèƒ½ã™ã‚‹ã¨ã¯ã©ã†ã„ã†ã“ã¨ã‹â”€â”€ã€Œå­¦ç¿’åŠ›ã€ã¨ã€Œå®Ÿè¡ŒåŠ›ã€ã‚’é«˜ã‚ã‚‹å®Ÿè·µã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚ˆã‚Šhttps://www.amazon.co.jp/dp/B00N8J1NPQ]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[GitHub Actions ã‹ã‚‰ ECR ã« Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ push ã™ã‚‹]]></title>
            <link>https://zenn.dev/kou_pg_0131/articles/gh-actions-ecr-push-image</link>
            <guid>https://zenn.dev/kou_pg_0131/articles/gh-actions-ecr-push-image</guid>
            <pubDate>Wed, 08 Feb 2023 10:03:48 GMT</pubDate>
            <content:encoded><![CDATA[å‚™å¿˜éŒ²ã€‚ ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ä»Šå›ç´¹ä»‹ã™ã‚‹ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã®ãƒªãƒã‚¸ãƒˆãƒªã§ç®¡ç†ã—ã¦ã„ã¾ã™ã€‚https://github.com/koki-develop/github-actions-ecr-push-example æº–å‚™ 1. GitHub Actions ç”¨ã® ID ãƒ—ãƒ­ãƒã‚¤ãƒ€ã¨ IAM ãƒ­ãƒ¼ãƒ«ã‚’ä½œæˆã™ã‚‹GitHub Actions ã§ OIDC ã‚’ä½¿ç”¨ã—ã¦ AWS èªè¨¼ã‚’è¡Œã†ãŸã‚ã«ã€ä¸‹è¨˜ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚è€ƒã« ID ãƒ—ãƒ­ãƒã‚¤ãƒ€ã¨ IAM ãƒ­ãƒ¼ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚https://zenn.dev/kou_pg_0131/articles/gh-actions-oidc-aw...]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[OpenSLO ã¨ã¯ï¼Ÿ]]></title>
            <link>https://sreake.com/blog/openslo/</link>
            <guid>https://sreake.com/blog/openslo/</guid>
            <pubDate>Tue, 07 Feb 2023 03:37:40 GMT</pubDate>
            <content:encoded><![CDATA[ã¯ã˜ã‚ã« OpenSLO ã®æ¦‚è¦ã«è§¦ã‚ŒãªãŒã‚‰ SLO as Code ã®ç¾çŠ¶ã«ã¤ã„ã¦ãŠè©±ã—ã—ã¾ã™ã€‚ OpenSLOã¨ã¯ï¼Ÿ OpenSLO ã¨ã¯ã€ã‚µãƒ¼ãƒ“ã‚¹ãƒ¬ãƒ™ãƒ«ç›®æ¨™ (SLO)ã€ãã‚Œã«é–¢é€£ã™ã‚‹ãƒªã‚½ãƒ¼ã‚¹ã®è¨˜è¿°å½¢å¼ã‚’æ¨™æº–åŒ–ã™ã‚‹ [â€¦]The post OpenSLO ã¨ã¯ï¼Ÿ first appeared on sreake.com | æ ªå¼ä¼šç¤¾ã‚¹ãƒªãƒ¼ã‚·ã‚§ã‚¤ã‚¯.]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ã®ã‚¿ã‚°ä¸€è¦§ã‚’å–å¾—ã™ã‚‹ docker-tags CLI ã®ç´¹ä»‹]]></title>
            <link>https://zenn.dev/kou_pg_0131/articles/docker-tags-cli-usage</link>
            <guid>https://zenn.dev/kou_pg_0131/articles/docker-tags-cli-usage</guid>
            <pubDate>Mon, 06 Feb 2023 09:19:35 GMT</pubDate>
            <content:encoded><![CDATA[æ¦‚è¦Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ã®ã‚¿ã‚°ä¸€è¦§ã‚’å–å¾—ã™ã‚‹ docker-tags CLI ã‚’å…¬é–‹ã—ã¾ã—ãŸã€‚https://github.com/koki-develop/docker-tagsä»¥ä¸‹ã®ã‚ˆã†ã«ä»»æ„ã® Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ã®ã‚¿ã‚°ä¸€è¦§ã‚’å–å¾—ã—ã¦å‡ºåŠ›ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚$ docker-tags alpinelatestedge3.9.63.9.53.9.4# ...# åå‰ä»˜ãã§å‡ºåŠ›ã™ã‚‹ã“ã¨ã‚‚ã§ãã‚‹$ docker-tags alpine -nalpine:latestalpine:edgealpine:3.9.6alpine:3.9.5alpin...]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[GitHub Actions ã§ GitHub ã®ç”»åƒã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢ã™ã‚‹]]></title>
            <link>https://zenn.dev/kou_pg_0131/articles/hub-purge-action-usage</link>
            <guid>https://zenn.dev/kou_pg_0131/articles/hub-purge-action-usage</guid>
            <pubDate>Mon, 30 Jan 2023 10:22:30 GMT</pubDate>
            <content:encoded><![CDATA[GitHub ã§ã¯ README ãªã©ã«è¼‰ã›ãŸç”»åƒã¯ Camo ã¨ã„ã†ç”»åƒãƒ—ãƒ­ã‚­ã‚·çµŒç”±ã§ https://camo.githubusercontent.com/... ã®ã‚ˆã†ãª URL ã§é…ä¿¡ã•ã‚Œã‚‹ã®ã§ã™ãŒã€ãŸã¾ã«ã“ã‚Œã‚‰ã®ç”»åƒãŒé•·æœŸé–“ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã¦ã—ã¾ã†ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚ä¾‹ãˆã°åƒ•ã® GitHub Profile ã«ã¯ Badge Generator ã§ä½œæˆã—ãŸ Zenn ã‚„ Qiita ã®ãƒãƒƒã‚¸ã‚’è¡¨ç¤ºã—ã¦ã„ã‚‹ã®ã§ã™ãŒã€ã“ã‚Œã‚‰ã®ç”»åƒãŒé•·æœŸé–“ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã¦æ­£ã—ã„æ•°å€¤ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ãªã„ã“ã¨ãŒã‚ã‚Šã¾ã—ãŸã€‚GitHub Profileã“ã‚Œã‚‰ã®ç”»åƒã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢ã™ã‚‹ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆãªã©...]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[GitLabã§æŒ‡å®šã—ãŸã‚°ãƒ«ãƒ¼ãƒ—å†…ã®å…¨ã¦ã®ãƒªãƒã‚¸ãƒˆãƒªã‚’ä¸€æ‹¬ã§cloneã™ã‚‹]]></title>
            <link>https://zenn.dev/tayusa/articles/ae5911391c9440</link>
            <guid>https://zenn.dev/tayusa/articles/ae5911391c9440</guid>
            <pubDate>Sun, 29 Jan 2023 17:07:31 GMT</pubDate>
            <content:encoded><![CDATA[æ¦‚è¦1å€‹1å€‹ä¸¹ç²¾è¾¼ã‚ã¦æ‰‹å‹•ã§cloneã™ã‚‹ã“ã¨ã«é™ç•Œã‚’æ„Ÿã˜ãŸã®ã§ã€ä¸€æ‹¬ã§è‡ªåˆ†ã«é–¢é€£ã™ã‚‹ãƒªãƒã‚¸ãƒˆãƒªã‚’cloneã™ã‚‹ ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆ.zshrc# ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã¦ã‹ã‚‰cloneã™ã‚‹# ç¬¬1å¼•æ•° URL(https://gitlab.example.com/diaspora/diaspora-client.git)function git_clone_to_path() {  [[ -z ${commands[git]} ]] \    && { echo 'git is required'; return 1; }  loca...]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[GitHub ã® README ã¯ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä»¥å¤–ã«ã‚‚ç½®ã‘ã‚‹]]></title>
            <link>https://zenn.dev/kou_pg_0131/articles/github-readme-path</link>
            <guid>https://zenn.dev/kou_pg_0131/articles/github-readme-path</guid>
            <pubDate>Thu, 26 Jan 2023 10:02:07 GMT</pubDate>
            <content:encoded><![CDATA[Twitter ã§ä»¥ä¸‹ã®ãƒ„ã‚¤ãƒ¼ãƒˆã‚’è¦‹ã‹ã‘ã¾ã—ãŸã€‚https://twitter.com/azu_re/status/1614458485055586305ãã“ã§èª¿ã¹ã¦ã¿ãŸã¨ã“ã‚ã€ GitHub ã§ã¯æ¬¡ã®å ´æ‰€ã«ç½®ã‹ã‚Œã¦ã„ã‚‹ README ã‚’èªè­˜ã™ã‚‹ã‚ˆã†ã§ã™ã€‚.github/ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªdocs/è¤‡æ•°ã® README ãŒå«ã¾ã‚Œã¦ã„ã‚‹å ´åˆã¯ã€ .github/ ã€ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã€ docs/ ã®é †ã«å„ªå…ˆã•ã‚Œã¾ã™ã€‚ä¾‹ãˆã°å†’é ­ã®ãƒ„ã‚¤ãƒ¼ãƒˆã® reduxjs/redux-toolkit ã¯ .github/ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã« README.md (æ­£ç¢ºã«ã¯ pa...]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[ã€Terraformã€‘CloudFront Functions ã‚’ä½¿ç”¨ã—ã¦ Basic èªè¨¼ã‚’è¨­å®šã™ã‚‹]]></title>
            <link>https://zenn.dev/kou_pg_0131/articles/tf-cloudfront-basicauth</link>
            <guid>https://zenn.dev/kou_pg_0131/articles/tf-cloudfront-basicauth</guid>
            <pubDate>Mon, 23 Jan 2023 10:22:18 GMT</pubDate>
            <content:encoded><![CDATA[ãŸã¾ã«å¿…è¦ã«ãªã‚‹ã®ã§ãƒ¡ãƒ¢ã€‚ æ¤œè¨¼ç’°å¢ƒTerraform v1.3.7AWS Provider v4.49.0 ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ä»Šå›ç´¹ä»‹ã™ã‚‹ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã¯ä¸‹è¨˜ãƒªãƒã‚¸ãƒˆãƒªã§ç®¡ç†ã—ã¦ã„ã¾ã™ã€‚https://github.com/koki-develop/cloudfront-basic-auth-example æº–å‚™ä»Šå›ã¯ä¾‹ã¨ã—ã¦ S3 ãƒã‚±ãƒƒãƒˆã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’é…ä¿¡ã™ã‚‹ CloudFront Distribution ã‚’ä½œæˆã—ã¾ã™ã€‚ä¸»é¡Œã§ã¯ãªã„ã®ã§æ°—ã«ãªã‚‹æ–¹ã®ã¿èª­ã‚“ã§ãã ã•ã„ã€‚ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰provider.tf# AWS Provider ã®è¨­å®šprov...]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[aws-vault ã®ã™ã™ã‚]]></title>
            <link>https://sreake.com/blog/aws-vault/</link>
            <guid>https://sreake.com/blog/aws-vault/</guid>
            <pubDate>Thu, 19 Jan 2023 05:45:36 GMT</pubDate>
            <content:encoded><![CDATA[aws-vault ã¨ã¯ AWS ã®èªè¨¼æƒ…å ±ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã«å®‰å…¨ã«ä¿ç®¡ã™ã‚‹äº‹ãŒå‡ºæ¥ã‚‹ CLI ãƒ„ãƒ¼ãƒ« GitHub Star 7Kâ­ (2022-12-22ç¾åœ¨) brew ã§ä¸‹è¨˜ã®ã‚³ãƒãƒ³ãƒ‰ã®ã‚ˆã†ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¯èƒ½ ãƒªãƒã‚¸ãƒˆ [â€¦]The post aws-vault ã®ã™ã™ã‚ first appeared on sreake.com | æ ªå¼ä¼šç¤¾ã‚¹ãƒªãƒ¼ã‚·ã‚§ã‚¤ã‚¯.]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[yaml ç®¡ç†ã‚’è‡ªå‹•åŒ–ã™ã‚‹æ™‚ã®å¿…é ˆé“å…· yq(v4) ã®å€’ã—æ–¹]]></title>
            <link>https://syu-m-5151.hatenablog.com/entry/2023/01/17/011521</link>
            <guid>https://syu-m-5151.hatenablog.com/entry/2023/01/17/011521</guid>
            <pubDate>Mon, 16 Jan 2023 16:15:21 GMT</pubDate>
            <content:encoded><![CDATA[yq ã¨ã¯yq ã¯goã§æ›¸ã‹ã‚Œã¦ã„ã‚‹è»½é‡ã§ãƒãƒ¼ã‚¿ãƒ–ãƒ«ãªã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ YAMLã€JSONã€XML ãƒ—ãƒ­ã‚»ãƒƒã‚µã§ã™ã€‚yq ã¯ jq ã«ä¼¼ãŸæ§‹æ–‡ã‚’ä½¿ç”¨ã—ã¾ã™ãŒã€jsonã€xmlã€propertiesã€csvã€tsv ã¨åŒæ§˜ã« yaml ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‡¦ç†ã—ã¾ã™ã€‚è¨˜äº‹ã®åŸ·ç­†æ™‚ç‚¹ã®2023 å¹´01æœˆ17æ—¥æ™‚ç‚¹ã§v4.30.8 ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¦ã„ã¾ã™ã€‚github.comyqyq ã®v4 ã¯v3 ã¨ã¯ã‹ãªã‚Šç•°ãªã£ã¦ã„ã¾ã™ã€‚v3 ã§ç«¯çš„ã«æ›¸ã‘ã¦ã„ãŸã‚‚ã®ãŒã€v4 ã§ã¯ã‚ˆã‚Šè¡¨ç¾åŠ›ã®ã‚ã‚‹æ§‹æ–‡è¨€èªã¨ãªã£ãŸçµæœã¨ã—ã¦ã¡ã‚‡ã£ã¨å†—é•·ã«ãªã£ãŸã‚ˆã†ã«æ€ãˆã‚‹ã‚“ã§ã™ã‘ã©jq ã£ã½ã„ã®ã§æ…£ã‚Œã¦ã—ã¾ãˆã°ã‚ˆã„ã‚‚ã®ã ã¨ãŠã‚‚ã„ã¾ã™ ã€‚mikefarah.gitbook.ioyq ä½¿ã£ã¦ã¿ã‚‹ä»Šå›ã®ç›®çš„ã¯application/deployment.yaml ã®imageã®å€¤ã‚’nginx:1.14.2ã‚’nginx:1.23.3ã«æ›¸ãæ›ãˆãŸã„ã¨æ€ã„ã¾ã™ã€‚yaml ã‚’CIã§å¤‰æ›´ã™ã‚‹ãªã‚“ã¦ãªã‚“ã¼ã§ã‚‚ã‚„ã£ã¦ã¾ã™ã‹ã‚‰ã­ã€‚Path ãªã©ã®æ¦‚å¿µã«ã¤ã„ã¦ã¯èª¬æ˜ã‚’çœç•¥ã—ã¾ã™ã€‚æ™®é€šã«ã‚·ã‚§ãƒ«èŠ¸ã¨ã—ã¦ã‚„ã£ã¦ã„ãã¨ãã«ã¯1æ—¥1å•ã€åŠå¹´ä»¥å†…ã«ç¿’å¾—ã€€ã‚·ã‚§ãƒ«ãƒ»ãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼160æœ¬ãƒãƒƒã‚¯ãªã©ã‚’å‚è€ƒã«ã™ã‚‹ã¨è‰¯ã„ã€‚apiVersion: apps/v1kind: Deploymentmetadata:  name: nginx-deploymentspec:  selector:    matchLabels:      app: nginx  replicas: 2 # tells deployment to run 2 pods matching the template  template:    metadata:      labels:        app: nginx    spec:      containers:      - name: nginx        image: nginx:1.14.2 # æ›¸ãæ›ãˆãŸã„ã‚“ã˜ã‚ƒ        ports:        - containerPort: 80yq(v4) ä½¿ã£ã¦ã¿ã‚‹yq(v4) ã§readyq '.spec.template.spec.containers[0].image' deployment.yamlnginx:1.14.2yq(v4) ã§writeyq -i '.spec.template.spec.containers[0].image = "nginx:1.23.3"' deployment.yamlç¢ºèªã—ã¾ã™ã€‚yq '.spec.template.spec.containers[0].image' deployment.yamlnginx:1.23.3ã§ç›®çš„é”æˆã—ã¾ã—ãŸç°¡å˜ï¼yq(v3) ã¨ã®é•ã„yq(v3) ã«ã¯writeã‚„readãªã©ã®ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ãŒæ’¤å»ƒã•ã‚ŒãŸã®ã§æº–æ‹ ã—ãŸæ›¸ãæ–¹ã‚’è¦šãˆã‚‹å¿…è¦ãŒã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚mikefarah.gitbook.ioyq(v4) ã§ã®å¤‰æ•°åˆ©ç”¨yq(v4)ã§ã¯strenv(<env>)ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§å¤‰æ•°ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã‚‹IMAGE=nginx yq -i '.spec.template.spec.containers[0].image = strenv(IMAGE)' deployment.yamlç¢ºèªã—ã¾ã™ã€‚yq '.spec.template.spec.containers[0].image' deployment.yaml nginxï¾”ï½¯ï¾€ï¾ˆ!!å·¦è¾ºã«ã¯ã“ã¡ã‚‰ä»£å…¥ã§ããªã„ã¿ãŸã„ãªã®ã§ãã®ã¨ãã«ã¯ä½œæˆã—ã¦ã‹ã‚‰yq ã«èª­ã‚€ã“ã¾ã›ã‚‹ã¨è‰¯ã„ã¿ãŸã„(ä»–ã«ã„ã„æ–¹æ³•ãŒã‚ã‚Œã°æ•™ãˆã¦ã»ã—ã„ã§ã™)ã€‚    YQ_INPLACE=".${EXE_APP}.image.tag = \"${TAG_HASH}\""    yq -i "${YQ_INPLACE}" "$CHANGE_FILE"ãŠã‚ã‚Šv3 -> v4 ã«ã¯å¤‰æ›´ç‚¹ãŒã„ãã¤ã‹ã‚ã‚Šã¾ã™ã€‚çš†ã•ã‚“ã‚‚CIã§ä½¿ã£ã¦ã„ã‚‹æ™‚ã¯æ°—ã‚’ã¤ã‘ã¾ã—ã‚‡ã†ã€‚ã‚ã¨ã¯CI ã§æ›¸ãæ›ãˆã§ä½¿ã£ã¦ã„ã‚‹æ™‚ã¯-vã‚’ä½¿ã£ã¦ãŠãã¾ã—ã‚‡ã†ã€‚1æ—¥1å•ã€åŠå¹´ä»¥å†…ã«ç¿’å¾—ã€€ã‚·ã‚§ãƒ«ãƒ»ãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼160æœ¬ãƒãƒƒã‚¯ Software Design plusä½œè€…:ä¸Šç”° éš†ä¸€,å±±ç”° æ³°å®,ç”°ä»£ å‹ä¹Ÿ,ä¸­æ‘ å£®ä¸€,ä»Šæ³‰ å…‰ä¹‹,ä¸Šæ‰ å°šå²æŠ€è¡“è©•è«–ç¤¾Amazon]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[GoReleaser ã§ Go è£½ CLI ã®ãƒªãƒªãƒ¼ã‚¹ã‚’è‡ªå‹•åŒ–ï¼† Homebrew ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹]]></title>
            <link>https://zenn.dev/kou_pg_0131/articles/goreleaser-usage</link>
            <guid>https://zenn.dev/kou_pg_0131/articles/goreleaser-usage</guid>
            <pubDate>Mon, 16 Jan 2023 10:09:24 GMT</pubDate>
            <content:encoded><![CDATA[GoReleaser ã¨ GitHub Actions ã‚’ä½¿ã£ã¦ Go ã§ä½œã£ãŸ CLI ã®ãƒªãƒªãƒ¼ã‚¹ã‚’è‡ªå‹•åŒ–ã—ã¦ã€ã¤ã„ã§ã« Homebrew ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã¾ã§ã®æ‰‹é †ãƒ¡ãƒ¢ã§ã™ã€‚ã¡ãªã¿ã«å…ˆæ—¥ã€ Go ã§ CLI ã‚’ä½œã‚‹æ™‚ã«ä¾¿åˆ©ã ã£ãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ã¤ã„ã¦ç°¡å˜ã«ç´¹ä»‹ã™ã‚‹è¨˜äº‹ã‚’å…¬é–‹ã—ã¾ã—ãŸã€‚ã“ã¡ã‚‰ã‚‚èˆˆå‘³ãŒã‚ã‚Œã°è¦‹ã¦ã¿ã¦ãã ã•ã„ã€‚https://zenn.dev/kou_pg_0131/articles/go-cli-packages æ¤œè¨¼ç’°å¢ƒGo v1.19GoReleaser v1.14.1GoReleaser Action v4.1.0 GoReleas...]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[ã€Istioâ›µï¸ã€‘ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã®ä»•çµ„ã¿]]></title>
            <link>https://hiroki-hasegawa.hatenablog.jp/entry/2023/01/14/223815</link>
            <guid>https://hiroki-hasegawa.hatenablog.jp/entry/2023/01/14/223815</guid>
            <pubDate>Sat, 14 Jan 2023 13:38:15 GMT</pubDate>
            <content:encoded><![CDATA[01. ã¯ã˜ã‚ã«02. ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ã«ã‚ˆã‚‹ã‚µãƒ¼ãƒ“ã‚¹ãƒ¡ãƒƒã‚·ãƒ¥ãªãœã‚µã‚¤ãƒ‰ã‚«ãƒ¼ãŒå¿…è¦ãªã®ã‹ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ãƒ—ãƒ­ã‚­ã‚·ãƒ¡ãƒƒã‚·ãƒ¥03. admission-controllersã‚¢ãƒ‰ã‚ªãƒ³ã«ã¤ã„ã¦admission-controllersã‚¢ãƒ‰ã‚ªãƒ³ã¨ã¯admissionãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ç¨®é¡MutatingAdmissionWebhookãƒ—ãƒ©ã‚°ã‚¤ãƒ³MutatingAdmissionWebhookãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¨ã¯AdmissionReviewã€AdmissionRequestã€AdmissionResponseâ–¼ AdmissionReviewâ–¼ AdmissionRequestâ–¼ AdmissionResponse04. ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã®ä»•çµ„ã¿å…¨ä½“ã®ãƒ•ãƒ­ãƒ¼ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ â¡ï¸ kube-apiserverã“ã“ã§èª¬æ˜ã™ã‚‹ãƒ•ãƒ­ãƒ¼ç®‡æ‰€ã€ï¼‘ã€‘ Podã®ä½œæˆã‚’ãƒªã‚¯ã‚¨ã‚¹ãƒˆkube-apiserver â¡ï¸ Serviceã“ã“ã§èª¬æ˜ã™ã‚‹ãƒ•ãƒ­ãƒ¼ç®‡æ‰€ã€ï¼’ã€‘ èªè¨¼èªå¯å‡¦ç†ã‚’ã‚³ãƒ¼ãƒ«ã€ï¼“ã€‘ ã‚¢ãƒ‰ã‚ªãƒ³ã®å‡¦ç†ã‚’ã‚³ãƒ¼ãƒ«ã€ï¼”ã€‘ AdmissionRequestã«å€¤ã‚’è©°ã‚ã‚‹ã€ï¼•ã€‘ AdmissionReviewã‚’é€ä¿¡Service â¡ï¸ webhookã‚µãƒ¼ãƒãƒ¼ã“ã“ã§èª¬æ˜ã™ã‚‹ãƒ•ãƒ­ãƒ¼ç®‡æ‰€ã€ï¼–ã€‘ 15017ç•ªãƒãƒ¼ãƒˆã«ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°kube-apiserver â¬…ï¸ Service â¬…ï¸ webhookã‚µãƒ¼ãƒãƒ¼ã“ã“ã§èª¬æ˜ã™ã‚‹ãƒ•ãƒ­ãƒ¼ç®‡æ‰€ã€ï¼—ã€‘ patchå‡¦ç†ã‚’å®šç¾©ã€ï¼˜ã€‘ AdmissionResponseã«å€¤ã‚’è©°ã‚ã‚‹ã€ï¼™ã€‘ AdmissionReviewã‚’è¿”ä¿¡kube-apiserver â¡ï¸ etcdã“ã“ã§èª¬æ˜ã™ã‚‹ãƒ•ãƒ­ãƒ¼ç®‡æ‰€ã€ï¼‘ï¼ã€‘ patchå‡¦ç†ã‚’ã‚³ãƒ¼ãƒ«ã€ï¼‘ï¼‘ã€‘ ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’æ°¸ç¶šåŒ–ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ â¬…ï¸ kube-apiserverã“ã“ã§èª¬æ˜ã™ã‚‹ãƒ•ãƒ­ãƒ¼ç®‡æ‰€ã€ï¼‘ï¼’ã€‘ ã‚³ãƒ¼ãƒ«å®Œäº†ã‚’è¿”ä¿¡ä»¥é™ã®ä»•çµ„ã¿05. ãŠã‚ã‚Šã«01. ã¯ã˜ã‚ã«ã©ãƒ¼ã‚‚ã€‚æ­£æœˆã§æ¿€å¤ªã‚Šã—ã¾ã—ãŸãŒã€ãƒ€ã‚¤ã‚¨ãƒƒãƒˆã®äºˆå®šã¯ã‚ã‚Šã¾ã›ã‚“ğŸ™‹ğŸ»â€â™‚ï¸ä»Šå›ã¯ã€ã‚µãƒ¼ãƒ“ã‚¹ãƒ¡ãƒƒã‚·ãƒ¥ã‚’å®Ÿè£…ã™ã‚‹Istioã®ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã«é–¢ã™ã‚‹è¨˜äº‹ã‚’æŠ•ç¨¿ã—ã¾ã—ãŸğŸš€å‰å›ã®è¨˜äº‹ã«å¼•ãç¶šãIstioã§ã™ã€‚åŸ·ç­†æ™‚ç‚¹ (2023/01/14) ã§ã¯ã€IstioãŒå®Ÿè£…ã™ã‚‹ã‚µãƒ¼ãƒ“ãƒ¡ãƒƒã‚·ãƒ¥ã«ã¯ã€ã€ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ãƒ—ãƒ­ã‚­ã‚·ãƒ¡ãƒƒã‚·ãƒ¥ã€ã¨ã€ã‚¢ãƒ³ãƒ“ã‚¨ãƒ³ãƒˆãƒ¡ãƒƒã‚·ãƒ¥ã€ãŒã‚ã‚Šã¾ã™ã€‚ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ãƒ—ãƒ­ã‚­ã‚·ãƒ¡ãƒƒã‚·ãƒ¥ã®ä»•çµ„ã¿ã®è»¸ã«ãªã£ã¦ã„ã‚‹ã‚‚ã®ã¯ã€ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ã‚³ãƒ³ãƒ†ãƒŠã§ã‚ã‚‹istio-proxyã‚³ãƒ³ãƒ†ãƒŠã§ã™ã€‚Istioã¯ã€Kubernetesã®Podã®ä½œæˆæ™‚ã«ã€istio-proxyã‚³ãƒ³ãƒ†ãƒŠã‚’Podå†…ã«è‡ªå‹•çš„ã«ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ (æ³¨å…¥) ã—ã¾ã™æœ¬è¨˜äº‹ã§ã¯ã€ã“ã®ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ã®ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã®ä»•çµ„ã¿ã‚’ã‚‚ã‚Šã‚‚ã‚Šå¸ƒæ•™ã—ã‚ˆã†ã¨æ€ã„ã¾ã™ğŸ˜— (æ²¼ã®ã¾ã‚ã‚Šã«é¤Œã‚’ã¾ã)02. ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ã«ã‚ˆã‚‹ã‚µãƒ¼ãƒ“ã‚¹ãƒ¡ãƒƒã‚·ãƒ¥ãªãœã‚µã‚¤ãƒ‰ã‚«ãƒ¼ãŒå¿…è¦ãªã®ã‹ãã‚‚ãã‚‚ã€ãªãœã‚µãƒ¼ãƒ“ã‚¹ãƒ¡ãƒƒã‚·ãƒ¥ã§ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ãŒå¿…è¦ã«ãªã£ãŸã®ã§ã—ã‚‡ã†ã‹ğŸ¤”ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®ã‚·ã‚¹ãƒ†ãƒ ã«ã¯ã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å›ºæœ‰ã®ã‚¤ãƒ³ãƒ•ãƒ©é ˜åŸŸã®å•é¡Œ (ä¾‹ï¼šã‚µãƒ¼ãƒ“ã‚¹ãƒ‡ã‚£ã‚¹ã‚«ãƒãƒªãƒ¼ã®å¿…è¦æ€§ã€ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹é–“é€šä¿¡ã®æš—å·åŒ–ã€ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªãƒ¼åé›†ã€ãªã©) ãŒã‚ã‚Šã¾ã™ã€‚ã‚¢ãƒ—ãƒªã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãŒå„ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹å†…ã«ã‚¤ãƒ³ãƒ•ãƒ©é ˜åŸŸã®å•é¡Œã«é–¢ã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ã‚’å®Ÿè£…ã™ã‚Œã°ã€ã“ã‚Œã‚‰ã®å•é¡Œã®è§£æ±ºã§ãã¾ã™ã€‚ã—ã‹ã—ã€ã‚¢ãƒ—ãƒªã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¯ã‚¢ãƒ—ãƒªé ˜åŸŸã®å•é¡Œã«è²¬å‹™ã‚’æŒã¡ã€ã‚¤ãƒ³ãƒ•ãƒ©é ˜åŸŸã®å•é¡Œã¯ã‚¤ãƒ³ãƒ•ãƒ©ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã§è§£æ±ºã™ã‚‹ã‚ˆã†ã«ã—ãŸæ–¹ãŒã€äº’ã„ã«åŠ¹ç‡çš„ã«é–‹ç™ºã§ãã¾ã™ã€‚ãã“ã§ã€ã‚¤ãƒ³ãƒ•ãƒ©é ˜åŸŸã®å•é¡Œã‚’è§£æ±ºã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ã‚’ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ã¨ã—ã¦åˆ‡ã‚Šåˆ†ã‘ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ã‚¢ãƒ—ãƒªã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¨ã‚¤ãƒ³ãƒ•ãƒ©ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®è²¬å‹™ã‚’åˆ†é›¢ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ã¾ãŸã€ã‚¤ãƒ³ãƒ•ãƒ©é ˜åŸŸã®å…±é€šãƒ­ã‚¸ãƒƒã‚¯ã‚’ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ã¨ã—ã¦å„ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã«æä¾›ã§ãã‚‹ãŸã‚ã€å˜ç´”æ€§ãŒé«˜ã¾ã‚Šã¾ã™ã€‚ã“ã†ã„ã£ãŸæµã‚Œã®ä¸­ã§ã€ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ã‚’ä½¿ç”¨ã—ãŸã‚µãƒ¼ãƒ“ã‚¹ãƒ¡ãƒƒã‚·ãƒ¥ãŒç™»å ´ã—ã¾ã—ãŸã€‚â†ªï¸ å‚è€ƒï¼šã‚µãƒ¼ãƒ“ã‚¹ãƒ¡ãƒƒã‚·ãƒ¥ã€IstioãŒãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯åˆ¶å¾¡ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã€å¯è¦³æ¸¬æ€§ã«æ¬ ã‹ã›ãªã„ç†ç”±ï¼šCloud Nativeãƒãƒ¼ãƒˆã‚·ãƒ¼ãƒˆï¼ˆ9ï¼‰ - ï¼ ITWhat is Service Mesh and Why is it Necessary?ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ãƒ—ãƒ­ã‚­ã‚·ãƒ¡ãƒƒã‚·ãƒ¥Istioã®ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ã«ã‚ˆã‚‹ã‚µãƒ¼ãƒ“ã‚¹ãƒ¡ãƒƒã‚·ãƒ¥ (ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ãƒ—ãƒ­ã‚­ã‚·ãƒ¡ãƒƒã‚·ãƒ¥) ã¯ã€ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ã‚³ãƒ³ãƒ†ãƒŠ (istio-proxyã‚³ãƒ³ãƒ†ãƒŠ) ãŒç¨¼åƒã™ã‚‹ãƒ‡ãƒ¼ã‚¿ãƒ—ãƒ¬ãƒ¼ãƒ³ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ã‚’ä¸­å¤®é›†æ¨©çš„ã«ç®¡ç†ã™ã‚‹Istiod (discoveryã‚³ãƒ³ãƒ†ãƒŠ) ãŒç¨¼åƒã™ã‚‹ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ—ãƒ¬ãƒ¼ãƒ³ã‹ã‚‰ãªã‚Šã¾ã™ã€‚â†ªï¸ å‚è€ƒï¼šIstio / Architecture03. admission-controllersã‚¢ãƒ‰ã‚ªãƒ³ã«ã¤ã„ã¦admission-controllersã‚¢ãƒ‰ã‚ªãƒ³ã¨ã¯Istioã®Podå†…ã¸ã®ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã®å‰æçŸ¥è­˜ã¨ã—ã¦ã€admission-controllersã‚¢ãƒ‰ã‚ªãƒ³ã‚’ç†è§£ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã‚‚ã—ã€admission-controllersã‚¢ãƒ‰ã‚ªãƒ³ã‚’ã”å­˜çŸ¥ã®æ–¹ã¯ã€ 04. ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã®ä»•çµ„ã¿ ã¾ã§é£›ã°ã—ã¦ãã ã•ã„ğŸ™‡ğŸ»â€â™‚ï¸kube-apiserverã§ã¯ã€admission-controllersã‚¢ãƒ‰ã‚ªãƒ³ã¨ã—ã¦æœ‰åŠ¹åŒ–ã§ãã¾ã™ã€‚æœ‰åŠ¹åŒ–ã™ã‚‹ã¨ã€èªè¨¼ã‚¹ãƒ†ãƒƒãƒ—ã¨èªå¯ã‚¹ãƒ†ãƒƒãƒ—ã®å¾Œã«mutating-admissionã‚¹ãƒ†ãƒƒãƒ—ã¨validating-admissionã‚¹ãƒ†ãƒƒãƒ—ã‚’å®Ÿè¡Œã§ãã€admissionãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ç¨®é¡ã«å¿œã˜ãŸå‡¦ç†ã‚’æŒ¿å…¥ã§ãã¾ã™ã€‚ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ (kubectlã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã€Kubernetesãƒªã‚½ãƒ¼ã‚¹) ã‹ã‚‰ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆ (ä¾‹ï¼šKubernetesãƒªã‚½ãƒ¼ã‚¹ã«å¯¾ã™ã‚‹ä½œæˆ/æ›´æ–°/å‰Šé™¤ã€kube-apiserverã‹ã‚‰ã®ãƒ—ãƒ­ã‚­ã‚·ã¸ã®è»¢é€) æ™‚ã«ã€å„ã‚¹ãƒ†ãƒƒãƒ—ã§admissionãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã«ã‚ˆã‚‹å‡¦ç† (ä¾‹ï¼šã‚¢ãƒ‰ã‚ªãƒ³ãƒ“ãƒ«ãƒˆã‚¤ãƒ³å‡¦ç†ã€ç‹¬è‡ªå‡¦ç†) ã‚’ç™ºç«ã•ã›ã‚‰ã‚Œã¾ã™ã€‚â†ªï¸ å‚è€ƒï¼šAdmission Controllers Reference | KubernetesKubernetes Best Practices: Blueprints for Building Successful Applications on Kubernetes: Burns, Brendan, Villalba, Eddie, Strebel, Dave, Evenson, Lachlan: 9781492056478: Amazon.com: Booksadmissionãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ç¨®é¡admission-controllersã‚¢ãƒ‰ã‚ªãƒ³ã®admissionãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã«ã¯ã€ãŸãã•ã‚“ã®ç¨®é¡ãŒã‚ã‚Šã¾ã™ã€‚IstioãŒPodå†…ã«ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ã‚’ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã™ã‚‹æ™‚ã«ä½¿ç”¨ã—ã¦ã„ã‚‹ã‚¢ãƒ‰ã‚ªãƒ³ã¯ã€ã€MutatingAdmissionWebhookã€ã§ã™ã€‚CertificateApprovalCertificateSigningCertificateSubjectRestrictionDefaultIngressClassDefaultStorageClassDefaultTolerationSecondsLimitRangerMutatingAdmissionWebhook ğŸ‘ˆ ã“ã‚Œï¼NamespaceLifecyclePersistentVolumeClaimResizePodSecurityPriorityResourceQuotaRuntimeClassServiceAccountStorageObjectInUseProtectionTaintNodesByConditionValidatingAdmissionWebhookâ†ªï¸ å‚è€ƒï¼šAdmission Controllers Reference | KubernetesMutatingAdmissionWebhookãƒ—ãƒ©ã‚°ã‚¤ãƒ³MutatingAdmissionWebhookãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¨ã¯MutatingAdmissionWebhookãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€mutating-admissionã‚¹ãƒ†ãƒƒãƒ—æ™‚ã«ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆå†…å®¹ã‚’å¤‰æ›´ã™ã‚‹å‡¦ç†ã‚’ãƒ•ãƒƒã‚¯ã§ãã¾ã™ã€‚ãƒ•ãƒƒã‚¯ã™ã‚‹å…·ä½“çš„ãªå‡¦ç†ã¨ã—ã¦ã€webhookã‚µãƒ¼ãƒãƒ¼ã«AdmissionRequestãƒªã‚¯ã‚¨ã‚¹ãƒˆã¨ã—ã¦é€ä¿¡ã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®AdmissionResponseã«å¿œã˜ã¦ãƒªã‚¯ã‚¨ã‚¹ãƒˆå†…å®¹ã‚’å‹•çš„ã«å¤‰æ›´ã—ã¾ã™ã€‚MutatingWebhookConfigurationã§ã€MutatingAdmissionWebhookãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ç™ºç«æ¡ä»¶ã‚„webhookã‚µãƒ¼ãƒãƒ¼ã®å®›å…ˆæƒ…å ±ã‚’è¨­å®šã—ã¾ã™ã€‚MutatingWebhookConfigurationã®å…·ä½“çš„ãªå®Ÿè£…ã«ã¤ã„ã¦ã¯ã€ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã®ä»•çµ„ã¿ã®ä¸­ã§èª¬æ˜ã—ã¦ã„ãã¾ã™ã€‚â†ªï¸ å‚è€ƒï¼šDiving into Kubernetes MutatingAdmissionWebhook | by Morven Cao | IBM Cloud | MediumKubernetes Admission Webhookè¦šæ›¸ã - gashirar's blogAdmission Webhookã‚’ä½œã£ã¦éŠã‚“ã§ã€ãã®ä»•çµ„ã¿ã‚’ç†è§£ã—ã‚ˆã†ï¼ˆèª¬æ˜ç·¨ï¼‰AdmissionReviewã€AdmissionRequestã€AdmissionResponseâ–¼ AdmissionReviewAdmissionReviewã¯ä»¥ä¸‹ã®ã‚ˆã†ãªJSONã§ã‚ã‚Šã€kube-apiserverã¨webhookã‚µãƒ¼ãƒãƒ¼ã®é–“ã§AdmissionRequestã¨AdmissionResponseã‚’é‹ã³ã¾ã™ã€‚{  "apiVersion": "admission.k8s.io/v1",  "kind": "AdmissionReview",  # AdmissionRequest  "request": {},  # AdmissionResponse  "response": {},}â†ªï¸ å‚è€ƒï¼šv1 package - k8s.io/api/admission/v1 - Go Packagesâ–¼ AdmissionRequestAdmissionRequestã¯ä»¥ä¸‹ã®ã‚ˆã†ãªJSONã§ã™ã€‚kube-apiserverãŒã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰å—ä¿¡ã—ãŸæ“ä½œå†…å®¹ãŒæŒã¤ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚ä¾‹ã§æŒ™ã’ãŸAdmissionRequestã§ã¯ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒDeploymentã‚’CREATEæ“ä½œã™ã‚‹ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’kube-apiserverã«é€ä¿¡ã—ãŸã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚{  "apiVersion": "admission.k8s.io/v1",  "kind": "AdmissionReview",  # AdmissionRequest  "request": {    ...    # å¤‰æ›´ã•ã‚Œã‚‹Kubernetesãƒªã‚½ãƒ¼ã‚¹ã®ç¨®é¡ã‚’è¡¨ã™ã€‚    "resource": {      "group": "apps",      "version": "v1",      "resource": "deployments"    },    # kube-apiserverã®æ“ä½œã®ç¨®é¡ã‚’è¡¨ã™ã€‚    "operation": "CREATE",    ...  }}â†ªï¸ å‚è€ƒï¼šDynamic Admission Control | Kubernetesâ–¼ AdmissionResponseä¸€æ–¹ã§AdmissionResponseã¯ã€ä¾‹ãˆã°ä»¥ä¸‹ã®ã‚ˆã†ãªJSONã§ã™ã€‚AdmissionResponseã«å¿œã˜ãŸãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆå¤‰æ›´å‡¦ç†ã‚’patchã‚­ãƒ¼ã®å€¤ã«æŒã¡ã€ã“ã‚Œã¯base64æ–¹å¼ã§ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚Œã¦ã„ã¾ã™ã€‚{  "apiVersion": "admission.k8s.io/v1",  "kind": "AdmissionReview",  # AdmissionResponse  "response": {      "uid": "<value from request.uid>",      # å®›å…ˆã®webhookã‚µãƒ¼ãƒãƒ¼ãŒå—ä¿¡ã—ãŸã‹å¦ã‹ã‚’è¡¨ã™ã€‚      "allowed": true,      # Pathã«ã‚ˆã‚‹Patchå‡¦ç†ã‚’è¡Œã†ã€‚      "patchType": "JSONPatch",      # Patchå‡¦ç†ã®å¯¾è±¡ã¨ãªã‚‹Kubernetesãƒªã‚½ãƒ¼ã‚¹ã¨å‡¦ç†å†…å®¹ã‚’è¡¨ã™ã€‚base64æ–¹å¼ã§ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚Œã¦ã„ã‚‹ã€‚      "patch": "W3sib3AiOiAiYWRkIiwgInBhdGgiOiAiL3NwZWMvcmVwbGljYXMiLCAidmFsdWUiOiAzfV0=",    },}ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰å€¤ã‚’ãƒ‡ã‚³ãƒ¼ãƒ‰ã—ã¦ã¿ã‚‹ã¨ã€ä¾‹ãˆã°ä»¥ä¸‹ã®ã‚ˆã†ãªpatchå‡¦ç†ãŒå®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚# patchã‚­ãƒ¼ã‚’base64æ–¹å¼ã§ãƒ‡ã‚³ãƒ¼ãƒ‰ã—ãŸå ´åˆ[{"op": "add", "path": "/spec/replicas", "value": 3}]ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã«å¯¾ã™ã‚‹æ“ä½œ (op) ã€ã‚­ãƒ¼ (path) ã€å€¤ (value) ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã™ã€‚kube-apiserverãŒã“ã‚Œã‚’å—ä¿¡ã™ã‚‹ã¨ã€æŒ‡å®šã•ã‚ŒãŸã‚­ãƒ¼ (.spec.replicas) ã«å€¤ (3) ã«è¿½åŠ ã—ã¾ã™ã€‚â†ªï¸ å‚è€ƒï¼šDynamic Admission Control | Kubernetes04. ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã®ä»•çµ„ã¿å…¨ä½“ã®ãƒ•ãƒ­ãƒ¼å‰æçŸ¥è­˜ã‚’è¸ã¾ãˆãŸä¸Šã§ã€admission-controllersã‚¢ãƒ‰ã‚ªãƒ³ã®ä»•çµ„ã¿ã®ä¸­ã§ã€ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ã®istio-proxyã‚³ãƒ³ãƒ†ãƒŠãŒã©ã®ã‚ˆã†ã«Podã«ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã•ã‚Œã‚‹ã®ã‹ã‚’è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚æœ€åˆã«ã€ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã®ãƒ•ãƒ­ãƒ¼ã¯ä»¥ä¸‹ã®é€šã‚Šã«ãªã£ã¦ã„ã¾ã™ã€‚ç”»åƒã®æ–‡å­—ãŒå°ã•ããªã£ã¦ã—ã¾ã£ãŸãŸã‚ã€æ‹¡å¤§ã—ã¦ã„ãŸã ã‘ã‚‹ã¨ğŸ™‡ğŸ»â€â™‚ï¸â†ªï¸ å‚è€ƒï¼šAmazon.co.jp: Istio in Action (English Edition) é›»å­æ›¸ç±: Posta, Christian E., Maloku, Rinor: æ´‹æ›¸ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ â¡ï¸ kube-apiserverã“ã“ã§èª¬æ˜ã™ã‚‹ãƒ•ãƒ­ãƒ¼ç®‡æ‰€ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ â¡ï¸ kube-apiserverã€ã®ç®‡æ‰€ã‚’èª¬æ˜ã—ã¾ã™ã€‚ã€ï¼‘ã€‘ Podã®ä½œæˆã‚’ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¾ãšã¯ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒkube-apiserverã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã™ã‚‹ã¨ã“ã‚ã§ã™ã€‚ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ (Deploymentã€DaemonSetã€StatefulSetã€ã‚’å«ã‚€) ã¯ã€Podã®ä½œæˆãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’kube-apiserverã«é€ä¿¡ã—ã¾ã™ã€‚ã“ã®æ™‚ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆå†…å®¹ã¯ã€ä»¥ä¸‹ã®é€šã‚Šã¨ã—ã¾ã™ã€‚# Podã‚’ä½œæˆã™ã‚‹ã€‚$ kubectl apply -f foo-pod.yaml# foo-pod.yamlãƒ•ã‚¡ã‚¤ãƒ«apiVersion: v1kind: Podmetadata:  name: foo-pod  namespace: foo-namespacespec:  containers:    - name: foo      image: foo:1.0.0      ports:        - containerPort: 80ã¾ãŸNamespaceã§ã¯ã€ã‚ã‚‰ã‹ã˜ã‚istio-proxyã‚³ãƒ³ãƒ†ãƒŠã®ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ãŒæœ‰åŠ¹åŒ–ã•ã‚Œã¦ã„ã‚‹ã¨ã—ã¾ã™ã€‚Istioã§ã¯v1.10ä»¥é™ã€ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã®ç•ªå·ã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’ä½¿ç”¨ã—ã¦ã€istio-proxyã‚³ãƒ³ãƒ†ãƒŠã®ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã‚’æœ‰åŠ¹åŒ–ã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã¯ã©ã‚“ãªå€¤ã§ã‚‚å•é¡Œãªãã€ã‚ˆãã‚ã‚‹ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã¨ã—ã¦defaultã‚„stableãªã©ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚apiVersion: v1kind: Namespacemetadata:  name: foo-namespace  labels:    # istio-proxyã‚³ãƒ³ãƒ†ãƒŠã®ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã‚’æœ‰åŠ¹åŒ–ã™ã‚‹ã€‚    # ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã¯è‡ªç”±    istio.io/rev: <ã‚¨ã‚¤ãƒªã‚¢ã‚¹>â†ªï¸ å‚è€ƒï¼šIstio / Announcing Support for 1.8 to 1.10 Direct Upgradeskube-apiserver â¡ï¸ Serviceã“ã“ã§èª¬æ˜ã™ã‚‹ãƒ•ãƒ­ãƒ¼ç®‡æ‰€ã€kube-apiserver â¡ï¸ Serviceã€ã®ç®‡æ‰€ã‚’èª¬æ˜ã—ã¾ã™ã€‚ã€ï¼’ã€‘ èªè¨¼èªå¯å‡¦ç†ã‚’ã‚³ãƒ¼ãƒ«kube-apiserverã¯ã€èªè¨¼ã‚¹ãƒ†ãƒƒãƒ—ã¨èªå¯ã‚¹ãƒ†ãƒƒãƒ—ã«ã¦ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’è¨±å¯ã—ã¾ã™ã€‚ã€ï¼“ã€‘ ã‚¢ãƒ‰ã‚ªãƒ³ã®å‡¦ç†ã‚’ã‚³ãƒ¼ãƒ«kube-apiserverã¯ã€mutating-admissionã‚¹ãƒ†ãƒƒãƒ—ã«ã¦ã€MutatingAdmissionWebhookãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®å‡¦ç†ã‚’ã‚³ãƒ¼ãƒ«ã—ã¾ã™ã€‚å‰æçŸ¥è­˜ã®éƒ¨åˆ†ã§å…·ä½“çš„ãªå®Ÿè£…ã‚’çœç•¥ã—ã¾ã—ãŸãŒã€Istioã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³1.14.3æ™‚ç‚¹ã§ã€MutatingWebhookConfigurationã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚Namespaceã§ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã‚’æœ‰åŠ¹åŒ–ã™ã‚‹æ™‚ã«ä½¿ç”¨ã—ãŸã‚¨ã‚¤ãƒªã‚¢ã‚¹ã¯ã€ã“ã®MutatingWebhookConfigurationã§å®Ÿä½“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ç•ªå·ã¨ç´ã¥ã„ã¦ã„ã¾ã™ã€‚$ kubectl get mutatingwebhookconfiguration istio-revision-tag-default -o yamlapiVersion: admissionregistration.k8s.io/v1beta1kind: MutatingWebhookConfigurationmetadata:  name: istio-revision-tag-default  labels:    app: sidecar-injector    # ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã®å®Ÿä½“    istio.io/rev: <ãƒªãƒ“ã‚¸ãƒ§ãƒ³ç•ªå·>    # ãƒªãƒ“ã‚¸ãƒ§ãƒ³ç•ªå·ã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹    istio.io/tag: <ã‚¨ã‚¤ãƒªã‚¢ã‚¹>webhooks:  - name: rev.namespace.sidecar-injector.istio.io    # MutatingAdmissionWebhookãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®å‡¦ç†ã®ç™ºç«æ¡ä»¶ã‚’ç™»éŒ²ã™ã‚‹ã€‚    rules:      - apiGroups: [""]        apiVersions: ["v1"]        operations: ["CREATE"]        resources: ["pods"]        scope: "*"    # Webhookã®å‰æ®µã«ã‚ã‚‹Serviceã®æƒ…å ±ã‚’ç™»éŒ²ã™ã‚‹ã€‚    clientConfig:      service:        name: istiod-<ãƒªãƒ“ã‚¸ãƒ§ãƒ³ç•ªå·>        namespace: istio-system        path: "/inject" # ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ        port: 443      caBundle: Ci0tLS0tQk ...    # Namespaceå˜ä½ã®ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³    # ç‰¹å®šã®Namespaceã§MutatingAdmissionWebhookãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®å‡¦ç†ã‚’ç™ºç«ã•ã›ã‚‹ã€‚    namespaceSelector:      matchExpressions:        - key: istio.io/rev          operator: DoesNotExist        - key: istio-injection          operator: DoesNotExist    # Podå˜ä½ã®ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³    # ç‰¹å®šã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§MutatingAdmissionWebhookãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®å‡¦ç†ã‚’ç™ºç«ã•ã›ã‚‹ã€‚    objectSelector:      matchExpressions:        - key: sidecar.istio.io/inject          operator: NotIn          values:            - "false"        - key: istio.io/rev          operator: In          values:            - <ã‚¨ã‚¤ãƒªã‚¢ã‚¹>    ...MutatingWebhookConfigurationã«ã¯ã€MutatingAdmissionWebhookãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ç™ºç«æ¡ä»¶ã‚„webhookã‚µãƒ¼ãƒãƒ¼ã®å®›å…ˆæƒ…å ±ã‚’å®šç¾©ã—ã¾ã™ã€‚MutatingAdmissionWebhookãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ç™ºç«æ¡ä»¶ã«é–¢ã—ã¦ã€ä¾‹ãˆã°Istioã§ã¯ã€ Namespaceã‚„Pod.metadata.labelsã‚­ãƒ¼ã«å¿œã˜ã¦ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã®æœ‰åŠ¹åŒ–/ç„¡åŠ¹åŒ–ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ã“ã¨ãŒã§ãã€ã“ã‚Œã‚’MutatingAdmissionWebhookãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§åˆ¶å¾¡ã—ã¦ã„ã¾ã™ã€‚webhookã‚µãƒ¼ãƒãƒ¼ã®å®›å…ˆæƒ…å ±ã«é–¢ã—ã¦ã€Istioã§ã¯webhookã‚µãƒ¼ãƒãƒ¼ã®å‰æ®µã«Serviceã‚’é…ç½®ã—ã¦ã„ã¾ã™ã€‚MutatingAdmissionWebhookãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒç™ºç«ã—ãŸå ´åˆã€Serviceã®/inject:443ã«HTTPSãƒ—ãƒ­ãƒˆã‚³ãƒ«ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã™ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚ã¾ãŸã€é€ä¿¡å…ˆã®Serviceã®åå‰ãŒistiod-<ãƒªãƒ“ã‚¸ãƒ§ãƒ³ç•ªå·>ã¨ãªã£ã¦ã„ã‚‹ã“ã¨ã‹ã‚‰ã‚‚ã‚ã‹ã‚‹ã‚ˆã†ã«ã€Serviceã¯ç‰¹å®šã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®Istiodã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ—ãƒ¬ãƒ¼ãƒ³ã«å¯¾å¿œã—ã¦ãŠã‚Šã€æƒ³å®šå¤–ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®Istiodã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ—ãƒ¬ãƒ¼ãƒ³ã‚’æŒ‡å®šã—ãªã„ã‚ˆã†ã«åˆ¶å¾¡ã—ã¦ã„ã¾ã™ã€‚ä¸€æ–¹ã§ç™ºç«ã—ãªã‹ã£ãŸå ´åˆã«ã¯ã€ä»¥é™ã®AdmissionReviewã®å‡¦ç†ã«ã¯é€²ã¿ã¾ã›ã‚“ã€‚ã€ï¼”ã€‘ AdmissionRequestã«å€¤ã‚’è©°ã‚ã‚‹kube-apiserverã¯ã€mutating-admissionã‚¹ãƒ†ãƒƒãƒ—ã«ã¦ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆå†…å®¹ (Podã®ä½œæˆãƒªã‚¯ã‚¨ã‚¹ãƒˆ) ã‚’AdmissionReveiewæ§‹é€ ä½“ã®AdmissionRequestã«è©°ã‚ã¾ã™ã€‚{  "apiVersion": "admission.k8s.io/v1",  "kind": "AdmissionReview",  # AdmissionRequest  "request": {    ...    # å¤‰æ›´ã•ã‚Œã‚‹Kubernetesãƒªã‚½ãƒ¼ã‚¹ã®ç¨®é¡ã‚’è¡¨ã™ã€‚    "resource": {      "group": "core",      "version": "v1",      "resource": "pods"    },    # kube-apiserverã®æ“ä½œã®ç¨®é¡ã‚’è¡¨ã™ã€‚    "operation": "CREATE",    ...  }}ã€ï¼•ã€‘ AdmissionReviewã‚’é€ä¿¡kube-apiserverã¯ã€mutating-admissionã‚¹ãƒ†ãƒƒãƒ—ã«ã¦ã€Serviceã®/inject:443ã«AdmissionReviewæ§‹é€ ä½“ã‚’é€ä¿¡ã—ã¾ã™ã€‚Service â¡ï¸ webhookã‚µãƒ¼ãƒãƒ¼ã“ã“ã§èª¬æ˜ã™ã‚‹ãƒ•ãƒ­ãƒ¼ç®‡æ‰€ã€Service â¡ï¸ webhookã‚µãƒ¼ãƒãƒ¼ã€ã®ç®‡æ‰€ã‚’èª¬æ˜ã—ã¾ã™ã€‚ã€ï¼–ã€‘ 15017ç•ªãƒãƒ¼ãƒˆã«ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°Serviceã¯ã€/inject:443ã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å—ä¿¡ã—ã€discoveryã‚³ãƒ³ãƒ†ãƒŠã®15017ç•ªãƒãƒ¼ãƒˆã«ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã—ã¾ã™ã€‚Istioã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³1.14.3æ™‚ç‚¹ã§ã€Serviceã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚$ kubectl get svc istiod-service -n istio-system -o yamlapiVersion: v1kind: Servicemetadata:  namespace: istio-system  name: istiod-<ãƒªãƒ“ã‚¸ãƒ§ãƒ³ç•ªå·>  labels:    app: istiodspec:  type: ClusterIP  selector:    app: istiod    istio.io/rev: <ãƒªãƒ“ã‚¸ãƒ§ãƒ³ç•ªå·>  ports:    - name: grpc-xds      port: 15010      protocol: TCP      targetPort: 15010    - name: https-dns      port: 15012      protocol: TCP      targetPort: 15012    # webhookã‚µãƒ¼ãƒãƒ¼ã«ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã™ã‚‹ã€‚    - name: https-webhook      port: 443      protocol: TCP      targetPort: 15017    - name: http-monitoring      port: 15014      protocol: TCP      targetPort: 15014.spec.selector.istio.io/revã‚­ãƒ¼ã«ã€ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°å…ˆã®Podã‚’æŒ‡å®šã™ã‚‹ãŸã‚ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ç•ªå·ãŒè¨­å®šã•ã‚Œã¦ãŠã‚Šã€ã“ã®Podã¯discoveryã‚³ãƒ³ãƒ†ãƒŠã‚’æŒã¡ã¾ã™ã€‚Istioã¯ã€discoveryã‚³ãƒ³ãƒ†ãƒŠå†…ã§webhookã‚µãƒ¼ãƒãƒ¼ã‚’å®Ÿè¡Œã—ã€15017ç•ªãƒãƒ¼ãƒˆã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å¾…ã¡å—ã‘ã¾ã™ã€‚ã“ã“ã§ã€discoveryã‚³ãƒ³ãƒ†ãƒŠãŒãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å¾…ã¡å—ã‘ã¦ã„ã‚‹ãƒãƒ¼ãƒˆç•ªå·ã‚’è¦‹ã¦ã¿ã‚‹ã¨ã€15017ç•ªãƒãƒ¼ãƒˆã§ãƒªãƒƒã‚¹ãƒ³ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã§ãã¾ã™ã€‚$ kubectl exec foo-istiod -n istio-system -- netstat -tulpnActive Internet connections (only servers)Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program nametcp        0      0 127.0.0.1:9876          0.0.0.0:*               LISTEN      1/pilot-discoverytcp6       0      0 :::15017                :::*                    LISTEN      1/pilot-discoverytcp6       0      0 :::8080                 :::*                    LISTEN      1/pilot-discoverytcp6       0      0 :::15010                :::*                    LISTEN      1/pilot-discoverytcp6       0      0 :::15012                :::*                    LISTEN      1/pilot-discoverytcp6       0      0 :::15014                :::*                    LISTEN      1/pilot-discoveryâ†ªï¸ å‚è€ƒï¼šistio/webhook.go at 1.14.3 Â· istio/istio Â· GitHubIstio / Application Requirementskube-apiserver â¬…ï¸ Service â¬…ï¸ webhookã‚µãƒ¼ãƒãƒ¼ã“ã“ã§èª¬æ˜ã™ã‚‹ãƒ•ãƒ­ãƒ¼ç®‡æ‰€ã€kube-apiserver â¬…ï¸ Service â¬…ï¸ webhookã‚µãƒ¼ãƒãƒ¼ã€ã®ç®‡æ‰€ã‚’èª¬æ˜ã—ã¾ã™ã€‚ã€ï¼—ã€‘ patchå‡¦ç†ã‚’å®šç¾©ä»•çµ„ã¿ã®ä¸­ã§ã‚‚ã€ã“ã“ã¯é‡è¦ãªéƒ¨åˆ†ã§ã™ã€‚discoveryã‚³ãƒ³ãƒ†ãƒŠå†…ã®webhookã‚µãƒ¼ãƒãƒ¼ã¯ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆå†…å®¹ã‚’æ›¸ãæ›ãˆã‚‹ãŸã‚ã®patchå‡¦ç†ã‚’å®šç¾©ã—ã¾ã™ã€‚webhookã‚µãƒ¼ãƒãƒ¼ã¯ã€ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã®.spec.containers[1]ãƒ‘ã‚¹ã«istio-proxyã‚­ãƒ¼ã‚’è¿½åŠ ã•ã›ã‚‹ã‚ˆã†ãªpatchå‡¦ç†ã‚’å®šç¾©ã—ã¾ã™ã€‚ã“ã®å®šç¾©ã«ã‚ˆã£ã¦ã€çµæœçš„ã«ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ã®ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ãŒèµ·ã“ã‚‹ã¨ã„ã†ã“ã¨ã«ãªã‚Šã¾ã™ã€‚[  ...  {    "op": "add",    # .spec.initContainers[1] ã‚’æŒ‡å®šã™ã‚‹ã€‚    "path": "/spec/initContainers/1",    # ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã«è¿½åŠ ã•ã‚Œã‚‹æ§‹é€ ã‚’è¡¨ã™ã€‚    "value": {      "name": "istio-init",      "resources": {                     ...      }    }  },  {    "op": "add",    # .spec.containers[1] ã‚’æŒ‡å®šã™ã‚‹ã€‚    "path": "/spec/containers/1",    # ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã«è¿½åŠ ã•ã‚Œã‚‹æ§‹é€ ã‚’è¡¨ã™ã€‚    "value": {      "name": "istio-proxy",      "resources": {                     ...      }    }  }  ...]â†ªï¸ å‚è€ƒï¼šistio/webhook.go at a19b2ac8af3ad937640f6e29eed74472034de2f5 Â· istio/istio Â· GitHubistio/webhook_test.go at 1.14.3 Â· istio/istio Â· GitHubæœ¬é¡Œã¨è©±ãŒé€¸ã‚Œã‚‹ãŸã‚ä»Šå›ã¯è©³ã—ãè¨€åŠã—ã¾ã›ã‚“ãŒã€ä¸Šè¨˜ã®pathcå‡¦ç†ã§ã¯ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ã‚³ãƒ³ãƒ†ãƒŠã®istio-proxyã‚³ãƒ³ãƒ†ãƒŠã®ä»–ã«ã€initã‚³ãƒ³ãƒ†ãƒŠã®istio-initã‚³ãƒ³ãƒ†ãƒŠã‚‚ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚ã“ã®istio-initã‚³ãƒ³ãƒ†ãƒŠã¯ã€istio-proxyã‚³ãƒ³ãƒ†ãƒŠã‚’æŒã¤Podã§ã‚¤ãƒ³ãƒã‚¦ãƒ³ãƒ‰/ã‚¢ã‚¦ãƒˆãƒã‚¦ãƒ³ãƒ‰é€šä¿¡ã®çµŒè·¯ã‚’åˆ¶å¾¡ã§ãã‚‹ã‚ˆã†ã«ã€Podå†…ã«iptablesã®ãƒ«ãƒ¼ãƒ«ã‚’é©ç”¨ã™ã‚‹è²¬å‹™ã‚’æ‹…ã£ã¦ã„ã¾ã™ğŸ’ªğŸ»â†ªï¸ å‚è€ƒï¼šIstio Sidecar's interception mechanism for traffic - SoByteã€ï¼˜ã€‘ AdmissionResponseã«å€¤ã‚’è©°ã‚ã‚‹discoveryã‚³ãƒ³ãƒ†ãƒŠå†…ã®webhookã‚µãƒ¼ãƒãƒ¼ã¯ã€patchå‡¦ç†ã®å®šç¾©ã‚’AdmissionReveiewæ§‹é€ ä½“ã®AdmissionResponseã«è©°ã‚ã¾ã™ã€‚patchã‚­ãƒ¼ã®å€¤ã«ã€å…ˆã»ã©ã®patchå‡¦ç†ã®å®šç¾©ã‚’base64æ–¹å¼ã§ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã—ãŸæ–‡å­—åˆ—ãŒå‰²ã‚Šå½“ã¦ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚{  "apiVersion": "admission.k8s.io/v1",  "kind": "AdmissionReview",  # AdmissionResponse  "response": {      "uid": "*****",      "allowed": true,      "patchType": "JSONPatch",      # Patchå‡¦ç†ã®å¯¾è±¡ã¨ãªã‚‹Kubernetesãƒªã‚½ãƒ¼ã‚¹ã¨å‡¦ç†å†…å®¹ã‚’è¡¨ã™ã€‚base64æ–¹å¼ã§ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚Œã¦ã„ã‚‹ã€‚      "patch": "<å…ˆã»ã©ã®patchå‡¦ç†ã®å®šç¾©ã‚’base64æ–¹å¼ã§ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã—ãŸæ–‡å­—åˆ—>",    },}â†ªï¸ å‚è€ƒï¼šistio/webhook.go at 1.14.3 Â· istio/istio Â· GitHubã€ï¼™ã€‘ AdmissionReviewã‚’è¿”ä¿¡discoveryã‚³ãƒ³ãƒ†ãƒŠå†…ã®webhookã‚µãƒ¼ãƒãƒ¼ã¯ã€AdmissionReviewæ§‹é€ ä½“ã‚’ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã¨ã—ã¦kube-apiserverã«è¿”ä¿¡ã—ã¾ã™ã€‚kube-apiserver â¡ï¸ etcdã“ã“ã§èª¬æ˜ã™ã‚‹ãƒ•ãƒ­ãƒ¼ç®‡æ‰€ã€kube-apiserver â¡ï¸ etcdã€ã®ç®‡æ‰€ã‚’èª¬æ˜ã—ã¾ã™ã€‚ã€ï¼‘ï¼ã€‘ patchå‡¦ç†ã‚’ã‚³ãƒ¼ãƒ«kube-apiserverã¯ã€AdmissionReviewæ§‹é€ ä½“ã‚’å—ä¿¡ã—ã€AdmissionResponseã«å¿œã˜ã¦ãƒªã‚¯ã‚¨ã‚¹ãƒˆå†…å®¹ã‚’æ›¸ãæ›ãˆã¾ã™ã€‚patchå‡¦ç†ã®å®šç¾©ã‚’AdmissionReviewæ§‹é€ ä½“ã‹ã‚‰å–ã‚Šå‡ºã—ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆå†…å®¹ã‚’æ›¸ãæ›ãˆã¾ã™ã€‚å…·ä½“çš„ã«ã¯ã€istio-proxyã‚³ãƒ³ãƒ†ãƒŠã¨istio-initã‚³ãƒ³ãƒ†ãƒŠã‚’ä½œæˆã§ãã‚‹ã‚ˆã†ã«ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã—ãŸãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã®è©²å½“ç®‡æ‰€ã«ã‚­ãƒ¼ã‚’è¿½åŠ ã—ã¾ã™ã€‚apiVersion: v1kind: Podmetadata:  name: foo-pod  namespace: foo-namespacespec:  containers:    - name: foo      image: foo:1.0.0      ports:        - containerPort: 80    # kube-apiserverãŒè¿½åŠ     - name: istio-proxy      ...  # kube-apiserverãŒè¿½åŠ   initContainers:    - name: istio-init    ...ã€ï¼‘ï¼‘ã€‘ ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’æ°¸ç¶šåŒ–kube-apiserverã¯ã€etcdã«Podã®ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’æ°¸ç¶šåŒ–ã—ã¾ã™ã€‚ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ â¬…ï¸ kube-apiserverã“ã“ã§èª¬æ˜ã™ã‚‹ãƒ•ãƒ­ãƒ¼ç®‡æ‰€ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ â¬…ï¸ kube-apiserverã€ã®ç®‡æ‰€ã‚’èª¬æ˜ã—ã¾ã™ã€‚ã€ï¼‘ï¼’ã€‘ ã‚³ãƒ¼ãƒ«å®Œäº†ã‚’è¿”ä¿¡kube-apiserverã¯ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å—ä¿¡ã—ã¾ã™ã€‚$ kubectl apply -f foo-pod.yaml# kube-apiserverã‹ã‚‰ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒè¿”ã£ã¦ãã‚‹pod "foo-pod" createdä»¥é™ã®ä»•çµ„ã¿kube-apiserverã¯ã€ä»–ã®Nodeã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ (kube-controlleretcdã€kube-schedulerã€kubeletã€ãªã©) ã¨é€šä¿¡ã—ã€Podã‚’ä½œæˆã—ã¾ã™ã€‚ã“ã®Podã®ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã¯ã€ã‚¢ãƒ—ãƒªã‚³ãƒ³ãƒ†ãƒŠã®ä»–ã«ã€istio-proxyã‚³ãƒ³ãƒ†ãƒŠã¨istio-initã‚³ãƒ³ãƒ†ãƒŠã‚’æŒã¡ã¾ã™ã€‚çµæœã¨ã—ã¦ã€ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ã‚³ãƒ³ãƒ†ãƒŠã®istio-proxyã‚³ãƒ³ãƒ†ãƒŠã‚’ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã—ãŸã“ã¨ã«ãªã‚Šã¾ã™ã€‚æœ¬é¡Œã¨è©±ãŒé€¸ã‚Œã‚‹ãŸã‚ä»Šå›ã¯è©³ã—ãè¨€åŠã—ã¾ã›ã‚“ãŒã€kube-apiserverã¨ä»–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®é€šä¿¡ã«ã¤ã„ã¦ã¯ã€ä»¥ä¸‹ã®æ–¹ã®è¨˜äº‹ã¨å›³ãŒéå¸¸ã«å‚è€ƒã«ãªã‚‹ã¨æ€ã„ã¾ã™ğŸ™‡ğŸ»â€â™‚ï¸â†ªï¸ å‚è€ƒï¼šKubernetes Master Components: Etcd, API Server, Controller Manager, and Scheduler | by Jorge Acetozi | jorgeacetozi | Medium05. ãŠã‚ã‚Šã«Istioã®ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã®ä»•çµ„ã¿ã‚’ã‚‚ã‚Šã‚‚ã‚Šå¸ƒæ•™ã—ã¾ã—ãŸã€‚Istioã¸ã®æ„›ãŒæº¢ã‚Œã¦ã—ã¾ã„ã¾ã—ãŸã€‚ä»Šå›ç™»å ´ã—ãŸMutatingAdmissionWebhookãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã«é–¢ã—ã¦ã€ç§ã®é–¢ã‚ã£ã¦ã„ã‚‹ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã§ã¯Istioä»¥å¤– (ä¾‹ï¼šCertManagerã€Prometheusã€AWSã®aws-eks-vpc-cniã‚¢ãƒ‰ã‚ªãƒ³ã€ãªã©) ã§ã‚‚ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚ãã®ãŸã‚ã€MutatingAdmissionWebhookãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ã©ã®ã‚ˆã†ã«ä½¿ã£ã¦ã„ã‚‹ã®ã‹ã‚’ä¸€åº¦çŸ¥ã‚Œã°ã€çŸ¥è­˜ã®æ±ç”¨æ€§ãŒé«˜ã„ã¨è€ƒãˆã¦ã„ã¾ã™âœŒğŸ»ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã¯Istioã§ã‚‚åŸºæœ¬çš„ãªæ©Ÿèƒ½ã§ã‚ã‚Šã€ã‚‚ã—æœªä½“é¨“ã®æ–¹ãŒã„ã‚‰ã£ã—ã‚ƒã‚Œã°ã€ãŠæ‰‹å…ƒã§ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ã‚³ãƒ³ãƒ†ãƒŠãŒè¿½åŠ ã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ã„ãŸã ãã¨ã‚ˆã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ğŸ‘]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[2023å¹´1æœˆç‰ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ¬ã‚¹ç”Ÿæ´»ã¾ã¨ã‚]]></title>
            <link>https://pranc1ngpegasus.hatenablog.com/entry/2023/01/13/225206?utm_source=feed</link>
            <guid>https://pranc1ngpegasus.hatenablog.com/entry/2023/01/13/225206?utm_source=feed</guid>
            <pubDate>Fri, 13 Jan 2023 13:52:06 GMT</pubDate>
            <content:encoded><![CDATA[å»å¹´ã‚‚æ›¸ã„ãŸã®ã§ä»Šå¹´ã‚‚æ›¸ãã€‚pranc1ngpegasus.hatenablog.comå›³ãŠã‚ˆã³ä¸‹è¨˜æ–‡ç« ã«ãŠã‘ã‚‹ã€Œå¤«ã€ã¯ç­†è€…ã‚’æŒ‡ã™ã€‚ä¸»ãªã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆå†…å®¹å¤«ã®åå…¥ã®æµå…¥çµŒè·¯ãŒç°¡ç´ åŒ–ã•ã‚Œã¾ã—ãŸå¦»ãŒä½ä¿¡SBIãƒãƒƒãƒˆéŠ€è¡ŒãŠã‚ˆã³SBIè¨¼åˆ¸ã‚’é–‹è¨­ã—ã¾ã—ãŸå¦»ãŒã¤ã¿ãŸã¦NISAã‚’ã¯ã˜ã‚ã¾ã—ãŸ2021å¹´ã«ç”Ÿã¾ã‚ŒãŸç¬¬ä¸€å­ã‚’è¿½åŠ ã—ã¾ã—ãŸç¬¬ä¸€ç”Ÿå‘½NEOBANK2023å¹´1æœˆã‹ã‚‰ã‚µãƒ¼ãƒ“ã‚¹ãŒé–‹å§‹ã•ã‚ŒãŸç¬¬ä¸€ç”Ÿå‘½NEOBANKãŒè¿½åŠ ã•ã‚ŒãŸã€‚é€šå¸¸ã®ä½ä¿¡SBIãƒãƒƒãƒˆéŠ€è¡Œã¯15æ­³ä»¥ä¸Šã®ã¿å£åº§é–‹è¨­ãŒã§ãã‚‹ã®ã ãŒã€ç¬¬ä¸€ç”Ÿå‘½ã¨ã®ææºNEOBANKã§ã¯è¦ªãŒç¬¬ä¸€ç”Ÿå‘½æ”¯åº—ã«å£åº§ã‚’æŒã£ã¦ã„ã‚‹å ´åˆã«é™ã‚Š0æ­³ã‹ã‚‰å£åº§é–‹è¨­ãŒå¯èƒ½ã«ãªã£ãŸã€‚æˆ‘ãŒå®¶ã§ã¯SBIè¨¼åˆ¸ã‚’é€šã˜ã¦ã¤ã¿ãŸã¦NISAã‚„ã‚¸ãƒ¥ãƒ‹ã‚¢NISAã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹ã®ã§éŠ€è¡Œã‚‚ä½ä¿¡SBIãƒãƒƒãƒˆéŠ€è¡Œã§ã‚ã‚‹ã»ã†ãŒã‚ã‚ŠãŒãŸã„ã€‚ã“ã‚Œã¾ã§å­ã®éŠ€è¡Œå£åº§ã¯æ¥½å¤©éŠ€è¡Œã‚’ä½¿ã£ã¦ã„ãŸãŒã€ç¬¬ä¸€ç”Ÿå‘½NEOBANKã«ç§»è¡Œã—ãŸã“ã¨ã§è¦ªã‹ã‚‰å­ã¸ã®æŒ¯è¾¼æ‰‹æ•°æ–™ãªã©ãŒç™ºç”Ÿã—ãªããªã£ãŸã€‚ã€Œè¦ªãŒç¬¬ä¸€ç”Ÿå‘½æ”¯åº—ã«å£åº§ã‚’æŒã£ã¦ã„ã‚‹å ´åˆã«é™ã‚Šâ€¦ã€ã®åˆ¶ç´„ãŒã‚ã‚‹ã®ã§å¤«ã®ãŠã“ã¥ã‹ã„å£åº§ã‚‚ç¬¬ä¸€ç”Ÿå‘½NEOBANKã«ãªã£ãŸã€‚ã¾ã¨ã‚ã„ã‚ã‚“ãªã‚µãƒ¼ãƒ“ã‚¹ã‚’è©¦ã—ã¦ã¿ãŸã‚Šã€è¾ã‚ã¦ã¿ãŸã‚Šã—ã¦ã„ã‚‹ã¨æŒã¡ç‰©ãŒå¤šããªã£ã¦ã—ã¾ã£ã¦ç…©é›‘ã«ãªã‚‹ã€‚å¹´ã«ä¸€åº¦ã§ã‚‚å›³ã«èµ·ã“ã—ã¦ã¿ã‚‹ã¨ã€æœ¬å½“ã«å¿…è¦ãªã‚‚ã®ãªã®ã‹åˆ¤æ–­ã§ãã‚‹ã—ç„¡é§„ãªéƒ¨åˆ†ã«æ°—ã¥ã‘ã‚‹ã®ã§ãŠã™ã™ã‚ã€‚]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[xmllint ã§ HTML å†…ã®ä»»æ„ã®å€¤ã‚’å–ã‚Šå‡ºã™]]></title>
            <link>https://blog.1q77.com/2023/01/xmllint-html-xpath/</link>
            <guid>https://blog.1q77.com/2023/01/xmllint-html-xpath/</guid>
            <pubDate>Thu, 12 Jan 2023 14:40:51 GMT</pubDate>
            <content:encoded><![CDATA[ã‚µã‚¯ãƒƒã¨ shell script ã§ HTML ã®ä¸­ã®ä½•ã‹ã‚’å–ã‚Šå‡ºã—ãŸã„æ™‚ãŒã‚ã‚Šã¾ã™ã€‚ ãã‚“ãªæ™‚ã«ä½¿ãˆã‚‹ã®ãŒ xmllint. ã—ã£ã‹ã‚Šã‚„ã‚‹ãªã‚‰ python ã® Beautiful Soup ã‚’ä½¿ã£ãŸã‚Šã—ã¾ã™ãŒã€æœ¬å½“ã«ç°¡å˜ãªã“ã¨ã‚’ç°¡å˜ã«ã‚„ã‚ŠãŸã„å ´åˆã« xmllint]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[MongoDB Atlas ã®ç´¹ä»‹]]></title>
            <link>https://sreake.com/blog/mongodb-atlas/</link>
            <guid>https://sreake.com/blog/mongodb-atlas/</guid>
            <pubDate>Wed, 11 Jan 2023 23:57:02 GMT</pubDate>
            <content:encoded><![CDATA[MongoDB Atlas ã¨ã¯ MongoDB Atlas (ä»¥ä¸‹ Atlas ã¨ã„ã†)ã¯ã€MongoDB Inc.ã«ã‚ˆã£ã¦ä½œã‚‰ã‚ŒãŸ MongoDB ã® DBaaS(DB as a Service) ã§ã™ã€‚ Atlas [â€¦]The post MongoDB Atlas ã®ç´¹ä»‹ first appeared on sreake.com | æ ªå¼ä¼šç¤¾ã‚¹ãƒªãƒ¼ã‚·ã‚§ã‚¤ã‚¯.]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[GitHub Actions ã§æ©Ÿå¯†æ€§ã®ç„¡ã„å¤‰æ•°ã‚’è¨­å®šã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã®ã§è©¦ã—ã¦ã¿ã‚‹]]></title>
            <link>https://zenn.dev/kou_pg_0131/articles/gh-actions-configurations-variables</link>
            <guid>https://zenn.dev/kou_pg_0131/articles/gh-actions-configurations-variables</guid>
            <pubDate>Wed, 11 Jan 2023 10:07:51 GMT</pubDate>
            <content:encoded><![CDATA[GitHub Actions ã§å¤‰æ•°ã‚’è¨­å®šã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ ğŸ‰ğŸ‰ğŸ‰ğŸ‰https://github.blog/changelog/2023-01-10-github-actions-support-for-configuration-variables-in-workflows/ã“ã‚Œã¾ã§ã¯ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã§å†åˆ©ç”¨å¯èƒ½ãªå€¤ã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ã«ã¯ Secret ã¨ã—ã¦ä¿å­˜ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã—ãŸã€‚ã—ã‹ã— Secret ã¯ä¸€åº¦è¨­å®šã™ã‚‹ã¨å€¤ã‚’ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ããªã„ãŸã‚ã€æ©Ÿå¯†æ€§ã®ç„¡ã„ãƒ‡ãƒ¼ã‚¿ã§ã‚‚ã©ã‚“ãªå€¤ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ã‚’ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ããªã„ã®ãŒä¸ä¾¿ã§ã—ãŸã€‚ä»Šå›ã®æ›´æ–°ã§ã€æ©Ÿå¯†æ€§ã®ç„¡ã„ãƒ‡ãƒ¼ã‚¿ã¯å¤‰æ•°ã¨...]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Go ã§ã‚¤ã‚±ã¦ã‚‹ CLI ã‚’ä½œã‚‹ãŸã‚ã«åˆ©ç”¨ã—ãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸]]></title>
            <link>https://zenn.dev/kou_pg_0131/articles/go-cli-packages</link>
            <guid>https://zenn.dev/kou_pg_0131/articles/go-cli-packages</guid>
            <pubDate>Tue, 10 Jan 2023 10:05:41 GMT</pubDate>
            <content:encoded><![CDATA[å…ˆæ—¥ã€ cLive ã¨ã„ã†ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’è‡ªå‹•æ“ä½œã™ã‚‹ Go è£½ã®ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ã‚’å…¬é–‹ã—ã¾ã—ãŸã€‚https://github.com/koki-develop/clive#readmecLive ã§ JavaScript ã®ãƒ©ã‚¤ãƒ–ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’ã™ã‚‹ãƒ‡ãƒ¢ã“ã®è¨˜äº‹ã§ã¯ Go ã§ã‚¤ã‚±ã¦ã‚‹æ„Ÿã˜ã® CLI ã‚’ä½œã‚‹ãŸã‚ã«åˆ©ç”¨ã—ãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ç°¡å˜ã«ç´¹ä»‹ã—ã¾ã™ã€‚cLive ã«ã¤ã„ã¦ã¯ä»¥ä¸‹ã®è¨˜äº‹ã‚’ã”å‚ç…§ãã ã•ã„ã€‚https://zenn.dev/kou_pg_0131/articles/clive-introduction åˆ©ç”¨ã—ãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸Cobra : CLI ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯...]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[CodeDeploy Agent ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã‚’è‡ªå‹•åŒ–ã™ã‚‹]]></title>
            <link>https://sreake.com/blog/codedeploy-agent-update/</link>
            <guid>https://sreake.com/blog/codedeploy-agent-update/</guid>
            <pubDate>Tue, 10 Jan 2023 01:22:39 GMT</pubDate>
            <content:encoded><![CDATA[æ¦‚è¦ Auto Scaling Group å†…ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ CodeDeploy ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã€Agent ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ãŒæ‰‹é–“ãªã®ã§ AMI ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãªã„æ–¹ãŒã‚ˆã„ã§ã™ã€‚ Systems Manager [â€¦]The post CodeDeploy Agent ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã‚’è‡ªå‹•åŒ–ã™ã‚‹ first appeared on sreake.com | æ ªå¼ä¼šç¤¾ã‚¹ãƒªãƒ¼ã‚·ã‚§ã‚¤ã‚¯.]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[HTML/CSS ã‚’ SVG ã«å¤‰æ›ã™ã‚‹ Vercel è£½ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã€Œsatoriã€ã‚’è©¦ã—ã¦ã¿ã‚‹]]></title>
            <link>https://zenn.dev/kou_pg_0131/articles/satori-usage</link>
            <guid>https://zenn.dev/kou_pg_0131/articles/satori-usage</guid>
            <pubDate>Mon, 02 Jan 2023 10:42:56 GMT</pubDate>
            <content:encoded><![CDATA[Next.js ã§ã¯ Vercel's Edge Functions ã‚’ä½¿ç”¨ã—ã¦å‹•çš„ã« OGP ç”»åƒã‚’ç”Ÿæˆã§ãã‚‹ @vercel/og ã¨ã„ã† Vercel è£½ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒå…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚https://www.npmjs.com/package/@vercel/ogã“ã® @vercel/og ã§ã¯å†…éƒ¨çš„ã« satori ã¨ã„ã† HTML/CSS ã‚’ SVG ã«å¤‰æ›ã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚https://www.npmjs.com/package/satorié¢ç™½ãã†ã ã£ãŸã®ã§ç°¡å˜ã«è©¦ã—ã¦ã¿ãŸãƒ¡ãƒ¢ã§ã™ã€‚ã“ã†ã„ã† SVG ã‚‚ç°¡å˜ã«ä½œã‚Œã¾ã™ã€‚ãƒãƒƒã‚¸ã£ã½ã„ã‚„ã¤ ...]]></content:encoded>
        </item>
    </channel>
</rss>