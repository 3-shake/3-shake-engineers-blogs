<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>3-shake Engineers' Blogs</title>
        <link>https://blog.3-shake.com</link>
        <description>3-shake ã«æ‰€å±ã™ã‚‹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®ãƒ–ãƒ­ã‚°è¨˜äº‹ã‚’ã¾ã¨ã‚ã¦ã„ã¾ã™ã€‚</description>
        <lastBuildDate>Sun, 03 Sep 2023 18:30:22 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>ja</language>
        <image>
            <title>3-shake Engineers' Blogs</title>
            <url>https://blog.3-shake.com/og.png</url>
            <link>https://blog.3-shake.com</link>
        </image>
        <copyright>3-shake Inc.</copyright>
        <item>
            <title><![CDATA[Nodejs(Nest.js)ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®buildã‚’é«˜é€ŸåŒ–ã€slimåŒ–ã—ã¦ã¿ã‚ˆã†ã®ä¼š]]></title>
            <link>https://zenn.dev/satohjohn/articles/c05d29f5d68e0c</link>
            <guid>https://zenn.dev/satohjohn/articles/c05d29f5d68e0c</guid>
            <pubDate>Sat, 02 Sep 2023 10:02:16 GMT</pubDate>
            <content:encoded><![CDATA[å‰æDockerã«ã‚ˆã‚‹Node.jsã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«(pull)ã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã¨ã™ã‚‹.dockerignoreã¯ä»¥ä¸‹ã®é€šã‚Šnode_modules.git.gitignore*.mddisttest æœ€åˆã«ã¾ã¨ã‚è»½ãã€ãã‚“ãªã«ä¾å­˜é–¢ä¿‚ãŒå¤šããªã„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã‚ã‚Œã°npmã§staging buildã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥åŠ¹ã‹ã›ã‚‹ãã‚‰ã„ã§ã‚ˆã„ã‹ã‚‚RUN --mount=type=cache,target= ã¯åŠ¹æœãŒã‚ã‚Šãã†ã§ã‚ã‚‹ (https://zenn.dev/kou64yama/articles/powerful-docker-build-cache...]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Lookerã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¨©é™ã«ã¤ã„ã¦]]></title>
            <link>https://zenn.dev/nedoko_dok0dko/articles/160cb146e72740</link>
            <guid>https://zenn.dev/nedoko_dok0dko/articles/160cb146e72740</guid>
            <pubDate>Thu, 31 Aug 2023 17:22:40 GMT</pubDate>
            <content:encoded><![CDATA[ã“ã‚Œã¯ä½•Lookerã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¨©é™ä¸€è¦§ã‚’å€‹äººçš„ã«ã¾ã¨ã‚ãŸã‚‚ã®https://cloud.google.com/looker/docs/admin-panel-users-roles?hl=ja#default_permission_sets ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¨©é™ä¸€è¦§Admin:Developerã€Viewerã€Standardæ¨©é™ã«åŠ ãˆã€ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã¸ã®æ¥ç¶šã‚„ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ã®æ¨©é™ã‚’æŒã¤ç¾æ™‚ç‚¹ã§ç¢ºèªã§ãã‚‹ã€Adminã§ã—ã‹ã§ããªã„æ©Ÿèƒ½ã«ã¤ã„ã¦ã¯ä»¥ä¸‹ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹(BigQueryç­‰)ã¸ã®æ¥ç¶šè¨­å®šãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¿½åŠ ãƒ»å‰Šé™¤ãƒ»æ¨©é™ã®å¤‰æ›´ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ»ã‚°ãƒ«ãƒ¼ãƒ—å˜ä½ã®ãƒ•ã‚©ãƒ«ãƒ€ã®å…¬é–‹ãƒ»éå…¬...]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[YugabyteDBã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å…¨éƒ¨èª­ã‚€ Day7]]></title>
            <link>https://nnaka2992.hatenablog.com/entry/reading_yugabytedb_docs_7</link>
            <guid>https://nnaka2992.hatenablog.com/entry/reading_yugabytedb_docs_7</guid>
            <pubDate>Wed, 30 Aug 2023 16:03:36 GMT</pubDate>
            <content:encoded><![CDATA[å‰å›ã‹ã‚‰ã¤ã¥ã„ã¦YugabyteDBã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª­ã‚“ã§ã„ãã¾ã™ã€‚å‰å›ã¯Architecture > Core functions > Table Creationã‚’èª­ã¿ã¾ã—ãŸã€‚ä»Šå›ã¯Architecture > Core functions > Write I/O pathã‚’èª­ã¿ã¾ã™ã€‚ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯æœ€æ–°ã®v2.19 previewã§ã™ã€‚Write I/O pathWrite I/O pathã¯YQLãƒ¬ã‚¤ãƒ¤ãƒ¼ã§å‡¦ç†ã•ã‚Œã€ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆãƒªãƒ¼ãƒ€ãƒ¼ã«ã‚ˆã£ã¦ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®æº–å‚™ãŒè¡Œãªã‚ã‚Œã‚‹ã‚·ãƒ³ã‚°ãƒ«ã‚­ãƒ¼ã§ã®æ›¸ãè¾¼ã¿ã¨ã—ã¦ä¾‹ç¤ºã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã‚‹ã€‚ã‚¢ãƒˆãƒŸãƒƒã‚¯ãªã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã‚’å…±ãªã†è¤‡æ•°ã‚­ãƒ¼ã§ã®åˆ†æ•£ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ãªã©è¤‡é›‘ãªã‚±ãƒ¼ã‚¹ã«ã¤ã„ã¦ã¯åˆ†æ•£ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã«è¨˜è¼‰ã™ã‚‹ã€‚Write operation processing by YQL layerãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒç™ºè¡Œã—ãŸYQLã‚¯ã‚¨ãƒªãƒ¬ã‚¤ãƒ¤ã«ä½œç”¨ã™ã‚‹ãƒ©ã‚¤ãƒˆãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯ãƒãƒ¼ãƒˆã‹ã‚‰é©åˆ‡ãªAPI(YQLã¾ãŸã¯YCQL)ã‚’çµŒç”±ã—ã¦è¡Œãªã‚ã‚Œã‚‹ã€‚ã“ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯YQLãƒ¬ã‚¤ãƒ¤ã§å†…éƒ¨ã‚­ãƒ¼ã«å¤‰æ›ã•ã‚Œã‚‹ã€‚ã‚·ãƒ£ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã§èª¬æ˜ã™ã‚‹ã‚ˆã†ã«ã€ãã‚Œãã‚Œã®ã‚­ãƒ¼ã¯ä¸€ã¤ã®ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆãŒæ‰€æœ‰ã™ã‚‹ã€‚ã©ã®ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆãŒã‚­ãƒ¼ã‚’æ‰€æœ‰ã™ã‚‹ã‹ç‰¹å®šã™ã‚‹ãŸã‚ã«ã€YQLãƒ¬ã‚¤ãƒ¤ã¯YB-Masterã«RPC1å‘¼ã³å‡ºã—ã‚’å®Ÿè¡Œã™ã‚‹ã€‚ãã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã¯å°†æ¥ã®åˆ©ç”¨ã®ãŸã‚ã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã‚‹ã€‚YugabyteDBã¯ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆã®å ´æ‰€ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã—ç›´æ¥å‚ç…§ã™ã‚‹ã“ã¨ã§ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ›ãƒƒãƒ—ã‚’æ¸›ã‚‰ã™ã“ã¨ã§ã€YQLãƒ¬ã‚¤ãƒ¤ãŒç›´æ¥é©åˆ‡ãªYB-TServerã«ãƒ›ã‚¹ãƒˆã•ã‚Œã‚‹ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆãƒªãƒ¼ãƒ€ãƒ¼ã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã‚‹ã‚¹ãƒãƒ¼ãƒˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’æŒã¤ã€‚YQLãƒ¬ã‚¤ãƒ¤ãŒãƒ­ãƒ¼ã‚«ãƒ«ãƒãƒ¼ãƒ‰ã«ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆãƒªãƒ¼ãƒ€ãƒ¼ã‚’è¦‹ã¤ã‘ãŸå ´åˆã€RPCã¯ãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚¡ãƒ³ã‚¯ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ«ã«ãªã‚Šãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã¨ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã—ã¦ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯è¶Šã—ã«é€ä¿¡ã™ã‚‹æ™‚é–“ã‚’ç¯€ç´„ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã‚‹ã€‚ãã®å¾ŒYQLãƒ¬ã‚¤ãƒ¤ã¯ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆãƒªãƒ¼ãƒ€ãƒ¼ã‚’ãƒ›ã‚¹ãƒˆã™ã‚‹YB-TServerã¸ã®æ›¸ãè¾¼ã¿ã‚’ç™ºè¡Œã™ã‚‹ã€‚ã“ã®æ›¸ãè¾¼ã¿ã¯ã‚­ãƒ¼ã‚’æ‰€æœ‰ã™ã‚‹Raftã‚°ãƒ«ãƒ¼ãƒ—ã®ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆãƒªãƒ¼ãƒ€ãƒ¼ã«ã‚ˆã£ã¦å‡¦ç†ã•ã‚Œã‚‹ã€‚Preparation of the operation for replication by tablet leaderä¸‹è¨˜ã®å›³ã¯ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆãƒªãƒ¼ãƒ€ãƒ¼ãŒãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹å‡¦ç†ã‚’èª¬æ˜ã—ã¦ã„ã‚‹ã€‚ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆã®Raft Groupãƒªãƒ¼ãƒ€ãƒ¼ã¯ä»¥ä¸‹ã®å‡¦ç†ã‚’å®Ÿè¡Œã™ã‚‹ã€‚ç¾åœ¨å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹å‡¦ç†ãŒç¾åœ¨ã®ã‚¹ã‚­ãƒ¼ãƒã«å¯¾å¿œã—ã¦ã„ã‚‹ã‹ã‚’åˆ¤åˆ¥ã™ã‚‹ã‚­ãƒ¼ã«å¯¾ã—ã¦ãƒ­ãƒ¼ã‚«ãƒ«in-memoryãƒ­ãƒƒã‚¯ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã‚’åˆ©ç”¨ã—ã¦ãƒ­ãƒƒã‚¯ã‚’å–å¾—ã™ã‚‹ã€‚ã“ã®ãƒ­ãƒƒã‚¯æ©Ÿæ§‹ã¯ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼ã«ã¯å­˜åœ¨ã—ãªã„å¿…è¦ã§ã‚ã‚Œã°ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚€(read-modify-writeã‚„æ¡ä»¶ä»˜ãã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆå‘½ä»¤ãªã©)DocDBã«æ›¸ãè¾¼ã¾ã‚Œã‚‹å¤‰æ›´ã®ãƒãƒƒãƒã‚’æº–å‚™ã™ã‚‹ã€‚ã“ã®æ›¸ãè¾¼ã¿ãƒãƒƒãƒã¯æ®†ã©æœ€çµ‚çš„ã«RocksDBã«æ›¸ãè¾¼ã¾ã‚Œã‚‹Key-Valueãƒšã‚¢ã«è¿‘ãã€ãã‚Œãã‚Œã®ã‚­ãƒ¼ã®æœ«å°¾ã«æœ€çµ‚çš„ãªhybrid timestampãŒæ·»ãˆã‚‰ã‚Œã¦ã„ãªã„ã ã‘ã§ã‚ã‚‹Raft replication of the write operationæ›¸ãè¾¼ã¿ã®Raftãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å‡¦ç†ã®æµã‚Œã¯ä»¥ä¸‹ã®ã‚ˆã†ã«èª¬æ˜ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã‚‹ã€‚ãƒªãƒ¼ãƒ€ãƒ¼ãŒãƒãƒƒãƒã‚’Raft logã«ã‚¢ãƒšãƒ³ãƒ‰ã—ã€æ›¸ãè¾¼ã¿ã®ãŸã‚ã®hybrid timestampã‚’é¸æŠã™ã‚‹Raftã‚’åˆ©ç”¨ã—ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ”ã‚¢ãƒ¼ã«è¤‡è£½ã™ã‚‹æˆåŠŸã—ãŸRaft replicationã®ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã®DocDBã«åæ˜ ã™ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æˆåŠŸã‚’è¿”ã™ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆã¯Raftã‚’åˆ©ç”¨ã—ãŸãƒ‡ãƒ¼ã‚¿ã®è¤‡è£½ã‚’å—ã‘ã¤ã‘ã€ã‚³ãƒŸãƒƒãƒˆã•ã‚ŒãŸäº‹ãŒåˆ†ã£ãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ãã®è¤‡è£½ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã®DocDBã«åæ˜ ã™ã‚‹ã€‚ãƒªãƒ¼ãƒ€ãƒ¼ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚³ãƒŸãƒƒãƒˆãƒã‚¤ãƒ³ãƒˆã«æ–¼ã‘ã‚‹å¾Œç¶šã®RPCãƒªã‚¯ã‚¨ã‚¹ãƒˆã®é€²è¡Œã‚’é€²ã‚ã‚‹ã€‚æ›¸ãè¾¼ã¿ãƒãƒƒãƒã‚’å«ã‚€Raftã‚¨ãƒ³ãƒˆãƒªãƒ¼ã¯éåŠæ•°ä»¥ä¸Šã®ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆRaft Groupãƒ”ã‚¢ãƒ¼ã«è¤‡è£½ã•ã‚Œã‚‹Raftã®ã‚µãƒ–ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰"Replication Successful"ã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’å–å¾—ã—ãŸã‚ã¨ã€ãƒªãƒ¼ãƒ€ãƒ¼ã¯ãƒ­ãƒ¼ã‚«ãƒ«ã®DocDBã«ãƒãƒƒãƒã®æ›¸ãè¾¼ã¿ã‚’é©ç”¨ã™ã‚‹ãƒªãƒ¼ãƒ€ãƒ¼ã‹ã‚‰ã®æ¬¡ã®æ›´æ–°ã§ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãŒã‚³ãƒŸãƒƒãƒˆã•ã‚ŒãŸã“ã¨ãŒãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼ã«é€šçŸ¥ã•ã‚Œã€ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼ã¯ãã‚Œãã‚Œã®RocksDBã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ãƒãƒƒãƒã®æ›¸ãè¾¼ã¿ã‚’é©ç”¨ã™ã‚‹ã€‚Response to the clientInformation Pending2Exampleskã¨vã¨ã„ã†å€¤ã‚’Kã¨ã„ã†è¡Œã¨Vã¨ã„ã†è¡Œã‚’ã‚‚ã¤ãƒ†ãƒ¼ãƒ–ãƒ«T1ã«æŒ¿å…¥ã™ã‚‹ä¾‹ã«ã¤ã„ã¦è€ƒãˆã‚‹3ã€‚ã“ã®ä¾‹ã§ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒãƒ©ãƒ³ãƒ€ãƒ ãªYugabyteDBã‚µãƒ¼ãƒã«Writeã‚¯ã‚¨ãƒªã‚’é€ä¿¡ã—ã€ãã®ã‚µãƒ¼ãƒãŒãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é©åˆ‡ã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã™ã‚‹ã¨ä»®å®šã—ã¦ç°¡ç•¥åŒ–ã—ã¦ã„ã‚‹ã€‚ç‰¹ã«YCQLã§ã¯YugabyteDB Smart Clientã‚’ä½¿ã†ã“ã¨ã§ã€ä½™åˆ†ãªãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ›ãƒƒãƒ—ã‚’é¿ã‘ã‚‹ã“ã¨ãŒå‡ºæ¥ã‚‹ã€‚â†©åŸæ–‡ãƒãƒã€‚éå»ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã‚‚è¨˜è¼‰ç„¡ã—â†©INSERT INTO T1 (K,V) VALUES('k','v')ã¨ã„ã†ã“ã¨â†©]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[ChatGPT Ã— Slack = ChatOpsã‚’å®Ÿç¾ã™ã‚‹ã€Œh1-slack-botã€ã®ç´¹ä»‹]]></title>
            <link>https://sreake.com/blog/chatgpt-slack-integration/</link>
            <guid>https://sreake.com/blog/chatgpt-slack-integration/</guid>
            <pubDate>Thu, 24 Aug 2023 07:04:08 GMT</pubDate>
            <content:encoded><![CDATA[1. ã¯ã˜ã‚ã« ã¯ã˜ã‚ã¾ã—ã¦ã€Sreakeäº‹æ¥­éƒ¨ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³ç”Ÿã®äº•ä¸Šã§ã™ã€‚ç§ã¯Sreakeäº‹æ¥­éƒ¨ã«ã¦SREæŠ€è¡“ã®èª¿æŸ»ã¨ç ”ç©¶ã‚’è¡Œã†ç›®çš„ã§2023å¹´3æœˆ6æ—¥ã‹ã‚‰é•·æœŸã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³ç”Ÿã¨ã—ã¦å‚åŠ ã—ã¦ã„ã¾ã™ã€‚ æœ¬è¨˜äº‹ã§ã¯ã€ChatOps [â€¦]The post ChatGPT Ã— Slack = ChatOpsã‚’å®Ÿç¾ã™ã‚‹ã€Œh1-slack-botã€ã®ç´¹ä»‹ first appeared on sreake.com | æ ªå¼ä¼šç¤¾ã‚¹ãƒªãƒ¼ã‚·ã‚§ã‚¤ã‚¯.]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[YugabyteDBã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å…¨éƒ¨èª­ã‚€ Day6]]></title>
            <link>https://nnaka2992.hatenablog.com/entry/reading_yugabytedb_docs_6</link>
            <guid>https://nnaka2992.hatenablog.com/entry/reading_yugabytedb_docs_6</guid>
            <pubDate>Wed, 23 Aug 2023 14:26:45 GMT</pubDate>
            <content:encoded><![CDATA[å‰å›ã‹ã‚‰ã¤ã¥ã„ã¦YugabyteDBã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª­ã‚“ã§ã„ãã¾ã™ã€‚å‰å›ã¯Architecture > Core functions > Universe creationã‚’èª­ã¿ã¾ã—ãŸã€‚ä»Šå›ã¯Architecture > Core functions > Table Creationã‚’èª­ã¿ã¾ã™ã€‚ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯æœ€æ–°ã®v2.19 previewã§ã™ã€‚Table CrationYugabyteDBã§ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã‚ˆã‚Šå®Ÿè¡Œã•ã‚Œã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«ã®ä½œæˆã¯YB-Masterã®ãƒªãƒ¼ãƒ€ãƒ¼ãŒå®Ÿè¡Œã™ã‚‹éåŒæœŸAPIã«ã‚ˆã£ã¦ç®¡ç†ã•ã‚Œã‚‹ã€‚YB-Masterã¯ãã®APIã§ãƒ†ãƒ¼ãƒ–ãƒ«ã®ã‚¹ã‚­ãƒ¼ãƒã¨éšœå®³è€æ€§ã‚’é«˜ã‚ã‚‹ãŸã‚ã«å½¢æˆã™ã‚‹Raftã‚°ãƒ«ãƒ¼ãƒ—ã«æ‰€å±ã™ã‚‹YB-Masterã§ã®ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆã«å¿…è¦ãªä»–ã®æƒ…å ±ã®ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒå®Œäº†ã—ãŸæ®µéšã§APIã®æˆåŠŸã‚’è¿”ã™ã€‚YB-Masterã®ãƒªãƒ¼ãƒ€ãƒ¼ãŒãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆã‚’å®Ÿè¡Œã™ã‚‹ã¨ãã¯è¤‡æ•°ã®ã‚¹ãƒ†ãƒƒãƒ—ãŒå­˜åœ¨ã™ã‚‹ã€‚ValidationYB-Masterãƒªãƒ¼ãƒ€ãƒ¼ã¯ãƒ†ãƒ¼ãƒ–ãƒ«ã‚¹ã‚­ãƒ¼ãƒã®æ¤œè¨¼ã‚’è¡Œãªã„ã€æŒ‡å®šã•ã‚ŒãŸæ•°ã®ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆã‚’ä½œæˆã™ã‚‹ã€‚ã“ã‚Œã‚‰ã®ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆã¯ã“ã®æ®µéšã§ã¯YB-TServerã«ã¯å‰²ã‚ŠæŒ¯ã‚‰ã‚Œã¦ã„ãªã„ã€‚ReplicationYB-Masterãƒªãƒ¼ãƒ€ãƒ¼ã¯YB-Masterã®Raftã‚°ãƒ«ãƒ¼ãƒ—ã«ãƒ†ãƒ¼ãƒ–ãƒ«ã‚¹ã‚­ãƒ¼ãƒã¨æ–°ã—ãä½œæˆã•ã‚ŒãŸã‚¿ãƒ–ãƒ¬ãƒƒãƒˆ(ã“ã®æ™‚ç‚¹ã§ã¯YB-TServerã¸ã®å‰²ã‚Šå½“ã¦è¡Œãªã‚ã‚Œã¦ã„ãªã„)ã®è¤‡è£½ã‚’è¡Œãªã†ã€‚ã“ã®å‡¦ç†ã¯YB-Masterãƒªãƒ¼ãƒ€ã«éšœå®³ãŒç™ºç”Ÿã—ã¦ã‚‚ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆãŒæˆåŠŸã™ã‚‹ã“ã¨ã‚’ä¿è¨¼ã™ã‚‹ã€‚Acknowledgementãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆå‡¦ç†ã¯YB-Masterãƒªãƒ¼ãƒ€ãƒ¼ã«éšœå®³ãŒç™ºç”Ÿã—ã¦ã‚‚å‡¦ç†ã‚’ç¶™ç¶šã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã‚‹ãŸã‚ã€ã“ã®æ®µéšã§éåŒæœŸãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆAPIã¯æˆåŠŸã‚’è¿”ã™ã€‚ExecutionYB-Masterãƒªãƒ¼ãƒ€ãƒ¼ã¯ãã‚Œãã‚Œã®ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆã‚’ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ã¨ã—ã¦æŒ‡å®šã•ã‚ŒãŸæ•°ã ã‘YB-TServerã«å‰²ã‚Šå½“ã¦ã‚’è¡Œãªã†ã€‚ã“ã®ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆãƒ”ã‚¢ãƒ¼ã®é…ç½®ã¯æŒ‡å®šã•ã‚ŒãŸéšœå®³è€æ€§ã‚’å®Ÿç¾ã§ãã€ã¾ãŸã‚¿ãƒ–ãƒ¬ãƒƒãƒˆã®å‰²ã‚Šå½“ã¦ãŒYB-TServerã«å‡ç­‰ã«è¡Œãªã‚ã‚Œã‚‹ã‚ˆã†ã«å®Ÿè¡Œã•ã‚Œã‚‹ã€‚ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆã®YB-TServerã¸ã®å‰²ã‚Šå½“ã¦ã¯ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆã®ãƒ¬ãƒ—ãƒªã‚«ãŒè¤‡æ•°ã‚¯ãƒ©ã‚¦ãƒ‰ã€ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã€ã‚¢ãƒ´ã‚§ã‚¤ãƒ©ãƒ“ãƒªãƒ†ã‚£ã‚¾ãƒ¼ãƒ³ã‚’ã¾ãŸã„ã§åˆ†æ•£ã™ã‚‹ã¨ã„ã£ãŸè¿½åŠ ã®åˆ¶ç´„ã‚’æº€ã™å¿…è¦ãŒã‚ã‚‹ã€‚Continuous monitoringYB-Masterãƒªãƒ¼ãƒ€ãƒ¼ã¯å…¨ã¦ã®ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆã®å‰²ã‚Šå½“ã¦å‡¦ç†ã‚’ç›£è¦–ã—ã€ãã®å®Ÿè¡ŒçŠ¶æ…‹ã¨å®Œäº†ã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå®Ÿè¡Œã—ãŸAPIã‚³ãƒ¼ãƒ«ã«å¯¾ã—ã¦å¿œç­”ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚Examplesãƒ†ãƒ¼ãƒ–ãƒ«ãŒ4ãƒãƒ¼ãƒ‰ã‹ã‚‰ãªã‚‹YugabyteDBUniverseã«ä½œæˆã•ã‚Œã‚‹å‡¦ç†ã«ã¤ã„ã¦è€ƒãˆã‚‹ã€‚ã“ã®ã¨ããƒ†ãƒ¼ãƒ–ãƒ«ã¯16ã®ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆã¨3ã¤ã®ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ã‚’æŒã¤ã¨ã™ã‚‹ã€‚YB-Masterãƒªãƒ¼ãƒ€ãƒ¼ã¯ã‚¹ã‚­ãƒ¼ãƒã‚’æ¤œè¨¼ã™ã‚‹ã€‚ã¾ãŸ16ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆ(åˆè¨ˆ48ã®ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆãƒ”ã‚¢ãƒ¼)ã‚’ä½œæˆã—ã€Raftã‚’åˆ©ç”¨ã—ã¦éåŠæ•°ã®YB-TServerã«ãƒ†ãƒ¼ãƒ–ãƒ«ã®ä½œæˆã«å¿…è¦ãªãƒ‡ãƒ¼ã‚¿ã‚’è¤‡è£½ã™ã‚‹ã€‚ä½œæˆã—ãŸã‚¿ãƒ–ãƒ¬ãƒƒãƒˆã‚’Raftã‚°ãƒ«ãƒ¼ãƒ—ã‚’æˆã™YB-TServerã®ä¸­ã®æŒ‡å®šã•ã‚ŒãŸæ•°ã®YB-TServerå‰²ã‚Šå½“ã¦ã€ãƒªãƒ¼ãƒ€ãƒ¼ã®é¸å‡ºã‚’è¡Œãªã†ã€‚ã“ã®ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆã«å±ã™ã‚‹ã‚­ãƒ¼ã«å¯¾ã™ã‚‹å…¨ã¦ã®ãƒªãƒ¼ãƒ‰ã¨ãƒ©ã‚¤ãƒˆã¯ã€ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆãƒ”ã‚¢ãƒ¼ã®ãƒªãƒ¼ãƒ€ãƒ¼ã¨Raftã‚°ãƒ«ãƒ¼ãƒ—ãŒè²¬ä»»ã‚’æŒã¤ã€‚ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆãŒå‰²ã‚Šå½“ã¦ã‚‰ã‚Œã‚‹ã¨é•·æœŸã«æ¸¡ã‚‹éšœå®³ã‹å°†æ¥ã®ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚·ãƒ³ã‚°ãŒç™ºç”Ÿã—YB-Masterã«ã‚ªãƒ¼ãƒŠãƒ¼ã‚·ãƒƒãƒ—ã‚’å¤‰æ›´ã•ã‚Œã‚‹ã¾ã§ã€å‰²ã‚Šå½“ã¦å…ˆã®YB-TServerãŒæ‰€æœ‰ã™ã‚‹ã€‚ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆãƒªãƒ¼ãƒ€ãƒ¼ã‚’ãƒ›ã‚¹ãƒˆã™ã‚‹YB-TServerã®å†…ã®1å°ã«éšœå®³ãŒç™ºç”Ÿã—ãŸå ´åˆã€ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆã®Raftã‚°ãƒ«ãƒ¼ãƒ—ã¯I/Oã‚’å‡¦ç†ã™ã‚‹ãŸã‚ã«å³åº§ã«ãƒªãƒ¼ãƒ€ãƒ¼ã‚¨ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹ã€‚ãã®ãŸã‚YB-Masterã¯I/Oã«ãŠã‘ã‚‹ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ãƒ‘ã‚¹ã«ãªã‚‹ã“ã¨ã¯ãªã„ã€‚ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…ˆã¨ãªã‚‹å€™è£œã‚’æ¢ã™ã€‚ã“ã®è¤‡è£½å‡¦ç†ã¯æ®µéšçš„ã‹ã¤Gracefulã«å®Ÿè¡Œã•ã‚Œã‚‹ã€‚]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[ChatGPT: SREãŒCustom instructionsæ©Ÿèƒ½ã‚’åˆ©ç”¨ã™ã‚‹]]></title>
            <link>https://syu-m-5151.hatenablog.com/entry/2023/08/22/204327</link>
            <guid>https://syu-m-5151.hatenablog.com/entry/2023/08/22/204327</guid>
            <pubDate>Tue, 22 Aug 2023 11:43:27 GMT</pubDate>
            <content:encoded><![CDATA[ã¯ã˜ã‚ã«æœ€è¿‘ã€ChatGPTã‹ã‚‰Custom instructionsæ©Ÿèƒ½ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¾ã—ãŸã€‚Custom instructionsã¨ã¯ã€ChatGPTã®å¿œç­”æ–¹æ³•ã‚’ã‚ˆã‚Šè©³ç´°ã«åˆ¶å¾¡ã™ã‚‹ã‚«ã‚¹ã‚¿ãƒ å‘½ä»¤ã‚’è¨­å®šã™ã‚‹ã“ã¨ãŒã§ãã‚‹æ©Ÿèƒ½ã§ã™ã€‚ChatGPTã®åˆ©ç”¨è€…ã«ã¨ã£ã¦éå¸¸ã«ä¾¿åˆ©ãªæ©Ÿèƒ½ã§ã™ã€‚ã“ã®æ©Ÿèƒ½ã«ã‚ˆã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ç‰¹å®šã®å¿œç­”ã‚¹ã‚¿ã‚¤ãƒ«ã‚„ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’è¦æ±‚ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚ã“ã‚Œã¯ã€ç‰¹å®šã®æ¥­ç•Œã‚„å°‚é–€åˆ†é‡ã§ã®ä½¿ç”¨ãªã©å¤šå²ã«ã‚ãŸã‚‹ç”¨é€”ã«é©å¿œã§ãã‚‹ãŸã‚ã€éå¸¸ã«æœ‰ç”¨ã§ã™ã€‚ã‚ã¡ã‚ƒãã¡ã‚ƒç«¯çš„ã«ã‹ã¤èªå¼Šã‚’æã‚Œãšã«ã„ã†ã¨æ¯å›ã€prompt ã‚’å…¥åŠ›ã—ãªãã¦ã‚ˆããªã‚‹ã‚„ã¤ã§ã™ã€‚ä»¥å‰ã€å…¬é–‹ã—ãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«é–¢ã™ã‚‹ãƒ–ãƒ­ã‚°syu-m-5151.hatenablog.comOpenAI CEOã®Sam Altmanæ°ã‚‚ã€Custom instructionsã®ãƒã‚¹ãƒˆã‚’ã—ã¦ã„ã¾ã—ãŸã®ã§å‚è€ƒã«ã—ã¦ã¿ã¦ã‚‚è‰¯ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚damn i love custom instructions pic.twitter.com/su0BlttJF7â€” Sam Altman (@sama) 2023å¹´7æœˆ22æ—¥  ãã®ä¸Šã§ç§ãŒåˆ©ç”¨ã—ã¦ã‚‹ã‚‚ã®ã‚’å…¬é–‹ã—ã¾ã™ã€‚What would you like ChatGPT to know about you to provide better responses?I'm a software developer and primarily use Golang. Depending on the application, I also utilize Shell Script, Terraform, and Ansible.I am a software developer and I like Cloud Native technologies such as Docker and Kubernetes.I like to develop, operate, and optimize systems.Technical advisor for several other companies.Please use Japanese.How would you like ChatGPT to respond?You are an AI programming assistant.Your response should be informative and logical.First, think STEP-BY-STEP, then describe your plan for what to build.Then output the code in a single code block.Keep your answers objective and concise, and use Markdown formatting.Be sure to include the name of the programming language at the start of the Markdown code block.Avoid enclosing your entire response in a triple backtick.ã¾ãŸã€ respondã«ä¿¡é ¼æ€§ã«é–¢ã™ã‚‹è¨€åŠã‚’æ±‚ã‚ã¦ã„ãŸã®ã§ã™ãŒæœ‰ç›Šãªæƒ…å ±ãŒå¾—ã‚‰ã‚Œãªã„ã®ã§å‰Šé™¤ã—ã¦ãŠãã¾ã—ãŸã€‚ã¾ã¨ã‚Custom instructionsæ©Ÿèƒ½ã¯ã€ChatGPTã®å¿œç­”ã‚’ã‚ˆã‚Šç´°ã‹ãåˆ¶å¾¡ã™ã‚‹å¼·åŠ›ãªãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ç‰¹å®šã®ãƒ‹ãƒ¼ã‚ºã«åˆã‚ã›ã¦ãƒ¢ãƒ‡ãƒ«ã‚’èª¿æ•´ã™ã‚‹ã“ã¨ãŒã§ãã€ã‚ˆã‚Šå¤šæ§˜ã§åŠ¹æœçš„ãªçµæœã‚’å¾—ã‚‹ã“ã¨ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚ã“ã®æ©Ÿèƒ½ã®å°å…¥ã«ã‚ˆã‚Šã€ChatGPTã¯ã•ã‚‰ã«å¤šå²ã«ã‚ãŸã‚‹åˆ†é‡ã§ã®å¿œç”¨ãŒæœŸå¾…ã•ã‚Œã¾ã™ã€‚ã“ã®æ›¸ç±ã¯ChatGPTã«ã‚ˆã£ã¦é”æˆã•ã‚ŒãŸç§‘å­¦çš„ãªè²¢çŒ®ã‚„é‡è¦æ€§ã‚’ç†è§£ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã®ã§ã‚ªã‚¹ã‚¹ãƒ¡ã§ã™ã€‚ChatGPTã®é ­ã®ä¸­ (ãƒãƒ¤ã‚«ãƒ¯æ–°æ›¸)ä½œè€…:ã‚¹ãƒ†ã‚£ãƒ¼ãƒ´ãƒ³ ã‚¦ãƒ«ãƒ•ãƒ©ãƒ æ—©å·æ›¸æˆ¿Amazon]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[ã€ArgoCDğŸ™ï¸ã€‘Kubernetesã®ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ArgoCDã®å®Ÿè·µãƒ†ãƒŠãƒ³ãƒˆè¨­è¨ˆ]]></title>
            <link>https://hiroki-hasegawa.hatenablog.jp/entry/2023/08/18/110646</link>
            <guid>https://hiroki-hasegawa.hatenablog.jp/entry/2023/08/18/110646</guid>
            <pubDate>Fri, 18 Aug 2023 02:06:46 GMT</pubDate>
            <content:encoded><![CDATA[ã“ã®è¨˜äº‹ã‹ã‚‰å¾—ã‚‰ã‚Œã‚‹çŸ¥è­˜ã“ã®è¨˜äº‹ã‚’èª­ã‚€ã¨ã€ä»¥ä¸‹ã‚’ "å®Œå…¨ã«ç†è§£" ã§ãã¾ã™âœŒï¸Kubernetesã®ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ã®ç¨®é¡ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ArgoCDã§å®Ÿè·µã™ã‚‹å ´åˆã«ã‚ªã‚¹ã‚¹ãƒ¡ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ArgoCDã®Namespacedã‚¹ã‚³ãƒ¼ãƒ—ãƒ¢ãƒ¼ãƒ‰ã¨Clusterã‚¹ã‚³ãƒ¼ãƒ—ãƒ¢ãƒ¼ãƒ‰ArgoCDã®Projectãƒ†ãƒŠãƒ³ãƒˆãŒãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã®ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’åˆ¶é™ã™ã‚‹ä»•çµ„ã¿ã“ã®è¨˜äº‹ã‹ã‚‰å¾—ã‚‰ã‚Œã‚‹çŸ¥è­˜01. ã¯ã˜ã‚ã«02. ãªãœArgoCDã«ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆãŒå¿…è¦ãªã®ã‹ã‚·ãƒ³ã‚°ãƒ«ãƒ†ãƒŠãƒ³ãƒˆã®å ´åˆãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆã®å ´åˆ03. Kubernetesã®ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ã®ä¸€è¦§Clusters as-a-ServiceControl Planes as-a-ServiceNamespaces as-a-Serviceãƒ„ãƒ¼ãƒ«å›ºæœ‰ãƒ†ãƒŠãƒ³ãƒˆ04. ArgoCDã§ã®ãƒ†ãƒŠãƒ³ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³å®Ÿè·µã®ä¸€è¦§04-02. Clusters as-a-Service ã®å®Ÿè·µå®ŸClusterãƒ†ãƒŠãƒ³ãƒˆã‚ªã‚¹ã‚¹ãƒ¡ã—ãªã„ç†ç”±04-03. Control Planes as-a-Service ã®å®Ÿè·µä»®æƒ³Clusterãƒ†ãƒŠãƒ³ãƒˆ - â˜…ã‚ªã‚¹ã‚¹ãƒ¡ã—ãŸç†ç”±04-04. Namespaces as-a-Service ã®å®Ÿè·µ04-05. ãƒ„ãƒ¼ãƒ«å›ºæœ‰ãƒ†ãƒŠãƒ³ãƒˆã®å®Ÿè·µProjectãƒ†ãƒŠãƒ³ãƒˆCLãƒ¢ãƒ¼ãƒ‰ vs. NSãƒ¢ãƒ¼ãƒ‰05. CLãƒ¢ãƒ¼ãƒ‰ãªArgoCDCLãƒ¢ãƒ¼ãƒ‰ãªArgoCDã¨ã¯å®Ÿè£…æ–¹æ³•AppProjectArgoCDã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆç”¨ConfigMap (argocd-cmd-params-cm)ãƒ­ã‚°ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ç”¨ConfigMap (argocd-rbac-cm)ã‚ªã‚¹ã‚¹ãƒ¡ã—ãªã„ç†ç”±05-02. NSãƒ¢ãƒ¼ãƒ‰ãªArgoCD - â˜…â˜…NSãƒ¢ãƒ¼ãƒ‰ãªArgoCDã¨ã¯å®Ÿè£…æ–¹æ³•AppProjectArgoCDã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆç”¨ConfigMap (argocd-cmd-params-cm)ãƒ­ã‚°ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ç”¨ConfigMap (argocd-rbac-cm)ç‰¹ã«ã‚ªã‚¹ã‚¹ãƒ¡ã—ãŸç†ç”±Projectãƒ†ãƒŠãƒ³ãƒˆä¾‹ã®ä¸€è¦§ãƒ†ãƒŠãƒ³ãƒˆä¾‹1Namespace (ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®å®Ÿè¡Œç’°å¢ƒåˆ¥)ã€AppProject (ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®å®Ÿè¡Œç’°å¢ƒåˆ¥)ã‚ªã‚¹ã‚¹ãƒ¡ã—ãªã‹ã£ãŸç†ç”±ãƒ†ãƒŠãƒ³ãƒˆä¾‹2 - â˜…Namespace (ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆåˆ¥)ã€AppProject (ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®å®Ÿè¡Œç’°å¢ƒåˆ¥)ã‚ªã‚¹ã‚¹ãƒ¡ã—ãŸç†ç”±ãƒ†ãƒŠãƒ³ãƒˆä¾‹3 - â˜…â˜…Namespace (ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆåˆ¥)ã€AppProject (ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®ã‚µãƒ–ãƒãƒ¼ãƒ åˆ¥)ç‰¹ã«ã‚ªã‚¹ã‚¹ãƒ¡ã—ãŸç†ç”±06. Projectãƒ†ãƒŠãƒ³ãƒˆã®ãƒ‡ãƒ—ãƒ­ã‚¤åˆ¶é™ã®ä»•çµ„ã¿ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã®ãƒ‡ãƒ—ãƒ­ã‚¤åˆ¶é™ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã§ãã‚‹å ´åˆ(ğŸš«åˆ¶é™ä¾‹1) ç„¡èªå¯ã®Namespaceã§Applicationã‚’ä½œæˆã—ã‚ˆã†ã¨ã—ãŸå ´åˆ(ğŸš«åˆ¶é™ä¾‹2) ç„¡èªå¯ã®AppProjectã§Applicationã‚’ä½œæˆã—ã‚ˆã†ã¨ã—ãŸå ´åˆ(ğŸš«åˆ¶é™ä¾‹3) ç„¡èªå¯ã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆç”¨Clusterã‚’æŒ‡å®šã—ã‚ˆã†ã¨ã—ãŸå ´åˆ(ğŸš«åˆ¶é™ä¾‹4) ç„¡èªå¯ã®Namespaceã‚’ãƒ‡ãƒ—ãƒ­ã‚¤å…ˆã«æŒ‡å®šã—ã‚ˆã†ã¨ã—ãŸå ´åˆã‚«ã‚¹ã‚¿ãƒ ãƒªã‚½ãƒ¼ã‚¹ã®Reconciliationåˆ¶é™ArgoCDç³»ã‚«ã‚¹ã‚¿ãƒ ãƒªã‚½ãƒ¼ã‚¹ã‚’Reconciliationã§ãã‚‹å ´åˆ(ğŸš«åˆ¶é™ä¾‹1) ç„¡èªå¯ã®Namespaceã«Reconciliationã‚’å®Ÿè¡Œã—ã‚ˆã†ã¨ã—ãŸå ´åˆ07. ãŠã‚ã‚Šã«è¬è¾01. ã¯ã˜ã‚ã«ã€å…ˆæ—¥åŠ©ã‘ã¦é ‚ã„ãŸã‚¢ãƒ«ãƒˆãƒã‚¤ã‚¨ãƒ«ãƒ³ã§ã™ã€ç”»åƒå¼•ç”¨å…ƒï¼šArgo Projectã•ã¦æœ€è¿‘ã®æ¥­å‹™ã§ã€å…¨ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®æŠ€è¡“åŸºç›¤é–‹ç™ºãƒãƒ¼ãƒ ã«æºã‚ã£ã¦ãŠã‚Šã€å…¨ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆå…±æœ‰ã®ArgoCDğŸ™ã®ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆåŒ–ã‚’æ‹…å½“ã—ã¾ã—ãŸã€‚ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãŒç¨¼åƒã™ã‚‹Kubernetes ClusterãŒ10å€‹ä»¥ä¸Šã‚ã‚Šã€Clusterã«ã‚ˆã£ã¦ã¯è¤‡æ•°ã®ãƒãƒ¼ãƒ ãŒåˆè¨ˆ100å€‹ä»¥ä¸Šã®ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã‚’é‹ç”¨ã—ã¦ã„ã¾ã™ã€‚ã“ã®ã‚ˆã†ãªå¤§è¦æ¨¡ãªãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã‚·ã‚¹ãƒ†ãƒ ãŒã„ãã¤ã‚‚ã‚ã‚‹çŠ¶æ³ä¸‹ã§ã€ArgoCDã®ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆè¨­è¨ˆã®çŸ¥è¦‹ã‚’æ·±ã‚ã‚‰ã‚ŒãŸãŸã‚ã€è¨˜äº‹ã§è§£èª¬ã—ã¾ã—ãŸã€‚æ›¸ããŸã„ã“ã¨ã‚’å…¨éƒ¨æ›¸ã„ãŸã¨ã“ã‚ã€æƒ…å ±é‡ãŒã‚¨ã‚°ã„ã“ã¨ã«ãªã£ã¦ã—ã¾ã£ãŸã®ã§ã€æ°—ã«ãªã‚‹ç« ã ã‘ã§ã‚‚æ‹¾ã£ã¦å¸°ã£ã¦ã„ãŸã ã‘ã‚‹ã¨ãƒãƒƒãƒ”ãƒ¼ã§ã™ğŸ™Kubernetesã®ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ (3ç« )ArgoCDã§ã®ãƒ†ãƒŠãƒ³ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³å®Ÿè·µã®ä¸€è¦§ (4ç« )ArgoCDã®Clusterã‚¹ã‚³ãƒ¼ãƒ—ãƒ¢ãƒ¼ãƒ‰ã¨Namespacedã‚¹ã‚³ãƒ¼ãƒ—ãƒ¢ãƒ¼ãƒ‰ (5ç« )Projectãƒ†ãƒŠãƒ³ãƒˆã®ãƒ‡ãƒ—ãƒ­ã‚¤åˆ¶é™ã®ä»•çµ„ã¿ (6ç« )ãã‚Œã§ã¯ã€ã‚‚ã‚Šã‚‚ã‚Šå¸ƒæ•™ã—ã¦ã„ãã¾ã™ğŸ˜—02. ãªãœArgoCDã«ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆãŒå¿…è¦ãªã®ã‹ã‚·ãƒ³ã‚°ãƒ«ãƒ†ãƒŠãƒ³ãƒˆã®å ´åˆãã‚‚ãã‚‚ã€ãªãœArgoCDã«ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆãŒå¿…è¦ãªã®ã§ã—ã‚‡ã†ã‹ã€‚ä¾‹ãˆã°ã€ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã®ãƒ‡ãƒ—ãƒ­ã‚¤å…ˆã¨ãªã‚‹ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆç”¨Cluster (ä¾‹ï¼›fooã€barã€baz) ãŒã‚ã‚‹ã¨ä»®å®šã—ã¾ã™ã€‚ArgoCDã‚’ã‚·ãƒ³ã‚°ãƒ«ãƒ†ãƒŠãƒ³ãƒˆã«ã™ã‚‹å ´åˆã€å„ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãƒãƒ¼ãƒ ã®æ“ä½œã™ã‚‹Applicationã‚’åŒã˜ãƒ†ãƒŠãƒ³ãƒˆã«å…±å­˜ã•ã›ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚ã“ã®å ´åˆã€å˜ä¸€ã®argocd-server (ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰) ã‹ã‚‰å…¨ã¦ã®Applicationã‚’æ“ä½œã§ãã¦ä¾¿åˆ©ã§ã™ã€‚ã—ã‹ã—ã€ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆç”¨Clusteræ•°ãŒå¢—ãˆã¦ã„ãã«ã¤ã‚Œã¦ã€å•é¡ŒãŒèµ·ã“ã‚Šå§‹ã‚ã¾ã™ã€‚ä¾‹ãˆã°ã€ã„ãšã‚Œã‹ã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãƒãƒ¼ãƒ ãŒèª¤ã£ãŸApplicationã‚’æ“ä½œã—ã€çµæœçš„ã«èª¤ã£ãŸClusterã«ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ã—ã¾ã†å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ã‚‚ã¡ã‚ã‚“ã€ã‚·ã‚¹ãƒ†ãƒ ã§ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆã‚’èµ·ã“ã—ã¦ã‚„ã‚ã†ã¨ã„ã†æ‚ªæ„ã‚’æŒã£ãŸäººãŒã€èª¤ã£ãŸClusterã‚’æ„å›³çš„ã«é¸ã¶å¯èƒ½æ€§ã‚‚ã‚ã‚Šã¾ã™ğŸ˜ˆãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆã®å ´åˆãã®ä¸€æ–¹ã§ã€ã„ã„æ„Ÿã˜ã®ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆã«ã—ãŸã¨ã—ã¾ã™ã€‚ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãƒãƒ¼ãƒ ã¯ã€èªå¯ã•ã‚ŒãŸãƒ†ãƒŠãƒ³ãƒˆã«æ‰€å±ã™ã‚‹Applicationã«ã®ã¿ã‚’æ“ä½œã§ãã€åå¯¾ã«ç„¡èªå¯ã®ãƒ†ãƒŠãƒ³ãƒˆã®Applicationã¯æ“ä½œã§ãã¾ã›ã‚“ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€èª¤ã£ãŸãƒ—ãƒ­ãƒ€ã‚¯ãƒˆç”¨Clusterã«ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã“ã¨ã‚’é˜²ã’ã¾ã™ã€‚03. Kubernetesã®ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ã®ä¸€è¦§ArgoCDã®ãƒ†ãƒŠãƒ³ãƒˆè¨­è¨ˆã‚’å®Ÿè·µã™ã‚‹å‰ã«ã€Kubernetesã«ã¯ã©ã‚“ãªãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ãŒã‚ã‚‹ã®ã§ã—ã‚‡ã†ã‹ã€‚Kubernetesã®ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ã€ä»¥ä¸‹ã«å¤§åˆ¥ã§ãã¾ã™ã€‚ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³å         ãƒ†ãƒŠãƒ³ãƒˆã®å˜ä½         ãƒ†ãƒŠãƒ³ãƒˆé–“ã®Kubernetesãƒªã‚½ãƒ¼ã‚¹åˆ†é›¢(åˆ†é›¢ã§ãã¦ã„ã‚Œã° âœ… )         ãƒ„ãƒ¼ãƒ«      Namespacedã‚¹ã‚³ãƒ¼ãƒ—ãƒªã‚½ãƒ¼ã‚¹          Clusterã‚¹ã‚³ãƒ¼ãƒ—ãƒªã‚½ãƒ¼ã‚¹      Clustersas a Service         å®ŸClusterãƒ†ãƒŠãƒ³ãƒˆ         âœ…         âœ…         å®ŸClusterç®¡ç†ãƒ„ãƒ¼ãƒ« (AWS EKSã€GCP GKEã€Azure AKEã€Kubeadmã€ãªã©)      Control Planesas a Service         ä»®æƒ³Clusterãƒ†ãƒŠãƒ³ãƒˆ         âœ…         âœ…         ä»®æƒ³Clusterç®¡ç†ãƒ„ãƒ¼ãƒ« (Kcpã€tensile-kubeã€vclusterã€VirtualClusterã€ãªã©)      Namespacesas a Service         Namespaceãƒ†ãƒŠãƒ³ãƒˆ         âœ…                  Namespaceã‚’å¢—ã‚„ã™ã ã‘ãªã®ã§ãƒ„ãƒ¼ãƒ«ä¸è¦      ãƒ„ãƒ¼ãƒ«å›ºæœ‰ãƒ†ãƒŠãƒ³ãƒˆ         ã‚«ã‚¹ã‚¿ãƒ ãƒªã‚½ãƒ¼ã‚¹ãƒ†ãƒŠãƒ³ãƒˆ         ãƒ„ãƒ¼ãƒ«ã«ã‚ˆã‚‹         ãƒ„ãƒ¼ãƒ«ã«ã‚ˆã‚‹         ArgoCDã®AppProjectã€Capsuleã®Tenantã€kioskã®Accountã€KubeZooã®Tenantã€ãªã©      "ã‚½ãƒ•ãƒˆãƒãƒ«ãƒãƒ†ãƒŠãƒ³ã‚·ãƒ¼" ã¨ "ãƒãƒ¼ãƒ‰ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ã‚·ãƒ¼" ã¨ã„ã£ãŸåˆ†é¡æ–¹æ³•ã‚‚ã‚ã‚Šã¾ã™ã€‚ã“ã®åˆ†é¡æ–¹æ³•ã§ã¯ã€ãƒ†ãƒŠãƒ³ãƒˆé–“ã®åˆ†é›¢åº¦ã®è¦³ç‚¹ã§å„ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆã‚’ç¨®åˆ¥ã—ã¾ã™ã€‚ã‚½ãƒ•ãƒˆãƒãƒ«ãƒãƒ†ãƒŠãƒ³ã‚·ãƒ¼ã¯ã€äº’ã„ã«ä¿¡é ¼ã§ãã‚‹å‰æã®ä¸Šã§ã€ãƒ†ãƒŠãƒ³ãƒˆé–“ã‚’å¼±ãåˆ†é›¢ã—ã¾ã™ã€‚ãã®ä¸€æ–¹ã§ã€ãƒãƒ¼ãƒ‰ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ã‚·ãƒ¼ã¯ã€äº’ã„ã«ä¿¡é ¼ã§ããªã„å‰æã®ä¸Šã§ãƒ†ãƒŠãƒ³ãƒˆé–“ã‚’å¼·ãåˆ†é›¢ã—ã¾ã™ã€‚åˆ†é›¢åº¦ãŒã‚½ãƒ•ãƒˆã¨ãƒãƒ¼ãƒ‰ã®ã„ãšã‚Œã§ã‚ã‚‹ã‹ã«å®¢è¦³çš„ãªæŒ‡æ¨™ãŒãªãã€ã‚„ã‚„æ›–æ˜§ãªç¨®åˆ¥ã«ãªã£ã¦ã—ã¾ã†ãŸã‚ã€æœ¬è¨˜äº‹ã® X as-a-Service ã®æ–¹ãŒå€‹äººçš„ã«ã¯å¥½ã¿ã§ã™â™¡â™¡â™¡The Kubernetes Book: 2023 Edition (English Edition)Multi-tenancy | KubernetesMulti-tenancy - EKS Best Practices GuidesClusters as-a-ServiceClusters as-a-Serviceã¯ã€ãƒ†ãƒŠãƒ³ãƒˆã”ã¨ã«ç‹¬ç«‹ã—ãŸClusterã‚’æä¾›ã—ã¾ã™ã€‚å®ŸClusterç®¡ç†ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦ã€AWS EKSã€GCP GKEã€Azure AKEã€Kubeadmã€ãªã©ãŒã‚ã‚Šã¾ã™ã€‚Three Tenancy Models For Kubernetes | KubernetesWhat are the three tenancy models for Kubernetes?Control Planes as-a-ServiceControl Planes as-a-Serviceã¯ã€ãƒ†ãƒŠãƒ³ãƒˆã”ã¨ã«ç‹¬ç«‹ã—ãŸã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ—ãƒ¬ãƒ¼ãƒ³ (è¨€ã„æ›ãˆã°ä»®æƒ³Cluster) ã‚’æä¾›ã—ã¾ã™ã€‚ä»®æƒ³Clusterç®¡ç†ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦ã€Kcpã€tensile-kubeã€vclusterã€VirtualClusterã€ãªã©ãŒã‚ã‚Šã¾ã™ã€‚Three Tenancy Models For Kubernetes | KubernetesWhat are the three tenancy models for Kubernetes?Namespaces as-a-ServiceNamespaces as-a-Serviceã¯ã€ãƒ†ãƒŠãƒ³ãƒˆã”ã¨ã«ç‹¬ç«‹ã—ãŸNamespaceã‚’æä¾›ã—ã¾ã™ã€‚Namespaceã‚’å¢—ã‚„ã™ã ã‘ãªã®ã§ã€ãƒ„ãƒ¼ãƒ«ã¯ä¸è¦ã§ã™ã€‚Three Tenancy Models For Kubernetes | KubernetesWhat are the three tenancy models for Kubernetes?ãƒ„ãƒ¼ãƒ«å›ºæœ‰ãƒ†ãƒŠãƒ³ãƒˆãƒ„ãƒ¼ãƒ«å›ºæœ‰ãƒ†ãƒŠãƒ³ãƒˆã¯ã€ãƒ†ãƒŠãƒ³ãƒˆã”ã¨ã«å›ºæœ‰ã®è«–ç†ç©ºé–“ (ä¾‹ï¼šArgoCDã®AppProjectã€Capsuleã®Tenantã€kioskã®Accountã€KubeZooã®Tenantã€ãªã©) ã‚’æä¾›ã—ã¾ã™ã€‚ãƒ„ãƒ¼ãƒ«ã«ã‚ˆã£ã¦ã¯ã€X as-a-Service ã‚‚å…¼ã­ã¦ã„ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚ä»Šå›ç´¹ä»‹ã™ã‚‹AppProjectã¯Namespaceãƒ†ãƒŠãƒ³ãƒˆã‚’å…¼ã­ã¦ãŠã‚Šã€ãƒ„ãƒ¼ãƒ«å›ºæœ‰ã®ãƒ†ãƒŠãƒ³ãƒˆ ã§è§£èª¬ã—ã¦ã„ã¾ã™ã€‚04. ArgoCDã§ã®ãƒ†ãƒŠãƒ³ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³å®Ÿè·µã®ä¸€è¦§ãŠå¾…ãŸã›ã—ã¾ã—ãŸã€‚ã“ã“ã‹ã‚‰ã¯ã€Kubernetesã®ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆã‚’ArgoCDã§å®Ÿè·µã—ã€ãŠã™ã™ã‚ã®ãƒ†ãƒŠãƒ³ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è§£èª¬ã—ã¦ã„ãã¾ã™ã€‚ãªãŠã€ã‚ªã‚¹ã‚¹ãƒ¡ã™ã‚‹ã‚‚ã®ã‚’ â˜… ã¨ã—ã¦ã„ã¾ã™ã€‚ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³å      ãƒ†ãƒŠãƒ³ãƒˆå®Ÿè·µ      ArgoCDãŒãƒ†ãƒŠãƒ³ãƒˆé–“ã§ç‹¬ç«‹ / å…±æœ‰      ãƒ†ãƒŠãƒ³ãƒˆé–“ã®Kubernetesãƒªã‚½ãƒ¼ã‚¹åˆ†é›¢(åˆ†é›¢ã§ãã¦ã„ã‚Œã° âœ… )      ã‚ªã‚¹ã‚¹ãƒ¡    Namespacedã‚¹ã‚³ãƒ¼ãƒ—ãƒªã‚½ãƒ¼ã‚¹      Clusterã‚¹ã‚³ãƒ¼ãƒ—ãƒªã‚½ãƒ¼ã‚¹    Clustersas-a-Service      å®ŸClusterãƒ†ãƒŠãƒ³ãƒˆ      ç‹¬ç«‹      âœ…      âœ…          Control Planesas-a-Service      ä»®æƒ³Clusterãƒ†ãƒŠãƒ³ãƒˆ      ç‹¬ç«‹      âœ…      âœ…      â˜…    Namespacesas-a-Service      Namespaceãƒ†ãƒŠãƒ³ãƒˆ      ç‹¬ç«‹      âœ…                ãƒ„ãƒ¼ãƒ«å›ºæœ‰ãƒ†ãƒŠãƒ³ãƒˆ      Projectãƒ†ãƒŠãƒ³ãƒˆ(CLãƒ¢ãƒ¼ãƒ‰)      å…±æœ‰      âœ…                  Projectãƒ†ãƒŠãƒ³ãƒˆ(NSãƒ¢ãƒ¼ãƒ‰)      ç‹¬ç«‹      âœ…            â˜…â˜…    How many do you need? - Argo CD Architectures Explained | Akuityä»¥é™ã®å›³ã®å‡¡ä¾‹ã§ã™ã€‚ArgoCDã®å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ (application-controllerã€argocd-serverã€dex-serverã€repo-server) ã¨å„ãƒªã‚½ãƒ¼ã‚¹ (Applicationã€AppProject) ã‚’åŒºåˆ¥ã—ã¦ã„ã¾ã™ã€‚04-02. Clusters as-a-Service ã®å®Ÿè·µå®ŸClusterãƒ†ãƒŠãƒ³ãƒˆå®ŸClusterãƒ†ãƒŠãƒ³ãƒˆã¯ã€Clusters as-a-Serviceãªãƒ†ãƒŠãƒ³ãƒˆã®å®Ÿè·µã§ã‚ã‚Šã€å®ŸClusterã‚’ãƒ†ãƒŠãƒ³ãƒˆã®å˜ä½ã¨ã—ã¾ã™ã€‚å¾Œè¿°ã®ä»®æƒ³Clusterã¨å¯¾æ¯”ã•ã›ã‚‹ãŸã‚ã«ã€"å®ŸCluster" ã¨å‘¼ã¶ã“ã¨ã«ã—ã¾ã™ã€‚å„ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãƒãƒ¼ãƒ ã¯ã€å®ŸClusterãƒ†ãƒŠãƒ³ãƒˆå†…ã®Applicationã‚’æ“ä½œã—ã€æ­£ã—ã„ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆç”¨Clusterã«ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¾ã™ã€‚ã‚ªã‚¹ã‚¹ãƒ¡ã—ãªã„ç†ç”±å®ŸClusterãƒ†ãƒŠãƒ³ãƒˆã«ã¯ã€ä»¥ä¸‹ã®ãƒ¡ãƒªãƒ‡ãƒ¡ãŒã‚ã‚Šã¾ã™ã€‚ãƒ‡ãƒ¡ãƒªãƒƒãƒˆã®å›é¿ç­–ã‚‚è€ƒæ…®ã—ã¦ã€ç‹¬æ–­ã¨åè¦‹ã§ã‚ªã‚¹ã‚¹ãƒ¡ã—ã¾ã›ã‚“ã§ã—ãŸã€‚åŠå¹´ä»¥å†…ã«ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã—ãªã„ã¨ã‚µãƒãƒ¼ãƒˆãŒåˆ‡ã‚Œã‚‹Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ãŒ33å€‹ã‚‚ã‚ã£ã¦ã€æ³£ã„ã¡ã‚ƒã£ãŸâ€” é•·è°·å· åºƒæ¨¹ (ä¿ºã§ã™) (@Hiroki__IT) January 18, 2023  ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ç‰¹æ€§  ãƒ¡ãƒªãƒƒãƒˆ â­•ï¸                                                                                                                                                           ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ Ã—                                                                                      ãƒ‡ãƒ¡ãƒªãƒƒãƒˆã®å›é¿ç­–                                                                                  æ‹¡å¼µæ€§                 -                                                                                                                                                                     ãƒ†ãƒŠãƒ³ãƒˆã‚’å¢—ã‚„ã™ãŸã‚ã«å®ŸClusterã‚’ç”¨æ„ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã€ä½œæ¥­é‡ãŒå¤šã„ã€‚                              â¡ï¸  IaCãƒ„ãƒ¼ãƒ«ã§å®ŸClusterã‚’ç”¨æ„ã™ã‚‹ã‚ˆã†ã«ã™ã‚Œã°ä½œæ¥­é‡ã‚’æ¸›ã‚‰ã›ã‚‹ãŒã€ã‚„ã£ã±ã‚Šã¨ã¦ã‚‚ã¤ã‚‰ã„ğŸ˜­       å®‰å…¨æ€§(ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£)        Clusterã‹ã‚‰Clusterã¸ã®åå‰è§£æ±ºã‚’ä¸å¯èƒ½ã«ã™ã‚Œã°ã€ä»–ã®ãƒ†ãƒŠãƒ³ãƒˆã‹ã‚‰ã®é€šä¿¡ã‚’é®æ–­ã§ãã‚‹ã€‚                                                                                  -                                                                                                â¡ï¸  -                                                                                                   ä¿å®ˆæ€§                 Clusterã‚¹ã‚³ãƒ¼ãƒ—ã¾ãŸã¯Namespacedã‚¹ã‚³ãƒ¼ãƒ—ãªKubernetesãƒªã‚½ãƒ¼ã‚¹ã‚’ä»–ã®ãƒ†ãƒŠãƒ³ãƒˆã‹ã‚‰åˆ†é›¢ã§ãã‚‹ã€‚ã“ã‚Œã‚‰ã®Kubernetesãƒªã‚½ãƒ¼ã‚¹ (ç‰¹ã«CRD) ã®å¤‰æ›´ãŒä»–ã®ãƒ†ãƒŠãƒ³ãƒˆã«å½±éŸ¿ã—ãªã„ã€‚  å„ãƒ†ãƒŠãƒ³ãƒˆãŒã€å€‹åˆ¥ã«å®ŸClusterã‚’ä¿å®ˆã—ãªã„ã¨ã„ã‘ãªã„ã€‚(ä¾‹ï¼šã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã€æ©Ÿèƒ½ä¿®æ­£ã€ãªã©)  â¡ï¸  å›é¿ã§ããšã€ã¨ã¦ã‚‚ã¤ã‚‰ã„ğŸ˜­                                                                           æ€§èƒ½                  Clusterã®ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ãƒªã‚½ãƒ¼ã‚¹ã‚’ä»–ã®ãƒ†ãƒŠãƒ³ãƒˆã¨å¥ªã„åˆã†ã“ã¨ãªãã€ã“ã‚Œã‚’ç‹¬å ã§ãã‚‹ã€‚                                                                                     -                                                                                                â¡ï¸  -                                                                                                   ä¿¡é ¼æ€§                 ãƒ†ãƒŠãƒ³ãƒˆã”ã¨ã«å®ŸClusterãŒç‹¬ç«‹ã—ã¦ãŠã‚Šã€ä»–ã®å®ŸClusterã‹ã‚‰éšœå®³ã®å½±éŸ¿ã‚’å—ã‘ãªã„ã€‚                                                                                        -                                                                                                â¡ï¸  -                                                                                    04-03. Control Planes as-a-Service ã®å®Ÿè·µä»®æƒ³Clusterãƒ†ãƒŠãƒ³ãƒˆ - â˜…ä»®æƒ³Clusterãƒ†ãƒŠãƒ³ãƒˆã¯ã€Control Planes as-a-Serviceãªãƒ†ãƒŠãƒ³ãƒˆã®å®Ÿè·µã§ã‚ã‚Šã€ä»®æƒ³Clusterã‚’ãƒ†ãƒŠãƒ³ãƒˆã®å˜ä½ã¨ã—ã¾ã™ã€‚å„ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãƒãƒ¼ãƒ ã¯ã€ä»®æƒ³Clusterãƒ†ãƒŠãƒ³ãƒˆå†…ã®Applicationã‚’æ“ä½œã—ã€æ­£ã—ã„ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆç”¨Clusterã«ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¾ã™ã€‚Using Argo CD with vclusters. Managing deployment to multipleâ€¦ | by Daniel Helfand | Argo Projectã‚ªã‚¹ã‚¹ãƒ¡ã—ãŸç†ç”±ä»®æƒ³Clusterãƒ†ãƒŠãƒ³ãƒˆã«ã¯ã€ä»¥ä¸‹ã®ãƒ¡ãƒªãƒ‡ãƒ¡ãŒã‚ã‚Šã¾ã™ã€‚ãƒ‡ãƒ¡ãƒªãƒƒãƒˆã®å›é¿ç­–ã‚‚è€ƒæ…®ã—ã¦ã€ç‹¬æ–­ã¨åè¦‹ã§ ã‚ªã‚¹ã‚¹ãƒ¡ ã—ã¾ã—ãŸã€‚ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ç‰¹æ€§  ãƒ¡ãƒªãƒƒãƒˆ â­•ï¸                                                                                                                                                           ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ Ã—                                                                                               ãƒ‡ãƒ¡ãƒªãƒƒãƒˆã®å›é¿ç­–                                                                                    æ‹¡å¼µæ€§                 ãƒ†ãƒŠãƒ³ãƒˆã‚’å¢—ã‚„ã™ãŸã‚ã«ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã§å®šç¾©ã—ãŸä»®æƒ³Clusterã‚’ç”¨æ„ã™ã‚‹ã ã‘ã§ã‚ˆãã€å®ŸClusterã‚’ç”¨æ„ã™ã‚‹ã“ã¨ã¨æ¯”ã¹ã¦ä½œæ¥­é‡ãŒå°‘ãªã„ã€‚                                          -                                                                                                         â¡ï¸  -                                                                                            å®‰å…¨æ€§(ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£)        ä»®æƒ³Clusterç®¡ç†ãƒ„ãƒ¼ãƒ«ã®æ©Ÿèƒ½ã§ã€ä»®æƒ³Clusterã‹ã‚‰ãƒ›ã‚¹ãƒˆClusterã¸ã®åå‰è§£æ±ºã‚’ä¸å¯èƒ½ã«ã™ã‚Œã°ã€ä»–ã®ãƒ†ãƒŠãƒ³ãƒˆã‹ã‚‰ã®é€šä¿¡ã‚’é®æ–­ã§ãã‚‹ã€‚                                         -                                                                                                         â¡ï¸  -                                                                                                     ä¿å®ˆæ€§                 Clusterã‚¹ã‚³ãƒ¼ãƒ—ã¾ãŸã¯Namespacedã‚¹ã‚³ãƒ¼ãƒ—ãªKubernetesãƒªã‚½ãƒ¼ã‚¹ã‚’ä»–ã®ãƒ†ãƒŠãƒ³ãƒˆã‹ã‚‰åˆ†é›¢ã§ãã‚‹ã€‚ã“ã‚Œã‚‰ã®Kubernetesãƒªã‚½ãƒ¼ã‚¹ (ç‰¹ã«CRD) ã®å¤‰æ›´ãŒä»–ã®ãƒ†ãƒŠãƒ³ãƒˆã«å½±éŸ¿ã—ãªã„ã€‚  å„ãƒ†ãƒŠãƒ³ãƒˆãŒã€å€‹åˆ¥ã«ä»®æƒ³Clusterã‚’ä¿å®ˆã—ãªã„ã¨ã„ã‘ãªã„ã€‚(ä¾‹ï¼šã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã€æ©Ÿèƒ½ä¿®æ­£ã€ãªã©)  â¡ï¸  ä»®æƒ³Clusterã«é–¢ã™ã‚‹çŸ¥è¦‹ã‚’æŒã¤çµ„ç¹”ã§ã‚ã‚Œã°ã€å„ãƒ†ãƒŠãƒ³ãƒˆã§ä¿å®ˆã§ãã‚‹ã€‚                                    æ€§èƒ½                  -                                                                                                                                                                     Clusterã®ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ãƒªã‚½ãƒ¼ã‚¹ã‚’ä»–ã®ãƒ†ãƒŠãƒ³ãƒˆã¨å¥ªã„åˆã†ã“ã¨ã«ãªã‚‹ã€‚                                         â¡ï¸  å¤šãã®åˆ©ç”¨è€…ãŒåŒæ™‚ä¸¦è¡Œçš„ã«ArgoCDã‚’æ“ä½œã™ã‚‹çŠ¶æ³ã«ãªã‚Šã«ãã‘ã‚Œã°ã€å¥ªã„åˆã„ã‚‚èµ·ã“ã‚‰ãªã„ã€‚                ä¿¡é ¼æ€§                 ãƒ†ãƒŠãƒ³ãƒˆã”ã¨ã«ä»®æƒ³ClusterãŒç‹¬ç«‹ã—ã¦ãŠã‚Šã€ä»–ã®ä»®æƒ³Clusterã‹ã‚‰éšœå®³ã®å½±éŸ¿ã‚’å—ã‘ãªã„ã€‚                                                                                    -                                                                                                         â¡ï¸  -                                                                                      04-04. Namespaces as-a-Service ã®å®Ÿè·µNamespaceãƒ†ãƒŠãƒ³ãƒˆã¯ã€Namespaces as-a-Serviceãªãƒ†ãƒŠãƒ³ãƒˆã®å®Ÿè·µã§ã‚ã‚Šã€Namespaceã‚’ãƒ†ãƒŠãƒ³ãƒˆã®å˜ä½ã¨ã—ã¾ã™ã€‚å¾Œè¿°ã® Projectãƒ†ãƒŠãƒ³ãƒˆ ã¯äºŒé‡ã®ãƒ†ãƒŠãƒ³ãƒˆã‚’æŒã¡ã€Namespaceãƒ†ãƒŠãƒ³ãƒˆã‚‚å…¼ã­ã¦ã„ã¾ã™ã€‚ãã®ãŸã‚ã€ã“ã“ã§ã¯Namespaceãƒ†ãƒŠãƒ³ãƒˆã®è§£èª¬ã¯çœç•¥ã—ã¾ã™ã€‚04-05. ãƒ„ãƒ¼ãƒ«å›ºæœ‰ãƒ†ãƒŠãƒ³ãƒˆã®å®Ÿè·µProjectãƒ†ãƒŠãƒ³ãƒˆProjectãƒ†ãƒŠãƒ³ãƒˆã¯ã€ãƒ„ãƒ¼ãƒ«å›ºæœ‰ãƒ†ãƒŠãƒ³ãƒˆã®å®Ÿè·µã§ã‚ã‚Šã€Namespaceã¨AppProjectã‚’ãƒ†ãƒŠãƒ³ãƒˆã®å˜ä½ã¨ã—ã¾ã™ã€‚Projectãƒ†ãƒŠãƒ³ãƒˆã¯ã€äºŒé‡ã®ãƒ†ãƒŠãƒ³ãƒˆ (ç¬¬ä¸€ãƒ†ãƒŠãƒ³ãƒˆã«Namespaceã€ç¬¬äºŒãƒ†ãƒŠãƒ³ãƒˆã«è¤‡æ•°ã®AppProject) ã‚’æŒã¡ã€"ã‚ã‚‰ã‚†ã‚‹é¢ã‹ã‚‰" ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã®ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’åˆ¶é™ã—ã¾ã™ã€‚ç‰¹ã«ã€AppProjectã¯Namespaceã‚¹ã‚³ãƒ¼ãƒ—ãªã‚«ã‚¹ã‚¿ãƒ ãƒªã‚½ãƒ¼ã‚¹ã§ã‚ã‚Šã€è‡ªèº«ã«æ‰€å±ã™ã‚‹Applicationã‚’ä¸€æ‹¬ã—ã¦åˆ¶é™ã—ã¾ã™ã€‚apiVersion: argoproj.io/v1alpha1kind: AppProjectmetadata:  name: foo-tenant  namespace: foo  # è‡ªèº«ã«æ‰€å±ã™ã‚‹Applicationã‚’åˆ¶é™ã™ã‚‹spec: ...apiVersion: argoproj.io/v1alpha1kind: Applicationmetadata:  name: infra-application  namespace: foospec:  # foo-tenantã«æ‰€å±ã™ã‚‹  project: foo-tenant  ...Argo CD in Practice: The GitOps way of managing cloud-native applications (English Edition)Projects - Argo CD - Declarative GitOps CD for Kubernetes.spec.scopeã‚­ãƒ¼ã‹ã‚‰ã‚‚åˆ†ã‹ã‚‹é€šã‚Šã€AppProjectã¯Namespacedã‚¹ã‚³ãƒ¼ãƒ—ãªã‚«ã‚¹ã‚¿ãƒ ãƒªã‚½ãƒ¼ã‚¹ã§ã‚ã‚Šã€ä»»æ„ã®Namespaceã‚’è¨­å®šã§ãã¾ã™ğŸ‘apiVersion: apiextensions.k8s.io/v1kind: CustomResourceDefinitionmetadata:  labels:    app.kubernetes.io/name: appprojects.argoproj.io    app.kubernetes.io/part-of: argocd  name: appprojects.argoproj.iospec:  group: argoproj.io  names:    kind: AppProject    ...  # Namespacedã‚¹ã‚³ãƒ¼ãƒ—ãªã‚«ã‚¹ã‚¿ãƒ ãƒªã‚½ãƒ¼ã‚¹ã§ã‚ã‚‹ã¨ã‚ã‹ã‚‹  scope: Namespaced...  argo-cd/manifests/crds/appproject-crd.yaml at master Â· argoproj/argo-cd Â· GitHubExtend the Kubernetes API with CustomResourceDefinitions | KubernetesCLãƒ¢ãƒ¼ãƒ‰ vs. NSãƒ¢ãƒ¼ãƒ‰ArgoCDã«ã¯ã€Clusterã‚¹ã‚³ãƒ¼ãƒ—ãƒ¢ãƒ¼ãƒ‰ ã¨ Namespacedã‚¹ã‚³ãƒ¼ãƒ—ãƒ¢ãƒ¼ãƒ‰ (ä»¥é™ã€"CLãƒ¢ãƒ¼ãƒ‰" ã¨ "NSãƒ¢ãƒ¼ãƒ‰") ãŒã‚ã‚Šã¾ã™ã€‚ã‚¹ã‚³ãƒ¼ãƒ—ãƒ¢ãƒ¼ãƒ‰ã«å¿œã˜ã¦ã€Projectãƒ†ãƒŠãƒ³ãƒˆã®è¨­è¨ˆæ–¹æ³•ãŒç•°ãªã‚Šã¾ã™ã€‚æ¬¡ã®ç« ã‹ã‚‰ã¯ã€CLãƒ¢ãƒ¼ãƒ‰ã¨NSãƒ¢ãƒ¼ãƒ‰ã®ä¸¡æ–¹ã§Projectãƒ†ãƒŠãƒ³ãƒˆã‚’è§£èª¬ã—ã¦ã„ãã¾ã™ã€‚Applications in any namespace - Argo CD - Declarative GitOps CD for Kubernetes05. CLãƒ¢ãƒ¼ãƒ‰ãªArgoCDCLãƒ¢ãƒ¼ãƒ‰ãªArgoCDã¨ã¯CLãƒ¢ãƒ¼ãƒ‰ãªArgoCDã®å ´åˆã€å„ãƒ†ãƒŠãƒ³ãƒˆé–“ã§å…±æœ‰ã®ArgoCDã‚’ç®¡ç†ã—ã¾ã™ä¾‹ãˆã°ã€Projectãƒ†ãƒŠãƒ³ãƒˆã¨ã—ã¦ã€ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆåˆ¥ã®Namespace (fooã€barã€baz) ã¨AppProject (fooã€barã€baz) ã‚’ç”¨æ„ã—ã¾ã™ã€‚åˆ¥é€”ã€ArgoCDå°‚ç”¨ã®Namespace (argocd) ã‚’ç”¨æ„ã—ã€ã“ã“ã«é–¢é€£ã™ã‚‹Kubernetesãƒªã‚½ãƒ¼ã‚¹ (ä¾‹ï¼›ConfigMap) ã‚’é…ç½®ã—ã¾ã™ã€‚å„ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãƒãƒ¼ãƒ ã¯ã€Projectãƒ†ãƒŠãƒ³ãƒˆå†…ã®Applicationã‚’æ“ä½œã—ã€æ­£ã—ã„ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆç”¨Clusterã«ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¾ã™ã€‚Applications in any namespace - Argo CD - Declarative GitOps CD for KubernetesArgoCD: Multi-tenancy strategy. Introduction | by Geoffrey | Aug, 2023 | Mediumå®Ÿè£…æ–¹æ³•AppProjectNSãƒ¢ãƒ¼ãƒ‰ã¨åŒæ§˜ã«ã—ã¦ã€AppProjectã«æ‰€å±ã™ã‚‹Applicationã«ã‚ˆã‚‹ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã®ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’åˆ¶é™ã§ãã¾ã™ã€‚ä¾‹ãˆã°ã€ä»¥ä¸‹ã®ã‚ˆã†ãªå®Ÿè£…ã«ãªã‚Šã¾ã™ã€‚apiVersion: argoproj.io/v1alpha1kind: AppProjectmetadata:  name: foo-tenant  namespace: foospec:  destinations:    # ArgoCDç”¨Clusterã«é–¢ã™ã‚‹èªå¯ã‚’è¨­å®šã™ã‚‹    # App-Of-Appsãƒ‘ã‚¿ãƒ¼ãƒ³ã®å ´åˆã«ä½¿ç”¨ã™ã‚‹    - namespace: foo      server: "https://kubernetes.default.svc"    # ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆç”¨Clusterã«é–¢ã™ã‚‹èªå¯ã‚’è¨­å®šã™ã‚‹    - namespace: "*"      server: https://foo-cluster.gr7.ap-northeast-1.eks.amazonaws.com  # CLãƒ¢ãƒ¼ãƒ‰ã§ã¯è¨­å®šãŒå¿…è¦ã§ã‚ã‚‹  sourceNamespaces:    - fooApplicationã‚’æ“ä½œã™ã‚‹ãƒ­ã‚°ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€ç„¡èªå¯ã®Namespaceã‚„Clusterã‚’ãƒ‡ãƒ—ãƒ­ã‚¤å…ˆã«æŒ‡å®šã§ããªã„ã‚ˆã†ã«ã€.spec.destinationã‚­ãƒ¼ã§åˆ¶é™ã—ã¦ã„ã¾ã™ã€‚ä¸€æ–¹ã§å¾Œè¿°ã®NSãƒ¢ãƒ¼ãƒ‰ã¨ã¯ç•°ãªã‚Šã€CLãƒ¢ãƒ¼ãƒ‰ãªArgoCDã¯ä»»æ„ã®Namespaceã®Applicationã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚ãã®ãŸã‚ã€.spec.sourceNamespacesã‚­ãƒ¼ã§ã€ç‰¹å®šã®Namespaceã®ApplicationãŒã“ã®AppProjectã«æ‰€å±ã§ããªã„ã‚ˆã†ã«ã€Applicationã®Namespaceã‚’åˆ¶é™ã—ã¦ã„ã¾ã™ã€‚Applications in any namespace - Argo CD - Declarative GitOps CD for KubernetesProjects - Argo CD - Declarative GitOps CD for KubernetesArgoCDã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆç”¨ConfigMap (argocd-cmd-params-cm)NSãƒ¢ãƒ¼ãƒ‰ã¨åŒæ§˜ã«ã—ã¦ã€argocd-cmd-params-cmã§ã¯ã€ArgoCDã®å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚³ãƒ³ãƒ†ãƒŠã®å¼•æ•°ã‚’è¨­å®šã§ãã¾ã™ã€‚ä¾‹ãˆã°ã€ä»¥ä¸‹ã®ã‚ˆã†ãªå®Ÿè£…ã«ãªã‚Šã¾ã™ã€‚apiVersion: v1kind: ConfigMapmetadata:  name: argocd-cmd-params-cm  # å°‚ç”¨ã®Namespaceã‚’è¨­å®šã™ã‚‹  namespace: argocddata:  # CLãƒ¢ãƒ¼ãƒ‰ã§ã¯è¨­å®šãŒå¿…è¦ã§ã‚ã‚‹  # å…¨ã¦ã®Namespaceã‚’æŒ‡å®šã—ãŸã„å ´åˆã¯ã€ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ã‚’è¨­å®šã™ã‚‹  application.namespaces: "*".application.namespacesã‚­ãƒ¼ã¯ã€argocd-serverã¨application-controllerã®--application-namespacesã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ç›¸å½“ã—ã¾ã™ã€‚ä¸€æ–¹ã§ã®å¾Œè¿°ã®NSãƒ¢ãƒ¼ãƒ‰ã¨ã¯ç•°ãªã‚Šã€CLãƒ¢ãƒ¼ãƒ‰ãªArgoCDã¯ä»»æ„ã®Namespaceã®Applicationã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚--application-namespacesã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã€ä»»æ„ã®Namespaceã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã®èªå¯ã‚’è¨­å®šã§ãã¾ã™ã€‚Applications in any namespace - Argo CD - Declarative GitOps CD for Kubernetesargocd-cmd-params-cmã®ä»£ã‚ã‚Šã«ã€ä¾‹ãˆã°ä»¥ä¸‹ã®ã‚ˆã†ã«Podã«å¼•æ•°ã‚’ç›´æ¥æ¸¡ã—ã¦ã‚‚è‰¯ã„ã§ã™ğŸ™†ğŸ»â€ä¾‹ãˆã°ã€ä»¥ä¸‹ã®ã‚ˆã†ãªå®Ÿè£…ã«ãªã‚Šã¾ã™ã€‚apiVersion: v1kind: Podmetadata:  name: argocd-server  namespace: argocdspec:  containers:    - name: argocd-server      image: quay.io/argoproj/argocd:latest      args:        - /usr/local/bin/argocd-server        # ã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•æ™‚ã®å¼•æ•°ã¨ã—ã¦        - --application-namespaces="*"  ...apiVersion: v1kind: Podmetadata:  name: argocd-application-controller  namespace: argocdspec:  containers:    - name: argocd-application-controller      image: quay.io/argoproj/argocd:latest      args:        - /usr/local/bin/argocd-application-controller        # ã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•æ™‚ã®å¼•æ•°ã¨ã—ã¦        - --application-namespaces="*"  ...  Argocd application controller - Argo CD - Declarative GitOps CD for KubernetesArgocd server - Argo CD - Declarative GitOps CD for Kubernetesãƒ­ã‚°ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ç”¨ConfigMap (argocd-rbac-cm)NSãƒ¢ãƒ¼ãƒ‰ã¨åŒæ§˜ã«ã—ã¦ã€argocd-rbac-cmã§ã¯ã€Applicationã‚’æ“ä½œã™ã‚‹ãƒ­ã‚°ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€ç„¡èªå¯ã®AppProjectã‚„Namespaceã«æ‰€å±ã™ã‚‹Applicationã‚’æ“ä½œã§ããªã„ã‚ˆã†ã«åˆ¶é™ã—ã¾ã™ã€‚ä¾‹ãˆã°ã€ä»¥ä¸‹ã®ã‚ˆã†ãªå®Ÿè£…ã«ãªã‚Šã¾ã™ã€‚apiVersion: v1kind: ConfigMapmetadata:  name: argocd-rbac-cm  # å°‚ç”¨ã®Namespaceã‚’è¨­å®šã™ã‚‹  namespace: argocddata:  # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ­ãƒ¼ãƒ«  # @see https://github.com/argoproj/argo-cd/blob/master/assets/builtin-policy.csv#L9-L16  policy.default: role:readonly  policy.csv: |    p, role:foo, *, *, foo/*/*, allow    p, role:bar, *, *, bar/*/*, allow    p, role:baz, *, *, baz/*/*, allow    g, foo-team, role:foo    g, bar-team, role:bar    g, baz-team, role:baz  scopes: "[groups]"èªè¨¼æ¸ˆã¿ã‚°ãƒ«ãƒ¼ãƒ— (foo-teamã€bar-teamã€baz-team) ã«å¯¾ã—ã¦ã€ç„¡èªå¯ã®AppProject (fooã€barã€baz) ã«æ‰€å±ã™ã‚‹Applicationã‚’æ“ä½œã§ããªã„ã‚ˆã†ã«ã€èªå¯ã‚¹ã‚³ãƒ¼ãƒ—ã‚’åˆ¶é™ã—ã¦ã„ã¾ã™ã€‚Casbin ã®è¨˜æ³•ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ä»Šå›ã®å®Ÿè£…ä¾‹ã§ä½¿ç”¨ã—ãŸp (ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³) ã¨g (ã‚°ãƒ«ãƒ¼ãƒ—) ã§ã¯ã€ä»¥ä¸‹ã‚’è¨˜æ³•ã‚’ä½¿ç”¨ã§ãã¾ã™ğŸ‘apiVersion: v1kind: ConfigMapmetadata:  name: argocd-rbac-cm  namespace: argocddata:  policy.default: role:readonly  policy.csv: |    # ãƒ­ãƒ¼ãƒ«ã¨ArgoCDç³»ã‚«ã‚¹ã‚¿ãƒ ãƒªã‚½ãƒ¼ã‚¹ã®èªå¯ã‚¹ã‚³ãƒ¼ãƒ—ã‚’å®šç¾©ã™ã‚‹    p, role:<ãƒ­ãƒ¼ãƒ«å>, <Kubernetesãƒªã‚½ãƒ¼ã‚¹ã®ç¨®é¡>, <ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å>, <AppProjectå>/<Applicationã®Namespaceå>/<Applicationå>, <è¨±å¦>    # èªè¨¼æ¸ˆã¿ã‚°ãƒ«ãƒ¼ãƒ—ã«ãƒ­ãƒ¼ãƒ«ã‚’ç´ä»˜ã‘ã‚‹    g, <ã‚°ãƒ«ãƒ¼ãƒ—å>, role:<ãƒ­ãƒ¼ãƒ«å>  scopes: "[groups]"RBAC Configuration - Argo CD - Declarative GitOps CD for Kubernetesã‚ªã‚¹ã‚¹ãƒ¡ã—ãªã„ç†ç”±CLãƒ¢ãƒ¼ãƒ‰ãªArgoCDã®Projectãƒ†ãƒŠãƒ³ãƒˆã«ã¯ã€ä»¥ä¸‹ã®ãƒ¡ãƒªãƒ‡ãƒ¡ãŒã‚ã‚Šã¾ã™ã€‚ãƒ‡ãƒ¡ãƒªãƒƒãƒˆã®å›é¿ç­–ã‚‚è€ƒæ…®ã—ã¦ã€ç‹¬æ–­ã¨åè¦‹ã§ã‚ªã‚¹ã‚¹ãƒ¡ã—ã¾ã›ã‚“ã§ã—ãŸã€‚ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ç‰¹æ€§  ãƒ¡ãƒªãƒƒãƒˆ â­•ï¸                                                                                   ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ Ã—                                                                                                                                                                                                                      ãƒ‡ãƒ¡ãƒªãƒƒãƒˆã®å›é¿ç­–                                                                                                                                                            æ‹¡å¼µæ€§                 ãƒ†ãƒŠãƒ³ãƒˆã‚’å¢—ã‚„ã™ãŸã‚ã«Namespaceã¨AppProjectã‚’ç”¨æ„ã™ã‚‹ã ã‘ã§ã‚ˆãã€ä½œæ¥­é‡ãŒå°‘ãªã„ã€‚             -                                                                                                                                                                                                                                â¡ï¸  -                                                                                                                                                                    å®‰å…¨æ€§(ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£)        NetworkPolicyã§Namespaceé–“ã®åå‰è§£æ±ºã‚’ä¸å¯èƒ½ã«ã™ã‚Œã°ã€ä»–ã®Namespaceã‹ã‚‰ã®é€šä¿¡ã‚’é®æ–­ã§ãã‚‹ã€‚   -                                                                                                                                                                                                                                â¡ï¸  -                                                                                                                                                                             ä¿å®ˆæ€§                 ArgoCDç”¨Clusterã®ç®¡ç†è€…ãŒå˜ä¸€ã®Clusterã‚’ä¿å®ˆã™ã‚Œã°ã‚ˆã„ã€‚(ä¾‹ï¼šã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã€æ©Ÿèƒ½ä¿®æ­£ã€ãªã©)  AppProjectã¯Namespacedã‚¹ã‚³ãƒ¼ãƒ—ãªã‚«ã‚¹ã‚¿ãƒ ãƒªã‚½ãƒ¼ã‚¹ã®ãŸã‚ã€Clusterã‚¹ã‚³ãƒ¼ãƒ—ãªKubernetesãƒªã‚½ãƒ¼ã‚¹ã‚’ä»–ã®ãƒ†ãƒŠãƒ³ãƒˆã¨å…±æœ‰ã—ãªã„ã¨ã„ã‘ãªã„ã€‚ãã®ãŸã‚ã€Clusterã‚¹ã‚³ãƒ¼ãƒ—ãªKubernetesãƒªã‚½ãƒ¼ã‚¹ (ç‰¹ã«CRD) ã®å¤‰æ›´ã¯å…¨ã¦ã®ãƒ†ãƒŠãƒ³ãƒˆã«å½±éŸ¿ã™ã‚‹ã€‚  â¡ï¸  ArgoCDã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰æ™‚ (CRDã®å¤‰æ›´æ™‚) ã¯ã€ã¤ã„ã§ã«Kubernetesã‚‚ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã—ãŸã„ã€‚æ–°ã—ã„Clusterã‚’åˆ¥ã«ä½œæˆã—ã€ãã“ã§æ–°ArgoCDã‚’ä½œæˆã™ã‚Œã°ä¸€çŸ³äºŒé³¥ã§ã‚ã‚‹ã€‚                 æ€§èƒ½                  -                                                                                             Clusterã®ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ãƒªã‚½ãƒ¼ã‚¹ã‚’ä»–ã®ãƒ†ãƒŠãƒ³ãƒˆã¨å¥ªã„åˆã†ã“ã¨ã«ãªã‚‹ã€‚                                                                                                                                                                â¡ï¸  å¤šãã®åˆ©ç”¨è€…ãŒåŒæ™‚ä¸¦è¡Œçš„ã«ArgoCDã‚’æ“ä½œã™ã‚‹çŠ¶æ³ã«ãªã‚Šã«ãã‘ã‚Œã°ã€å¥ªã„åˆã„ã‚‚èµ·ã“ã‚‰ãªã„ã€‚                                                                                        ä¿¡é ¼æ€§                 -                                                                                             Clusterã¾ãŸã¯ArgoCDã§éšœå®³ãŒèµ·ã“ã‚‹ã¨ã€ã“ã‚Œã¯å…¨ã¦ã®ãƒ†ãƒŠãƒ³ãƒˆã«å½±éŸ¿ã™ã‚‹ã€‚                                                                                                                                                            â¡ï¸  ä»£ã‚ã‚Šã«Nodeã‚„ArgoCDã‚’ååˆ†ã«å†—é•·åŒ–ã—ã¦å¯ç”¨æ€§ã‚’é«˜ã‚ã‚Œã°ã€å½±éŸ¿ã‚’ç·©å’Œã§ãã‚‹ã€‚ãŸã ã€ãã‚‚ãã‚‚ã®å½±éŸ¿ç¯„å›²ãŒå¤§ãã™ãã‚‹ğŸ˜­                                           05-02. NSãƒ¢ãƒ¼ãƒ‰ãªArgoCD - â˜…â˜…NSãƒ¢ãƒ¼ãƒ‰ãªArgoCDã¨ã¯NSãƒ¢ãƒ¼ãƒ‰ãªArgoCDã®å ´åˆã€å‰è¿°ã®CLãƒ¢ãƒ¼ãƒ‰ã¨ã¯ç•°ãªã‚Šã€å„Projectãƒ†ãƒŠãƒ³ãƒˆé–“ã§ç‹¬ç«‹ã—ãŸArgoCDã‚’ç®¡ç†ã—ã¾ã™ã€‚ä¾‹ãˆã°ã€Projectãƒ†ãƒŠãƒ³ãƒˆã¨ã—ã¦ã€ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆåˆ¥ã®Namespace (fooã€barã€baz) ã¨AppProject (fooã€barã€baz) ã‚’ç”¨æ„ã—ã¾ã™ã€‚å„Projectãƒ†ãƒŠãƒ³ãƒˆã«ã€ArgoCDã¨é–¢é€£ã™ã‚‹Kubernetesãƒªã‚½ãƒ¼ã‚¹ (ä¾‹ï¼›ConfigMap) ã‚’é…ç½®ã—ã¾ã™ã€‚å„ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãƒãƒ¼ãƒ ã¯ã€Projectãƒ†ãƒŠãƒ³ãƒˆå†…ã®Applicationã‚’æ“ä½œã—ã€æ­£ã—ã„ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆç”¨Clusterã«ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¾ã™ã€‚Applications in any namespace - Argo CD - Declarative GitOps CD for Kuberneteså®Ÿè£…æ–¹æ³•AppProjectCLãƒ¢ãƒ¼ãƒ‰ã¨åŒæ§˜ã«ã—ã¦ã€AppProjectã«æ‰€å±ã™ã‚‹Applicationã«ã‚ˆã‚‹ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã®ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’åˆ¶é™ã§ãã¾ã™ã€‚ä¾‹ãˆã°ã€ä»¥ä¸‹ã®ã‚ˆã†ãªå®Ÿè£…ã«ãªã‚Šã¾ã™ã€‚apiVersion: argoproj.io/v1alpha1kind: AppProjectmetadata:  name: foo-tenant  namespace: foospec:  destinations:    # ArgoCDç”¨Clusterã«é–¢ã™ã‚‹èªå¯ã‚’è¨­å®šã™ã‚‹    # App-Of-Appsãƒ‘ã‚¿ãƒ¼ãƒ³ã®å ´åˆã«ä½¿ç”¨ã™ã‚‹    - namespace: foo      server: "https://kubernetes.default.svc"    # ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆç”¨Clusterã«é–¢ã™ã‚‹èªå¯ã‚’è¨­å®šã™ã‚‹    - namespace: "*"      server: https://foo-cluster.gr7.ap-northeast-1.eks.amazonaws.com# NSãƒ¢ãƒ¼ãƒ‰ã§ã¯è¨­å®šãŒä¸è¦ã§ã‚ã‚‹# sourceNamespaces:#   - fooApplicationã‚’æ“ä½œã™ã‚‹ãƒ­ã‚°ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€ç„¡èªå¯ã®Namespaceã‚„Clusterã‚’ãƒ‡ãƒ—ãƒ­ã‚¤å…ˆã«æŒ‡å®šã§ããªã„ã‚ˆã†ã«ã€.spec.destinationã‚­ãƒ¼ã§åˆ¶é™ã—ã¦ã„ã¾ã™ã€‚å‰è¿°ã®CLãƒ¢ãƒ¼ãƒ‰ã¨ã¯ç•°ãªã‚Šã€NSãƒ¢ãƒ¼ãƒ‰ãªArgoCDã¯è‡ªèº«ãŒæ‰€å±ã™ã‚‹Namespaceã®Applicationã®ã¿ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚ãã®ãŸã‚ã€.spec.sourceNamespacesã‚­ãƒ¼ã§ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã®ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’åˆ¶é™ã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚Applications in any namespace - Argo CD - Declarative GitOps CD for KubernetesProjects - Argo CD - Declarative GitOps CD for KubernetesArgoCDã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆç”¨ConfigMap (argocd-cmd-params-cm)CLãƒ¢ãƒ¼ãƒ‰ã¨åŒæ§˜ã«ã—ã¦ã€argocd-cmd-params-cmã§ã¯ã€ArgoCDã®å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚³ãƒ³ãƒ†ãƒŠã®å¼•æ•°ã‚’è¨­å®šã§ãã¾ã™ã€‚ä¾‹ãˆã°ã€ä»¥ä¸‹ã®ã‚ˆã†ãªå®Ÿè£…ã«ãªã‚Šã¾ã™ã€‚apiVersion: v1kind: ConfigMapmetadata:  name: argocd-cmd-params-cm  namespace: foodata:# NSãƒ¢ãƒ¼ãƒ‰ã§ã¯è¨­å®šãŒä¸è¦ã§ã‚ã‚‹# application.namespaces: "*"å‰è¿°ã®é€šã‚Šã€.application.namespacesã‚­ãƒ¼ã¯ã€argocd-serverã¨application-controllerã®--application-namespacesã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ç›¸å½“ã—ã¾ã™ã€‚å‰è¿°ã®CLãƒ¢ãƒ¼ãƒ‰ã¨ã¯ç•°ãªã‚Šã€NSãƒ¢ãƒ¼ãƒ‰ãªArgoCDã¯è‡ªèº«ãŒæ‰€å±ã™ã‚‹Namespaceã®Applicationã®ã¿ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ãã®ãŸã‚ã€.application.namespacesã‚­ãƒ¼ã§Namespaceã«é–¢ã™ã‚‹èªå¯ã‚’è¨­å®šã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã‚‚ã¡ã‚ã‚“ã€Podã®ã‚³ãƒ³ãƒ†ãƒŠå¼•æ•°ã«ã‚‚è¨­å®šã¯ä¸è¦ã§ã™ã€‚Applications in any namespace - Argo CD - Declarative GitOps CD for Kubernetesãƒ­ã‚°ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ç”¨ConfigMap (argocd-rbac-cm)CLãƒ¢ãƒ¼ãƒ‰ã¨åŒæ§˜ã«ã—ã¦ã€argocd-rbac-cmã§ã¯ã€Applicationã‚’æ“ä½œã™ã‚‹ãƒ­ã‚°ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€ç„¡èªå¯ã®AppProjectã‚„Namespaceã«æ‰€å±ã™ã‚‹Applicationã‚’æ“ä½œã§ããªã„ã‚ˆã†ã«åˆ¶é™ã—ã¾ã™ã€‚ä¾‹ãˆã°ã€ä»¥ä¸‹ã®ã‚ˆã†ãªå®Ÿè£…ã«ãªã‚Šã¾ã™ã€‚apiVersion: v1kind: ConfigMapmetadata:  name: argocd-rbac-cm  namespace: foodata:  # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ­ãƒ¼ãƒ«  # @see https://github.com/argoproj/argo-cd/blob/master/assets/builtin-policy.csv#L9-L16  policy.default: role:readonly  policy.csv: |    p, role:app, *, *, app/*/*, allow    p, role:infra, *, *, infra/*/*, allow    g, app-team, role:app    g, infra-team, role:infra  scopes: "[groups]"èªè¨¼æ¸ˆã¿ã‚°ãƒ«ãƒ¼ãƒ— (app-teamã€infra-team) ã«å¯¾ã—ã¦ã€ç„¡èªå¯ã®AppProject (appã€infra) ã«æ‰€å±ã™ã‚‹Applicationã‚’æ“ä½œã§ããªã„ã‚ˆã†ã«ã€èªå¯ã‚¹ã‚³ãƒ¼ãƒ—ã‚’åˆ¶é™ã—ã¦ã„ã¾ã™ã€‚ç‰¹ã«ã‚ªã‚¹ã‚¹ãƒ¡ã—ãŸç†ç”±NSãƒ¢ãƒ¼ãƒ‰ãªArgoCDã®Projectãƒ†ãƒŠãƒ³ãƒˆã«ã¯ã€ä»¥ä¸‹ã®ãƒ¡ãƒªãƒ‡ãƒ¡ãŒã‚ã‚Šã¾ã™ã€‚ãƒ‡ãƒ¡ãƒªãƒƒãƒˆã®å›é¿ç­–ã‚‚è€ƒæ…®ã—ã¦ã€ç‹¬æ–­ã¨åè¦‹ã§ ç‰¹ã«ã‚ªã‚¹ã‚¹ãƒ¡ ã—ã¾ã—ãŸã€‚ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ç‰¹æ€§  ãƒ¡ãƒªãƒƒãƒˆ â­•ï¸                                                                                  ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ Ã—                                                                                                                                                                                                                      ãƒ‡ãƒ¡ãƒªãƒƒãƒˆã®å›é¿ç­–                                                                                                                                                            æ‹¡å¼µæ€§                 ãƒ†ãƒŠãƒ³ãƒˆã‚’å¢—ã‚„ã™ãŸã‚ã«Namespaceã¨AppProjectã‚’ç”¨æ„ã™ã‚‹ã ã‘ã§ã‚ˆãã€ä½œæ¥­é‡ãŒå°‘ãªã„ã€‚            -                                                                                                                                                                                                                                â¡ï¸  -                                                                                                                                                                    å®‰å…¨æ€§(ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£)        NetworkPolicyã§Namespaceé–“ã®åå‰è§£æ±ºã‚’ä¸å¯èƒ½ã«ã™ã‚Œã°ã€ä»–ã®Namespaceã‹ã‚‰ã®é€šä¿¡ã‚’é®æ–­ã§ãã‚‹ã€‚  -                                                                                                                                                                                                                                â¡ï¸  -                                                                                                                                                                             ä¿å®ˆæ€§                 å˜ä¸€ã®Clusterã‚’ä¿å®ˆã™ã‚Œã°ã‚ˆã„ã€‚(ä¾‹ï¼šã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã€æ©Ÿèƒ½ä¿®æ­£ã€ãªã©)             AppProjectã¯Namespacedã‚¹ã‚³ãƒ¼ãƒ—ãªã‚«ã‚¹ã‚¿ãƒ ãƒªã‚½ãƒ¼ã‚¹ã®ãŸã‚ã€Clusterã‚¹ã‚³ãƒ¼ãƒ—ãªKubernetesãƒªã‚½ãƒ¼ã‚¹ã‚’ä»–ã®ãƒ†ãƒŠãƒ³ãƒˆã¨å…±æœ‰ã—ãªã„ã¨ã„ã‘ãªã„ã€‚ãã®ãŸã‚ã€Clusterã‚¹ã‚³ãƒ¼ãƒ—ãªKubernetesãƒªã‚½ãƒ¼ã‚¹ (ç‰¹ã«CRD) ã®å¤‰æ›´ã¯å…¨ã¦ã®ãƒ†ãƒŠãƒ³ãƒˆã«å½±éŸ¿ã™ã‚‹ã€‚  â¡ï¸  ArgoCDã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰æ™‚ (CRDã®å¤‰æ›´æ™‚) ã¯ã€ã¤ã„ã§ã«Kubernetesã‚‚ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã—ãŸã„ã€‚æ–°ã—ã„Clusterã‚’åˆ¥ã«ä½œæˆã—ã€ãã“ã§æ–°ArgoCDã‚’ä½œæˆã™ã‚Œã°ä¸€çŸ³äºŒé³¥ã§ã‚ã‚‹ã€‚                 æ€§èƒ½                  -                                                                                            Clusterã®ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ãƒªã‚½ãƒ¼ã‚¹ã‚’ä»–ã®ãƒ†ãƒŠãƒ³ãƒˆã¨å¥ªã„åˆã†ã“ã¨ã«ãªã‚‹ã€‚                                                                                                                                                                â¡ï¸  å¤šãã®åˆ©ç”¨è€…ãŒåŒæ™‚ä¸¦è¡Œçš„ã«ArgoCDã‚’æ“ä½œã™ã‚‹çŠ¶æ³ã«ãªã‚Šã«ãã‘ã‚Œã°ã€å¥ªã„åˆã„ã‚‚èµ·ã“ã‚‰ãªã„ã€‚                                                                                        ä¿¡é ¼æ€§                 ãƒ†ãƒŠãƒ³ãƒˆã”ã¨ã«ArgoCDãŒç‹¬ç«‹ã—ã¦ãŠã‚Šã€ä»–ã®ArgoCDã‹ã‚‰éšœå®³ã®å½±éŸ¿ã‚’å—ã‘ãªã„ã€‚                     Clusterã§éšœå®³ãŒèµ·ã“ã‚‹ã¨ã€ã“ã‚Œã¯å…¨ã¦ã®ãƒ†ãƒŠãƒ³ãƒˆã«å½±éŸ¿ã™ã‚‹ã€‚                                                                                                                                                                        â¡ï¸  ä»£ã‚ã‚Šã«ã€Nodeã‚’ååˆ†ã«å†—é•·åŒ–ã—ã¦å¯ç”¨æ€§ã‚’é«˜ã‚ã‚‹ã€‚ã„ãšã‚Œã‹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§éšœå®³ãŒèµ·ã“ã£ã¦ã‚‚ã€æ­£å¸¸ãªã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ArgoCDãŒç¨¼åƒã§ãã‚‹ã€‚                         Projectãƒ†ãƒŠãƒ³ãƒˆä¾‹ã®ä¸€è¦§NSãƒ¢ãƒ¼ãƒ‰ãªArgoCDã‚’æ¡ç”¨ã™ã‚‹å ´åˆã€Projectãƒ†ãƒŠãƒ³ãƒˆä¾‹ã‚’è§£èª¬ã—ã¦ã„ãã¾ã™ã€‚å‰è¿°ã®é€šã‚Šã€Projectãƒ†ãƒŠãƒ³ãƒˆãŒäºŒé‡ãƒ†ãƒŠãƒ³ãƒˆ (ç¬¬ä¸€ãƒ†ãƒŠãƒ³ãƒˆã«Namespaceã€ç¬¬äºŒãƒ†ãƒŠãƒ³ãƒˆã«è¤‡æ•°ã®AppProject) ã‚’æŒã¤ã“ã¨ã«ç•™æ„ã—ã¦ãã ã•ã„ã€‚ãªãŠã€ã‚ªã‚¹ã‚¹ãƒ¡ã™ã‚‹ã‚‚ã®ã‚’ â˜… ã¨ã—ã¦ã„ã¾ã™ã€‚    ãƒ†ãƒŠãƒ³ãƒˆä¾‹(äºŒé‡ãƒ†ãƒŠãƒ³ãƒˆ)    ã‚ªã‚¹ã‚¹ãƒ¡  Namespace(ç¬¬ä¸€ãƒ†ãƒŠãƒ³ãƒˆ)    AppProject(ç¬¬äºŒãƒ†ãƒŠãƒ³ãƒˆ)  ãƒ†ãƒŠãƒ³ãƒˆä¾‹1      ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®å®Ÿè¡Œç’°å¢ƒåˆ¥      ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®å®Ÿè¡Œç’°å¢ƒåˆ¥          ãƒ†ãƒŠãƒ³ãƒˆä¾‹2      ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆåˆ¥      ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®å®Ÿè¡Œç’°å¢ƒåˆ¥      â˜…    ãƒ†ãƒŠãƒ³ãƒˆä¾‹3      ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆåˆ¥      ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®ã‚µãƒ–ãƒãƒ¼ãƒ åˆ¥      â˜…â˜…    "ç®¡ç†ãƒãƒ¼ãƒ åˆ¥" (ä»Šå›ã§ã„ã†ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆåˆ¥) ã¨ã„ã†Namespaceã®åˆ†å‰²ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ã€æ§˜ã€…ãªè‘—åãªæ›¸ç±ã‚„ãƒ–ãƒ­ã‚°ã§ç´¹ä»‹ã•ã‚Œã¦ã„ã¾ã™ğŸ‘€  Amazon | Kubernetes in Action | Luksa, Marko | Software DevelopmentKubernetes best practices: Specifying Namespaces in YAML | Google Cloud Blogãƒ†ãƒŠãƒ³ãƒˆä¾‹1Namespace (ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®å®Ÿè¡Œç’°å¢ƒåˆ¥)ã€AppProject (ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®å®Ÿè¡Œç’°å¢ƒåˆ¥)ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®å®Ÿè¡Œç’°å¢ƒ (Devç’°å¢ƒã€Tesç’°å¢ƒ) åˆ¥ã«ç®¡ç†ã•ã‚ŒãŸClusterãŒã„ã‚‹çŠ¶æ³ã¨ä»®å®šã—ã¾ã™ã€‚ã“ã®å ´åˆã«ã€ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®å®Ÿè¡Œç’°å¢ƒåˆ¥ã«Namespace (devã€tes) ã¨AppProject (devã€tes) ã‚’ç”¨æ„ã—ã¾ã™ã€‚ã‚ªã‚¹ã‚¹ãƒ¡ã—ãªã‹ã£ãŸç†ç”±ãƒ†ãƒŠãƒ³ãƒˆä¾‹1ã«ã¯ã€ä»¥ä¸‹ã®ãƒ¡ãƒªãƒ‡ãƒ¡ãŒã‚ã‚Šã¾ã™ã€‚ç‹¬æ–­ã¨åè¦‹ã§ã‚ªã‚¹ã‚¹ãƒ¡ã—ã¾ã›ã‚“ã§ã—ãŸã€‚ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ç‰¹æ€§  ãƒ¡ãƒªãƒƒãƒˆ â­•ï¸                                                                                                                                     ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ Ã—                                                                                                                                ãƒ‡ãƒ¡ãƒªãƒƒãƒˆã®å›é¿ç­–                                                                                       æ‹¡å¼µæ€§                 -                                                                                                                                               ArgoCDã®Podæ•°ãŒå¤šããªã‚Šã€å°†æ¥çš„ã«Nodeå½“ãŸã‚Šã®Podã‚„IPã‚¢ãƒ‰ãƒ¬ã‚¹ã®ä¸Šé™æ•°ã«ã²ã£ã‹ã‹ã‚Šã‚„ã™ã„ã€‚ãã®æ™‚ç‚¹ã§ã€Projectãƒ†ãƒŠãƒ³ãƒˆã®å¢—ã‚„ã›ãªããªã‚‹ã€‚  â¡ï¸  ä¾‹ãˆã°AWS EKSã®å ´åˆã€Nodeæ•°ã‚’å¢—ã‚„ã—ãŸã‚Šã€Nodeã®ã‚¹ãƒšãƒƒã‚¯ã‚’ä¸Šã’ã‚‹ã€‚ãŸã ã€ãŠé‡‘ãŒã‹ã‹ã‚‹ğŸ˜­       å®‰å…¨æ€§(ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£)        ãƒ­ã‚°ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ç”¨ConfigMap (argocd-rbac-cm) ã‚’ä½¿ç”¨ã™ã‚Œã°ã€ç„¡èªå¯ã®å®Ÿè¡Œç’°å¢ƒåˆ¥AppProjectã«æ‰€å±ã™ã‚‹Applicationã‚’æ“ä½œã§ããªã„ã‚ˆã†ã«åˆ¶é™ã§ãã‚‹ã€‚  -                                                                                                                                          â¡ï¸  -                                                                                                        ä¿å®ˆæ€§                 ç•°ãªã‚‹å®Ÿè¡Œç’°å¢ƒã«é–¢ã™ã‚‹ApplicationãŒå…±å­˜ã—ã¦ãŠã‚‰ãšã€åˆ¥ã®argocd-serverã‹ã‚‰æ“ä½œã™ã‚‹ã“ã¨ã«ãªã‚‹ãŸã‚ã€å®Ÿè¡Œç’°å¢ƒé–“ã®é¸æŠãƒŸã‚¹ãŒèµ·ã“ã‚Šã«ãã„ã€‚            -                                                                                                                                          â¡ï¸  -                                                                                         ãƒ†ãƒŠãƒ³ãƒˆä¾‹2 - â˜…Namespace (ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆåˆ¥)ã€AppProject (ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®å®Ÿè¡Œç’°å¢ƒåˆ¥)ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®å®Ÿè¡Œç’°å¢ƒ (Devç’°å¢ƒã€Tesç’°å¢ƒ) åˆ¥ã«ç®¡ç†ã•ã‚ŒãŸClusterãŒã„ã‚‹çŠ¶æ³ã¨ä»®å®šã—ã¾ã™ã€‚ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆåˆ¥ã«Namespace (fooã€bar) ã€ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®å®Ÿè¡Œç’°å¢ƒåˆ¥ã«AppProject (devã€tes) ã‚’ç”¨æ„ã—ã¾ã™ã€‚ã‚ªã‚¹ã‚¹ãƒ¡ã—ãŸç†ç”±ãƒ†ãƒŠãƒ³ãƒˆä¾‹2ã«ã¯ã€ä»¥ä¸‹ã®ãƒ¡ãƒªãƒ‡ãƒ¡ãŒã‚ã‚Šã¾ã™ã€‚ç‹¬æ–­ã¨åè¦‹ã§ ã‚ªã‚¹ã‚¹ãƒ¡ ã—ã¾ã—ãŸã€‚ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ç‰¹æ€§  ãƒ¡ãƒªãƒƒãƒˆ â­•ï¸                                                                                                                ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ Ã—                                                                                                                                           ãƒ‡ãƒ¡ãƒªãƒƒãƒˆã®å›é¿ç­–                                                                                 æ‹¡å¼µæ€§                 ArgoCDã®Podæ•°ãŒå¤šããªã‚Šã€å°†æ¥çš„ã«Nodeå½“ãŸã‚Šã®Podã‚„IPã‚¢ãƒ‰ãƒ¬ã‚¹ã®ä¸Šé™æ•°ã«ã²ã£ã‹ã‹ã‚Šã«ãã„ã€‚                                   -                                                                                                                                                     â¡ï¸  -                                                                                         å®‰å…¨æ€§(ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£)        ãƒ­ã‚°ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ç”¨ConfigMap (argocd-rbac-cm) ã‚’ä½¿ç”¨ã™ã‚Œã°ã€ç„¡èªå¯ã®å®Ÿè¡Œç’°å¢ƒåˆ¥AppProjectã‚’æ“ä½œã§ããªã„ã‚ˆã†ã«åˆ¶é™ã§ãã‚‹ã€‚  -                                                                                                                                                     â¡ï¸  -                                                                                                  ä¿å®ˆæ€§                 -                                                                                                                          ç•°ãªã‚‹å®Ÿè¡Œç’°å¢ƒã«é–¢ã™ã‚‹ApplicationãŒå…±å­˜ã—ã¦ãŠã‚Šã€åŒã˜argocd-server (ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰) ã‹ã‚‰æ“ä½œã™ã‚‹ã“ã¨ã«ãªã‚‹ãŸã‚ã€å®Ÿè¡Œç’°å¢ƒé–“ã®é¸æŠãƒŸã‚¹ãŒèµ·ã“ã‚Šã‚„ã™ã„ã€‚  â¡ï¸  ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«ã¯Applicationã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ©Ÿèƒ½ãŒã‚ã‚‹ãŸã‚ã€é¸æŠãƒŸã‚¹ã‚’å›é¿ã§ãã‚‹ã€‚ ãƒ†ãƒŠãƒ³ãƒˆä¾‹3 - â˜…â˜…Namespace (ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆåˆ¥)ã€AppProject (ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®ã‚µãƒ–ãƒãƒ¼ãƒ åˆ¥)ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®å®Ÿè¡Œç’°å¢ƒ (Devç’°å¢ƒã€Tesç’°å¢ƒ) åˆ¥ã«ç®¡ç†ã•ã‚ŒãŸClusterãŒã„ã‚‹çŠ¶æ³ã¨ä»®å®šã—ã¾ã™ã€‚ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆåˆ¥ã«Namespace (fooã€bar) ã€ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®ã‚µãƒ–ãƒãƒ¼ãƒ åˆ¥ã«AppProject (appã€infra) ã‚’ç”¨æ„ã—ã¾ã™ã€‚ç‰¹ã«ã‚ªã‚¹ã‚¹ãƒ¡ã—ãŸç†ç”±ãƒ†ãƒŠãƒ³ãƒˆä¾‹3ã«ã¯ã€ä»¥ä¸‹ã®ãƒ¡ãƒªãƒ‡ãƒ¡ãŒã‚ã‚Šã¾ã™ã€‚ç‹¬æ–­ã¨åè¦‹ã§ ç‰¹ã«ã‚ªã‚¹ã‚¹ãƒ¡ ã—ã¾ã—ãŸã€‚ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ç‰¹æ€§  ãƒ¡ãƒªãƒƒãƒˆ â­•ï¸                                                                                                                                       ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ Ã—                                                                                                                                           ãƒ‡ãƒ¡ãƒªãƒƒãƒˆã®å›é¿ç­–                                                                                 æ‹¡å¼µæ€§                 ArgoCDã®Podæ•°ãŒå¤šããªã‚Šã€å°†æ¥çš„ã«Nodeå½“ãŸã‚Šã®Podã‚„IPã‚¢ãƒ‰ãƒ¬ã‚¹ã®ä¸Šé™æ•°ã«ã²ã£ã‹ã‹ã‚Šã«ãã„ã€‚                                                          -                                                                                                                                                     â¡ï¸  -                                                                                         å®‰å…¨æ€§(ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£)        ãƒ­ã‚°ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ç”¨ConfigMap (argocd-rbac-cm) ã‚’ä½¿ç”¨ã™ã‚Œã°ã€ç„¡èªå¯ã®ã‚µãƒ–ãƒãƒ¼ãƒ åˆ¥AppProjectã«æ‰€å±ã™ã‚‹Applicationã‚’æ“ä½œã§ããªã„ã‚ˆã†ã«åˆ¶é™ã§ãã‚‹ã€‚  -                                                                                                                                                     â¡ï¸  -                                                                                                  ä¿å®ˆæ€§                 -                                                                                                                                                 ç•°ãªã‚‹å®Ÿè¡Œç’°å¢ƒã«é–¢ã™ã‚‹ApplicationãŒå…±å­˜ã—ã¦ãŠã‚Šã€åŒã˜argocd-server (ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰) ã‹ã‚‰æ“ä½œã™ã‚‹ã“ã¨ã«ãªã‚‹ãŸã‚ã€å®Ÿè¡Œç’°å¢ƒé–“ã®é¸æŠãƒŸã‚¹ãŒèµ·ã“ã‚Šã‚„ã™ã„ã€‚  â¡ï¸  ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«ã¯Applicationã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ©Ÿèƒ½ãŒã‚ã‚‹ãŸã‚ã€é¸æŠãƒŸã‚¹ã‚’å›é¿ã§ãã‚‹ã€‚ 06. Projectãƒ†ãƒŠãƒ³ãƒˆã®ãƒ‡ãƒ—ãƒ­ã‚¤åˆ¶é™ã®ä»•çµ„ã¿ãã‚ãã‚è§£èª¬ã‚’èª­ã‚€ã®ãŒã—ã‚“ã©ã„æ–¹ãŒã„ã‚‹ã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ã€‚ã€å›ãŒãƒƒã€æ³£ãã¾ã§ã€è§£èª¬ã‚’ã‚„ã‚ãªã„ãƒƒï¼ã€Projectãƒ†ãƒŠãƒ³ãƒˆãŒãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã®ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’ã©ã®ã‚ˆã†ã«åˆ¶é™ã™ã‚‹ã®ã‹ã«ã¤ã„ã¦ã€ä¾‹ã‚’æŒ™ã’ã¦è§£èª¬ã—ã¾ã™ã€‚ã“ã“ã§ã¯ã€NSãƒ¢ãƒ¼ãƒ‰ãªArgoCDã® "ãƒ†ãƒŠãƒ³ãƒˆä¾‹3" ã‚’æ¡ç”¨ã—ã€ä»¥ä¸‹ã®AppProjectã‚’ä½œæˆã—ãŸã¨ä»®å®šã—ã¾ã™ã€‚Projectãƒ†ãƒŠãƒ³ãƒˆãŒäºŒé‡ãƒ†ãƒŠãƒ³ãƒˆ (ç¬¬ä¸€ãƒ†ãƒŠãƒ³ãƒˆã«Namespaceã€ç¬¬äºŒãƒ†ãƒŠãƒ³ãƒˆã«è¤‡æ•°ã®AppProject) ã‚’æŒã¤ã“ã¨ã«ç•™æ„ã—ã¦ãã ã•ã„ã€‚apiVersion: argoproj.io/v1alpha1kind: AppProjectmetadata:  # appãƒãƒ¼ãƒ   name: app  namespace: foospec:  destinations:    # ArgoCDç”¨Clusterã«é–¢ã™ã‚‹èªå¯ã‚’è¨­å®šã™ã‚‹    # Namespace (foo) ã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’è¨±å¯ã™ã‚‹    - namespace: foo      server: "https://kubernetes.default.svc"      # ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆç”¨Clusterã«é–¢ã™ã‚‹èªå¯ã‚’è¨­å®šã™ã‚‹      # Namespace (app) ã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’è¨±å¯ã™ã‚‹    - namespace: app      server: https://foo-cluster.gr7.ap-northeast-1.eks.amazonaws.comapiVersion: argoproj.io/v1alpha1kind: AppProjectmetadata:  # infraãƒãƒ¼ãƒ   name: infra  namespace: foospec:  destinations:    # ArgoCDç”¨Clusterã«é–¢ã™ã‚‹èªå¯ã‚’è¨­å®šã™ã‚‹    # Namespace (foo) ã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’è¨±å¯ã™ã‚‹    - namespace: foo      server: "https://kubernetes.default.svc"    # ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆç”¨Clusterã«é–¢ã™ã‚‹èªå¯ã‚’è¨­å®šã™ã‚‹    # Namespace (infra) ã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’è¨±å¯ã™ã‚‹    - namespace: infra      server: https://foo-cluster.gr7.ap-northeast-1.eks.amazonaws.comãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã®ãƒ‡ãƒ—ãƒ­ã‚¤åˆ¶é™ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®å®Ÿè¡Œç’°å¢ƒ (Devç’°å¢ƒã€Tesç’°å¢ƒ) åˆ¥ã«ç®¡ç†ã•ã‚ŒãŸClusterãŒã„ã‚‹çŠ¶æ³ã¨ä»®å®šã—ã¾ã™ã€‚ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆåˆ¥ã«Namespace (foo) ã€ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®ã‚µãƒ–ãƒãƒ¼ãƒ åˆ¥ã«AppProject (appã€infra) ã‚’ç”¨æ„ã—ã¾ã™ã€‚Projectãƒ†ãƒŠãƒ³ãƒˆã¯ã€ä¾‹ãˆã° èµ¤ç·š ã®æ–¹æ³•ã§ã€ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã®ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’åˆ¶é™ã—ã¾ã™ã€‚ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã§ãã‚‹å ´åˆãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’æ­£ã—ããƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹å ´åˆã€Projectãƒ†ãƒŠãƒ³ãƒˆã¯ã“ã‚Œã‚’åˆ¶é™ã—ã¾ã›ã‚“ã€‚(1) argocd-serverã¯ã€argocd-cmd-params-cmã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹Namespaceã‚’å–å¾—ã—ã¾ã™ã€‚apiVersion: v1kind: ConfigMapmetadata:  name: argocd-cmd-params-cm  namespace: foodata:# è¨­å®šã—ãªã„ã“ã¨ã§ã€argocd-serverã¯åŒã˜Namespaceã«ã—ã‹ã‚¢ã‚¯ã‚»ã‚¹ã§ããªããªã‚‹ã€‚# application.namespaces: "*"(2) fooãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®infraãƒãƒ¼ãƒ ãŒã€argocd-serverã‚’æ“ä½œã—ã¾ã™ã€‚(3) argocd-serverã¯ã€argocd-rbac-cmã‹ã‚‰Applicationæ“ä½œã«é–¢ã™ã‚‹èªå¯ã‚¹ã‚³ãƒ¼ãƒ—ã‚’å–å¾—ã—ã¾ã™apiVersion: v1kind: ConfigMapmetadata:  name: argocd-rbac-cm  namespace: foodata:  policy.default: role:readonly  policy.csv: |    p, role:app, *, *, app/*/*, allow    p, role:infra, *, *, infra/*/*, allow    g, app-team, role:app    g, infra-team, role:infra  scopes: "[groups]"(4) infraãƒãƒ¼ãƒ ã¯ã€èªå¯ã•ã‚ŒãŸAppProjectã«æ‰€å±ã™ã‚‹Applicationã‚’æ“ä½œã—ã¾ã™ã€‚(5) infraãƒãƒ¼ãƒ ã¯ã€Devç’°å¢ƒã®fooãƒ—ãƒ­ãƒ€ã‚¯ãƒˆç”¨Clusterã®Namespace (infra) ã«ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã§ãã¾ã™ã€‚(ğŸš«åˆ¶é™ä¾‹1) ç„¡èªå¯ã®Namespaceã§Applicationã‚’ä½œæˆã—ã‚ˆã†ã¨ã—ãŸå ´åˆä¾‹ãˆã°ã€fooãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®infraãƒãƒ¼ãƒ ãŒç„¡èªå¯ã®Namespace (bar) ã§Applicationã‚’ä½œæˆã—ã‚ˆã†ã¨ã—ã¾ã™ã€‚ã™ã‚‹ã¨ã€argocd-serverã¯ä»¥ä¸‹ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ã‚’è¿”å´ã—ã€ã“ã®æ“ä½œã‚’åˆ¶é™ã—ã¾ã™ã€‚namespace bar is not permitted in project 'infra-team'ç„¡èªå¯ã®Namespaceã§Applicationã‚’ä½œã‚Œã¦ã—ã¾ã†ã¨ã€ãã®Applicationã‹ã‚‰ç„¡èªå¯ã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆç”¨Clusterã«ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã§ãã¦ã—ã¾ã„ã¾ã™ğŸ˜ˆargo-cd/test/e2e/app_management_ns_test.go at v2.7.10 Â· argoproj/argo-cd Â· GitHub(ğŸš«åˆ¶é™ä¾‹2) ç„¡èªå¯ã®AppProjectã§Applicationã‚’ä½œæˆã—ã‚ˆã†ã¨ã—ãŸå ´åˆä¾‹ãˆã°ã€fooãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®infraãƒãƒ¼ãƒ ãŒã€ç„¡èªå¯ã®AppProject (app) ã§Applicationã‚’ä½œæˆã—ã‚ˆã†ã¨ã—ã¾ã™ã€‚ã™ã‚‹ã¨ã€argocd-serverã¯ä»¥ä¸‹ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ã‚’è¿”å´ã—ã€ã“ã®æ“ä½œã‚’åˆ¶é™ã—ã¾ã™ã€‚Application referencing project 'app' which does not existä»»æ„ã®AppProjectã§Applicationã‚’ä½œæˆã§ãã¦ã—ã¾ã†ã¨ã€ãã®Applicationã‹ã‚‰ç„¡èªå¯ã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆç”¨Clusterã«ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã§ãã¦ã—ã¾ã„ã¾ã™ğŸ˜ˆ(ğŸš«åˆ¶é™ä¾‹3) ç„¡èªå¯ã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆç”¨Clusterã‚’æŒ‡å®šã—ã‚ˆã†ã¨ã—ãŸå ´åˆä¾‹ãˆã°ã€fooãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®infraãƒãƒ¼ãƒ ãŒApplicationã‚’æ“ä½œã—ã€ç„¡èªå¯ã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆç”¨Cluster (bar-cluster) ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤å…ˆã¨ã—ã¦æŒ‡å®šã—ã‚ˆã†ã—ã¾ã™ã€‚ã™ã‚‹ã¨ã€argocd-serverã¯ä»¥ä¸‹ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ã‚’è¿”å´ã—ã€ã“ã®æ“ä½œã‚’åˆ¶é™ã—ã¾ã™ã€‚application destination{https://bar-cluster.gr7.ap-northeast-1.eks.amazonaws.com infra} is not permitted in project 'infra-team'ä»»æ„ã®Clusterã‚’ãƒ‡ãƒ—ãƒ­ã‚¤å…ˆã«æŒ‡å®šã§ãã¦ã—ã¾ã†ã¨ã€Applicationã‹ã‚‰ç„¡èªå¯ã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆç”¨Clusterã«ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã§ãã¦ã—ã¾ã„ã¾ã™ğŸ˜ˆargo-cd/util/argo/argo_test.go at v2.7.10 Â· argoproj/argo-cd Â· GitHub(ğŸš«åˆ¶é™ä¾‹4) ç„¡èªå¯ã®Namespaceã‚’ãƒ‡ãƒ—ãƒ­ã‚¤å…ˆã«æŒ‡å®šã—ã‚ˆã†ã¨ã—ãŸå ´åˆä¾‹ãˆã°ã€fooãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®infraãƒãƒ¼ãƒ ãŒApplicationã‚’æ“ä½œã—ã€ç„¡èªå¯ã®Namespace (app) ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤å…ˆã«æŒ‡å®šã—ã‚ˆã†ã—ã¾ã™ã€‚ã™ã‚‹ã¨ã€argocd-serverã¯ä»¥ä¸‹ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ã‚’è¿”å´ã—ã€ã“ã®æ“ä½œã‚’åˆ¶é™ã—ã¾ã™ã€‚application destination{https://foo-cluster.gr7.ap-northeast-1.eks.amazonaws.com app} is not permitted in project 'infra-team'ä»»æ„ã®Namespaceã‚’ãƒ‡ãƒ—ãƒ­ã‚¤å…ˆã«æŒ‡å®šã§ãã¦ã—ã¾ã†ã¨ã€ãã®Applicationã‹ã‚‰ç„¡èªå¯ã®Namespaceã«ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã§ãã¦ã—ã¾ã„ã¾ã™ğŸ˜ˆargo-cd/util/argo/argo_test.go at v2.7.10 Â· argoproj/argo-cd Â· GitHubargocd-serverã¨application-controllerã§ãƒ‡ãƒ—ãƒ­ã‚¤ã§ãã‚‹Kubernetesãƒªã‚½ãƒ¼ã‚¹ã®ç¨®é¡ (.spec.clusterResourceWhitelistã‚­ãƒ¼ã€.spec.namespaceResourceWhitelistã‚­ãƒ¼ã€ãªã©)repo-serverã§ãƒãƒ¼ãƒªãƒ³ã‚°ã§ãã‚‹ãƒªãƒã‚¸ãƒˆãƒª (.spec.sourceReposã‚­ãƒ¼)apiVersion: argoproj.io/v1alpha1kind: AppProjectmetadata:  name: foo-tenant  namespace: foospec:  clusterResourceWhitelist:    - group: "*"      kind: "*"  namespaceResourceWhitelist:    - group: "*"      kind: "*"  sourceRepos:    - "*"  ..."Projectãƒ†ãƒŠãƒ³ãƒˆã«ã‚ˆã‚‹ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã®ãƒ‡ãƒ—ãƒ­ã‚¤ä¸¸ã”ã¨ã®åˆ¶é™" ã¨ã„ã†è¦³ç‚¹ã§ãƒ†ãƒ¼ãƒãŒç•°ãªã‚‹ãŸã‚ã€æœ¬è¨˜äº‹ã§ã¯è¨€åŠã—ã¾ã›ã‚“ã§ã—ãŸğŸ™‡ğŸ»â€  Projects - Argo CD - Declarative GitOps CD for KubernetesDeclarative Setup - Argo CD - Declarative GitOps CD for Kubernetesã‚«ã‚¹ã‚¿ãƒ ãƒªã‚½ãƒ¼ã‚¹ã®Reconciliationåˆ¶é™ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®å®Ÿè¡Œç’°å¢ƒ (Devç’°å¢ƒã€Tesç’°å¢ƒ) åˆ¥ã«ç®¡ç†ã•ã‚ŒãŸClusterãŒã„ã‚‹çŠ¶æ³ã¨ä»®å®šã—ã¾ã™ã€‚ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆåˆ¥ã«Namespace (foo) ã€ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®ã‚µãƒ–ãƒãƒ¼ãƒ åˆ¥ã«AppProject (appã€infra) ã‚’ç”¨æ„ã—ã¾ã™ã€‚Projectãƒ†ãƒŠãƒ³ãƒˆã¯ã€ä¾‹ãˆã° èµ¤ç·š ã®æ–¹æ³•ã§ã€ArgoCDç³»ã‚«ã‚¹ã‚¿ãƒ ãƒªã‚½ãƒ¼ã‚¹ã«å¯¾ã™ã‚‹application-controllerã®Reconciliationã‚’åˆ¶é™ã—ã¾ã™ã€‚ArgoCDç³»ã‚«ã‚¹ã‚¿ãƒ ãƒªã‚½ãƒ¼ã‚¹ã‚’Reconciliationã§ãã‚‹å ´åˆæ­£ã—ã„Namespaceã«å¯¾ã—ã¦Reconciliationã‚’å®Ÿè¡Œã™ã‚‹å ´åˆã€Projectãƒ†ãƒŠãƒ³ãƒˆã¯ã“ã‚Œã‚’åˆ¶é™ã—ã¾ã›ã‚“ã€‚(1) application-controllerã¯ã€argocd-cmd-params-cmã‹ã‚‰è‡ªèº«ãŒã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹Namespaceã‚’å–å¾—ã—ã¾ã™ã€‚apiVersion: v1kind: ConfigMapmetadata:  name: argocd-cmd-params-cm  namespace: foodata:# è¨­å®šã—ãªã„ã“ã¨ã§ã€application-controllerã¯åŒã˜Namespaceã«ã—ã‹ã‚¢ã‚¯ã‚»ã‚¹ã§ããªããªã‚‹ã€‚# application.namespaces: "*"(2) application-controllerã¯ã€åŒã˜Namespaceã«æ‰€å±ã™ã‚‹ArgoCDç³»ã‚«ã‚¹ã‚¿ãƒ ãƒªã‚½ãƒ¼ã‚¹ã«å¯¾ã—ã¦ã€Reconciliationã‚’å®Ÿè¡Œã—ã¾ã™ã€‚(ğŸš«åˆ¶é™ä¾‹1) ç„¡èªå¯ã®Namespaceã«Reconciliationã‚’å®Ÿè¡Œã—ã‚ˆã†ã¨ã—ãŸå ´åˆä¾‹ãˆã°ã€application-controllerãŒReconciliationã®å¯¾è±¡ã¨ã™ã‚‹Namespaceã‚’é¸ã¼ã†ã¨ã—ã¦ã„ã‚‹ã¨ã—ã¾ã™ã€‚ã™ã‚‹ã¨ã€application-controllerã¯å†…éƒ¨ã§æ¤œè¨¼ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè¡Œã—ã€ç„¡èªå¯ã®Namespace (bar) ã¯é¸ã°ãªã„ã‚ˆã†ã«ã—ã¾ã™ã€‚argo-cd/controller/appcontroller_test.go at v2.7.10 Â· argoproj/argo-cd Â· GitHub07. ãŠã‚ã‚Šã«Kubernetesã®ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ArgoCDã§ã®ãƒ†ãƒŠãƒ³ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ã®å®Ÿè·µã‚’ã‚‚ã‚Šã‚‚ã‚Šå¸ƒæ•™ã—ã¾ã—ãŸã€‚ã‚ã‚‰ã‚†ã‚‹é¢ã‹ã‚‰ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã®ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’åˆ¶é™ã—ã¦ãã‚Œã‚‹ã€Projectãƒ†ãƒŠãƒ³ãƒˆã®ç´ æ™´ã‚‰ã—ã•ãŒä¼ã‚ã‚Šã¾ã—ãŸã§ã—ã‚‡ã†ã‹ã€‚Kubernetesã®ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ArgoCDã§ã©ã†å®Ÿè·µã™ã‚‹ã¹ãã‹ã€ã«ã¤ã„ã¦å›°ã£ã¦ã„ã‚‹æ–¹ã®åŠ©ã‘ã«ãªã‚Œã°å¹¸ã„ã§ã™ğŸ‘è¬è¾æœ¬è¨˜äº‹ã®ã‚¿ã‚¤ãƒˆãƒ«ã¯ã€ç§ãŒå´‡æ‹ã—ã¦ã„ã‚‹ãƒ‰ãƒ¡ã‚¤ãƒ³é§†å‹•è¨­è¨ˆã®æ›¸ç± "å®Ÿè·µãƒ‰ãƒ¡ã‚¤ãƒ³é§†å‹•è¨­è¨ˆ" ã‹ã‚‰æ‹å€Ÿã—ã¾ã—ãŸğŸ™ã¾ãŸã€ArgoCDã§ã®ãƒ†ãƒŠãƒ³ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ã®åé›†ã«ã‚ãŸã‚Šã€ä»¥ä¸‹ã®æ–¹ã‹ã‚‰ã®æ„è¦‹ã‚‚å‚è€ƒã«ã•ã›ã¦ã„ãŸã ãã¾ã—ãŸã€‚@toversus26 ã•ã‚“ã“ã®å ´ã§æ„Ÿè¬ç”³ã—ä¸Šã’ã¾ã™ğŸ™‡ğŸ»â€]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[YugabyteDBã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å…¨éƒ¨èª­ã‚€ Day5]]></title>
            <link>https://nnaka2992.hatenablog.com/entry/reading_yugabytedb_docs_5</link>
            <guid>https://nnaka2992.hatenablog.com/entry/reading_yugabytedb_docs_5</guid>
            <pubDate>Wed, 16 Aug 2023 13:49:19 GMT</pubDate>
            <content:encoded><![CDATA[å‰å›ã‹ã‚‰ã¤ã¥ã„ã¦YugabyteDBã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª­ã‚“ã§ã„ãã¾ã™ã€‚å‰å›ã¯Architecture > Key Concepts > YB-Master serviceã‚’èª­ã¿ã¾ã—ãŸã€‚ä»Šå›ã¯Architecture > Core functions > Universe creationã‚’èª­ã¿ã¾ã™ã€‚ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯æœ€æ–°ã®v2.19 previewã§ã™ã€‚Universe creationYugabyteDBã®ãƒ¦ãƒ‹ãƒãƒ¼ã‚¹ä½œæˆã¯è¤‡æ•°ã®ã‚¹ãƒ†ãƒƒãƒ—ã‚’å«ã‚€ã€‚Start YB-MastersYBãƒ¦ãƒ‹ãƒãƒ¼ã‚¹ä½œæˆã®æœ€åˆã®ã‚¹ãƒ†ãƒƒãƒ—ã¯ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ã§æŒ‡å®šã•ã‚ŒãŸæ•°ã ã‘YB-Masterã‚’ä½œæˆã™ã‚‹ã“ã¨ã§ã‚ã‚‹ã€‚ä½œæˆã•ã‚ŒãŸYB-Masterã¯ãã‚Œãã‚Œã‚’èªè­˜ã—ã¦ã„ã‚‹ã€‚YB-Masterã¯ãƒ¦ãƒ‹ãƒãƒ¼ã‚¹å†…ã§ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªID(UUID)ã‚’ãã‚Œãã‚Œã«å‰²ã‚Šå½“ã¦ã€ãã‚Œãã‚Œã‚’èªè­˜ã—ã‚ã£ãŸã‚ã¨ã«ãƒªãƒ¼ãƒ€ãƒ¼ã‚¨ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹ã€‚ã“ã®ã‚¹ãƒ†ãƒƒãƒ—ã®çµ‚ã‚Šã«YB-Masterã®ä¸­ã®ã²ã¨ã¤ãŒãƒªãƒ¼ãƒ€ãƒ¼ã¨ã—ã¦ç¢ºç«‹ã•ã‚Œã‚‹ã€‚Start YB-TServersãƒãƒ¼ãƒ‰ã®æ•°ã ã‘YB-TServerã‚’èµ·å‹•ã—ã€ãã‚Œãã‚Œã«ãƒã‚¹ã‚¿ãƒ¼ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’æ¸¡ã™ã€‚ãã‚Œãã‚Œã®YB-TServerã¯ãƒã‚¹ã‚¿ãƒ¼ã«ãƒãƒ¼ãƒˆãƒ“ãƒ¼ãƒˆã‚’é€ä¿¡ã—ã€æ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹ã€‚ãƒãƒ¼ãƒˆãƒ“ãƒ¼ãƒˆã¯YB-TServerãŒç¾åœ¨ãƒ›ã‚¹ãƒˆã—ã¦ã„ã‚‹ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆã¨ãã®è² è·æƒ…å ±ã«ã¤ã„ã¦ã‚‚é€šä¿¡ã™ã‚‹ãŒã€ã“ã®æ™‚ç‚¹ã§ã¯ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆã«ãƒ‡ãƒ¼ã‚¿ã¯ç™»éŒ²ã•ã‚Œã¦ã„ãªã„ã€‚Examples4ãƒãƒ¼ãƒ‰ã‹ã‚‰ãªã‚‹YBãƒ¦ãƒ‹ãƒãƒ¼ã‚¹ã«ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆã™ã‚‹å ´åˆã«ã¤ã„ã¦è€ƒãˆã‚‹ã€‚ãƒ†ãƒ¼ãƒ–ãƒ«ã®ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ã¯3ã¨ã™ã‚‹ã€‚3ã¤ã®ãƒã‚¹ã‚¿ãƒ¼ãŒcreateãƒ¢ãƒ¼ãƒ‰ã§èµ·å‹•ã•ã‚Œã‚‹ã€‚ã“ã‚Œã¯ãƒã‚¹ã‚¿ãƒ¼ãŒã™ã§ã«èµ·å‹•ã—ã¦ã„ã‚‹ãŸã‚ã«ç™ºç”Ÿã™ã‚‹ã‚¨ãƒ©ãƒ¼ã‚’é˜²ããŸã‚ã«æ˜ç¤ºçš„ã«å®Ÿè¡Œã•ã‚Œã‚‹ã€‚ãƒªãƒ¼ãƒ€ãƒ¼ã‚¨ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã—ã€ãƒªãƒ¼ãƒ€ãƒ¼ã‚’é¸å‡ºã™ã‚‹ã€‚YB-TServerãŒèµ·å‹•ã—ã€å…¨ã¦ã®YB-TServerãŒãƒã‚¹ã‚¿ãƒ¼ã«ãƒãƒ¼ãƒˆãƒ“ãƒ¼ãƒˆã‚’é€ä¿¡ã™ã‚‹ã€‚]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[PaLM API for textã§ä½œã‚‹Google Cloudã‚³ã‚¹ãƒˆãƒã‚§ãƒƒã‚«ãƒ¼]]></title>
            <link>https://sreake.com/blog/google-cloud-cost-check-with-palm-api-for-text/</link>
            <guid>https://sreake.com/blog/google-cloud-cost-check-with-palm-api-for-text/</guid>
            <pubDate>Wed, 16 Aug 2023 05:06:08 GMT</pubDate>
            <content:encoded><![CDATA[å‰æ®µ Sreakeäº‹æ¥­éƒ¨ã®æ©‹æœ¬ã§ã™ã€‚ Generative AIã‚’SREæ´»å‹•ã«æ´»ç”¨ã™ã‚‹å ´åˆã«å¤§ããåˆ†ã‘ã¦ä»¥ä¸‹ã®ã‚ˆã†ãª2ã‚±ãƒ¼ã‚¹ãŒè€ƒãˆã‚‰ã‚Œã¾ã™ã€‚ã“ã‚Œã¾ã§1ã¤ã‚ã®toilå‰Šæ¸›ã®å®Ÿè£…ã‚’Generative AIã«å«ã¾ã‚Œã‚‹å­¦ç¿’ãƒ‡ãƒ¼ [â€¦]The post PaLM API for textã§ä½œã‚‹Google Cloudã‚³ã‚¹ãƒˆãƒã‚§ãƒƒã‚«ãƒ¼ first appeared on sreake.com | æ ªå¼ä¼šç¤¾ã‚¹ãƒªãƒ¼ã‚·ã‚§ã‚¤ã‚¯.]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[WezTerm ã§å¿«é©ãª WSL2 ç’°å¢ƒã«ã™ã‚‹]]></title>
            <link>https://blog.1q77.com/2023/08/wezterm-on-windows/</link>
            <guid>https://blog.1q77.com/2023/08/wezterm-on-windows/</guid>
            <pubDate>Sat, 12 Aug 2023 11:07:01 GMT</pubDate>
            <content:encoded><![CDATA[å®¶ã®è‡ªåˆ†ç”¨ Laptop ã¯ãšã£ã¨ Linux ã‚’ä½¿ã£ã¦ãã¾ã—ãŸãŒã€æ•°ã‹æœˆå‰ã« Inspiron 14 ã«è²·ã„æ›¿ãˆãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ Ubuntu 22.04 ã«ã—ã¦ã‹ã‚‰ã‚„ã£ã±ã‚Šä¸ä¾¿ã ãªã‚ã¨ã‚‚æ€ã£ã¦ã„ã¾ã—ãŸã€‚(InputMethod ã®åˆ‡]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[SREã‹ã‚‰Platform Engineerã¸ã®æ‹¡å¤§ ã¨ã„ã†ã‚¿ã‚¤ãƒˆãƒ«ã§ç™»å£‡ã—ã¾ã—ãŸ]]></title>
            <link>https://syu-m-5151.hatenablog.com/entry/2023/08/10/150412</link>
            <guid>https://syu-m-5151.hatenablog.com/entry/2023/08/10/150412</guid>
            <pubDate>Thu, 10 Aug 2023 06:04:12 GMT</pubDate>
            <content:encoded><![CDATA[æ¦‚è¦Cloud Operator Days Tokyo 2023 ã§ SREã‹ã‚‰Platform Engineerã¸ã®æ‹¡å¤§ ã¨ã„ã†ãƒ†ãƒ¼ãƒã§ã®ç™»å£‡ã‚’æœãŸã—ã¾ã—ãŸã€‚ã‚ªãƒ³ãƒ‡ãƒãƒ³ãƒ‰é…ä¿¡ãªã®ã§ã„ãšã‚Œè¦‹ã‚Œã‚‹ã‚ˆã†ã«ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚ä»Šå›ã®ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ«ã¯ã€é‹ç”¨ã®æ–°æ™‚ä»£ã€‘ã¨ã—ã€ãã‚Œã«ã¡ãªã‚“ã§ãƒ¡ã‚¤ãƒ³ã‚¿ã‚¤ãƒˆãƒ«ã‚’è€ƒãˆã¾ã—ãŸã€‚è³‡æ–™ã®ä½œæˆéç¨‹ã§ã€è©±ã—ãŸã„å†…å®¹ãŒã©ã‚“ã©ã‚“ã¨å¢—ãˆã¦ãã¦ã—ã¾ã„ã€20åˆ†ã¨ã„ã†é™ã‚‰ã‚ŒãŸæ™‚é–“ã§ã®ç™ºè¡¨ãŒä¸€ç•ªã®èª²é¡Œã¨ãªã‚Šã¾ã—ãŸã€‚å†…å®¹ã®æ•´ç†ã«éš›ã—ã¦ã€å…·ä½“ã¨æŠ½è±¡ â€•ä¸–ç•ŒãŒå¤‰ã‚ã£ã¦è¦‹ãˆã‚‹çŸ¥æ€§ã®ã—ãã¿ ã¨ã„ã†æœ¬ã‚’å‚ç…§ã—ã€å¤§å¤‰å½¹ç«‹ã¡ã¾ã—ãŸã€‚å…·ä½“ã¨æŠ½è±¡ä½œè€…:ç´°è°· åŠŸdZEROï¼ˆã‚¤ãƒ³ãƒ—ãƒ¬ã‚¹ï¼‰Amazonè³‡æ–™ã“ã®ãƒ–ãƒ­ã‚°ã§ã¯ã€Cloud Operator Days Tokyo 2023ã§ã®ç™»å£‡å†…å®¹ã‚’ã¾ã¨ã‚ã¦ãŠã‚Šã¾ã™ã€‚è³‡æ–™ä½œæˆæ™‚ã«å‚ç…§ã—ãŸã•ã¾ã–ã¾ãªå‚è€ƒæƒ…å ±ã‚‚æ²è¼‰ã—ã¦ã„ã¾ã™ã®ã§ã€èª­è€…ã®çš†æ§˜ãŒåˆ¥é€”æƒ…å ±ã‚’æ¢ã™æ‰‹é–“ã‚’çœã‘ã‚‹ã‚ˆã†å¿ƒæ›ã‘ã¾ã—ãŸã€‚ãœã²ã€æœ¬ãƒ–ãƒ­ã‚°ã‚’ã”æ´»ç”¨ãã ã•ã„ã€‚æ–‡å­—å¤šãã¦åˆ†ã‹ã‚Šã«ãã„ã®ã¯åˆ†ã‹ã£ã¦ã¾ã™ã€‚è„³å†…æ•´ç†ã¯ã§ãã¦ã„ã‚‹ã®ã§ã™ãŒè³‡æ–™ã‚’èª­ã¿ã‚„ã™ãã™ã‚‹ã¨20åˆ†ã«ä½•ã‚‚åã¾ã‚‰ãš...ã€‚ speakerdeck.comå‚è€ƒæ–‡çŒ®Oâ€™Reilly Japan â€“ SRE ã‚µã‚¤ãƒˆãƒªãƒ©ã‚¤ã‚¢ãƒ“ãƒªãƒ†ã‚£ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã‚ãªãŸã‚‰ã—ãSREOâ€™Reilly Japan â€“ ã‚µã‚¤ãƒˆãƒªãƒ©ã‚¤ã‚¢ãƒ“ãƒªãƒ†ã‚£ãƒ¯ãƒ¼ã‚¯ãƒ–ãƒƒã‚¯Oâ€™Reilly Japan â€“ SREã®æ¢æ±‚SRE at Google: How to structure your SRE team | Google Cloud Blogãƒ¬ãƒˆãƒ­ã‚¹ãƒšã‚¯ãƒ†ã‚£ãƒ–ã‚¬ã‚¤ãƒ‰What Is Platform Engineering?Top Strategic Technology Trends for 2023: Platform EngineeringMaking the Business Case for a Dedicated Platform Engineering TeamSRE NEXTPlatform Engineering Meetupãƒãƒ¼ãƒ ãƒˆãƒãƒ­ã‚¸ãƒ¼ã€€ä¾¡å€¤ã‚ã‚‹ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚’ã™ã°ã‚„ãå±Šã‘ã‚‹é©å¿œå‹çµ„ç¹”è¨­è¨ˆThe History of DevOps ReportsEffective DevOpsã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ“ãƒªãƒ†ã‚£ãƒ»ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°Webã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®ãŸã‚ã®ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…ã‚¬ã‚¤ãƒ‰]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[AWS Control Tower å¾¹åº•èª¿æŸ»]]></title>
            <link>https://sreake.com/blog/learn-about-aws-control-tower/</link>
            <guid>https://sreake.com/blog/learn-about-aws-control-tower/</guid>
            <pubDate>Thu, 10 Aug 2023 05:52:55 GMT</pubDate>
            <content:encoded><![CDATA[AWS Control Tower ã¨ã¯ AWS Control Tower ã¨ã¯ Landing Zone ã‚’å®Ÿè£…ã™ã‚‹ãŸã‚ã® AWS ã®ãƒãƒãƒ¼ã‚¸ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚çµ±åˆ¶ã‚’å–ã‚Šã¤ã¤ãƒãƒ«ãƒã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ç®¡ç†ã™ã‚‹ä»•çµ„ã¿ã§ã™ã€‚ La [â€¦]The post AWS Control Tower å¾¹åº•èª¿æŸ» first appeared on sreake.com | æ ªå¼ä¼šç¤¾ã‚¹ãƒªãƒ¼ã‚·ã‚§ã‚¤ã‚¯.]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Harnessã§GKEã‚¯ãƒ©ã‚¹ã‚¿ã«CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’æ§‹ç¯‰ã™ã‚‹]]></title>
            <link>https://qiita.com/yokoo-an209/items/57e2e4c00394c9da85f7</link>
            <guid>https://qiita.com/yokoo-an209/items/57e2e4c00394c9da85f7</guid>
            <pubDate>Thu, 10 Aug 2023 05:22:38 GMT</pubDate>
            <content:encoded><![CDATA[ã¯ã˜ã‚ã«å®Ÿå‹™ã«ãŠã„ã¦Harnessã‚’ä½¿ç”¨ã™ã‚‹æ©Ÿä¼šãŒã‚ã£ãŸã®ã§ã€ãŠè©¦ã—ãŒã¦ã‚‰GKEã‚¯ãƒ©ã‚¹ã‚¿ä¸Šã«CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®æ§‹ç¯‰ã‚’è¡Œã„ã¾ã™ã€‚ï¼ˆâ€»ãªãŠã€ä»Šå›ã¯Harnessã®ä½¿ç”¨ã«ç„¦ç‚¹ã‚’å½“ã¦ã¦ã„ã‚‹ãŸã‚ã€CIã®å®Ÿâ€¦]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[2023å¹´8æœˆ10æ—¥ç¾åœ¨ ã§LunarVim ã¨ Copilot.lua ã§ã®ãƒãƒ«ãƒãƒ©ã‚¤ãƒ³ã‚µãƒãƒ¼ãƒˆã®æ”¹å–„æ–¹æ³• ]]></title>
            <link>https://syu-m-5151.hatenablog.com/entry/2023/08/10/021934</link>
            <guid>https://syu-m-5151.hatenablog.com/entry/2023/08/10/021934</guid>
            <pubDate>Wed, 09 Aug 2023 17:19:34 GMT</pubDate>
            <content:encoded><![CDATA[github.comLunarVimãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã—ã¦ã€ç§ã¯Neovimã§copilot.luaã‚’é »ç¹ã«åˆ©ç”¨ã—ã¦ã„ã¾ã™ã€‚ã—ã‹ã—ã€ãƒãƒ«ãƒãƒ©ã‚¤ãƒ³ã®ã‚µãƒãƒ¼ãƒˆã«é–¢ã—ã¦ã¯ã„ãã¤ã‹ã®èª²é¡ŒãŒã‚ã‚Šã¾ã—ãŸã€‚ã‚‚ã£ã¨ã„ã†ã¨ã©ã“ã‹ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§CopilotãŒä¸€è¡Œãšã¤ã—ã‹ã‚µã‚¸ã‚§ã‚¹ãƒˆã•ã‚Œãªããªã‚Šã¾ã—ãŸã€‚ã“ã®å•é¡Œã«å¯¾ã—ã¦ã€ä¸€éƒ¨ã®ã‚³ãƒ¼ãƒ‰ã‚’ä¿®æ­£ã™ã‚‹ã“ã¨ã§ã€ã“ã®èª²é¡Œã‚’è§£æ±ºã™ã‚‹æ–¹æ³•ã‚’è¦‹ã¤ã‘ã¾ã—ãŸã€‚å•é¡Œç‚¹Copilot.lua(Copilot.vimã‚‚åŒæ§˜ã«)ã®ä¸­ã®agent.jsã«ã¯ã€ãƒãƒ«ãƒãƒ©ã‚¤ãƒ³å…¥åŠ›ã®åœæ­¢ç‚¹ã‚’ç¤ºã™ã‚³ãƒ¼ãƒ‰ h.stop=["\n"] ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚ã“ã®è¨­å®šã«ã‚ˆã‚Šã€ä¸€éƒ¨ã®å ´é¢ã§ãƒãƒ«ãƒãƒ©ã‚¤ãƒ³ã‚µãƒãƒ¼ãƒˆãŒæœŸå¾…é€šã‚Šã«å‹•ä½œã—ãªã„ã“ã¨ãŒã‚ã‚Šã¾ã—ãŸã€‚è§£æ±ºæ–¹æ³•ç§ãŒæ¡ç”¨ã—ãŸæ–¹æ³•ã¯ã€ã“ã®h.stop=["\n"]ã‚’h.stop=["\n\n\n"]ã«å¤‰æ›´ã™ã‚‹ã“ã¨ã§ã™ã€‚ã“ã®å°ã•ãªå¤‰æ›´ã«ã‚ˆã‚Šã€ãƒãƒ«ãƒãƒ©ã‚¤ãƒ³ã®ã‚µãƒãƒ¼ãƒˆãŒå¤§å¹…ã«å‘ä¸Šã—ã¾ã™ã€‚ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã§ã€ã“ã®å¤‰æ›´ã‚’ç°¡å˜ã«é©ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚MAC ã§ã®sed åˆ©ç”¨ãªã®ã§ã“ã®ã‚ˆã†ãªã‚³ãƒãƒ³ãƒ‰ã«ãªã‚Šã¾ã™ã€‚å„ç’°å¢ƒã§åˆã‚ã›ã¦ã„ãŸã ããŸã„ã§ã™ã€‚sed -i '' 's/h\.stop=\["\\\\n"\]/h\.stop=\["\\\\n\\\\n\\\\n"\]/' ~/.local/share/lunarvim/site/pack/lazy/opt/copilot.lua/copilot/dist/agent.jså¤‰æ›´ãŒæ­£ã—ãé©ç”¨ã•ã‚ŒãŸã‹ã©ã†ã‹ã‚’ç¢ºèªã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚grep -o '.\{30\}h.stop=\[.\{30\}' ~/.local/share/lunarvim/site/pack/lazy/opt/copilot.lua/copilot/dist/agent.jsçµæœã“ã®å¤‰æ›´ã‚’é©ç”¨ã—ãŸå¾Œã€ãƒãƒ«ãƒãƒ©ã‚¤ãƒ³ã‚µãƒãƒ¼ãƒˆãŒæ˜ã‚‰ã‹ã«å‘ä¸Šã—ã¾ã—ãŸã€‚èˆˆå‘³ãŒã‚ã‚Œã°æœ€åˆã«ç´¹ä»‹ã—ãŸIssue ã«å‹•ç”»ãŒæ·»ä»˜ã•ã‚Œã¦ã„ãŸã®ã§ã”è¦§ãã ã•ã„ã€‚LunarVimã¨Copilot.luaã®çµ„ã¿åˆã‚ã›ã¯éå¸¸ã«å¼·åŠ›ã§ã™ãŒã€å°ã•ãªèª¿æ•´ã«ã‚ˆã‚Šã•ã‚‰ã«å¿«é©ã«ä½¿ã†ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã®ãƒãƒƒã‚¯ãŒä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã‚‚å½¹ç«‹ã¤ã“ã¨ã‚’é¡˜ã£ã¦ã„ã¾ã™ã€‚å¾Œæ—¥è«‡ã“ã®å¤‰æ›´ã‚’é©ç”¨ã—ãŸå¾Œã§ãƒãƒ«ãƒãƒ©ã‚¤ãƒ³ã‚µãƒãƒ¼ãƒˆã¯å‘ä¸Šã—ãŸã®ã§ã™ãŒä¸€éƒ¨æ¡ä»¶ã§ã¯ã¾ã ã€vscodeã®ã‚ˆã†ãªæŒ™å‹•ãŒã§ãã¾ã›ã‚“ã€‚]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Cloud Run ã‚’æ´»ç”¨ã—ãŸ Pull Request å˜ä½ã§ã® Ad hoc é–‹ç™ºç’°å¢ƒä½œæˆ]]></title>
            <link>https://sreake.com/blog/pull-request-based-adhoc-env/</link>
            <guid>https://sreake.com/blog/pull-request-based-adhoc-env/</guid>
            <pubDate>Wed, 09 Aug 2023 03:10:37 GMT</pubDate>
            <content:encoded><![CDATA[ãã£ã‹ã‘ é–‹ç™ºæ™‚ã€feature ãƒ–ãƒ©ãƒ³ãƒã® Pull Request ï¼ˆä»¥ä¸‹ã€PRï¼‰ã”ã¨ã«å®Ÿè¡Œç’°å¢ƒãŒæº–å‚™ã•ã‚Œã‚‹ã¨ä¾¿åˆ©ã ã‚ˆã­ã¨ã„ã†ã¨ã“ã‚ã‹ã‚‰ã€PR ã”ã¨ã«é–‹ç™ºç’°å¢ƒã‚’æ§‹ç¯‰ã•ã‚Œã‚‹ä»•çµ„ã¿ã‚’ä½œã‚‹ã“ã¨ã«ãªã‚Šã¾ã—ãŸã€‚ ä½¿ç”¨æŠ€è¡“ã‚¹ã‚¿ãƒƒ [â€¦]The post Cloud Run ã‚’æ´»ç”¨ã—ãŸ Pull Request å˜ä½ã§ã® Ad hoc é–‹ç™ºç’°å¢ƒä½œæˆ first appeared on sreake.com | æ ªå¼ä¼šç¤¾ã‚¹ãƒªãƒ¼ã‚·ã‚§ã‚¤ã‚¯.]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Terraform 1.6 ã§è¿½åŠ ã•ã‚Œãã†ãª terraform test ã‚³ãƒãƒ³ãƒ‰ã‚’è©¦ã—ã¦ã¿ã‚‹]]></title>
            <link>https://zenn.dev/kou_pg_0131/articles/tf-1_6_alpha-test-command</link>
            <guid>https://zenn.dev/kou_pg_0131/articles/tf-1_6_alpha-test-command</guid>
            <pubDate>Fri, 04 Aug 2023 09:00:00 GMT</pubDate>
            <content:encoded><![CDATA[æœ€è¿‘ Terraform 1.6 ã®ã‚¢ãƒ«ãƒ•ã‚¡ç‰ˆãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¦ã„ã¾ã™ã€‚https://github.com/hashicorp/terraform/releases/tag/v1.6.0-alpha20230719https://github.com/hashicorp/terraform/releases/tag/v1.6.0-alpha20230802ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã‚’èª­ã‚“ã§ã¿ã‚‹ã¨ terraform test ãªã‚‹ã‚³ãƒãƒ³ãƒ‰ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã‹ï¼ã“ã‚Œã¯è©¦ã—ã¦ã¿ã‚‹ã£ãã‚ƒãªã„ã¨æ€ã„ã€ã¡ã‚‡ã£ã¨ã ã‘è§¦ã£ã¦ã¿ã¾ã—ãŸã€‚!ã“ã®è¨˜äº‹ã¯ã‚ãã¾ã§ v1.6.0-alpha202308...]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[YugabyteDBã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å…¨éƒ¨èª­ã‚€ Day4]]></title>
            <link>https://nnaka2992.hatenablog.com/entry/reading_yugabytedb_docs_4</link>
            <guid>https://nnaka2992.hatenablog.com/entry/reading_yugabytedb_docs_4</guid>
            <pubDate>Thu, 03 Aug 2023 14:48:34 GMT</pubDate>
            <content:encoded><![CDATA[å‰å›](https://nnaka2992.hatenablog.com/entry/reading_yugabytedb_docs_3)ã‹ã‚‰ã¤ã¥ã„ã¦YugabyteDBã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª­ã‚“ã§ã„ãã¾ã™ã€‚å‰å›ã¯Architecture > Key Concepts > YB-TServer serviceã‚’èª­ã¿ã¾ã—ãŸã€‚ä»Šå›ã¯Architecture > Key Concepts > YB-Master serviceã‚’èª­ã¿ã¾ã™ã€‚ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯æœ€æ–°ã®v2.19 previewã§ã™ã€‚YB-Master serviceYB-Masterã‚µãƒ¼ãƒ“ã‚¹ã¯ãƒ†ãƒ¼ãƒ–ãƒ«ã‚„ãã®ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆã®å ´æ‰€ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ»ãƒ­ãƒ¼ãƒ«ã®æ¨©é™ã¨ã„ã£ãŸã‚·ã‚¹ãƒ†ãƒ ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã¨ãƒ¬ã‚³ãƒ¼ãƒ‰ã®ç®¡ç†ã‚’è¡Œã£ã¦ã„ã‚‹ã€‚ãã‚Œã«åŠ ãˆYB-Masterã¯ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚·ãƒ³ã‚°ã‚„ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®é–‹å§‹ã¨ã„ã£ãŸãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®ç®¡ç†ã‚„ã€ãƒ†ãƒ¼ãƒ–ãƒ«ã®CREATEã‚„ALTERã€DROPã¨ã„ã£ãŸæ§˜ã€…ãªç®¡ç†ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®è²¬ä»»ã‚’æŒã¤ã€‚YB-Masterã¯Raft Groupã‚’çµ„ã‚€ã“ã¨ã§é«˜å¯ç”¨æ€§ã‚’å®Ÿç¾ã—ã€ã¾ãŸãƒ†ãƒ¼ãƒ–ãƒ«ã«å¯¾ã™ã‚‹I/Oã®å˜ä¸€éšœå®³ç‚¹ã«ãªã‚‰ãªã„ã€‚Functions of YB-MasterYB-Masterã¯ã‚·ã‚¹ãƒ†ãƒ ã®é‡è¦ãªæ©Ÿèƒ½ã‚’è¤‡æ•°æŒã£ã¦ã„ã‚‹ã€‚Coordination of universe-wide administrative operationsCREATE TABLEã‚„ALTER TABLEã€DROP TABLEã¨ã„ã£ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆå‡¦ç†ã‚„ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã®å®Ÿè¡Œãªã©Universeã‚’ã¾ãŸãã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œã®èª¿æ•´ã‚’æ‹…å½“ã—ã¦ã„ã‚‹ã€‚YB-Masterã§ã¯ã“ã‚Œã‚‰ã®ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãŒãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä¿æŒã™ã‚‹YB-TServerã®çŠ¶æ…‹ã«é–¢ã‚ã‚‰ãšã€å…¨ã¦ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã«ä¼æ¬ã•ã‚Œã‚‹ã“ã¨ã‚’ä¿è¨¼ã™ã‚‹ã€‚YugabyteDBã¯åˆ†æ•£ã‚·ã‚¹ãƒ†ãƒ ã®ãŸã‚ã€Universeã‚’ã¾ãŸãå‡¦ç†ä¸­ã«YB-TServerã«éšœå®³ãŒç™ºç”Ÿã—ä¸€éƒ¨ã®ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆã¸ã®é©ç”¨ã«å¤±æ•—ã—ã¦ã‚‚ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®çµæœã«å•é¡ŒãŒç™ºç”Ÿã—ãªã„ã“ã¨ãŒé‡è¦ã ã‹ã‚‰ã§ã‚ã‚‹ã€‚Storage of system metadataãã‚Œãã‚Œã®YB-Masterã§ã¯ãƒãƒ¼ãƒ ã‚¹ãƒšãƒ¼ã‚¹ã‚„ãƒ†ãƒ¼ãƒ–ãƒ«ã€ãƒ­ãƒ¼ãƒ«ã€ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³ã€YB-TServerã¸å‰²ã‚Šå½“ã¦ãŸãƒ†ãƒ¼ãƒ–ãƒ«æƒ…å ±ã‚’å«ã‚€ã‚·ã‚¹ãƒ†ãƒ ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã—ã¦ã„ã‚‹ã€‚ã“ã‚Œã‚‰ã®ã‚·ã‚¹ãƒ†ãƒ ãƒ¬ã‚³ãƒ¼ãƒ‰ã¯YB-Masterã‚’å¯¾è±¡ã«Raftã‚°ãƒ«ãƒ¼ãƒ—ã‚’çµ„ã¿ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã™ã‚‹ã“ã¨ã§å†—é•·æ€§ã‚’å®Ÿç¾ã—ã¦ã„ã‚‹ã€‚ã¾ãŸã‚·ã‚¹ãƒ†ãƒ ãƒ¬ã‚³ãƒ¼ãƒ‰ã¯YB-MasterãŒç®¡ç†ã™ã‚‹DocDBã«ä¿å­˜ã•ã‚Œã‚‹ã€‚Authoritative source of tablet assignments to YB-TServersYB-Masterã¯å…¨ã¦ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã¨ãã‚Œã‚‰ã‚’ãƒ›ã‚¹ãƒˆã™ã‚‹YB-TServerã®æƒ…å ±ã‚’ä¿å­˜ã—ã¦ã„ã‚‹ã€‚ä¸€èˆ¬ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§ã¯ãã‚Œã‚‰ã®æƒ…å ±ã¯ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰ã‚¯ã‚¨ãƒªãƒ¬ã‚¤ãƒ¤ãªã©ã‚’é€šã—ã¦å–å¾—ã•ã‚ŒãŸä¸Šã§ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’è¿”ã—ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹ãŒè¡Œãªã‚ã‚Œã‚‹ã€‚ä¸€æ–¹ã§ã‚¹ãƒãƒ¼ãƒˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§ã¯YB-Masterã«ä¿å­˜ã•ã‚ŒãŸãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’åˆ©ç”¨ã—ã¦ç‰¹å®šã®YB-TServerãŒä¿æŒã™ã‚‹ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆã‚„ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã‚‹ãŸã‚ã€ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹æ™‚ã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚’ã¾ãŸãé€šä¿¡ã‚’æ¸›ã‚‰ã™ã“ã¨ãŒã§ããƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’é«˜ã‚ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚Background operationsã„ãã¤ã‹ã®ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã¯Universeã®ãƒ©ã‚¤ãƒ•ã‚¿ã‚¤ãƒ ã‚’é€šã—ã¦ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§è¡Œãªã†ã“ã¨ã§ã€ãƒ•ã‚©ã‚¢ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã®Read/Writeã«å½±éŸ¿ã‚’ä¸ãˆãšã«å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã‚‹ã€‚Data placement and load balancingYB-Masterã®ãƒªãƒ¼ãƒ€ãƒ¼ã¯CREATE TABLEæ™‚ã«ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆã®åˆæœŸé…ç½®ã‚’YB-TServerã‚’ã¾ãŸã„ã§è¡Œãªã†ã€‚ãã®ã¨ãã«ãƒ¦ãƒ¼ã‚¶ãƒ¼å®šç¾©ã®ãƒ‡ãƒ¼ã‚¿é…ç½®åˆ¶ç´„ã‚’å¼·åˆ¶ã—å‡ä¸€ãªèª­ã¿è¾¼ã¿ã‚’ä¿è¨¼ã™ã‚‹ã€‚Universeã®ãƒ©ã‚¤ãƒ•ã‚¿ã‚¤ãƒ ä¸­ã®ãƒãƒ¼ãƒ‰è¿½åŠ ã‚„éšœå®³ãŒç™ºç”Ÿã—ã¦ã‚‚ã€è² è·åˆ†æ•£ã‚’ç¶™ç¶šã—ãƒ‡ãƒ¼ã‚¿é…ç½®ã®åˆ¶ç´„ã‚’è‡ªå‹•çš„ã«é©ç”¨ã™ã‚‹ã€‚Leader balancingè¤‡æ•°ã®YB-TServerã«é…ç½®ã•ã‚ŒãŸã‚¿ãƒ–ãƒ¬ãƒƒãƒˆã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ãŒUniverseã‚’ã¾ãŸã„ã§åˆ†æ•£ã•ã‚Œã‚‹ã“ã¨ã‚’ä¿è¨¼ã—ã¦ã„ã‚‹ä¸€æ–¹ã§ã€YB-Masterã¯å¯¾è±¡ã¨ãªã‚‹ãƒãƒ¼ãƒ‰1é–“ã§ãã‚Œãã‚Œã®ãƒãƒ¼ãƒ‰ãŒåŒã˜æ•°ã®tablet-peer leader2ã‚’ã‚‚ã¤ã“ã¨ã‚’ä¿è¨¼ã™ã‚‹ã€‚Rereplication of data on extended YB-TServer failureYB-Masterã¯å…¨ã¦ã®YB-TServerã‹ã‚‰ãƒãƒ¼ãƒ‰ãƒ“ãƒ¼ãƒˆã‚·ã‚°ãƒŠãƒ«ã‚’å—ã‘å–ã‚‹ã“ã¨ã§YB-TServerã®æ­»æ´»ç›£è¦–ã‚’è¡Œãªã£ã¦ã„ã‚‹ã€‚ãã—ã¦YB-Masterã¯YB-TServerã®ç•°å¸¸ã‚’æ¤œçŸ¥ã—ãŸã¨ãã«ã€ã©ã‚Œãã‚‰ã„ã®ã‚ã„ã YB-TServerãŒç•°å¸¸ã§ã‚ã£ãŸã‹ã‚’è¿½è·¡ã™ã‚‹ã€‚é–¾å€¤ã‚’è¶…ãˆã‚‹ã¨ã€YB-Masterã¯éšœå®³ä¸­ã®YB-TServerã«é…ç½®ã•ã‚Œã¦ã„ãŸã‚¿ãƒ–ãƒ¬ãƒƒãƒˆã‚’å†é…ç½®ã™ã‚‹YB-TServerã‚’æ¢ã—ã€ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹ã€‚ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯YB-Masterãƒªãƒ¼ãƒ€ãƒ¼ã«æŠ‘åˆ¶ã•ã‚ŒãŸçŠ¶æ…‹ã§å®Ÿè¡Œã•ã‚Œã‚‹ãŸã‚ã€Universeã®ãƒ•ã‚©ã‚¢ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã«ã¯å½±éŸ¿ã‚’ãŠã‚ˆã¼ã•ãªã„ã€‚Raft Groupã®ãƒªãƒ¼ãƒ€ãƒ¼ã«ãªã‚Œã‚‹ãƒãƒ¼ãƒ‰â†©â†©]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[K8sGPT Deep Dive ã¨ã„ã†ã‚¿ã‚¤ãƒˆãƒ«ã§ç™»å£‡ã—ã¾ã—ãŸ #CNDF]]></title>
            <link>https://syu-m-5151.hatenablog.com/entry/2023/08/03/155326</link>
            <guid>https://syu-m-5151.hatenablog.com/entry/2023/08/03/155326</guid>
            <pubDate>Thu, 03 Aug 2023 06:53:26 GMT</pubDate>
            <content:encoded><![CDATA[æ¦‚è¦CloudNative Days Fukuoka 2023ã¨ã„ã†ã‚¤ãƒ™ãƒ³ãƒˆã«ã€K8sGPT Deep Dive Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã®AIé§†å‹•å‹åˆ†æã«ã¤ã„ã¦ã€ã¨ã„ã†ã‚¿ã‚¤ãƒˆãƒ«ã§ç™»å£‡ã—ã¾ã—ãŸã€‚ã‚¯ãƒ©ã‚¦ãƒ‰ãƒã‚¤ãƒ†ã‚£ãƒ–ã¨AIã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã®æ·±ã„æ´å¯Ÿã‚’å…±æœ‰ã™ã‚‹ã“ã¨ãŒã§ãã€ç§è‡ªèº«ãŒã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¨ã—ã¦åƒããªã‹ã§ã€K8sGPTã®æœ€æ–°ã®é€²åŒ–ã¨ãã®å¯èƒ½æ€§ã«ã¤ã„ã¦è©³ã—ãèªã‚‹æ©Ÿä¼šã¯ãªã‹ãªã‹ãªãã€ã“ã®çµŒé¨“ã‚’æ´»ã‹ã—ã¦ã„ããŸã„ã€‚è³‡æ–™ã‚’ä½œã£ã¦ã„ã‚‹ä¸­ã§è©±ã—ãŸã„ã“ã¨ãŒã©ã‚“ã©ã‚“å¢—ãˆã¦ã„ã£ã¦ã‚ã¡ã‚ƒãã¡ã‚ƒå›°ã£ãŸã€‚ã¾ãŸã€ãã®ä¸­ã§AIOpsã«ã¤ã„ã¦ã‚‚è§¦ã‚Œã‚‹ã“ã¨ãŒã§ãã€éå¸¸ã«å……å®Ÿã—ãŸæ™‚é–“ã§ã—ãŸã€‚AIOpsã¯AIã¨é‹ç”¨ç®¡ç†ã®çµ±åˆã‚’æŒ‡ã—ã€ãã‚Œã«ã‚ˆã‚ŠITé‹ç”¨ã®åŠ¹ç‡åŒ–ã‚„è‡ªå‹•åŒ–ãŒå¯èƒ½ã¨ãªã‚Šã¾ã™ã€‚ãã®é‡è¦æ€§ã¨å¯èƒ½æ€§ã‚’ä¼ãˆã‚‹ã“ã¨ãŒã§ããŸã®ã§è‰¯ã‹ã£ãŸã€‚ç™»å£‡ãŒçµ‚ã‚ã£ãŸä»Šã§ã‚‚ã€K8sGPTã‚„AIOpsã«ã¤ã„ã¦ã•ã‚‰ã«çŸ¥è­˜ã‚’æ·±ã‚ã€ã‚¯ãƒ©ã‚¦ãƒ‰ãƒã‚¤ãƒ†ã‚£ãƒ–ã®ä¸–ç•Œã«ã©ã®ã‚ˆã†ã«æœ€é©åŒ–ã•ã‚ŒãŸè§£æ±ºç­–ã‚’æä¾›ã§ãã‚‹ã‹ã«ã¤ã„ã¦è€ƒãˆç¶šã‘ã¦ã„ã¾ã™ã€‚å‚åŠ è€…ã®çš†ã•ã‚“ã‹ã‚‰ã‚‚ãŸãã•ã‚“ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’é ‚ãã€ä»Šå¾Œã®ç ”ç©¶ã‚„é–‹ç™ºã®å‚è€ƒã«ãªã‚Šã¾ã—ãŸã€‚ç§ãŒã“ã®ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã®ãŸã‚ã«èª­ã¿è¾¼ã‚“ã è¤‡æ•°ã®æœ¬ã®ä¸­ã§ã€ç‰¹ã«çš†ã•ã‚“ã«ãŠå‹§ã‚ã—ãŸã„ä¸€å†Šã‚’æŒ™ã’ã‚‹ã¨ã™ã‚Œã°ã€ã€Œå¤§è¦æ¨¡è¨€èªãƒ¢ãƒ‡ãƒ«ã¯æ–°ãŸãªçŸ¥èƒ½ã‹â€•â€•ChatGPTãŒå¤‰ãˆãŸä¸–ç•Œã€ã ã¨è¨€ãˆã¾ã™ã€‚ãªãœãªã‚‰ã€å°‚é–€å®¶ã§ã‚‚åˆå¿ƒè€…ã§ã‚‚ã€é›£è§£ãªæ•°å­¦ã‚’ä½¿ã‚ãšã«é‡è¦ãªæ¦‚å¿µã‚’ç†è§£ã§ãã‚‹ã‚ˆã†ã«ä½œã‚‰ã‚Œã¦ã„ã‚‹ã‹ã‚‰ã§ã™ã€‚å¤§è¦æ¨¡è¨€èªãƒ¢ãƒ‡ãƒ«ã¯æ–°ãŸãªçŸ¥èƒ½ã‹ã€€ï¼£ï½ˆï½ï½”ï¼§ï¼°ï¼´ãŒå¤‰ãˆãŸä¸–ç•Œ (å²©æ³¢ç§‘å­¦ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ¼)ä½œè€…:å²¡é‡åŸ å¤§è¼”å²©æ³¢æ›¸åº—Amazonè³‡æ–™ç™»å£‡è³‡æ–™ã«ãªã‚Šã¾ã™ã€‚ã“ã®ãƒ–ãƒ­ã‚°ã®ç›®çš„ã¯å‚è€ƒè³‡æ–™ã‚’ã„ã¡ã„ã¡æ¢ã•ãªãã¦ã„ã„ã‚ˆã†ã«ã‚ã‚Šã¾ã™ã®ã§ã”æ´»ç”¨ãã ã•ã„ã€‚ speakerdeck.comå‚è€ƒæ–‡çŒ®å…¬å¼ãƒšãƒ¼ã‚¸ | K8sGPTGitHub | K8sGPTGitHub | K8sGPT OperatorDocs | K8sGPTOperator patternK8sGPT OperatorHow to Get Started With AIOpsPrompt Engineering Guideã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ“ãƒªãƒ†ã‚£ãƒ»ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°KubernetesåŸºç›¤ã‚’è‡ªå¾‹çš„ã«æ”¯ãˆã‚‹ControlleråŒ–ã®å®Ÿè£…Tips / forkwell-202303-amsy810-k8sAutomation and Machine Learning with Site Reliability EngineeringTEMPLE: Six Pillars of ObservabilityAIæ™‚ä»£ã«å‘ã‘ãŸã‚¯ãƒ©ã‚¦ãƒ‰ã«ãŠã‘ã‚‹ä¿¡é ¼æ€§ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã®æœªæ¥æ§‹æƒ³ / DICOMO2022Â 6A-1å¤§è¦æ¨¡è¨€èªãƒ¢ãƒ‡ãƒ«ã¯æ–°ãŸãªçŸ¥èƒ½ã‹â€•â€•ChatGPTãŒå¤‰ãˆãŸä¸–ç•Œ (å²©æ³¢ç§‘å­¦ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ¼)ChatGPTã®é ­ã®ä¸­ (ãƒãƒ¤ã‚«ãƒ¯æ–°æ›¸)è¨€èªã®æœ¬è³ªã€€ã“ã¨ã°ã¯ã©ã†ç”Ÿã¾ã‚Œã€é€²åŒ–ã—ãŸã‹AI vs. æ•™ç§‘æ›¸ãŒèª­ã‚ãªã„å­ã©ã‚‚ãŸã¡ã€ITIL4å…¬èªã€‘ITIL 4ã®åŸºæœ¬ å›³è§£ã¨å®Ÿè·µ]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[YugabyteDBã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å…¨éƒ¨èª­ã‚€ Day3]]></title>
            <link>https://nnaka2992.hatenablog.com/entry/reading_yugabytedb_docs_3</link>
            <guid>https://nnaka2992.hatenablog.com/entry/reading_yugabytedb_docs_3</guid>
            <pubDate>Wed, 02 Aug 2023 16:13:24 GMT</pubDate>
            <content:encoded><![CDATA[YugabyteDBã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å…¨éƒ¨èª­ã‚€ Day3å‰å›ã‹ã‚‰ã¤ã¥ã„ã¦YugabyteDBã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª­ã‚“ã§ã„ãã¾ã™ã€‚å‰å›ã¯Architecture > Key Concepts > Universeã‚’èª­ã¿ã¾ã—ãŸã€‚ä»Šå›ã¯Architecture > Key Concepts > YB-TServer serviceã‚’èª­ã¿ã¾ã™ã€‚ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯æœ€æ–°ã®v2.19 previewã§ã™ã€‚ãã‚Œã¯ãã‚Œã¨ã—ã¦æŠ€è¡“ç³»ã®å˜èªã‚’ã‚«ã‚¿ã‚«ãƒŠè¡¨è¨˜ã§èª¤é­”åŒ–ã—ã¦ã„ã¦ã€ä½“ç³»çš„ã«å­¦ã‚“ã§ã„ãªã„ã“ã¨ãŒãƒãƒ¬ã¦ã—ã¾ã†ã€‚ç‰¹ã«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã¾ã‚ã‚ŠãŒåˆ†ã‹ã‚‰ãªã„â€¦â€¦YB-TServer serviceYB-TServer(YugabyteDB Tablet Servcer)ã¯ãƒ¦ãƒ¼ã‚¶ã‹ã‚‰ã®å—ã‘ã¤ã‘ãŸYugabyteDBã‚¯ãƒ©ã‚¹ã‚¿ã¸ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®I/Oã®å‡¦ç†ã‚’ã™ã‚‹ã€‚ãƒ†ãƒ¼ãƒ–ãƒ«ã®ãƒ‡ãƒ¼ã‚¿ã¯ä¸€ã¤ä»¥ä¸Šã®Tablet peerã«åˆ†å‰²(ã‚·ãƒ£ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°)ã•ã‚Œã‚‹ã€‚peerã®æ•°ã¯ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ã«ã‚ˆã£ã¦æ±ºå®šã•ã‚Œã‚‹ã€‚YB-TServerã¯ä¸€ã¤ä»¥ä¸Šã®Tablet peerã‚’ãƒ›ã‚¹ãƒˆã™ã‚‹ã€‚Tablet peerã¯Raftã‚°ãƒ«ãƒ¼ãƒ—ã‚’å½¢æˆã—ã¦ã‚°ãƒ«ãƒ¼ãƒ—é–“ã§ãƒ‡ãƒ¼ã‚¿ã®è¤‡è£½ã‚’è¡Œãªã„ã€ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆã¯YB-TServerä¸Šã§æœ€å¤§ã®åŠ¹ç‡ã«ãªã‚‹ã‚ˆã†ã«ç®¡ç†ã•ã‚Œã‚‹ã€‚Server-global block cacheãƒ–ãƒ­ãƒƒã‚¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã¯ä¸€ã¤TB-TServerä¸Šã®ç•°ãªã‚‹ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆé–“ã§å…±æœ‰ã•ã‚Œã‚‹ã€‚YB-TServerã®ãƒ¡ãƒ¢ãƒªåŠ¹ç‡ã¯ä¸€ã¤ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã‹ã‚‰ã®èª­ã¿è¾¼ã¿ãŒå¤šã„ã»ã©æœ€é©åŒ–ã•ã‚Œã‚‹ã€‚Space AmplificationYugabyteDBã§ã¯Size-tired Compactionã¨ã„ã†ãƒ©ã‚¤ãƒˆã‚¢ãƒ³ãƒ—ãƒªãƒ•ã‚£ã‚±ãƒ¼ã‚·ãƒ§ãƒ³1ãŒå°ã•ã„åœ§ç¸®æ–¹å¼ã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹ã€‚Size-tired Compactionã¯ã‚¹ãƒšãƒ¼ã‚¹ã‚¢ãƒ³ãƒ—ãƒªãƒ•ã‚£ã‚±ãƒ¼ã‚·ãƒ§ãƒ³2ãŒå¤§ãã„ã¨ã„ã†å•é¡ŒãŒã‚ã‚‹ãŒã€YugabyteDBã§ã¯ãƒ†ãƒ¼ãƒ–ãƒ«ã¯è¤‡æ•°ã®ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆã«åˆ†å‰²ã•ã‚Œã€ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆé–“ã§ã®Concurrent Compactionã¯ç‰¹å®šã®æœ€å¤§å€¤ã¾ã§çµã‚‰ã‚Œã‚‹ãŸã‚å•é¡Œã«ãªã‚Šã«ãã„ã€‚YugabyteDBã§ã¯å‡¡ã10-20%ã®ã‚¹ãƒšãƒ¼ã‚¹ã‚¢ãƒ³ãƒ—ãƒªãƒ•ã‚£ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ãŠã•ã¾ã‚‹ã€‚ã¤ã¾ã‚ŠSize-tired Compactionä¸€å˜ä½ãŒæ‰±ã†ãƒ‡ãƒ¼ã‚¿é‡ã‚’å°ã•ã(ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆåŒ–)ã—ã¦ã€åŒæ™‚ã«å®Ÿè¡Œã•ã‚Œã‚‹åœ§ç¸®å‡¦ç†æ•°ã‚’çµã‚‹ã“ã¨ã§ç‰¹å®šã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§åœ§ç¸®ã«ä½¿ç”¨ã•ã‚Œã‚‹ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸å®¹é‡ã‚’æŠ‘ãˆã¦ã„ã‚‹ã¨ã„ã†ã“ã¨ï¼ŸThrottled compactionsYB-TServerã§ã¯ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆé–“ã§å®Ÿè¡Œã•ã‚Œã‚‹åœ§ç¸®å‡¦ç†ã®åŒæ™‚å®Ÿè¡Œæ•°ã‚’åˆ¶é™ã™ã‚‹ã“ã¨ã§ã€åœ§ç¸®å‡¦ç†ãŒå¤šé‡ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’å æœ‰ã™ã‚‹ã“ã¨ã‚’é˜²ã„ã§ã„ã‚‹ã€‚ã“ã®æ©Ÿèƒ½ã¯åœ§ç¸®ã•ã‚Œã‚‹ãƒ•ã‚¡ã‚¤ãƒ«åŒå£«ã®ã‚µã‚¤ã‚ºã‚’æ¯”ã¹ã€å®Ÿè¡Œã•ã‚Œã‚‹åœ§ç¸®å‡¦ç†ãŒå¦¥å½“ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹ã“ã¨ã§å®Ÿç¾ã•ã‚Œã¦ã„ã‚‹ã€‚Small and large compaction queuesYB-TServerã§ã¯åœ§ç¸®å‡¦ç†ã‚’å¤§ãã„åœ§ç¸®å‡¦ç†ã¨å°ã•ã„åœ§ç¸®å‡¦ç†ã«åˆ†ã‘ã¦å„ªå…ˆåº¦ã‚’æ±ºã‚ã‚‹ã“ã¨ã§ã€I/OãŒå¤§ããªå ´åˆã§ã‚‚ã‚·ã‚¹ãƒ†ãƒ ã®æ©Ÿèƒ½ã‚’ä¿ã£ã¦ã„ã‚‹ã€‚YugabyteDBã§ã¯åœ§ç¸®å‡¦ç†æ•°ã‚’åˆ¶é™ã™ã‚‹ã“ã¨ã«åŠ ãˆã€æ§˜ã€…ãªæœ€é©åŒ–ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã§åœ§ç¸®å‡¦ç†ã®å½±éŸ¿ã‚’æœ€å°åŒ–ã—ã¦ã„ã‚‹ã€‚Manual compactionYugabyteDBã§ã¯yb-admin utilityã®compact_tableã‚³ãƒãƒ³ãƒ‰ã«ã‚ˆã‚Šã€ä»»æ„ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ãƒ†ãƒ¼ãƒ–ãƒ«ã«å¯¾ã—ã¦åœ§ç¸®ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã‚‹ã€‚ã“ã®æ–¹æ³•ã¯ãƒ‡ãƒ¼ã‚¿ãŒæ–°ã—ãæ›¸ãè¾¼ã¾ã‚Œãªã„å ´åˆã‚„ã€DDLã‚„TTLã®è¶…éã«ã‚ˆã‚‹ãƒ‡ãƒ¼ã‚¿å‰Šé™¤æ™‚ã«ã‚ˆã‚Šãƒ‡ãƒ¼ã‚¿ãŒæ–­ç‰‡åŒ–ã—ãŸã¨ãã«æœ‰åŠ¹ã§ã‚ã‚‹ã€‚Statistics-based full compactions to improve read performanceYugabyteDBã§ã¯èª­ã¿è¾¼ã¾ã‚ŒãŸkey-valueãƒšã‚¢ã‚’DocDBãƒ¬ãƒ™ãƒ«ã§ç›£è¦–ã—ã¦ã„ã‚‹ã€‚ç›£è¦–å¯¾è±¡ã¨ãªã‚‹æ™‚é–“è»¸ã¯auto-compact-stat-window-secondsã§ç®¡ç†ã•ã‚Œã¦ã„ã‚‹ã€‚YugabyteDBãŒãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿æ™‚ã«å¤šé‡ã®å»ƒæ£„ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã®ã‚¹ã‚­ãƒƒãƒ—ã‚’æ¤œçŸ¥ã—ãŸå ´åˆã€full compactionãŒãƒˆãƒªã‚¬ãƒ¼ã•ã‚Œä¸è¦ãªã‚­ãƒ¼ã®å‰Šé™¤ãŒè¡Œãªã‚ã‚Œã‚‹ã€‚Full compactionãŒãƒˆãƒªã‚¬ãƒ¼ã•ã‚Œã‚‹è©³ç´°ãªæ¡ä»¶ã¯å¯¾è±¡ã®æ™‚é–“è»¸ã§ä»¥ä¸‹ãŒæº€ã•ã‚ŒãŸæ™‚ã§ã‚ã‚‹ã€‚å»ƒæ£„ã•ã‚ŒãŸã‚­ãƒ¼ã¨ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªã‚­ãƒ¼ãŒèª­ã¾ã‚Œã‚‹å‰²ã‚Šåˆã„ãŒauto-compact-percent-obsoleteã§å®šç¾©ã•ã‚ŒãŸé–¾å€¤ã‚’è¶…ãŸã¨ãã€‚å»ƒæ£„ã•ã‚ŒãŸã‚­ãƒ¼ã®èª­ã¿è¾¼ã¿auto-compact-min-obsolete-keys-foundã§å®šç¾©ã•ã‚ŒãŸé–¾å€¤ã‚’è¶…ãŸã¨ãã€‚ã“ã®æ©Ÿèƒ½ã¯TTLã‚’è¨­å®šã—ãŸãƒ†ãƒ¼ãƒ–ãƒ«ã¨äº’æ›æ€§ãŒã‚ã‚Šã€TTL file expirationãŒæœ‰åŠ¹ãªãƒ†ãƒ¼ãƒ–ãƒ«ã§ã¯ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã•ã‚ŒãŸåœ§ç¸®ã‚’å®Ÿè¡Œã—ãªã„ã€‚Scheduled full compactionsYugabyteDBã§ã¯å…¨ã¦ã®ãƒ‡ãƒ¼ã‚¿ã«å¯¾ã™ã‚‹ãƒ‡ãƒ¼ã‚¿åœ§ç¸®ã‚’ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã‚‹ã€‚ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«å®Ÿè¡Œã¯scheduled-full-compaction-frequency-hoursã¨scheduled-full-compaction-jitter-factor-percentageã®ãƒ•ãƒ©ã‚°ã§ç®¡ç†ã•ã‚Œã‚‹ã€‚ã“ã®æ©Ÿèƒ½ã¯å¤§é‡ã®DELETEã¨UPDATEã‚’å®šå¸¸çš„ã«å®Ÿè¡Œã™ã‚‹ãƒ¯ãƒ¼ã‚¯ãƒ­ãƒ¼ãƒ‰ã§ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¨ãƒ‡ã‚£ã‚¹ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã®å†å‰²ã‚Šå½“ã¦ã«æœ‰åŠ¹ã§ã‚ã‚‹ã€‚ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–ã—ãŸãƒ‡ãƒ¼ã‚¿åœ§ç¸®ã¯TTLã¨äº’æ›ã—ã¦ã„ã‚‹ãŒã€TTL file expirationã¨ã¯äº’æ›ã—ã¦ã„ãªã„ã€‚ã¤ã¾ã‚Šã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã•ã‚ŒãŸåœ§ç¸®ã¯å®Ÿè¡Œã•ã‚Œãªã„ã€‚Server-global memstore limitServer-global memstore limitã¯ä¸€ã¤ã®YB-TServerä¸Šã®ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆé–“ã§ã‚·ã‚§ã‚¢ã•ã‚Œã‚‹ãƒ¡ãƒ¢ãƒªã‚µã‚¤ã‚ºã‚’è¿½è·¡ã—ã€å¼·åˆ¶ã™ã‚‹ã€‚ã“ã®æ©Ÿèƒ½ã¯ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆé–“ã®æ›¸ãè¾¼ã¿ã«åã‚ŠãŒã‚ã‚‹å ´åˆã«æœ‰åŠ¹ã§ã‚ã‚‹ã€‚ä¸€ã¤ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã«æ›¸ãè¾¼ã¿ãŒé›†ä¸­ã—ã¦ã„ã‚‹ã°ã‚ã„ã€ãƒ¡ãƒ¢ãƒªåˆ¶é™ä»¥ä¸Šã®ãƒ¡ãƒ¢ãƒªã‚’å‰²ã‚Šå½“ã¦ã‚‹ã“ã¨ã§ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’å‘ä¸Šã•ã›ã‚‹ã“ã¨ãŒå‡ºæ¥ã‚‹ã€‚Auto-sizing of block cache and memstoreBlock Cacheã¨memstoreã¯ä½•ã‚Œã‚‚å¤šé‡ã®ãƒ¡ãƒ¢ãƒªã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã€‚ã“ã‚Œã‚‰ã¯tablet-peeré–“ã§å…±æœ‰ã•ã‚Œã‚‹ãƒªã‚½ãƒ¼ã‚¹ã®ãŸã‚ã€ãƒ¡ãƒ¢ãƒªç®¡ç†ã¨ã“ã‚Œã‚‰ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®æ§˜ã€…ãªç’°å¢ƒã«åˆã›ãŸã‚µã‚¤ã‚¸ãƒ³ã‚°ã‚’å®¹æ˜“ã«ã—ã¦ã„ã‚‹ã€‚YB-TServerã§ã¯è‡ªå‹•ã§ç‰¹å®šã®å‰²åˆã®ãƒ¡ãƒ¢ãƒªã‚’Block Cacheã¨Memstoreã«å‰²ã‚Šå½“ã¦ã‚‹ã€‚Distributing tablet load uniformly across data disksè¤‡æ•°ã®SSDã‚’åˆ©ç”¨ã™ã‚‹ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã§ã¯ã€ãƒ†ãƒ¼ãƒ–ãƒ«ã®ãƒ‡ãƒ¼ã‚¿(SSTable)ã¨WALã¯ãƒ†ãƒ¼ãƒ–ãƒ«æ¯ã«åˆ©ç”¨å¯èƒ½ãªãƒ‡ã‚£ã‚¹ã‚¯ã«å‡ç­‰ã«åˆ†æ•£ã•ã‚Œã‚‹ã€‚ã“ã®ã‚¹ãƒˆãƒ©ã‚¤ãƒ”ãƒ³ã‚°ã¨å‘¼ã°ã‚Œã‚‹è² è·åˆ†æ•£ã¯ã€ãã‚Œãã‚Œã®ãƒ‡ã‚£ã‚¹ã‚¯ãŒãã‚Œãã‚Œã®ãƒ†ãƒ¼ãƒ–ãƒ«ã®è² è·ã‚’å‡ç­‰ã«å‡¦ç†ã™ã‚‹ã“ã¨ã‚’ä¿è¨¼ã™ã‚‹ã€‚SSDã§å®Ÿéš›ã«æ›¸ãè¾¼ã‚“ã ãƒ‡ãƒ¼ã‚¿ã‚ˆã‚Šæ›¸ãè¾¼ã¿é‡ãŒå¢—å¹…ã™ã‚‹ç¾è±¡ã€‚ã‚‚ã¡ã‚ã‚“ãƒ©ã‚¤ãƒˆã‚¢ãƒ³ãƒ—ãƒªãƒ•ã‚£ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒå°ã•ã„ã»ã†ãŒæœ›ã¾ã—ã„ã€‚â†©â†©]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[gonew ã‚’ä½¿ã£ã¦ Go ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’æ´»ç”¨ã™ã‚‹]]></title>
            <link>https://zenn.dev/kou_pg_0131/articles/gonew-introduction</link>
            <guid>https://zenn.dev/kou_pg_0131/articles/gonew-introduction</guid>
            <pubDate>Tue, 01 Aug 2023 12:34:36 GMT</pubDate>
            <content:encoded><![CDATA[å…¬å¼ã‹ã‚‰ gonew ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ãŒå…¬é–‹ã•ã‚Œã¾ã—ãŸã€‚https://go.dev/blog/gonewhttps://pkg.go.dev/golang.org/x/tools/cmd/gonewgonew ã‚’ä½¿ã†ã“ã¨ã§æ—¢å­˜ã® Go ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½¿ã„ã€ç´ æ—©ãé–‹ç™ºã‚’å§‹ã‚ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ç¾æ™‚ç‚¹ã§å…¬å¼ã‹ã‚‰ã¯ä»¥ä¸‹ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒå…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚hellohelloserverä»–ã«ã‚‚ Google Cloud ãƒãƒ¼ãƒ ã‚„ Service Weaver ãƒãƒ¼ãƒ ã‹ã‚‰ã‚‚æ§˜ã€…ãªãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒå…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚GoogleCloudPlatform/go-...]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[YugabyteDBã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å…¨éƒ¨èª­ã‚€ Day2]]></title>
            <link>https://nnaka2992.hatenablog.com/entry/reading_yugabytedb_docs_2</link>
            <guid>https://nnaka2992.hatenablog.com/entry/reading_yugabytedb_docs_2</guid>
            <pubDate>Wed, 26 Jul 2023 15:03:13 GMT</pubDate>
            <content:encoded><![CDATA[YugabyteDBã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å…¨éƒ¨èª­ã‚€ Day2å‰å›ã‹ã‚‰ã¤ã¥ã„ã¦YugabyteDBã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª­ã‚“ã§ã„ãã¾ã™ã€‚å‰å›ã¯Architecture > Design goalsã‚’èª­ã¿ã¾ã—ãŸã€‚ä»Šå›ã¯Architecture > Key Concepts > Universeã‚’èª­ã¿ã¾ã™ã€‚UniverseYugabyteDBã¯è€ä¹…æ€§ã¨ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã‚’å…¼ã­ããªãˆãŸåˆ†æ•£ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’é”æˆã™ã‚‹ãŸã‚ã«ã€Universe1ã¨å‘¼ã°ã‚Œã‚‹ãƒãƒ¼ãƒ‰ã®ã‚°ãƒ«ãƒ¼ãƒ—ã‚’æŒã£ã¦ã„ã‚‹ã€‚Universeã¯ãƒ“ã‚¸ãƒã‚¹è¦ä»¶ã‚„ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ã®å…¼ã­åˆã„ã§ã‚·ãƒ³ã‚°ãƒ«ã‚¾ãƒ¼ãƒ³ã€å˜ä¸€ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ãƒãƒ«ãƒã‚¾ãƒ¼ãƒ³ã€ãƒãƒ«ãƒãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã€åŒæœŸãƒ»éåŒæœŸãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãªã©ã‚’é¸æŠã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã‚‹ã€‚Univereã¯Clusterã¨è¡¨ç¾ã•ã‚Œã‚‹ã“ã¨ã‚‚ã‚ã‚‹ã€‚ãƒ‡ãƒ¼ã‚¿ã®æ§‹æˆUniverseã¯ä¸€ã¤ä»¥ä¸Šã®ãƒãƒ¼ãƒ ã‚¹ãƒšãƒ¼ã‚¹ã‚’æŒã¤ã“ã¨ãŒã§ãã€ã¾ãŸãƒãƒ¼ãƒ ã‚¹ãƒšãƒ¼ã‚¹ã¯ä¸€ã¤ä»¥ä¸Šã®ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’æŒã¤ã“ã¨ãŒã§ãã‚‹ã€‚YugabyteDBã§ã¯Universeä¸Šã«å­˜åœ¨ã™ã‚‹ãƒãƒ¼ãƒ‰ã«ã¾ãŸãŒã£ã¦ä¿æŒã•ã‚Œã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’è¨­å®šã«å¾“ã£ã¦ã€ã‚·ãƒ£ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã—ã€ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚·ãƒ³ã‚°ã‚’è¡Œãªã†ã€‚YugabyteDBã¯ãƒãƒ¼ãƒ‰ã‚„ãƒ‡ã‚£ã‚¹ã‚¯ã€ã‚¾ãƒ¼ãƒ³ãªã©ã«ç™ºç”Ÿã—ãŸéšœå®³ã«è‡ªå‹•ã§å¯¾å¿œã—ã€å¿…è¦ã§ã‚ã‚Œã°ãƒ‡ãƒ¼ã‚¿ã‚’æ–°è¦ã«åˆ†æ•£ã€ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡Œãªã†ã€‚ãƒãƒ¼ãƒ ã‚¹ãƒšãƒ¼ã‚¹ã¯YSQLã§ã¯ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«å¯¾å¿œã—ã€ã»ã‹ã®DBã«ãŠã‘ã‚‹ãƒãƒ¼ãƒ ã‚¹ãƒšãƒ¼ã‚¹ã«å¯¾å¿œã™ã‚‹2ã€‚YCQLã§ã¯ã‚­ãƒ¼ã‚¹ãƒšãƒ¼ã‚¹ã«å¯¾å¿œã—ã€Cassandraã®ã‚­ãƒ¼ã‚¹ãƒšãƒ¼ã‚¹ã«å¯¾å¿œã—ã¦ã„ã‚‹ã€‚ã‚µãƒ¼ãƒ“ã‚¹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆUniverseã¯YugabyteDB Tablet Server(YB-TServer)ã¨YugabyteDB Master Server(YB-Master)ã®äºŒã¤ã§æ§‹æˆã•ã‚Œã¦ã„ã‚‹ã€‚YB-Masterã¨YB-TServerã¯Raftã«ã‚ˆã‚Šåˆ†æ•£ã•ã‚Œã¦ãŠã‚Šã€é«˜å¯ç”¨æ€§ã‚’é”æˆã—ã¦ã„ã‚‹ã€‚YB-Tserverã¯ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å§‹ã‚ã¨ã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ã€æä¾›ã‚’æ‹…å½“ã™ã‚‹ã€‚YB-Masterã¯ã‚·ã‚¹ãƒ†ãƒ ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’ç®¡ç†ã—ã€ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã«å¯¾ã™ã‚‹DDLã‚„ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã®å®Ÿè¡Œã€ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚·ãƒ³ã‚°ã¨ã„ã£ãŸã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç®¡ç†ã™ã‚‹ã€‚Universeã¨ClusterUniverseã¯ä¸€ã¤ã®ãƒ—ãƒ©ã‚¤ãƒãƒªã‚¯ãƒ©ã‚¹ã‚¿ã¨ã‚¼ãƒ­å€‹ä»¥ä¸Šã®ãƒ¬ãƒ—ãƒªã‚«ã‚¯ãƒ©ã‚¹ã‚¿ã«ã‚ˆã£ã¦æ§‹æˆã•ã‚Œã¦ã„ã‚‹ã€‚ãƒ—ãƒ©ã‚¤ãƒãƒªã‚¯ãƒ©ã‚¹ã‚¿ãƒ—ãƒ©ã‚¤ãƒãƒªã‚¯ãƒ©ã‚¹ã‚¿ã¯Read/Writeä¸¡æ–¹ã®å®Ÿè¡Œã¨ã€ãƒ—ãƒ©ã‚¤ãƒãƒªã‚¯ãƒ©ã‚¹ã‚¿å†…ã®ãƒãƒ¼ãƒ‰é–“ã®åŒæœŸçš„ãªãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ‹…å½“ã™ã‚‹ã€‚ãƒªãƒ¼ãƒ‰ãƒ¬ãƒ—ãƒªã‚«ã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ¼ãƒ‰ãƒ¬ãƒ—ãƒªã‚«ã‚¯ãƒ©ã‚¹ã‚¿ã¯Readå‡¦ç†ã®ã¿ã‚’å®Ÿè¡Œã™ã‚‹ã€‚Writeå‡¦ç†ã¯è‡ªå‹•çš„ã«ãƒ—ãƒ©ã‚¤ãƒãƒªã‚¯ãƒ©ã‚¹ã‚¿ã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã•ã‚Œã‚‹ã€‚ãƒªãƒ¼ãƒ‰ãƒ¬ãƒ—ãƒªã‚«ã‚¯ãƒ©ã‚¹ã‚¿ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ã€åœ°ç†çš„ã«åˆ†æ•£ã—ãŸãƒ‡ãƒ¼ã‚¿ã«å¯¾ã™ã‚‹èª­ã¿å–ã‚Šã®é…å»¶ã‚’å°ã•ãã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚ãƒ‡ãƒ¼ã‚¿ã¯ãƒ—ãƒ©ã‚¤ãƒãƒªã‚¯ãƒ©ã‚¹ã‚¿ã‹ã‚‰éåŒæœŸçš„ã«ã¨ã‚Šã“ã¾ã‚Œã‚‹ã€‚ã“ã‚Œã¯Raftã®æ›¸ãè¾¼ã¿ã«ã¯é–¢ä¸ã—ãªã„Raftã‚ªãƒ–ã‚¶ãƒ¼ãƒã¨ã—ã¦æ©Ÿèƒ½ã™ã‚‹ã€‚Googleã®Cloud Spannerã§ã‚‚åŒæ§˜ã«Universeã¨å‘¼ã°ã‚Œã¦ã„ã‚‹â†©PostgreSQLã§ã¯Schemaã®è£å´ã«å­˜åœ¨ã™ã‚‹ãƒ‡ãƒ¼ã‚¿æ§‹é€ â†©]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[YugabyteDBã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å…¨éƒ¨èª­ã‚€ Day1]]></title>
            <link>https://nnaka2992.hatenablog.com/entry/reading_yugabytedb_docs_1</link>
            <guid>https://nnaka2992.hatenablog.com/entry/reading_yugabytedb_docs_1</guid>
            <pubDate>Tue, 25 Jul 2023 15:01:52 GMT</pubDate>
            <content:encoded><![CDATA[Day1æœ€è¿‘Twitteræ”¹ã‚Xã§ã€Œä¿ºã¯DBã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç«¯ã‹ã‚‰ç«¯ã¾ã§èª­ã‚“ã§å¼·ããªã£ãŸã€ã¨ã„ã†X's1ã‚’è¤‡æ•°ã¿ã‹ã‘ã¾ã—ãŸã€‚å‘¨ã‚Šã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã«ä¸€æ­©å·®ã‚’ã¤ã‘ã‚‹æ–¹æ³•ã¨ã—ã¦ã€ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚„ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã‚„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’æœ€åˆã‹ã‚‰æœ€å¾Œã¾ã§ã¡ã‚ƒã‚“ã¨èª­ã‚€ã€ã¨ã„ã†ã®ãŒã‚ã£ã¦ã€ã“ã‚Œã¯ãƒã‚¸ã§ã‚³ã‚¹ãƒ‘æŠœç¾¤ã§ã™ã€‚â€” å¾³æ°¸åºƒå¤¢ (@tokuhirom) July 21, 2023 ç¢ºã‹ã«ç§ã®Redisã¯ã“ã‚Œã€‚ https://t.co/2y1E01aLGwâ€” maru (@maruloop) July 22, 2023 ç§ã®MySQLã‚‚ã“ã‚Œã€‚ https://t.co/BxiOjeQVPkâ€” yoku0825 (@yoku0825) July 22, 2023 ä¿ºã®postgresqlã‚‚ã“ã‚Œã€‚ https://t.co/URRjyXCpGIâ€” ããƒ¼ã ã„@åˆä»£ALF (@soudai1025) July 22, 2023 PostgreSQLç³»NewSQLã§æœ€å¼·ã«ãªã‚ŠãŸã„ã®ã§YugabyteDBã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’é †ç•ªã«èª­ã‚“ã§è¡Œãã¾ã™ã€‚ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯v2.19ã«å¯¾å¿œã—ãŸã‚‚ã®ã§ã™ã€‚æ‰‹å§‹ã‚ã«Architectureã®ä¸€ç•ªå…ˆé ­ã«ã‚ã‚‹Design goalsã‹ã‚‰èª­ã¿ã¯ã˜ã‚ã¾ã™ã€‚Design goalsYugabyteDBã¯ä»¥ä¸‹ã‚’é”æˆã™ã‚‹ã“ã¨ã‚’ç›®æ¨™ã¨ã—ã¦ã„ã‚‹ã€‚1. åˆ†æ•£ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã‚’æä¾›ã—ãªãŒã‚‰å¼·ã„ä¸€è²«æ€§ã‚’ä¿è¨¼ã™ã‚‹ã€‚2. Query APIã‚’å†ç™ºæ˜ã›ãšã€æ—¢å­˜ã®ã‚¯ã‚¨ãƒªè¨€èªã¸ã®äº’æ›ã‚’é”æˆã™ã‚‹ã€‚3. é«˜ã„ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’ä¿è¨¼ã™ã‚‹ã€‚4. åœ°ç†çš„ã«åˆ†æ•£ã—ãŸãƒ‡ãƒ—ãƒ­ã‚¤ã‚’å¯èƒ½ã«ã™ã‚‹ã€‚5. Cloud Native Databaseã¨ã—ã¦ãƒ‡ã‚¶ã‚¤ãƒ³ã™ã‚‹ã€‚ä¸€è²«æ€§åˆ†æ–­è€æ€§YugabyteDBã¯CAPã®å®šç†ã§è¨€ãˆã°CPã‚’ä¸­å¿ƒã«é«˜ã„å¯ç”¨æ€§ã‚’ä¾›ãˆãŸãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯åˆ†æ–­ãªã©ã‚’èµ·å› ã¨ã™ã‚‹Split Brainã¯Raft Groupå†…ã§ã‚ãŸã‚‰ã—ã„ãƒªãƒ¼ãƒ€ãƒ¼ã‚’é¸å‡ºã™ã‚‹ã“ã¨ã§å¯¾å¿œã—ã¦ã„ã‚‹ã€‚YugabyteDBã§ã¯Leader Leaseã¨ã„ã†éšœå®³ãŒç™ºç”Ÿã—ã¦ã‚‚å¸¸ã«ä¸€ã¤ã®ãƒªãƒ¼ãƒ€ãŒå­˜åœ¨ã™ã‚‹ã“ã¨ã‚’ä¿è¨¼ã™ã‚‹ä»•çµ„ã¿ã‚’å®Ÿè£…ã—ã¦ã„ã‚‹ã€‚ç›´åˆ—åŒ–å¯èƒ½æ€§single-row Linearizable writeã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã€‚ACIDãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³YugabyteDBã§ã¯Seriarizableã€Repetable Readã€Read Committed Isolationã®ä¸‰ã¤ã®åˆ†é›¢ãƒ¬ãƒ™ãƒ«ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã€‚YSQL APIã§ã¯ã“ã‚Œã‚‰3ã¤ã®åˆ†é›¢ãƒ¬ãƒ™ãƒ«ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ãŒã€YCQLã§ã¯Repeatable Readã®ã¿ã«å¯¾å¿œã—ã¦ã„ã‚‹ã€‚Query APIYugabyteDBã§ã¯YSQLã¨YCQLã¨ã„ã†2ç¨®é¡ã®Query APIã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã€‚YSQLYSQLã¯PostgreSQLã«äº’æ›ã—ãŸAPIã§PostgreSQLã®ã‚¯ã‚¨ãƒªãƒ¬ã‚¤ãƒ¤ã‚’å†åˆ©ç”¨ã—ã¦ã„ã‚‹ã€‚æ–°ã—ã„å¤‰æ›´ã¯äº’æ›æ€§ã‚’å´©ã•ãªã„ã€‚YSQLã¯æ–°ã—ã„PostgreSQLã«äº’æ›ã—ã¤ã¥ã‘ã‚‹ã“ã¨ã‚’ç›®æ¨™ã¨ã—ã¦ã„ã‚‹ã€‚YCQLYCQLã¯Cassandraã®ã‚¯ã‚¨ã‚¤è¨€èªã‹ã‚‰æ´¾ç”Ÿã—ãŸåŠãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒŠãƒ«ãªã‚¯ã‚¨ãƒªè¨€èªã§ã€Webã‚¹ã‚±ãƒ¼ãƒ«ãªè†¨å¤§ãªwriteã«å¯¾å¿œã—ã¦ã‚¹ã‚±ãƒ¼ãƒ«ã—ç´ æ—©ã„ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚’ç›®æ¨™ã¨ã—ã¦ã„ã‚‹ã€‚ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹C++ã§å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ãŸã‚é«˜ã„ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¨å·¨å¤§ãªHeap(RAM)ã‚’Cacheã¨ã—ã¦åˆ©ç”¨ã§ãã‚‹ã€‚SSDã¨NVMeã«æœ€é©åŒ–ã—ã¦ã„ã‚‹ã€‚é«˜ã„Writeã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆã¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®åŒæ™‚å®Ÿè¡Œæ€§ã€é«˜ã„ãƒ‡ãƒ¼ã‚¿å¯†åº¦ã€å¢—åŠ ã—ç¶šã‘ã‚‹ãƒ‡ãƒ¼ã‚¿ã¸ã®å¯¾å¿œã‚’ç›®æ¨™ã¨ã—ã¦ã„ã‚‹ã€‚åœ°ç†çš„åˆ†æ•£Zoneã€Multi Regionã€Multi Cloudã„ãšã‚Œã«ã‚‚å¯¾å¿œã—ã¦ã„ã‚‹ã€‚ã“ã‚Œã«å¯¾å¿œã™ã‚‹ãŸã‚ã«ã€ãƒãƒ¼ãƒ‰éšœå®³ã‚„ãƒˆãƒ©ãƒ’ãƒƒã‚¯ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãªã©ã«å¯¾å¿œã§ãã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚ã‚¯ãƒ©ã‚¦ãƒ‰ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ãƒ–ãƒªãƒƒã‚¯ã‚¯ãƒ©ã‚¦ãƒ‰ã‚„ã‚ªãƒ³ãƒ—ãƒ¬ãƒŸã‚¹ã§åˆ©ç”¨ã•ã‚Œã‚‹ä¸€èˆ¬ã¦ããªãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã§åˆ©ç”¨å¯èƒ½ã«ã™ã‚‹ã€‚åŸå­æ™‚è¨ˆã®ã‚ˆã†ãªç‰¹åˆ¥ãªã‚‚ã®ã«ä¾å­˜ã—ãªã„ã€‚Kubernatesã«å¯¾å¿œã—ã¦ã„ã‚‹ã€‚OSSã§æä¾›ã—ã¦ã„ã‚‹ã€‚https://twitter.com/SawyerMerritt/status/1683365478582951936â†©]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Terraformã§mapã«keyãŒå«ã¾ã‚Œãªã„ã¨ãã«ã‚¹ã‚­ãƒƒãƒ—ã—ãŸã„]]></title>
            <link>https://zenn.dev/nnaka2992/articles/skip_when_key_does_not_exists_in_map_terraform</link>
            <guid>https://zenn.dev/nnaka2992/articles/skip_when_key_does_not_exists_in_map_terraform</guid>
            <pubDate>Sat, 22 Jul 2023 14:53:12 GMT</pubDate>
            <content:encoded><![CDATA[Google Cloudã§ã¯Public IPã‚’åˆ©ç”¨ã—ãŸéš›ã«å‰²ã‚ŠæŒ¯ã‚‰ã‚Œã‚‹å¯èƒ½æ€§ã®ã‚ã‚‹CIDRã®ä¸€è¦§ãŒcloud.jsonã§JSONå½¢å¼ã§å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã®è¨˜äº‹ã¯é›‘ãªæ¤œè¨¼ç”¨ã®Terraformã§æ‰¿èªæ¸ˆã¿ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã«asia-notheast1ã®CIDRã‚’å…¨éƒ¨ç™»éŒ²ã—ã¦ã‚„ã‚ã†ã¨ã—ãŸã¨ãã€ä¸Šè¨˜ã®JSONãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰scopeãŒasia-northeast1ã®prefixes.ipv4Prefixã‚’æŠœãã ãã†ã¨ã—ãŸã¨ãã«ãƒãƒã£ãŸã®ã§ãã®å¯¾å¿œæ–¹æ³•ã®ãƒ¡ãƒ¢ã§ã™ çµè«–ä»¥ä¸‹ã®ã‚ˆã†ãªæ„Ÿã˜ã§æ›¸ã„ãŸã‚‰å¯¾å¿œã§ãã¾ã—ãŸã€‚contains(keys(hoge), "fuga") # hogeã®keyã«h...]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Four Keys ã¨ã¯ï¼Ÿè€ƒãˆæ–¹ã‹ã‚‰å°å…¥ã¾ã§å¾¹åº•æ¤œè¨¼ã—ã¦ã¿ãŸ]]></title>
            <link>https://sreake.com/blog/learn-about-four-keys/</link>
            <guid>https://sreake.com/blog/learn-about-four-keys/</guid>
            <pubDate>Fri, 21 Jul 2023 09:56:19 GMT</pubDate>
            <content:encoded><![CDATA[ã¯ã˜ã‚ã« Sreakeäº‹æ¥­éƒ¨ã§ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³ã‚’ã—ã¦ã„ã‚‹æ‘å±±ã§ã™ã€‚ç§ã¯ä»¥å‰ã«ã€2022å¹´ã®Accelerate State of DevOps Reportã«ã¤ã„ã¦èª¿æŸ»ã‚’è¡Œã„ã¾ã—ãŸã€‚DevOps Reportã§ã¯ã€Four K [â€¦]The post Four Keys ã¨ã¯ï¼Ÿè€ƒãˆæ–¹ã‹ã‚‰å°å…¥ã¾ã§å¾¹åº•æ¤œè¨¼ã—ã¦ã¿ãŸ first appeared on sreake.com | æ ªå¼ä¼šç¤¾ã‚¹ãƒªãƒ¼ã‚·ã‚§ã‚¤ã‚¯.]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Kubernetes ã® upstream ã®ã‚­ãƒ£ãƒƒãƒã‚¢ãƒƒãƒ—]]></title>
            <link>https://zenn.dev/toversus/articles/52b107ab103712</link>
            <guid>https://zenn.dev/toversus/articles/52b107ab103712</guid>
            <pubDate>Thu, 20 Jul 2023 10:18:32 GMT</pubDate>
            <content:encoded><![CDATA[å…ˆæ—¥ã€Kubernetes Meetup Tokyo #59 ã§ã€ŒKEP ã‹ã‚‰çœºã‚ã‚‹ Kubernetesã€ã¨ã„ã†ã‚¿ã‚¤ãƒˆãƒ«ã§ç™ºè¡¨ã—ã¾ã—ãŸã€‚ç™ºè¡¨ã®å¾Œã§ Kubernetes ã® upstream ã®ã‚­ãƒ£ãƒƒãƒã‚¢ãƒƒãƒ—æ–¹æ³•ã«ã¤ã„ã¦è³ªå•ã‚’å—ã‘ã¾ã—ãŸã€‚ãã®å ´ã§å›ç­”ã¯ã—ãŸã®ã§ã™ãŒã€ã¡ã‚‡ã†ã©ç¤¾å†…ã®å…±æœ‰ä¼šã§ä¼¼ãŸã‚ˆã†ãªè©±ã‚’ã—ãŸã¨ã“ã‚ã ã£ãŸã®ã§ã€åŠ ç­†ä¿®æ­£ã—ãŸã‚‚ã®ã‚’å…¬é–‹ã—ã¦ãŠãã¾ã™ã€‚ ã¯ã˜ã‚ã«Kubernetes ã® upstream ã‚’è¿½ã„ã‹ã‘å§‹ã‚ã¦ 1 å¹´ã¡ã‚‡ã£ã¨çµŒã£ãŸã®ã§ã€ãã®çµŒé¨“ã‚’ã¾ã¨ã‚ã¾ã™ã€‚Kubernetes ã® upstream ã‚„ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ã‚’è¦³å¯Ÿã—ã¦ã„ã‚‹ã ã‘ã§ã€ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚¿ã§ã¯ã‚ã‚Šã¾...]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[CLIã®å®Ÿè¡Œçµæœã‚’æ­£ã—ãç†è§£ã™ã‚‹ã“ã¨ã‚’ä¿ƒã™ãƒ„ãƒ¼ãƒ«ã‚’ä½œæˆã—ã¾ã—ãŸã€‚]]></title>
            <link>https://syu-m-5151.hatenablog.com/entry/2023/07/19/162657</link>
            <guid>https://syu-m-5151.hatenablog.com/entry/2023/07/19/162657</guid>
            <pubDate>Wed, 19 Jul 2023 07:26:57 GMT</pubDate>
            <content:encoded><![CDATA[æ¦‚è¦AIã®æŠ€è¡“ã¯ç›®è¦šã¾ã—ã„é€²æ­©ã‚’é‚ã’ã¦ã„ã¾ã™ã€‚ç‰¹ã«è‡ªç„¶è¨€èªå‡¦ç†ï¼ˆNLPï¼‰ã®åˆ†é‡ã§ã¯ã€GPT-4ã®ã‚ˆã†ãªãƒ¢ãƒ‡ãƒ«ãŒäººé–“ã«è¿‘ã„ãƒ¬ãƒ™ãƒ«ã§æ–‡ç« ã‚’ç†è§£ã—ã€ç”Ÿæˆã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚ã—ã‹ã—ã€ã“ã‚Œã‚‰ã®ãƒ¢ãƒ‡ãƒ«ã‚’æ—¥ã€…ã®æ¥­å‹™ã‚„ä½œæ¥­ã«ã©ã®ã‚ˆã†ã«æ´»ç”¨ã™ã‚Œã°ã‚ˆã„ã®ã‹ã€å¤šãã®äººã€…ãŒã¾ã æ‰‹æ¢ã‚Šã®çŠ¶æ…‹ã§ã™ã€‚ä¸€æ–¹ã€ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã¯ã€ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€…ã‚„ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢é–‹ç™ºè€…ã«ã¨ã£ã¦é‡è¦ãªãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‹ã‚‰ã‚·ã‚¹ãƒ†ãƒ ã®çŠ¶æ…‹ã‚’èª¿ã¹ãŸã‚Šã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å®Ÿè¡Œã—ãŸã‚Šã™ã‚‹ãŸã‚ã«ã¯ã€ã“ã‚Œã‚‰ã§åˆ©ç”¨ã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã®ç†è§£ã¨ãã‚Œã‚‰ã‚’ååˆ†ã«ä½¿ã„ã“ãªã™ã“ã¨ãŒå¿…è¦ã§ã™ã€‚netflixtechblog.comã‚¢ãƒ•ã‚£ãƒªã‚¨ã‚¤ãƒˆã§ã‚‚ä½•ã§ã‚‚ãªãé‹ç”¨ã§åˆ©ç”¨ã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã«ã¤ã„ã¦ã¯LinuCãªã©ã‚‚ã‚ã‚‹ã®ã§æ•™æã‚’èª­ã‚€ã ã‘ã§ã‚‚ãŠã™ã™ã‚ã—ãŸã„ã€‚linuc.orgã§ã¯ã€AIãŒã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®çµæœã‚’ç†è§£ã—ã€ãã‚Œã‚’äººé–“ãŒã‚ˆã‚Šç†è§£ã—ã‚„ã™ã„å½¢ã§èª¬æ˜ã™ã‚‹ã“ã¨ãŒã§ããŸã‚‰ã€ã©ã†ã§ã—ã‚‡ã†ã‹ï¼Ÿã“ã“ã§ã€AICommandã‚’ç´¹ä»‹ã—ã¾ã™ã€‚AICommandã¯ã€ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®å®Ÿè¡Œã¨ãã®çµæœã®è§£é‡ˆã‚’çµ±åˆã—ãŸãƒ„ãƒ¼ãƒ«ã§ã‚ã‚Šã€AIã®åŠ›ã‚’å€Ÿã‚Šã¦ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®çµæœã‚’ç†è§£ã™ã‚‹æ–°ã—ã„è©¦ã¿ã§ã™ã€‚ä»Šå›ã®è¨˜äº‹ã§ã¯ã€ã“ã®AICommandã«ã¤ã„ã¦è©³ã—ãè¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚ã‚·ã‚§ãƒ«ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œã¨ãã®çµæœã‚’OpenAIã®GPTãƒ¢ãƒ‡ãƒ«ã«çµæœã‚’é€ä¿¡ã—è§£èª¬ã‚’è¦æ±‚ã™ã‚‹Goè£½CLIãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ã‚³ãƒãƒ³ãƒ‰ã®å‡¦ç†çŠ¶æ³ã‚‚è¦–è¦šçš„ã«è¡¨ç¤ºã—ã¾ã™ã€‚ pic.twitter.com/5q6jqyWbsxâ€” nwiizo (@nwiizo) 2023å¹´7æœˆ18æ—¥  AICommandã®ç´¹ä»‹AICommandã¯ã€ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®çµæœã‚’äººé–“ãŒç†è§£ã—ã‚„ã™ã„å½¢ã«è§£é‡ˆã™ã‚‹ãŸã‚ã®æ–°ã—ã„ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚OpenAIã®å¼·åŠ›ãªè‡ªç„¶è¨€èªå‡¦ç†ãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ç”¨ã—ã¦ã€ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‹ã‚‰å¾—ã‚‰ã‚ŒãŸæƒ…å ±ã‚’è©³ç´°ã«è§£æã—ã€ãã®çµæœã‚’èª¬æ˜ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€è¤‡é›‘ãªã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œçµæœã‚‚ã€éå°‚é–€å®¶ã§ã‚‚ç°¡å˜ã«ç†è§£ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚github.comã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¯éå¸¸ã«å¼·åŠ›ã§ã€ã‚·ã‚¹ãƒ†ãƒ ã®ç®¡ç†ã‚„ãƒ‡ãƒ¼ã‚¿ã®åˆ†æã«ã¯æ¬ ã‹ã›ãªã„ãƒ„ãƒ¼ãƒ«ã§ã™ãŒã€ãã®çµæœã‚’æ­£ã—ãç†è§£ã™ã‚‹ã«ã¯å°‚é–€çŸ¥è­˜ãŒå¿…è¦ã§ã€å­¦ç¿’ã‚³ã‚¹ãƒˆãŒé«˜ã„ã¨ã„ã†èª²é¡ŒãŒã‚ã‚Šã¾ã—ãŸã€‚ã—ã‹ã—ã€AICommandã‚’ä½¿ãˆã°ã€ãã®ãƒãƒ¼ãƒ‰ãƒ«ãŒå¤§ããä¸‹ãŒã‚Šã¾ã™ã€‚ãŸã¨ãˆã°ã€ã‚·ã‚¹ãƒ†ãƒ ã®ãƒ­ã‚°ã‚’ç¢ºèªã™ã‚‹ãŸã‚ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ãŸçµæœã‚’ã€AIãŒè§£é‡ˆã—ã€é‡è¦ãªãƒã‚¤ãƒ³ãƒˆã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆã—ã¦ãã‚Œã¾ã™ã€‚ã•ã‚‰ã«ã€ãã®çµæœãŒã©ã†ã„ã†æ„å‘³ã‚’æŒã¤ã®ã‹ã€ä½•ãŒåŸå› ã§ãã†ãªã£ãŸã®ã‹ã¨ã„ã£ãŸæƒ…å ±ã‚‚æä¾›ã—ã¦ãã‚Œã¾ã™ã€‚ã“ã®ã‚ˆã†ã«ã€AICommandã¯ã€AIã®èƒ½åŠ›ã‚’åˆ©ç”¨ã—ã¦ã€ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®åˆ©ç”¨ã‚’ã‚ˆã‚Šæ‰‹è»½ã§ã€ã‚ˆã‚Šç†è§£ã—ã‚„ã™ã„ã‚‚ã®ã«å¤‰ãˆã‚‹ã“ã¨ã‚’ç›®æŒ‡ã—ã¦ã„ã¾ã™ã€‚ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢é–‹ç™ºè€…ã‚„ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€…ã ã‘ã§ãªãã€ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‚’åˆ©ç”¨ã™ã‚‹ã™ã¹ã¦ã®äººã€…ã«ã¨ã£ã¦ã€æ–°ãŸãªå¯èƒ½æ€§ã‚’åºƒã’ã‚‹ãƒ„ãƒ¼ãƒ«ã¨ãªã‚‹ã“ã¨ã‚’ç›®æŒ‡ã—ã¾ã™ã€‚option ã§æ—¥æœ¬èªã«ã‚‚å¯¾å¿œã—ã¦ã¾ã™ã€‚ pic.twitter.com/AkEHh5syPxâ€” nwiizo (@nwiizo) 2023å¹´7æœˆ19æ—¥  Setup ğŸ”§AICommandã¯Goè¨€èªã§æ›¸ã‹ã‚Œã¦ã„ã‚‹ãŸã‚ã€Goã®é–‹ç™ºç’°å¢ƒãŒå¿…è¦ã§ã™ã€‚ã¾ãšã€GoãŒã¾ã ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ãªã„å ´åˆã¯ã€å…¬å¼ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚¬ã‚¤ãƒ‰ã«å¾“ã£ã¦Goã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã ã•ã„ã€‚Install aicommandGoãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸã‚‰ã€æ¬¡ã«AICommandã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚go install github.com/nwiizo/aicommand@latestSet the your_api_keyAICommandã¯OpenAIã®GPTãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ç”¨ã—ã¾ã™ã®ã§ã€OpenAIã®APIã‚­ãƒ¼ãŒå¿…è¦ã¨ãªã‚Šã¾ã™ã€‚OpenAIã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’æŒã£ã¦ã„ã¦APIã‚­ãƒ¼ã‚’å–å¾—æ¸ˆã¿ã®å ´åˆã¯ã€ãã®APIã‚­ãƒ¼ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ã¾ã APIã‚­ãƒ¼ã‚’å–å¾—ã—ã¦ã„ãªã„å ´åˆã¯ã€OpenAIã®å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ã—ã¦APIã‚­ãƒ¼ã‚’å–å¾—ã—ã¦ãã ã•ã„ã€‚APIã‚­ãƒ¼ã‚’å–å¾—ã—ãŸã‚‰ã€ãã®ã‚­ãƒ¼ã‚’ç’°å¢ƒå¤‰æ•° OPENAI_API_KEYã«è¨­å®šã—ã¾ã™ã€‚è¨­å®šæ–¹æ³•ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ï¼šexport OPENAI_API_KEY=your_api_keyUsage â³ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œã¨ãã®çµæœã®è§£é‡ˆã‚’è¡Œã†ã«ã¯ã€æ¬¡ã®ã‚ˆã†ã« execute ã‚³ãƒãƒ³ãƒ‰ã«ç¶šã‘ã¦å®Ÿè¡Œã—ãŸã„ã‚³ãƒãƒ³ãƒ‰ã‚’å¼•æ•°ã¨ã—ã¦ä¸ãˆã¾ã™ã€‚ã‚³ãƒãƒ³ãƒ‰ã¯(ãƒ€ãƒ–ãƒ«)ã‚¯ã‚ªãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã§å›²ã‚€å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚aicommand execute "your-shell-command"ãŸã¨ãˆã°ã€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®å†…å®¹ã‚’ãƒªã‚¹ãƒˆã™ã‚‹ ls -la ã‚³ãƒãƒ³ãƒ‰ã®çµæœã‚’è§£é‡ˆã•ã›ãŸã„å ´åˆã¯ã€æ¬¡ã®ã‚ˆã†ã«å®Ÿè¡Œã—ã¾ã™ã€‚aicommand execute "ls -la"ã™ã‚‹ã¨ã€AICommandã¯ ls -la ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã€ãã®çµæœã‚’è§£é‡ˆã—ã¦äººé–“ãŒç†è§£ã—ã‚„ã™ã„å½¢ã§èª¬æ˜ã—ã¾ã™ã€‚ã¾ãŸã€è§£é‡ˆçµæœã®è¨€èªã‚’æŒ‡å®šã—ãŸã„å ´åˆã¯ã€ --language ã¾ãŸã¯-lã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ç¾åœ¨ã€è‹±èªï¼ˆenï¼‰ã¨æ—¥æœ¬èªï¼ˆjaï¼‰ãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®è¨€èªã¯è‹±èªã§ã™ã€‚aicommand execute --language ja "ls -la"ã•ã‚‰ã«ã€ä½¿ç”¨ã™ã‚‹GPTãƒ¢ãƒ‡ãƒ«ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚ã“ã‚Œã¯ --model ã¾ãŸã¯ -m ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§æŒ‡å®šã—ã¾ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ gpt-3.5-turbo ã§ã™ã€‚aicommand execute --model gpt-3.5-turbo "ls -la"ã“ã‚Œã§AICommandã®åŸºæœ¬çš„ãªä½¿ç”¨æ–¹æ³•ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã—ãŸã€‚ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®çµæœã®è§£é‡ˆãŒã“ã‚Œã¾ã§ä»¥ä¸Šã«æ‰‹è»½ã«ãªã‚Šã€ã‚ˆã‚Šæ·±ã„ç†è§£ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚AICommandã®å¯èƒ½æ€§ğŸ¤–AICommandã¯ã€ç§ãŸã¡ãŒæ™®æ®µåˆ©ç”¨ã—ã¦ã„ã‚‹ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’OpenAIã®GPTãƒ¢ãƒ‡ãƒ«ã¨çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§æ–°ãŸãªå¯èƒ½æ€§ã‚’ç”Ÿã¿å‡ºã—ã¾ã™ã€‚ãŸã¨ãˆã°ã€è¤‡é›‘ãªã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ãŸçµæœã®æ„å‘³ã‚’ç†è§£ã™ã‚‹ã“ã¨ãŒå›°é›£ãªå ´åˆã‚„ã€ãƒ­ã‚°ã®è§£æã€ãƒ‡ãƒ¼ã‚¿åˆ†æãªã©ã§çµæœã‚’ã‚ˆã‚Šæ·±ãç†è§£ã™ã‚‹ãŸã‚ã®æ‰‹åŠ©ã‘ã¨ãªã‚Šã¾ã™ã€‚ã¾ãŸã€æ§˜ã€…ãªãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚„ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å®Ÿè¡Œçµæœã‚’äººé–“ãŒç†è§£ã§ãã‚‹å½¢ã§èª¬æ˜ã—ã¦ãã‚Œã‚‹ãŸã‚ã€ãƒ‡ãƒãƒƒã‚°ã‚„ã‚¨ãƒ©ãƒ¼è§£æã®ä½œæ¥­ã‚’åŠ¹ç‡åŒ–ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚AICommandã‚’åˆ©ç”¨ã™ã‚Œã°ã€ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«ãªçŸ¥è­˜ãŒãªãã¦ã‚‚ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‹ã‚‰å¾—ã‚‰ã‚Œã‚‹æƒ…å ±ã‚’ç†è§£ã—ã‚„ã™ããªã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚çµè«–ğŸ¦¾AICommandã¯ã€AIã¨CLIï¼ˆCommand Line Interfaceï¼‰ã®æ¶ã‘æ©‹ã¨ãªã‚‹ãƒ„ãƒ¼ãƒ«ã§ã‚ã‚Šã€ã“ã®2ã¤ã®å¼·åŠ›ãªãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ã€æœªçŸ¥ã®èª²é¡Œã«å¯¾ã—ã¦æ–°ãŸãªè¦–ç‚¹ã‚’æä¾›ã—ã¾ã™ã€‚ã•ã¾ã–ã¾ãªãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚’æŒã¤ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‹ã‚‰å¾—ã‚‰ã‚Œã‚‹æƒ…å ±ã‚’ã‚ˆã‚Šå®¹æ˜“ã«ç†è§£ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã“ã¨ã§ã€ã“ã‚Œã¾ã§æ‰‹ãŒå‡ºã›ãªã‹ã£ãŸå•é¡Œã«å–ã‚Šçµ„ã‚€æ‰‹åŠ©ã‘ã‚’ã—ã¦ãã‚Œã‚‹ã§ã—ã‚‡ã†ã€‚ã—ã‹ã—ã€ãã®ä¸€æ–¹ã§ã€AICommandã¯ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®å‡ºåŠ›ã‚’äººé–“ãŒç†è§£ã§ãã‚‹å½¢ã§è§£é‡ˆã™ã‚‹ãƒ„ãƒ¼ãƒ«ã§ã‚ã‚‹ãŸã‚ã€ãã®è§£é‡ˆã¯çµ¶å¯¾çš„ãªçœŸå®Ÿã‚’è¡¨ã™ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚AICommandã®è§£é‡ˆçµæœã¯å‚è€ƒã®ä¸€ã¤ã¨è€ƒãˆã€æœ€çµ‚çš„ãªæ„æ€æ±ºå®šã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼è‡ªèº«ã®åˆ¤æ–­ã«ä»»ã›ã‚‹ã¹ãã§ã™ã€‚ä»¥ä¸Šã®ã“ã¨ã‚’å¿µé ­ã«ç½®ã„ã¦ã€AICommandã‚’æ´»ç”¨ã™ã‚Œã°ã€æ–°ãŸãªè¦–ç‚¹ã‹ã‚‰ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã®ä¸–ç•Œã‚’æ¢ç´¢ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã«ãªã‚‹ã§ã—ã‚‡ã†ã€‚ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢é–‹ç™ºã«ChatGPTã¯ä½¿ãˆã‚‹ã®ã‹ï¼Ÿâ€•â€•è¨­è¨ˆã‹ã‚‰ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã¾ã§AIã®é™ç•Œã‚’æ¢ã‚‹ä½œè€…:å°é‡ å“²æŠ€è¡“è©•è«–ç¤¾AmazonCloudNative Days Fukuoka 2023 ã«ã¦ç™»å£‡ä½™è«‡ãªã®ã§ã™ãŒ"k8sgpt Deep Dive: Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã®AIé§†å‹•å‹åˆ†æã«ã¤ã„ã¦â€ ã¨ã„ã†ã‚¿ã‚¤ãƒˆãƒ«ã§ç™»å£‡ã‚’è¡Œã„ã¾ã™ã€‚event.cloudnativedays.jpå‚è€ƒAIæ™‚ä»£ã«å‘ã‘ãŸã‚¯ãƒ©ã‚¦ãƒ‰ã«ãŠã‘ã‚‹ä¿¡é ¼æ€§ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã®æœªæ¥æ§‹æƒ³ / DICOMO2022 6A-1AICommand GitHubãƒªãƒã‚¸ãƒˆãƒªOpenAIsashabaranov/go-openai]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[æˆç†Ÿåº¦ãƒ¢ãƒ‡ãƒ«ã‚’æ´»ç”¨ã—ãŸCloud Nativeã¸ã®é“ç­‹ ã¨ã„ã†å‰¯é¡Œã§ç™»å£‡ã—ã¾ã™ #é–‹ç™ºç”Ÿç”£æ€§con_findy]]></title>
            <link>https://syu-m-5151.hatenablog.com/entry/2023/07/13/131433</link>
            <guid>https://syu-m-5151.hatenablog.com/entry/2023/07/13/131433</guid>
            <pubDate>Thu, 13 Jul 2023 04:14:33 GMT</pubDate>
            <content:encoded><![CDATA[æ¦‚è¦é–‹ç™ºç”Ÿç”£æ€§Conferenceã¨ã„ã†ã‚¤ãƒ™ãƒ³ãƒˆã«ã€Cloud Native ã®ä½œæ³• - æˆç†Ÿåº¦ãƒ¢ãƒ‡ãƒ«ã‚’æ´»ç”¨ã—ãŸCloud Nativeã¸ã®é“ç­‹ã€ã¨ã„ã†ã‚¿ã‚¤ãƒˆãƒ«ã§ç™»å£‡ã—ã¾ã—ãŸã€‚ç”Ÿç”£æ€§ã«é–¢ã™ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆãªã‚“ã§ã™ã‘ã©ç¾å ´ã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚’ã‚„ã£ã¦ã„ã‚‹åƒ•ã«ã¯é–‹ç™ºç”Ÿç”£æ€§ã«ã¤ã„ã¦èªã‚‹ã“ã¨ã£ã¦ã‚ã‚“ã¾ã‚Šãªã„ã‚ˆã†ãªãƒ¼ã£ã¦æ€ã„ãªãŒã‚‰æœ€è¿‘ã€æˆç†Ÿåº¦ãƒ¢ãƒ‡ãƒ«ã«ã¤ã„ã¦èª¿ã¹ã¦ã„ãŸã®ã§ã“ã®ã‚¿ã‚¤ãƒˆãƒ«ã«ã—ã¾ã—ãŸã€‚é€”ä¸­ã§é–‹ç™ºç”Ÿç”£æ€§ã«ã¤ã„ã¦èªã‚‹ã®ã‚’è«¦ã‚ã¦ã‚¬ãƒƒãƒ„ãƒªè³‡æ–™ã‚’ä½œã‚Šç›´ã—ã¾ã—ãŸã®ã§ç”Ÿæš–ã‹ãè¦‹å®ˆã£ã¦ãã ã•ã„ã€‚ã‚ã¨ã€ã¡ã‚‡ã£ã¨å‰ã«æ›¸ç±ã‚’é€ã£ã¦é ‚ãã¾ã—ãŸãŒğŸ“– Twitter ã§ã®å‘ŠçŸ¥ã‚’å¿˜ã‚Œã¦ã„ãŸã®ã§ã—ã¦ãŠãã¾ã™ã€‚èª­ã‚“ã æ„Ÿæƒ³ã¨ã—ã¦ã¯å…¥é–€æ›¸ã§ã¯æ±ºã—ã¦ãªã„ã§ã™ãŒæˆç†Ÿåº¦ãƒ¢ãƒ‡ãƒ«ã§ã„ã†ã¨ãƒ¬ãƒ™ãƒ«2ã®æ®µéšã§ã¯èª­ã‚“ã§ã»ã—ã„ã¨æ€ã†æ›¸ç±ã«ãªã‚Šã¾ã™ã€‚ã¾ãŸã€è±Šå¯Œã«ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¸ã®ãƒªãƒ³ã‚¯ãŒè²¼ã£ã¦ã‚ã‚‹ã®ã§Kubernetesã¨ã„ã†è’é‡ã«é“ã‚’ç¤ºã™åœ°å›³ã«ãªã‚‹ã¨æ€ã„ã¾ã™(ã“ã®æ–‡ç« ã¯ChatGPTã§ã¯ãªãä¿ºãŒç”Ÿæˆã—ãŸ)ã€‚Kubernetesã®çŸ¥è­˜åœ°å›³ â€”â€” ç¾å ´ã§ã®åŸºç¤ã‹ã‚‰æœ¬ç•ªé‹ç”¨ã¾ã§ä½œè€…:é’å±± çœŸä¹Ÿ,å°ç«¹ æ™ºå£«,é•·è°·å· èª ,å·éƒ¨ å‹ä¹Ÿ,å²©äº• ä½‘æ¨¹,æ‰æµ¦ æ™ºåŸºæŠ€è¡“è©•è«–ç¤¾Amazonè³‡æ–™ç™»å£‡è³‡æ–™ã«ãªã‚Šã¾ã™ã€‚ã“ã®ãƒ–ãƒ­ã‚°ã®ç›®çš„ã¯å‚è€ƒè³‡æ–™ã‚’ã„ã¡ã„ã¡æ¢ã•ãªãã¦ã„ã„ã‚ˆã†ã«ã‚ã‚Šã¾ã™ã®ã§ã”æ´»ç”¨ãã ã•ã„ã€‚ speakerdeck.comå‚è€ƒæ–‡çŒ®Cloud Native Maturity ModelCloud Native TransformationDesign Patterns for Cloud Native ApplicationsIntro to the Cloud Native Maturity Model - Danielle Cook, Simon Forster, Robbie Glenn & John FormanSRE ã‚µã‚¤ãƒˆãƒªãƒ©ã‚¤ã‚¢ãƒ“ãƒªãƒ†ã‚£ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ãŒâ€ã‚¶ãƒƒã‚¯ãƒªâ€ã€Œã™ã£ãã‚Šã€åˆ†ã‹ã‚‹æœ¬: GoogleãŒå®Ÿè·µã—ã¦ã„ã‚‹æ–°DevOpsæ–¹æ³•è«–SRE ã‚µã‚¤ãƒˆãƒªãƒ©ã‚¤ã‚¢ãƒ“ãƒªãƒ†ã‚£ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã‚µã‚¤ãƒˆãƒªãƒ©ã‚¤ã‚¢ãƒ“ãƒªãƒ†ã‚£ãƒ¯ãƒ¼ã‚¯ãƒ–ãƒƒã‚¯Cloud Nativeæˆç†Ÿåº¦ãƒ¢ãƒ‡ãƒ«ãŒWebå…¬é–‹ã•ã‚Œã¾ã—ãŸWhat's the Difference Between DevOps and SRE?Solving Reliability Fears with Site Reliability EngineeringReliability When Everything Is a Platform: Why You Need to SRE Your CustomersThe History of DevOps ReportsEffective DevOpsPlatformÂ Engineeringã¸ã®æ‹›å¾…Platform Team ã¨ ç¤¾å†…æ”¿æ²» ã€œ å‡ºã§ã‚ˆã€Platform Champion ã€œ / Platform Team and Internal Politics - Platform Engineering MeetupÂ #2Platform Engineering atÂ MercariEMPOWERED æ™®é€šã®ãƒãƒ¼ãƒ ãŒä¸¦å¤–ã‚ŒãŸè£½å“ã‚’ç”Ÿã¿å‡ºã™ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆã®ã™ã¹ã¦ äº‹æ¥­æˆ¦ç•¥ãƒ»ITé–‹ç™ºãƒ»UXãƒ‡ã‚¶ã‚¤ãƒ³ãƒ»ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°ã‹ã‚‰ãƒãƒ¼ãƒ ãƒ»çµ„ç¹”é‹å–¶ã¾ã§æ­£ã—ã„ã‚‚ã®ã‚’æ­£ã—ãã¤ãã‚‹ã€€ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã‚’ã¤ãã‚‹ã¨ã¯ã©ã†ã„ã†ã“ã¨ãªã®ã‹ã€ã‚ã‚‹ã„ã¯ã‚¢ã‚¸ãƒ£ã‚¤ãƒ«ã®ãã®å…ˆã«ã¤ã„ã¦ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°çµ„ç¹”è«–ã¸ã®æ‹›å¾…ã€€ï½ä¸ç¢ºå®Ÿæ€§ã«å‘ãåˆã†æ€è€ƒã¨çµ„ç¹”ã®ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[OpenAI APIã‚’åˆ©ç”¨ã—ã¦ãƒ‘ãƒ–ãƒªãƒƒã‚¯ã‚¯ãƒ©ã‚¦ãƒ‰ã®æ¨©é™è¦ç´„ã‚’ã—ã¦ãã‚Œã‚‹CLIã‚³ãƒãƒ³ãƒ‰ã‚’ä½œæˆã—ãŸ]]></title>
            <link>https://sreake.com/blog/summarize-permission-with-openai/</link>
            <guid>https://sreake.com/blog/summarize-permission-with-openai/</guid>
            <pubDate>Tue, 11 Jul 2023 07:01:52 GMT</pubDate>
            <content:encoded><![CDATA[ã¯ã˜ã‚ã« Sreakeäº‹æ¥­éƒ¨ã®æ©‹æœ¬ã§ã™ã€‚å‰å›ã®è¨˜äº‹ã‹ã‚‰å¼•ãç¶šãã€OpenAIã®GPTãƒ¢ãƒ‡ãƒ«ã‚’åˆ©ç”¨ã—ã¦DevOpsã€SREã®é ˜åŸŸã§ã®text AIã®æœ‰åŠ¹æ´»ç”¨ã‚’è€ƒãˆã¦ã„ãã¾ã™ã€‚ é‹ç”¨ã®è‡ªå‹•åŒ–ã€æ§‹ç¯‰æ”¯æ´ãªã©ã«æ´»ç”¨ã§ãã‚‹ã¨å¬‰ã—ã„ [â€¦]The post OpenAI APIã‚’åˆ©ç”¨ã—ã¦ãƒ‘ãƒ–ãƒªãƒƒã‚¯ã‚¯ãƒ©ã‚¦ãƒ‰ã®æ¨©é™è¦ç´„ã‚’ã—ã¦ãã‚Œã‚‹CLIã‚³ãƒãƒ³ãƒ‰ã‚’ä½œæˆã—ãŸ first appeared on sreake.com | æ ªå¼ä¼šç¤¾ã‚¹ãƒªãƒ¼ã‚·ã‚§ã‚¤ã‚¯.]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[ãƒ¡ãƒ¼ãƒ«ãŒå±Šã„ãŸã‚‰ Google Home ã§éŸ³å£°ã§é€šçŸ¥ã™ã‚‹]]></title>
            <link>https://blog.1q77.com/2023/07/ses-lambda-and-cloud-pubsub/</link>
            <guid>https://blog.1q77.com/2023/07/ses-lambda-and-cloud-pubsub/</guid>
            <pubDate>Mon, 10 Jul 2023 14:25:35 GMT</pubDate>
            <content:encoded><![CDATA[ä»¥å‰ã€ã€Œ LINE ã«é€ã£ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ Google Home ã«èª­ã¿ä¸Šã’ã•ã›ã‚‹ã€ã¨ã„ã†è¨˜äº‹ã‚’æ›¸ãã¾ã—ãŸã€‚ ãã®æ™‚ã«ä½œã£ãŸã‚‚ã®ã«å®¶ã«ã‚ã‚‹ãƒ©ã‚ºãƒ‘ã‚¤ã§ Cloud PubSub ã‚’ subscribe ã—ã¦ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå±Šã„ãŸã‚‰ãã®å†…å®¹ã‚’ Text-to-Speach ã§]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[ã€TerraformğŸ§‘â€ğŸš€ã€‘tfstateãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆè¨­è¨ˆ]]></title>
            <link>https://hiroki-hasegawa.hatenablog.jp/entry/2023/07/05/001756</link>
            <guid>https://hiroki-hasegawa.hatenablog.jp/entry/2023/07/05/001756</guid>
            <pubDate>Tue, 04 Jul 2023 15:17:56 GMT</pubDate>
            <content:encoded><![CDATA[ã“ã®è¨˜äº‹ã‹ã‚‰å¾—ã‚‰ã‚Œã‚‹çŸ¥è­˜ã“ã®è¨˜äº‹ã‚’èª­ã‚€ã¨ã€ä»¥ä¸‹ã‚’ "å®Œå…¨ã«ç†è§£" ã§ãã¾ã™âœŒï¸Terraformã®tfstateãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ†å‰²ã™ã‚‹ç›®çš„ã¨ã€åˆ†å‰²ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ã¤ã„ã¦ (AWSå‘ã‘)Terraformã®ãƒªãƒã‚¸ãƒˆãƒªã‚„ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆã®è¨­è¨ˆã«ã¤ã„ã¦ã“ã®è¨˜äº‹ã‹ã‚‰å¾—ã‚‰ã‚Œã‚‹çŸ¥è­˜01. ã¯ã˜ã‚ã«02. ãªãœ tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ†å‰²ã™ã‚‹ã®ã‹åˆ†å‰²ã—ã¦ã„ãªã„å ´åˆåˆ†å‰²ã—ã¦ã„ã‚‹å ´åˆ03. tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã®åˆ†å‰²åˆ†å‰²ã®å¢ƒç›®çŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚å›³ä¾å­˜é–¢ä¿‚å›³ã¨ã¯ä¾å­˜é–¢ä¿‚ã®è¡¨ç¾â–¼ ä¾å­˜é–¢ä¿‚ã®è¡¨ç¾è¨˜æ³•â–¼ ä¾å­˜é–¢ä¿‚ãŒãªã„å ´åˆâ–¼ ä¾å­˜é–¢ä¿‚ãŒã‚ã‚‹å ´åˆ04. tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«åŸºã¥ããã®ä»–ã®è¨­è¨ˆãƒªãƒã‚¸ãƒˆãƒª ğŸ­ ã®è¨­è¨ˆãƒªãƒã‚¸ãƒˆãƒªåˆ†å‰²ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼ ğŸ“‚ æ§‹æˆãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ ğŸª£ ã®è¨­è¨ˆãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰åˆ†å‰²ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆ05. çŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚ã®å®šç¾©æ–¹æ³•terraform_remote_stateãƒ–ãƒ­ãƒƒã‚¯ã®å ´åˆterraform_remote_stateãƒ–ãƒ­ãƒƒã‚¯ã«ã‚ˆã‚‹ä¾å­˜çŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚å›³ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆAWSãƒªã‚½ãƒ¼ã‚¹åˆ¥ã®dataãƒ–ãƒ­ãƒƒã‚¯ã®å ´åˆAWSãƒªã‚½ãƒ¼ã‚¹åˆ¥ã®dataãƒ–ãƒ­ãƒƒã‚¯ã«ã‚ˆã‚‹ä¾å­˜çŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚å›³ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆ06. tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã®åˆ†å‰²ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚ªã‚¹ã‚¹ãƒ¡ãªè¨­è¨ˆã®ä¸€è¦§ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆã¨ã®é–¢ä¿‚ã«ã¤ã„ã¦ãƒªãƒã‚¸ãƒˆãƒªã®å ´åˆãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®å ´åˆ07. ä¸Šå±¤ã®åˆ†å‰² (å¿…é ˆ)ä¸Šå±¤ã®åˆ†å‰²ã«ã¤ã„ã¦ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåˆ¥ - â˜…â˜…ã“ã®åˆ†å‰²æ–¹æ³•ã«ã¤ã„ã¦ã€ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåˆ¥ã€‘çŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚å›³ã€ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåˆ¥ã€‘ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆâ–¼ ç•°ãªã‚‹ãƒªãƒã‚¸ãƒˆãƒªã®å ´åˆâ–¼ åŒã˜ãƒªãƒã‚¸ãƒˆãƒªã®å ´åˆã€ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåˆ¥ã€‘ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆâ–¼ ç•°ãªã‚‹ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®å ´åˆâ–¼ åŒã˜ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®å ´åˆ08. ä¸‹å±¤ã®åˆ†å‰² (å¿…é ˆ)ä¸‹å±¤ã®åˆ†å‰²ã«ã¤ã„ã¦å®Ÿè¡Œç’°å¢ƒåˆ¥ - â˜…â˜…ã“ã®åˆ†å‰²æ–¹æ³•ã«ã¤ã„ã¦ã€å®Ÿè¡Œç’°å¢ƒåˆ¥ã€‘çŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚å›³ã€å®Ÿè¡Œç’°å¢ƒåˆ¥ã€‘ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆâ–¼ ç•°ãªã‚‹ãƒªãƒã‚¸ãƒˆãƒªã®å ´åˆâ–¼ åŒã˜ãƒªãƒã‚¸ãƒˆãƒªã®å ´åˆã€å®Ÿè¡Œç’°å¢ƒåˆ¥ã€‘ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆâ–¼ ç•°ãªã‚‹ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®å ´åˆâ–¼ åŒã˜ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ x AWSã‚¢ã‚«ã‚¦ãƒ³ãƒˆåˆ¥ã«ç•°ãªã‚‹å®Ÿè¡Œç’°å¢ƒ ã®å ´åˆâ–¼ åŒã˜ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ x å˜ä¸€ã®AWSã‚¢ã‚«ã‚¦ãƒ³ãƒˆå†…ã«å…¨ã¦ã®å®Ÿè¡Œç’°å¢ƒ ã®å ´åˆ09. ä¸­é–“å±¤ã®åˆ†å‰² (ä»»æ„)ä¸­é–“å±¤ã®åˆ†å‰²ã«ã¤ã„ã¦åŒã˜ãƒ†ãƒŠãƒ³ãƒˆã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆåˆ¥ã“ã®åˆ†å‰²æ–¹æ³•ã«ã¤ã„ã¦ã€åŒã˜ãƒ†ãƒŠãƒ³ãƒˆã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆåˆ¥ã€‘çŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚å›³ã€åŒã˜ãƒ†ãƒŠãƒ³ãƒˆã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆåˆ¥ã€‘ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆâ–¼ ç•°ãªã‚‹ãƒªãƒã‚¸ãƒˆãƒªã®å ´åˆâ–¼ åŒã˜ãƒªãƒã‚¸ãƒˆãƒªã®å ´åˆã€åŒã˜ãƒ†ãƒŠãƒ³ãƒˆã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆåˆ¥ã€‘ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆâ–¼ ç•°ãªã‚‹ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®å ´åˆâ–¼ åŒã˜ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®å ´åˆé‹ç”¨ãƒãƒ¼ãƒ è²¬å‹™ç¯„å›²åˆ¥ - â˜…ã“ã®åˆ†å‰²æ–¹æ³•ã«ã¤ã„ã¦ã€ãƒãƒ¼ãƒ åˆ¥ã€‘çŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚å›³ã€ãƒãƒ¼ãƒ åˆ¥ã€‘ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆâ–¼ ç•°ãªã‚‹ãƒªãƒã‚¸ãƒˆãƒªã®å ´åˆâ–¼ åŒã˜ãƒªãƒã‚¸ãƒˆãƒªã®å ´åˆã€ãƒãƒ¼ãƒ åˆ¥ã€‘ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆâ–¼ ç•°ãªã‚‹ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®å ´åˆâ–¼ åŒã˜ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®å ´åˆãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®ã‚µãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ¥ - â˜…ã“ã®åˆ†å‰²æ–¹æ³•ã«ã¤ã„ã¦ã€ã‚µãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ¥ã€‘çŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚å›³ã€ã‚µãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ¥ã€‘ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆâ–¼ ç•°ãªã‚‹ãƒªãƒã‚¸ãƒˆãƒªã®å ´åˆâ–¼ åŒã˜ãƒªãƒã‚¸ãƒˆãƒªã®å ´åˆã€ã‚µãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ¥ã€‘ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆâ–¼ ç•°ãªã‚‹ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®å ´åˆâ–¼ åŒã˜ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®å ´åˆAWSãƒªã‚½ãƒ¼ã‚¹ã®ç¨®é¡ã‚°ãƒ«ãƒ¼ãƒ—åˆ¥ã“ã®åˆ†å‰²æ–¹æ³•ã«ã¤ã„ã¦ã€ç¨®é¡ã‚°ãƒ«ãƒ¼ãƒ—åˆ¥ã€‘çŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚å›³ã€ç¨®é¡ã‚°ãƒ«ãƒ¼ãƒ—åˆ¥ã€‘ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆâ–¼ ç•°ãªã‚‹ãƒªãƒã‚¸ãƒˆãƒªã®å ´åˆâ–¼ åŒã˜ãƒªãƒã‚¸ãƒˆãƒªã®å ´åˆã€ç¨®é¡ã‚°ãƒ«ãƒ¼ãƒ—åˆ¥ã€‘ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆâ–¼ ç•°ãªã‚‹ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®å ´åˆâ–¼ åŒã˜ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®å ´åˆAWSãƒªã‚½ãƒ¼ã‚¹ã®çŠ¶æ…‹ã®å¤‰æ›´é »åº¦ã‚°ãƒ«ãƒ¼ãƒ—åˆ¥ã“ã®åˆ†å‰²æ–¹æ³•ã«ã¤ã„ã¦ã€å¤‰æ›´é »åº¦ã‚°ãƒ«ãƒ¼ãƒ—åˆ¥ã€‘çŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚å›³ã€å¤‰æ›´é »åº¦ã‚°ãƒ«ãƒ¼ãƒ—åˆ¥ã€‘ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆâ–¼ ç•°ãªã‚‹ãƒªãƒã‚¸ãƒˆãƒªã®å ´åˆâ–¼ åŒã˜ãƒªãƒã‚¸ãƒˆãƒªã®å ´åˆã€å¤‰æ›´é »åº¦ã‚°ãƒ«ãƒ¼ãƒ—åˆ¥ã€‘ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆâ–¼ ç•°ãªã‚‹ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®å ´åˆâ–¼ åŒã˜ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®å ´åˆé‹ç”¨ãƒãƒ¼ãƒ è²¬å‹™ç¯„å›²åˆ¥ Ã— ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã‚µãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ¥ - â˜…ã“ã®åˆ†å‰²æ–¹æ³•ã«ã¤ã„ã¦ã€ãƒãƒ¼ãƒ åˆ¥ Ã— ã‚µãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ¥ã€‘çŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚å›³ã€ãƒãƒ¼ãƒ åˆ¥ Ã— ã‚µãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ¥ã€‘ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆâ–¼ ç•°ãªã‚‹ãƒªãƒã‚¸ãƒˆãƒªã®å ´åˆâ–¼ åŒã˜ãƒªãƒã‚¸ãƒˆãƒªã®å ´åˆã€ãƒãƒ¼ãƒ åˆ¥ Ã— ã‚µãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ¥ã€‘ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆâ–¼ ç•°ãªã‚‹ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®å ´åˆâ–¼ åŒã˜ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®å ´åˆ10. ãŠã‚ã‚Šã«è¬è¾01. ã¯ã˜ã‚ã«å‰ä¸–ã§ã‚‚ã†å°‘ã—å¾³ã‚’ç©ã‚“ã§ã„ã‚Œã°ã€Mitchell Hashimoto ã¨ã—ã¦ç”Ÿã¾ã‚Œã‚‹ã“ã¨ãŒã§ããŸã®ã«!!ã•ã¦æœ€è¿‘ã®æ¥­å‹™ã§ã€å…¨ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®æŠ€è¡“åŸºç›¤é–‹ç™ºãƒãƒ¼ãƒ ã«æºã‚ã£ã¦ãŠã‚Šã€ãƒãƒ¼ãƒ ãŒä½¿ã£ã¦ã„ã‚‹TerraformğŸ§‘ğŸ»â€ğŸš€ã®ãƒªãƒã‚¸ãƒˆãƒªã‚’ãƒªãƒ—ãƒ¬ã‚¤ã‚¹ã™ã‚‹ä½œæ¥­ã‚’æ‹…å½“ã—ã¾ã—ãŸã€‚ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã§ã¯å˜ä¸€ã®tfstateãƒ•ã‚¡ã‚¤ãƒ«ãŒçŠ¶æ…‹ã‚’æŒã¡éãã¦ã„ã‚‹èª²é¡Œã‚’æŠ±ãˆã¦ã„ãŸãŸã‚ã€èª²é¡Œã«åˆã£ãŸé©åˆ‡ãªåˆ†å‰²ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ãƒªãƒ—ãƒ¬ã‚¤ã‚¹ã—ã¾ã—ãŸã€‚ä»Šå›ã¯ã€ã“ã®æ™‚ã«æ•´ç†ã—ãŸåˆ†å‰²ãƒ‘ã‚¿ãƒ¼ãƒ³ (AWSå‘ã‘) ã‚’è¨˜äº‹ã§è§£èª¬ã—ã¾ã—ãŸã€‚ã‚‚ã¡ã‚ã‚“ã€GoogleCloudã‚„Azureã§ã‚‚èª­ã¿æ›ãˆã¦ã„ãŸã ã‘ã‚Œã°ã€åŒã˜ã‚ˆã†ã«é©ç”¨ã§ãã¾ã™ã€‚çŸ¥ã‚‹é™ã‚Šã®åˆ†å‰²ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è¨˜è¼‰ã—ãŸã¨ã“ã‚ã€æƒ…å ±é‡ãŒã‚¨ã‚°ã„ã“ã¨ã«ãªã£ã¦ã—ã¾ã£ãŸãŸã‚ã€æ°—ã«ãªã‚‹åˆ†å‰²ãƒ‘ã‚¿ãƒ¼ãƒ³ã ã‘æ‹¾ã£ã¦å¸°ã£ã¦ã„ãŸã ã‘ã‚‹ã¨ãƒãƒƒãƒ”ãƒ¼ã§ã™ğŸ™ãã‚Œã§ã¯ã€ã‚‚ã‚Šã‚‚ã‚Šå¸ƒæ•™ã—ã¦ã„ãã¾ã™ğŸ˜—02. ãªãœ tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ†å‰²ã™ã‚‹ã®ã‹%%{init: { 'theme': "default", 'themeVariables': { 'commitLabelFontSize': '13px' }}}%%gitGraph   commit id: "8c8e6"   commit id: "0e3c3"     branch feature/foo     checkout feature/foo     commit id: "4e9e8"     commit id: "fooã•ã‚“ãŒApply"   checkout main     branch feature/bar     commit id: "barã•ã‚“ãŒPlan"   checkout main   commit id: "e74d6"     branch feature/baz     commit id: "bazã•ã‚“ãŒPlan"åˆ†å‰²ã—ã¦ã„ãªã„å ´åˆãã‚‚ãã‚‚ã€ãªãœtfstateãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ†å‰²ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã§ã—ã‚‡ã†ã‹ã€‚tfstateãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ†å‰²ã—ãªã‹ã£ãŸã¨ä»®å®šã—ã¾ã™ã€‚æ§˜ã€…ãªã‚¤ãƒ³ãƒ•ãƒ©ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å˜ä¸€ã®tfstateãƒ•ã‚¡ã‚¤ãƒ«ã§çŠ¶æ…‹ã‚’æŒã¤å ´åˆã€1å›ã®terraformã‚³ãƒãƒ³ãƒ‰å…¨ã¦ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æ“ä½œã§ãã¦æ¥½ã§ã™ã€‚ãŸã ã—ã€è¤‡æ•°ã®ä½œæ¥­ãƒ–ãƒ©ãƒ³ãƒãŒã‚ã‚‹çŠ¶æ³ã ã¨ç…©ã‚ã—ã„ã“ã¨ãŒèµ·ã“ã‚Šã¾ã™ã€‚å„ä½œæ¥­ãƒ–ãƒ©ãƒ³ãƒã§ã‚¤ãƒ³ãƒ•ãƒ©ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’å¤‰æ›´ã—ã‹ã‘ã¦ã„ã‚‹ã¨ã€terraformã‚³ãƒãƒ³ãƒ‰ã§targetã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚åˆ†å‰²ã—ã¦ã„ã‚‹å ´åˆãã®ä¸€æ–¹ã§ã€tfstateãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã„ã„æ„Ÿã˜ã«åˆ†å‰²ã—ãŸã¨ä»®å®šã—ã¾ã™ã€‚å„ä½œæ¥­ãƒ–ãƒ©ãƒ³ãƒã§ã¯ã€ã¾ã‚‹ã§æš—é»™çš„ã«targetã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒã¤ã„ãŸã‚ˆã†ã«ã€ä»–ã®ä½œæ¥­ãƒ–ãƒ©ãƒ³ãƒã®å½±éŸ¿ã‚’å—ã‘ãšã«terraformã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã§ãã¾ã™ã€‚ã‚ˆã£ã¦ã€å„tfstateãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ“ä½œã§ãã‚‹ç®¡ç†è€…ã¯äº’ã„ã«å½±éŸ¿ã‚’å—ã‘ãšã«ã€terraformã‚³ãƒãƒ³ãƒ‰ã®çµæœã‚’å¾—ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚Terraform: Up & Running: Writing Infrastructure As CodeOrganizing With Multiple States - DevOps with Terraform - CloudCasts03. tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã®åˆ†å‰²åˆ†å‰²ã®å¢ƒç›®ãã‚Œã§ã¯ã€tfstateãƒ•ã‚¡ã‚¤ãƒ«ã®åˆ†å‰²ã®å¢ƒç•Œã¯ã©ã®ã‚ˆã†ã«ã—ã¦è¦‹ã¤ã‘ã‚Œã°ã‚ˆã„ã®ã§ã—ã‚‡ã†ã‹ã€‚ã“ã‚Œã‚’è¦‹ã¤ã‘ã‚‹ã‚³ãƒ„ã¯ã€ä»–ã®çŠ¶æ…‹ã«ã§ãã‚‹ã ã‘ä¾å­˜ã—ãªã„ãƒªã‚½ãƒ¼ã‚¹ã®é–¢ä¿‚ ã«æ³¨ç›®ã™ã‚‹ã“ã¨ã ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚ã“ã“ã§ã„ã†ä¾å­˜ã¨ã¯ã€tfstateãƒ•ã‚¡ã‚¤ãƒ«ãŒä»–ã®tfstateãƒ•ã‚¡ã‚¤ãƒ«ã®çŠ¶æ…‹ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã™ã€‚tfstateãƒ•ã‚¡ã‚¤ãƒ«ã®åˆ†å‰²ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ã¤ã„ã¦ã¯å¾Œè¿°ã—ã¾ã™ã€‚ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®æ–‡è„ˆã§ã¯ã€ä»–ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã‚’ã€ä¾å­˜ã€ã¨è¡¨ç¾ã—ã¾ã™ã€‚ãã®ãŸã‚ä¾¿å®œä¸Šã€tfstateãƒ•ã‚¡ã‚¤ãƒ«ã§ã‚‚åŒã˜ç”¨èªã§è¡¨ç¾ã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚@tmknom ã•ã‚“ãŒè¿°ã¹ã¦ã„ã‚‹é€šã‚Šã€Terraformã‚’ã‚ˆã‚Šã‚ˆãè¨­è¨ˆã™ã‚‹ãŸã‚ã«ã¯ã€ã€ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã®åŸºç¤çŸ¥è­˜ã€ãŒå¿…è¦ã§ã™ğŸ‘çŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚å›³ä¾å­˜é–¢ä¿‚å›³ã¨ã¯åˆ†å‰²ã—ãŸtfstateãƒ•ã‚¡ã‚¤ãƒ«é–“ã®çŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚ã‚’è¡¨ç¾ã—ãŸå›³ã§ã™ã€‚ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®çŠ¶æ…‹ã‚’tfstateãƒ•ã‚¡ã‚¤ãƒ«ã§ç®¡ç†ã—ã¦ã„ã‚‹ã“ã¨ã‚’æƒ³åƒã—ã¦ã¿ã¦ãã ã•ã„ã€‚%%{init:{'theme':'default'}}%%flowchart TB    subgraph AWSã‚¢ã‚«ã‚¦ãƒ³ãƒˆ        foo["tfstateãƒ•ã‚¡ã‚¤ãƒ«"]    endä¼¼ãŸã‚‚ã®ã¨ã—ã¦terraform graphã‚³ãƒãƒ³ãƒ‰ã«ã‚ˆã‚‹ã‚°ãƒ©ãƒ•ãŒã‚ã‚Šã¾ã™ãŒã€ã“ã‚Œã¯ãƒªã‚½ãƒ¼ã‚¹é–“ã®ä¾å­˜é–¢ä¿‚å›³ã§ã™ã€‚tfstateãƒ•ã‚¡ã‚¤ãƒ«é–“ã§ç›¸äº’ã«ä¾å­˜é–¢ä¿‚ãŒã‚ã‚‹ã‹ã‚‰ã¨ã„ã£ã¦ã€å€‹åˆ¥ã®ãƒªã‚½ãƒ¼ã‚¹é–“ã§å¾ªç’°å‚ç…§ãŒèµ·ã“ã£ã¦ã—ã¾ã†ã¨ã„ã†ã‚ã‘ã§ã¯ãªã„ã§ã™ã€‚ç¶šã„ã¦ã€ä¾å­˜é–¢ä¿‚ãŒã‚ã‚‹å ´åˆã¨ç„¡ã„å ´åˆã§ã€ã©ã®ã‚ˆã†ãªä¾å­˜é–¢ä¿‚å›³ã«ãªã‚‹ã‹ã‚’ç´¹ä»‹ã—ã¦ã„ãã¾ã™ã€‚Command: graph | Terraform | HashiCorp Developerä¾å­˜é–¢ä¿‚ã®è¡¨ç¾â–¼ ä¾å­˜é–¢ä¿‚ã®è¡¨ç¾è¨˜æ³•tfstateãƒ•ã‚¡ã‚¤ãƒ«é–“ã§çŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚ãŒã‚ã‚‹å ´åˆã€ã“ã‚Œã‚’å›³ã§è¡¨ç¾ã™ã‚‹ã¨åˆ†å‰²ã®çŠ¶æ³ãŒã‚ã‹ã‚Šã‚„ã™ããªã‚Šã¾ã™ã€‚ã€ä¾å­˜ã€ã¯ã€---> (æ³¢ç·šçŸ¢å°) ã§è¡¨ç¾ã™ã‚‹ã“ã¨ã¨ã—ã¾ã™ã€‚è¨­å®šå€¤ã®å‚ç…§æ•°ãŒå°‘ãªã„ã»ã©ã‚ˆã„ã§ã™ã€‚ä¾å­˜é–¢ä¿‚ãŒã‚ã‚‹å ´åˆã«ã¤ã„ã¦ã¯ã€å¾Œè¿°ã—ã¾ã™ã€‚ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®æ–‡è„ˆã§ã¯ã€ã€ä¾å­˜ã€ã‚’---> (æ³¢ç·šçŸ¢å°) ã§è¡¨ç¾ã—ã¾ã™ã€‚ãã®ãŸã‚ä¾¿å®œä¸Šã€tfstateãƒ•ã‚¡ã‚¤ãƒ«ã§ã‚‚åŒã˜è¨˜å·ã§è¡¨ç¾ã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸğŸ‘â–¼ ä¾å­˜é–¢ä¿‚ãŒãªã„å ´åˆä¾‹ãˆã°ã€AWSãƒªã‚½ãƒ¼ã‚¹ã‹ã‚‰ãªã‚‹ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã‚’ã„ãã¤ã‹ã®tfstateãƒ•ã‚¡ã‚¤ãƒ« (foo-tfstateã€bar-tfstate) ã«åˆ†å‰²ã—ãŸã¨ä»®å®šã—ã¾ã™ã€‚ã“ã“ã§ä»®å®šã—ãŸçŠ¶æ³ã§ã¯ã€ tfstate ãƒ•ã‚¡ã‚¤ãƒ«é–“ã«ä¾å­˜é–¢ä¿‚ã¯ãªã„ã¨ã—ã¾ã™ã€‚ãã®ãŸã‚ã€æƒ³å®šã•ã‚Œã‚‹çŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚å›³ã¯ä»¥ä¸‹ã®é€šã‚Šã«ãªã‚Šã¾ã™ã€‚tfstateãƒ•ã‚¡ã‚¤ãƒ«é–“ã«ä¾å­˜é–¢ä¿‚ãŒãªã„çŠ¶æ³ãŒãƒ™ã‚¹ãƒˆã§ã™ã€‚---title: tfstateãƒ•ã‚¡ã‚¤ãƒ«é–“ã«ä¾å­˜é–¢ä¿‚ã¯ãªã„---%%{init:{'theme':'default'}}%%flowchart TB    subgraph AWSã‚¢ã‚«ã‚¦ãƒ³ãƒˆ        foo["foo-tfstate"]        bar["bar-tfstate"]    endâ–¼ ä¾å­˜é–¢ä¿‚ãŒã‚ã‚‹å ´åˆåŒæ§˜ã«åˆ†å‰²ã—ãŸã¨ä»®å®šã—ã¾ã™ã€‚ã“ã“ã§ä»®å®šã—ãŸçŠ¶æ³ã§ã¯ã€ foo-tfstate â¡ï¸ bar-tfstate ã®æ–¹å‘ã«ä¾å­˜ã—ã¦ã„ã‚‹ã¨ã—ã¾ã™ã€‚ãã®ãŸã‚ã€---> (æ³¢ç·šçŸ¢å°) ã‚’ä½¿ç”¨ã—ã¦ã€æƒ³å®šã•ã‚Œã‚‹çŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚å›³ã¯ä»¥ä¸‹ã®é€šã‚Šã«ãªã‚Šã¾ã™ã€‚ãªãŠã€ä¾å­˜æ–¹å‘ã¯çŠ¶æ³ã«ã‚ˆã£ã¦ç•°ãªã‚‹ã“ã¨ã‚’ã”å®¹èµ¦ãã ã•ã„ã€‚---title: foo-tfstateãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€bar-tfstateãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜---%%{init:{'theme':'default'}}%%flowchart TD    subgraph AWSã‚¢ã‚«ã‚¦ãƒ³ãƒˆ        foo["foo-tfstate"]        bar["bar-tfstate"]    end    foo -. ä¾å­˜ .-> bar04. tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«åŸºã¥ããã®ä»–ã®è¨­è¨ˆãƒªãƒã‚¸ãƒˆãƒª ğŸ­ ã®è¨­è¨ˆãƒªãƒã‚¸ãƒˆãƒªåˆ†å‰²ã“ã“ã¾ã§ã§ã€tfstateãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²ã«ã¤ã„ã¦ç°¡å˜ã«ç´¹ä»‹ã—ã¾ã—ãŸã€‚ãƒªãƒã‚¸ãƒˆãƒªã®åˆ†å‰²ã¯ã€tfstateãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²ã«åŸºã¥ã„ã¦è¨­è¨ˆã—ã¾ã—ã‚‡ã†ã€‚ç•°ãªã‚‹ãƒªãƒã‚¸ãƒˆãƒªã«tfstateãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãŠã„ãŸæ–¹ãŒã‚ˆã„å ´åˆã«ã¤ã„ã¦ã¯ã€åˆ†å‰²ãƒ‘ã‚¿ãƒ¼ãƒ³ ã§èª¬æ˜ã—ã¦ã„ã¾ã™ã€‚ğŸ­ foo-repository/â”œâ”€â”€ backend.tf # fooã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹...ğŸ­ bar-repository/â”œâ”€â”€ backend.tf # barã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹...ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼ ğŸ“‚ æ§‹æˆãƒªãƒã‚¸ãƒˆãƒªå†…ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆã‚‚ã€tfstateãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²ã«åŸºã¥ã„ã¦è¨­è¨ˆã—ã¾ã—ã‚‡ã†ã€‚ç‡ç›´ã«è¨€ã†ã¨ã€Terraformã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ç„¡æ•°ã«ã‚ã‚Šã¾ã™ã€‚ãã®ãŸã‚ã€åŸºæº–ãªã—ã«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆã‚’è€ƒãˆã‚‹ã¨ä½•ã§ã‚‚ã‚ã‚Š ã«ãªã£ã¦ã—ã¾ã„ã¾ã™ã€‚ãã®ä¸€æ–¹ã§ã€tfstateãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²ã«åŸºã¥ã„ã¦è¨­è¨ˆã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€æ˜ç¢ºãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆãƒ‘ã‚¿ãƒ¼ãƒ³ ã¨ã—ã¦æŠ½å‡ºå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚ğŸ­ repository/â”œâ”€â”€ ğŸ“‚ foo/â”‚    â”œâ”€â”€ backend.tf # fooã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    ...â”‚â””â”€â”€ ğŸ“‚ bar/      â”œâ”€â”€ backend.tf # barã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹      ...Terraformã«ã¯ã€ãã®ãƒªãƒã‚¸ãƒˆãƒªå†…ã ã‘ã§ãƒ–ãƒ­ãƒƒã‚¯ (ä¾‹ï¼šresourceã€data) ã®ã‚»ãƒƒãƒˆã‚’ä½¿ã„å›ã™ã“ã¨ã‚’ç›®çš„ã¨ã—ãŸã€ãƒ­ãƒ¼ã‚«ãƒ«ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒã‚ã‚Šã¾ã™ã€‚ä»Šå›ã€ã“ã‚Œã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆã¯è¨­è¨ˆã«å«ã‚ã¦ã„ã¾ã›ã‚“ã€‚æ··åŒã—ã‚„ã™ã„ã®ã§ã™ãŒã€tfstateãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²ã«åŸºã¥ããƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆã¨ãƒ­ãƒ¼ã‚«ãƒ«ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å†…ã®ãã‚Œã¯ã€å…¨ãåˆ¥ã®ãƒ†ãƒ¼ãƒã¨ã—ã¦åˆ‡ã‚Šé›¢ã—ã¦è€ƒãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ğŸ‘ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ ğŸª£ ã®è¨­è¨ˆãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰åˆ†å‰²æœ¬è¨˜äº‹ã§ã¯ã€ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¨ã—ã¦AWS S3ãƒã‚±ãƒƒãƒˆã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã‚’æƒ³å®šã—ã¦ã„ã¾ã™ã€‚ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®åˆ†å‰²ã¯ã€tfstateãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²ã«åŸºã¥ã„ã¦è¨­è¨ˆã—ã¾ã—ã‚‡ã†ã€‚ç•°ãªã‚‹ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã«tfstateãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãŠã„ãŸæ–¹ãŒã‚ˆã„å ´åˆã«ã¤ã„ã¦ã¯ã€åˆ†å‰²ãƒ‘ã‚¿ãƒ¼ãƒ³ ã§èª¬æ˜ã—ã¦ã„ã¾ã™ã€‚ğŸª£ foo-bucket/â”‚â””â”€â”€ terraform.tfstate # fooã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ğŸª£ bar-bucket/â”‚â””â”€â”€ terraform.tfstate # barã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å†…ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆã‚‚ã€tfstateãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²ã«åŸºã¥ã„ã¦è¨­è¨ˆã—ã¾ã—ã‚‡ã†ã€‚ğŸª£ bucket/â”œâ”€â”€ ğŸ“‚ foo/â”‚    â””â”€â”€ terraform.tfstate # fooã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤â”‚â””â”€â”€ ğŸ“‚ bar/      â””â”€â”€ terraform.tfstate # barã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤05. çŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚ã®å®šç¾©æ–¹æ³•terraform_remote_stateãƒ–ãƒ­ãƒƒã‚¯ã®å ´åˆterraform_remote_stateãƒ–ãƒ­ãƒƒã‚¯ã«ã‚ˆã‚‹ä¾å­˜terraform_remote_stateãƒ–ãƒ­ãƒƒã‚¯ã«ã¯ã€ä»¥ä¸‹ã®ãƒ¡ãƒªãƒ‡ãƒ¡ãŒã‚ã‚Šã¾ã™ã€‚ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ç‰¹æ€§  ãƒ¡ãƒªãƒƒãƒˆ â­•ï¸                                                                        ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ Ã—                                                                                                                                                      å¯èª­æ€§                 -                                                                                  terraform_remote_stateãƒ–ãƒ­ãƒƒã‚¯ã«åŠ ãˆã¦outputãƒ–ãƒ­ãƒƒã‚¯ã‚‚å®Ÿè£…ãŒå¿…è¦ã§ã‚ã‚Šã€outputãƒ–ãƒ­ãƒƒã‚¯ã¯ä¾å­˜å…ˆã®AWSãƒªã‚½ãƒ¼ã‚¹ãŒä¸€è¦‹ã—ã¦ã‚ã‹ã‚Šã«ãã„ã€‚                             æ‹¡å¼µæ€§                 ä¾å­˜å…ˆã®AWSãƒªã‚½ãƒ¼ã‚¹ã«é–¢ã‚ã‚‰ãšã€åŒã˜terraform_remote_stateãƒ–ãƒ­ãƒƒã‚¯ã‚’ä½¿ã„å›ã›ã‚‹ã€‚  -                                                                                                                                                                     ä¿å®ˆæ€§                 -                                                                                  ä¾å­˜å…ˆã¨ä¾å­˜å…ƒã®é–“ã§Terraformã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«å·®ãŒã‚ã‚Šã™ãã‚‹ã¨ã€tfstateãƒ•ã‚¡ã‚¤ãƒ«é–“ã§äº’æ›æ€§ãŒãªããªã‚Šã€terraform_remote_stateãƒ–ãƒ­ãƒƒã‚¯ã®å‡¦ç†ãŒå¤±æ•—ã™ã‚‹ã€‚ æœ¬è¨˜äº‹ã§ã¯ã€ terraform_remote_state ãƒ–ãƒ­ãƒƒã‚¯ã‚’ä½¿ç”¨ã—ã¦ã€çŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚ã‚’å®šç¾© ã—ã¦ã„ãã¾ã™ã€‚tfstateãƒ•ã‚¡ã‚¤ãƒ«ãŒä»–ã®tfstateãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã™ã‚‹æ–¹æ³•ã¨ã—ã¦ã€å¾Œè¿°ã®AWSãƒªã‚½ãƒ¼ã‚¹åˆ¥ã®dataãƒ–ãƒ­ãƒƒã‚¯ãŒã‚ã‚Šã¾ã™ã€‚The terraform_remote_state Data Source | Terraform | HashiCorp DeveloperçŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚å›³ä¾‹ãˆã°ã€AWSãƒªã‚½ãƒ¼ã‚¹ã‹ã‚‰ãªã‚‹ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã‚’ã„ãã¤ã‹ã®tfstateãƒ•ã‚¡ã‚¤ãƒ« (foo-tfstateã€bar-tfstate) ã«åˆ†å‰²ã—ãŸã¨ä»®å®šã—ã¾ã™ã€‚ã“ã“ã§ä»®å®šã—ãŸçŠ¶æ³ã§ã¯ã€bar-tfstateãƒ•ã‚¡ã‚¤ãƒ«ã¯VPCã®çŠ¶æ…‹ã‚’æŒã£ã¦ãŠã‚Šã€ foo-tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã¯ bar-tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã—ã¦ã„ã‚‹ã¨ã—ã¾ã™ã€‚ãã®ãŸã‚ã€æƒ³å®šã•ã‚Œã‚‹çŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚å›³ã¯ä»¥ä¸‹ã®é€šã‚Šã«ãªã‚Šã¾ã™ã€‚ãªãŠã€ä¾å­˜æ–¹å‘ã¯çŠ¶æ³ã«ã‚ˆã£ã¦ç•°ãªã‚‹ã“ã¨ã‚’ã”å®¹èµ¦ãã ã•ã„ã€‚---title: terraform_remote_stateãƒ–ãƒ­ãƒƒã‚¯ã‚’ä½¿ç”¨ã—ãŸä¾å­˜é–¢ä¿‚---%%{init:{'theme':'default'}}%%flowchart TD    subgraph bucket        foo["foo-tfstate"]        bar["bar-tfstate"]    end    foo -. VPCã®çŠ¶æ…‹ã«ä¾å­˜ .-> barãƒªãƒã‚¸ãƒˆãƒªã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆtfstateãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²ã«åŸºã¥ã„ã¦ã€ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆä¾‹ã¯ä»¥ä¸‹ã®é€šã‚Šã«ãªã‚Šã¾ã™ã€‚ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼ã®è¨­è¨ˆæ–¹æ³•ã¯ã€åˆ†å‰²ãƒ‘ã‚¿ãƒ¼ãƒ³ ã§èª¬æ˜ã—ã¦ã„ã¾ã™ã€‚ğŸ­ repository/â”œâ”€â”€ ğŸ“‚ foo/â”‚    â”œâ”€â”€ backend.tf # fooã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    â”œâ”€â”€ remote_state.tf # terraform_remote_stateãƒ–ãƒ­ãƒƒã‚¯ã‚’ä½¿ç”¨ã—ã€bar-tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã™ã‚‹â”‚    â”œâ”€â”€ provider.tfâ”‚    ...â”‚â””â”€â”€ ğŸ“‚ bar/      â”œâ”€â”€ backend.tf # barã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹      â”œâ”€â”€ output.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ä¾å­˜ã•ã‚Œã‚‹      â”œâ”€â”€ provider.tf      ...foo-tfstateãƒ•ã‚¡ã‚¤ãƒ«ãŒbar-tfstateãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã™ã‚‹ãŸã‚ã«å¿…è¦ãªå®Ÿè£…ã¯ã€ä»¥ä¸‹ã®é€šã‚Šã«ãªã‚Šã¾ã™ã€‚# fooãƒªã‚½ãƒ¼ã‚¹ã®çŠ¶æ…‹ã¯ã€bar-tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã§æŒã¤resource "example" "foo" {  # fooãƒªã‚½ãƒ¼ã‚¹ã¯ã€bar-tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã®VPCã«ä¾å­˜ã™ã‚‹  vpc_id = data.terraform_remote_state.bar.outputs.bar_vpc_id  ...}# VPCã®çŠ¶æ…‹ã¯ã€bar-tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã§æŒã¤data "terraform_remote_state" "bar" { backend= "s3"  config = {    bucket = "bar-tfstate"    key    = "bar/terraform.tfstate"    region = "ap-northeast-1"  }}# VPCã®çŠ¶æ…‹ã¯ã€bar-tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã§æŒã¤output "bar_vpc_id" {  value = aws_vpc.bar.id}resource "aws_vpc" "bar" {  ...}ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆtfstateãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²ã«åŸºã¥ã„ã¦ã€ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å†…ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆä¾‹ã¯ä»¥ä¸‹ã®é€šã‚Šã«ãªã‚Šã¾ã™ã€‚ğŸª£ bucket/â”œâ”€â”€ ğŸ“‚ fooâ”‚    â””â”€â”€ terraform.tfstate # fooã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤â”‚â””â”€â”€ ğŸ“‚ bar      â””â”€â”€ terraform.tfstate # barã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤AWSãƒªã‚½ãƒ¼ã‚¹åˆ¥ã®dataãƒ–ãƒ­ãƒƒã‚¯ã®å ´åˆAWSãƒªã‚½ãƒ¼ã‚¹åˆ¥ã®dataãƒ–ãƒ­ãƒƒã‚¯ã«ã‚ˆã‚‹ä¾å­˜dataãƒ–ãƒ­ãƒƒã‚¯ã«ã¯ã€ä»¥ä¸‹ã®ãƒ¡ãƒªãƒ‡ãƒ¡ãŒã‚ã‚Šã¾ã™ã€‚ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ç‰¹æ€§  ãƒ¡ãƒªãƒƒãƒˆ â­•ï¸                                                                                                                                     ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ Ã—                                                   å¯èª­æ€§                 ä¾å­˜å…ˆã®AWSãƒªã‚½ãƒ¼ã‚¹ãŒã‚ã‹ã‚Šã‚„ã™ã„ã€‚                                                                                                             -                                                                  æ‹¡å¼µæ€§                 -                                                                                                                                               ä¾å­˜å…ˆã®AWSãƒªã‚½ãƒ¼ã‚¹åˆ¥ã«dataãƒ–ãƒ­ãƒƒã‚¯ãŒå¿…è¦ã§ã‚ã‚‹ã€‚                ä¿å®ˆæ€§                 ä¾å­˜å…ˆã¨ä¾å­˜å…ƒã®é–“ã§Terraformã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«å·®ãŒã‚ã£ã¦ã‚‚ã€tfstateãƒ•ã‚¡ã‚¤ãƒ«é–“ã§ç›´æ¥çš„ã«ä¾å­˜ã™ã‚‹ã‚ã‘ã§ã¯ãªã„ãŸã‚ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³å·®ã®å½±éŸ¿ã‚’å—ã‘ãªã„ã€‚  -                                                   ä»Šå›ã¯ä½¿ç”¨ã—ã¾ã›ã‚“ãŒã€ä¾å­˜é–¢ä¿‚ã®ä»–ã®å®šç¾©æ–¹æ³•ã¨ã—ã¦ã€AWSãƒªã‚½ãƒ¼ã‚¹åˆ¥ã®dataãƒ–ãƒ­ãƒƒã‚¯ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã¯ã€tfstateãƒ•ã‚¡ã‚¤ãƒ«ãŒè‡ªèº«ä»¥å¤– (ä¾‹ï¼šã‚³ãƒ³ã‚½ãƒ¼ãƒ«ç”»é¢ã€ä»–ã®tfstateãƒ•ã‚¡ã‚¤ãƒ«) ã§ä½œæˆã•ã‚ŒãŸAWSãƒªã‚½ãƒ¼ã‚¹ã®çŠ¶æ…‹ã«ä¾å­˜ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã§ãã¾ã™ã€‚terraform_remote_stateãƒ–ãƒ­ãƒƒã‚¯ã¨ã¯ç•°ãªã‚Šã€ç›´æ¥çš„ã«ã¯tfstateãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã—ã¾ã›ã‚“ã€‚dataãƒ–ãƒ­ãƒƒã‚¯ã®å ´åˆã¯ã€å®Ÿéš›ã®AWSãƒªã‚½ãƒ¼ã‚¹ã®çŠ¶æ…‹ã«ä¾å­˜ã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€é–“æ¥çš„ã«AWSãƒªã‚½ãƒ¼ã‚¹ã®tfstateãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚Data Sources - Configuration Language | Terraform | HashiCorp DeveloperçŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚å›³ä¾‹ãˆã°ã€dataãƒ–ãƒ­ãƒƒã‚¯ã‚‚åŒæ§˜ã«ã—ã¦ã€AWSãƒªã‚½ãƒ¼ã‚¹ã‹ã‚‰ãªã‚‹ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã‚’ã„ãã¤ã‹ã®tfstateãƒ•ã‚¡ã‚¤ãƒ« (foo-tfstateã€bar-tfstate) ã«åˆ†å‰²ã—ãŸã¨ä»®å®šã—ã¾ã™ã€‚ã“ã“ã§ä»®å®šã—ãŸçŠ¶æ³ã§ã¯ã€bar-tfstateãƒ•ã‚¡ã‚¤ãƒ«ã¯VPCã®çŠ¶æ…‹ã‚’æŒã£ã¦ãŠã‚Šã€ foo-tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã¯ bar-tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã—ã¦ã„ã‚‹ã¨ã—ã¾ã™ã€‚æƒ³å®šã•ã‚Œã‚‹çŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚å›³ã¯ä»¥ä¸‹ã®é€šã‚Šã«ãªã‚Šã¾ã™ã€‚ãªãŠã€ä¾å­˜æ–¹å‘ã¯çŠ¶æ³ã«ã‚ˆã£ã¦ç•°ãªã‚‹ã“ã¨ã‚’ã”å®¹èµ¦ãã ã•ã„ã€‚---title: dataãƒ–ãƒ­ãƒƒã‚¯ã‚’ä½¿ç”¨ã—ãŸä¾å­˜é–¢ä¿‚---%%{init:{'theme':'default'}}%%flowchart TD    subgraph bucket        foo["foo-tfstate"]        bar["bar-tfstate"]    end    foo -. VPCã®çŠ¶æ…‹ã«ä¾å­˜ .-> barãƒªãƒã‚¸ãƒˆãƒªã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆã¯ã€tfstateãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²ã«åŸºã¥ã„ã¦ã€ä»¥ä¸‹ã®é€šã‚Šã«ãªã‚Šã¾ã™ã€‚ğŸ­ repository/â”œâ”€â”€ ğŸ“‚ foo/â”‚    â”œâ”€â”€ backend.tf # fooã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    â”œâ”€â”€ data.tf # dataãƒ–ãƒ­ãƒƒã‚¯ã‚’ä½¿ç”¨ã—ã€bar-tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã™ã‚‹â”‚    â”œâ”€â”€ provider.tfâ”‚    ...â”‚â””â”€â”€ ğŸ“‚ bar/      â”œâ”€â”€ backend.tf # barã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹      â”œâ”€â”€ provider.tf      ...foo-tfstateãƒ•ã‚¡ã‚¤ãƒ«ãŒbar-tfstateãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã™ã‚‹ãŸã‚ã«å¿…è¦ãªå®Ÿè£…ã¯ã€ä»¥ä¸‹ã®é€šã‚Šã«ãªã‚Šã¾ã™ã€‚# fooãƒªã‚½ãƒ¼ã‚¹ã®çŠ¶æ…‹ã¯ã€foo-tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã§æŒã¤resource "example" "foo" {  # fooãƒªã‚½ãƒ¼ã‚¹ã¯ã€bar-tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã®VPCã«ä¾å­˜ã™ã‚‹  vpc_id     = data.aws_vpc.bar.id}# VPCã®çŠ¶æ…‹ã¯ã€bar-tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã§æŒã¤data "aws_vpc" "bar" {  filter {    name   = "tag:Name"    values = ["<bar-tfstateãŒæŒã¤VPCã®åå‰>"]  }}ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆtfstateãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²ã«åŸºã¥ã„ã¦ã€ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å†…ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆä¾‹ã¯ä»¥ä¸‹ã®é€šã‚Šã«ãªã‚Šã¾ã™ã€‚ğŸª£ bucket/â”œâ”€â”€ ğŸ“‚ fooâ”‚    â””â”€â”€ terraform.tfstate # fooã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤â”‚â””â”€â”€ ğŸ“‚ bar      â””â”€â”€ terraform.tfstate # barã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤06. tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã®åˆ†å‰²ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚ªã‚¹ã‚¹ãƒ¡ãªè¨­è¨ˆã®ä¸€è¦§å‰è¿°ã®é€šã‚Šã€tfstateãƒ•ã‚¡ã‚¤ãƒ«ã®åˆ†å‰²ã®å¢ƒç•Œã¯ã€ã€ä»–ã®çŠ¶æ…‹ã«ã§ãã‚‹ã ã‘ä¾å­˜ã—ãªã„ãƒªã‚½ãƒ¼ã‚¹ã®é–¢ä¿‚ã€ã‹ã‚‰è¦‹ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚åˆ†å‰²ã—ã™ãã‚‹ã¨ terraform_remote_stateãƒ–ãƒ­ãƒƒã‚¯åœ°ç„ ã«ãªã‚‹ãŸã‚ã€ç´°ã‹ã™ããšç²—ã™ããªã„é©åˆ‡ãªå¢ƒç•Œã‚’è¦‹ã¤ã‘ã¦ã„ãã¾ã—ã‚‡ã†ã€‚ä»Šå›ã¯ã€ç§ãŒè€ƒãˆã‚‹åˆ†å‰²ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ã„ãã¤ã‹ç´¹ä»‹ã—ã¾ã™ã€‚å…¨ã¦ãŒå®Ÿç”¨çš„ãªãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ã„ã†ã‚ã‘ã§ãªã„ãŸã‚ã€ã‚ªã‚¹ã‚¹ãƒ¡ã™ã‚‹ã‚‚ã®ã‚’ â˜… ã¨ã—ã¦ã„ã¾ã™ã€‚å¿…é ˆãƒ»ä»»æ„    tfstateåˆ†å‰²ãƒ‘ã‚¿ãƒ¼ãƒ³å¤§åˆ†é¡    tfstateåˆ†å‰²ãƒ‘ã‚¿ãƒ¼ãƒ³å°åˆ†é¡ã‚ªã‚¹ã‚¹ãƒ¡    å¯¾å¿œã™ã‚‹ãƒªãƒã‚¸ãƒˆãƒªæ§‹æˆ ğŸ­    å¯¾å¿œã™ã‚‹ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰æ§‹æˆ ğŸª£  å¿…é ˆ    ä¸Šå±¤    ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåˆ¥    â˜…â˜…    ãƒªãƒã‚¸ãƒˆãƒªè‡ªä½“ã¾ãŸã¯ä¸Šå±¤ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼    ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰è‡ªä½“ã¾ãŸã¯ä¸Šå±¤ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼  ä¸‹å±¤å®Ÿè¡Œç’°å¢ƒåˆ¥    â˜…â˜…    ä¸‹å±¤ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼    ä¸‹å±¤ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼  ä»»æ„    ä¸­é–“å±¤    åŒã˜ãƒ†ãƒŠãƒ³ãƒˆå†…ã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆåˆ¥        ä¸­é–“å±¤ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼    ä¸­é–“å±¤ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼  é‹ç”¨ãƒãƒ¼ãƒ è²¬å‹™ç¯„å›²åˆ¥    â˜…  ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®ã‚µãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ¥    â˜…  AWSãƒªã‚½ãƒ¼ã‚¹ã®ç¨®é¡ã‚°ãƒ«ãƒ¼ãƒ—åˆ¥      AWSãƒªã‚½ãƒ¼ã‚¹ã®çŠ¶æ…‹ã®å¤‰æ›´é »åº¦ã‚°ãƒ«ãƒ¼ãƒ—åˆ¥      é‹ç”¨ãƒãƒ¼ãƒ è²¬å‹™ç¯„å›²åˆ¥ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®ã‚µãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ¥ã®çµ„ã¿åˆã‚ã›    â˜…  ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆã¨ã®é–¢ä¿‚ã«ã¤ã„ã¦ãƒªãƒã‚¸ãƒˆãƒªã®å ´åˆè¨˜äº‹å†…ã®ã“ã“ ã§ã€ãƒªãƒã‚¸ãƒˆãƒªå†…ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆã¯tfstateãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²ã«åŸºã¥ã„ã¦è¨­è¨ˆã™ã‚‹ã¹ãã€ã¨ã„ã†èª¬æ˜ã‚’ã—ã¾ã—ãŸã€‚tfstateãƒ•ã‚¡ã‚¤ãƒ«ã®åˆ†å‰²ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ã€ä¸Šå±¤/ä¸‹å±¤/ä¸­é–“å±¤ ã®å±¤ã«å¤§åˆ¥ã§ãã¾ã™ã€‚ã“ã‚Œã‚‰ã®å±¤ã¯ã€ä»¥ä¸‹ã®é€šã‚Šãƒªãƒã‚¸ãƒˆãƒªè‡ªä½“ãƒ»ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆã®è¨­è¨ˆæ–¹æ³•ã«å½±éŸ¿ã—ã¾ã™ã€‚# ãƒªãƒã‚¸ãƒˆãƒªè‡ªä½“ã‚’åˆ†å‰²ã™ã‚‹å ´åˆğŸ­ ä¸Šå±¤/â”œâ”€â”€ ğŸ“‚ ä¸­é–“å±¤/â”‚    â”œâ”€â”€ ğŸ“‚ ä¸‹å±¤/â”‚    â”‚    â”œâ”€â”€ backend.tfvars # åˆ†å‰²ã•ã‚ŒãŸ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    â”‚    ...â”‚    â”‚...# ãƒªãƒã‚¸ãƒˆãƒªå†…ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’åˆ†å‰²ã™ã‚‹å ´åˆğŸ­ ãƒªãƒã‚¸ãƒˆãƒª/â”œâ”€â”€ ğŸ“‚ ä¸Šå±¤/â”‚    â”œâ”€â”€ ğŸ“‚ ä¸­é–“å±¤/â”‚    â”‚    â”œâ”€â”€ ğŸ“‚ ä¸‹å±¤/â”‚    â”‚    â”‚    â”œâ”€â”€ backend.tfvars # åˆ†å‰²ã•ã‚ŒãŸ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    â”‚    â”‚    ...â”‚    â”‚    â”‚...ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®å ´åˆè¨˜äº‹å†…ã®ã“ã“ ã§ã€ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã«ã¤ã„ã¦ã‚‚è¨€åŠã—ã¾ã—ãŸã€‚ã“ã‚Œã‚‰ã®å±¤ã¯ã€ä»¥ä¸‹ã®é€šã‚Šãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰è‡ªä½“ãƒ»ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆã®è¨­è¨ˆæ–¹æ³•ã«å½±éŸ¿ã—ã¾ã™ã€‚# ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰è‡ªä½“ã‚’åˆ†å‰²ã™ã‚‹å ´åˆğŸª£ ä¸Šå±¤/â”œâ”€â”€ ğŸ“‚ ä¸­é–“å±¤/â”‚    â”œâ”€â”€ ğŸ“‚ ä¸‹å±¤/â”‚    â”‚    â””â”€â”€ terraform.tfstate # åˆ†å‰²ã•ã‚ŒãŸçŠ¶æ…‹ã‚’æŒã¤â”‚    â”‚â”‚    â”‚...# ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å†…ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’åˆ†å‰²ã™ã‚‹å ´åˆğŸª£ bucket/â”œâ”€â”€ ğŸ“‚ ä¸Šå±¤/â”‚    â”œâ”€â”€ ğŸ“‚ ä¸­é–“å±¤/â”‚    â”‚    â”œâ”€â”€ ğŸ“‚ ä¸‹å±¤/â”‚    â”‚    â”‚    â””â”€â”€ terraform.tfstate # åˆ†å‰²ã•ã‚ŒãŸçŠ¶æ…‹ã‚’æŒã¤â”‚    â”‚    â”‚â”‚    â”‚    â”‚...07. ä¸Šå±¤ã®åˆ†å‰² (å¿…é ˆ)ä¸Šå±¤ã®åˆ†å‰²ã«ã¤ã„ã¦ä¸Šå±¤ã®åˆ†å‰²ã¯ å¿…é ˆ ã§ã™ã€‚Terraformã«æºã‚ã‚‹ç®¡ç†è€…ã®æ•°ãŒå°‘ãªãã¦ã‚‚æ¡ç”¨ã—ãŸæ–¹ãŒã‚ˆã„ã§ã™ã€‚tfstateãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‘ã‚¿ãƒ¼ãƒ³ã«å¿œã˜ã¦åˆ†å‰²ã—ã€ã“ã‚Œã«åŸºã¥ã„ã¦ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼ãƒ»ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚‚è¨­è¨ˆã—ã¾ã—ã‚‡ã†ã€‚ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåˆ¥ - â˜…â˜…ã“ã®åˆ†å‰²æ–¹æ³•ã«ã¤ã„ã¦ä¸Šå±¤åˆ†å‰²ã®ä¸­ã§ã‚‚ã€åŸºæœ¬çš„ãªæ–¹æ³•ã®1ã¤ã§ã™ã€‚ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåˆ¥ã«tfstateãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ†å‰²ã—ã€ä¸Šå±¤ã‚‚ã“ã‚Œã«åŸºã¥ã„ã¦è¨­è¨ˆã—ã¾ã™ã€‚ã“ã®åˆ†å‰²æ–¹æ³•ã«ã‚ˆã‚Šã€å„ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®ç®¡ç†è€…ãŒäº’ã„ã«å½±éŸ¿ã‚’å—ã‘ãšã«ã€terraformã‚³ãƒãƒ³ãƒ‰ã®çµæœã‚’å¾—ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚tfstateãƒ•ã‚¡ã‚¤ãƒ«ã§çŠ¶æ…‹ã‚’ç®¡ç†ã›ã–ã‚‹ã‚’å¾—ãªã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚ä¾‹ãˆã°ã€Kubernetesã®ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã¯ã€EKSã¨åŒã˜tfstateãƒ•ã‚¡ã‚¤ãƒ«ã§ç®¡ç†ã—ãŸæ–¹ãŒã‚ˆã„ã§ã™ğŸ‘Terraform Registryã€ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåˆ¥ã€‘çŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚å›³ä¾‹ãˆã°ã€ä»¥ä¸‹ã®ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’ä½¿ç”¨ã—ãŸã„çŠ¶æ³ã¨ä»®å®šã—ã¾ã™ã€‚ä¸»è¦ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ (AWS)ã‚¢ãƒ—ãƒª/ã‚¤ãƒ³ãƒ•ãƒ©ç›£è¦–ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ (Datadog)ã‚¸ãƒ§ãƒ–ç›£è¦–ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ (Healthchecks)ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆç®¡ç†ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ (PagerDuty)ã“ã“ã§ä»®å®šã—ãŸçŠ¶æ³ã§ã¯ã€å„ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«é–“ã§çŠ¶æ…‹ãŒç›¸äº’ã«ä¾å­˜ã—ã¦ã„ã‚‹ã¨ã—ã¾ã™ã€‚AWSãƒªã‚½ãƒ¼ã‚¹é–“ã®ç›¸äº’ä¾å­˜ã§ã¯ãªã„ãŸã‚ã€å¾ªç’°å‚ç…§ã¯èµ·ã“ã‚Šã¾ã›ã‚“ã€‚ãã®ãŸã‚ã€æƒ³å®šã•ã‚Œã‚‹çŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚å›³ã¯ä»¥ä¸‹ã®é€šã‚Šã«ãªã‚Šã¾ã™ã€‚ãªãŠã€ä¾å­˜æ–¹å‘ã¯çŠ¶æ³ã«ã‚ˆã£ã¦ç•°ãªã‚‹ã“ã¨ã‚’ã”å®¹èµ¦ãã ã•ã„ã€‚---title: ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåˆ¥---%%{init:{'theme':'default'}}%%flowchart LR    subgraph PagerDuty        pagerDuty["tfstate"]    end    subgraph Healthchecks        healthchecks["tfstate"]    end    subgraph Datadog        datadog["tfstate"]    end    subgraph AWS        aws["tfstate"]    end    aws -...-> datadog    aws -...-> healthchecks    aws -...-> pagerDuty    datadog -...-> aws    healthchecks -...-> aws    pagerDuty -...-> awsã€ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåˆ¥ã€‘ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆâ–¼ ç•°ãªã‚‹ãƒªãƒã‚¸ãƒˆãƒªã®å ´åˆãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåˆ¥ã«åˆ†å‰²ã—ãŸtfstateãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã€ç•°ãªã‚‹ãƒªãƒã‚¸ãƒˆãƒªã§ç®¡ç†ã—ã¾ã™ã€‚ä¾‹ãˆã°ã€tfstateãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²ã«åŸºã¥ã„ã¦ã€ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆä¾‹ã¯ä»¥ä¸‹ã®é€šã‚Šã«ãªã‚Šã¾ã™ã€‚å‰è¿°ã®ä¾å­˜é–¢ä¿‚å›³ã®çŠ¶æ³ã¨ä»®å®šã—ã¾ã™ã€‚ğŸ­ aws-repository/â”œâ”€â”€ backend.tf # AWSã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”œâ”€â”€ output.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ä¾å­˜ã•ã‚Œã‚‹â”œâ”€â”€ remote_state.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã™ã‚‹â”œâ”€â”€ provider.tf...ğŸ­ datadog-repository/â”œâ”€â”€ backend.tf # Datadogã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”œâ”€â”€ output.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ä¾å­˜ã•ã‚Œã‚‹â”œâ”€â”€ remote_state.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã™ã‚‹â”œâ”€â”€ provider.tf...ğŸ­ healthchecks-repository/â”œâ”€â”€ backend.tf # Healthchecksã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”œâ”€â”€ output.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ä¾å­˜ã•ã‚Œã‚‹â”œâ”€â”€ remote_state.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã™ã‚‹â”œâ”€â”€ provider.tf...ğŸ­ pagerduty-repository/â”œâ”€â”€ backend.tf # PagerDutyã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”œâ”€â”€ output.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ä¾å­˜ã•ã‚Œã‚‹â”œâ”€â”€ remote_state.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã™ã‚‹â”œâ”€â”€ provider.tf...â–¼ åŒã˜ãƒªãƒã‚¸ãƒˆãƒªã®å ´åˆãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåˆ¥ã«åˆ†å‰²ã—ãŸtfstateãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã€åŒã˜ãƒªãƒã‚¸ãƒˆãƒªã§ç®¡ç†ã—ã¾ã™ã€‚ä¾‹ãˆã°ã€tfstateãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²ã«åŸºã¥ã„ã¦ã€ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆä¾‹ã¯ä»¥ä¸‹ã®é€šã‚Šã«ãªã‚Šã¾ã™ã€‚å‰è¿°ã®ä¾å­˜é–¢ä¿‚å›³ã®çŠ¶æ³ã¨ä»®å®šã—ã¾ã™ã€‚ğŸ­ repository/â”œâ”€â”€ ğŸ“‚ aws/â”‚    â”œâ”€â”€ backend.tf # AWSã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    â”œâ”€â”€ output.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ä¾å­˜ã•ã‚Œã‚‹â”‚    â”œâ”€â”€ remote_state.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã™ã‚‹â”‚    â”œâ”€â”€ provider.tfâ”‚    ...â”‚â”œâ”€â”€ ğŸ“‚ datadog/â”‚    â”œâ”€â”€ backend.tf # Datadogã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    â”œâ”€â”€ output.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ä¾å­˜ã•ã‚Œã‚‹â”‚    â”œâ”€â”€ remote_state.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã™ã‚‹â”‚    â”œâ”€â”€ provider.tfâ”‚    ...â”‚â”œâ”€â”€ ğŸ“‚ healthchecks/â”‚    â”œâ”€â”€ backend.tf # Healthchecksã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    â”œâ”€â”€ output.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ä¾å­˜ã•ã‚Œã‚‹â”‚    â”œâ”€â”€ remote_state.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã™ã‚‹â”‚    â”œâ”€â”€ provider.tfâ”‚    ...â”‚â””â”€â”€ ğŸ“‚ pagerduty/      â”œâ”€â”€ backend.tf # PagerDutyã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹      â”œâ”€â”€ output.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ä¾å­˜ã•ã‚Œã‚‹      â”œâ”€â”€ remote_state.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã™ã‚‹      â”œâ”€â”€ provider.tf      ...ã€ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåˆ¥ã€‘ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆâ–¼ ç•°ãªã‚‹ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®å ´åˆãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåˆ¥ã«åˆ†å‰²ã—ãŸtfstateãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã€ç•°ãªã‚‹ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã§ç®¡ç†ã—ã¾ã™ã€‚ä¾‹ãˆã°ã€tfstateãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²ã«åŸºã¥ã„ã¦ã€ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å†…ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆä¾‹ã¯ä»¥ä¸‹ã®é€šã‚Šã«ãªã‚Šã¾ã™ã€‚å‰è¿°ã®ä¾å­˜é–¢ä¿‚å›³ã®çŠ¶æ³ã¨ä»®å®šã—ã¾ã™ã€‚ğŸª£ aws-bucket/â”‚â””â”€â”€ terraform.tfstate # AWSã®çŠ¶æ…‹ã‚’æŒã¤ğŸª£ datadog-bucket/â”‚â””â”€â”€ terraform.tfstate # Datadogã®çŠ¶æ…‹ã‚’æŒã¤ğŸª£ healthchecks-bucket/â”‚â””â”€â”€ terraform.tfstate # Healthchecksã®çŠ¶æ…‹ã‚’æŒã¤ğŸª£ pagerduty-bucket/â”‚â””â”€â”€ terraform.tfstate # PagerDutyã®çŠ¶æ…‹ã‚’æŒã¤â–¼ åŒã˜ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®å ´åˆãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåˆ¥ã«åˆ†å‰²ã—ãŸtfstateãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã€åŒã˜ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã§ç®¡ç†ã—ã¾ã™ã€‚ä¾‹ãˆã°ã€tfstateãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²ã«åŸºã¥ã„ã¦ã€ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å†…ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆä¾‹ã¯ä»¥ä¸‹ã®é€šã‚Šã«ãªã‚Šã¾ã™ã€‚å‰è¿°ã®ä¾å­˜é–¢ä¿‚å›³ã®çŠ¶æ³ã¨ä»®å®šã—ã¾ã™ã€‚ğŸª£ bucket/â”œâ”€â”€ ğŸ“‚ awsâ”‚    â””â”€â”€ terraform.tfstate # AWSã®çŠ¶æ…‹ã‚’æŒã¤â”‚â”œâ”€â”€ ğŸ“‚ datadogâ”‚    â””â”€â”€ terraform.tfstate # Datadogã®çŠ¶æ…‹ã‚’æŒã¤â”‚â”œâ”€â”€ ğŸ“‚ healthchecksâ”‚    â””â”€â”€ terraform.tfstate # Healthchecksã®çŠ¶æ…‹ã‚’æŒã¤â”‚â””â”€â”€ ğŸ“‚ pagerduty      â””â”€â”€ terraform.tfstate # PagerDutyã®çŠ¶æ…‹ã‚’æŒã¤08. ä¸‹å±¤ã®åˆ†å‰² (å¿…é ˆ)ä¸‹å±¤ã®åˆ†å‰²ã«ã¤ã„ã¦ä¸‹å±¤ã®åˆ†å‰²ã¯ å¿…é ˆ ã§ã™ã€‚Terraformã«æºã‚ã‚‹ç®¡ç†è€…ã®æ•°ãŒå°‘ãªãã¦ã‚‚æ¡ç”¨ã—ãŸæ–¹ãŒã‚ˆã„ã§ã™ã€‚tfstateãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‘ã‚¿ãƒ¼ãƒ³ã«å¿œã˜ã¦åˆ†å‰²ã—ã€ã“ã‚Œã«åŸºã¥ã„ã¦ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼ãƒ»ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚‚è¨­è¨ˆã—ã¾ã—ã‚‡ã†ã€‚å®Ÿè¡Œç’°å¢ƒåˆ¥ - â˜…â˜…ã“ã®åˆ†å‰²æ–¹æ³•ã«ã¤ã„ã¦ä¸‹å±¤åˆ†å‰²ã®ä¸­ã§ã‚‚ã€åŸºæœ¬çš„ãªæ–¹æ³•ã®1ã¤ã§ã™ã€‚å®Ÿè¡Œç’°å¢ƒåˆ¥ã«tfstateãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ†å‰²ã—ã€ä¸‹å±¤ã‚‚ã“ã‚Œã«åŸºã¥ã„ã¦è¨­è¨ˆã—ã¾ã™ã€‚ã“ã®åˆ†å‰²æ–¹æ³•ã«ã‚ˆã‚Šã€å„å®Ÿè¡Œç’°å¢ƒã®ç®¡ç†è€…ãŒäº’ã„ã«å½±éŸ¿ã‚’å—ã‘ãšã«ã€terraformã‚³ãƒãƒ³ãƒ‰ã®çµæœã‚’å¾—ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚Terraform: Up & Running; Writing Infrastructure As CodeHow to manage Terraform state. A guide to file layout, isolation, andâ€¦ | by Yevgeniy Brikman | Gruntworkã€å®Ÿè¡Œç’°å¢ƒåˆ¥ã€‘çŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚å›³ä¾‹ãˆã°ã€ä»¥ä¸‹ã®å®Ÿè¡Œç’°å¢ƒã‚’æ§‹ç¯‰ã—ãŸã„çŠ¶æ³ã¨ä»®å®šã—ã¾ã™ã€‚Tesç’°å¢ƒ (æ¤œè¨¼ç’°å¢ƒ)Stgç’°å¢ƒ (ãƒ¦ãƒ¼ã‚¶ãƒ¼å—ã‘å…¥ã‚Œç’°å¢ƒ)Prdç’°å¢ƒ (æœ¬ç•ªç’°å¢ƒ)ã‹ã¤ã€ä»¥ä¸‹ã®ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’ä½¿ç”¨ã—ãŸã„çŠ¶æ³ã¨ä»®å®šã—ã¾ã™ã€‚ä¸»è¦ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ (AWS)ã‚¢ãƒ—ãƒª/ã‚¤ãƒ³ãƒ•ãƒ©ç›£è¦–ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ (Datadog)ã‚¸ãƒ§ãƒ–ç›£è¦–ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ (Healthchecks)ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆç®¡ç†ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ (PagerDuty)ã“ã“ã§ä»®å®šã—ãŸçŠ¶æ³ã§ã¯ã€å„å®Ÿè¡Œç’°å¢ƒã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã¯ä»–ã®å®Ÿè¡Œç’°å¢ƒã«ã¯ä¾å­˜ã—ã¦ã„ãªã„ã¨ã—ã¾ã™ã€‚ãã®ãŸã‚ã€æƒ³å®šã•ã‚Œã‚‹çŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚å›³ã¯ä»¥ä¸‹ã®é€šã‚Šã«ãªã‚Šã¾ã™ã€‚ãªãŠã€ä¾å­˜æ–¹å‘ã¯çŠ¶æ³ã«ã‚ˆã£ã¦ç•°ãªã‚‹ã“ã¨ã‚’ã”å®¹èµ¦ãã ã•ã„ã€‚---title: å®Ÿè¡Œç’°å¢ƒåˆ¥---%%{init:{'theme':'default'}}%%flowchart LR    subgraph PagerDuty        pagerDuty["tfstate"]    end    subgraph Healthchecks        healthchecks["tfstate"]    end    subgraph Datadog        datadog["tfstate"]    end    subgraph AWS        subgraph tes-bucket            tes["tfstate"]        end        subgraph stg-bucket            stg["tfstate"]        end        subgraph prd-bucket            prd["tfstate"]        end    end    tes -...-> datadog    tes -...-> healthchecks    tes -...-> pagerDuty    datadog -...-> tes    healthchecks -...-> tes    pagerDuty -...-> tesã€å®Ÿè¡Œç’°å¢ƒåˆ¥ã€‘ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆâ–¼ ç•°ãªã‚‹ãƒªãƒã‚¸ãƒˆãƒªã®å ´åˆãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåˆ¥ã«tfstateãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ†å‰²ã™ã‚‹ã“ã¨ã¯å¿…é ˆã¨ã—ã¦ã„ã‚‹ãŸã‚ã€ãã®ä¸Šã§ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆã‚’è€ƒãˆã¾ã™ã€‚ä¾‹ãˆã°ã€tfstateãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²ã«åŸºã¥ã„ã¦ã€ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆä¾‹ã¯ä»¥ä¸‹ã®é€šã‚Šã«ãªã‚Šã¾ã™ã€‚å‰è¿°ã®ä¾å­˜é–¢ä¿‚å›³ã®çŠ¶æ³ã¨ä»®å®šã—ã¾ã™ã€‚ğŸ­ aws-repository/â”œâ”€â”€ output.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ä¾å­˜ã•ã‚Œã‚‹â”œâ”€â”€ remote_state.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã™ã‚‹â”œâ”€â”€ provider.tfâ”œâ”€â”€ ğŸ“‚ tes/ # Tesç’°å¢ƒâ”‚    â”œâ”€â”€ backend.tfvars # AWSã®Tesç’°å¢ƒã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    ...â”‚â”œâ”€â”€ ğŸ“‚ stg/ # Stgç’°å¢ƒâ””â”€â”€ ğŸ“‚ prd/ # Prdç’°å¢ƒğŸ­ datadog-repository/â”œâ”€â”€ output.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ä¾å­˜ã•ã‚Œã‚‹â”œâ”€â”€ remote_state.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã™ã‚‹â”œâ”€â”€ provider.tfâ”œâ”€â”€ ğŸ“‚ tes/â”‚    â”œâ”€â”€ backend.tfvars # Datadogã®Tesç’°å¢ƒã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    ...â”‚â”œâ”€â”€ ğŸ“‚ stg/â””â”€â”€ ğŸ“‚ prd/ğŸ­ healthchecks-repository/â”œâ”€â”€ output.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ä¾å­˜ã•ã‚Œã‚‹â”œâ”€â”€ remote_state.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã™ã‚‹â”œâ”€â”€ provider.tfâ”œâ”€â”€ ğŸ“‚ tes/â”‚    â”œâ”€â”€ backend.tfvars # Healthchecsã®Tesç’°å¢ƒã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    ...â”‚â”œâ”€â”€ ğŸ“‚ stg/â””â”€â”€ ğŸ“‚ prd/ğŸ­ pagerduty-repository/â”œâ”€â”€ output.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ä¾å­˜ã•ã‚Œã‚‹â”œâ”€â”€ remote_state.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã™ã‚‹â”œâ”€â”€ provider.tfâ”œâ”€â”€ ğŸ“‚ tes/â”‚    â”œâ”€â”€ backend.tfvars # PagerDutyã®Tesç’°å¢ƒã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    ...â”‚â”œâ”€â”€ ğŸ“‚ stg/â””â”€â”€ ğŸ“‚ prd/â–¼ åŒã˜ãƒªãƒã‚¸ãƒˆãƒªã®å ´åˆãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåˆ¥ã«tfstateãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ†å‰²ã™ã‚‹ã“ã¨ã¯å¿…é ˆã¨ã—ã¦ã„ã‚‹ãŸã‚ã€ãã®ä¸Šã§ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆã‚’è€ƒãˆã¾ã™ã€‚ä¾‹ãˆã°ã€tfstateãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²ã«åŸºã¥ã„ã¦ã€ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆä¾‹ã¯ä»¥ä¸‹ã®é€šã‚Šã«ãªã‚Šã¾ã™ã€‚å‰è¿°ã®ä¾å­˜é–¢ä¿‚å›³ã®çŠ¶æ³ã¨ä»®å®šã—ã¾ã™ã€‚ğŸ­ repository/â”œâ”€â”€ ğŸ“‚ aws/â”‚    â”œâ”€â”€ output.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ä¾å­˜ã•ã‚Œã‚‹â”‚    â”œâ”€â”€ remote_state.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã™ã‚‹â”‚    â”œâ”€â”€ provider.tfâ”‚    â”œâ”€â”€ ğŸ“‚ tes/ # Tesç’°å¢ƒâ”‚    â”‚    â”œâ”€â”€ backend.tfvars # AWSã®Tesç’°å¢ƒã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    â”‚    ...â”‚    â”‚â”‚    â”œâ”€â”€ ğŸ“‚ stg/ # Stgç’°å¢ƒâ”‚    â””â”€â”€ ğŸ“‚ prd/ # Prdç’°å¢ƒâ”‚â”œâ”€â”€ ğŸ“‚ datadog/â”‚    â”œâ”€â”€ output.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ä¾å­˜ã•ã‚Œã‚‹â”‚    â”œâ”€â”€ remote_state.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã™ã‚‹â”‚    â”œâ”€â”€ provider.tfâ”‚    â”œâ”€â”€ ğŸ“‚ tes/â”‚    â”‚    â”œâ”€â”€ backend.tfvars # Datadogã®Tesç’°å¢ƒã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    â”‚    ...â”‚    â”‚â”‚    â”œâ”€â”€ ğŸ“‚ stg/â”‚    â””â”€â”€ ğŸ“‚ prd/â”‚â”œâ”€â”€ ğŸ“‚ healthchecks/â”‚    â”œâ”€â”€ output.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ä¾å­˜ã•ã‚Œã‚‹â”‚    â”œâ”€â”€ remote_state.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã™ã‚‹â”‚    â”œâ”€â”€ provider.tfâ”‚    â”œâ”€â”€ ğŸ“‚ tes/â”‚    â”‚    â”œâ”€â”€ backend.tfvars # Healthchecksã®Tesç’°å¢ƒã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    â”‚    ...â”‚    â”‚â”‚    â”œâ”€â”€ ğŸ“‚ stg/â”‚    â””â”€â”€ ğŸ“‚ prd/â”‚â””â”€â”€ ğŸ“‚ pagerduty/      â”œâ”€â”€ output.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ä¾å­˜ã•ã‚Œã‚‹      â”œâ”€â”€ remote_state.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã™ã‚‹      â”œâ”€â”€ provider.tf      â”œâ”€â”€ ğŸ“‚ tes/      â”‚    â”œâ”€â”€ backend.tfvars # PagerDutyã®Tesç’°å¢ƒã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹      â”‚    ...      â”‚      â”œâ”€â”€ ğŸ“‚ stg/      â””â”€â”€ ğŸ“‚ prd/ã€å®Ÿè¡Œç’°å¢ƒåˆ¥ã€‘ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆâ–¼ ç•°ãªã‚‹ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®å ´åˆå®Ÿè¡Œç’°å¢ƒåˆ¥ã«åˆ†å‰²ã—ãŸtfstateãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã€ç•°ãªã‚‹ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã§ç®¡ç†ã—ã¾ã™ã€‚tfstateãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²ã«åŸºã¥ã„ã¦ã€ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å†…ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆä¾‹ã¯ä»¥ä¸‹ã®é€šã‚Šã«ãªã‚Šã¾ã™ã€‚ä¾‹ãˆã°ã€å‰è¿°ã®ä¾å­˜é–¢ä¿‚å›³ã®çŠ¶æ³ã¨ä»®å®šã—ã¾ã™ã€‚ğŸª£ tes-aws-bucket/â”‚â””â”€â”€ terraform.tfstate # AWSã®Tesç’°å¢ƒã®çŠ¶æ…‹ã‚’æŒã¤ğŸª£ tes-datadog-bucket/â”‚â””â”€â”€ terraform.tfstate # Datadogã®Tesç’°å¢ƒã®çŠ¶æ…‹ã‚’æŒã¤ğŸª£ tes-healthchecks-bucket/â”‚â””â”€â”€ terraform.tfstate # Healthchecksã®Tesç’°å¢ƒã®çŠ¶æ…‹ã‚’æŒã¤ğŸª£ tes-pagerduty-bucket/â”‚â””â”€â”€ terraform.tfstate # PagerDutyã®Tesç’°å¢ƒã®çŠ¶æ…‹ã‚’æŒã¤â–¼ åŒã˜ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ x AWSã‚¢ã‚«ã‚¦ãƒ³ãƒˆåˆ¥ã«ç•°ãªã‚‹å®Ÿè¡Œç’°å¢ƒ ã®å ´åˆãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåˆ¥ã«åˆ†å‰²ã—ãŸtfstateãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã€åŒã˜ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã§ç®¡ç†ã—ã¾ã™ã€‚ã¾ãŸã€AWSã‚¢ã‚«ã‚¦ãƒ³ãƒˆåˆ¥ã«ç•°ãªã‚‹å®Ÿè¡Œç’°å¢ƒã‚’ä½œæˆã—ã¦ã„ã‚‹ã¨ä»®å®šã—ã¾ã™ã€‚ä¾‹ãˆã°ã€tfstateãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²ã«åŸºã¥ã„ã¦ã€ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å†…ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆä¾‹ã¯ä»¥ä¸‹ã®é€šã‚Šã«ãªã‚Šã¾ã™ã€‚å‰è¿°ã®ä¾å­˜é–¢ä¿‚å›³ã®çŠ¶æ³ã¨ä»®å®šã—ã¾ã™ã€‚# Tesç’°å¢ƒç”¨ãƒã‚±ãƒƒãƒˆã®å ´åˆğŸª£ tes-bucket/â”œâ”€â”€ ğŸ“‚ aws/â”‚    â””â”€â”€ terraform.tfstate # AWSã®Tesç’°å¢ƒã®çŠ¶æ…‹ã‚’æŒã¤â”‚â”œâ”€â”€ ğŸ“‚ datadog/â”‚    â””â”€â”€ terraform.tfstate # Datadogã®Tesç’°å¢ƒã®çŠ¶æ…‹ã‚’æŒã¤â”‚â”œâ”€â”€ ğŸ“‚ healthchecks/â”‚    â””â”€â”€ terraform.tfstate # Healthchecksã®Tesç’°å¢ƒã®çŠ¶æ…‹ã‚’æŒã¤â”‚â””â”€â”€ ğŸ“‚ pagerduty/      â””â”€â”€ terraform.tfstate # PagerDutyã®Tesç’°å¢ƒã®çŠ¶æ…‹ã‚’æŒã¤# Stgç’°å¢ƒç”¨ãƒã‚±ãƒƒãƒˆã®å ´åˆğŸª£ stg-bucket/â”‚...# Prdç’°å¢ƒç”¨ãƒã‚±ãƒƒãƒˆã®å ´åˆğŸª£ prd-bucket/â”‚...â–¼ åŒã˜ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ x å˜ä¸€ã®AWSã‚¢ã‚«ã‚¦ãƒ³ãƒˆå†…ã«å…¨ã¦ã®å®Ÿè¡Œç’°å¢ƒ ã®å ´åˆãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåˆ¥ã«åˆ†å‰²ã—ãŸtfstateãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã€åŒã˜ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã§ç®¡ç†ã—ã¾ã™ã€‚ã¾ãŸã€å˜ä¸€ã®AWSã‚¢ã‚«ã‚¦ãƒ³ãƒˆå†…ã«å…¨å®Ÿè¡Œç’°å¢ƒã‚’ä½œæˆã—ã¦ã„ã‚‹ã¨ã—ã¾ã™ã€‚ä¾‹ãˆã°ã€tfstateãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²ã«åŸºã¥ã„ã¦ã€ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å†…ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆä¾‹ã¯ä»¥ä¸‹ã®é€šã‚Šã«ãªã‚Šã¾ã™ã€‚å‰è¿°ã®ä¾å­˜é–¢ä¿‚å›³ã®çŠ¶æ³ã¨ä»®å®šã—ã¾ã™ã€‚ğŸª£ bucket/â”œâ”€â”€ ğŸ“‚ aws/â”‚    â”œâ”€â”€ ğŸ“‚ tes/ # Tesç’°å¢ƒâ”‚    â”‚    â””â”€â”€ terraform.tfstate # AWSã®Tesç’°å¢ƒã®çŠ¶æ…‹ã‚’æŒã¤â”‚    â”‚â”‚    â”œâ”€â”€ ğŸ“‚ stg/ # Stgç’°å¢ƒâ”‚    â””â”€â”€ ğŸ“‚ prd/ # Prdç’°å¢ƒâ”‚â”œâ”€â”€ ğŸ“‚ datadog/â”‚    â”œâ”€â”€ ğŸ“‚ tes/â”‚    â”‚    â””â”€â”€ terraform.tfstate # Datadogã®Tesç’°å¢ƒã®çŠ¶æ…‹ã‚’æŒã¤â”‚    â”‚â”‚    â”œâ”€â”€ ğŸ“‚ stg/â”‚    â””â”€â”€ ğŸ“‚ prd/â”‚â”œâ”€â”€ ğŸ“‚ healthchecks/â”‚    â”œâ”€â”€ ğŸ“‚ tes/â”‚    â”‚    â””â”€â”€ terraform.tfstate # Healthchecksã®Tesç’°å¢ƒã®çŠ¶æ…‹ã‚’æŒã¤â”‚    â”‚â”‚    â”œâ”€â”€ ğŸ“‚ stg/â”‚    â””â”€â”€ ğŸ“‚ prd/â”‚â””â”€â”€ ğŸ“‚ pagerduty/      â”œâ”€â”€ ğŸ“‚ tes/      â”‚    â””â”€â”€ terraform.tfstate # PagerDutyã®Tesç’°å¢ƒã®çŠ¶æ…‹ã‚’æŒã¤      â”‚      â”œâ”€â”€ ğŸ“‚ stg/      â””â”€â”€ ğŸ“‚ prd/09. ä¸­é–“å±¤ã®åˆ†å‰² (ä»»æ„)ä¸­é–“å±¤ã®åˆ†å‰²ã«ã¤ã„ã¦ä¸­é–“å±¤ã®åˆ†å‰²ã¯ ä»»æ„ ã§ã™ã€‚Terraformã«æºã‚ã‚‹ç®¡ç†è€…ãŒå¤šããªã‚‹ã»ã©ã€åŠ¹åŠ›ã‚’ç™ºæ®ã—ã¾ã™ã€‚åŒã˜ãƒ†ãƒŠãƒ³ãƒˆã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆåˆ¥ã“ã®åˆ†å‰²æ–¹æ³•ã«ã¤ã„ã¦åŒã˜ãƒ†ãƒŠãƒ³ãƒˆ (ä¾‹ï¼šåŒã˜AWSã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®åŒã˜VPC) å†…ã«è¤‡æ•°ã®å°ã•ãªãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãŒã‚ã‚‹å ´åˆã€ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆåˆ¥ã§tfstateãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ†å‰²ã—ã€ä¸­é–“å±¤ã‚‚ã“ã‚Œã«åŸºã¥ã„ã¦è¨­è¨ˆã—ã¾ã™ã€‚ã“ã“ã§ã„ã†ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã¯ã€ã‚¢ãƒ—ãƒªã‚’å‹•ã‹ã™ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ  (ä¾‹ï¼šEKSã€ECSã€AppRunnerã€EC2) ã¨ãã‚Œã‚’å–ã‚Šå·»ãAWSãƒªã‚½ãƒ¼ã‚¹ã‚’æŒ‡ã—ã¦ã„ã¾ã™ã€‚ã“ã®åˆ†å‰²æ–¹æ³•ã«ã‚ˆã‚Šã€å„ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®ç®¡ç†è€…ãŒäº’ã„ã«å½±éŸ¿ã‚’å—ã‘ãšã«ã€terraformã‚³ãƒãƒ³ãƒ‰ã®çµæœã‚’å¾—ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚AWSã®è¨­è¨ˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã¨ã—ã¦ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã”ã¨ã«VPCã‚’åˆ†ã‘ãŸæ–¹ãŒã‚ˆã„ãŸã‚ã€ã“ã®åˆ†å‰²æ–¹æ³•ã‚’æ¡ç”¨ã™ã‚‹ã“ã¨ã¯å°‘ãªã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ãŸã ç¾å®Ÿã¨ã—ã¦ã€å„ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®ä½¿ç”¨ã™ã‚‹IPã‚¢ãƒ‰ãƒ¬ã‚¹æ•°ãŒå°‘ãªãã€ã¾ãŸãƒ—ãƒ­ãƒ€ã‚¯ãƒˆåˆ¥ã«VPCã‚’åˆ†å‰²ã™ã‚‹ã®ãŒç…©é›‘ã¨ã„ã†ç¾å ´ã¯ã‚ã‚Šã¾ã™ğŸ˜­ã€åŒã˜ãƒ†ãƒŠãƒ³ãƒˆã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆåˆ¥ã€‘çŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚å›³ä¾‹ãˆã°ã€ä»¥ä¸‹ã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã«åˆ†å‰²ã—ãŸçŠ¶æ³ã¨ä»®å®šã—ã¾ã™ã€‚fooãƒ—ãƒ­ãƒ€ã‚¯ãƒˆbarãƒ—ãƒ­ãƒ€ã‚¯ãƒˆå…±æœ‰networkã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ (ä¾‹ï¼šVPCã€Route53)ã“ã“ã§ä»®å®šã—ãŸçŠ¶æ³ã§ã¯ã€å„ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¾å­˜ã¯ä¸€æ–¹å‘æœ€çµ‚çš„ã«ã€å…±æœ‰networkã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã—ã¦ã„ã‚‹ã¨ã—ã¾ã™ã€‚ãã®ãŸã‚ã€æƒ³å®šã•ã‚Œã‚‹çŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚å›³ã¯ä»¥ä¸‹ã®é€šã‚Šã«ãªã‚Šã¾ã™ã€‚ãªãŠã€ä¾å­˜æ–¹å‘ã¯çŠ¶æ³ã«ã‚ˆã£ã¦ç•°ãªã‚‹ã“ã¨ã‚’ã”å®¹èµ¦ãã ã•ã„ã€‚---title: åŒã˜ãƒ†ãƒŠãƒ³ãƒˆã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆåˆ¥---%%{init:{'theme':'default'}}%%flowchart TB    subgraph AWS        subgraph tes-bucket            foo-product["foo-product-tfstate<br>(ã‚¢ãƒ—ãƒªã‚’å‹•ã‹ã™ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®AWSãƒªã‚½ãƒ¼ã‚¹)"]-..->network            bar-product["bar-product-tfstate<br>(ã‚¢ãƒ—ãƒªã‚’å‹•ã‹ã™ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®AWSãƒªã‚½ãƒ¼ã‚¹)"]-..->network            network["network-tfstate<br>(Route53, VPC)"]        end    subgraph stg-bucket        stg["tfstate"]    end    subgraph prd-bucket        prd["tfstate"]    end    endã€åŒã˜ãƒ†ãƒŠãƒ³ãƒˆã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆåˆ¥ã€‘ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆâ–¼ ç•°ãªã‚‹ãƒªãƒã‚¸ãƒˆãƒªã®å ´åˆã“ã®å ´åˆã§ã¯ã€åŒã˜ãƒ†ãƒŠãƒ³ãƒˆã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆåˆ¥ã«åˆ†å‰²ã—ãŸtfstateãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã€ç•°ãªã‚‹ãƒªãƒã‚¸ãƒˆãƒªã§ç®¡ç†ã—ã¾ã™ã€‚ä¾‹ãˆã°ã€tfstateãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²ã«åŸºã¥ã„ã¦ã€ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆä¾‹ã¯ä»¥ä¸‹ã®é€šã‚Šã«ãªã‚Šã¾ã™ã€‚å‰è¿°ã®ä¾å­˜é–¢ä¿‚å›³ã®çŠ¶æ³ã¨ä»®å®šã—ã¾ã™ã€‚# fooãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒªãƒã‚¸ãƒˆãƒªğŸ­ aws-foo-product-repository/â”œâ”€â”€ provider.tfâ”œâ”€â”€ remote_state.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã™ã‚‹â”œâ”€â”€ ğŸ“‚ tes/ # Tesç’°å¢ƒâ”‚    â”œâ”€â”€ backend.tfvars # fooãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    ...â”‚â”œâ”€â”€ ğŸ“‚ stg/ # Stgç’°å¢ƒâ”‚    â”œâ”€â”€ backend.tfvars # fooãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    ...â”‚â””â”€â”€ ğŸ“‚ prd/ # Prdç’°å¢ƒ      â”œâ”€â”€ backend.tfvars # fooãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹      ...# barãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒªãƒã‚¸ãƒˆãƒªğŸ­ aws-bar-product-repository/â”œâ”€â”€ provider.tfâ”œâ”€â”€ remote_state.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã™ã‚‹â”œâ”€â”€ ğŸ“‚ tes/ # Tesç’°å¢ƒâ”‚    â”œâ”€â”€ backend.tfvars # barãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    ...â”‚â”œâ”€â”€ ğŸ“‚ stg/ # Stgç’°å¢ƒâ”‚    â”œâ”€â”€ backend.tfvars # barãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    ...â”‚â””â”€â”€ ğŸ“‚ prd/ # Prdç’°å¢ƒ      â”œâ”€â”€ backend.tfvars # barãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹      ...# å…±æœ‰networkã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒªãƒã‚¸ãƒˆãƒªğŸ­ aws-network-repository/â”œâ”€â”€ provider.tfâ”œâ”€â”€ output.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ä¾å­˜ã•ã‚Œã‚‹â”œâ”€â”€ route53.tfâ”œâ”€â”€ vpc.tfâ”œâ”€â”€ ğŸ“‚ tes/ # Tesç’°å¢ƒâ”‚    â”œâ”€â”€ backend.tfvars # networkã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    ...â”‚â”œâ”€â”€ ğŸ“‚ stg/ # Stgç’°å¢ƒâ”‚    â”œâ”€â”€ backend.tfvars # networkã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    ...â”‚â””â”€â”€ ğŸ“‚ prd/ # Prdç’°å¢ƒ      â”œâ”€â”€ backend.tfvars # networkã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹      ...â–¼ åŒã˜ãƒªãƒã‚¸ãƒˆãƒªã®å ´åˆã“ã®å ´åˆã§ã¯ã€åŒã˜ãƒ†ãƒŠãƒ³ãƒˆã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆåˆ¥ã«åˆ†å‰²ã—ãŸtfstateãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã€åŒã˜ãƒªãƒã‚¸ãƒˆãƒªã§ç®¡ç†ã—ã¾ã™ã€‚ä¾‹ãˆã°ã€tfstateãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²ã«åŸºã¥ã„ã¦ã€ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆä¾‹ã¯ä»¥ä¸‹ã®é€šã‚Šã«ãªã‚Šã¾ã™ã€‚å‰è¿°ã®ä¾å­˜é–¢ä¿‚å›³ã®çŠ¶æ³ã¨ä»®å®šã—ã¾ã™ã€‚ğŸ­ aws-repository/â”œâ”€â”€ ğŸ“‚ foo-product/â”‚    â”œâ”€â”€ provider.tfâ”‚    â”œâ”€â”€ remote_state.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã™ã‚‹â”‚    â”œâ”€â”€ ğŸ“‚ tes/ # Tesç’°å¢ƒâ”‚    â”‚    â”œâ”€â”€ backend.tfvars # fooãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    â”‚    ...â”‚    â”‚â”‚    â”œâ”€â”€ ğŸ“‚ stg/ # Stgç’°å¢ƒâ”‚    â”‚    â”œâ”€â”€ backend.tfvars # fooãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    â”‚    ...â”‚    â”‚â”‚    â””â”€â”€ ğŸ“‚ prd/ # Prdç’°å¢ƒâ”‚          â”œâ”€â”€ backend.tfvars # fooãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚          ...â”‚â”œâ”€â”€ ğŸ“‚ bar-product/â”‚    â”œâ”€â”€ provider.tfâ”‚    â”œâ”€â”€ remote_state.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã™ã‚‹â”‚    â”œâ”€â”€ ğŸ“‚ tes/ # Tesç’°å¢ƒâ”‚    â”‚    â”œâ”€â”€ backend.tfvars # barãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    â”‚    ...â”‚    â”‚â”‚    â”œâ”€â”€ ğŸ“‚ stg/ # Stgç’°å¢ƒâ”‚    â”‚    â”œâ”€â”€ backend.tfvars # barãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    â”‚    ...â”‚    â”‚â”‚    â””â”€â”€ ğŸ“‚ prd/ # Prdç’°å¢ƒâ”‚          â”œâ”€â”€ backend.tfvars # barãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚          ...â”‚â””â”€â”€ ğŸ“‚ network      â”œâ”€â”€ provider.tf      â”œâ”€â”€ output.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ä¾å­˜ã•ã‚Œã‚‹      â”œâ”€â”€ route53.tf      â”œâ”€â”€ vpc.tf      â”œâ”€â”€ ğŸ“‚ tes/ # Tesç’°å¢ƒ      â”‚    â”œâ”€â”€ backend.tfvars # networkã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹      â”‚    ...      â”‚      â”œâ”€â”€ ğŸ“‚ stg/ # Stgç’°å¢ƒ      â”‚    â”œâ”€â”€ backend.tfvars # networkã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹      â”‚    ...      â”‚      â””â”€â”€ ğŸ“‚ prd/ # Prdç’°å¢ƒ           â”œâ”€â”€ backend.tfvars # networkã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹           ...ã€åŒã˜ãƒ†ãƒŠãƒ³ãƒˆã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆåˆ¥ã€‘ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆâ–¼ ç•°ãªã‚‹ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®å ´åˆåŒã˜ãƒ†ãƒŠãƒ³ãƒˆã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆåˆ¥ã®å ´åˆã€ç•°ãªã‚‹ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã§ç®¡ç†ã™ã‚‹ã¨ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãŒå¢—ãˆéãã¦ã—ã¾ã„ã¾ã™ã€‚ãã®ãŸã‚ã€ã“ã‚Œã¯ãŠå‹§ã‚ã—ã¾ã›ã‚“ã€‚â–¼ åŒã˜ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®å ´åˆã“ã®å ´åˆã§ã¯ã€åŒã˜ãƒ†ãƒŠãƒ³ãƒˆã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆåˆ¥ã«åˆ†å‰²ã—ãŸtfstateãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã€ç•°ãªã‚‹ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã§ç®¡ç†ã—ã¾ã™ã€‚ä¾‹ãˆã°ã€tfstateãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²ã«åŸºã¥ã„ã¦ã€ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å†…ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆä¾‹ã¯ä»¥ä¸‹ã®é€šã‚Šã«ãªã‚Šã¾ã™ã€‚å‰è¿°ã®ä¾å­˜é–¢ä¿‚å›³ã®çŠ¶æ³ã¨ä»®å®šã—ã¾ã™ã€‚# Tesç’°å¢ƒç”¨ãƒã‚±ãƒƒãƒˆã®å ´åˆğŸª£ tes-bucket/â”œâ”€â”€ ğŸ“‚ foo-productâ”‚    â””â”€â”€ terraform.tfstate # fooãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤â”‚â”œâ”€â”€ ğŸ“‚ bar-productâ”‚    â””â”€â”€ terraform.tfstate # barãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤â”‚â””â”€â”€ ğŸ“‚ network      â””â”€â”€ terraform.tfstate # networkã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤# Stgç’°å¢ƒç”¨ãƒã‚±ãƒƒãƒˆã®å ´åˆğŸª£ stg-bucket/â”‚...# Prdç’°å¢ƒç”¨ãƒã‚±ãƒƒãƒˆã®å ´åˆğŸª£ prd-bucket/â”‚...é‹ç”¨ãƒãƒ¼ãƒ è²¬å‹™ç¯„å›²åˆ¥ - â˜…ã“ã®åˆ†å‰²æ–¹æ³•ã«ã¤ã„ã¦é‹ç”¨ãƒãƒ¼ãƒ  (ä¾‹ï¼šã‚¢ãƒ—ãƒªãƒãƒ¼ãƒ ã€ã‚¤ãƒ³ãƒ•ãƒ©ãƒãƒ¼ãƒ ) ã®AWSãƒªã‚½ãƒ¼ã‚¹ã®è²¬å‹™ç¯„å›²åˆ¥ã§tfstateãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ†å‰²ã—ã€ä¸­é–“å±¤ã‚‚ã“ã‚Œã«åŸºã¥ã„ã¦è¨­è¨ˆã—ã¾ã™ã€‚ã“ã®åˆ†å‰²æ–¹æ³•ã«ã‚ˆã‚Šã€å„é‹ç”¨ãƒãƒ¼ãƒ ãŒäº’ã„ã«å½±éŸ¿ã‚’å—ã‘ãšã«ã€terraformã‚³ãƒãƒ³ãƒ‰ã®çµæœã‚’å¾—ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚AWS CloudFormation best practices - AWS CloudFormationTerraform in Action (English Edition)AWSãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ»è‘—åãªæ›¸ç±ã§ç´¹ä»‹ã•ã‚Œã¦ã„ã¾ã™ğŸ‘€Terraformã«æºã‚ã‚‹ãƒãƒ¼ãƒ ãŒè¤‡æ•°ã‚ã‚‹éå¸¸ã«å¤§è¦æ¨¡ãªãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã»ã©åŠ¹åŠ›ã‚’ç™ºæ®ã—ã¾ã™ã€‚å®Ÿéš›ã«ç§ã‚‚ç¾åœ¨é€²è¡Œå½¢ã§æ¡ç”¨ã—ã¦ãŠã‚Šã€éå¸¸ã«å®Ÿç”¨çš„ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚ã€ãƒãƒ¼ãƒ åˆ¥ã€‘çŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚å›³ä¾‹ãˆã°ã€ä»¥ä¸‹ã®é‹ç”¨ãƒãƒ¼ãƒ ã«åˆ†å‰²ã—ãŸçŠ¶æ³ã¨ä»®å®šã—ã¾ã™ã€‚frontendãƒãƒ¼ãƒ  (ã‚¢ãƒ—ãƒªã®ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é ˜åŸŸæ‹…å½“)backendãƒãƒ¼ãƒ  (ã‚¢ãƒ—ãƒªã®ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰é ˜åŸŸæ‹…å½“)sreãƒãƒ¼ãƒ  (ã‚¤ãƒ³ãƒ•ãƒ©é ˜åŸŸæ‹…å½“)ã“ã“ã§ä»®å®šã—ãŸçŠ¶æ³ã§ã¯ã€å„ãƒãƒ¼ãƒ ãŒç®¡ç†ã™ã‚‹ tfstate ãƒ•ã‚¡ã‚¤ãƒ«é–“ã§çŠ¶æ…‹ãŒç›¸äº’ã«ä¾å­˜ã—ã¦ã„ã‚‹ã¨ã—ã¾ã™ã€‚AWSãƒªã‚½ãƒ¼ã‚¹é–“ã®ç›¸äº’ä¾å­˜ã§ã¯ãªã„ãŸã‚ã€å¾ªç’°å‚ç…§ã¯èµ·ã“ã‚Šã¾ã›ã‚“ã€‚ãã®ãŸã‚ã€æƒ³å®šã•ã‚Œã‚‹çŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚å›³ã¯ä»¥ä¸‹ã®é€šã‚Šã«ãªã‚Šã¾ã™ã€‚ãªãŠã€ä¾å­˜æ–¹å‘ã¯çŠ¶æ³ã«ã‚ˆã£ã¦ç•°ãªã‚‹ã“ã¨ã‚’ã”å®¹èµ¦ãã ã•ã„ã€‚---title: é‹ç”¨ãƒãƒ¼ãƒ è²¬å‹™ç¯„å›²åˆ¥---%%{init:{'theme':'default'}}%%flowchart TB    subgraph AWS        subgraph tes-bucket            frontend["frontend-team-tfstate<br>(CloudFront, S3, ãªã©)"]            backend["backend-team-tfstate<br>(API Gateway, ElastiCache, RDS, SES, SNS, ãªã©)"]            sre["sre-team-tfstate<br>(ALB, CloudWatch, EC2, ECS, EKS, IAM, VPC, ãªã©)"]            frontend-..->sre            backend-..->sre            sre-..->frontend            sre-..->backend        end    subgraph stg-bucket        stg["tfstate"]    end    subgraph prd-bucket        prd["tfstate"]    end    endã€ãƒãƒ¼ãƒ åˆ¥ã€‘ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆâ–¼ ç•°ãªã‚‹ãƒªãƒã‚¸ãƒˆãƒªã®å ´åˆã“ã®å ´åˆã§ã¯ã€é‹ç”¨ãƒãƒ¼ãƒ è²¬å‹™ç¯„å›²åˆ¥ã«åˆ†å‰²ã—ãŸtfstateãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã€åŒã˜ãƒªãƒã‚¸ãƒˆãƒªã§ç®¡ç†ã—ã¾ã™ã€‚ä¾‹ãˆã°ã€tfstateãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²ã«åŸºã¥ã„ã¦ã€ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆä¾‹ã¯ä»¥ä¸‹ã®é€šã‚Šã«ãªã‚Šã¾ã™ã€‚ã“ã®ä¾‹ã§ã¯ã€çŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚å›³ã¨åŒã˜çŠ¶æ³ã‚’ä»®å®šã—ã¦ã„ã¾ã™ã€‚ğŸ­ aws-frontend-team-repository/ # frontendãƒãƒ¼ãƒ â”œâ”€â”€ provider.tfâ”œâ”€â”€ output.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ä¾å­˜ã•ã‚Œã‚‹â”œâ”€â”€ remote_state.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã™ã‚‹â”œâ”€â”€ cloudfront.tfâ”œâ”€â”€ s3.tfâ”œâ”€â”€ ğŸ“‚ tes/ # Tesç’°å¢ƒâ”‚    â”œâ”€â”€ backend.tfvars # frontendãƒãƒ¼ãƒ ã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    ...â”‚â”œâ”€â”€ ğŸ“‚ stg/ # Stgç’°å¢ƒâ”‚    â”œâ”€â”€ backend.tfvars # frontendãƒãƒ¼ãƒ ã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    ...â”‚â””â”€â”€ ğŸ“‚ prd/ # Prdç’°å¢ƒ      â”œâ”€â”€ backend.tfvars # frontendãƒãƒ¼ãƒ ã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹      ...ğŸ­ aws-backend-team-repository/ # backendãƒãƒ¼ãƒ â”œâ”€â”€ provider.tfâ”œâ”€â”€ output.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ä¾å­˜ã•ã‚Œã‚‹â”œâ”€â”€ remote_state.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã™ã‚‹â”œâ”€â”€ elasticache.tfâ”œâ”€â”€ ses.tfâ”œâ”€â”€ sns.tfâ”œâ”€â”€ rds.tfâ”œâ”€â”€ ğŸ“‚ tesâ”‚    â”œâ”€â”€ backend.tfvars # backendãƒãƒ¼ãƒ ã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    ...â”‚â”œâ”€â”€ ğŸ“‚ stgâ”‚    â”œâ”€â”€ backend.tfvars # backendãƒãƒ¼ãƒ ã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    ...â”‚â””â”€â”€ ğŸ“‚ prd      â”œâ”€â”€ backend.tfvars # backendãƒãƒ¼ãƒ ã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹       ...ğŸ­ aws-sre-team-repository/ # sreãƒãƒ¼ãƒ â”œâ”€â”€ provider.tfâ”œâ”€â”€ output.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ä¾å­˜ã•ã‚Œã‚‹â”œâ”€â”€ remote_state.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã™ã‚‹â”œâ”€â”€ alb.tfâ”œâ”€â”€ cloudwatch.tfâ”œâ”€â”€ ec2.tfâ”œâ”€â”€ ecs.tfâ”œâ”€â”€ eks.tfâ”œâ”€â”€ iam.tfâ”œâ”€â”€ vpc.tfâ”œâ”€â”€ ğŸ“‚ tesâ”‚    â”œâ”€â”€ backend.tfvars # sreãƒãƒ¼ãƒ ã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    ...â”‚â”œâ”€â”€ ğŸ“‚ stgâ”‚    â”œâ”€â”€ backend.tfvars # sreãƒãƒ¼ãƒ ã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    ...â”‚â””â”€â”€ ğŸ“‚ prd      â”œâ”€â”€ backend.tfvars # sreãƒãƒ¼ãƒ ã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹      ...â–¼ åŒã˜ãƒªãƒã‚¸ãƒˆãƒªã®å ´åˆã“ã®å ´åˆã§ã¯ã€é‹ç”¨ãƒãƒ¼ãƒ è²¬å‹™ç¯„å›²åˆ¥ã«åˆ†å‰²ã—ãŸtfstateãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã€ç•°ãªã‚‹ãƒªãƒã‚¸ãƒˆãƒªã§ç®¡ç†ã—ã¾ã™ã€‚ä¾‹ãˆã°ã€tfstateãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²ã«åŸºã¥ã„ã¦ã€ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆä¾‹ã¯ä»¥ä¸‹ã®é€šã‚Šã«ãªã‚Šã¾ã™ã€‚ã“ã®ä¾‹ã§ã¯ã€çŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚å›³ã¨åŒã˜çŠ¶æ³ã‚’ä»®å®šã—ã¦ã„ã¾ã™ã€‚ğŸ­ aws-repository/â”œâ”€â”€ ğŸ“‚ frontend-team # frontendãƒãƒ¼ãƒ â”‚    â”œâ”€â”€ provider.tfâ”‚    â”œâ”€â”€ output.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ä¾å­˜ã•ã‚Œã‚‹â”‚    â”œâ”€â”€ remote_state.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã™ã‚‹â”‚    â”œâ”€â”€ cloudfront.tfâ”‚    â”œâ”€â”€ s3.tfâ”‚    â”œâ”€â”€ ğŸ“‚ tes/ # Tesç’°å¢ƒâ”‚    â”‚    â”œâ”€â”€ backend.tfvars # frontendãƒãƒ¼ãƒ ã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    â”‚    ...â”‚    â”‚â”‚    â”œâ”€â”€ ğŸ“‚ stg/ # Stgç’°å¢ƒâ”‚    â”‚    â”œâ”€â”€ backend.tfvars # frontendãƒãƒ¼ãƒ ã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    â”‚    ...â”‚    â”‚â”‚    â””â”€â”€ ğŸ“‚ prd/ # Prdç’°å¢ƒâ”‚          â”œâ”€â”€ backend.tfvars # frontendãƒãƒ¼ãƒ ã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚          ...â”‚â”œâ”€â”€ ğŸ“‚ backend-team # backendãƒãƒ¼ãƒ â”‚    â”œâ”€â”€ provider.tfâ”‚    â”œâ”€â”€ output.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ä¾å­˜ã•ã‚Œã‚‹â”‚    â”œâ”€â”€ remote_state.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã™ã‚‹â”‚    â”œâ”€â”€ elasticache.tfâ”‚    â”œâ”€â”€ ses.tfâ”‚    â”œâ”€â”€ sns.tfâ”‚    â”œâ”€â”€ rds.tfâ”‚    â”œâ”€â”€ ğŸ“‚ tesâ”‚    â”‚    â”œâ”€â”€ backend.tfvars # backendãƒãƒ¼ãƒ ã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    â”‚    ...â”‚    â”‚â”‚    â”œâ”€â”€ ğŸ“‚ stgâ”‚    â”‚    â”œâ”€â”€ backend.tfvars # backendãƒãƒ¼ãƒ ã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    â”‚    ...â”‚    â”‚â”‚    â””â”€â”€ ğŸ“‚ prdâ”‚          â”œâ”€â”€ backend.tfvars # backendãƒãƒ¼ãƒ ã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚          ...â”‚â””â”€â”€ ğŸ“‚ sre-team # sreãƒãƒ¼ãƒ       â”œâ”€â”€ provider.tf      â”œâ”€â”€ output.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ä¾å­˜ã•ã‚Œã‚‹      â”œâ”€â”€ remote_state.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã™ã‚‹      â”œâ”€â”€ alb.tf      â”œâ”€â”€ cloudwatch.tf      â”œâ”€â”€ ec2.tf      â”œâ”€â”€ ecs.tf      â”œâ”€â”€ eks.tf      â”œâ”€â”€ iam.tf      â”œâ”€â”€ vpc.tf      â”œâ”€â”€ ğŸ“‚ tes      â”‚    â”œâ”€â”€ backend.tfvars # sreãƒãƒ¼ãƒ ã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹      â”‚    ...      â”‚      â”œâ”€â”€ ğŸ“‚ stg      â”‚    â”œâ”€â”€ backend.tfvars # sreãƒãƒ¼ãƒ ã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹      â”‚    ...      â”‚      â””â”€â”€ ğŸ“‚ prd           â”œâ”€â”€ backend.tfvars # sreãƒãƒ¼ãƒ ã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹           ...ã€ãƒãƒ¼ãƒ åˆ¥ã€‘ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆâ–¼ ç•°ãªã‚‹ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®å ´åˆé‹ç”¨ãƒãƒ¼ãƒ è²¬å‹™ç¯„å›²åˆ¥ã®å ´åˆã€ç•°ãªã‚‹ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã§ç®¡ç†ã™ã‚‹ã¨ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãŒå¢—ãˆéãã¦ã—ã¾ã„ã¾ã™ã€‚ãã®ãŸã‚ã€ã“ã‚Œã¯ãŠå‹§ã‚ã—ã¾ã›ã‚“ã€‚â–¼ åŒã˜ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®å ´åˆã“ã®å ´åˆã§ã¯ã€ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåˆ¥ã«åˆ†å‰²ã—ãŸtfstateãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã€ç•°ãªã‚‹ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã§ç®¡ç†ã—ã¾ã™ã€‚ä¾‹ãˆã°ã€tfstateãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²ã«åŸºã¥ã„ã¦ã€ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å†…ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆä¾‹ã¯ä»¥ä¸‹ã®é€šã‚Šã«ãªã‚Šã¾ã™ã€‚ã“ã®ä¾‹ã§ã¯ã€çŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚å›³ã¨åŒã˜çŠ¶æ³ã‚’ä»®å®šã—ã¦ã„ã¾ã™ã€‚# Tesç’°å¢ƒç”¨ãƒã‚±ãƒƒãƒˆã®å ´åˆğŸª£ tes-bucket/â”œâ”€â”€ ğŸ“‚ frontend-teamâ”‚    â””â”€â”€ terraform.tfstate # frontendãƒãƒ¼ãƒ ã®çŠ¶æ…‹ã‚’æŒã¤â”‚â”œâ”€â”€ ğŸ“‚ backend-teamâ”‚    â””â”€â”€ terraform.tfstate # backendãƒãƒ¼ãƒ ã®çŠ¶æ…‹ã‚’æŒã¤â”‚â””â”€â”€ ğŸ“‚ sre-team      â””â”€â”€ terraform.tfstate # sreãƒãƒ¼ãƒ ã®çŠ¶æ…‹ã‚’æŒã¤# Stgç’°å¢ƒç”¨ãƒã‚±ãƒƒãƒˆã®å ´åˆğŸª£ stg-bucket/â”‚...# Prdç’°å¢ƒç”¨ãƒã‚±ãƒƒãƒˆã®å ´åˆğŸª£ prd-bucket/â”‚...ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®ã‚µãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ¥ - â˜…ã“ã®åˆ†å‰²æ–¹æ³•ã«ã¤ã„ã¦ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®ã‚µãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ (ä¾‹ï¼šã‚¢ãƒ—ãƒªã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã€èªè¨¼/èªå¯ã€ç›£è¦–ã€ãªã©) åˆ¥ã§tfstateãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ†å‰²ã—ã€ä¸­é–“å±¤ã‚‚ã“ã‚Œã«åŸºã¥ã„ã¦è¨­è¨ˆã—ã¾ã™ã€‚ã“ã®åˆ†å‰²æ–¹æ³•ã«ã‚ˆã‚Šã€ã‚µãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ç®¡ç†è€…ãŒäº’ã„ã«å½±éŸ¿ã‚’å—ã‘ãšã«ã€terraformã‚³ãƒãƒ³ãƒ‰ã®çµæœã‚’å¾—ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚11 Things I wish I knew before working with Terraform â€“ part 1Terraform organization â€” Part I : What if you split your components ? | by Amine Charot | Mediumã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ã€åˆ†ã‘ã‚ˆã†ã¨æ€ãˆã°ã„ãã‚‰ã§ã‚‚ç´°åˆ†åŒ–ã§ãã¦ã—ã¾ã„ã¾ã™ã€‚ç´°åˆ†åŒ–ã—ãŸæ•°ã ã‘terraform_remote_stateãƒ–ãƒ­ãƒƒã‚¯åœ°ç„ã«ãªã£ã¦ã„ããŸã‚ã€é©åˆ‡ãªæ•° (3ã€œ5å€‹ãã‚‰ã„) ã«ã—ã¦ãŠãã‚ˆã†ã«æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚ã“ã®åˆ†å‰²æ–¹æ³•ã¯ã€å¾Œè¿°ã®AWSãƒªã‚½ãƒ¼ã‚¹ã®ç¨®é¡ã‚°ãƒ«ãƒ¼ãƒ—ã¨ã”ã£ã¡ã‚ƒã«ãªã£ã¦ã—ã¾ã†å ´åˆãŒã‚ã‚‹ãŸã‚ã€ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®ã‚µãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ã—ã¦æ„è­˜çš„ã«åˆ†å‰²ã•ã›ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ğŸ‘ã€ã‚µãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ¥ã€‘çŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚å›³ä¾‹ãˆã°ã€ä»¥ä¸‹ã®ã‚µãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«åˆ†å‰²ã—ãŸçŠ¶æ³ã¨ä»®å®šã—ã¾ã™ã€‚application (Web3å±¤ç³»)auth (èªè¨¼/èªå¯ç³»)monitor (ç›£è¦–ç³»)network (ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ç³»)ã“ã“ã§ä»®å®šã—ãŸçŠ¶æ³ã§ã¯ã€å„ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¾å­˜ã¯ä¸€æ–¹å‘æœ€çµ‚çš„ã«ã€networkã‚µãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚„authã‚µãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã—ã¦ã„ã‚‹ã¨ã—ã¾ã™ã€‚ãã®ãŸã‚ã€æƒ³å®šã•ã‚Œã‚‹çŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚å›³ã¯ä»¥ä¸‹ã®é€šã‚Šã«ãªã‚Šã¾ã™ã€‚ãªãŠã€ä¾å­˜æ–¹å‘ã¯çŠ¶æ³ã«ã‚ˆã£ã¦ç•°ãªã‚‹ã“ã¨ã‚’ã”å®¹èµ¦ãã ã•ã„ã€‚---title: ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®ã‚µãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ¥---%%{init:{'theme':'default'}}%%flowchart TB    subgraph AWS        subgraph tes-bucket            application["application-tfstate<br>Web3å±¤ã¨å‘¨è¾ºAWSãƒªã‚½ãƒ¼ã‚¹<br>(ALB, APIGateway, CloudFront, EC2, ECS, EKS, RDS, S3, SNS, ãªã©)"]            auth["auth-tfstate<br>(IAMãªã©)"]            monitor["monitor-tfstate<br>(CloudWatch, ãªã©)"]            network["network-tfstate<br>(Route53, VPC, ãªã©)"]            application-..->network            application-..->auth            monitor-..->application        end        subgraph stg-bucket            stg["tfstate"]        end        subgraph prd-bucket            prd["tfstate"]        end        endã€ã‚µãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ¥ã€‘ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆâ–¼ ç•°ãªã‚‹ãƒªãƒã‚¸ãƒˆãƒªã®å ´åˆãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®ã‚µãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ¥ã®åˆ†å‰²ãƒ‘ã‚¿ãƒ¼ãƒ³ã®å ´åˆã€ç•°ãªã‚‹ãƒªãƒã‚¸ãƒˆãƒªã§ç®¡ç†ã™ã‚‹ã¨ãƒªãƒã‚¸ãƒˆãƒªãŒå¢—ãˆéãã¦ã—ã¾ã„ã¾ã™ã€‚ãã®ãŸã‚ã€ã“ã‚Œã¯ãŠå‹§ã‚ã—ã¾ã›ã‚“ã€‚â–¼ åŒã˜ãƒªãƒã‚¸ãƒˆãƒªã®å ´åˆã“ã®å ´åˆã§ã¯ã€ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®ã‚µãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ¥ã«åˆ†å‰²ã—ãŸtfstateãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã€åŒã˜ãƒªãƒã‚¸ãƒˆãƒªã§ç®¡ç†ã—ã¾ã™ã€‚ä¾‹ãˆã°ã€tfstateãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²ã«åŸºã¥ã„ã¦ã€ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆä¾‹ã¯ä»¥ä¸‹ã®é€šã‚Šã«ãªã‚Šã¾ã™ã€‚ã“ã®ä¾‹ã§ã¯ã€çŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚å›³ã¨åŒã˜çŠ¶æ³ã‚’ä»®å®šã—ã¦ã„ã¾ã™ã€‚ğŸ­ aws-repository/â”œâ”€â”€ ğŸ“‚ application/â”‚    â”œâ”€â”€ output.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ä¾å­˜ã•ã‚Œã‚‹â”‚    â”œâ”€â”€ remote_state.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã™ã‚‹â”‚    â”œâ”€â”€ provider.tfâ”‚    â”œâ”€â”€ alb.tfâ”‚    â”œâ”€â”€ cloudfront.tfâ”‚    â”œâ”€â”€ ec2.tfâ”‚    â”œâ”€â”€ ecs.tfâ”‚    â”œâ”€â”€ eks.tfâ”‚    â”œâ”€â”€ ses.tfâ”‚    â”œâ”€â”€ sns.tfâ”‚    â”œâ”€â”€ ğŸ“‚ tes/ # Tesç’°å¢ƒâ”‚    â”‚    â”œâ”€â”€ backend.tfvars # applicationã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    â”‚    ...â”‚    â”‚â”‚    â”œâ”€â”€ ğŸ“‚ stg/ # Stgç’°å¢ƒâ”‚    â”‚    â”œâ”€â”€ backend.tfvars # applicationã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    â”‚    ...â”‚    â”‚â”‚    â””â”€â”€ ğŸ“‚ prd/ # Prdç’°å¢ƒâ”‚          â”œâ”€â”€ backend.tfvars # applicationã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚          ...â”‚â”œâ”€â”€ ğŸ“‚ auth/â”‚    â”œâ”€â”€ provider.tfâ”‚    â”œâ”€â”€ output.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ä¾å­˜ã•ã‚Œã‚‹â”‚    â”œâ”€â”€ iam.tfâ”‚    â”œâ”€â”€ ğŸ“‚ tes/ # Tesç’°å¢ƒâ”‚    â”‚    â”œâ”€â”€ backend.tfvars # authã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    â”‚    ...â”‚    â”‚â”‚    â”œâ”€â”€ ğŸ“‚ stg/ # Stgç’°å¢ƒâ”‚    â”‚    â”œâ”€â”€ backend.tfvars # authã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    â”‚    ...â”‚    â”‚â”‚    â””â”€â”€ ğŸ“‚ prd/ # Prdç’°å¢ƒâ”‚          â”œâ”€â”€ backend.tfvars # authã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚          ...â”‚â”œâ”€â”€ ğŸ“‚ monitor/â”‚    â”œâ”€â”€ provider.tfâ”‚    â”œâ”€â”€ remote_state.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã™ã‚‹â”‚    â”œâ”€â”€ cloudwatch.tfâ”‚    â”œâ”€â”€ ğŸ“‚ tes/ # Tesç’°å¢ƒâ”‚    â”‚    â”œâ”€â”€ backend.tfvars # monitorã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    â”‚    ...â”‚    â”‚â”‚    â”œâ”€â”€ ğŸ“‚ stg/ # Stgç’°å¢ƒâ”‚    â”‚    â”œâ”€â”€ backend.tfvars # monitorã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    â”‚    ...â”‚    â”‚â”‚    â””â”€â”€ ğŸ“‚ prd/ # Prdç’°å¢ƒâ”‚          â”œâ”€â”€ backend.tfvars # monitorã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚          ...â”‚â””â”€â”€ ğŸ“‚ network      â”œâ”€â”€ provider.tf      â”œâ”€â”€ output.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ä¾å­˜ã•ã‚Œã‚‹      â”œâ”€â”€ route53.tf      â”œâ”€â”€ vpc.tf      â”œâ”€â”€ ğŸ“‚ tes/ # Tesç’°å¢ƒ      â”‚    â”œâ”€â”€ backend.tfvars # networkã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹      â”‚    ...      â”‚      â”œâ”€â”€ ğŸ“‚ stg/ # Stgç’°å¢ƒ      â”‚    â”œâ”€â”€ backend.tfvars # networkã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹      â”‚    ...      â”‚      â””â”€â”€ ğŸ“‚ prd/ # Prdç’°å¢ƒ           â”œâ”€â”€ backend.tfvars # networkã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹           ...ã€ã‚µãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ¥ã€‘ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆâ–¼ ç•°ãªã‚‹ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®å ´åˆãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®ã‚µãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ¥ã®åˆ†å‰²ãƒ‘ã‚¿ãƒ¼ãƒ³ã®å ´åˆã€ç•°ãªã‚‹ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã§ç®¡ç†ã™ã‚‹ã¨ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãŒå¢—ãˆéãã¦ã—ã¾ã„ã¾ã™ã€‚ãã®ãŸã‚ã€ã“ã‚Œã¯ãŠå‹§ã‚ã—ã¾ã›ã‚“ã€‚â–¼ åŒã˜ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®å ´åˆã“ã®å ´åˆã§ã¯ã€ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®ã‚µãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ¥ã«åˆ†å‰²ã—ãŸtfstateãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã€ç•°ãªã‚‹ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã§ç®¡ç†ã—ã¾ã™ã€‚ä¾‹ãˆã°ã€tfstateãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²ã«åŸºã¥ã„ã¦ã€ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å†…ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆä¾‹ã¯ä»¥ä¸‹ã®é€šã‚Šã«ãªã‚Šã¾ã™ã€‚ã“ã®ä¾‹ã§ã¯ã€çŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚å›³ã¨åŒã˜çŠ¶æ³ã‚’ä»®å®šã—ã¦ã„ã¾ã™ã€‚# Tesç’°å¢ƒç”¨ãƒã‚±ãƒƒãƒˆã®å ´åˆğŸª£ tes-bucket/â”œâ”€â”€ ğŸ“‚ applicationâ”‚    â””â”€â”€ terraform.tfstate # applicationã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤â”‚â”œâ”€â”€ ğŸ“‚ authâ”‚    â””â”€â”€ terraform.tfstate # authã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤â”‚â”œâ”€â”€ ğŸ“‚ monitorâ”‚    â””â”€â”€ terraform.tfstate # monitorã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤â”‚â””â”€â”€ ğŸ“‚ network      â””â”€â”€ terraform.tfstate # networkã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤# Stgç’°å¢ƒç”¨ãƒã‚±ãƒƒãƒˆã®å ´åˆğŸª£ stg-bucket/â”‚...# Prdç’°å¢ƒç”¨ãƒã‚±ãƒƒãƒˆã®å ´åˆğŸª£ prd-bucket/â”‚...AWSãƒªã‚½ãƒ¼ã‚¹ã®ç¨®é¡ã‚°ãƒ«ãƒ¼ãƒ—åˆ¥ã“ã®åˆ†å‰²æ–¹æ³•ã«ã¤ã„ã¦AWSãƒªã‚½ãƒ¼ã‚¹ã®ç¨®é¡ã‚°ãƒ«ãƒ¼ãƒ—åˆ¥ã§tfstateãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ†å‰²ã—ã€ä¸­é–“å±¤ã‚‚ã“ã‚Œã«åŸºã¥ã„ã¦è¨­è¨ˆã—ã¾ã™ã€‚ã“ã®åˆ†å‰²æ–¹æ³•ã«ã‚ˆã‚Šã€å„AWSãƒªã‚½ãƒ¼ã‚¹ã®ç¨®é¡ã‚°ãƒ«ãƒ¼ãƒ—ã‚‚ç®¡ç†è€…ãŒäº’ã„ã«å½±éŸ¿ã‚’å—ã‘ãšã«ã€terraformã‚³ãƒãƒ³ãƒ‰ã®çµæœã‚’å¾—ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚AWSãƒªã‚½ãƒ¼ã‚¹ã®ç¨®é¡ã‚°ãƒ«ãƒ¼ãƒ—ã¯ã€åˆ†ã‘ã‚ˆã†ã¨æ€ãˆã°ã„ãã‚‰ã§ã‚‚ç´°åˆ†åŒ–ã§ãã¦ã—ã¾ã„ã¾ã™ã€‚ç´°åˆ†åŒ–ã—ãŸæ•°ã ã‘terraform_remote_stateãƒ–ãƒ­ãƒƒã‚¯åœ°ç„ã«ãªã£ã¦ã„ããŸã‚ã€é©åˆ‡ãªæ•° (3ã€œ5å€‹ãã‚‰ã„) ã«ã—ã¦ãŠãã‚ˆã†ã«æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚ç‰¹ã«ã“ã®åˆ†å‰²æ–¹æ³•ã¯ã€ã‚°ãƒ«ãƒ¼ãƒ—æ•°ãŒã©ã‚“ã©ã‚“å¢—ãˆã¦ã„ãå¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ğŸ˜‡ã€ç¨®é¡ã‚°ãƒ«ãƒ¼ãƒ—åˆ¥ã€‘çŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚å›³ä¾‹ãˆã°ã€ä»¥ä¸‹ã®ç¨®é¡ã‚°ãƒ«ãƒ¼ãƒ—ã«åˆ†å‰²ã—ãŸçŠ¶æ³ã¨ä»®å®šã—ã¾ã™ã€‚application (Webã‚µãƒ¼ãƒãƒ¼ã€Appã‚µãƒ¼ãƒãƒ¼ç³»)auth (èªè¨¼/èªå¯ç³»)datastore (DBã‚µãƒ¼ãƒãƒ¼ç³»)cicd (CI/CDç³»)monitor (ç›£è¦–ç³»)network (ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ç³»)ã“ã“ã§ä»®å®šã—ãŸçŠ¶æ³ã§ã¯ã€å„ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®tfstateãƒ•ã‚¡ã‚¤ãƒ«ã®ä¾å­˜ã¯ä¸€æ–¹å‘æœ€çµ‚çš„ã«ã€networkã‚°ãƒ«ãƒ¼ãƒ—ã‚„authã‚°ãƒ«ãƒ¼ãƒ—ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã—ã¦ã„ã‚‹ã¨ã—ã¾ã™ã€‚ãã®ãŸã‚ã€æƒ³å®šã•ã‚Œã‚‹çŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚å›³ã¯ä»¥ä¸‹ã®é€šã‚Šã«ãªã‚Šã¾ã™ã€‚ãªãŠã€ä¾å­˜æ–¹å‘ã¯çŠ¶æ³ã«ã‚ˆã£ã¦ç•°ãªã‚‹ã“ã¨ã‚’ã”å®¹èµ¦ãã ã•ã„ã€‚---title: AWSãƒªã‚½ãƒ¼ã‚¹ã®ç¨®é¡ã‚°ãƒ«ãƒ¼ãƒ—åˆ¥---%%{init:{'theme':'default'}}%%flowchart TB    subgraph AWS        subgraph tes-bucket            application["application-tfstate<br>ä¾‹: ALB, API Gateway, CloudFront, EC2, ECS, EKS, SNS, ãªã©"]            auth["auth-tfstate<br>ä¾‹: IAM, ãªã©"]            cicd["cicd-tfstate<br>ä¾‹: Code3å…„å¼Ÿ, ãªã©"]            monitor["monitor-tfstate<br>ä¾‹: CloudWatch, ãªã©"]            network["network-tfstate<br>ä¾‹: Route53, VPC, ãªã©"]            datastore["datastore-tfstate<br>ä¾‹: ElastiCache, RDS, S3, ãªã©"]            application-....->auth            application-..->datastore            application-...->network            cicd-..->application            datastore-..->network            monitor-..->application            monitor-..->datastore       end    subgraph stg-bucket        stg["tfstate"]    end    subgraph prd-bucket        prd["tfstate"]    end    endã€ç¨®é¡ã‚°ãƒ«ãƒ¼ãƒ—åˆ¥ã€‘ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆâ–¼ ç•°ãªã‚‹ãƒªãƒã‚¸ãƒˆãƒªã®å ´åˆAWSãƒªã‚½ãƒ¼ã‚¹ã®ç¨®é¡ã‚°ãƒ«ãƒ¼ãƒ—åˆ¥ã®åˆ†å‰²ãƒ‘ã‚¿ãƒ¼ãƒ³ã®å ´åˆã€ç•°ãªã‚‹ãƒªãƒã‚¸ãƒˆãƒªã§ç®¡ç†ã™ã‚‹ã¨ãƒªãƒã‚¸ãƒˆãƒªãŒå¢—ãˆéãã¦ã—ã¾ã„ã¾ã™ã€‚ãã®ãŸã‚ã€ã“ã‚Œã¯ãŠå‹§ã‚ã—ã¾ã›ã‚“ã€‚â–¼ åŒã˜ãƒªãƒã‚¸ãƒˆãƒªã®å ´åˆã“ã®å ´åˆã§ã¯ã€AWSãƒªã‚½ãƒ¼ã‚¹ã®ç¨®é¡ã‚°ãƒ«ãƒ¼ãƒ—åˆ¥ã«åˆ†å‰²ã—ãŸtfstateãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã€åŒã˜ãƒªãƒã‚¸ãƒˆãƒªã§ç®¡ç†ã—ã¾ã™ã€‚ä¾‹ãˆã°ã€tfstateãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²ã«åŸºã¥ã„ã¦ã€ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆä¾‹ã¯ä»¥ä¸‹ã®é€šã‚Šã«ãªã‚Šã¾ã™ã€‚ã“ã®ä¾‹ã§ã¯ã€çŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚å›³ã¨åŒã˜çŠ¶æ³ã‚’ä»®å®šã—ã¦ã„ã¾ã™ã€‚ğŸ­ aws-repository/â”œâ”€â”€ ğŸ“‚ application/â”‚    â”œâ”€â”€ provider.tfâ”‚    â”œâ”€â”€ remote_state.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã™ã‚‹â”‚    â”œâ”€â”€ output.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ä¾å­˜ã•ã‚Œã‚‹â”‚    â”œâ”€â”€ alb.tfâ”‚    â”œâ”€â”€ api_gateway.tfâ”‚    â”œâ”€â”€ cloudfront.tfâ”‚    â”œâ”€â”€ ec2.tfâ”‚    â”œâ”€â”€ ecs.tfâ”‚    â”œâ”€â”€ eks.tfâ”‚    â”œâ”€â”€ ses.tfâ”‚    â”œâ”€â”€ sns.tfâ”‚    â”œâ”€â”€ ğŸ“‚ tes/ # Tesç’°å¢ƒâ”‚    â”‚    â”œâ”€â”€ backend.tfvars # applicationã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    â”‚    ...â”‚    â”‚â”‚    â”œâ”€â”€ ğŸ“‚ stg/ # Stgç’°å¢ƒâ”‚    â”‚    â”œâ”€â”€ backend.tfvars # applicationã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    â”‚    ...â”‚    â”‚â”‚    â””â”€â”€ ğŸ“‚ prd/ # Prdç’°å¢ƒâ”‚          â”œâ”€â”€ backend.tfvars # applicationã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚          ...â”‚â”œâ”€â”€ ğŸ“‚ auth/â”‚    â”œâ”€â”€ provider.tfâ”‚    â”œâ”€â”€ output.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ä¾å­˜ã•ã‚Œã‚‹â”‚    â”œâ”€â”€ iam.tfâ”‚    â”œâ”€â”€ ğŸ“‚ tes/ # Tesç’°å¢ƒâ”‚    â”‚    â”œâ”€â”€ backend.tfvars # authã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    â”‚    ...â”‚    â”‚â”‚    â”œâ”€â”€ ğŸ“‚ stg/ # Stgç’°å¢ƒâ”‚    â”‚    â”œâ”€â”€ backend.tfvars # authã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    â”‚    ...â”‚    â”‚â”‚    â””â”€â”€ ğŸ“‚ prd/ # Prdç’°å¢ƒâ”‚          â”œâ”€â”€ backend.tfvars # authã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚          ...â”‚â”œâ”€â”€ ğŸ“‚ cicd/â”‚    â”œâ”€â”€ provider.tfâ”‚    â”œâ”€â”€ remote_state.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã™ã‚‹â”‚    â”œâ”€â”€ codebuild.tfâ”‚    â”œâ”€â”€ codecommit.tfâ”‚    â”œâ”€â”€ codedeploy.tfâ”‚    â”œâ”€â”€ ğŸ“‚ tes/ # Tesç’°å¢ƒâ”‚    â”‚    â”œâ”€â”€ backend.tfvars # cicdã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    â”‚    ...â”‚    â”‚â”‚    â”œâ”€â”€ ğŸ“‚ stg/ # Stgç’°å¢ƒâ”‚    â”‚    â”œâ”€â”€ backend.tfvars # cicdã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    â”‚    ...â”‚    â”‚â”‚    â””â”€â”€ ğŸ“‚ prd/ # Prdç’°å¢ƒâ”‚          â”œâ”€â”€ backend.tfvars # cicdã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚          ...â”‚â”œâ”€â”€ ğŸ“‚ datastore/â”‚    â”œâ”€â”€ provider.tfâ”‚    â”œâ”€â”€ output.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ä¾å­˜ã•ã‚Œã‚‹â”‚    â”œâ”€â”€ remote_state.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã™ã‚‹â”‚    â”œâ”€â”€ elasticache.tfâ”‚    â”œâ”€â”€ rds.tfâ”‚    â”œâ”€â”€ s3.tfâ”‚    â”œâ”€â”€ ğŸ“‚ tes/ # Tesç’°å¢ƒâ”‚    â”‚    â”œâ”€â”€ backend.tfvars # datastoreã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    â”‚    ...â”‚    â”‚â”‚    â”œâ”€â”€ ğŸ“‚ stg/ # Stgç’°å¢ƒâ”‚    â”‚    â”œâ”€â”€ backend.tfvars # datastoreã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    â”‚    ...â”‚    â”‚â”‚    â””â”€â”€ ğŸ“‚ prd/ # Prdç’°å¢ƒâ”‚          â”œâ”€â”€ backend.tfvars # datastoreã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚          ...â”‚â”œâ”€â”€ ğŸ“‚ monitor/â”‚    â”œâ”€â”€ provider.tfâ”‚    â”œâ”€â”€ remote_state.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã™ã‚‹â”‚    â”œâ”€â”€ cloudwatch.tfâ”‚    â”œâ”€â”€ ğŸ“‚ tes/ # Tesç’°å¢ƒâ”‚    â”‚    â”œâ”€â”€ backend.tfvars # monitorã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    â”‚    ...â”‚    â”‚â”‚    â”œâ”€â”€ ğŸ“‚ stg/ # Stgç’°å¢ƒâ”‚    â”‚    â”œâ”€â”€ backend.tfvars # monitorã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    â”‚    ...â”‚    â”‚â”‚    â””â”€â”€ ğŸ“‚ prd/ # Prdç’°å¢ƒâ”‚          â”œâ”€â”€ backend.tfvars # monitorã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚          ...â”‚â””â”€â”€ ğŸ“‚ network      â”œâ”€â”€ provider.tf      â”œâ”€â”€ output.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰å‚ç…§ã§ãã‚‹ã‚ˆã†ã«ã€outputãƒ–ãƒ­ãƒƒã‚¯ã‚’å®šç¾©ã™ã‚‹      â”œâ”€â”€ route53.tf      â”œâ”€â”€ vpc.tf      â”œâ”€â”€ ğŸ“‚ tes/ # Tesç’°å¢ƒ      â”‚    â”œâ”€â”€ backend.tfvars # networkã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹      â”‚    ...      â”‚      â”œâ”€â”€ ğŸ“‚ stg/ # Stgç’°å¢ƒ      â”‚    â”œâ”€â”€ backend.tfvars # networkã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹      â”‚    ...      â”‚      â””â”€â”€ ğŸ“‚ prd/ # Prdç’°å¢ƒ           â”œâ”€â”€ backend.tfvars # networkã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹           ...ã€ç¨®é¡ã‚°ãƒ«ãƒ¼ãƒ—åˆ¥ã€‘ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆâ–¼ ç•°ãªã‚‹ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®å ´åˆAWSãƒªã‚½ãƒ¼ã‚¹ã®ç¨®é¡ã‚°ãƒ«ãƒ¼ãƒ—åˆ¥ã®åˆ†å‰²ãƒ‘ã‚¿ãƒ¼ãƒ³ã®å ´åˆã€ç•°ãªã‚‹ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã§ç®¡ç†ã™ã‚‹ã¨ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãŒå¢—ãˆéãã¦ã—ã¾ã„ã¾ã™ã€‚ãã®ãŸã‚ã€ã“ã‚Œã¯ãŠå‹§ã‚ã—ã¾ã›ã‚“ã€‚â–¼ åŒã˜ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®å ´åˆã“ã®å ´åˆã§ã¯ã€AWSãƒªã‚½ãƒ¼ã‚¹ã®ç¨®é¡ã‚°ãƒ«ãƒ¼ãƒ—åˆ¥ã«åˆ†å‰²ã—ãŸtfstateãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã€ç•°ãªã‚‹ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã§ç®¡ç†ã—ã¾ã™ã€‚ä¾‹ãˆã°ã€tfstateãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²ã«åŸºã¥ã„ã¦ã€ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å†…ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆä¾‹ã¯ä»¥ä¸‹ã®é€šã‚Šã«ãªã‚Šã¾ã™ã€‚ã“ã®ä¾‹ã§ã¯ã€çŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚å›³ã¨åŒã˜çŠ¶æ³ã‚’ä»®å®šã—ã¦ã„ã¾ã™ã€‚# Tesç’°å¢ƒç”¨ãƒã‚±ãƒƒãƒˆã®å ´åˆğŸª£ tes-bucket/â”œâ”€â”€ ğŸ“‚ applicationâ”‚    â””â”€â”€ terraform.tfstate # applicationã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤â”‚â”œâ”€â”€ ğŸ“‚ authâ”‚    â””â”€â”€ terraform.tfstate # authã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤â”‚â”œâ”€â”€ ğŸ“‚ cicdâ”‚    â””â”€â”€ terraform.tfstate # cicdã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤â”‚â”œâ”€â”€ ğŸ“‚ datastoreâ”‚    â””â”€â”€ terraform.tfstate # datastoreã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤â”‚â”œâ”€â”€ ğŸ“‚ monitorâ”‚    â””â”€â”€ terraform.tfstate # monitorã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤â”‚â””â”€â”€ ğŸ“‚ network      â””â”€â”€ terraform.tfstate # networkã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤# Stgç’°å¢ƒç”¨ãƒã‚±ãƒƒãƒˆã®å ´åˆğŸª£ stg-bucket/â”‚...# Prdç’°å¢ƒç”¨ãƒã‚±ãƒƒãƒˆã®å ´åˆğŸª£ prd-bucket/â”‚...AWSãƒªã‚½ãƒ¼ã‚¹ã®çŠ¶æ…‹ã®å¤‰æ›´é »åº¦ã‚°ãƒ«ãƒ¼ãƒ—åˆ¥ã“ã®åˆ†å‰²æ–¹æ³•ã«ã¤ã„ã¦AWSãƒªã‚½ãƒ¼ã‚¹ã®çŠ¶æ…‹ã®å¤‰æ›´é »åº¦ã‚°ãƒ«ãƒ¼ãƒ—åˆ¥ã§tfstateãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ†å‰²ã—ã€ä¸­é–“å±¤ã‚‚ã“ã‚Œã«åŸºã¥ã„ã¦è¨­è¨ˆã—ã¾ã™ã€‚ã“ã®åˆ†å‰²æ–¹æ³•ã«ã‚ˆã‚Šã€å„å¤‰æ›´é »åº¦ã‚°ãƒ«ãƒ¼ãƒ—ã®ç®¡ç†è€…ãŒäº’ã„ã«å½±éŸ¿ã‚’å—ã‘ãšã«ã€terraformã‚³ãƒãƒ³ãƒ‰ã®çµæœã‚’å¾—ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚oneplane comments on Best way to approach splitting up the state fileã€å¤‰æ›´é »åº¦ã‚°ãƒ«ãƒ¼ãƒ—åˆ¥ã€‘çŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚å›³ä¾‹ãˆã°ã€ä»¥ä¸‹ã®å¤‰æ›´é »åº¦ã‚°ãƒ«ãƒ¼ãƒ—ã«åˆ†å‰²ã—ãŸçŠ¶æ³ã¨ä»®å®šã—ã¾ã™ã€‚å¤‰æ›´é«˜é »åº¦ã‚°ãƒ«ãƒ¼ãƒ—å¤‰æ›´ä¸­é »åº¦ã‚°ãƒ«ãƒ¼ãƒ—å¤‰æ›´ä½é »åº¦ã‚°ãƒ«ãƒ¼ãƒ—ã“ã“ã§ä»®å®šã—ãŸçŠ¶æ³ã§ã¯ã€å„ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®tfstateãƒ•ã‚¡ã‚¤ãƒ«ã®ä¾å­˜ã¯ä¸€æ–¹å‘æœ€çµ‚çš„ã«ã€å¤‰æ›´ä½é »åº¦ã‚°ãƒ«ãƒ¼ãƒ—ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã—ã¦ã„ã‚‹ã¨ã—ã¾ã™ã€‚ãã®ãŸã‚ã€æƒ³å®šã•ã‚Œã‚‹çŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚å›³ã¯ä»¥ä¸‹ã®é€šã‚Šã«ãªã‚Šã¾ã™ã€‚ãªãŠã€ä¾å­˜æ–¹å‘ã¯çŠ¶æ³ã«ã‚ˆã£ã¦ç•°ãªã‚‹ã“ã¨ã‚’ã”å®¹èµ¦ãã ã•ã„ã€‚---title: AWSãƒªã‚½ãƒ¼ã‚¹ã®çŠ¶æ…‹ã®å¤‰æ›´é »åº¦ã‚°ãƒ«ãƒ¼ãƒ—åˆ¥---%%{init:{'theme':'default'}}%%flowchart TB    subgraph AWS        subgraph tes-bucket            high["high-freq-tfstate<br>ä¾‹: API Gateway, CloudFront, CloudWatch, IAM"]            middle["middle-freq-tfstate<br>ä¾‹: ALB, EC2, ECS, EKS, ElastiCache, RDS, S3, SES, SNS"]            low["low-freq-tfstate<br>ä¾‹: Route53, VPC"]            high-...->low            middle-..->low        end    subgraph stg-bucket        stg["tfstate"]    end    subgraph prd-bucket        prd["tfstate"]    end    endã€å¤‰æ›´é »åº¦ã‚°ãƒ«ãƒ¼ãƒ—åˆ¥ã€‘ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆâ–¼ ç•°ãªã‚‹ãƒªãƒã‚¸ãƒˆãƒªã®å ´åˆAWSãƒªã‚½ãƒ¼ã‚¹ã®å¤‰æ›´é »åº¦ã‚°ãƒ«ãƒ¼ãƒ—åˆ¥ã®åˆ†å‰²ãƒ‘ã‚¿ãƒ¼ãƒ³ã®å ´åˆã€ç•°ãªã‚‹ãƒªãƒã‚¸ãƒˆãƒªã§ç®¡ç†ã™ã‚‹ã¨ãƒªãƒã‚¸ãƒˆãƒªãŒå¢—ãˆéãã¦ã—ã¾ã„ã¾ã™ã€‚ãã®ãŸã‚ã€ã“ã‚Œã¯ãŠå‹§ã‚ã—ã¾ã›ã‚“ã€‚â–¼ åŒã˜ãƒªãƒã‚¸ãƒˆãƒªã®å ´åˆã“ã®å ´åˆã§ã¯ã€AWSãƒªã‚½ãƒ¼ã‚¹ã®å¤‰æ›´é »åº¦ã‚°ãƒ«ãƒ¼ãƒ—åˆ¥ã«åˆ†å‰²ã—ãŸtfstateãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã€åŒã˜ãƒªãƒã‚¸ãƒˆãƒªã§ç®¡ç†ã—ã¾ã™ã€‚ä¾‹ãˆã°ã€tfstateãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²ã«åŸºã¥ã„ã¦ã€ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆä¾‹ã¯ä»¥ä¸‹ã®é€šã‚Šã«ãªã‚Šã¾ã™ã€‚ã“ã®ä¾‹ã§ã¯ã€çŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚å›³ã¨åŒã˜çŠ¶æ³ã‚’ä»®å®šã—ã¦ã„ã¾ã™ã€‚ğŸ­ aws-repository/â”œâ”€â”€ ğŸ“‚ high-freq # é«˜é »åº¦å¤‰æ›´ã‚°ãƒ«ãƒ¼ãƒ—â”‚    â”œâ”€â”€ provider.tfâ”‚    â”œâ”€â”€ remote_state.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã™ã‚‹â”‚    â”œâ”€â”€ api_gateway.tfâ”‚    â”œâ”€â”€ cloudfront.tfâ”‚    â”œâ”€â”€ cloudwatch.tfâ”‚    â”œâ”€â”€ ec2.tfâ”‚    â”œâ”€â”€ ecs.tfâ”‚    â”œâ”€â”€ eks.tfâ”‚    â”œâ”€â”€ iam.tfâ”‚    â”œâ”€â”€ ğŸ“‚ tes/ # Tesç’°å¢ƒâ”‚    â”‚    â”œâ”€â”€ backend.tfvars # high-freqã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    â”‚    ...â”‚    â”‚â”‚    â”œâ”€â”€ ğŸ“‚ stg/ # Stgç’°å¢ƒâ”‚    â”‚    â”œâ”€â”€ backend.tfvars # high-freqã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    â”‚    ...â”‚    â”‚â”‚    â””â”€â”€ ğŸ“‚ prd/ # Prdç’°å¢ƒâ”‚          â”œâ”€â”€ backend.tfvars # high-freqã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚          ...â”‚â”œâ”€â”€ ğŸ“‚ low-freq # ä½é »åº¦å¤‰æ›´ã‚°ãƒ«ãƒ¼ãƒ—â”‚    â”œâ”€â”€ provider.tfâ”‚    â”œâ”€â”€ output.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ä¾å­˜ã•ã‚Œã‚‹â”‚    â”œâ”€â”€ route53.tfâ”‚    â”œâ”€â”€ vpc.tfâ”‚    â”œâ”€â”€ ğŸ“‚ tesâ”‚    â”‚    â”œâ”€â”€ backend.tfvars # low-freqã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    â”‚    ...â”‚    â”‚â”‚    â”œâ”€â”€ ğŸ“‚ stgâ”‚    â”‚    â”œâ”€â”€ backend.tfvars # low-freqã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    â”‚    ...â”‚    â”‚â”‚    â””â”€â”€ ğŸ“‚ prdâ”‚          â”œâ”€â”€ backend.tfvars # low-freqã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚          ...â”‚â””â”€â”€ ğŸ“‚ middle-freq # ä¸­é »åº¦å¤‰æ›´ã‚°ãƒ«ãƒ¼ãƒ— (é«˜é »åº¦ã¨ã‚‚ä½é »åº¦ã¨ã‚‚è¨€ãˆãªã„ãƒªã‚½ãƒ¼ã‚¹)      â”œâ”€â”€ provider.tf      â”œâ”€â”€ remote_state.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã™ã‚‹      â”œâ”€â”€ elasticache.tf      â”œâ”€â”€ rds.tf      â”œâ”€â”€ s3.tf      â”œâ”€â”€ ses.tf      â”œâ”€â”€ ğŸ“‚ tes      â”‚    â”œâ”€â”€ backend.tfvars # middle-freqã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹      â”‚    ...      â”‚      â”œâ”€â”€ ğŸ“‚ stg      â”‚    â”œâ”€â”€ backend.tfvars # middle-freqã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹      â”‚    ...      â”‚      â””â”€â”€ ğŸ“‚ prd           â”œâ”€â”€ backend.tfvars # middle-freqã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹           ...ã€å¤‰æ›´é »åº¦ã‚°ãƒ«ãƒ¼ãƒ—åˆ¥ã€‘ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆâ–¼ ç•°ãªã‚‹ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®å ´åˆAWSãƒªã‚½ãƒ¼ã‚¹ã®å¤‰æ›´é »åº¦ã‚°ãƒ«ãƒ¼ãƒ—åˆ¥ã®åˆ†å‰²ãƒ‘ã‚¿ãƒ¼ãƒ³ã®å ´åˆã€ç•°ãªã‚‹ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã§ç®¡ç†ã™ã‚‹ã¨ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãŒå¢—ãˆéãã¦ã—ã¾ã„ã¾ã™ã€‚ãã®ãŸã‚ã€ã“ã‚Œã¯ãŠå‹§ã‚ã—ã¾ã›ã‚“ã€‚â–¼ åŒã˜ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®å ´åˆã“ã®å ´åˆã§ã¯ã€AWSãƒªã‚½ãƒ¼ã‚¹ã®å¤‰æ›´é »åº¦ã‚°ãƒ«ãƒ¼ãƒ—åˆ¥ã«åˆ†å‰²ã—ãŸtfstateãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã€ç•°ãªã‚‹ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã§ç®¡ç†ã—ã¾ã™ã€‚ä¾‹ãˆã°ã€tfstateãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²ã«åŸºã¥ã„ã¦ã€ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å†…ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆä¾‹ã¯ä»¥ä¸‹ã®é€šã‚Šã«ãªã‚Šã¾ã™ã€‚ã“ã®ä¾‹ã§ã¯ã€çŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚å›³ã¨åŒã˜çŠ¶æ³ã‚’ä»®å®šã—ã¦ã„ã¾ã™ã€‚# Tesç’°å¢ƒç”¨ãƒã‚±ãƒƒãƒˆã®å ´åˆğŸª£ tes-bucket/â”œâ”€â”€ ğŸ“‚ high-freqâ”‚    â””â”€â”€ terraform.tfstate # high-freqã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤â”‚â”œâ”€â”€ ğŸ“‚ middle-freqâ”‚    â””â”€â”€ terraform.tfstate # middle-freqã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤â”‚â””â”€â”€ ğŸ“‚ low-freq      â””â”€â”€ terraform.tfstate # low-freqã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤# Stgç’°å¢ƒç”¨ãƒã‚±ãƒƒãƒˆã®å ´åˆğŸª£ stg-bucket/â”‚...# Prdç’°å¢ƒç”¨ãƒã‚±ãƒƒãƒˆã®å ´åˆğŸª£ prd-bucket/â”‚...é‹ç”¨ãƒãƒ¼ãƒ è²¬å‹™ç¯„å›²åˆ¥ Ã— ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã‚µãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ¥ - â˜…ã“ã®åˆ†å‰²æ–¹æ³•ã«ã¤ã„ã¦é‹ç”¨ãƒãƒ¼ãƒ è²¬å‹™ç¯„å›²åˆ¥ã¨ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã‚µãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ¥ã‚’çµ„ã¿åˆã‚ã›ã¦tfstateãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ†å‰²ã—ã€ä¸­é–“å±¤ã‚‚ã“ã‚Œã«åŸºã¥ã„ã¦è¨­è¨ˆã—ã¾ã™ã€‚ã“ã®åˆ†å‰²æ–¹æ³•ã«ã‚ˆã‚Šã€å„é‹ç”¨ãƒãƒ¼ãƒ å†…ã®ã‚µãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ç®¡ç†è€…ãŒäº’ã„ã«å½±éŸ¿ã‚’å—ã‘ãšã«ã€terraformã‚³ãƒãƒ³ãƒ‰ã®çµæœã‚’å¾—ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ã€ãƒãƒ¼ãƒ åˆ¥ Ã— ã‚µãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ¥ã€‘çŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚å›³ä»¥ä¸‹ã®é‹ç”¨ãƒãƒ¼ãƒ ã«åˆ†å‰²ã—ãŸçŠ¶æ³ã¨ä»®å®šã—ã¾ã™ã€‚ã¾ãŸã€å„é‹ç”¨ãƒãƒ¼ãƒ ã§Terraformã‚’å¤‰æ›´ã§ãã‚‹ç®¡ç†è€…ãŒç›¸å½“æ•°ã™ã‚‹ãŸã‚ã€ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®ã‚µãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ¥ã«ã‚‚åˆ†å‰²ã—ãŸã¨ã—ã¾ã™ã€‚frontendãƒãƒ¼ãƒ applicationmonitorbackendãƒãƒ¼ãƒ applicationmonitorsreãƒãƒ¼ãƒ applicationauthmonitornetworkã“ã“ã§ä»®å®šã—ãŸçŠ¶æ³ã§ã¯ã€å„ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®tfstateãƒ•ã‚¡ã‚¤ãƒ«ã®ä¾å­˜ã¯ä¸€æ–¹å‘æœ€çµ‚çš„ã«ã€sreãƒãƒ¼ãƒ ã®ç®¡ç†ã™ã‚‹ tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã—ã¦ã„ã‚‹ã¨ã—ã¾ã™ã€‚ãã®ãŸã‚ã€æƒ³å®šã•ã‚Œã‚‹çŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚å›³ã¯ä»¥ä¸‹ã®é€šã‚Šã«ãªã‚Šã¾ã™ã€‚ãªãŠã€ä¾å­˜æ–¹å‘ã¯çŠ¶æ³ã«ã‚ˆã£ã¦ç•°ãªã‚‹ã“ã¨ã‚’ã”å®¹èµ¦ãã ã•ã„ã€‚---title: é‹ç”¨ãƒãƒ¼ãƒ è²¬å‹™ç¯„å›²åˆ¥ Ã— ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã‚µãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ¥---%%{init:{'theme':'default'}}%%flowchart TB    subgraph AWS        subgraph tes-bucket            subgraph frontend-team               frontendApplication["application-tfstate<br>(CloudFront, S3, ãªã©)"]               frontendMonitor["monitor-tfstate<br>(CloudWatch, ãªã©)"]            end            subgraph backend-team                backendApplication["application-tfstate<br>(API Gateway, ElastiCache, RDS, SES, SNS, ãªã©)"]                backendMonitor["monitor-tfstate<br>(CloudWatch, ãªã©)"]            end            subgraph sre-team                sreApplication["application-tfstate<br>Web3å±¤ã¨å‘¨è¾ºAWSãƒªã‚½ãƒ¼ã‚¹<br>(ALB, EC2, ECS, EKS, SNS, ãªã©)"]                auth["auth-tfstate<br>(IAM, ãªã©)"]                sreMonitor["monitor-tfstate<br>(CloudWatch, ãªã©)"]                network["network-tfstate<br>(Route53, VPC, ãªã©)"]            end            frontendApplication-...->network            sreApplication-...->auth            sreApplication-...->network            backendApplication-...->auth            backendApplication-...->network            frontendMonitor-...->frontendApplication            sreMonitor-...->sreApplication            backendMonitor-...->backendApplication        end    subgraph stg-bucket        stg["tfstate"]    end    subgraph prd-bucket        prd["tfstate"]    end    endã€ãƒãƒ¼ãƒ åˆ¥ Ã— ã‚µãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ¥ã€‘ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆâ–¼ ç•°ãªã‚‹ãƒªãƒã‚¸ãƒˆãƒªã®å ´åˆã“ã®å ´åˆã§ã¯ã€é‹ç”¨ãƒãƒ¼ãƒ è²¬å‹™ç¯„å›²åˆ¥ã¨ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã‚µãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ¥ã‚’çµ„ã¿åˆã‚ã›ã¦åˆ†å‰²ã—ãŸtfstateãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã€åŒã˜ãƒªãƒã‚¸ãƒˆãƒªã§ç®¡ç†ã—ã¾ã™ã€‚ä¾‹ãˆã°ã€tfstateãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²ã«åŸºã¥ã„ã¦ã€ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆä¾‹ã¯ä»¥ä¸‹ã®é€šã‚Šã«ãªã‚Šã¾ã™ã€‚ã“ã®ä¾‹ã§ã¯ã€çŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚å›³ã¨åŒã˜çŠ¶æ³ã‚’ä»®å®šã—ã¦ã„ã¾ã™ã€‚ğŸ­ aws-frontend-team-repository/â”œâ”€â”€ ğŸ“‚ application/â”‚    â”œâ”€â”€ provider.tfâ”‚    â”œâ”€â”€ output.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ä¾å­˜ã•ã‚Œã‚‹â”‚    â”œâ”€â”€ remote_state.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã™ã‚‹â”‚    â”œâ”€â”€ cloudfront.tfâ”‚    â”œâ”€â”€ ses.tfâ”‚    â”œâ”€â”€ ğŸ“‚ tes/ # Tesç’°å¢ƒâ”‚    â”‚    â”œâ”€â”€ backend.tfvars # frontendãƒãƒ¼ãƒ ãŒç®¡ç†ã™ã‚‹applicationã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    â”‚    ...â”‚    â”‚â”‚    â”œâ”€â”€ ğŸ“‚ stg/ # Stgç’°å¢ƒâ”‚    â”‚    â”œâ”€â”€ backend.tfvars # frontendãƒãƒ¼ãƒ ãŒç®¡ç†ã™ã‚‹applicationã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    â”‚    ...â”‚    â”‚â”‚    â””â”€â”€ ğŸ“‚ prd/ # Prdç’°å¢ƒâ”‚          â”œâ”€â”€ backend.tfvars # frontendãƒãƒ¼ãƒ ãŒç®¡ç†ã™ã‚‹applicationã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚          ...â”‚â””â”€â”€ ğŸ“‚ monitor/      â”œâ”€â”€ provider.tf      â”œâ”€â”€ remote_state.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã™ã‚‹      â”œâ”€â”€ cloudwatch.tf      â”œâ”€â”€ ğŸ“‚ tes/ # Tesç’°å¢ƒ      â”‚    â”œâ”€â”€ backend.tfvars # frontendãƒãƒ¼ãƒ ãŒç®¡ç†ã™ã‚‹monitorã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹      â”‚    ...      â”‚      â”œâ”€â”€ ğŸ“‚ stg/ # Stgç’°å¢ƒ      â”‚    â”œâ”€â”€ backend.tfvars # frontendãƒãƒ¼ãƒ ãŒç®¡ç†ã™ã‚‹monitorã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹      â”‚    ...      â”‚      â””â”€â”€ ğŸ“‚ prd/ # Prdç’°å¢ƒ            â”œâ”€â”€ backend.tfvars # frontendãƒãƒ¼ãƒ ãŒç®¡ç†ã™ã‚‹monitorã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹            ...ğŸ­ aws-backend-team-repository/â”œâ”€â”€ ğŸ“‚ application/â”‚    â”œâ”€â”€ provider.tfâ”‚    â”œâ”€â”€ output.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ä¾å­˜ã•ã‚Œã‚‹â”‚    â”œâ”€â”€ remote_state.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã™ã‚‹â”‚    â”œâ”€â”€ api_gateway.tfâ”‚    â”œâ”€â”€ elasticache.tfâ”‚    â”œâ”€â”€ rds.tfâ”‚    â”œâ”€â”€ ses.tfâ”‚    â”œâ”€â”€ sns.tfâ”‚    â”œâ”€â”€ ğŸ“‚ tes/ # Tesç’°å¢ƒâ”‚    â”‚    â”œâ”€â”€ backend.tfvars # backendãƒãƒ¼ãƒ ãŒç®¡ç†ã™ã‚‹applicationã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    â”‚    ...â”‚    â”‚â”‚    â”œâ”€â”€ ğŸ“‚ stg/ # Stgç’°å¢ƒâ”‚    â”‚    â”œâ”€â”€ backend.tfvars # backendãƒãƒ¼ãƒ ãŒç®¡ç†ã™ã‚‹applicationã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    â”‚    ...â”‚    â”‚â”‚    â””â”€â”€ ğŸ“‚ prd/ # Prdç’°å¢ƒâ”‚          â”œâ”€â”€ backend.tfvars # backendãƒãƒ¼ãƒ ãŒç®¡ç†ã™ã‚‹applicationã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚          ...â”‚â””â”€â”€ ğŸ“‚ monitor/      â”œâ”€â”€ provider.tf      â”œâ”€â”€ remote_state.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã™ã‚‹      â”œâ”€â”€ cloudwatch.tf      â”œâ”€â”€ ğŸ“‚ tes/ # Tesç’°å¢ƒ      â”‚    â”œâ”€â”€ backend.tfvars # backendãƒãƒ¼ãƒ ãŒç®¡ç†ã™ã‚‹monitorã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹      â”‚    ...      â”‚      â”œâ”€â”€ ğŸ“‚ stg/ # Stgç’°å¢ƒ      â”‚    â”œâ”€â”€ backend.tfvars # backendãƒãƒ¼ãƒ ãŒç®¡ç†ã™ã‚‹monitorã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹      â”‚    ...      â”‚      â””â”€â”€ ğŸ“‚ prd/ # Prdç’°å¢ƒ            â”œâ”€â”€ backend.tfvars # backendãƒãƒ¼ãƒ ãŒç®¡ç†ã™ã‚‹monitorã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹            ...ğŸ­ aws-sre-team-repository/â”œâ”€â”€ ğŸ“‚ application/â”‚    â”œâ”€â”€ provider.tfâ”‚    â”œâ”€â”€ output.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ä¾å­˜ã•ã‚Œã‚‹â”‚    â”œâ”€â”€ remote_state.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã™ã‚‹â”‚    â”œâ”€â”€ alb.tfâ”‚    â”œâ”€â”€ ec2.tfâ”‚    â”œâ”€â”€ ecs.tfâ”‚    â”œâ”€â”€ eks.tfâ”‚    â”œâ”€â”€ ğŸ“‚ tes/ # Tesç’°å¢ƒâ”‚    â”‚    â”œâ”€â”€ backend.tfvars # sreãƒãƒ¼ãƒ ãŒç®¡ç†ã™ã‚‹applicationã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    â”‚    ...â”‚    â”‚â”‚    â”œâ”€â”€ ğŸ“‚ stg/ # Stgç’°å¢ƒâ”‚    â”‚    â”œâ”€â”€ backend.tfvars # sreãƒãƒ¼ãƒ ãŒç®¡ç†ã™ã‚‹applicationã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    â”‚    ...â”‚    â”‚â”‚    â””â”€â”€ ğŸ“‚ prd/ # Prdç’°å¢ƒâ”‚          â”œâ”€â”€ backend.tfvars # sreãƒãƒ¼ãƒ ãŒç®¡ç†ã™ã‚‹applicationã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚          ...â”‚â”œâ”€â”€ ğŸ“‚ auth/â”‚    â”œâ”€â”€ provider.tfâ”‚    â”œâ”€â”€ output.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ä¾å­˜ã•ã‚Œã‚‹â”‚    â”œâ”€â”€ iam.tfâ”‚    â”œâ”€â”€ ğŸ“‚ tes/ # Tesç’°å¢ƒâ”‚    â”‚    â”œâ”€â”€ backend.tfvars # sreãƒãƒ¼ãƒ ãŒç®¡ç†ã™ã‚‹authã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    â”‚    ...â”‚    â”‚â”‚    â”œâ”€â”€ ğŸ“‚ stg/ # Stgç’°å¢ƒâ”‚    â”‚    â”œâ”€â”€ backend.tfvars # sreãƒãƒ¼ãƒ ãŒç®¡ç†ã™ã‚‹authã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    â”‚    ...â”‚    â”‚â”‚    â””â”€â”€ ğŸ“‚ prd/ # Prdç’°å¢ƒâ”‚          â”œâ”€â”€ backend.tfvars # sreãƒãƒ¼ãƒ ãŒç®¡ç†ã™ã‚‹authã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚          ...â”‚â”œâ”€â”€ ğŸ“‚ monitor/â”‚    â”œâ”€â”€ provider.tfâ”‚    â”œâ”€â”€ remote_state.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜ã™ã‚‹â”‚    â”œâ”€â”€ cloudwatch.tfâ”‚    â”œâ”€â”€ ğŸ“‚ tes/ # Tesç’°å¢ƒâ”‚    â”‚    â”œâ”€â”€ backend.tfvars # sreãƒãƒ¼ãƒ ãŒç®¡ç†ã™ã‚‹monitorã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    â”‚    ...â”‚    â”‚â”‚    â”œâ”€â”€ ğŸ“‚ stg/ # Stgç’°å¢ƒâ”‚    â”‚    â”œâ”€â”€ backend.tfvars # sreãƒãƒ¼ãƒ ãŒç®¡ç†ã™ã‚‹monitorã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚    â”‚    ...â”‚    â”‚â”‚    â””â”€â”€ ğŸ“‚ prd/ # Prdç’°å¢ƒâ”‚          â”œâ”€â”€ backend.tfvars # sreãƒãƒ¼ãƒ ãŒç®¡ç†ã™ã‚‹monitorã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹â”‚          ...â”‚â””â”€â”€ ğŸ“‚ network      â”œâ”€â”€ provider.tf      â”œâ”€â”€ output.tf # ä»–ã® tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ä¾å­˜ã•ã‚Œã‚‹      â”œâ”€â”€ route53.tf      â”œâ”€â”€ vpc.tf      â”œâ”€â”€ ğŸ“‚ tes/ # Tesç’°å¢ƒ      â”‚    â”œâ”€â”€ backend.tfvars # sreãƒãƒ¼ãƒ ãŒç®¡ç†ã™ã‚‹networkã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹      â”‚    ...      â”‚      â”œâ”€â”€ ğŸ“‚ stg/ # Stgç’°å¢ƒ      â”‚    â”œâ”€â”€ backend.tfvars # sreãƒãƒ¼ãƒ ãŒç®¡ç†ã™ã‚‹networkã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹      â”‚    ...      â”‚      â””â”€â”€ ğŸ“‚ prd/ # Prdç’°å¢ƒ            â”œâ”€â”€ backend.tfvars # sreãƒãƒ¼ãƒ ãŒç®¡ç†ã™ã‚‹networkã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤ terraform.tfstate ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹            ...â–¼ åŒã˜ãƒªãƒã‚¸ãƒˆãƒªã®å ´åˆé‹ç”¨ãƒãƒ¼ãƒ è²¬å‹™ç¯„å›²åˆ¥ã¨ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã‚µãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ¥ã‚’çµ„ã¿åˆã‚ã›ã‚‹åˆ†å‰²ãƒ‘ã‚¿ãƒ¼ãƒ³ã®å ´åˆã€åŒã˜ãƒªãƒã‚¸ãƒˆãƒªã§ç®¡ç†ã™ã‚‹ã¨ãƒªãƒã‚¸ãƒˆãƒªãŒå·¨å¤§ã«ãªã£ã¦ã—ã¾ã„ã¾ã™ã€‚ãã®ãŸã‚ã€ã“ã‚Œã¯ãŠå‹§ã‚ã—ã¾ã›ã‚“ã€‚ã€ãƒãƒ¼ãƒ åˆ¥ Ã— ã‚µãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ¥ã€‘ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆâ–¼ ç•°ãªã‚‹ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®å ´åˆé‹ç”¨ãƒãƒ¼ãƒ è²¬å‹™ç¯„å›²åˆ¥ã¨ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã‚µãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ¥ã‚’çµ„ã¿åˆã‚ã›ã‚‹åˆ†å‰²ãƒ‘ã‚¿ãƒ¼ãƒ³ã®å ´åˆã€ç•°ãªã‚‹ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã§ç®¡ç†ã™ã‚‹ã¨ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãŒå¢—ãˆéãã¦ã—ã¾ã„ã¾ã™ã€‚ãã®ãŸã‚ã€ã“ã‚Œã¯ãŠå‹§ã‚ã—ã¾ã›ã‚“ã€‚â–¼ åŒã˜ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®å ´åˆã“ã®å ´åˆã§ã¯ã€é‹ç”¨ãƒãƒ¼ãƒ è²¬å‹™ç¯„å›²åˆ¥ã¨ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã‚µãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ¥ã‚’çµ„ã¿åˆã‚ã›ã¦åˆ†å‰²ã—ãŸtfstateãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã€ç•°ãªã‚‹ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã§ç®¡ç†ã—ã¾ã™ã€‚ä¾‹ãˆã°ã€tfstateãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²ã«åŸºã¥ã„ã¦ã€ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å†…ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆä¾‹ã¯ä»¥ä¸‹ã®é€šã‚Šã«ãªã‚Šã¾ã™ã€‚ã“ã®ä¾‹ã§ã¯ã€çŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚å›³ã¨åŒã˜çŠ¶æ³ã‚’ä»®å®šã—ã¦ã„ã¾ã™ã€‚# Tesç’°å¢ƒç”¨ãƒã‚±ãƒƒãƒˆã®å ´åˆğŸª£ tes-bucket/â”œâ”€â”€ ğŸ“‚ frontend-teamâ”‚    â”œâ”€â”€ ğŸ“‚ applicationâ”‚    â”‚    â””â”€â”€ terraform.tfstate # frontendãƒãƒ¼ãƒ ãŒç®¡ç†ã™ã‚‹applicationã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤â”‚    â”‚â”‚    â””â”€â”€ ğŸ“‚ monitorâ”‚         â””â”€â”€ terraform.tfstate # frontendãƒãƒ¼ãƒ ãŒç®¡ç†ã™ã‚‹monitorã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤â”‚â”œâ”€â”€ ğŸ“‚ backend-teamâ”‚    â”œâ”€â”€ ğŸ“‚ applicationâ”‚    â”‚    â””â”€â”€ terraform.tfstate # backendãƒãƒ¼ãƒ ãŒç®¡ç†ã™ã‚‹applicationã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤â”‚    â”‚â”‚    â””â”€â”€ ğŸ“‚ monitorâ”‚          â””â”€â”€ terraform.tfstate # backendãƒãƒ¼ãƒ ãŒç®¡ç†ã™ã‚‹monitorã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤â”‚â””â”€â”€ ğŸ“‚ sre-team      â”œâ”€â”€ ğŸ“‚ application      â”‚    â””â”€â”€ terraform.tfstate # sreãƒãƒ¼ãƒ ãŒç®¡ç†ã™ã‚‹applicationã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤      â”‚      â”œâ”€â”€ ğŸ“‚ auth      â”‚    â””â”€â”€ terraform.tfstate # sreãƒãƒ¼ãƒ ãŒç®¡ç†ã™ã‚‹authã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤      â”‚      â”œâ”€â”€ ğŸ“‚ monitor      â”‚    â””â”€â”€ terraform.tfstate # sreãƒãƒ¼ãƒ ãŒç®¡ç†ã™ã‚‹monitorã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤      â”‚      â””â”€â”€ ğŸ“‚ network            â””â”€â”€ terraform.tfstate # sreãƒãƒ¼ãƒ ãŒç®¡ç†ã™ã‚‹networkã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’æŒã¤# Stgç’°å¢ƒç”¨ãƒã‚±ãƒƒãƒˆã®å ´åˆğŸª£ stg-bucket/â”‚...# Prdç’°å¢ƒç”¨ãƒã‚±ãƒƒãƒˆã®å ´åˆğŸª£ prd-bucket/â”‚...10. ãŠã‚ã‚Šã«Terraformã®tfstateãƒ•ã‚¡ã‚¤ãƒ«ã®åˆ†å‰²ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ã‚‚ã‚Šã‚‚ã‚Šå¸ƒæ•™ã—ã¾ã—ãŸã€‚ãœã²æ¡ç”¨ã—ã¦ã¿ãŸã„åˆ†å‰²ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ã‚ã£ãŸã§ã—ã‚‡ã†ã‹ã€‚Terraformã®é–‹ç™ºç¾å ´ã®å…·ä½“çš„ãªè¦ä»¶ã¯åƒå·®ä¸‡åˆ¥ã§ã‚ã‚Šã€ç‰¹ã«tfstateãƒ•ã‚¡ã‚¤ãƒ«é–“ã®çŠ¶æ…‹ã®ä¾å­˜é–¢ä¿‚ã¯æ§˜ã€…ã§ã™ã€‚ã‚‚ã—ã€ã“ã®è¨˜äº‹ã‚’å‚è€ƒã«è¨­è¨ˆã—ã¦ãã ã•ã‚‹æ–¹ã¯ã€åˆ†å‰²ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ç¾å ´ã«è½ã¨ã—è¾¼ã‚“ã§è§£é‡ˆã„ãŸã ã‘ã‚‹ã¨å¹¸ã„ã§ã™ğŸ™‡ğŸ»â€ã€Œè‡ªåˆ†ã‚’ä¿¡ã˜ã¦ã‚‚â€¦ä¿¡é ¼ã«è¶³ã‚‹ä»²é–“ã‚’ä¿¡ã˜ã¦ã‚‚â€¦èª°ã«ã‚‚ã‚ã‹ã‚‰ãªã„â€¦ã€(ãŠå‹é”ã®@nwiizo, 2023, Terraform Modules ã§å†åˆ©ç”¨ã§ãã‚‹ã®ã§æœ€é«˜ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ï¼Ÿ)è¬è¾ä»Šå›ã€Terraformã®åˆ†å‰²ãƒ‘ã‚¿ãƒ¼ãƒ³ã®åé›†ã«ã‚ãŸã‚Šã€ä»¥ä¸‹ã®æ–¹ã€…ã‹ã‚‰ã®æ„è¦‹ãƒ»å®Ÿè£…æ–¹æ³•ã‚‚å‚è€ƒã«ã•ã›ã¦ã„ãŸã ãã¾ã—ãŸã€‚@kiyo_12_07 ã•ã‚“@masasuzu ã•ã‚“@tozastation ã•ã‚“(ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆé †)ã“ã®å ´ã§æ„Ÿè¬ç”³ã—ä¸Šã’ã¾ã™ğŸ™‡ğŸ»â€]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[å…‰ã«è² ã‘ãƒ«ãƒŠ~Google Cloudã§ã®ãƒãƒ«ãƒãƒªãƒ¼ã‚¸ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ã¤ã„ã¦~]]></title>
            <link>https://zenn.dev/nnaka2992/articles/to_beat_light_speed_on_google_cloud_databases</link>
            <guid>https://zenn.dev/nnaka2992/articles/to_beat_light_speed_on_google_cloud_databases</guid>
            <pubDate>Mon, 03 Jul 2023 15:39:08 GMT</pubDate>
            <content:encoded><![CDATA[ã‚¯ãƒ©ã‚¦ãƒ‰ã‚’åˆ©ç”¨ã™ã‚‹ä¸€ç•ªã®ãƒ¡ãƒªãƒƒãƒˆã®ä¸€ã¤ã¨ã—ã¦ã‚ªãƒ³ãƒ‡ãƒãƒ³ãƒ‰ã§ãƒªã‚½ãƒ¼ã‚¹ã‚’èª¿é”ã—ã€ã‚¢ã‚¯ã‚»ã‚¹è² è·ã«å¿œã˜ã¦ã‚¹ã‚±ãƒ¼ãƒ«ã‚¤ãƒ³ãƒ»ã‚¢ã‚¦ãƒˆå‡ºæ¥ã‚‹ã“ã¨ãŒä¸Šã’ã‚‰ã‚Œã¾ã™ã€‚ãã®ãŸã‚å¤§ä½“ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯ã‚·ãƒ³ã‚°ãƒ«ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã¾ãŸã¯éš£æ¥ã™ã‚‹ãƒªãƒ¼ã‚¸ãƒ§ãƒ³2~3ç¨‹åº¦ã§é‹ç”¨ã‚’å§‹ã‚ã‚‹ã“ã¨ãŒå¤šã„ã¨æ€ã„ã¾ã™ã€‚(æ—¥æœ¬ã®å ´åˆasia-northeast-1ã¨asia-northeast-2ãªã©)ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒã‚°ãƒ­ãƒ¼ãƒãƒ«ã«æ‹¡å¤§ã™ã‚‹ã¨ã€ãã‚Œã ã‘ç‰©ç†çš„ãªè·é›¢ãŒåºƒãŒã‚Šãƒ¦ãƒ¼ã‚¶ãƒ»ã‚µãƒ¼ãƒé–“ã®ã‚¢ã‚¯ã‚»ã‚¹ã«ã‹ã‹ã‚‹æ™‚é–“ãŒæ‹¡å¤§ã—ã¾ã™ã€‚ä¾‹ãˆã°ãƒ¦ãƒ¼ã‚¶ãƒ»ã‚µãƒ¼ãƒå…±ã«æ—¥æœ¬ã«ã‚ã‚‹å ´åˆ(æ²–ç¸„ãƒ»åŒ—æµ·é“é–“ç´„3,000km)ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã«ã‚ˆã‚‹é…å»¶ã¯ç‰‡é“ç´„15msä»¥ä¸‹...]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[ã‚¹ãƒªãƒ¼ã‚·ã‚§ã‚¤ã‚¯ã«å…¥ç¤¾ã—ã¾ã—ãŸï¼]]></title>
            <link>https://bells17.medium.com/3-shake-279ea982b977?source=rss-713cf42ce34d------2</link>
            <guid>https://bells17.medium.com/3-shake-279ea982b977?source=rss-713cf42ce34d------2</guid>
            <pubDate>Mon, 03 Jul 2023 14:10:50 GMT</pubDate>
        </item>
    </channel>
</rss>