<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>3-shake Engineers' Blogs</title>
        <link>https://blog.3-shake.com</link>
        <description>3-shake ã«æ‰€å±ã™ã‚‹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®ãƒ–ãƒ­ã‚°è¨˜äº‹ã‚’ã¾ã¨ã‚ã¦ã„ã¾ã™ã€‚</description>
        <lastBuildDate>Wed, 17 May 2023 18:30:38 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>ja</language>
        <image>
            <title>3-shake Engineers' Blogs</title>
            <url>https://blog.3-shake.com/og.png</url>
            <link>https://blog.3-shake.com</link>
        </image>
        <copyright>3-shake Inc.</copyright>
        <item>
            <title><![CDATA[GitLab ãƒˆãƒ©ãƒ–ãƒ«äº‹ä¾‹ç´¹ä»‹]]></title>
            <link>https://sreake.com/blog/gitlab-trouble-case-study/</link>
            <guid>https://sreake.com/blog/gitlab-trouble-case-study/</guid>
            <pubDate>Tue, 16 May 2023 02:23:30 GMT</pubDate>
            <content:encoded><![CDATA[æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ã€ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®äº‹ä¾‹ã‚’å–ã‚Šä¸Šã’ã€ãã‚Œãã‚Œã®ãƒˆãƒ©ãƒ–ãƒ«ã®åŸå› èª¿æŸ»ã®æµã‚Œã¨åˆ¤æ˜ã—ãŸåŸå› ã€è§£æ±ºæ–¹æ³•ã«ã¤ã„ã¦è¨˜è¼‰ã—ã¾ã™ã€‚ ã¾ãŸã€ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’å††æ»‘ã«é€²ã‚ã‚‰ã‚Œã‚‹ã‚ˆã†ã«å¿ƒãŒã‘ã¦ã„ã‚‹ã“ã¨ã‚’ã”ç´¹ä»‹ã—ã¾ [â€¦]The post GitLab ãƒˆãƒ©ãƒ–ãƒ«äº‹ä¾‹ç´¹ä»‹ first appeared on sreake.com | æ ªå¼ä¼šç¤¾ã‚¹ãƒªãƒ¼ã‚·ã‚§ã‚¤ã‚¯.]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Go ã§ GitHub CLI æ‹¡å¼µæ©Ÿèƒ½ã‚’ä½œã‚‹]]></title>
            <link>https://zenn.dev/kou_pg_0131/articles/gh-cli-extension-in-go</link>
            <guid>https://zenn.dev/kou_pg_0131/articles/gh-cli-extension-in-go</guid>
            <pubDate>Mon, 15 May 2023 09:00:00 GMT</pubDate>
            <content:encoded><![CDATA[å…ˆæ—¥ gh-grass ã¨ã„ã† Go è£½ã® GitHub CLI æ‹¡å¼µæ©Ÿèƒ½ã‚’é–‹ç™ºã—ã¦ã¿ãŸã®ã§ã™ãŒã€æ„å¤–ã¨ç°¡å˜ã«ã§ããŸã®ã§æ‰‹é †ã®ãƒ¡ãƒ¢ã§ã™ã€‚gh-grass ã«ã¤ã„ã¦ã¯æ¬¡ã®è¨˜äº‹ã‚’ã”å‚ç…§ãã ã•ã„ã€‚https://zenn.dev/kou_pg_0131/articles/gh-grass-introduction æ‹¡å¼µæ©Ÿèƒ½ã‚’ä½œæˆã™ã‚‹!GitHub CLI ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚GitHub CLI ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ã«ã¤ã„ã¦ã¯ GitHub CLI å…¬å¼ãƒªãƒã‚¸ãƒˆãƒªã® README ã‚’ã”å‚ç…§ãã ã•ã„ã€‚ã¾ãšã¯ gh extension create ã‚’æ¬¡ã®ã‚ˆã†ã«...]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[ç¾åœ¨ã®Dremelã®å®Ÿè£…ã‚’è§£èª¬ã—ãŸè«–æ–‡ã‚’èª­ã¿ã¾ã—ãŸ ]]></title>
            <link>https://nnaka2992.hatenablog.com/entry/2023/05/15/111420</link>
            <guid>https://nnaka2992.hatenablog.com/entry/2023/05/15/111420</guid>
            <pubDate>Mon, 15 May 2023 02:14:20 GMT</pubDate>
            <content:encoded><![CDATA[ã“ã®è¨˜äº‹ã®è¶£æ—¨2020å¹´ã«ç™ºè¡¨ã•ã‚ŒãŸBigQueryã®å…ƒã¨ãªã£ãŸGoogleå†…ã§åˆ©ç”¨ã•ã‚Œã¦ã„ã‚‹åˆ†æå‘ã‘ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã§ã‚ã‚‹Dremelã®å®Ÿè£…ã‚’è§£èª¬ã—ãŸè«–æ–‡ã‚’èª­ã¿ã¾ã—ãŸã€‚Dremel: A Decade of Interactive SQL Analysis at Web Scaleè‘—è€…ã«ã¤ã„ã¦Sergey Melnik, Andrey Gubarev, Jing Jing Long, Geoffrey Romer, Shiva Shivakumar, Matt Tolton,Theo Vassilakisã‚‰2010å¹´ã®Dremelç™ºè¡¨è«–æ–‡ã®è‘—è€…ã‚‰ã¨ã€Hossein Ahmadi, Dan Delorey, Slava Min, Mosha Pasumansky, Jeff Shuteã‚‰Googleã§åˆ†æãƒ¯ãƒ¼ã‚¯ãƒ­ãƒ¼ãƒ‰ã¨åˆ†æ•£å‡¦ç†ã«é–¢ã‚ã‚‹è‘—è€…ã‚‰ã«ã‚ˆã‚‹è«–æ–‡ã€‚æ¦‚è¦BigQueryã®å…ƒã¨ãªã£ãŸGoogleã®Dremelã®10å¹´é–“ã‚’æŒ¯ã‚Šæ›¿ãˆã£ã¦ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«ã¤ã„ã¦èª¬æ˜ã—ãŸè«–æ–‡ã€‚Dremelã¯ç¾ä»£ã®ã‚¯ãƒ©ã‚¦ãƒ‰ãƒã‚¤ãƒ†ã‚£ãƒ–åˆ†æãƒ„ãƒ¼ãƒ«ã§ä¸€èˆ¬çš„ã«ãªã£ã¦ã„ã‚‹ã€è¨ˆç®—ãƒªã‚½ãƒ¼ã‚¹ã¨ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®åˆ†è§£ã€ã‚«ãƒ©ãƒ ãƒŠã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã€in situãƒ‡ãƒ¼ã‚¿åˆ†æãªã©ã‚’çµ±åˆã—ãŸæœ€åˆã®ãƒ„ãƒ¼ãƒ«ã§ã‚ã‚‹ã€‚æ‰‹æ³•SQLã®æ¡ç”¨Googleã§ã¯æ®†ã©ã®ãƒ‡ãƒ¼ã‚¿ã¯BigTableãªã©NoSQLãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã§ç®¡ç†ã•ã‚Œã¦ã„ãŸãŸã‚ã€SQLã‚’ç”¨ã„ãªã„ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹ãŒä¸»æµã§ã‚ã£ãŸã€‚ã—ã‹ã—ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å‹ãƒ“ãƒƒã‚°ãƒ‡ãƒ¼ã‚¿ã‚·ã‚¹ãƒ†ãƒ ã«ãŠã‘ã‚‹ã€SQLã®æ¡ç”¨ã«å…±ãªã„Dremelã§ã‚‚SQLã‚’æ¡ç”¨ã—ãŸã€‚ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®åˆ†é›¢ãƒ¡ãƒ¢ãƒªã®åˆ†é›¢MapReduceã®ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã®ãƒœãƒˆãƒ«ãƒãƒƒã‚¯ã‚’å›é¿ã™ã‚‹ãŸã‚ã«Disaggregated Memory Shuffle Systemã‚’æ¡ç”¨ã—ãŸã€‚In situãƒ‡ãƒ¼ã‚¿åˆ†æã¸ã®å¯¾å¿œDBMSã¸ã®ãƒ‡ãƒ¼ã‚¿ãƒ­ãƒ¼ãƒ‰ã‚’å¿…è¦ã¨ã—ãªã„ãƒ‡ãƒ¼ã‚¿åˆ†æã®ã“ã¨ã§ã€Dremelã§ã¯GFSã«ç§»è¡Œã™ã‚‹ã¨ãã«Googleå†…ã§å…±æœ‰ã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§Googleå†…ã®ãƒ‡ãƒ¼ã‚¿ã«å¯¾å¿œã—ãŸã€‚åŠ ãˆã¦Google Cloud Storageã‚„Google Driveã€MySQLã€BigTableãªã©ã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚‚ãƒ•ã‚§ãƒ‡ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã—ã¦å¯¾å¿œã—ãŸã€‚ã‚µãƒ¼ãƒãƒ¬ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ•ã‚©ãƒ¼ãƒ«ãƒˆãƒˆãƒ¬ãƒ©ãƒ³ãƒˆãƒªã‚¹ã‚¿ãƒ¼ãƒˆã€ä»®æƒ³ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°ãƒ¦ãƒ‹ãƒƒãƒˆã«ã‚ˆã‚Šãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆã‹ã¤ã‚ªãƒ³ãƒ‡ãƒãƒ³ãƒ‰ãªãƒªã‚½ãƒ¼ã‚¹ã‚’æä¾›å¯èƒ½ã¨ã—ã€ä½ä¾¡æ ¼ãªåˆ©ç”¨ã‚’å¯èƒ½ã¨ã—ãŸã€‚ç¾åœ¨ã§ã¯ã‚µãƒ¼ãƒãƒ¬ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’é€²åŒ–ã•ã›ã€é›†ä¸­å‹ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°ã‚„Shuffle Persistent Layerã€æŸ”è»ŸãªDAGå®Ÿè¡Œã€å‹•çš„ã‚¯ã‚¨ãƒªå®Ÿè¡Œãªã©ã‚’å®Ÿè£…ã™ã‚‹ã“ã¨ã§ã‚ˆã‚Šå„ªã‚ŒãŸã‚µãƒ¼ãƒãƒ¬ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’å®Ÿç¾ã—ãŸã€‚ãƒã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã«ãŠã‘ã‚‹ã‚«ãƒ©ãƒ ãƒŠã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸[[32])]Figure 5Figure 6Figure 7ã‚¯ã‚¨ãƒªãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ã®æœ€å°åŒ–ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªå®Ÿè¡Œã®ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ã¯å¤§ãããªã‚‹ã€‚ãã‚Œã‚’è§£æ±ºã™ã‚‹ãŸã‚ã«Dremelã§ã¯ã‚¹ã‚¿ãƒ³ãƒã‚¤ã‚µãƒ¼ãƒãƒ—ãƒ¼ãƒ«ã€ãƒãƒ«ãƒãƒ¬ãƒ™ãƒ«å®Ÿè¡Œãƒ„ãƒªãƒ¼ã€åˆ—æŒ‡å‘ã‚¹ã‚­ãƒ¼ãƒè¡¨ç¾ã€CPUã¨IOè² è·ã®ãƒãƒ©ãƒ³ã‚¹èª¿æ•´ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®å†åˆ©ç”¨ã€ä¿è¨¼ã•ã‚ŒãŸã‚­ãƒ£ãƒ‘ã‚·ãƒ†ã‚£ã€é©åˆçš„ãªã‚¯ã‚¨ãƒªã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã«ã‚ˆã‚Šå®Ÿç¾ã—ã¦ã„ã‚‹ã€‚ä½œæ¥­æ™‚é–“read27:5027:50author32:024:12summary68:5026:48]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Connection draining for Service type LoadBalancer]]></title>
            <link>https://zenn.dev/toversus/articles/1682d275ef1bb7</link>
            <guid>https://zenn.dev/toversus/articles/1682d275ef1bb7</guid>
            <pubDate>Thu, 11 May 2023 09:43:47 GMT</pubDate>
            <content:encoded><![CDATA[ã¯ã˜ã‚ã«Service ãƒªã‚½ãƒ¼ã‚¹ã¯ Kubernetes ã®ã‚µãƒ¼ãƒ“ã‚¹æ¤œå‡ºã‚’æ”¯ãˆã‚‹ã‚³ã‚¢ãƒªã‚½ãƒ¼ã‚¹ã§ã™ã€‚Service ã®ãƒ‡ãƒ¼ã‚¿ãƒ—ãƒ¬ãƒ¼ãƒ³ã¨ã—ã¦ kube-proxy ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã¯ã€å„ãƒãƒ¼ãƒ‰ä¸Šã® iptables ã‚„ ipvs ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§ L4 è² è·åˆ†æ•£ã‚’å®Ÿç¾ã—ã¦ã„ã¾ã™ã€‚Kubernetes ã¯ã€çµæœæ•´åˆæ€§ (Eventual Consistency) ã®ä¸Šã«æˆã‚Šç«‹ã¤åˆ†æ•£ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚Kubernetes ã®ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ—ãƒ¬ãƒ¼ãƒ³ãŒ Pod ã‚’å‰Šé™¤ã™ã‚‹æ™‚ã«ã€å…¨ã¦ã®ãƒãƒ¼ãƒ‰ä¸Šã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ«ãƒ¼ãƒ«ã‚’æ›´æ–°ã—ã¦ã‹ã‚‰ Pod ã‚’å‰Šé™¤ã—ãŸã‚Šã¯ã—ã¾ã›ã‚“ã€‚å‰Šé™¤ä¸­ã® Pod ã«ã‚‚ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ãŒæµ...]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[2022 å¹´ã® Accelerate State of DevOps Report ã®å†…å®¹ã‚’ã¾ã¨ã‚ã¦ã¿ãŸ]]></title>
            <link>https://sreake.com/blog/accelerate-state-of-devops-report-2022/</link>
            <guid>https://sreake.com/blog/accelerate-state-of-devops-report-2022/</guid>
            <pubDate>Thu, 11 May 2023 05:07:56 GMT</pubDate>
            <content:encoded><![CDATA[ï¼‘ï¼ã¯ã˜ã‚ã« Sreake äº‹æ¥­éƒ¨ã§ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³ã—ã¦ã„ã‚‹æ‘å±±ã§ã™ã€‚ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³ã‚’ã™ã‚‹ã«ã‚ãŸã‚Šã€DevOps ã®ç†è§£ã¨æœ€è¿‘ã®å‹•å‘ã‚’æ´ã‚€ã“ã¨ãŒå¿…è¦ã§ã‚ã‚‹ã¨æ„Ÿã˜ã€Accelerate State of DevOps Report  [â€¦]The post 2022 å¹´ã® Accelerate State of DevOps Report ã®å†…å®¹ã‚’ã¾ã¨ã‚ã¦ã¿ãŸ first appeared on sreake.com | æ ªå¼ä¼šç¤¾ã‚¹ãƒªãƒ¼ã‚·ã‚§ã‚¤ã‚¯.]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[TiDBã§å­¦ã¶NewSQLã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ for Beginners]]></title>
            <link>https://zenn.dev/nnaka2992/articles/learning_tidb_internal_for_beginner</link>
            <guid>https://zenn.dev/nnaka2992/articles/learning_tidb_internal_for_beginner</guid>
            <pubDate>Thu, 11 May 2023 01:18:19 GMT</pubDate>
            <content:encoded><![CDATA[ã¯ã˜ã‚ã«ã“ã®è¨˜äº‹ã§ã¯NewSQLã®ç‰¹å¾´ã§ã‚ã‚‹ãƒãƒ¼ãƒ‰é–“ã®åˆ†æ•£ã¨ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã‚„åˆ†æ–­è€æ€§ãªã©ãŒTiDBã§ã¯ã©ã®ã‚ˆã†ãªæŠ€è¡“ã«ã‚ˆã£ã¦å®Ÿç¾ã•ã‚Œã¦ã„ã‚‹ã‹ã‚’èª¬æ˜ã™ã‚‹ã“ã¨ã‚’ç›®çš„ã¨ã—ã¦ã„ã¾ã™ã€‚Spannerã®è«–æ–‡ãŒ2012å¹´ã«ç™ºè¡¨ã•ã‚Œã¦ã‹ã‚‰10å¹´ä»¥ä¸Šã®å¹´æœˆãŒæµã‚Œã€å„ªã‚ŒãŸè«–æ–‡ã‚„å®Ÿè£…ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã€å€‹äººã«ã‚ˆã‚‹è§£èª¬ãƒ–ãƒ­ã‚°ãªã©æŠ€è¡“çš„è©³ç´°ã«ã¤ã„ã¦è¿°ã¹ãŸè³‡æ–™ã¯å¤šãã‚ã‚Šã¾ã™ã€‚åŠ ãˆã¦ã“ã®è¨˜äº‹ã‚’å…¥é–€çš„ãªã‚‚ã®ã¨ä½ç½®ã¥ã‘ã¦ã„ã‚‹ãŸã‚å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ç¶²ç¾…çš„ã«è§£èª¬ã™ã‚‹ã¨ã„ã†ã‚ˆã‚Šã¯ã€ã‚­ãƒ¼ã‚³ãƒ³ã‚»ãƒ—ãƒˆã‚’ã©ã®ã‚ˆã†ã«å®Ÿè£…ã—ã¦ã„ã‚‹ã®ã‹ã‚’å®Ÿé¨“ã‚’æ··ã˜ãˆãªãŒã‚‰å‹•ä½œã®å®Ÿç¾æ–¹æ³•ã®è§£èª¬ã‚’ä¸­å¿ƒã«æ‰±ã„ã¾ã™ã€‚ã¾ãŸä»Šå›ã¯TiDBã‚’ãƒ™ãƒ¼ã‚¹ã«èª¬æ˜ã—...]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[GitHub ã® Secret scanningâ€™s push protection ã‚’è©¦ã—ã¦ã¿ã‚‹]]></title>
            <link>https://zenn.dev/kou_pg_0131/articles/gh-secret-scannings-push-protection</link>
            <guid>https://zenn.dev/kou_pg_0131/articles/gh-secret-scannings-push-protection</guid>
            <pubDate>Wed, 10 May 2023 10:00:00 GMT</pubDate>
            <content:encoded><![CDATA[GitHub ã® Secret scanning's push protection ãŒãƒ‘ãƒ–ãƒªãƒƒã‚¯ãƒªãƒã‚¸ãƒˆãƒªã§ç„¡æ–™ã§ä½¿ãˆã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ ğŸ‰ğŸ‰ğŸ‰https://github.blog/changelog/2023-05-09-secret-scannings-push-protection-is-available-on-public-repositories-for-free/Secret scanning's push protection ã‚’ä½¿ã†ã¨ã€ä¾‹ãˆã° AWS ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼ãªã©ã¨ã„ã£ãŸã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’ãƒªãƒã‚¸ãƒˆãƒªã¸ push ã™ã‚‹ã®ã‚’ãƒ–ãƒ­ãƒƒã‚¯ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒ...]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[ã¯ã¦ãªãƒ–ãƒ­ã‚°ã®ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã‚’â€ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã™ã‚‹æ–¹æ³•â€ã«ã¤ã„ã¦]]></title>
            <link>https://syu-m-5151.hatenablog.com/entry/2023/05/09/181943</link>
            <guid>https://syu-m-5151.hatenablog.com/entry/2023/05/09/181943</guid>
            <pubDate>Tue, 09 May 2023 09:19:43 GMT</pubDate>
            <content:encoded><![CDATA[ã¯ã¦ãªãƒ–ãƒ­ã‚°ã®è¨­å®šã‹ã‚‰ã€Markdownè¨˜æ³•ã§æ›¸ã„ãŸè¨˜äº‹ã«ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã®ã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ã‚’è‡ªå‹•çš„ã«è¿½åŠ ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã¾ãŸã€ã“ã¡ã‚‰ã®ãƒ–ãƒ­ã‚°ã¯å®Œå…¨ã«éå…¬å¼ã§ã™ã—è‡ªåˆ†ã®ãƒ–ãƒ­ã‚°ä»¥å¤–ã§ã¯è©¦ã—ã¦ã¾ã›ã‚“ã€‚ğŸ¦¾ ãƒ‡ã‚¶ã‚¤ãƒ³ã®è¨­å®šã¾ãšã€ã¯ã¦ãªãƒ–ãƒ­ã‚°ã®ç®¡ç†ç”»é¢ã«ãƒ­ã‚°ã‚¤ãƒ³ã—ã€ãƒ‡ã‚¶ã‚¤ãƒ³è¨­å®šã‚’é–‹ãã¾ã™ã€‚ğŸ¦¾ CSS ã®è¨­å®šã‚’è¡Œã†ãƒ‡ã‚¶ã‚¤ãƒ³è¨­å®šã§ã€ã€Œã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã€ã‚¿ãƒ–ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã€ã€Œãƒ‡ã‚¶ã‚¤ãƒ³CSSã€ã‚’é–‹ãã¾ã™ã€‚ã“ã“ã§ã€å…ˆã»ã©ç´¹ä»‹ã—ãŸã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’è¿½åŠ ã—ã¾ã™ã€‚pre.code {  position: relative;}.copy-button {  position: absolute;  top: 4px;  right: 4px;  display: inline-block;  padding: 8px 16px;  border: none;  border-radius: 4px;  background-color: #1e90ff;  color: #ffffff;  cursor: pointer;  font-size: 14px;  font-weight: bold;  text-decoration: none;  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);  transition: background-color 0.3s, box-shadow 0.3s;  opacity: 0;  transition: opacity 0.3s;}pre.code:hover .copy-button {  opacity: 1;}.copy-button:hover {  background-color: #2980b9;  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);}.copy-button:focus {  outline: none;}.copy-button:active {  box-shadow: none;  transform: translateY(2px);}ğŸ¦¾ ãƒ•ãƒƒã‚¿ãƒ¼HTMLã®è¨­å®šã‚’è¡Œã† æ¬¡ã«ã€ã€Œã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã€ã‚¿ãƒ–ã®ã€Œãƒ•ãƒƒã‚¿ãƒ¼HTMLã€ã«ã€ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã¾ã™ã€‚<script>  document.addEventListener('DOMContentLoaded', function() {    // ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã‚’å–å¾—    var codeBlocks = document.querySelectorAll('pre.code');        // ã™ã¹ã¦ã®ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã«ã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ã‚’è¿½åŠ     for (var i = 0; i < codeBlocks.length; i++) {      var copyButton = document.createElement('button');      copyButton.className = 'copy-button';      copyButton.textContent = 'Copy code';      copyButton.onclick = function() {        var codeElem = this.parentNode.querySelector('code') || this.parentNode;        var textArea = document.createElement('textarea');        textArea.value = codeElem.textContent.replace(/Copy code$/, ''); // "Copy code" ãƒ†ã‚­ã‚¹ãƒˆã‚’å‰Šé™¤        document.body.appendChild(textArea);        textArea.select();        document.execCommand('copy');        document.body.removeChild(textArea);      }      codeBlocks[i].appendChild(copyButton);    }  });</script>ğŸ” ç¢ºèªã—ã¦ã„ãhttps://syu-m-5151.hatenablog.com/entry/2023/04/11/084428 ã«ã¦ç¢ºèª]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[ãƒªãƒƒãƒãªãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ä»˜ãã® sleep ã‚³ãƒãƒ³ãƒ‰ã€Œslpã€ã®ç´¹ä»‹]]></title>
            <link>https://zenn.dev/kou_pg_0131/articles/slp-introduction</link>
            <guid>https://zenn.dev/kou_pg_0131/articles/slp-introduction</guid>
            <pubDate>Mon, 08 May 2023 09:32:10 GMT</pubDate>
            <content:encoded><![CDATA[ãƒªãƒƒãƒãªãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ä»˜ãã® sleep ã‚³ãƒãƒ³ãƒ‰ã§ã‚ã‚‹ slp ã‚’ä½œã‚Šã¾ã—ãŸã€‚https://github.com/koki-develop/slpã“ã†ã„ã†ã®ã“ã®è¨˜äº‹ã§ã¯ slp ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³• ~ ä½¿ã„æ–¹ã«ã¤ã„ã¦ã¾ã¨ã‚ã¾ã™ã€‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ä½¿ã„æ–¹ã¾ã¨ã‚ ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«Homebrew ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã¯ brew install ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã¾ã™ã€‚$ brew install koki-develop/tap/slpã‚‚ã—ãã¯ã€ slp ã¯ Go ã§ä½œã‚‰ã‚Œã¦ã„ã‚‹ãŸã‚ go install ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚$ go install g...]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[ã‚¯ã‚¨ãƒªã‚ªãƒ—ãƒ†ã‚£ãƒã‚¤ã‚¶ã®ç²¾åº¦ã‚’æ¤œè¨¼ã—ãŸè«–æ–‡ã‚’èª­ã¿ã¾ã—ãŸ]]></title>
            <link>https://nnaka2992.hatenablog.com/entry/2023/05/08/111343</link>
            <guid>https://nnaka2992.hatenablog.com/entry/2023/05/08/111343</guid>
            <pubDate>Mon, 08 May 2023 02:13:43 GMT</pubDate>
            <content:encoded><![CDATA[ã“ã®è¨˜äº‹ã®è¶£æ—¨2015å¹´ã«ç™ºè¡¨ã•ã‚ŒãŸã‚¯ã‚¨ãƒªã‚ªãƒ—ãƒ†ã‚£ãƒã‚¤ã‚¶ã«ãŠã‘ã‚‹ã‚«ãƒ¼ãƒ‡ã‚£ãƒŠãƒªãƒ†ã‚£æ¨å®šã¨ã‚³ã‚¹ãƒˆãƒ¢ãƒ‡ãƒ«ã€åˆ—æŒ™ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®è²¢çŒ®åº¦ã‚’è©•ä¾¡ã—ãŸè«–æ–‡ã‚’èª­ã‚“ã§ã„ãã¾ã™ã€‚How Good Are Query Optimizers, Really?è‘—è€…ã«ã¤ã„ã¦Viktor Leisã€Andrey Gubichevã€Atanas Mirchevã€Peter Bonczã€Alfons Kemperã€Thomas Neumannã‚‰ã®ã‚°ãƒ«ãƒ¼ãƒ—ã«ã‚ˆã‚‹è«–æ–‡ã€‚ã»ã¨ã‚“ã©ã®ãƒ¡ãƒ³ãƒãƒ¼ã¯DBMSã«ãŠã‘ã‚‹æœ€é©åŒ–ã«ã¤ã„ã¦ç ”ç©¶ã—ã¦ã„ã‚‹ãŒã€Atanas Mirchevã¯ã‚ˆã‚Šçµ±è¨ˆã‚„æ¢ç´¢ã¨ã„ã£ãŸæœ€é©åŒ–ã‚ˆã‚Šã®ç ”ç©¶ã‚’ã—ã¦ã„ã‚‹ã€‚å•é¡Œæ„è­˜è‰¯ã„çµåˆé †åºã‚’è¦‹ã¤ã‘ã‚‹ã“ã¨ã¯ã‚¯ã‚¨ãƒªã®æ€§èƒ½ã«å¯¾ã—ã¦å¤§ããªå½±éŸ¿ã‚’ä¸ãˆã‚‹ãŸã‚ã€ç†±å¿ƒã«ç ”ç©¶ã•ã‚Œã¦ããŸã€‚å¤å…¸çš„ãªã‚¯ã‚¨ãƒªæœ€é©åŒ–ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã§ã¯ä»¥ä¸‹ã®ã‚¹ãƒ†ãƒƒãƒ—ã§å‹•çš„è¨ˆç”»æ–¹ã«åŸºã¥ã„ãŸæœ€é©åŒ–ã‚’è¡Œãªã†ã€‚1. æœ‰åŠ¹ãªçµåˆé †åºã®åˆ—æŒ™1. ã‚«ãƒ¼ãƒ‡ã‚£ãƒŠãƒªãƒ†ã‚£æ¨å®šå€¤ã‚’å…¥åŠ›ã¨ã—ãŸã‚³ã‚¹ãƒˆãƒ¢ãƒ‡ãƒ«ã®é¸æŠç†è«–çš„ã«ã¯ã‚«ãƒ¼ãƒ‡ã‚£ãƒŠãƒªãƒ†ã‚£ã¨ã‚³ã‚¹ãƒˆãƒ¢ãƒ‡ãƒ«ã®æ¨å®šå€¤ãŒæ­£ç¢ºã§ã‚ã‚Œã°ã€æœ€é©ãªã‚¯ã‚¨ãƒªãƒ—ãƒ©ãƒ³ã‚’é¸æŠã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚ã—ã‹ã—ç¾å®Ÿã«ã¯ã‚«ãƒ¼ãƒ‡ã‚£ãƒŠãƒªãƒ†ã‚£æ¨å®šã¯ä¸€æ§˜æ€§ã‚„ç‹¬ç«‹æ€§ã¨ã„ã£ãŸå˜ç´”åŒ–ã•ã‚ŒãŸä»®å®šã«åŸºã¥ã„ã¦ãŠã‚Šã€ã—ã°ã—ã°ãã®ã‚ˆã†ãªä»®å®šã¯é–“é•ã£ã¦ã„ã‚‹ãŸã‚æ‚²æƒ¨ãªè¨ˆç”»ã‚’ä½œæˆã™ã‚‹ã€‚æ‰‹æ³•ã“ã®è«–æ–‡ã§ã¯ã‚«ãƒ¼ãƒ‡ã‚£ãƒŠãƒªãƒ†ã‚£æ¨å®šå™¨ã®è©•ä¾¡ã¨æ­£ç¢ºãªã‚³ã‚¹ãƒˆãƒ¢ãƒ‡ãƒ«ã®é‡è¦æ€§ã®è©•ä¾¡ã€ãã—ã¦åˆ—æŒ™ã•ã‚ŒãŸçµåˆé †åºã®ç©ºé–“ãŒã©ã®ç¨‹åº¦å½±éŸ¿ã™ã‚‹ã®ã‹ã‚’ä»¥ä¸‹ã®æ–¹æ³•ã§æ¤œè¨¼ã—ã€è²¢çŒ®ã‚’è¡Œãªã£ã¦ã„ã‚‹ã€‚1. IMDBãƒ‡ãƒ¼ã‚¿ã‚’ç”¨ã„ãŸJoin Order Benchmarkã¨ã„ã†JOINã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã—ãŸãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã«ã‚ˆã‚‹è©•ä¾¡ã‚’è¡Œãªã†1. å®Ÿä¸–ç•Œã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã«ãŠã‘ã‚‹ç¾å®Ÿçš„ãªã‚¯ã‚¨ãƒªã‚’ç”¨ã„ãŸE2Eã®æ¤œè¨¼ã‚’è¡Œãªã†ã€‚1. ã‚¯ã‚¨ãƒªæ€§èƒ½ã«å¯¾ã™ã‚‹ã‚«ãƒ¼ãƒ‡ã‚£ãƒŠãƒªãƒ†ã‚£ãƒ»ã‚³ã‚¹ãƒˆãƒ¢ãƒ‡ãƒ«ãƒ»åˆ—æŒ™ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®è²¢çŒ®åº¦ã‚’å®šé‡åŒ–ã—ã€æœ€é©ãªã‚¯ã‚¨ãƒªãƒ—ãƒ©ãƒ³ç”Ÿæˆã®ãŸã‚ã®ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã‚’ç­–å®šã—ã¦ã„ã‚‹ã€‚ä½œæ¥­æ™‚é–“read29:3829:38author33:083:30summary48:4414:36æ„Ÿæƒ³æ™‚é–“ãŒç„¡ãã¾ã¨ã‚é€”ä¸­ã§åˆ‡ã‚Šä¸Šã’ã¦ã—ã¾ã£ãŸã€‚ã‚„ã‚‰ãªã„ã‚ˆã‚Šãƒã‚·ã§ã¯ã‚ã‚‹ã‚‚ã®ã®ã€ã¡ã‚ƒã‚“ã¨çºã‚ã‚‹ã¨ãã«ãã‚‰ã¹ã¦ç†è§£åº¦ã«å½±éŸ¿ãŒå‡ºãã†ãªã®ã§æ™‚é–“ã«ä½™è£•ã‚’æŒã£ã¦ãŠããŸã„ã€‚å†…å®¹è‡ªä½“ã¯GWä¸­ã«PostgreSQLã®å®Ÿè£…ã‚’èª­ã‚“ã§ã„ãŸã“ã¨ã‚‚ã‚ã‚Šã€ã‚ã‚Šã¨ç†è§£ã—ã‚„ã™ã‹ã£ãŸã€‚]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[[Kubernetes 1.27] Dynamic Resource Allocation ã®ã„ã¾]]></title>
            <link>https://zenn.dev/toversus/articles/fe2aa06f133b49</link>
            <guid>https://zenn.dev/toversus/articles/fe2aa06f133b49</guid>
            <pubDate>Sat, 06 May 2023 02:11:55 GMT</pubDate>
            <content:encoded><![CDATA[!Kubernetes 1.27 æ™‚ç‚¹ã§ã‚¢ãƒ«ãƒ•ã‚¡æ©Ÿèƒ½ã®ãŸã‚ã€å®Ÿè£…ãŒå¤§ããå¤‰ã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ ã¯ã˜ã‚ã«KubeCon Europe 2023 ã§ KEP-3063 Dynamic Resource Allocation (DRA) ã«ã¤ã„ã¦ã®æ·±ã„è©±ã¨ DRA Resource Driver ã®å®Ÿè£…æ–¹æ³•ã®è©±ãŒã‚ã£ãŸã®ã§ã€kubernetes-sigs/dra-example-driver ã‚’ãƒ™ãƒ¼ã‚¹ã«è§¦ã‚ŠãªãŒã‚‰æ¤œè¨¼ã—ã¦ã¿ã¾ã—ãŸã€‚toVersus/fake-dra-driver ã§å…¬é–‹ã—ã¦ã„ã¾ã™ã€‚Device Plugins 2.0: How to Build a Drive...]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[ã€ArgoCDğŸ™ã€‘ArgoCDã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¨è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ã®ä»•çµ„ã¿]]></title>
            <link>https://hiroki-hasegawa.hatenablog.jp/entry/2023/05/02/145115</link>
            <guid>https://hiroki-hasegawa.hatenablog.jp/entry/2023/05/02/145115</guid>
            <pubDate>Tue, 02 May 2023 05:42:57 GMT</pubDate>
            <content:encoded><![CDATA[01. ã¯ã˜ã‚ã«02. æ¦‚è¦ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£â–¼ ãƒ¬ã‚¤ãƒ¤ãƒ¼â–¼ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä»•çµ„ã¿ã€ï¼‘ã€‘ã€ï¼’ã€‘ã€ï¼“ã€‘ã€ï¼”ã€‘ã€ï¼•ã€‘ã€ï¼–ã€‘ã€ï¼—ã€‘ã€ï¼˜ã€‘ã€ï¼™ã€‘ã€ï¼‘ï¼ã€‘03. repo-serverrepo-serverã¨ã¯ä»•çµ„ã¿ã€ï¼‘ã€‘ã€ï¼’ã€‘ã€ï¼“ã€‘ã€ï¼”ã€‘ã€ï¼•ã€‘ã€ï¼–ã€‘ã€ï¼—ã€‘04. application-controllerã€redis-serverapplication-controllerã¨ã¯redis-serverã¨ã¯ä»•çµ„ã¿ã€ï¼‘ã€‘ã€ï¼’ã€‘ã€ï¼“ã€‘ã€ï¼”ã€‘ã€ï¼•ã€‘ã€ï¼–ã€‘ã€ï¼—ã€‘05. dex-serverdex-serverã¨ã¯ä»•çµ„ã¿ã€ï¼‘ã€‘ã€ï¼’ã€‘ã€ï¼“ã€‘ã€ï¼”ã€‘ã€ï¼•ã€‘ã€ï¼–ã€‘06. argocd-server (argocd-apiserver)argocd-serverã¨ã¯ä»•çµ„ã¿ã€ï¼‘ã€‘ã€ï¼’ã€‘ã€ï¼“ã€‘ã€ï¼”ã€‘ã€ï¼•ã€‘ã€ï¼–ã€‘ã€ï¼—ã€‘ã€ï¼˜ã€‘ã€ï¼™ã€‘ã€ï¼‘ï¼ã€‘07. ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®ã¾ã¨ã‚08. ãŠã‚ã‚Šã«è¬è¾01. ã¯ã˜ã‚ã«ãƒ­ã‚±ãƒƒãƒˆã«ä¹—ã‚‹Argoãã‚“ã®ãƒ„ãƒ©ãŒè…¹ç«‹ã¤ã‚ãƒ¼ã€‚ã•ã¦æœ€è¿‘ã®æ¥­å‹™ã§ã€å…¨ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãŒå…±é€šåŸºç›¤ã¨ã—ã¦ä½¿ç”¨ã™ã‚‹ArgoCDã¨AWS EKS Clusterã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’ãƒªãƒ—ãƒ¬ã‚¤ã‚¹ã—ã¦ã„ã¾ã™ã€‚æ¡ç”¨ã—ãŸè¨­è¨ˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã®ç´¹ä»‹ã‚‚å…¼ã­ã¦ã€ArgoCDã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¨è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ã®ä»•çµ„ã¿ã‚’è¨˜äº‹ã§è§£èª¬ã—ã¾ã—ãŸğŸš€ArgoCDã¯ã€kubectlã‚³ãƒãƒ³ãƒ‰ã«ã‚ˆã‚‹ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã®ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’è‡ªå‹•åŒ–ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ç¾åœ¨ã«è‡³ã‚‹ã¾ã§ArgoCDã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«ã¯å¤‰é·ãŒã‚ã‚Šã€ä»Šå›ç´¹ä»‹ã™ã‚‹ã®ã¯åŸ·ç­†æ™‚ç‚¹ (2023/05/02) æ™‚ç‚¹ã§æœ€æ–°ã® 2.6 ç³»ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã§ã™ã€‚ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚„ä»•çµ„ã¿ã¯ã‚‚ã¡ã‚ã‚“ã€å€‹ã€…ã®ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã®å®Ÿè£…ã«ã‚‚ã¡ã‚‡ã£ã¨ã ã‘è¨€åŠã—ã¾ã™ã€‚ãã‚Œã§ã¯ã€ArgoCDã«ã‚ˆã‚‹ãƒ‡ãƒ—ãƒ­ã‚¤ã®ä»•çµ„ã¿ã‚’ã‚‚ã‚Šã‚‚ã‚Šå¸ƒæ•™ã—ã¦ã„ãã¾ã™ğŸ˜—02. æ¦‚è¦ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£â–¼ ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¾ãšã¯ã€ArgoCDã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒã©ã®ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã‹ã‚’è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚ArgoCDå…¬å¼ã‹ã‚‰ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå›³ãŒå…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚å›³ã‹ã‚‰ã€æ¬¡ã®ã‚ˆã†ãªã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ğŸ‘‡ä¸‹ä½ãƒ¬ã‚¤ãƒ¤ãƒ¼å‘ãã«ã—ã‹ä¾å­˜æ–¹å‘ãŒãªãã€ä¾‹ãˆã°ã‚³ã‚¢ãƒ‰ãƒ¡ã‚¤ãƒ³ã¨ã‚¤ãƒ³ãƒ•ãƒ©ã®ãƒ¬ã‚¤ãƒ¤ãƒ¼é–“ã§ä¾å­˜æ€§ã¯é€†è»¢ã•ã›ã¦ã„ãªã„ã€‚ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ç¨®é¡ (UIã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€ã‚³ã‚¢ãƒ‰ãƒ¡ã‚¤ãƒ³ã€ã‚¤ãƒ³ãƒ•ãƒ©) ã¨ãã‚Œã‚‰ã®ä¾å­˜æ–¹å‘ã‹ã‚‰ã€ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®ã‚ˆã†ãªæ§‹æˆã«ãªã£ã¦ã„ã‚‹ã€‚ç‰¹ã«ã‚³ã‚¢ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒç‹¬ç«‹ã—ãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«åˆ†å‰²ã•ã‚Œã¦ãŠã‚Šã€ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’æ¡ç”¨ã—ã¦ã„ã‚‹ã€‚â†ªï¸ï¼šargo-cd/components.md at master Â· argoproj/argo-cd Â· GitHubArgoCDã®ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¯ã€æ©Ÿèƒ½å˜ä½ã®åˆ†å‰²æ–¹æ³•ã‚’æ¡ç”¨ã—ã¦ã„ã‚‹ã¨æ¨æ¸¬ã—ã¦ã„ã¾ã™ã€‚æœ¬è¨˜äº‹ã§ã¯è©³ã—ãè¨€åŠã—ã¾ã›ã‚“ãŒã€ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®åˆ†å‰²æ–¹æ³•ã«ã¯å¤§å°ã„ãã¤ã‹ã®ç¨®é¡ãŒã‚ã‚Šã€å¢ƒç•Œä»˜ã‘ã‚‰ã‚ŒãŸã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§åˆ†å‰²ã™ã‚‹ã“ã¨ãŒãƒ™ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã¨è¨€ã‚ã‚Œã¦ã„ã¾ã™ğŸ˜(å¢ƒç•Œä»˜ã‘ã‚‰ã‚ŒãŸã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«ã¤ã„ã¦ã‚‚ã€ã¡ã‚ƒã‚“ã¨è¨˜äº‹ã‚’æŠ•ç¨¿ã—ãŸã„...)æ©Ÿèƒ½å˜ä½ã«ã‚ˆã‚‹åˆ†å‰²ã¯ã€å¢ƒç•Œä»˜ã‘ã‚‰ã‚ŒãŸã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®ãã‚Œã‚ˆã‚Šã‚‚ç²’åº¦ãŒå°ã•ããªã‚Šã¾ã™ã€‚â†ªï¸ï¼šãƒ¢ãƒãƒªã‚¹ã‹ã‚‰ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã¸ â€•ãƒ¢ãƒãƒªã‚¹ã‚’é€²åŒ–ã•ã›ã‚‹å®Ÿè·µç§»è¡Œã‚¬ã‚¤ãƒ‰ | Sam Newman, å³¶ç”° æµ©äºŒ |æœ¬ | é€šè²© | AmazonArgoCDã§ã¯ã€ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®è¨­è¨ˆå›³ã«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå›³ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå›³ã§ã¯ã€ä¾å­˜æ–¹å‘ (ãã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒã„ãšã‚Œã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½¿ç”¨ã™ã‚‹ã®ã‹) ã«ç€ç›®ã§ãã¾ã™ã€‚ãã®ãŸã‚ã€ã“ã‚Œã¯ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹é–“ã®ä¾å­˜æ–¹å‘ã‚’è¦–è¦šåŒ–ã™ã‚‹ãŸã‚ã«æœ‰åŠ¹ãªUMLå›³ã§ã™ğŸ™†ğŸ»â€â†ªï¸ï¼šComponent Diagrams - Code With Engineering Playbookâ–¼ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ¬¡ã«ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ç¨®é¡ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚ArgoCDã®å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒçµ„ã¿åˆã‚ã•ã‚Šã€ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã®è‡ªå‹•çš„ãªãƒ‡ãƒ—ãƒ­ã‚¤ã‚’å®Ÿç¾ã—ã¾ã™ã€‚ArgoCD (2.6ç³») ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ã„ãã¤ã‹ã‚ã‚Šã€ä¸»è¦ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ç¨®é¡ã¨ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ğŸ‘‡ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ                    ãƒ¬ã‚¤ãƒ¤ãƒ¼               æ©Ÿèƒ½                                                                                                                                                                                                             argocd-server (argocd-apiserver)  UI / ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³  ã¿ã‚“ãªãŒã‚ˆãçŸ¥ã‚‹ArgoCDã®ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ã™ã€‚ã¾ãŸã€ArgoCDã®APIã¨ã—ã¦ã‚‚æ©Ÿèƒ½ã—ã¾ã™ã€‚ç¾åœ¨ã€è¤‡æ•°ã®ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®è²¬å‹™ã‚’æŒã£ã¦ãŠã‚Šã€å°†æ¥çš„ã«UIã¨ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ç•°ãªã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«åˆ†å‰²ã•ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚  application-controller            ã‚³ã‚¢ãƒ‰ãƒ¡ã‚¤ãƒ³           Clusterã«ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¾ã™ã€‚ã¾ãŸã€ArgoCDç³»ã‚«ã‚¹ã‚¿ãƒ ãƒªã‚½ãƒ¼ã‚¹ã®ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã¨ã—ã¦ã‚‚æ©Ÿèƒ½ã—ã¾ã™ã€‚                                                                                            repo-server                       ã‚³ã‚¢ãƒ‰ãƒ¡ã‚¤ãƒ³           ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆ/ãƒãƒ£ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰ã‚¯ãƒ­ãƒ¼ãƒ³ã‚’å–å¾—ã—ã¾ã™ã€‚ã¾ãŸã€ã‚¯ãƒ­ãƒ¼ãƒ³ã‹ã‚‰ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚                                                                                                        redis-server                      ã‚¤ãƒ³ãƒ•ãƒ©               application-controllerã®å‡¦ç†çµæœã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ä¿ç®¡ã—ã¾ã™ã€‚                                                                                                                                                       dex-server                        ã‚¤ãƒ³ãƒ•ãƒ©               SSOã‚’æ¡ç”¨ã™ã‚‹å ´åˆã«ã€argocd-serverã®ä»£ã‚ã‚Šã«èªå¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ä½œæˆã—ã€IDãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã«ã“ã‚Œã‚’é€ä¿¡ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€argocd-serverä¸Šã®èªè¨¼ãƒ•ã‚§ãƒ¼ã‚ºã‚’IDãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã«å§”è­²ã§ãã¾ã™ã€‚                             â†ªï¸ï¼šAmazon | GitOps and Kubernetes: Continuous Deployment with Argo CD, Jenkins X, and Flux | Yuen, Billy, Matyushentsev, Alexander, Ekenstam, Todd, Suen, Jesse | PMP Examä»•çµ„ã¿ãã‚Œã§ã¯ã€ArgoCDã¯ã€ã©ã®ã‚ˆã†ã«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’çµ„ã¿åˆã‚ã›ã¦ã€ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿã“ã“ã§ã¯ãƒ‡ãƒ—ãƒ­ã‚¤å…ˆClusterç®¡ç†è€… (ãƒ‡ãƒ—ãƒ­ã‚¤å…ˆClusterã‚’ç®¡ç†ã™ã‚‹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢) ã¯ã€ArgoCDã®ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’ä»‹ã—ã¦ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã¨ã—ã¾ã—ã‚‡ã†ã€‚ã¾ãšã¯ã€æ¦‚è¦ã‚’èª¬æ˜ã—ã¦ã„ãã¾ã™ã€‚ã€ï¼‘ã€‘ArgoCDã®Clusterä¸Šã§ã€repo-serverãŒãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆ/ãƒãƒ£ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³ã‚’å–å¾—ã—ã¾ã™ã€‚ã€ï¼’ã€‘application-controllerã¯ã€repo-serverã‹ã‚‰ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’å–å¾—ã—ã¾ã™ã€‚ã€ï¼“ã€‘application-controllerã¯ã€ãƒ‡ãƒ—ãƒ­ã‚¤å…ˆClusterã®ç¾çŠ¶ã‚’ç¢ºèªã—ã¾ã™ã€‚ã€ï¼”ã€‘application-controllerã¯ã€å‡¦ç†çµæœã‚’redis-serverã«ä¿ç®¡ã—ã¾ã™ã€‚ã€ï¼•ã€‘argocd-serverã¯ã€redis-serverã‹ã‚‰ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’å–å¾—ã—ã¾ã™ã€‚ã€ï¼–ã€‘ãƒ‡ãƒ—ãƒ­ã‚¤å…ˆClusterç®¡ç†è€…ã¯ã€argocd-serverã«ãƒ­ã‚°ã‚¤ãƒ³ã—ã‚ˆã†ã¨ã—ã¾ã™ã€‚ã€ï¼—ã€‘argocd-serverã¯ã€ãƒ­ã‚°ã‚¤ãƒ³æ™‚ã«IDãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã«èªå¯ãƒ•ã‚§ãƒ¼ã‚ºã‚’å§”è­²ã™ã‚‹ãŸã‚ã«ã€dex-serverã‚’ã‚³ãƒ¼ãƒ«ã—ã¾ã™ã€‚ã€ï¼˜ã€‘dex-serverã¯ã€IDãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã«èªå¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ä½œæˆã—ã€ã“ã‚Œã‚’IDãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã«é€ä¿¡ã—ã¾ã™ã€‚ã€ï¼™ã€‘argocd-serverã§èªå¯ãƒ•ã‚§ãƒ¼ã‚ºã‚’å®Ÿæ–½ã—ã¾ã™ã€‚ãƒ­ã‚°ã‚¤ãƒ³ãŒå®Œäº†ã—ã€ãƒ‡ãƒ—ãƒ­ã‚¤å…ˆClusterç®¡ç†è€…ã¯èªå¯ã‚¹ã‚³ãƒ¼ãƒ—ã«å¿œã˜ã¦ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’æ“ä½œã§ãã¾ã™ã€‚ã€ï¼‘ï¼ã€‘application-controllerã¯ã€Clusterã«ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¾ã™ã€‚ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã®ãƒ‡ãƒ—ãƒ­ã‚¤ã®ä»•çµ„ã¿ã‚’ã–ã£ãã‚Šç´¹ä»‹ã—ã¾ã—ãŸã€‚ãŸã ã“ã‚Œã ã¨å…¨ãé¢ç™½ããªã„ã®ã§ã€å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å…·ä½“çš„ãªå‡¦ç†ã¨ã€å„ã€…ãŒã©ã®ã‚ˆã†ã«é€šä¿¡ã—ã¦ã„ã‚‹ã®ã‹ã‚’èª¬æ˜ã—ã¾ã™âœŒï¸03. repo-serverrepo-serverã¨ã¯ã¾ãšã¯ã€ã‚³ã‚¢ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¬ã‚¤ãƒ¤ãƒ¼ã«ã‚ã‚‹repo-serverã§ã™ã€‚ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆ/ãƒãƒ£ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒª (ä¾‹ï¼šGiHubã€GitHub Pagesã€Artifact Hubã€AWS ECRã€Artifact Registryã€ãªã©) ã‹ã‚‰ã‚¯ãƒ­ãƒ¼ãƒ³ã‚’å–å¾—ã—ã¾ã™ã€‚repo-serverã‚’æŒã¤Podã«ã¯ã€ä»–ã«è»½é‡ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‹ã‚‰ãªã‚‹InitContainerã¨ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ (cmp-server) ãŒãŠã‚Šã€ãã‚Œãã‚Œæ©Ÿèƒ½ãŒåˆ‡ã‚Šåˆ†ã‘ã‚‰ã‚Œã¦ã„ã¾ã™ğŸ‘ä»•çµ„ã¿ã€ï¼‘ã€‘repo-serverã®èµ·å‹•æ™‚ã«ã€InitContainerã§ãŠå¥½ããªãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆç®¡ç†ãƒ„ãƒ¼ãƒ« (Helmã€Kustomizeã€ãªã©) ã‚„ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ (helm-secretsã€KSOPSã€SOPSã€argocd-vault-pluginã€ãªã©) ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚ã¾ãŸã€ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ã®cmp-serverã§ã¯èµ·å‹•æ™‚ã«/var/run/argocd/argocd-cmp-serverã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚Šã€InitContainer (ã“ã“ã§ã¯copyutilã‚³ãƒ³ãƒ†ãƒŠ) ã‚’ä½¿ç”¨ã—ã¦ã€ArgoCDã®ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‹ã‚‰argocd-cliã®ãƒã‚¤ãƒŠãƒªãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã™ã€‚repo-serverã®ã–ã£ãã‚Šã—ãŸå®Ÿè£…ä¾‹ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ğŸ‘‡ã“ã“ã§ã¯ã€ArgoCDã§ä½¿ã„ãŸã„ãƒ„ãƒ¼ãƒ« (Helmã€SOPSã€helm-secrets) ã‚’InitContainerã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ã¾ã™ã€‚apiVersion: v1kind: Podmetadata:  name: argocd-repo-server  namespace: argocdspec:  containers:    - name: repo-server      image: quay.io/argoproj/argocd:latest  initContainers:    # Helmã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹InitContainer    - name: helm-installer      image: alpine:latest      command:        - /bin/sh        - -c      args:        - |          # ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å‡¦ç†      volumeMounts:        - mountPath: /custom-tools          name: custom-tools    # SOPSã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹InitContainer    - name: sops-installer      image: alpine:latest      command:        - /bin/sh        - -c      args:        - |          # ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å‡¦ç†      volumeMounts:        - mountPath: /custom-tools          name: custom-tools    # helm-secretsã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹InitContainer    - name: helm-secrets-installer      image: alpine:latest      command:        - /bin/sh        - -c      args:        - |          # ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å‡¦ç†      volumeMounts:        - mountPath: /helm-working-dir/plugins          name: helm-working-dir    ...    # cmp-serverã«argocd-cliã®ãƒã‚¤ãƒŠãƒªã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹InitContainer    - name: copyutil      image: quay.io/argoproj/argocd:latest      command:        - cp        - -n        - /usr/local/bin/argocd        - /var/run/argocd/argocd-cmp-server      volumeMounts:        - name: var-files          mountPath: /var/run/argocd  # Podã®å…±æœ‰ãƒœãƒªãƒ¥ãƒ¼ãƒ   volumes:    - name: custom-tools      emptyDir: {}    - name: var-files      emptyDir: {}â†ªï¸ï¼šCustom Tooling - Argo CD - Declarative GitOps CD for KubernetesArgoCDã®ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ (quay.io/argoproj/argocd) ã«ã¯ã€ã„ãã¤ã‹ã®ãƒ„ãƒ¼ãƒ« (ä¾‹ï¼šHelmã€Kustomizeã€Ksã€Jsonnetã€ãªã©) ãŒã‚ã‚‰ã‹ã˜ã‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã¾ã™ã€‚ãã®ãŸã‚ã€ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ã®cmp-serverã‚’æ¡ç”¨ã—ãªã„å ´åˆã¯ã€ã“ã‚Œã‚‰ã®ãƒ„ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚åå¯¾ã«ã€cmp-serverã‚’æ¡ç”¨ã™ã‚‹å ´åˆã¯ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå¿…è¦ã«ãªã‚Šã¾ã™ğŸ™‡ğŸ»â€â†ªï¸ï¼šCustom Tooling - Argo CD - Declarative GitOps CD for Kubernetesã€ï¼’ã€‘repo-serverã¯ã€Secret (argocd-repo-creds) ã‹ã‚‰ãƒªãƒã‚¸ãƒˆãƒªã®èªè¨¼æƒ…å ±ã‚’å–å¾—ã—ã¾ã™ã€‚argocd-repo-credsã§ã¯ãƒªãƒã‚¸ãƒˆãƒªã®èªè¨¼æƒ…å ±ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ç®¡ç†ã—ã¦ã„ã¾ã™ã€‚æŒ‡å®šã—ãŸæ–‡å­—åˆ—ã‹ã‚‰å§‹ã¾ã‚‹ (æœ€é•·ä¸€è‡´) URLã‚’æŒã¤ãƒªãƒã‚¸ãƒˆãƒªã«æ¥ç¶šã™ã‚‹å ´åˆã«ã€ãã‚Œã‚‰ã®æ¥ç¶šã§èªè¨¼æƒ…å ±ã‚’ä¸€æ‹¬ã—ã¦é©ç”¨ã§ãã¾ã™ã€‚argocd-repo-credsã®ã–ã£ãã‚Šã—ãŸå®Ÿè£…ä¾‹ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ğŸ‘‡ã“ã“ã§ã¯ã€ãƒªãƒã‚¸ãƒˆãƒªã®SSHå…¬é–‹éµèªè¨¼ã‚’æ¡ç”¨ã—ã€argocd-repo-credsã«å…±é€šã®ç§˜å¯†éµã‚’è¨­å®šã—ã¦ã„ã¾ã™ã€‚apiVersion: v1kind: Secretmetadata:  name: argocd-repo-creds-github  namespace: argocd  labels:    argocd.argoproj.io/secret-type: repo-credstype: Opaquedata:  type: git  url: https://github.com/hiroki-hasegawa  # ç§˜å¯†éµ  sshPrivateKey: |    MIIC2 ...ã‚ã¨ã¯ã€å„ãƒªãƒã‚¸ãƒˆãƒªã®Secret (argocd-repo) ã«URLã‚’è¨­å®šã—ã¦ãŠãã¾ã™ã€‚ã™ã‚‹ã¨ã€å…ˆã»ã©ã®argocd-repo-credsã®URLã«æœ€é•·ä¸€è‡´ã™ã‚‹URLã‚’æŒã¤Secretã«ã¯ã€ä¸€æ‹¬ã—ã¦ç§˜å¯†éµãŒé©ç”¨ã•ã‚Œã¾ã™ã€‚# foo-repositoryã‚’ãƒãƒ¼ãƒªãƒ³ã‚°ã™ã‚‹ãŸã‚ã®argocd-repoapiVersion: v1kind: Secretmetadata:  namespace: argocd  name: foo-argocd-repo  labels:    argocd.argoproj.io/secret-type: repositorytype: Opaquedata:  # èªè¨¼æƒ…å ±ã¯è¨­å®šã—ãªã„ã€‚  # ãƒãƒ£ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªå  name: foo-repository  # https://github.com/hiroki-hasegawa ã«æœ€é•·ä¸€è‡´ã™ã‚‹ã€‚  url: https://github.com/hiroki-hasegawa/foo-chart.git---# bar-repositoryã‚’ãƒãƒ¼ãƒªãƒ³ã‚°ã™ã‚‹ãŸã‚ã®argocd-repoapiVersion: v1kind: Secretmetadata:  namespace: argocd  name: bar-argocd-repo  labels:    argocd.argoproj.io/secret-type: repositorytype: Opaquedata:  # èªè¨¼æƒ…å ±ã¯è¨­å®šã—ãªã„ã€‚  # ãƒãƒ£ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªå  name: bar-repository  # https://github.com/hiroki-hasegawa ã«æœ€é•·ä¸€è‡´ã™ã‚‹ã€‚  url: https://github.com/hiroki-hasegawa/bar-chart.gitâ†ªï¸ï¼šDeclarative Setup - Argo CD - Declarative GitOps CD for Kubernetesã€ï¼“ã€‘repo-serverã¯ã€èªè¨¼æƒ…å ±ã‚’ä½¿ç”¨ã—ã¦ã€ãƒªãƒã‚¸ãƒˆãƒªã«git cloneã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚å–å¾—ã—ãŸã‚¯ãƒ­ãƒ¼ãƒ³ã‚’ã€/tmp/_argocd-repoãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ä¸‹ã«UUIDã®åå‰ã§ä¿ç®¡ã—ã¾ã™ã€‚ã¾ãŸã€ãƒªãƒã‚¸ãƒˆãƒªã®å¤‰æ›´ã‚’ãƒãƒ¼ãƒªãƒ³ã‚°ã—ã€å¤‰æ›´ã‚’æ¤œçŸ¥ã—ãŸå ´åˆã¯git fetchã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚# ã‚¯ãƒ­ãƒ¼ãƒ³ãŒä¿ç®¡ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã§ãã‚‹$ kubectl -it exec argocd-repo-server \    -c repo-server \    -n foo \    -- bash -c "ls /tmp/_argocd-repo/<URLã«åŸºã¥ãUUID>"# ãƒªãƒã‚¸ãƒˆãƒªå†…ã®ãƒ•ã‚¡ã‚¤ãƒ«Chart.yaml  README.md  templates  values.yamlâ†ªï¸ï¼šcustom repo-server - where is the local cache kept? Â· argoproj/argo-cd Â· Discussion #9889 Â· GitHub2.3ä»¥å‰ã§ã¯ã€repo-serverã¯/tmpãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ä¸‹ã«URLã«åŸºã¥ãåå‰ã§ã‚¯ãƒ­ãƒ¼ãƒ³ã‚’ä¿ç®¡ã—ã¾ã™ã€‚$ kubectl -it exec argocd-repo-server \    -c repo-server \    -n foo \    -- bash -c "ls /tmp/https___github.com_hiroki-hasegawa_foo-repository"# ãƒªãƒã‚¸ãƒˆãƒªå†…ã®ãƒ•ã‚¡ã‚¤ãƒ«Chart.yaml  README.md  templates  values.yamlã€ï¼”ã€‘repo-serverã¯ã€Volumeä¸Šã®Unixãƒ‰ãƒ¡ã‚¤ãƒ³ã‚½ã‚±ãƒƒãƒˆã‚’ä»‹ã—ã¦ã€ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ (cmp-server) ã«ã‚ˆã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®å®Ÿè¡Œã‚’ã‚³ãƒ¼ãƒ«ã—ã¾ã™ã€‚Unixãƒ‰ãƒ¡ã‚¤ãƒ³ã‚½ã‚±ãƒƒãƒˆã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®å®Ÿä½“ã¯.sockãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚$ kubectl exec -it argocd-repo-server -c foo-plugin-cmp-server\    -- bash -c "ls /home/argocd/cmp-server/plugins/"foo-plugin.sockUnixã‚½ã‚±ãƒƒãƒˆãƒ‰ãƒ¡ã‚¤ãƒ³ã¯ã€åŒã˜OSä¸Šã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‚’ä»‹ã—ã¦ã€ãƒ‡ãƒ¼ã‚¿ã‚’ç›´æ¥çš„ã«é€å—ä¿¡ã™ã‚‹ä»•çµ„ã¿ã§ã™ã€‚Unixã‚½ã‚±ãƒƒãƒˆãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€åŒã˜VolumeãŒãƒã‚¦ãƒ³ãƒˆã•ã‚ŒãŸã‚³ãƒ³ãƒ†ãƒŠã®ãƒ—ãƒ­ã‚»ã‚¹é–“ã§ã€ãƒ‡ãƒ¼ã‚¿ã‚’é€å—ä¿¡ã§ãã¾ã™ğŸ‘â†ªï¸ï¼šASCII.jpï¼šUnixãƒ‰ãƒ¡ã‚¤ãƒ³ã‚½ã‚±ãƒƒãƒˆ (1/2)ã€ï¼•ã€‘cmp-serverã¯ã€æš—å·åŒ–ã‚­ãƒ¼ (ä¾‹ï¼šAWS KMSã€Google CKMã€ãªã©) ã‚’ä½¿ç”¨ã—ã¦Secretã‚¹ãƒˆã‚¢ (AWS SecretManagerã€Google SecretManagerã€SOPSã€Vaultã€ãªã©) ã®æš—å·åŒ–å¤‰æ•°ã‚’å¾©å·åŒ–ã—ã¾ã™ã€‚ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ãŒHTTPSãƒ—ãƒ­ãƒˆã‚³ãƒ«ã®ä½¿ç”¨ã‚’æ±‚ã‚ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚cmp-serverã«è»½é‡ãªã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã¨ã€/etc/sslãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª (OSã«ã‚ˆã‚‹)ã€€ã«SSLè¨¼æ˜æ›¸ãŒç„¡ãã€cmp-serverãŒHTTPSãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’ä½¿ç”¨ã§ããªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ãã®å ´åˆã¯ã€ãŠå¥½ããªæ–¹æ³•ã§è¨¼æ˜æ›¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã€ã‚³ãƒ³ãƒ†ãƒŠã«ãƒã‚¦ãƒ³ãƒˆã™ã‚‹ã‚ˆã†ã«ã—ã¦ãã ã•ã„ğŸ‘apiVersion: v1kind: Podmetadata:  name: argocd-repo-server  namespace: argocdspec:  containers:    - name: repo-server      image: quay.io/argoproj/argocd:latest  ...    # ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ã®cmp-server    - name: helm-secrets-cmp-server      image: ubuntu:latest      ...      volumeMounts:        # ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ãŒAWS KMSã‚’ä½¿ç”¨ã™ã‚‹æ™‚ã«HTTPSãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ãŸã‚ã€SSLè¨¼æ˜æ›¸ã‚’ãƒã‚¦ãƒ³ãƒˆã™ã‚‹        - name: certificate          mountPath: /etc/ssl  ...  initContainers:    - name: certificate-installer      image: ubuntu:latest      command:        - /bin/sh        - -c      args:        - |          apt-get update -y          # ãƒ«ãƒ¼ãƒˆè¨¼æ˜æ›¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹          apt-get install -y ca-certificates          # è¨¼æ˜æ›¸ã‚’æ›´æ–°ã™ã‚‹          update-ca-certificates      volumeMounts:        - mountPath: /etc/ssl          name: certificate  volumes:    - name: certificate      emptyDir: {}ã€ï¼–ã€‘cmp-serverãŒãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆç®¡ç†ãƒ„ãƒ¼ãƒ« (ä¾‹ï¼šHelmã€Kustomize) ã§ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’ä½œæˆã™ã‚‹æ™‚ã«ã€ã“ã‚Œã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ (helm-secretsã€argocd-vault-pluginã€ãªã©) ã‚’ä½¿ç”¨ã—ãŸã„ã‚ˆã†ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ãŒã‚ã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã®ä½œæˆæ™‚ã®è¿½åŠ å‡¦ç†ã¨ã—ã¦ã€ConfigMapé…ä¸‹ã®ConfigManagementPluginã§ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®å‡¦ç†ã‚’å®šç¾©ã—ã¾ã™ã€‚ã–ã£ãã‚Šã—ãŸå®Ÿè£…ä¾‹ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ğŸ‘‡ã“ã“ã§ã¯ã€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¨ã—ã¦helm-secretsã‚’æ¡ç”¨ã—ã€helm secrets templateã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œã‚’å®šç¾©ã—ã¾ã™ã€‚apiVersion: v1kind: ConfigMapmetadata:  name: argocd-cmp-cm  namespace: argocddata:  helm-secrets-plugin.yaml: |    apiVersion: argoproj.io/v1alpha1    kind: ConfigManagementPlugin    metadata:      namespace: argocd      name: helm-secrets    spec:      generate:        command:          - /bin/bash          - -c        args:          - |            set -o pipefail            helm secrets template -f $ARGOCD_ENV_SECRETS -f $ARGOCD_ENV_VALUES -n $ARGOCD_APP_NAMESPACE $ARGOCD_APP_NAME .  foo-plugin.yaml: |    ...è¤‡æ•°ã®ConfigManagementPluginã®ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’å®šç¾©ã§ãã‚‹ã‚ˆã†ã«ã€å„ConfigManagementPluginã§ç•°ãªã‚‹ãƒ•ã‚¡ã‚¤ãƒ«åã¨ã—ã€ConfigMapã§ç®¡ç†ã™ã‚‹ã¨è‰¯ã„ã§ã™ğŸ‘ã€ï¼—ã€‘cmp-serverã¯ã€ã‚’å®Ÿè¡Œã—ã€Secretã‚’å«ã‚€ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚ConfigMapé…ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’plugin.yamlã®åå‰ã§ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ã«ãƒã‚¦ãƒ³ãƒˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã¾ãŸã€å…ˆã»ã©ã®Unixãƒ‰ãƒ¡ã‚¤ãƒ³ã‚½ã‚±ãƒƒãƒˆã®.sockãƒ•ã‚¡ã‚¤ãƒ«ã‚„ã€ cmp-serverãŒãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã®å„ç¨®ãƒã‚¤ãƒŠãƒªãƒ•ã‚¡ã‚¤ãƒ«ã‚‚ãƒã‚¦ãƒ³ãƒˆãŒå¿…è¦ã§ã™ã€‚ã–ã£ãã‚Šã—ãŸå®Ÿè£…ä¾‹ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ğŸ‘‡ã“ã“ã§ã¯ã€helm-secretsãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ (helm-secrets-cmp-server) ã‚’ä½œæˆã—ã¾ã™ã€‚apiVersion: v1kind: Podmetadata:  name: argocd-repo-serverspec:  containers:    # repo-server    - name: repo-server      image: quay.io/argoproj/argocd:latest    ...    # helm-secretsã®cmp-server    - name: helm-secrets-cmp-server      # ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã¯è»½é‡ã«ã™ã‚‹      image: ubuntu:latest      command:        - /var/run/argocd/argocd-cmp-server      env:        # helmãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®å ´æ‰€ã‚’è¨­å®šã™ã‚‹        - name: HELM_PLUGINS          value: /helm-working-dir/plugins      securityContext:        runAsNonRoot: true        runAsUser: 999      volumeMounts:        # ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³ã‚’ã‚³ãƒ³ãƒ†ãƒŠã«ãƒã‚¦ãƒ³ãƒˆã™ã‚‹        - name: tmp          mountPath: /tmp        # ConfigManagementPluginã®ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆ (helm-secrets.yaml) ã‚’ "plugin.yaml" ã®åå‰ã§ã‚³ãƒ³ãƒ†ãƒŠã«ãƒã‚¦ãƒ³ãƒˆã™ã‚‹        - name: argocd-cmp-cm          mountPath: /home/argocd/cmp-server/config/plugin.yaml          subPath: helm-secrets.yaml        # ã‚³ãƒ³ãƒ†ãƒŠé–“ã§é€šä¿¡ã™ã‚‹ãŸã‚ã®Unixãƒ‰ãƒ¡ã‚¤ãƒ³ã‚½ã‚±ãƒƒãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ³ãƒ†ãƒŠã«ãƒã‚¦ãƒ³ãƒˆã™ã‚‹        - name: plugins          mountPath: /home/argocd/cmp-server/plugins        # ä»»æ„ã®ãƒ„ãƒ¼ãƒ«ã®ãƒã‚¤ãƒŠãƒªãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ³ãƒ†ãƒŠã«ãƒã‚¦ãƒ³ãƒˆã™ã‚‹        - name: custom-tools          mountPath: /usr/local/bin        # helmãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ãƒã‚¤ãƒŠãƒªã‚’ã‚³ãƒ³ãƒ†ãƒŠã«ãƒã‚¦ãƒ³ãƒˆã™ã‚‹        - name: helm-working-dir          mountPath: /helm-working-dir/plugins      ...  # Podã®å…±æœ‰ãƒœãƒªãƒ¥ãƒ¼ãƒ   volumes:    # ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³ã‚’å«ã‚€    - name: tmp      emptyDir: {}    # Helmãªã©ã®ä»»æ„ã®ãƒ„ãƒ¼ãƒ«ã‚’å«ã‚€    - name: custom-tools      emptyDir: {}    # helmãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’å«ã‚€    - name: helm-working-dir      emptyDir: {}ArgoCDã®v2.6ã§ã¯ã€ConfigManagementPluginã®ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’/home/argocd/cmp-server/configãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã€plugin.yamlã®åå‰ã§ãƒã‚¦ãƒ³ãƒˆã—ãªã„ã¨ã„ã‘ã¾ã›ã‚“ã€‚ã“ã‚Œã¯ã€cmp-serverã®èµ·å‹•ã‚³ãƒãƒ³ãƒ‰ (/var/run/argocd/argocd-cmp-server) ãŒplugin.yamlã®åå‰ã—ã‹æ‰±ãˆãªã„ãŸã‚ã§ã™ã€‚ä»Šå¾Œã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã§æ”¹å–„ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ãŒã€v2.6ã§ã¯ã€ConfigManagementPluginã®æ•°ã ã‘cmp-serverãŒå¿…è¦ã«ãªã£ã¦ã—ã¾ã„ã¾ã™ğŸ™‡ğŸ»â€ä»Šå›ã¯è©³ã—ãè¨€åŠã—ã¾ã›ã‚“ãŒã€ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®Secretã‚¹ãƒˆã‚¢ (ä¾‹ï¼šAWS SecretManagerã€Google SecretManagerã€ãªã©) ã®å¤‰æ•°ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã¯ã€Secretã®ãƒ‡ãƒ¼ã‚¿æ³¨å…¥ãƒ„ãƒ¼ãƒ«ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ (ç‰¹ã«argocd-vault-plugin) ã¯å¿…é ˆã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã“ã®å ´åˆã€ä»£ã‚ã‚Šã«Secretsã‚¹ãƒˆã‚¢CSIãƒ‰ãƒ©ã‚¤ãƒãƒ¼ã‚„ExternalSecretsOperatorã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚ã“ã‚Œã‚‰ã¯ã€ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‹ã‚‰å¤‰æ•°ã‚’å–å¾—ã—ã€ã“ã‚Œã‚’Secretã«ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦æ³¨å…¥ã—ã¦ãã‚Œã¾ã™ğŸ™‡ğŸ»â€â†ªï¸ï¼šHow to manage Kubernetes secrets with GitOps? | Akuity04. application-controllerã€redis-serverapplication-controllerã¨ã¯ã‚³ã‚¢ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¬ã‚¤ãƒ¤ãƒ¼ã«ã‚ã‚‹application-controllerã§ã™ã€‚Clusterã«ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¾ã™ã€‚ã¾ãŸã€ArgoCDç³»ã‚«ã‚¹ã‚¿ãƒ ãƒªã‚½ãƒ¼ã‚¹ã®ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã¨ã—ã¦ã‚‚æ©Ÿèƒ½ã—ã¾ã™ã€‚redis-serverã¨ã¯ã‚¤ãƒ³ãƒ•ãƒ©ãƒ¬ã‚¤ãƒ¤ãƒ¼ã«ã‚ã‚‹redis-serverã§ã™ã€‚application-controllerã®å‡¦ç†çµæœã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ä¿ç®¡ã—ã¾ã™ã€‚ä»•çµ„ã¿ã€ï¼‘ã€‘ArgoCDç”¨Clusterã®ç®¡ç†è€…ã¯ã€Clusterã«ArgoCDç³»ã®ã‚«ã‚¹ã‚¿ãƒ ãƒªã‚½ãƒ¼ã‚¹ (ä¾‹ï¼šApplicationã€AppProjectã€ãªã©)ã€€ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¾ã™ã€‚ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’ä½œæˆã§ãã¾ã™ã€‚ï¸â†ªï¸ï¼šGitHub - argoproj/argo-helm: ArgoProj Helm ChartsãŸã ã—Helmã®é‡è¦ãªä»•æ§˜ã¨ã—ã¦ã€ãƒãƒ£ãƒ¼ãƒˆã®æ›´æ–°æ™‚ã«ä½¿ç”¨ã™ã‚‹helm upgradeã‚³ãƒãƒ³ãƒ‰ã¯ã€CRDã‚’ä½œæˆã§ãã‚‹ä¸€æ–¹ã§ã“ã‚Œã‚’å¤‰æ›´ã§ãã¾ã›ã‚“ã€‚Helmã§CRDã‚’ä½œæˆã™ã‚‹ã¨Helmã®ç®¡ç†ãƒ©ãƒ™ãƒ«ãŒæŒ¿å…¥ã•ã‚Œã¦ã—ã¾ã†ãŸã‚ã€ä½œæˆã®æ™‚ç‚¹ã‹ã‚‰CRDãŒHelmã®ç®¡ç†å¤–ã¨ãªã‚‹ã‚ˆã†ã«ã€kubectlã‚³ãƒãƒ³ãƒ‰ã§CRDã‚’ä½œæˆã—ãŸæ–¹ãŒã‚ˆã„ã§ã™ğŸ‘$ kubectl diff -k "https://github.com/argoproj/argo-cd/manifests/crds?ref=<ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¿ã‚°>"$ kubectl apply -k "https://github.com/argoproj/argo-cd/manifests/crds?ref=<ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¿ã‚°>"ArgoCDã§ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹å ´åˆã¯ã“ã®ä»•æ§˜ã‚’æ°—ã«ã—ãªãã¦è‰¯ã„ã®ã‹ãªã€ã¨æ€ã£ãŸæ–¹ãŒã„ã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã§ã™ã€‚ã§ã™ãŒæœ¬è¨˜äº‹ã§è§£èª¬ã—ãŸé€šã‚Šã€ArgoCDã¯cmp-serverã®helm templateã‚³ãƒãƒ³ãƒ‰ (ã“ã®æ™‚ã€--include-crdsã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒæœ‰åŠ¹ã«ãªã£ã¦ã„ã‚‹) ã‚„ã€application-controllerã®kubectl applyã‚³ãƒãƒ³ãƒ‰ã‚’çµ„ã¿åˆã‚ã›ã¦ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ã„ã‚‹ãŸã‚ã€CRDã‚‚ã¡ã‚ƒã‚“ã¨æ›´æ–°ã—ã¦ãã‚Œã¾ã™ğŸ‘ğŸ»ï¸â†ªï¸ï¼šHelm | Custom Resource Definitionsã€ï¼’ã€‘kube-controller-managerã¯ã€application-controllerã‚’æ“ä½œã—ã€Reconciliationã‚’å®Ÿæ–½ã—ã¾ã™ã€‚application-controllerã¯ã€Etcdä¸Šã«æ°¸ç¶šåŒ–ã•ã‚ŒãŸãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã¨åŒã˜çŠ¶æ…‹ã®ArgoCDç³»ã‚«ã‚¹ã‚¿ãƒ ãƒªã‚½ãƒ¼ã‚¹ã‚’ä½œæˆ/å¤‰æ›´ã—ã¾ã™ã€‚How Operators work in Kubernetes | Red Hat Developerã€ï¼“ã€‘application-controllerã¯ã€repo-serverã‹ã‚‰ãƒªãƒã‚¸ãƒˆãƒªã®ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’å–å¾—ã—ã¾ã™ã€‚å–å¾—ã—ãŸãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã¯ã€repo-serverã®ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ã§ã‚ã‚‹cmp-serverãŒä½œæˆã—ãŸã‚‚ã®ã§ã™ã€‚ã€ï¼”ã€‘application-controllerã¯ã€ãƒ‡ãƒ—ãƒ­ã‚¤å…ˆClusterã‚’ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ã—ã¾ã™ã€‚application-controllerã«ã¯ã€gitops-engineãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒå†…è”µã•ã‚Œã¦ãŠã‚Šã€ã“ã‚Œã¯ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ã‹ã‚‰ãƒ‡ãƒ—ãƒ­ã‚¤ã¾ã§ã®åŸºæœ¬çš„ãªå‡¦ç†ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰ãªã‚Šã¾ã™ğŸ‘‡gitops-engine/â”œâ”€â”€ pkgâ”‚   â”œâ”€â”€ cacheâ”‚   â”œâ”€â”€ diff   # ãƒªãƒã‚¸ãƒˆãƒªã¨Clusterã®é–“ã®ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã®å·®åˆ†ã‚’æ¤œå‡ºã™ã‚‹ã€‚ArgoCDã®Diffæ©Ÿèƒ½ã«ç›¸å½“ã™ã‚‹ã€‚â”‚   â”œâ”€â”€ engine # ä»–ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ã„ã€GitOpsã®ä¸€é€£ã®å‡¦ç†ã‚’å®Ÿè¡Œã™ã‚‹ã€‚â”‚   â”œâ”€â”€ health # Clusterã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã€‚ArgoCDã®ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯æ©Ÿèƒ½ã«ç›¸å½“ã™ã‚‹ã€‚â”‚   â”œâ”€â”€ sync   # Clusterã«ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã€‚ArgoCDã®Syncæ©Ÿèƒ½ã«ç›¸å½“ã™ã‚‹ã€‚â”‚   â””â”€â”€ utils  # ä»–ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«æ±ç”¨çš„ãªé–¢æ•°ã‚’æä¾›ã™ã‚‹ã€‚â”‚...â†ªï¸ï¼šgitops-engine/design-top-down.md at master Â· argoproj/gitops-engine Â· GitHubã€ï¼•ã€‘application-controllerã¯ã€ãƒ‡ãƒ—ãƒ­ã‚¤å…ˆClusterã®ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã¨ã€repo-serverã‹ã‚‰å–å¾—ã—ãŸãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã®å·®åˆ†ã‚’æ¤œå‡ºã—ã¾ã™ã€‚ã“ã“ã§ã€kubectl diffã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡ŒãŒè‡ªå‹•åŒ–ã•ã‚Œã¦ã„ã¾ã™ã€‚ã€ï¼–ã€‘application-controllerã¯ã€å‡¦ç†çµæœã‚’redis-serverã«ä¿ç®¡ã—ã¾ã™ã€‚redis-serverã¯ã€Applicationã‚„ãƒªãƒã‚¸ãƒˆãƒªã®ã‚³ãƒŸãƒƒãƒˆã®å˜ä½ã§ã€application-controllerã®å‡¦ç†çµæœã‚’ä¿ç®¡ã—ã¦ã„ã¾ã™ã€‚$ kubectl exec -it argocd-redis-server \    -n foo \    -- sh -c "redis-cli --raw"127.0.0.1:6379> keys *...app|resources-tree|<Applicationå>|<ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒãƒ¼ã‚¸ãƒ§ãƒ³>cluster|info|<ãƒ‡ãƒ—ãƒ­ã‚¤å…ˆClusterã®URL>|<ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒãƒ¼ã‚¸ãƒ§ãƒ³>git-refs|<ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆ/ãƒãƒ£ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªã®URL>|<ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒãƒ¼ã‚¸ãƒ§ãƒ³>mfst|app.kubernetes.io/instance|<Applicationå>|<æœ€æ–°ã®ã‚³ãƒŸãƒƒãƒˆãƒãƒƒã‚·ãƒ¥å€¤>|<ãƒ‡ãƒ—ãƒ­ã‚¤å…ˆNamespace>|*****|<ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒãƒ¼ã‚¸ãƒ§ãƒ³>...ã€ï¼—ã€‘application-controllerã¯ã€Applicationã®æ“ä½œã«å¿œã˜ã¦ã€Clusterã«ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¾ã™ã€‚ã“ã“ã§ã€kubectl applyã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡ŒãŒè‡ªå‹•åŒ–ã•ã‚Œã¦ã„ã¾ã™ã€‚Kubernetesãƒªã‚½ãƒ¼ã‚¹ã®ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã«ã¯ã€metadata.managedFieldsã‚­ãƒ¼ãŒã‚ã‚Šã€ä½•ãŒãã®ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’ä½œæˆ/å¤‰æ›´ã—ãŸã®ã‹ã‚’ç¢ºèªã§ãã¾ã™ã€‚å®Ÿéš›ã«ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’ç¢ºèªã—ã¦ã¿ã‚‹ã¨ã€ç¢ºã‹ã«application-controllerãŒãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’ä½œæˆ/å¤‰æ›´ã—ã¦ãã‚ŒãŸã“ã¨ã‚’ç¢ºèªã§ãã¾ã™ã€‚apiVersion: apps/v1kind: Deploymentmetadata:  managedFields:    # ArgoCDã®application-controllerã«ã‚ˆã‚‹ç®¡ç†    - manager: argocd-application-controller      apiVersion: apps/v1      # kube-apiserverã«å¯¾ã™ã‚‹ãƒªã‚¯ã‚¨ã‚¹ãƒˆå†…å®¹      operation: Update      time: "2022-01-01T16:00:00.000Z"      # ArgoCDã®application-controllerãŒç®¡ç†ã™ã‚‹ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã®ã‚­ãƒ¼éƒ¨åˆ†      fields: ...ï¸â†ªï¸ï¼šServer-Side Apply | Kubernetes05. dex-serverdex-serverã¨ã¯ã‚¤ãƒ³ãƒ•ãƒ©ãƒ¬ã‚¤ãƒ¤ãƒ¼ã«ã‚ã‚‹dex-serverã§ã™ã€‚SSO (ä¾‹ï¼šOAuth 2.0ã€SAMLã€OIDC) ã‚’æ¡ç”¨ã™ã‚‹å ´åˆã«ã€argocd-serverã®ä»£ã‚ã‚Šã«èªå¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ä½œæˆã—ã€IDãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ (ä¾‹ï¼šGitHubã€Keycloakã€AWS Cognitoã€Google Authã€ãªã©) ã«ã“ã‚Œã‚’é€ä¿¡ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€argocd-serverä¸Šã®èªè¨¼ãƒ•ã‚§ãƒ¼ã‚ºã‚’IDãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã«å§”è­²ã§ãã¾ã™ã€‚â†ªï¸ï¼šGitHub - dexidp/dex: OpenID Connect (OIDC) identity and OAuth 2.0 provider with pluggable connectorsdex-serverã‚’ä½¿ã‚ãšã«ã€argocd-serverã‹ã‚‰IDãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã«èªå¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ç›´æ¥çš„ã«é€ä¿¡ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚åŸ·ç­†æ™‚ç‚¹ (2023/05/02) ã§ã€argocd-serverã¯ç‰¹ã«OIDCã®èªå¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ä½œæˆã§ãã‚‹ãŸã‚ã€ãƒ­ã‚°ã‚¤ãƒ³è¦ä»¶ãŒOIDCã®å ´åˆã¯ã€dex-serverã‚’å¿…ãšã—ã‚‚æ¡ç”¨ã—ã¦ãªãã‚‚ã‚ˆã„ã§ã™ã€‚è¨€ã„æ›ãˆã‚Œã°ã€ãã®ä»–ã®SSO (ä¾‹ï¼šOAuth 2.0ã€SAML) ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã¯ã€dex-serverã‚’æ¡ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ğŸ‘ï¸â†ªï¸ï¼šOverview - Argo CD - Declarative GitOps CD for Kubernetesä»•çµ„ã¿ã€ï¼‘ã€‘ãƒ‡ãƒ—ãƒ­ã‚¤å…ˆClusterç®¡ç†è€…ãŒãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ (argocd-server) ã«SSOã‚’ä½¿ç”¨ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³ã—ã‚ˆã†ã¨ã—ã¾ã™ã€‚ã€ï¼’ã€‘argocd-serverã¯ã€èªè¨¼ãƒ•ã‚§ãƒ¼ã‚ºã‚’IDãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã«å§”è­²ã™ã‚‹ãŸã‚ã«ã€dex-serverã‚’ã‚³ãƒ¼ãƒ«ã—ã¾ã™ã€‚argo-cd/authz-authn.md at master Â· argoproj/argo-cd Â· GitHubã€ï¼“ã€‘dex-serverã¯ã€èªå¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚èªå¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«å¿…è¦ãªæƒ…å ±ã¯ã€ConfigMap (argocd-cm) ã§è¨­å®šã—ã¦ãŠãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚argocd-cmã®ã–ã£ãã‚Šã—ãŸå®Ÿè£…ä¾‹ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ğŸ‘‡ã“ã“ã§ã¯ã€IDãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’GitHubã¨ã—ã€èªå¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«å¿…è¦ãªã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆIDã¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’è¨­å®šã—ã¦ã„ã¾ã™ã€‚apiVersion: v1kind: ConfigMapmetadata:  namespace: argocd  name: argocd-cmdata:  dex.config: |    connectors:      - type: github        id: github        name: GitHub SSO        config:          clientID: *****          clientSecret: *****        # dex-serverãŒèªå¯ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å—ä¿¡ã™ã‚‹URLã‚’è¨­å®šã™ã‚‹        redirectURI: https://example.com/api/dex/callbackdex.configã‚­ãƒ¼é…ä¸‹ã®è¨­å®šæ–¹æ³•ã«é–¢ã—ã¦ã¯ã€dexã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ã¿ã‚‹ã¨è‰¯ã„ã§ã™ğŸ‘â†ªï¸ï¼šDexã€ï¼”ã€‘dex-serverã¯ã€å‰ã®æ‰‹é †ã§ä½œæˆã—ãŸèªå¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’IDãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã«é€ä¿¡ã—ã¾ã™ã€‚ã€ï¼•ã€‘IDãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼å´ã§SSOã®èªè¨¼ãƒ•ã‚§ãƒ¼ã‚ºã‚’å®Ÿæ–½ã—ã¾ã™ã€‚IDãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã¯ã€ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯URL (<ArgoCDã®ãƒ‰ãƒ¡ã‚¤ãƒ³å>/api/dex/callback) ã‚’æŒ‡å®šã—ã¦ã€èªå¯ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’é€ä¿¡ã—ã¾ã™ã€‚èªå¯ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã¯ã€argocd-serverã‚’ä»‹ã—ã¦ã€dex-serverã«å±Šãã¾ã™ã€‚GitHubã‚’IDãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã¨ã™ã‚‹å ´åˆã€ Developer settingsã‚¿ãƒ– ã§SSOã‚’è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã€ã“ã®æ™‚ã«Authorization callback URLã¨ã„ã†è¨­å®šç®‡æ‰€ãŒã‚ã‚‹ã¯ãšã§ã™ğŸ‘ğŸ»ã€ï¼–ã€‘argocd-serverã¯ã€AuthZã§èªå¯ãƒ•ã‚§ãƒ¼ã‚ºã‚’å®Ÿæ–½ã—ã¾ã™ã€‚ConfigMap (argocd-rbac-cm) ã‚’å‚ç…§ã—ã€IDãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‹ã‚‰å–å¾—ã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚„ã‚°ãƒ«ãƒ¼ãƒ—ã«èªå¯ã‚¹ã‚³ãƒ¼ãƒ—ã‚’ä»˜ä¸ã—ã¾ã™ã€‚ã–ã£ãã‚Šã—ãŸå®Ÿè£…ä¾‹ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ğŸ‘‡ã“ã“ã§ã¯ã€developerãƒ­ãƒ¼ãƒ«ã«ã¯devã¨ã„ã†AppProjectã®ã¿ã€ã¾ãŸmaintainerãƒ­ãƒ¼ãƒ«ã«ã¯å…¨ã¦ã®AppProjectã®æ“ä½œã‚’è¨±å¯ã—ã¦ã„ã¾ã™ã€‚ã¾ãŸã“ã‚Œã‚‰ã®ãƒ­ãƒ¼ãƒ«ã‚’ã€IDãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã§èªè¨¼ã•ã‚ŒãŸã‚°ãƒ«ãƒ¼ãƒ—ã«ç´ã¥ã‘ã¦ã„ã¾ã™ã€‚apiVersion: v1kind: ConfigMapmetadata:  name: argocd-rbac-cm  namespace: argocddata:  # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ­ãƒ¼ãƒ«  policy.default: role:developer  policy.csv: |    # ãƒ­ãƒ¼ãƒ«ã¨èªå¯ã‚¹ã‚³ãƒ¼ãƒ—ã‚’å®šç¾©ã™ã‚‹ã€‚    p, role:developer, *, *, dev/*, allow    p, role:maintainer, *, *, *, allow    # IDãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã§èªè¨¼ã•ã‚ŒãŸã‚°ãƒ«ãƒ¼ãƒ—ã«ãƒ­ãƒ¼ãƒ«ã‚’ç´ä»˜ã‘ã‚‹ã€‚    g, developers, role:developer    g, maintainers, role:maintainer  scopes: "[groups]"ConfigMap (argocd-rbac-cm) ã®èªå¯ã‚¹ã‚³ãƒ¼ãƒ—ã®å®šç¾©ã«ã¯ã€ Casbin ã®è¨˜æ³•ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ä»Šå›ã®å®Ÿè£…ä¾‹ã§ä½¿ç”¨ã—ãŸpã¨gã§ã¯ã€ä»¥ä¸‹ã‚’å®šç¾©ã§ãã¾ã™ã€‚    è¨˜å·        èª¬æ˜        è¨˜æ³•    p (ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³)         ãƒ­ãƒ¼ãƒ«ã¨èªå¯ã‚¹ã‚³ãƒ¼ãƒ—ã‚’å®šç¾©ã™ã‚‹ã€‚        p, <ãƒ­ãƒ¼ãƒ«å> <Kubernetesãƒªã‚½ãƒ¼ã‚¹ã®ç¨®é¡> <ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å> <AppProjectå>/<Kubernetesãƒªã‚½ãƒ¼ã‚¹ã®è­˜åˆ¥å>    g (ã‚°ãƒ«ãƒ¼ãƒ—)         ã‚°ãƒ«ãƒ¼ãƒ—ã«ãƒ­ãƒ¼ãƒ«ã‚’ç´ä»˜ã‘ã‚‹ã€‚        g, <ã‚°ãƒ«ãƒ¼ãƒ—å> <ãƒ­ãƒ¼ãƒ«å>    RBAC Configuration - Argo CD - Declarative GitOps CD for Kubernetes06. argocd-server (argocd-apiserver)argocd-serverã¨ã¯æœ€å¾Œã«ã€ã‚¤ãƒ³ãƒ•ãƒ©ãƒ¬ã‚¤ãƒ¤ãƒ¼ã«ã‚ã‚‹argocd-serverã§ã™ã€‚ã€argocd-apiserverã€ã¨ã‚‚å‘¼ã°ã‚Œã¾ã™ã€‚ã¿ã‚“ãªãŒã‚ˆãçŸ¥ã‚‹ArgoCDã®ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ã™ã€‚ã¾ãŸã€ArgoCDã®APIã¨ã—ã¦ã‚‚æ©Ÿèƒ½ã—ã€ä»–ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨é€šä¿¡ã—ã¾ã™ğŸ¦„ä»•çµ„ã¿ã€ï¼‘ã€‘application-controllerã¯ã€ãƒ‡ãƒ—ãƒ­ã‚¤å…ˆClusterã‚’ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ã—ã¾ã™ã€‚ã€ï¼’ã€‘application-controllerã¯ã€ãƒ‡ãƒ—ãƒ­ã‚¤å…ˆClusterã®ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã¨ã€ãƒãƒ¼ãƒªãƒ³ã‚°å¯¾è±¡ã®ãƒªãƒã‚¸ãƒˆãƒªã®ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã®å·®åˆ†ã‚’æ¤œå‡ºã—ã¾ã™ã€‚ã€ï¼“ã€‘application-controllerã¯ã€å‡¦ç†çµæœã‚’redis-serverã«ä¿ç®¡ã—ã¾ã™ã€‚ã€ï¼”ã€‘argocd-serverã¯ã€redis-serverã‹ã‚‰å‡¦ç†çµæœã‚’å–å¾—ã—ã¾ã™ã€‚ã€ï¼•ã€‘ãƒ‡ãƒ—ãƒ­ã‚¤å…ˆClusterç®¡ç†è€…ãŒãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ (argocd-server) ã«SSOã‚’ä½¿ç”¨ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³ã—ã‚ˆã†ã¨ã—ã¾ã™ã€‚ã€ï¼–ã€‘Ingressã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã¯ã€Ingressã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ«ãƒ¼ãƒ«ã‚’å‚ç…§ã—ã€argocd-serverã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã—ã¾ã™ã€‚ã€ï¼—ã€‘argocd-serverã¯ã€ãƒ­ã‚°ã‚¤ãƒ³æ™‚ã«IDãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã«èªå¯ãƒ•ã‚§ãƒ¼ã‚ºã‚’å§”è­²ã™ã‚‹ãŸã‚ã«ã€dex-serverã‚’ã‚³ãƒ¼ãƒ«ã—ã¾ã™ã€‚ã€ï¼˜ã€‘IDãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ä¸Šã§èªè¨¼ãƒ•ã‚§ãƒ¼ã‚ºãŒå®Œäº†ã—ã¾ã™ã€‚argocd-serverã¯ã€ConfigMap (argocd-rbac-cm) ã‚’å‚ç…§ã—ã€ãƒ‡ãƒ—ãƒ­ã‚¤å…ˆClusterç®¡ç†è€…ã«èªå¯ã‚¹ã‚³ãƒ¼ãƒ—ã‚’ä»˜ä¸ã—ã¾ã™ã€‚ã€ï¼™ã€‘argocd-serverã¯ã€èªå¯ã‚¹ã‚³ãƒ¼ãƒ—ã«å¿œã˜ã¦ã€ãƒ‡ãƒ—ãƒ­ã‚¤å…ˆClusterç®¡ç†è€…ãŒApplicationã‚’æ“ä½œã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚apiVersion: v1kind: ConfigMapmetadata:  name: argocd-cmd-params-cm  namespace: argocddata:  application.namespaces: "foo" # fooã¨ã„ã†Namespaceã®ã¿ã‚’è¨±å¯ã™ã‚‹ã€‚apiVersion: argoproj.io/v1alpha1kind: AppProjectmetadata:  name: foo-project  namespace: foospec:  sourceNamespaces:    - "foo" # fooã¨ã„ã†Namespaceã®ã¿ã‚’è¨±å¯ã™ã‚‹ã€‚â†ªï¸ï¼šApplications in any namespace - Argo CD - Declarative GitOps CD for Kubernetesã€ï¼‘ï¼ã€‘ãƒ‡ãƒ—ãƒ­ã‚¤å…ˆClusterç®¡ç†è€…ã¯ã€ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ (argocd-server) ã‚’ä½¿ç”¨ã—ã¦ã€Clusterã«ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’Syncã—ã¾ã™ã€‚ã“ã®æ™‚ã€Applicationã‚’ä»‹ã—ã¦application-controllerã‚’æ“ä½œã—ã€ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¾ã™ã€‚å›³ã§ã¯ã€App-Of-Appsãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æ¡ç”¨ã—ãŸã¨ä»®å®šã—ã¦ã„ã¾ã™ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã¯ã€Applicationã‚’éšå±¤ä¸Šã«ä½œæˆã™ã‚‹ã‚‚ã®ã§ã‚ã‚Šã€æœ€ä¸‹å±¤ã®Applicationé…ä¸‹ã®ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’ã‚ˆã‚Šç–çµåˆã«ç®¡ç†ã§ãã¾ã™âœŒï¸ä¾‹ãˆã°ä»¥ä¸‹ã®ç”»åƒã®é€šã‚Šã€æœ€ä¸Šä½ã®Applicationé…ä¸‹ã«ã€ãƒãƒ¼ãƒ åˆ¥ã®è¦ªApplicationã‚’é…ç½®ã—ã¾ã™ (ã‚¢ãƒ—ãƒªãƒãƒ¼ãƒ ã®è¦ªApplicationã€ã‚¤ãƒ³ãƒ•ãƒ©ãƒãƒ¼ãƒ ã®ãã‚Œ) ã€‚ãã®å¾Œã€ä¸¡æ–¹ã®Applicationé…ä¸‹ã«ã•ã‚‰ã«ãƒãƒ£ãƒ¼ãƒˆåˆ¥ã«æœ€ä¸‹å±¤ã®å­Applicationã‚’é…ç½®ã—ã€ãƒãƒ£ãƒ¼ãƒˆã®ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’ç®¡ç†ã—ã¾ã™ã€‚ã‚¢ãƒ—ãƒªãƒãƒ¼ãƒ æœ€ä¸‹å±¤ã®å­Applicationã§ã¯ã‚¢ãƒ—ãƒªã‚³ãƒ³ãƒ†ãƒŠã®ãƒãƒ£ãƒ¼ãƒˆã€ã‚¤ãƒ³ãƒ•ãƒ©ãƒãƒ¼ãƒ ã®å­Applicationã§ã¯ç›£è¦–/ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯/ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ãƒªã‚½ãƒ¼ã‚¹ç®¡ç†ç³»ã®ãƒãƒ£ãƒ¼ãƒˆã‚’ç®¡ç†ã—ã¾ã™ğŸ‘07. ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®ã¾ã¨ã‚ä»Šã¾ã§ã®å…¨ã¦ã®æƒ…å ±ã‚’ã–ã£ãã‚Šæ•´ç†ã—ã¦ç°¡ç•¥åŒ–ã™ã‚‹ã¨ã€ArgoCDã¯ä»¥ä¸‹ã®ä»•çµ„ã¿ã§ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ğŸ‘‡08. ãŠã‚ã‚Šã«ArgoCDã«ã‚ˆã‚‹ãƒ‡ãƒ—ãƒ­ã‚¤ã®ä»•çµ„ã¿ã®ä»•çµ„ã¿ã‚’ã‚‚ã‚Šã‚‚ã‚Šå¸ƒæ•™ã—ã¾ã—ãŸã€‚ArgoCDã¯ã€UIãŒä½¿ã„ã‚„ã™ãã€ä»•çµ„ã¿ã®è©³ç´°ã‚’çŸ¥ã‚‰ãšã¨ã‚‚æ¯”è¼ƒçš„ç°¡å˜ã«é‹ç”¨ã§ãã‚‹ãŸã‚ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªãƒ„ãƒ¼ãƒ«ã ã¨æ€ã£ã¦ã„ã¾ã™ã€‚ã‚‚ã—ArgoCDã‚’ä½¿ã‚ãšã«ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ã„ã‚‹æ–¹ã¯ã€ArgoCDã®æ¡ç”¨ã‚’ãƒã‚¤ãƒ‘ãƒ¼ãƒ»ã‚¦ãƒ«ãƒˆãƒ©ãƒ»ã‚¢ãƒ«ãƒ†ã‚£ãƒ¡ãƒƒãƒˆãŠã™ã™ã‚ã—ã¾ã™ğŸ‘ãªãŠã€ç™»å ´ã—ãŸè¨­è¨ˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã®ã„ãã¤ã‹ã¯ã€ä»¥ä¸‹ã®æ›¸ç±ã«ã‚‚è¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ã®ã§ã€ãœã²ã”ä¸€èª­ã„ãŸã ã‘ã‚‹ã¨ğŸ™‡ğŸ»â€â†ªï¸ï¼šAmazon.co.jp: GitOps Cookbook (English Edition) é›»å­æ›¸ç±: Vinto, Natale, Bueno, Alex Soto: æ´‹æ›¸Amazon | Argo CD in Practice: The GitOps way of managing cloud-native applications | Costea, Liviu, Economakis, Spiros, Matyushentsev, Alexander | Design Tools & Techniquesè¬è¾ArgoCDã®è¨­è¨ˆã«ã‚ãŸã‚Šã€@yaml_villager ã•ã‚“ã«æœ‰ç›Šãªãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã‚’ã”æ•™æˆã„ãŸã ãã¾ã—ãŸã€‚ã“ã®å ´ã§æ„Ÿè¬ç”³ã—ä¸Šã’ã¾ã™ğŸ™‡ğŸ»â€]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[ç¾ä»£ã®ã‚¯ã‚¨ãƒªã‚ªãƒ—ãƒ†ã‚£ãƒã‚¤ã‚¶ã®åŸºç¤ã¨ãªã‚‹æŠ€è¡“ã‚’ã¾ã¨ã‚ãŸè«–æ–‡ã‚’èª­ã¿ã¾ã—ãŸ]]></title>
            <link>https://nnaka2992.hatenablog.com/entry/2023/05/02/105429</link>
            <guid>https://nnaka2992.hatenablog.com/entry/2023/05/02/105429</guid>
            <pubDate>Tue, 02 May 2023 01:54:29 GMT</pubDate>
            <content:encoded><![CDATA[ã“ã®è¨˜äº‹ã®è¶£æ—¨1998å¹´ã«ç™ºè¡¨ã•ã‚ŒãŸã‚¯ã‚¨ãƒªã‚ªãƒ—ãƒ†ã‚£ãƒã‚¤ã‚¶ã®åŸºç¤ã¨ã—ã¦ã¨ãã«é‡è¦ãªæ‰‹æ³•ã‚’ã¾ã¨ã‚ãŸè«–æ–‡ã‚’èª­ã¿ã¾ã—ãŸã€‚An Overview of Query Optimization in Relational Systemsè‘—è€…ã«ã¤ã„ã¦Surajit Chaudhuriã«ã‚ˆã‚‹è«–æ–‡Microsoftæ‰€å±ã®ç ”ç©¶è€…ã§RDBMSã®ç ”ç©¶ã‚’è¡Œãªã£ã¦ãŠã‚Šã€è¿‘å¹´ã§ã¯Cloudã«ãŠã‘ã‚‹DBMSã®ç ”ç©¶ã‚’è¡Œãªã£ã¦ã„ã‚‹ã€‚æ¦‚è¦RDBMSãŒææ¡ˆã•ã‚ŒãŸ1970å¹´ä»£ã‹ã‚‰ã‚¯ã‚¨ãƒªæœ€é©åŒ–ã¯å¤§è¦æ¨¡ã§å¹…ã®åºƒãç ”ç©¶ãŒè¡Œãªã‚ã‚Œã¦ããŸã€‚ã“ã®è«–æ–‡ã§ã¯åŸ·ç­†å½“æ™‚(1998å¹´)ã¾ã§ã®é‡è¦ãªç ”ç©¶ã®åŸºç¤ã‚’èª¬æ˜ã—ã¦ã„ã‚‹ã€‚æ‰‹æ³•æ¢ç´¢ç©ºé–“çµ±è¨ˆæƒ…å ±ã¨ã‚³ã‚¹ãƒˆã®æ¨å®šåˆ—æŒ™ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã«ã¤ã„ã¦èª¬æ˜ã—ã¦ã„ã‚‹ã€‚è«–æ–‡å†…ã§ã¯æ‹¡å¼µå¯èƒ½ãªã‚ªãƒ—ãƒ†ã‚£ãƒã‚¤ã‚¶ã¨ã—ã¦ã€Starburstã¨Volcano/Cascadeã®2ç¨®é¡ã®ã‚ªãƒ—ãƒ†ã‚£ãƒã‚¤ã‚¶ã®è©³ç´°ã‚’è«–ã˜ã¦ã„ã‚‹ã€‚æœ€æ–°(å½“æ™‚)ã®æœ€é©åŒ–ãƒªã‚¢ãƒ©ã‚¤ã‚ºãƒ‰ãƒ“ãƒ¥ãƒ¼ã«ã¤ã„ã¦èª¬æ˜ã—ã¦ã„ã‚‹ã€‚ä½œæ¥­æ™‚é–“read31:4031:40author33:402:00summary52:5519:15æ„Ÿæƒ³ãƒ™ã‚¯ãƒˆãƒ«åŒ–ã‚„ãƒ‘ãƒ©ãƒ¬ãƒ«ã‚¸ãƒ§ã‚¤ãƒ³ã§æ‰±ã‚ã‚Œã¦ã„ãŸVolcanoã‚ªãƒ—ãƒ†ã‚£ãƒã‚¤ã‚¶ã®ç«¯ã«è§¦ã‚Œã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã—ãŸã€‚å†…å®¹ã¨ã—ã¦ã¯åŸºç¤çš„ãªå†…å®¹ãŒå¤šã„ã‚‚ã®ã®ã€çŸ¥ã‚‰ãªã„æ¦‚å¿µã‚‚ã„ãã¤ã‹ã‚ã‚Šå¼•ç”¨ã—ã¦ã„ã‚‹è«–æ–‡ã‚‚èª­ã¿ãŸã„ã§ã™ã€‚ã‚¯ã‚¨ãƒªæœ€é©åŒ–ã®åŸºç¤ã‚’å­¦ã¶ã®ã«éå¸¸ã«ã„ã„å†…å®¹ã§ã—ãŸã€‚]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã« GitHub ã®è‰ã‚’ç”Ÿã‚„ã™ GitHub CLI æ‹¡å¼µæ©Ÿèƒ½ã€Œgh-grassã€ã®ç´¹ä»‹]]></title>
            <link>https://zenn.dev/kou_pg_0131/articles/gh-grass-introduction</link>
            <guid>https://zenn.dev/kou_pg_0131/articles/gh-grass-introduction</guid>
            <pubDate>Mon, 01 May 2023 09:19:56 GMT</pubDate>
            <content:encoded><![CDATA[GitHub ã®è‰ ( Contribution Graph ) ã‚’ã©ã†ã—ã¦ã‚‚ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ç”Ÿã‚„ã—ãŸããªã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã‹ï¼Ÿã‚ã‚Šã¾ã™ã‚ˆã­ï¼Ÿåƒ•ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ãã‚“ãªã¨ãã«ä¾¿åˆ©ãª GitHub CLI æ‹¡å¼µæ©Ÿèƒ½ã€Œgh-grassã€ã‚’ä½œã‚Šã¾ã—ãŸã€‚https://github.com/koki-develop/gh-grassã“ã†ã„ã†ã“ã¨ãŒã§ãã¾ã™ã€‚ä»–ã«ã‚‚ã“ã‚“ãªã“ã¨ã‚„ã€æ–‡å­—ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã“ã‚“ãªã“ã¨ã‚‚ã§ãã¾ã™ã€‚ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã“ã®è¨˜äº‹ã§ã¯ gh-grass ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ã‹ã‚‰åŸºæœ¬çš„ãªä½¿ã„æ–¹ã«ã¤ã„ã¦ã¾ã¨ã‚ã¾ã™ã€‚ ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«!GitHub CLI ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„...]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[DBMSã¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆé–“ã«ãŠã‘ã‚‹ãƒ‡ãƒ¼ã‚¿è»¢é€ã‚’æœ€é©åŒ–ã™ã‚‹è«–æ–‡ã‚’èª­ã¿ã¾ã—ãŸ]]></title>
            <link>https://nnaka2992.hatenablog.com/entry/2023/05/01/123418</link>
            <guid>https://nnaka2992.hatenablog.com/entry/2023/05/01/123418</guid>
            <pubDate>Mon, 01 May 2023 03:34:18 GMT</pubDate>
            <content:encoded><![CDATA[ã“ã®è¨˜äº‹ã®è¶£æ—¨2017å¹´ã«å‡ºç‰ˆã•ã‚ŒãŸãƒªãƒ¢ãƒ¼ãƒˆDBMSã¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆé–“ã®å¤§é‡ãƒ‡ãƒ¼ã‚¿è»¢é€ã‚’æœ€é©åŒ–ã™ã‚‹æ‰‹æ³•ã‚’ææ¡ˆã™ã‚‹è«–æ–‡ã‚’èª­ã¿ã¾ã—ãŸã€‚Donâ€™t Hold My Data Hostage â€“ A Case For Client Protocol Redesignè‘—è€…ã«ã¤ã„ã¦Mark Raasveldtã€Hannes Muhleisenã‚‰ã®ã‚°ãƒ«ãƒ¼ãƒ—ã«ã‚ˆã‚‹è«–æ–‡ã€‚ã„ãšã‚Œã‚‚Centrum Wiskunde & Informaticaã®æ‰€å±ã§ã€DuckDBã®CxOã€‚DBMSã¨åˆ†æã‚·ã‚¹ãƒ†ãƒ ã«ãŠã‘ã‚‹ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ã‚’ç ”ç©¶ã—ã¦ã„ã‚‹ã€‚å•é¡Œæ„è­˜DBMSã‹ã‚‰ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ—ãƒ­ã‚°ãƒ©ãƒ ã«å¤§é‡ã®ãƒ‡ãƒ¼ã‚¿ã‚’è»¢é€ã™ã‚‹ã“ã¨ã¯ä¸€èˆ¬çš„ãªã‚¿ã‚¹ã‚¯ã§ã‚ã‚‹ã€‚ä¾‹ãˆã°Rã‚„Pythonãªã©ã‚’ç”¨ã„ãŸåˆ†æã‚·ã‚¹ãƒ†ãƒ ã¯ã—ã°ã—ã°ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ»ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’åˆ©ç”¨ã—ã¦ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã‚’è¡Œãªã£ã¦ã„ã‚‹ã€‚ä¸€æ–¹ã§ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯è¶Šã—ã«ãƒ‡ãƒ¼ã‚¿ã‚’è»¢é€ã™ã‚‹ã“ã¨ã¯ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ã‚’å¢—åŠ ã•ã›ã€è»¢é€æ™‚é–“ã‚’é•·å¼•ã‹ã›ã‚‹è¦å› ã§ã‚ã‚‹ã€‚ãã®ãŸã‚åˆ†æç”¨é€”ã§å¤§é‡ã®ãƒ‡ãƒ¼ã‚¿è»¢é€ã‚’é¿ã‘ã€ä¸€éƒ¨ã®ãƒ‡ãƒ¼ã‚¿ã‚’ã‚µãƒ³ãƒ—ãƒ«ã¨ã—ã¦åˆ©ç”¨ã™ã‚‹ã«æ­¢ã¾ã‚‹ã“ã¨ãŒå¤šã„ã€‚ã“ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã¯ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®ä½ä¸‹ã‚’æŠ¼ã•ãˆã‚‰ã‚Œã‚‹ã‚‚ã®ã®ã€åˆ†æã‚„æ©Ÿæ¢°å­¦ç¿’ã®ç²¾åº¦ã‚’ä¸‹ã’ã‚‹ã“ã¨ã«ç¹‹ãŒã‚‹ã€‚ã¨ãã«æ—¢å­˜ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§ã¯ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã«ã‚ˆã‚‹ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ã¨ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆã®åˆ¶é™ã«å¤§ããªå½±éŸ¿ã‚’å—ã‘ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’åŠ£åŒ–ã•ã›ã‚‹ã€‚ã“ã®å•é¡Œã¯ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãŒåˆ¥ãƒã‚·ãƒ³ã‚„ã‚¯ãƒ©ã‚¦ãƒ‰ã§å‹•ä½œã™ã‚‹ã¨ãã«ã‚ˆã‚Šå¤§ããªå•é¡Œã¨ãªã‚‹ã€‚æ‰‹æ³•æœ¬è«–æ–‡ã§ã¯æ—¢å­˜ã®ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºæ‰‹æ³•ã¨åœ§ç¸®æ‰‹æ³•ã«ã‚ˆã‚‹ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¸ã®å½±éŸ¿ã‚’è¨ˆæ¸¬ã—ã€æ–°ã—ã„ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã¨ã—ã¦ä»¥ä¸‹ã®ç‰¹æ€§ã‚’æŒã¤æ‰‹æ³•ã‚’ææ¡ˆã—ã¦ã„ã‚‹ã€‚1. ãƒãƒ£ãƒ³ã‚¯æ¯ã®ãƒ‡ãƒ¼ã‚¿è»¢é€ã¨(ãƒ‡)ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³1. ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ã«ã‚ˆã‚‹åœ§ç¸®æ–¹æ³•ã®æ±ºå®š1. text/binaryã«ã‚ˆã‚‹ã‚«ã‚¹ã‚¿ãƒ ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã™ã‚‹1. NULLçµ‚ç«¯ã«ã‚ˆã‚‹ãƒ†ã‚­ã‚¹ãƒˆã®å–ã‚Šæ‰±ã„å®Ÿé¨“çµæœææ¡ˆæ‰‹æ³•ã‚’å®Ÿè£…ã—ãŸMonetDB(è¡¨å†…ã§ã¯MonetDB++)ã¨PostgreSQL(è¡¨å†…ã§ã¯PostgreSQL++)ã‚’æ—¢å­˜ã®DBMSã‚„netcatã¨æ¯”è¼ƒã™ã‚‹ã“ã¨ã§è©•ä¾¡ã‚’è¡Œãªã£ã¦ã„ã‚‹ã€‚TCP-Hã®lineitemã€American Community Survayã€Airline On-Time Statisticsã®3ã¤ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã§è©•ä¾¡ã‚’è¡Œãªã£ãŸã¨ã“ã‚ã€ãƒ­ãƒ¼ã‚«ãƒ«é€šä¿¡ã«ãŠã‘ã‚‹éåœ§ç¸®netcatã‚’é™¤ãæ®†ã©ã®ã‚±ãƒ¼ã‚¹ã§MonetDB++ç³»ãŒæœ€è‰¯ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’ç™ºæ®ã—æ¬¡ç‚¹ã§PostgreSQL++ç³»ãŒå„ªã‚ŒãŸçµæœã‚’æ®‹ã—ã¦ã„ã‚‹ã€‚Table 10Table 11Table 12PostgreSQLã«æ¯”ã¹MonetDBãŒå„ªã‚Œã¦ã„ã‚‹ç†ç”±ã¯PostgreSQLã®è¡ŒæŒ‡å‘ãƒ‡ãƒ¼ã‚¿ã‚’åˆ—æŒ‡å‘ã«å¤‰æ›ã™ã‚‹ã‚³ã‚¹ãƒˆã®ãŸã‚ã§ã‚ã‚‹ã€‚ä½œæ¥­æ™‚é–“read31:2131:21author35:384:17summary70:1334:35æ„Ÿæƒ³è«–æ–‡å‡ºç‰ˆæ™‚ã«ã¯TPC/IPãƒ—ãƒ­ãƒˆã‚³ãƒ«ãŒå‰æã§Quicç™»å ´å‰ã®ãŸã‚ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ—ãƒ­ãƒˆã‚³ãƒ«è‡ªä½“ã¯è€ƒæ…®ã•ã‚Œã¦ã„ãªã„ã€‚ç¾åœ¨ã§ã‚ã‚Œã°TPC/IPã¨Quicã«é©åˆã—ãŸæ‰‹æ³•ã®æ¯”è¼ƒãŒè¡Œãªã‚ã‚Œã‚‹ã¨æ€ã†ã®ã§æ°—ã«ãªã‚‹ã¨ã“ã‚ã€‚]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[SQL Serverã«ãŠã‘ã‚‹UDFæœ€é©åŒ–ã®è«–æ–‡ã‚’èª­ã¿ã¾ã—ãŸ]]></title>
            <link>https://nnaka2992.hatenablog.com/entry/2023/04/28/112905</link>
            <guid>https://nnaka2992.hatenablog.com/entry/2023/04/28/112905</guid>
            <pubDate>Fri, 28 Apr 2023 02:29:05 GMT</pubDate>
            <content:encoded><![CDATA[ã“ã®è¨˜äº‹ã®è¶£æ—¨2017å¹´ã«ç™ºè¡¨ã•ã‚ŒãŸSQL Serverã§UDFã‚’æœ€é©åŒ–ã—ã¦ã„ã‚‹Froidã¨ã„ã†æ‰‹æ³•ã«ã¤ã„ã¦ã®è«–æ–‡ã‚’èª­ã¿ã¾ã—ãŸã€‚Froid: Optimization of Imperative Programs in a Relational Databaseè‘—è€…ã«ã¤ã„ã¦Karthik Ramachandraã€Kwanghyun Parkã€K. Venkatesh Emaniã€Alan Halversonã€Cesar Galindo-Legariaã€Conor Cunninghamã®ã‚°ãƒ«ãƒ¼ãƒ—ã«ã‚ˆã‚‹è«–æ–‡ã€‚ã»ã¨ã‚“ã©ã®è‘—è€…ã¯Microsoftã«æ‰€å±ã—ã¦ãŠã‚Šã€ã„ãšã‚Œã‚‚ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒŠãƒ«ãƒ¯ãƒ¼ã‚¯ãƒ­ãƒ¼ãƒ‰ã§ã®RDBMSã®æœ€é©åŒ–ã‚„åˆ†æãƒ¯ãƒ¼ã‚¯ãƒ­ãƒ¼ãƒ‰ã«ãŠã‘ã‚‹RDBMSæœ€é©åŒ–ã®ç ”ç©¶ã‚’ã—ã¦ã„ã‚‹ã€‚å•é¡Œæ„è­˜RDBMSã§ã¯SQLã«ã‚ˆã‚‹ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã¨ã€UDFã‚„ã‚¹ãƒˆã‚¢ãƒ‰ãƒ—ãƒ­ã‚·ãƒ¼ã‚¸ãƒ£ãªã©ã«ã‚ˆã‚‹å‘½ä»¤å‹ã®ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’æä¾›ã—ã¦ã„ã‚‹ã€‚SQLã«ã‚ˆã‚‹ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹ã¯é«˜åº¦ã«æœ€é©åŒ–ã•ã‚Œã¦ããŸä¸€æ–¹ã§ã€å‘½ä»¤å‹ã®ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã¯éåŠ¹ç‡ãªãŸã‚æ€§èƒ½ã‚’é˜»å®³ã—åˆ©ç”¨ã‚’ç¦æ­¢ã—ã¦ã„ã‚‹çµ„ç¹”ã™ã‚‰ã‚ã‚‹ã€‚UDFã«ã‚ˆã‚‹ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹ã¯éåŠ¹ç‡ã§ã‚ã‚‹ã‚‚ã®ã®ã€SQLã«æ¯”ã¹ä¸‹è¨˜ã®ã‚ˆã†ãªåˆ©ç‚¹ã‚’æä¾›ã™ã‚‹ãŸã‚å¹…åºƒãåˆ©ç”¨ã•ã‚Œã¦ã„ã‚‹ã®ã‚‚äº‹å®Ÿã§ã‚ã‚‹ã€‚1. SQLé–“ã§ã‚³ãƒ¼ãƒ‰ã®å†åˆ©ç”¨æ–¹æ³•ã‚’æä¾›ã™ã‚‹1. è¤‡é›‘ãªãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚„MLã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ãªã©SQLã§ã¯é›£ã—ã„è¡¨ç¾ã‚’å¯èƒ½ã«ã™ã‚‹1. å˜ç´”ãªSQLã®çµ„ã¿åˆã‚ã›ã®ãŸã‚ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ„å›³ãŒæ˜ç¢ºã«è¡¨ç¾ã§ãã‚‹ã“ã‚Œã‚‰ã®ãƒ¡ãƒªãƒƒãƒˆã‚’äº«å—ã™ã‚‹ãŸã‚ã«RDBMSã«ãŠã‘ã‚‹å‘½ä»¤å‹ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹æ‰‹æ³•ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’å‘ä¸Šã—ã™ã‚‹å¿…è¦ãŒã‚ã£ãŸã€‚æ‰‹æ³•ææ¡ˆæ‰‹æ³•ã§ã‚ã‚‹Froidã¯Microsoft SQL Serverã«ãŠã‘ã‚‹å‘½ä»¤å‹ã‚³ãƒ¼ãƒ‰ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Šã®æ‰‹æ³•ã¨ã—ã¦ã€UDFã‚’è¤‡é›‘ãªã‚µãƒ–ã‚¯ã‚¨ãƒªã¨ã—ã¦ã¿ãªã™ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’å–ã£ã¦ã„ã‚‹ã€‚UDFã‚’æ§‹æˆã™ã‚‹å‘½ä»¤ã¯DECLAREã€SELECTã€IF/ELSEã€RETURNã€ä»–ã®UDFã€ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒŠãƒ«ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®6ã¤ã«åˆ†ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚ææ¡ˆæ‰‹æ³•ã§ã¯ã“ã‚Œã‚‰ã®å‘½ä»¤ã‚’ä¸€èˆ¬çš„ãªT-SQLã«ç½®ãæ›ãˆã€Applyæ¼”ç®—ã«ã‚ˆã‚Šä¸€ã¤ã®é–¢ä¿‚å¼ã«çµåˆã™ã‚‹æ–¹æ³•ã§å®Ÿç¾ã—ã¦ã„ã‚‹ã€‚Table 1å‘½ä»¤ãŒä¸€èˆ¬SQLã«ç½®ãæ›ãˆã‚‰ã‚Œã‚‹ã“ã¨ã§UDFã«å¯¾ã—ã¦ã€SQLã«ç”¨ã„ã‚‰ã‚Œã¦ã„ãŸé«˜åº¦ãªæœ€é©åŒ–ã‚’å°å…¥ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã‚‹ã€‚ã¾ãŸææ¡ˆæ‰‹æ³•ã§ã¯ã„ä»¥ä¸‹ã®ç†ç”±ã‹ã‚‰ã€SQLã¨ã—ã¦å‘½ä»¤ã‚’ç½®æ›ã™ã‚‹ã¨ãã«ã‚¯ã‚¨ãƒªæœ€é©åŒ–æ™‚ã«è¡Œãªã†ã®ã§ã¯ãªããƒã‚¤ãƒ³ãƒ‰æ™‚ã«ç½®æ›ã‚’ã—ã¦ã„ã‚‹ã€‚1. å®Ÿéš›ã®ãƒ¯ãƒ¼ã‚¯ãƒ­ãƒ¼ãƒ‰ã§ã®å®Ÿé¨“ã§ã¯ã»ã¼å…¨ã¦ã®ã‚±ãƒ¼ã‚¹ã§ãƒã‚¤ãƒ³ãƒ‰æ™‚ã®ã»ã†ãŒæ€§èƒ½ãŒã‚ˆã‹ã£ãŸ1. ã‚¯ã‚¨ãƒªã‚ªãƒ—ãƒ†ã‚£ãƒã‚¤ã‚¶ã®å¤‰æ›´ãŒä¸è¦1. ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°æ™‚ã«ç‰¹å®šã®æœ€é©åŒ–ã‚’è¡Œãªãˆã‚‹ã¨ãã«ã‚¯ã‚¨ãƒªã‚ªãƒ—ãƒ†ã‚£ãƒã‚¤ã‚¶ã®å¤‰æ›´ã¯SQL ServerãŒå•†ç”¨ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãªãŸã‚é‡è¦ã§ã‚ã£ãŸã€‚ä½œæ¥­æ™‚é–“read28:5028:50author32:103:20summary57:0024:50]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Pull Requestã§æ„è­˜ã—ã¦ã„ã‚‹ã“ã¨]]></title>
            <link>https://qiita.com/bayobayo0324/items/0d986370e0de95705b6f</link>
            <guid>https://qiita.com/bayobayo0324/items/0d986370e0de95705b6f</guid>
            <pubDate>Fri, 28 Apr 2023 02:19:23 GMT</pubDate>
            <content:encoded><![CDATA[ã©ã‚“ãªè¨˜äº‹ï¼ŸPull Requestï¼ˆä»¥å¾ŒPRï¼‰ã§è‡ªåˆ†ãŒãƒ¬ãƒ“ãƒ¥ã‚¤ã®ã¨ãã«æ„è­˜ã—ã¦ã„ã‚‹ã“ã¨ã‚’ã¾ã¨ã‚ã¦ã¿ã¾ã—ãŸã€‚PRã ã‘ã˜ã‚ƒãªãSlackç­‰ã®ãƒ†ã‚­ã‚¹ãƒˆãƒ™ãƒ¼ã‚¹ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã‚‚åŒã˜ã‚ˆã†ãªã“ã¨ã‚’æ„è­˜â€¦]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[DBMSã®æ­´å²ã¨NewSQL]]></title>
            <link>https://zenn.dev/nnaka2992/articles/history_of_db_and_newsql</link>
            <guid>https://zenn.dev/nnaka2992/articles/history_of_db_and_newsql</guid>
            <pubDate>Wed, 26 Apr 2023 14:28:19 GMT</pubDate>
            <content:encoded><![CDATA[ã“ã®è¨˜äº‹ã¯DBMSã®ç™»å ´ä»¥å‰ã‹ã‚‰ç¾ä»£ã®DBMSã‚’å–ã‚Šå·»ãç’°å¢ƒã¾ã§ã‚’æŒ¯ã‚Šè¿”ã‚‹ã“ã¨ã§ã€ãªãœNewSQLãŒå¿…è¦ã¨ã•ã‚Œç™»å ´ã—ãŸã®ã‹ã‚’ã¾ã¨ã‚ã¾ã™ã€‚ ãŠã“ã¨ã‚ã‚Šç­†è€…ã¯ã‚ãã¾ã§DBMSãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ã‚ã‚Šã€ç ”ç©¶è€…ã§ã¯ãªã„ãŸã‚å†…å®¹ã¯å€‹äººã®è¦‹è§£ã§ã™ã€‚ã¾ãŸå¯¾è±¡èª­è€…ã¯ã‚ã‚‹ç¨‹åº¦DBMSã«é–¢ã‚ã‚ŠãŒã‚ã‚Šã€OLTPã‚„OLAPã€åˆ—æŒ‡å‘ã‚„è¡ŒæŒ‡å‘ã¨ã„ã£ãŸåŸºæœ¬çš„ãªå˜èªã‚’ç†è§£ã—ã¦ã„ã‚‹ã‚‚ã®ã¨ã—ã¾ã™ã€‚ã¾ãŸNewSQLã®æŠ€è¡“çš„è©³ç´°ã¯ã‚¹ã‚³ãƒ¼ãƒ—å¤–ã¨ã—ã¾ã™ã€‚ DBMSä»¥å‰ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¨ã„ã†è¨€è‘‰ã¯1950å¹´ä»£ã«ç±³è»ãŒæƒ…å ±åŸºåœ°ã‚’é›†ç´„ã—ãŸã“ã¨ã«ç”±æ¥ã—ã¾ã™ã€‚ä¸€æ–¹ã§å­¦è¡“çš„ãªãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®èµ·æºã¯W. C. McGeeãŒ1959å¹´ã«ç™ºè¡¨...]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[[DBREãƒ–ãƒ­ã‚°] Snowflake ã¨ã¯ï¼Ÿ]]></title>
            <link>https://sreake.com/blog/what-is-snowflake/</link>
            <guid>https://sreake.com/blog/what-is-snowflake/</guid>
            <pubDate>Wed, 26 Apr 2023 02:37:56 GMT</pubDate>
            <content:encoded><![CDATA[ã¯ã˜ã‚ã« ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ‡ãƒ¼ã‚¿ã‚¦ã‚§ã‚¢ãƒã‚¦ã‚¹ã® Snowflake ã«ã¤ã„ã¦ã®è§£èª¬ã§ã™ã€‚Snowflake ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚„æ–™é‡‘ä½“ç³»ã€ç‰¹å¾´ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã«ã¤ã„ã¦èª¬æ˜ã—ã¦ã„ã¾ã™ã€‚ æ¦‚è¦ ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®æ¦‚è¦ Snowflake [â€¦]The post [DBREãƒ–ãƒ­ã‚°] Snowflake ã¨ã¯ï¼Ÿ first appeared on sreake.com | æ ªå¼ä¼šç¤¾ã‚¹ãƒªãƒ¼ã‚·ã‚§ã‚¤ã‚¯.]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[ä¸­é–“çµæœãŒè«å¤§ã«ãªã‚‹ã¨ãã®çµåˆã‚’æœ€é©åŒ–ã™ã‚‹æœ€æ‚ªã‚±ãƒ¼ã‚¹æœ€é©åŒ–çµåˆã‚’RDBMSã«é©å¿œã™ã‚‹è«–æ–‡ã‚’èª­ã¿ã¾ã—ãŸ]]></title>
            <link>https://nnaka2992.hatenablog.com/entry/2023/04/26/110646</link>
            <guid>https://nnaka2992.hatenablog.com/entry/2023/04/26/110646</guid>
            <pubDate>Wed, 26 Apr 2023 02:06:46 GMT</pubDate>
            <content:encoded><![CDATA[ã“ã®è¨˜äº‹ã®è¶£æ—¨2018å¹´ã«ç™ºè¡¨ã•ã‚ŒãŸåˆ†æãƒ¯ãƒ¼ã‚¯ãƒ­ãƒ¼ãƒ‰ãªã©ã§ç™ºç”Ÿã—ãŒã¡ãªæœ€çµ‚çµæœã«æ¯”ã¹ã€éå¸¸ã«å¤§ããªä¸­é–“çµæœã‚’ä½œæˆã—ã¦ã—ã¾ã†ã‚¯ã‚¨ãƒªã‚’å¤šæ–¹å‘çµåˆã§æœ€é©åŒ–ã™ã‚‹è«–æ–‡ã‚’èª­ã¿ã¾ã—ãŸã€‚Adopting Worst-Case Optimal Joins in Relational Database Systemsè‘—è€…ã«ã¤ã„ã¦Michael Freitagã€Maximilian Bandleã€Tobias Schmidtã€Alfons Kemperã€Thomas Neumannã«ã‚ˆã‚‹ã‚°ãƒ«ãƒ¼ãƒ—ã®è«–æ–‡ã„ãšã‚Œã®è‘—è€…ã‚‚DBMSã«ãŠã‘ã‚‹æœ€é©åŒ–ã‚’ä¸­å¿ƒã«ç ”ç©¶ã—ã¦ãŠã‚Šã€ãã‚Œãã‚Œåˆ†æãƒ¯ãƒ¼ã‚¯ãƒ­ãƒ¼ãƒ‰ã«ãŠã‘ã‚‹æœ€é©åŒ–ã‚„æœ€æ–°ã®ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã«ãŠã‘ã‚‹æœ€é©åŒ–ãªã©ã‚’ç ”ç©¶ã—ã¦ã„ã‚‹ã€‚å•é¡Œæ„è­˜å¾“æ¥ã®RDBMSã«ãŠã‘ã‚‹çµåˆå‡¦ç†ã®ã»ã¨ã‚“ã©ã¯ãƒã‚¤ãƒŠãƒªçµåˆã«ä¾å­˜ã—ã¦è¤‡æ•°ã®ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã«ã¾ãŸãŒã‚‹ã‚¯ã‚¨ãƒªã‚’å‡¦ç†ã—ã¦ããŸã€‚æ•°åå¹´ã«æ¸¡ã‚‹ç ”ç©¶ã«ã‚ˆã‚Šãƒã‚¤ãƒŠãƒªçµåˆã¯å¹…åºƒã„æŸ”è»Ÿæ€§ã¨å„ªã‚ŒãŸæ€§èƒ½ã‚’ç™ºæ®ã™ã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚ãã®ä¸€æ–¹ã§ãƒã‚¤ãƒŠãƒªçµåˆã«ã‚ˆã‚‹å®Ÿè¡Œè¨ˆç”»ã¯ç‰¹å®šã®ãƒ¯ãƒ¼ã‚¯ãƒ­ãƒ¼ãƒ‰ã§ã¯æœ€é©ã§ã¯ãªã„ã‚±ãƒ¼ã‚¹ã‚’ç¤ºã™ã“ã¨ãŒçŸ¥ã‚‰ã‚Œã¦ã„ã‚‹ã€‚ä¸»ãªåŸå› ã¨ã—ã¦å®Ÿéš›ã®ã‚¯ã‚¨ãƒªçµæœã«æ¯”ã¹ã¦éå¸¸ã«å¤§ããªä¸­é–“çµæœã‚’ç”Ÿæˆã™ã‚‹ãŸã‚ã§ã‚ã‚‹ã€‚ã¨ãã«PKä»¥å¤–ã®ã‚­ãƒ¼ã«ã‚ˆã‚‹çµåˆãŒå¤šããªã‚‹åˆ†æãƒ¯ãƒ¼ã‚¯ãƒ­ãƒ¼ãƒ‰ã§ã¯ãã®ã‚ˆã†ãªçŠ¶æ…‹ã‚’é¿ã‘ã‚‹ã“ã¨ãŒé›£ã—ãã€ã¾ãŸã‚°ãƒ©ãƒ•åˆ†æã®ã‚ˆã†ãªã‚¯ã‚¨ãƒªãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã‚‚å¤šãè¦‹ã‚‰ã‚Œã‚‹ã€‚è¿‘å¹´ã®è«–ç†çš„ãªé€²æ­©ã«ã‚ˆã‚Šä¸­é–“çµæœã®åˆ—æŒ™ã‚’é¿ã‘ã‚‹å¤šæ–¹å‘çµåˆã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ãŒé–‹ç™ºå¯èƒ½ã«ãªã£ãŸã€‚ã“ã®æ‰‹æ³•ã¯ãƒã‚¤ãƒŠãƒªçµåˆè¨ˆç”»ã‚ˆã‚Šå„ªã‚ŒãŸå®Ÿè¡Œæ™‚é–“ã‚’ä¿è¨¼ã§ãã‚‹ãŸã‚ã€RDBMSã®å …ç‰¢æ€§ã‚’å¤§å¹…ã«å‘ä¸Šã•ã›ã‚‹å¯èƒ½æ€§ã‚’æŒã£ã¦ã„ã‚‹ã€‚ã—ã‹ã—ç¾çŠ¶æœ€æ‚ªã‚±ãƒ¼ã‚¹æœ€é©åŒ–çµåˆã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªå•é¡Œã‚’æŠ±ãˆã¦ã„ã‚‹ã€‚1. è†¨å¤§ãªã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã¨ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚’å¿…è¦ã¨ã™ã‚‹çµåˆã«å‚åŠ å‡ºæ¥ã‚‹ã‚«ãƒ©ãƒ ã‚’å«ã‚€ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’å¿…è¦ã¨ã™ã‚‹ã€‚1. RDBMSã¯æŒ¿å…¥ã¨æ›´æ–°ã®ã‚µãƒãƒ¼ãƒˆãŒå¿…è¦ãªã‚‚ã®ã®ã€æ—¢å­˜ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¯é«˜ä¾¡ãªäº‹å‰è¨ˆç®—ã‚’å¿…è¦ã¨ã™ã‚‹ã€‚ãã®ãŸã‚æœ¬è«–æ–‡ã¯ä»¥ä¸‹ã®åˆ¶ç´„ã‚’æº€ãŸã™ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’ææ¡ˆã—ã¦ã„ã‚‹1. å¤šæ–¹å‘çµåˆãŒæœ‰ç›Šãªå ´åˆã®ã¿å¤šæ–¹å‘çµåˆã‚’ä½¿ç”¨ã™ã‚‹ã‚ªãƒ—ãƒ†ã‚£ãƒã‚¤ã‚¶ã‚’å¿…è¦ã¨ã™ã‚‹ã€‚1. å®Ÿè¡Œä¸­ã«åŠ¹ç‡çš„ã«å®Ÿè¡Œã§ãã€ãƒ‡ã‚£ã‚¹ã‚¯ã®ã«æ°¸ç¶šåŒ–ã™ã‚‹å¿…è¦ã®ãªã„ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ãƒˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’å¿…è¦ã¨ã™ã‚‹ã€‚æ‰‹æ³•ææ¡ˆæ‰‹æ³•ã§ã¯æ¯”è¼ƒãƒ™ãƒ¼ã‚¹ã§ã¯ãªããƒãƒƒã‚·ãƒ¥ãƒ™ãƒ¼ã‚¹ã®çµåˆã®ãŸã‚ã€2ã®ã€Œå®Ÿè¡Œä¸­ã«åŠ¹ç‡çš„ã«å®Ÿè¡Œã§ãã€ãƒ‡ã‚£ã‚¹ã‚¯ã®ã«æ°¸ç¶šåŒ–ã™ã‚‹å¿…è¦ã®ãªã„ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ãƒˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’å¿…è¦ã¨ã™ã‚‹ã€‚ã€ã¨ã„ã†è¦ç´ ã®è€ƒæ…®ã‚’é™¤ã„ã¦ã„ã‚‹ã€‚ã¾ãŸã‚ªãƒ—ãƒ†ã‚£ãƒã‚¤ã‚¶ã«ã¤ã„ã¦ã¯æ—¢å­˜ã®ã‚³ã‚¹ãƒˆãƒ™ãƒ¼ã‚¹ã®ã‚‚ã®ã‚’æ‹¡å¼µã—é©å¿œã—ã¦ã„ã‚‹ã€‚ææ¡ˆæ‰‹æ³•ã§ã¯æ½œåœ¨çš„ã«æˆé•·ã—ã¦ã„ã‚‹çµåˆã®ã‚«ã‚¹ã‚±ãƒ¼ãƒ‰ã‚’æœ€æ‚ªã®å ´åˆã®æœ€é©çµåˆã«ç½®ãæ›ãˆã‚‹ã“ã¨ã§ã€æœ€é©åŒ–ã•ã‚ŒãŸãƒã‚¤ãƒŠãƒªçµåˆè¨ˆç”»ã‚’æ´—ç·´ã•ã›ã‚‹ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’ææ¡ˆã—ã¦ã„ã‚‹ã€‚é€šå¸¸ã®çµåˆé †åºæœ€é©åŒ–ã§ä½¿ç”¨ã•ã‚Œã‚‹ã®ã¨åŒã˜ã‚«ãƒ¼ãƒ‡ã‚£ãƒŠãƒªãƒ†ã‚£æ¨å®šå€¤ã«åŸºã¥ã„ã¦ã€ä¸­é–“ãƒ†ãƒ¼ãƒ–ãƒ«ãŒè†¨å¤§ã«ãªã‚‹çµåˆã‚’ç‰¹å®šã™ã‚‹ã€‚ä½œæ¥­æ™‚é–“read22:1322:13author25:483:35summary52:5826:50æ„Ÿæƒ³ã¨ã¦ã‚‚é›£ã—ã„å†…å®¹ã«æ„Ÿã˜ã¦ã—ã¾ã„ã€æ®†ã©é ­ã‚’é€šã‚Šã™ãã¦ã—ã¾ã£ãŸæ°—ãŒã™ã‚‹ã€‚ä»Šã¾ã§æœ€é©åŒ–ã¯è§¦ã‚Œãšã«æ¥ãŸãŸã‚ã€ç†è§£ãŒæµ…ã„é ˜åŸŸã ã£ãŸã€‚ã‚ˆãã‚ˆãè€ƒãˆã‚‹ã¨DBMSã®è©±ã—ã«æœ€é©åŒ–ãŒç™»å ´ã™ã‚‹ã®ã¯ã‚ãŸã‚Šã¾ãˆãªã®ã§ã€ä»Šå¾Œã¯ãã®æ–¹é¢ã«ã‚‚è§¦ã‚Œã¦è¡ŒããŸã„ã€‚]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[ç¾Šã‚’çœ ã‚‰ã›ã‚‹ sleep ã‚³ãƒãƒ³ãƒ‰ã€Œsheepã€ã®ç´¹ä»‹]]></title>
            <link>https://zenn.dev/kou_pg_0131/articles/sheep-introduction</link>
            <guid>https://zenn.dev/kou_pg_0131/articles/sheep-introduction</guid>
            <pubDate>Tue, 25 Apr 2023 09:00:22 GMT</pubDate>
            <content:encoded><![CDATA[ç¾Šã‚’çœ ã‚‰ã›ã‚‹ sleep ã‚³ãƒãƒ³ãƒ‰ã§ã‚ã‚‹ sheep ã‚’ä½œã‚Šã¾ã—ãŸã€‚https://github.com/koki-develop/sheepã“ã®è¨˜äº‹ã§ã¯ sheep ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³• ~ ä½¿ã„æ–¹ã«ã¤ã„ã¦ã¾ã¨ã‚ã¾ã™ã€‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ä½¿ã„æ–¹ã¾ã¨ã‚ ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«Homebrew ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã¯ brew install ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã¾ã™ã€‚$ brew install koki-develop/tap/sheepã‚‚ã—ãã¯ã€ sheep ã¯ Go ã§ä½œã‚‰ã‚Œã¦ã„ã‚‹ãŸã‚ go install ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚$ go install githu...]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[ãƒãƒ«ãƒã‚³ã‚¢ãƒ¡ã‚¤ãƒ³ãƒ¡ãƒ¢ãƒªã«ãŠã‘ã‚‹ã‚½ãƒ¼ãƒˆã‚¸ãƒ§ã‚¤ãƒ³ã¨ãƒãƒƒã‚·ãƒ¥ã‚¸ãƒ§ã‚¤ãƒ³ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’æ¤œè¨¼ã—ãŸè«–æ–‡ã‚’èª­ã¿ã¾ã—ãŸ]]></title>
            <link>https://nnaka2992.hatenablog.com/entry/2023/04/24/112354</link>
            <guid>https://nnaka2992.hatenablog.com/entry/2023/04/24/112354</guid>
            <pubDate>Mon, 24 Apr 2023 02:23:54 GMT</pubDate>
            <content:encoded><![CDATA[ã“ã®è¨˜äº‹ã®è¶£æ—¨2013å¹´ã«ç™ºè¡¨ã•ã‚ŒãŸ"Multi-Core, Main-Memory Joins: Sort vs. Hash Revisited"ã¨ã„ã†è«–æ–‡ã‚’èª­ã¿ã¾ã—ãŸã€‚å½“æ™‚æœ€æ–°ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¨ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã«ãŠã‘ã‚‹ã€ã‚½ãƒ¼ãƒˆã¨ãƒãƒƒã‚·ãƒ¥ã«ã‚ˆã‚‹çµåˆã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’æ¯”ã¹ãŸè«–æ–‡ã§ã™ã€‚Multi-Core, Main-Memory Joins: Sort vs. Hash Revisitedè‘—è€…ã«ã¤ã„ã¦Cagri Balkesenã€Gustavo Alonsoã€Jens Teubnerã€M. Tamer Ozsuã‚‰ã®ã‚°ãƒ«ãƒ¼ãƒ—ã«ã‚ˆã‚‹è«–æ–‡ã„ãšã‚Œã‚‚DBMSã«ãŠã‘ã‚‹ã‚¯ã‚¨ãƒªæœ€é©åŒ–ã‚„ãƒ“ãƒƒã‚°ãƒ‡ãƒ¼ã‚¿ã«ãŠã‘ã‚‹ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’ç ”ç©¶ã—ã¦ã„ã‚‹ã€‚ã¾ãŸGustavo Alonsoã¯ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã‚„åˆ†æ•£ã‚·ã‚¹ãƒ†ãƒ ã‚‚ãƒ¡ã‚¤ãƒ³ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¨ã—ã¦ã„ã‚‹ã€‚å•é¡Œæ„è­˜DBMSã«ãŠã„ã¦å¸¸ã«ã‚½ãƒ¼ãƒˆãƒãƒ¼ã‚¸ã¨ãƒãƒƒã‚·ãƒ¥çµåˆã®æ€§èƒ½æ¯”è¼ƒãŒè¡Œã‚ã‚Œã¦ãŠã‚Šã€æœ€æ–°ã®ç ”ç©¶ã§ã¯SIMDã‚„NUMAã¸ã®é©æ­£ã«åŸºã¥ã„ã¦ã‚½ãƒ¼ãƒˆãƒãƒ¼ã‚¸ãŒã‚ˆã‚Šå„ªã‚Œã¦ã„ã‚‹ã¨çµè«–ã¥ã‘ã‚‰ã‚Œã¦ã„ãŸã€‚ã—ã‹ã—ã“ã‚Œã‚‰ã®åˆ†é‡ã¯å¸¸ã«ç ”ç©¶ãŒé‡ã­ã‚‰ã‚Œã€éå»ã®æ¤œè¨¼æ™‚ã«ã¯ç™»å ´ã—ã¦ã„ãªã£ãŸãƒãƒƒã‚·ãƒ¥çµåˆã®æœ€é©åŒ–æ‰‹æ³•ãŒç”Ÿã‚ŒãŸã€‚ã“ã®è«–æ–‡ã§ã¯ãã‚Œã‚‰ã‚’é©ç”¨ã—å†åº¦ã‚½ãƒ¼ãƒˆãƒãƒ¼ã‚¸ã¨ãƒãƒƒã‚·ãƒ¥çµåˆã®æ€§èƒ½æ¯”è¼ƒã‚’è¡Œãªã†ã€‚æ‰‹æ³•æœ¬è«–æ–‡ã§ã¯ä»¥ä¸‹ã«åˆ†ã‘ã¦çµåˆæ‰‹æ³•ã®è©•ä¾¡ã‚’è¡Œãªã£ã¦ã„ã‚‹ã€‚1. ã‚½ãƒ¼ãƒˆãƒ•ã‚§ãƒ¼ã‚ºã®è©•ä¾¡SIMDã‚½ãƒ¼ãƒˆã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¨C++ã®STLã‚½ãƒ¼ãƒˆã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’æ¯”è¼ƒã—ã¦ã„ã‚‹ã€‚ãƒãƒ¼ã‚¸ãƒ•ã‚§ãƒ¼ã‚ºã®è©•ä¾¡å…¥åŠ›ã‚µã‚¤ã‚ºã®èª¿æ•´ã«ã‚ˆã‚‹ãƒãƒ¼ã‚¸ãƒ•ã‚§ãƒ¼ã‚ºã®æœ€é©åŒ–ãƒ‘ãƒ¼ãƒãƒ³ã‚¹ã‚’æ¤œè¨¼ã—ã¦ã„ã‚‹ã€‚ã‚½ãƒ¼ãƒˆãƒãƒ¼ã‚¸ã‚¸ãƒ§ã‚¤ãƒ³ã«ãŠã‘ã‚‹å½±éŸ¿è¦å› ã®ç‰¹å®šçµæœçµåˆå¯¾è±¡ã®ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚ºã«æ‹˜ã‚ã‚‰ãšãƒãƒƒã‚·ãƒ¥ã«ã‚ˆã‚‹çµåˆãŒã‚½ãƒ¼ãƒˆãƒ™ãƒ¼ã‚¹ã®çµåˆã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’ä¸Šå›ã£ã¦ã„ã‚‹ã€‚Figure 14ã‚½ãƒ¼ãƒˆãƒãƒ¼ã‚¸ã«ã‚ˆã‚‹çµåˆã¯å…¥åŠ›ã‚µã‚¤ã‚ºãŒè‘—ã—ãå¤§ãããªã£ãŸã¨ãã®ã¿ãƒãƒƒã‚·ãƒ¥çµåˆã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«è¿‘ã¥ãã€‚Figure 15ã‚½ãƒ¼ãƒˆãƒãƒ¼ã‚¸ã€ãƒãƒƒã‚·ãƒ¥çµåˆã«ãŠã‘ã‚‹ãƒ‡ãƒ¼ã‚¿ã®åã‚Šã¯ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«å¤§ããªå½±éŸ¿ã‚’åŠã¼ã•ãªã‹ã£ãŸã€‚Figure 16ã„ãšã‚Œã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚‚ç‰©ç†çš„ãªã‚³ã‚¢æ•°ã§ã¯ç·šå½¢ã«ã‚¹ã‚±ãƒ¼ãƒ«ã—ãŸã€‚Figure 17ä½œæ¥­æ™‚é–“read23:1123:11author27:093:58summary60:1232:57]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[RDBã§ã®çµåˆæ‰‹æ³•ã‚’æ¯”è¼ƒã—ãŸè«–æ–‡ã‚’èª­ã¿ã¾ã—ãŸ]]></title>
            <link>https://nnaka2992.hatenablog.com/entry/2023/04/23/231628</link>
            <guid>https://nnaka2992.hatenablog.com/entry/2023/04/23/231628</guid>
            <pubDate>Sun, 23 Apr 2023 14:16:28 GMT</pubDate>
            <content:encoded><![CDATA[ã“ã®è¨˜äº‹ã®è¶£æ—¨2016å¹´ã«ç™ºè¡¨ã•ã‚ŒãŸ"An Experimental Comparison of Thirteen Relational Equi-Joins in Main Memory"ã¨ã„ã†è«–æ–‡ã‚’èª­ã¿ã¾ã—ãŸã€‚æ§˜ã€…ãªçµåˆæ‰‹æ³•ã‚’åŒ…æ‹¬çš„ã«æ¯”è¼ƒã—ãŸè«–æ–‡ã§ã©ã®ã‚ˆã†ãªçµåˆæ–¹æ³•ãŒã©ã®ã‚ˆã†ãªæ™‚ã«é©ã—ã¦ã„ã‚‹ã‹ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚An Experimental Comparison of Thirteen Relational Equi-Joins in Main Memoryè‘—è€…ã«ã¤ã„ã¦Stefan Schuhã€Xiao Chenã€Jens Dittrichã®ã‚°ãƒ«ãƒ¼ãƒ—ã«ã‚ˆã‚‹è«–æ–‡ã€‚ã„ãšã‚Œã‚‚DBMSã‚„åˆ†æã‚·ã‚¹ãƒ†ãƒ ã€Hadoopãªã©ã«ãŠã‘ã‚‹æ¤œç´¢é«˜é€ŸåŒ–ãƒ»æœ€é©åŒ–ã®ç ”ç©¶ã‚’è¡Œãªã£ã¦ã„ã‚‹ã€‚å•é¡Œæ„è­˜é–¢ä¿‚çµåˆã¯ã»ã¨ã‚“ã©å…¨ã¦ã®ã‚¯ã‚¨ãƒªãƒ—ãƒ©ãƒ³ã«ãŠã„ã¦ä¸­æ ¸ã‚’ãªã™å‡¦ç†ã§ã‚ã‚Šã€å®šæœŸçš„ã«ç ”ç©¶ãƒ»æ”¹è‰¯ã•ã‚Œå†æ¤œè¨ã•ã‚Œã¦ããŸã€‚æ–°ãŸãªæ‰‹æ³•ãŒææ¡ˆã•ã‚Œå®Ÿé¨“ã‚’è¡Œãªã‚ã‚Œã‚‹ã‚‚ã®ã®ã€ãã‚Œãã‚Œçµæœã«ãŠã„ã¦æ¯”è¼ƒã‚’å›°é›£ã«ã™ã‚‹è¦ç´ ã‚„å¹¾ã‚‰ã‹ã®çŸ›ç›¾ã‚’å­•ã‚“ã§ã„ãŸã€‚ä¾‹ãˆã°åŒã˜ãƒãƒƒã‚·ãƒ¥ãƒ™ãƒ¼ã‚¹ã®çµåˆã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®æ¯”è¼ƒã§ã‚‚å®Ÿè£…ãŒç•°ãªã£ãŸã‚Šã€è¤‡æ•°ã®è«–æ–‡ã§ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¯”è¼ƒã§æ­£åå¯¾ã®çµæœã‚’ç¤ºã—ã¦ã„ã‚‹ãŸã‚ã§ã‚ã‚‹ã€‚ãã®ãŸã‚å˜ç´”ã«è«–æ–‡åŸ·ç­†æ™‚ç‚¹ã§æœ€ã‚‚é«˜é€Ÿãªçµåˆã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’çµè«–ã¥ã‘ã‚‹ã“ã¨ãŒå›°é›£ã§ã‚ã£ãŸã€‚æ‰‹æ³•æœ¬è«–æ–‡ã§ã¯çµåˆæ–¹æ³•ã‚’ä»¥ä¸‹ã®3ã¤ã«åˆ†é¡ã—ãŸ1. ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ãƒ™ãƒ¼ã‚¹ãƒãƒƒã‚·ãƒ¥ã‚¸ãƒ§ã‚¤ãƒ³ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã«åˆ†å‰²ã—çµåˆã™ã‚‹æ‰‹æ³•ã€‚ãƒãƒƒã‚·ãƒ¥ãƒ†ãƒ¼ãƒ–ãƒ«ã®æ§‹ç¯‰ã¨çµåˆã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ã®æ¢ç´¢ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒŸã‚¹ã‚’æœ€å°ã«ã™ã‚‹äº‹ã‚’ç›®çš„ã¨ã—ã¦ã„ã‚‹ã€‚éãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ãƒ™ãƒ¼ã‚¹ãƒãƒƒã‚·ãƒ¥ã‚¸ãƒ§ã‚¤ãƒ³ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’æ§‹ç¯‰ã—ãªãŒã‚‰çµåˆã‚’è¡Œãªã†æ‰‹æ³•ã§ã€ãƒãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰ã¨é †ç•ªã«ä¾å­˜ã—ãªã„å®Ÿè¡Œã«ã‚ˆã‚Šã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒŸã‚¹ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åŠ£åŒ–ã‚’éš è”½ã—ã¦ã„ã‚‹ã€‚ã‚½ãƒ¼ãƒˆãƒãƒ¼ã‚¸ã‚¸ãƒ§ã‚¤ãƒ³SIMDã«ã‚ˆã‚Šãƒ™ã‚¯ãƒˆãƒ«åŒ–ã•ã‚Œã‚‹ã€‚æ¤œè¨¼ã§ã¯ã“ã‚Œã‚‰ã®çµåˆæ–¹æ³•ã‚’ä»¥ä¸‹ã®3ã¤ã®ãƒ†ã‚¹ãƒˆã§ä½¿ç”¨ã™ã‚‹ãŸã‚ã«ã€å…¨éƒ¨ã§13ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’æ¤œè¨¼ã—ã¦ã„ã‚‹ã€‚1. ãƒ–ãƒ©ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹æ¯”è¼ƒãƒ–ãƒ©ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹çš„ã«æ¯”è¼ƒã™ã‚‹ã€‚ãƒ›ãƒ¯ã‚¤ãƒˆãƒœãƒƒã‚¯ã‚¹æ¯”è¼ƒãƒ–ãƒ©ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹æ¯”è¼ƒã§æ¤œè¨¼ã™ã‚‹çµåˆæ–¹æ³•ã«å…ˆè¡Œç ”ç©¶ã§ç¤ºã•ã‚ŒãŸæœ€é©åŒ–ã‚’æ–½ã—ãŸä¸Šã§æ¯”è¼ƒã‚’è¡Œãªã†ã€‚ãƒ‘ãƒ©ãƒ¬ãƒ«ãƒ©ãƒ‡ã‚£ãƒƒã‚¯ã‚¹ã‚¸ãƒ§ã‚¤ãƒ³æ¯”è¼ƒTable 2çµæœãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³çµåˆã®ä¸€ç¨®ã§ã‚ã‚‹ãƒªãƒ¢ãƒ¼ãƒˆæ›¸è¾¼ã¿ã‚’æ’é™¤ã—ãŸCPRç³»ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¯å°ã•ãªå…¥åŠ›ã«å¯¾ã—ã¦æœ‰åŠ¹ã§ã¯ãªã„ã‚¹ã‚±ãƒ¼ãƒ«ã®å¤§ãã„çµåˆã§ã¯ã¨ãã«ç†ç”±ãŒç„¡ã„å ´åˆã€ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ãƒ™ãƒ¼ã‚¹ã®ã‚¸ãƒ§ã‚¤ãƒ³ã‚’åˆ©ç”¨ã™ã‚‹å¤§ããªã‚µã‚¤ã‚ºã®ãƒšãƒ¼ã‚¸ã‚’åˆ©ç”¨ã™ã‚‹ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ãƒ©ã‚¤ãƒˆã‚³ãƒ³ãƒã‚¤ãƒ³ãƒãƒƒãƒ•ã‚¡()ã‚’åˆ©ç”¨ã™ã‚‹ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã‚¸ãƒ§ã‚¤ãƒ³ã§ã¯é©åˆ‡ãªãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ãƒ“ãƒƒãƒˆã‚’åˆ©ç”¨ã™ã‚‹ã§ãã‚‹ã‹ãã‚Šã‚·ãƒ³ãƒ—ãƒ«ãªã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’åˆ©ç”¨ã™ã‚‹NUMAã‚’è€ƒæ…®ã—ãŸã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’åˆ©ç”¨ã™ã‚‹å®Ÿè¡Œæ™‚é–“ã¨ã‚¯ã‚¨ãƒªæ™‚é–“ã¯åŒä¸€ã§ã¯ãªã„ä½œæ¥­æ™‚é–“read31:3431:34author35:183:46summary77:5042:32]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã¨ãƒ™ã‚¯ãƒˆãƒ«åŒ–ã«ã‚ˆã‚‹æœ€é©åŒ–ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’æ¯”è¼ƒã—ãŸè«–æ–‡ã‚’èª­ã¿ã¾ã—ãŸ]]></title>
            <link>https://nnaka2992.hatenablog.com/entry/2023/04/21/104506</link>
            <guid>https://nnaka2992.hatenablog.com/entry/2023/04/21/104506</guid>
            <pubDate>Fri, 21 Apr 2023 01:45:06 GMT</pubDate>
            <content:encoded><![CDATA[ã“ã®è¨˜äº‹ã®è¶£æ—¨2018å¹´ã«ç™ºè¡¨ã•ã‚ŒãŸ"Everything You Always Wanted to Know AboutCompiled and Vectorized Queries But Were Afraid to Ask"ã¨ã„ã†è«–æ–‡ã‚’èª­ã¿ã¾ã—ãŸã€‚æœ€æ–°ã®ã‚¯ã‚¨ãƒªã‚¨ãƒ³ã‚¸ãƒ³ã®ç‰¹æ€§ã‚’ã¾ã¨ã‚ã€ã©ã®ã‚ˆã†ãªãƒ¯ãƒ¼ã‚¯ãƒ­ãƒ¼ãƒ‰ã«å‘ãã®ã‹ã¨ã„ã†æŒ‡é‡ã‚’ç¤ºã™ãªã„ã‚ˆã†ã§ã™ã€‚Everything You Always Wanted to Know About Compiled and Vectorized Queries But Were Afraid to AskTimo Kersten, Viktor Leis, Alfons Kemper, Thomas Neumann, Andrew Pavlo, Peter Bonczè‘—è€…ã«ã¤ã„ã¦Timo Kersten, Viktor Leis, Alfons Kemper, Thomas Neumann, Andrew Pavlo, Peter Bonczã®ã‚°ãƒ«ãƒ¼ãƒ—ã«ã‚ˆã‚‹è«–æ–‡ã€‚ã„ãšã‚Œã‚‚å¤§è¦æ¨¡ãƒ‡ãƒ¼ã‚¿ã«ãŠã‘ã‚‹ã‚¯ã‚¨ãƒªãƒ‘ãƒ•ã‚©ãƒ¼ãƒã‚¹ã‚„æœ€é©åŒ–ã«é–¢ã™ã‚‹ç ”ç©¶ã‚’è¡Œãªã£ã¦ã„ã‚‹ã€‚å•é¡Œæ„è­˜åˆ†æãƒ¯ãƒ¼ã‚¯ãƒ­ãƒ¼ãƒ‰ã«å‘ã„ãŸæœ€æ–°ã®ã‚¯ã‚¨ãƒªã‚¨ãƒ³ã‚¸ãƒ³ã¯ãƒ™ã‚¯ãƒˆãƒ«åŒ–ã¾ãŸã¯ãƒ‡ãƒ¼ã‚¿ä¸­å¿ƒã®ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã«åŸºã¥ã„ã¦ã„ã‚‹ã€‚ã©ã¡ã‚‰ã®ãƒ¢ãƒ‡ãƒ«ã‚‚å¾“æ¥ã®ã‚¨ãƒ³ã‚¸ãƒ³ã«æ¯”ã¹ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ãŒå°‘ãã€éå¸¸ã«åŠ¹ç‡çš„ãªã‚‚ã®ã®æ¦‚å¿µçš„ã«ã¯å¤§ããç•°ãªã£ã¦ã„ã‚‹ã€‚ã“ã®2ã¤ã®ãƒ¢ãƒ‡ãƒ«ã®é•ã„ã¯ã€DBMSã®å®Ÿè¡Œã‚¨ãƒ³ã‚¸ãƒ³ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®æ§‹æˆã¨ãã®æ€§èƒ½ç‰¹æ€§ã‚’æ±ºå®šã™ã‚‹åŸºæœ¬çš„ãªã‚‚ã®ã§ã€ã‚¯ã‚¨ãƒªå®Ÿè¡Œãƒ¢ãƒ‡ãƒ«ã‚’è¶…ãˆã‚‹å¤šãã®è¨­è¨ˆã§ç•°ãªã‚‹ã€‚æœ¬è«–æ–‡ã¯ã“ã¨ãªã‚‹2ã¤ã®ãƒ¢ãƒ‡ãƒ«ã‚’å†å®Ÿè£…ã—ã€ç’°å¢ƒå·®ç•°ã®ãªã„ãƒã‚·ãƒ³ã§å®Ÿè¡Œã™ã‚‹ã“ã¨ã§ãã‚Œãã‚Œã®ãƒ¢ãƒ‡ãƒ«ãŒã©ã®ã‚ˆã†ã«é•ã†ã®ã‹ã€‚ã©ã®ã‚ˆã†ãªç”¨é€”ã«æœ€é©ãªã®ã‹ã‚’æ¤œè¨¼ã—ã¦ã„ã‚‹ã€‚æ‰‹æ³•æ¤œè¨¼æ‰‹æ³•ã¯è‘—è€…ã‚‰ãŒC++ã§å†å®Ÿè£…ã—ãŸãƒ‡ãƒ¼ã‚¿ä¸­å¿ƒãƒ¢ãƒ‡ãƒ«ã®ã€ŒTaperã€ã¨ãƒ™ã‚¯ãƒˆãƒ«åŒ–ä¸­å¿ƒã®ã€ŒTectorwiseã€ã‚’åŒä¸€ã®ãƒã‚·ãƒ³ã§ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¤œè¨¼ã‚’è¡Œã£ã¦ã„ã‚‹ã€‚æ¤œè¨¼é …ç›®ã¯ä»¥ä¸‹ã‹ã‚‰æˆã‚‹1. ã‚¤ãƒ³ãƒ¡ãƒ¢ãƒªOLAPãƒ¯ãƒ¼ã‚¯ãƒ­ãƒ¼ãƒ‰ã§ã®ãƒã‚¤ã‚¯ãƒ­ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£åˆ†æ1. SIMDã®åˆ©ç‚¹ã®æ¤œè¨¼1. ãƒãƒ«ãƒã‚³ã‚¢CPUã«ãŠã‘ã‚‹ã‚¯ã‚¨ãƒªä¸¦åˆ—åŒ–1. ç•°ãªã‚‹ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã§ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹çµæœã‚¤ãƒ³ãƒ¡ãƒ¢ãƒªOLAPãƒ¯ãƒ¼ã‚¯ãƒ­ãƒ¼ãƒ‰ã§ã®ãƒã‚¤ã‚¯ãƒ­ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£åˆ†æFigure 3: Performance â€“ TPC-H SF=1, 1 threadSIMDã®åˆ©ç‚¹ã®æ¤œè¨¼SIMDã‚’è©•ä¾¡ã™ã‚‹ã«ã¯Tectorwiseã®ã¿ã‚’ç”¨ã„ãŸã€‚SIMDã§ã¯ã‚¹ã‚«ãƒ©ãƒ¼ãªãƒ‡ãƒ¼ã‚¿ã‚’ãƒ™ã‚¯ãƒˆãƒ«ã«å¤‰æ›ã™ã‚‹ãƒšãƒŠãƒ«ãƒ†ã‚£ã¯å°‘ãã€æœ€å¤§8.4å€ã®æ€§èƒ½å‘ä¸ŠãŒç¢ºèªã•ã‚ŒãŸã€‚Figure 6: Scalar vs. SIMD Selection in Tectorwiseãƒãƒ«ãƒã‚³ã‚¢CPUã«ãŠã‘ã‚‹ã‚¯ã‚¨ãƒªä¸¦åˆ—åŒ–ç•°ãªã‚‹ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã§ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹Intel Skylakeã€Intel Knights Landingã€AMD Ryzenã§å¯¾ç…§å®Ÿé¨“ã‚’è¡Œãªã£ãŸã‚‚ã®ã®ã€ã„ãšã‚Œã®ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã§ã‚‚Typerã€Tectorwiseã¨ã‚‚ã«æœ‰åŠ¹ã«å‹•ä½œã—ãŸã€‚ä½œæ¥­æ™‚é–“read29:2629:26author33:233:57summary76:3742:44æ„Ÿæƒ³Voectorwiseã¨Hyperã®ã„ãšã‚Œã‚’ä½¿ã†ã¹ãã‹ã€‚ã©ã¡ã‚‰ãŒå„ªã‚Œã¦ã„ã‚‹ã‹ã¨ã„ã£ãŸç–‘å•ã«ç­”ãˆã‚‹ãªã„ã‚ˆã†ã ã£ãŸã€‚]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[é¼»ä¸­éš”æ¹¾æ›²ç—‡ã®æ‰‹è¡“ã‚’ã—ãŸ]]></title>
            <link>https://pranc1ngpegasus.hatenablog.com/entry/2023/04/20/120509?utm_source=feed</link>
            <guid>https://pranc1ngpegasus.hatenablog.com/entry/2023/04/20/120509?utm_source=feed</guid>
            <pubDate>Thu, 20 Apr 2023 03:05:09 GMT</pubDate>
            <content:encoded><![CDATA[ç”Ÿã¾ã‚Œã¤ãé¼»ã®éª¨ãŒæ›²ãŒã£ã¦ãŠã‚Šã€å·¦é¼»ã®æ°—é“ãŒã‹ãªã‚Šç‹­ã‹ã£ãŸã€‚èµ·åºŠæ™‚ã«é…¸æ¬ ã«ã‚ˆã‚‹é ­ç—›ãŒã—ãŸã‚Šã€å·¦é¼»ã ã‘åŒ–è†¿ã—ãŸã‚Šã€å³é¼»ãŒè©°ã¾ã‚‹ã¨å£å‘¼å¸ã«ãªã£ãŸã‚Šã€æ¯ãŒã§ããªãã¦æººã‚Œã¦ã„ã‚‹æ„Ÿè¦šã§ç›®ãŒè¦šã‚ãŸã‚Šå½±éŸ¿ãŒãŸãã•ã‚“ã‚ã£ãŸã€‚å·¦å³ã®é¼»ã‚’éš”ã¦ã‚‹å£ã®ã“ã¨ã‚’é¼»ä¸­éš”ã¨ã„ã„ã€ãã‚ŒãŒæ›²ãŒã£ã¦ã„ã‚‹ã“ã¨ã‚’é¼»ä¸­éš”æ¹¾æ›²ç—‡ã¨ã„ã†ã‚‰ã—ã„ã€‚27å¹´æŠ±ãˆã¦ããŸå•é¡Œã‚’è§£æ±ºã™ã¹ãç·åˆç—…é™¢ã«ã¦æ‰‹è¡“ã‚’å—ã‘ãŸã®ã§ã¾ã¨ã‚ã‚‹ã€‚ç—‡çŠ¶ã®åå‰é¼»ä¸­éš”æ¹¾æ›²ç—‡ãŠã‚ˆã³è‚¥åšæ€§é¼»ç‚æ‰‹è¡“ã®å†…å®¹å…¨èº«éº»é…”ã®çŠ¶æ…‹ã§æ‰‹è¡“ã‚’è¡Œã£ãŸã€‚ã¾ãšã€é¼»ã‹ã‚‰å†…è¦–é¡ã‚’å…¥ã‚Œã€æ›²ãŒã£ãŸè»Ÿéª¨ã‚’åˆ‡é™¤ã—ãŸã€‚æ¬¡ã«ã€ç²˜è†œãŒåšããªã£ã¦ã„ã‚‹ãŸã‚ã«æ°—é“ã‚’ç‹­ãã—ã¦ã„ã‚‹ã“ã¨ã‚‚ã‚ã‹ã£ãŸã®ã§åŒæ™‚ã«åˆ‡é™¤æ¸›é‡ã—ãŸã€‚è¡“å¾Œã®çµŒééº»é…”ã‹ã‚‰è¦šã‚ã‚‹ã¨ã€ä¸¡é¼»ã«ã‚¬ãƒ¼ã‚¼ãŒè©°ã‚è¾¼ã¾ã‚ŒãŸçŠ¶æ…‹ã«ãªã£ã¦ã„ãŸã€‚ã“ã‚Œã¯æ­¢è¡€ã®ãŸã‚ã¨ã€è»Ÿéª¨ã‚’åˆ‡é™¤ã—ãŸãŸã‚ã«ä½ä¸‹ã—ãŸé¼»ã®å¼·åº¦ã‚’æ”¯ãˆã‚‹ãŸã‚ã®ã‚‚ã®ã§ã‚ã£ãŸã€‚ä¸¡é¼»ã«ã‚¬ãƒ¼ã‚¼ãŒè©°ã¾ã£ã¦ã„ã‚‹ã®ã§å¼·åˆ¶çš„ã«å£å‘¼å¸ãŒå¿…è¦ã«ãªã‚Šã€å¤œé–“ãŒã‚ã£ã¡ã‚ƒã¤ã‚‰ã‹ã£ãŸã€‚ã¾ãŸå‡ºè¡€ã‚‚ãã“ãã“ã‚ã£ãŸã®ã§ã€è¡€ã®æµ·ã«ãªã‚‹ã“ã¨ã‚’è¦šæ‚Ÿã—ãªãŒã‚‰åºŠã«å°±ã„ãŸã€‚ã“ã‚Œã‹ã‚‰ã‚¬ãƒ¼ã‚¼ã¯è¡“å¾Œ3æ—¥ç›®ã«å–ã‚Šå¤–ã—ã€é¼»ã®ä¸­ã‚’æ¹¿ã‚‰ã›ã¦å›å¾©ã‚’æ—©ã‚ã‚‹ãŸã‚ã«2~4é€±é–“ã»ã©ä¸¡é¼»ã«ç¶¿çƒã‚’å…¥ã‚Œã¦ç”Ÿæ´»ã™ã‚‹ã€‚é¼»ã®è¡¨é¢ã«ã¯ã‚­ã‚ºãŒãªã„ã®ã§ã€ãƒã‚¹ã‚¯ã‚’ã¤ã‘ã¦ã„ã‚Œã°è¦‹ãŸç›®ã¯æ™®é€šã®çŠ¶æ…‹ã§ç”Ÿæ´»ã§ããã†ã ã€‚ä¸¡é¼»ã«ç¶¿çƒãŒå…¥ã£ã¦ã„ã¦é¼»ã§å‘¼å¸ãŒã§ããªã„ãŸã‚ä¼šè©±ã™ã‚‰ã—ã¥ã‚‰ã„ã®ãŒé›£ç‚¹ã§ã‚ã‚‹ã€‚ã¾ã¨ã‚è¡“å¾Œ1ãƒ¶æœˆã‚‚ã™ã‚Œã°ç¶¿çƒã‹ã‚‰ã‚‚é–‹æ”¾ã•ã‚Œã¦ã‚‚ã¨ã®ç”Ÿæ´»ã«æˆ»ã‚Œã‚‹è¦‹è¾¼ã¿ã§ã‚ã‚‹ã€‚å‘¼å¸ãŒã—ã‚„ã™ããªã‚‹ã¯ãšãªã®ã§ç¡çœ ã®åŠ¹ç‡ã‚„ç–²ã‚Œã‚„ã™ã•ã®æ”¹å–„ãªã©ã•ã¾ã–ã¾ãªæ”¹å–„ãŒæ¥½ã—ã¿ã§ã‚ã‚‹ã€‚]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[SIMDã«ã‚ˆã‚‹ãƒ™ã‚¯ãƒˆãƒ«å‡¦ç†ã®æœ€é©åŒ–ã¨RDBã§ã®å¿œç”¨ã«ã¤ã„ã¦æ‰±ã£ãŸã€æœ€é©åŒ–ã«é–¢ã™ã‚‹è«–æ–‡ã‚’èª­ã¿ã¾ã—ãŸ]]></title>
            <link>https://nnaka2992.hatenablog.com/entry/counter_control_flow_divergence_in_compiled_query_pipelines</link>
            <guid>https://nnaka2992.hatenablog.com/entry/counter_control_flow_divergence_in_compiled_query_pipelines</guid>
            <pubDate>Thu, 20 Apr 2023 02:00:20 GMT</pubDate>
            <content:encoded><![CDATA[ã“ã®è¨˜äº‹ã®è¶£æ—¨2020å¹´ã«ææ¡ˆã•ã‚ŒãŸ"Make the most out of your SIMD investments: counter control flowdivergence in compiled query pipelines"ã¨ã„ã†è«–æ–‡ã‚’èª­ã¿ã¾ã—ãŸã€‚SIMDã«ã‚ˆã‚‹ãƒ™ã‚¯ãƒˆãƒ«å‡¦ç†ã®æœ€é©åŒ–ã¨RDBã§ã®å¿œç”¨ã«ã¤ã„ã¦æ‰±ã£ãŸã€æœ€é©åŒ–ã«é–¢ã™ã‚‹è«–æ–‡ã§ã™ã€‚Make the most out of your SIMD investments: counter control flow divergence in compiled query pipelinesHarald Lang, Linnea Passing, Andreas Kipf, Peter Boncz, Thomas Neumann, Alfons Kemperè‘—è€…ã«ã¤ã„ã¦Harald Langã€ Linnea Passingã€ Andreas Kipfã€ Peter Bonczã€ Thomas Neumannã€ Alfons Kemperã®ã‚°ãƒ«ãƒ¼ãƒ—ã«ã‚ˆã‚‹ç ”ç©¶ã„ãšã‚Œã‚‚æœ€æ–°ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã§ã®ã‚¯ã‚¨ãƒªæœ€é©åŒ–ã‚„ãƒ‡ãƒ¼ã‚¿åˆ†æã«ãŠã‘ã‚‹æ¤œç´¢æ‰‹æ³•ãªã©ã‚’ç ”ç©¶ã—ã¦ã„ã‚‹ã€‚å•é¡Œæ„è­˜CPUã®ç™ºå±•ã«ã¨ã‚‚ãªã„ã‚ãŸã‚‰ã—ã„CPUã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãŒç™»å ´ã—ãŸã€‚Single Instruction Multiple Data(SIMD)ã§ã¯RDBã¯SIMDã«ã‚ˆã‚‹ãƒ™ã‚¯ãƒˆãƒ«å‡¦ç†èƒ½åŠ›ã®å‘ä¸Šã«ã‚ˆã‚Šã€ã‚¯ã‚¨ãƒªã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã®å®Ÿè¡Œãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å…¨ä½“ã‚’ãƒ™ã‚¯ãƒˆãƒ«åŒ–ã—ã¦é«˜åº¦ãªãƒ‡ãƒ¼ã‚¿ä¸¦åˆ—æ€§ã®æ©æµã‚’å—ã‘ã‚‹ã“ã¨ãŒå‡ºæ¥ã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚ä¸€æ–¹ã§ã‚¯ã‚¨ãƒªå…¨ä½“ã‚’ãƒ™ã‚¯ãƒˆãƒ«åŒ–ã—ã¦å®Ÿè¡Œã™ã‚‹ã“ã¨ã§ã€SIMDã«ã‚ˆã‚‹ã‚¯ã‚¨ãƒªè©•ä¾¡ãŒå¿™ã—ããªã‚‹ã€‚SIMDè©•ä¾¡ã§çµæœã«å¯„ä¸ã—ãªã„è©•ä¾¡ãŒå˜ç´”ã«ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ã¨ãªã£ã¦ã—ã¾ã†ã€‚æ‰‹æ³•æœ¬è«–æ–‡ã§ã¯ãƒªãƒ•ã‚£ãƒ«ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¨ãã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’ã‚¯ã‚¨ãƒªãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ãƒ—ãƒ©ãƒ³ã«çµ±åˆã™ã‚‹æ‰‹æ³•ã§ä¸Šè¨˜ã®å•é¡Œã®è§£æ±ºã‚’è©¦ã¿ã¦ã„ã‚‹ã€‚ãƒªãƒ•ã‚£ãƒ«ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¯åŸºæœ¬çš„ã«æ–°ã—ã„è¦ç´ ã‚’å®›å…ˆãƒ¬ã‚¸ã‚¹ã‚¿ã®å¸Œæœ›ã™ã‚‹ä½ç½®ã«ã‚³ãƒ”ãƒ¼ã™ã‚‹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§ã€ãƒ¡ãƒ¢ãƒªã‹ã‚‰ãƒ¬ã‚¸ã‚¹ã‚¿ã¨ãƒ¬ã‚¸ã‚¹ã‚¿ã‹ã‚‰ãƒ¬ã‚¸ã‚¹ã‚¿ã¸ã®ã‚³ãƒ”ãƒ¼ã®2ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒå­˜åœ¨ã™ã‚‹ã€‚ã‚¯ã‚¨ãƒªãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ãƒ—ãƒ©ãƒ³ã«çµ±åˆã™ã‚‹ãƒªãƒ•ã‚£ãƒ«æˆ¦ç•¥ã§ã¯Consume Everythingãƒ‘ã‚¿ãƒ¼ãƒ³ã¨Partial Consumeãƒ‘ã‚¿ãƒ¼ãƒ³ãŒå­˜åœ¨ã™ã‚‹ã€‚Consum Everythingæˆ¦ç•¥ã¯ã€ã‚¿ãƒ—ãƒ«ã‚’ãƒãƒƒãƒ•ã‚¡ãƒªãƒ³ã‚°ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã‚‹è¿½åŠ ã®ãƒ™ã‚¯ã‚¿ãƒ¼ãƒ¬ã‚¸ã‚¹ã‚¿ã‚’å‰²ã‚Šå½“ã¦ã‚‹æ–¹æ³•ã§åˆ©ç”¨ç‡ãŒä½ã„å ´åˆã€ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ã¯ã“ã‚Œã‚‰ã®ã‚¿ãƒ—ãƒ«ã®å‡¦ç†ã‚’å»¶æœŸã™ã‚‹ã€‚ã¤ã¾ã‚Šã€ã“ã®åå¾©ã§ã¯ãƒœãƒ‡ã‚£ã¯å®Ÿè¡Œã•ã‚Œãš(æ¡ä»¶ãŒæº€ãŸã•ã‚Œãªã„å ´åˆ)ã€ä»£ã‚ã‚Šã«ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªã‚¿ãƒ—ãƒ«ãŒã“ã‚Œã‚‰ã®ãƒãƒƒãƒ•ã‚¡ãƒ¬ã‚¸ã‚¹ã‚¿ã«ç§»å‹•ã™ã‚‹ã“ã¨ã«ãªã‚‹ã€‚Partial Consumeæˆ¦ç•¥ã§ã¯consume()ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã®ä¸€éƒ¨ã«é©ç”¨ã™ã‚‹æ–¹æ³•ã§ã€åˆ¶å¾¡ãƒ•ãƒ­ãƒ¼ã‚’å‰ã®ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ã«æˆ»ã—ã€ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªãƒ‡ãƒ¼ã‚¿æ–­ç‰‡ã®ã¿ã‚’ãƒ™ã‚¯ãƒˆãƒ«ãƒ¬ã‚¸ã‚¹ã‚¿ã«æ®‹ã™ã“ã¨ã§å®Ÿè¡Œã‚’å»¶æœŸã—ã¦ã„ã‚‹ã€‚ä½œæ¥­æ™‚é–“read29:4029:40author33:404:00summary60:0426:36æ„Ÿæƒ³å‰å›ã«å¼•ç¶šãå€‹äººçš„ã«ã¯é›£ã—ã„ã¨æ„Ÿã˜ã‚‹è«–æ–‡ã ã£ãŸã€‚2000å¹´å‰å¾Œã®ææ¡ˆã«ãã‚‰ã¹ã€2015å¹´å‰å¾Œã®è«–æ–‡ã§ã¯ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’ä¸­å¿ƒã¨ã—ãŸæ‰‹æ³•ãŒãƒ”ãƒƒã‚¯ã‚¢ãƒƒãƒ—ã•ã‚Œã¦ã„ã‚‹ã€‚å˜ç´”ã«è‡ªåˆ†ã®çŸ¥è­˜ä¸è¶³ã€ç†è§£åŠ›ä¸è¶³ãªã®ã§å‹‰å¼·ã™ã‚‹ã—ã‹ãªã„ã€‚]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[NUMAã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã§ã®ã‚¯ã‚¨ãƒªæœ€é©åŒ–ã«é–¢ã™ã‚‹è«–æ–‡ã‚’èª­ã¿ã¾ã—ãŸ]]></title>
            <link>https://nnaka2992.hatenablog.com/entry/numa_aware_query_evaluation_framework</link>
            <guid>https://nnaka2992.hatenablog.com/entry/numa_aware_query_evaluation_framework</guid>
            <pubDate>Tue, 18 Apr 2023 01:01:35 GMT</pubDate>
            <content:encoded><![CDATA[ã“ã®è¨˜äº‹ã®è¶£æ—¨"Morsel-Driven Parallelism: A NUMA-Aware Query Evaluation Framework forthe Many-Core Age"ã¨ã„ã†2014å¹´ã«ç™ºè¡¨ã•ã‚ŒãŸã€å¤šã‚³ã‚¢ã‚µãƒ¼ãƒã«ãŠã‘ã‚‹ã‚¯ã‚¨ãƒªæœ€é©åŒ–æ‰‹æ³•ã‚’ã‚ã¤ã‹ã£ãŸè«–æ–‡ã‚’èª­ã¿ã¾ã—ãŸã€‚[Morsel-Driven Parallelism: A NUMA-Aware QueryEvaluation Framework for the Many-Core Age](https://15721.courses.cs.cmu.edu/spring2023/papers/07-scheduling/p743-leis.pdf)Viktor Leis, Peter Boncz, Alfons Kemper, Thomas Neumannè‘—è€…ã«ã¤ã„ã¦Viktor Leisã€ Peter Bonczã€ Alfons Kemperã€Thomas Neumannã®ã‚°ãƒ«ãƒ¼ãƒ—ã«ã‚ˆã‚‹ç ”ç©¶ã„ãšã‚Œã‚‚ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¨ é«˜é€ŸåŒ–ã‹ã‚’ä¸­å¿ƒã«ç ”ç©¶ã—ã¦ã„ã‚‹ã€‚å•é¡Œæ„è­˜ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®é€²åŒ–ã«ã¨ã‚‚ãªã„ã€äºŒã¤ã®ã‚ãŸã‚‰ã—ã„å•é¡ŒãŒç”Ÿã˜ãŸã€‚å¤šã‚³ã‚¢ã‚’åˆ©ç”¨ã™ã‚‹ãŸã‚ã«ã‚¯ã‚¨ãƒªã‚’æ•°ç™¾ã®ã‚¹ãƒ¬ãƒƒãƒ‰ã«å‡ç­‰ã«åˆ†æ•£ã•ã›ã‚‹ãã‚Œã‚’NUMA(Non-Uniform Memory Access)ã«ã‚ˆã‚‹é †åºé€šã‚Šã§ã¯ãªã„ãƒ¡ãƒ¢ãƒªã‚¢ã‚¯ã‚»ã‚¹ã§å®Ÿç¾ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚ã“ã‚Œã‚‰ã®è¦å› ã‹ã‚‰planãƒ™ãƒ¼ã‚¹ã®ä¸¦åˆ—å‡¦ç†ã«ã‚ˆã‚‹ä¸å¯åˆ†æ•£ã¨ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚¹ã‚¤ãƒƒãƒã¨ãƒœãƒˆãƒ«ãƒãƒƒã‚¯ãŒå•é¡Œã«ãªã‚Šã‚¹ã‚±ãƒ¼ãƒ«ãŒé›£ã—ã‹ã£ãŸã€‚NUMAã«ã‚ˆã£ã¦ãƒ‡ãƒ¼ã‚¿ã¨ã‚¢ã‚¯ã‚»ã‚¹ã‚¹ãƒ¬ãƒƒãƒ‰ãŒã©ã®ãƒãƒƒãƒ—ã«é…ç½®ã•ã‚Œã‚‹ã‹ã«ã‚ˆã£ã¦ã€ãƒ‡ãƒ¼ã‚¿é …ç›®ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚³ã‚¹ãƒˆãŒç•°ãªã‚‹ãŸã‚ã€ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿è‡ªä½“ãŒãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã«ãªã£ã¦ãŠã‚Šã€å¤šã‚³ã‚¢ä¸¦åˆ—åŒ–ã§ã¯ã€RAMã‚„ã‚­ãƒ£ãƒƒã‚·ãƒ¥éšå±¤ã‚’è€ƒæ…®ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚ã“ã®è«–æ–‡ã§ã¯Moral-drivenã‚¯ã‚¨ãƒªå®Ÿè¡Œãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’ææ¡ˆã—ã¦ã„ã‚‹ã€‚æ‰‹æ³•ææ¡ˆæ‰‹æ³•ã¯ä¸¦åˆ—ã‚¯ã‚¨ãƒªå‡¦ç†ã®ãŸã‚ã€morselãƒ‰ãƒªãƒ–ãƒ³ã‚¯ã‚¨ãƒªè©•ä¾¡ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’æç¤ºã—ãŸã€‚ã“ã‚Œã¯ãƒ¡ãƒ‹ãƒ¼ã‚³ã‚¢æ™‚ä»£ã®åˆ†æã‚¯ã‚¨ãƒªæ€§èƒ½ã®ä¸»è¦ãªãƒœãƒˆãƒ«ãƒãƒƒã‚¯ã§ã‚ã‚‹è² è·åˆ†æ•£ã€ã‚¹ãƒ¬ãƒƒãƒ‰åŒæœŸã€ãƒ¡ãƒ¢ãƒªã‚¢ã‚¯ã‚»ã‚¹å±€æ‰€æ€§ãŠã‚ˆã³ãƒªã‚½ãƒ¼ã‚¹å¼¾åŠ›æ€§ã‚’è§£æ±ºã™ã‚‹ã“ã¨ã‚’ç›®çš„ã¨ã—ã¦ã„ã‚‹ã€‚ãƒ™ãƒ¼ã‚¹ã¨ãªã‚‹ã‚¢ã‚¤ãƒ‡ã‚¢ã¯ä»¥ä¸‹ã®2ã¤ã«åˆ†ã‘ã‚‰ã‚Œã‚‹ã€‚ãƒ¡ãƒ¢ãƒªä¸Šã®ãƒ‡ãƒ¼ã‚¿ã‚’morselã¨å‘¼ã°ã‚Œã‚‹å°ã•ãªãƒãƒƒãƒã«åˆ†å‰²ã—ã€ãƒãƒƒãƒã”ã¨ã«å‡¦ç†ã‚’å®Ÿè¡Œã—ãŸã‚ã¨ã«ãã‚Œãã‚Œã®å‡¦ç†çµæœã‚’ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒãƒƒã‚·ãƒ¥ãƒ†ãƒ¼ãƒ–ãƒ«ã¨ã—ã¦ã¾ã¨ã‚ã‚‹ã€‚Figure 3: NUMA-aware processing of the build-phaseãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒãƒ£ã¨å‘¼ã°ã‚Œã‚‹ä¸¦è¡Œãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³åˆ¶å¾¡ã‚’è¡Œãªã„ã€ãƒ¯ãƒ¼ã‚«ãƒ¼ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’ã‚¿ã‚¹ã‚¯ã«å‰²ã‚Šå½“ã¦ã‚‹Figure 5: Dispatcher assigns pipeline-jobs on morsels to threads depending on the coreã¾ã¨ã‚ã¨ã—ã¦è‘—è€…ã¯ãã‚ç´°ã‹ã„ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°ã€å®Œå…¨æ¼”ç®—å­ä¸¦åˆ—åŒ–ã€ä½ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰åŒæœŸã€NUMAå¯¾å¿œã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°ã®åŸç†ã‚’ç”¨ã„ã¦ã€ä»–ã®ã‚·ã‚¹ãƒ†ãƒ ã§ã‚‚ãƒ¡ãƒ‹ãƒ¼ã‚³ã‚¢ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã‚’æ”¹å–„ã§ãã‚‹ã¨ç¤ºå”†ã—ã¦ã„ã‚‹ã€‚ä½œæ¥­æ™‚é–“read28:3628:36author32:453:09summary60:3727:52æ„Ÿæƒ³è¿‘ç¾ä»£ã®ã‚µãƒ¼ãƒã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã§ä¸»æµã«ãªã£ã¦ã„ã‚‹NUMAã§ã®ã‚¯ã‚¨ãƒªãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Šã®ãŸã‚ã®è«–æ–‡ã®ãŸã‚ã€å¤å…¸çš„ãªã‚‚ã®ã«æ¯”ã¹æ¦‚å¿µãŒé›£ã—ã„ã‚‚ã®ãŒå¤šã„ã€‚ã‚‚ã†å°‘ã—ç†è§£ã‚’æ·±ã‚ãŸã„ã€‚]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Go ã® Fuzzy Finder ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€Œgo-fzfã€ã®ç´¹ä»‹]]></title>
            <link>https://zenn.dev/kou_pg_0131/articles/go-fzf-introduction</link>
            <guid>https://zenn.dev/kou_pg_0131/articles/go-fzf-introduction</guid>
            <pubDate>Mon, 17 Apr 2023 10:01:33 GMT</pubDate>
            <content:encoded><![CDATA[Go ã® Fuzzy Finder ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã‚ã‚‹ go-fzf ã‚’ä½œã‚Šã¾ã—ãŸã€‚https://github.com/koki-develop/go-fzfgo-fzf ã‚’ä½¿ç”¨ã™ã‚‹ã¨æ¬¡ã®ã‚ˆã†ãª Fuzzy Finder ã‚’ç°¡å˜ã«å®Ÿè£…ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä¸Šã®ä¾‹ã§å®Ÿè¡Œã—ã¦ã„ã‚‹ main.go ã®å†…å®¹ã¯ã“ã‚Œã ã‘ã§ã™ã€‚main.gopackage mainimport (	"fmt"	"log"	"github.com/koki-develop/go-fzf")func main() {	items := []string{"hello", "world", ...]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[åˆ—æŒ‡å‘DBMSã«ãŠã‘ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’ææ¡ˆã—ãŸè«–æ–‡ã‚’èª­ã¿ã¾ã—ãŸ]]></title>
            <link>https://nnaka2992.hatenablog.com/entry/hyper_pipelining_query_execution</link>
            <guid>https://nnaka2992.hatenablog.com/entry/hyper_pipelining_query_execution</guid>
            <pubDate>Mon, 17 Apr 2023 01:16:56 GMT</pubDate>
            <content:encoded><![CDATA[ã“ã®è¨˜äº‹ã®è¶£æ—¨"MonetDB/X100: Hyper-Pipelining Query Execution"ã¨ã„ã†2005å¹´ã«ç™ºè¡¨ã•ã‚ŒãŸã€åˆ—æŒ‡å‘DBMSã‚’ææ¡ˆã—ãŸè«–æ–‡ã‚’èª­ã‚“ã§ã„ãã¾ã™ã€‚åˆ†æãƒ¯ãƒ¼ã‚¯ãƒ­ãƒ¼ãƒ‰å‘ã‘RDBMSã«ãŠã‘ã‚‹åˆæœŸå®Ÿè£…ã§ã‚ã‚‹MonetDBã‚’æ‰±ã£ãŸè«–æ–‡ã§ã€ææ¡ˆæ™‚æœŸãŒ2005å¹´ã¨å¤ãã¯ã‚ã‚‹ã‚‚ã®ã®ç¾ä»£ã®DWHã®ç¤ã¨ãªã‚‹å†…å®¹ã§ã™ã€‚MonetDB/X100: Hyper-Pipelining Query ExecutionPeter Boncz, Marcin Zukowski, Niels Nesè‘—è€…ã«ã¤ã„ã¦Peter Bonczã€Marcin Zukowskiã€Niels Nseã®ã‚°ãƒ«ãƒ¼ãƒ—ã«ã‚ˆã‚‹è«–æ–‡ã€‚ã„ãšã‚Œã®è‘—è€…ã‚‚æ©Ÿæ¢°å­¦ç¿’ã‚„åˆ†æã«ãŠã‘ã‚‹DBMSã«ã¤ã„ã¦ç ”ç©¶ã—ã¦ã„ã‚‹ã€‚å•é¡Œæ„è­˜2005å¹´å½“æ™‚ã®DBMSã¯ä»–ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«æ¯”ã¹ã€IPCãŒä½ããªã‚‹å‚¾å‘ã«ã‚ã£ãŸã€‚åŸå› ã¯ã»ã¨ã‚“ã©ã®DBMSãŒã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã®æœ€é©åŒ–ã‚’é˜»å®³ã™ã‚‹å®Ÿè£…ã ã£ãŸãŸã‚ã§ã‚ã‚‹ã€‚ã“ã‚Œã¯RDBMSãŒå®Ÿè£…ã•ã‚ŒãŸå½“æ™‚ã«æ¯”ã¹CPUã‚„ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãŒç™ºé”ã—ãŸãŸã‚ã§ã€ã“ã®è«–æ–‡ã§ã¯C-store DBMSã§ã‚ã‚‹MonetDBã¨å¾“æ¥ã®R-store DBMSã‚’ãã‚Œãã‚ŒTPC-Hã§è©•ä¾¡ã‚’è¡Œã„ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹é˜»å®³è¦ä»¶ã¨æœ€é©åŒ–æ–¹æ³•ã‚’ææ¡ˆã—ã¦ã„ã‚‹ã€‚æ‰‹æ³•CPUã«ã‚ˆã‚‹IFæ–‡ã®å‡¦ç†æ–¹æ³•ã¯DBMSã«ã¨ã£ã¦ã¯é¸æŠæ€§ãŒä½ãã€ãã†ã„ã£ãŸå®Ÿè¡Œã¯äºˆæ¸¬ä¸å¯èƒ½ã§ã‚ã‚Šã‚¯ã‚¨ãƒªå®Ÿè¡Œã‚’è‘—ã—ãåŠ£ã‚‰ã›ãŸã€‚ææ¡ˆæ‰‹æ³•ã§ã¯MonetDB/X100ã¨ã—ã¦åŠ¹ç‡çš„ãªã‚·ãƒ¼ã‚±ãƒ³ã‚·ãƒ£ãƒ«ã‚¢ã‚¯ã‚»ã‚¹ã«å‘ã‘ãŸã€C-storeã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã¨ã‚¯ã‚¨ãƒªã‚¨ãƒ³ã‚¸ãƒ³ã‚’å®Ÿè£…ã—ãŸã€‚RAMã¯ææ¡ˆæ‰‹æ³•ã®ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹ã¨åŒæ§˜ã®æ–¹æ³•ã§åœ§ç¸®ã—ã¦ä¿å­˜ã—ã€Cacheã§ã¯ãªãƒ™ã‚¯ãƒˆãƒ«åŒ–ã•ã‚ŒãŸå‡¦ç†ã«ã‚‚ã¨ã¥ããƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å®Ÿè£…ã‚’ä½¿ç”¨ã—ãŸã€‚CPUã«ãŠã„ã¦ã‚‚ãƒ™ã‚¯ãƒˆãƒ«å‹ã«ãŠã‘ã‚‹å¼è¨ˆç®—ã‚’æä¾›ã—ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãŒé«˜åŠ¹ç‡ãªå‡¦ç†ã‚’ç”Ÿæˆã—ãŸã€‚çµæœã¨ã—ã¦ææ¡ˆæ‰‹æ³•ã¯å¾“æ¥ã®DBMSå®Ÿè¡Œã«æ¯”ã¹TPC-Hã§å„ªã‚ŒãŸæ€§èƒ½ã‚’ã—ã‚ã—ãŸã€‚ä½œæ¥­æ™‚é–“read21:3221:32author29:007:28summary56:2027:20æ„Ÿæƒ³2005å¹´ã¨å¤ãã€ã¾ãŸVolcano-likeãªã©çŸ¥ã‚‰ãªã„æ¦‚å¿µã‚‚ç™»å ´ã—ãŸã€‚ææ¡ˆå†…å®¹ã¨ã—ã¦ã¯ç¾ä»£ã®DWHãŒæ¡ç”¨ã—ã¦ã„ã‚‹ã‚‚ã®ã ã£ãŸã€‚è«–æ–‡å¤–ã®æ„Ÿæƒ³ä»Šå›æœ¬æ–‡ã‚’èª­ã‚€æ™‚é–“ã‚’å¤§å¹…ã«çŸ­ãã—ã¦ã¿ãŸãŒã€ãã‚Œã«ã¨ã‚‚ãªã„ç†è§£åº¦ã‚‚ä½ä¸‹ã—ãŸæ°—ãŒã™ã‚‹ã€‚ã‚„ã£ã±ã‚Š30åˆ†ä»¥ä¸Šã§èª­ã‚€ã®ãŒã‚ˆã•ãã†ã€‚]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Golang ã®Echo ã§Middlewareã‚’ä½¿ã£ã¦Prometheus Exporter ã‚’å®Ÿè£…ã™ã‚‹]]></title>
            <link>https://syu-m-5151.hatenablog.com/entry/2023/04/17/100001</link>
            <guid>https://syu-m-5151.hatenablog.com/entry/2023/04/17/100001</guid>
            <pubDate>Mon, 17 Apr 2023 01:00:01 GMT</pubDate>
            <content:encoded><![CDATA[ã¯ã˜ã‚ã«ã‚‚ã—ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«å®Ÿè£…ã§ãã‚‹ãªã‚‰ãã‚ŒãŒè‰¯ã„ã§ã™ã€‚ç‹¬è‡ªã«å®Ÿè£…ãªã©ã›ãšã«ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«ã¦500 Internal Server ErrorãŒå¤šç™ºã—ã¦ã„ã‚Œã°ã‚¢ãƒ©ãƒ¼ãƒˆã‚’ã™ã‚Œã°è‰¯ã„ã®ã§...ã€‚ã“ã¡ã‚‰ã®ç¶šç·¨ã«ãªã‚Šã¾ã™ã€‚syu-m-5151.hatenablog.comæœ¬ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã§ã¯ã€Golangã§Echoãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’ä½¿ç”¨ã—ã€Prometheus Exporterã‚’Middlewareã¨ã—ã¦å®Ÿè£…ã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚Prometheus Middlewareã¯ã€è‡ªå‹•ã§Metrics ã‚’ç”Ÿæˆã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–ã‚„å•é¡Œè§£æãŒå®¹æ˜“ã«ãªã‚Šã¾ã™ã€‚åˆ©ç”¨ã—ã¦ã„ã‚‹ã‚³ãƒ¼ãƒ‰ã¯ã“ã¡ã‚‰github.comã¯ã˜ã‚ã«ã‚³ãƒ¼ãƒ‰ã‚’è§£èª¬ã™ã‚‹ã‚“ã˜ã‚ƒã„varinitmeasureExternalAccessunstableEndpointMiddlewareã‚’é©ç”¨Prometheus Middlewareã‚’é©ç”¨Echoã®Middlewareã«ã¤ã„ã¦Echo Echo Middleware ã®ç‰¹å¾´å†ã³ã€Docker Compose ã§ã®å®Ÿè¡Œã™ã‚‹ã‚“ã˜ã‚ƒã‚ãŒã„è¦‹ã‚ŒãŸãã‰ãŠãŠãŠãŠã•ã„ã”ã«ã‚³ãƒ¼ãƒ‰ã‚’è§£èª¬ã™ã‚‹ã‚“ã˜ã‚ƒã„ã‚·ãƒ³ãƒ—ãƒ«ã ã‘ã©è§£èª¬ã‚’ã—ã¾ã™ã€‚ç’°å¢ƒæ§‹ç¯‰ãªã©ã¯å‰å›ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã«ä»»ã›ã¾ã™ã€‚Echoãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’ä½¿ã£ã¦Golangã§ã‚·ãƒ³ãƒ—ãƒ«ãªWebã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã—ã€Prometheus Exporterã‚’ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã¨ã—ã¦å®Ÿè£…ã™ã‚‹ä¾‹ã§ã™ã€‚package mainimport (    "math/rand"    "net/http"    "time"    "github.com/labstack/echo-contrib/prometheus"    "github.com/labstack/echo/v4"    "github.com/labstack/echo/v4/middleware"    prom "github.com/prometheus/client_golang/prometheus")// Prometheus ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’å®šç¾©ã—ã¦ã„ã¾ã™ã€‚// ã“ã‚Œã‚‰ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã¯ã€3-shake.com ã¸ã®å¤–éƒ¨ã‚¢ã‚¯ã‚»ã‚¹ã®æƒ…å ±ã‚’åé›†ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚var (    externalAccessDuration = prom.NewHistogram(        prom.HistogramOpts{            Name:    "external_access_duration_seconds",            Help:    "Duration of external access to 3-shake.com",            Buckets: prom.DefBuckets,        },    )    lastExternalAccessStatusCode = prom.NewGauge(        prom.GaugeOpts{            Name: "last_external_access_status_code",            Help: "Last status code of external access to 3-shake.com",        },    ))// init é–¢æ•°å†…ã§ã€ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ Prometheus ã«ç™»éŒ²ã—ã¦ã„ã¾ã™ã€‚func init() {    prom.MustRegister(externalAccessDuration)    prom.MustRegister(lastExternalAccessStatusCode)}// 3-shake.com ã®å¤–éƒ¨ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨ˆæ¸¬ã™ã‚‹ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã‚’ä½œæˆã—ã¾ã™ã€‚func measureExternalAccess(next echo.HandlerFunc) echo.HandlerFunc {    return func(c echo.Context) error {        // HTTP ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ä½œæˆã—ã€ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã‚’ 10 ç§’ã«è¨­å®šã—ã¾ã™ã€‚        client := &http.Client{Timeout: 10 * time.Second}        // ç¾åœ¨ã®æ™‚åˆ»ã‚’å–å¾—ã—ã€ã‚¢ã‚¯ã‚»ã‚¹é–‹å§‹æ™‚é–“ã¨ã—ã¦ä¿æŒã—ã¾ã™ã€‚        startTime := time.Now()        // 3-shake.com ã«å¯¾ã—ã¦ HTTP GET ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã—ã¾ã™ã€‚        resp, err := client.Get("https://3-shake.com")        // ã‚¢ã‚¯ã‚»ã‚¹é–‹å§‹æ™‚é–“ã‹ã‚‰ç¾åœ¨ã®æ™‚åˆ»ã¾ã§ã®çµŒéæ™‚é–“ã‚’è¨ˆç®—ã—ã€duration ã«æ ¼ç´ã—ã¾ã™ã€‚        duration := time.Since(startTime)        // ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãªã„å ´åˆï¼ˆãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒæˆåŠŸã—ãŸå ´åˆï¼‰        if err == nil {            // ã‚¢ã‚¯ã‚»ã‚¹æ™‚é–“ï¼ˆdurationï¼‰ã‚’ãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã«è¿½åŠ ã—ã¾ã™ã€‚            externalAccessDuration.Observe(duration.Seconds())            // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ã‚²ãƒ¼ã‚¸ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã«è¨­å®šã—ã¾ã™ã€‚            lastExternalAccessStatusCode.Set(float64(resp.StatusCode))            // ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ãƒœãƒ‡ã‚£ã‚’é–‰ã˜ã¾ã™ã€‚            resp.Body.Close()        }        // æ¬¡ã®ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã¾ãŸã¯ãƒãƒ³ãƒ‰ãƒ©é–¢æ•°ã«å‡¦ç†ã‚’ç§»ã—ã¾ã™ã€‚        return next(c)    }}func unstableEndpoint(c echo.Context) error {    // 0 ã‹ã‚‰ 4 ã¾ã§ã®ãƒ©ãƒ³ãƒ€ãƒ ãªæ•´æ•°ã‚’ç”Ÿæˆã—ã¾ã™ã€‚    randomNumber := rand.Intn(5)    // ç”Ÿæˆã•ã‚ŒãŸæ•´æ•°ãŒ 4 ã®å ´åˆã€HTTP ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ 500 ã‚’è¿”ã—ã¾ã™ã€‚    if randomNumber == 4 {        return c.String(http.StatusInternalServerError, "Something went wrong!")    }    // ãã‚Œä»¥å¤–ã®å ´åˆã€HTTP ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ 200 ã‚’è¿”ã—ã¾ã™ã€‚    return c.String(http.StatusOK, "Success!")}func main() {    e := echo.New()    // ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã®è¨­å®š    e.Use(middleware.Logger())    e.Use(middleware.Recover())    // Prometheus ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã‚’æœ‰åŠ¹ã«ã—ã¾ã™ã€‚    p := prometheus.NewPrometheus("echo", nil)    p.Use(e)    // 3-shake.com ã¸ã®å¤–éƒ¨ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨ˆæ¸¬ã™ã‚‹ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã‚’è¿½åŠ ã—ã¾ã™ã€‚    e.Use(measureExternalAccess)    // ãƒ«ãƒ¼ãƒˆã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’è¨­å®šã—ã¾ã™ã€‚    e.GET("/", func(c echo.Context) error {        return c.String(http.StatusOK, "Hello, World!")    })    // /unstable ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’è¨­å®šã—ã¾ã™ã€‚    // 20% ã®ç¢ºç‡ã§ HTTP ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ 500 ã‚’è¿”ã—ã¾ã™ã€‚    e.GET("/unstable", unstableEndpoint)    // ã‚µãƒ¼ãƒãƒ¼ã‚’é–‹å§‹ã—ã¾ã™ã€‚    e.Start(":2121")}varvarã§3-shake.com ã¸ã®å¤–éƒ¨ã‚¢ã‚¯ã‚»ã‚¹ã®æƒ…å ±ã‚’åé›†ã™ã‚‹ãŸã‚ã® Prometheus ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’å®šç¾©ã—ã¦ã„ãã¾ã™ã€‚var (    externalAccessDuration = prom.NewHistogram(        prom.HistogramOpts{            Name:    "external_access_duration_seconds",            Help:    "Duration of external access to 3-shake.com",            Buckets: prom.DefBuckets,        },    )    lastExternalAccessStatusCode = prom.NewGauge(        prom.GaugeOpts{            Name: "last_external_access_status_code",            Help: "Last status code of external access to 3-shake.com",        },    ))echo.labstack.cominitinit é–¢æ•°ã§ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ Prometheus ã«ç™»éŒ²ã—ã¾ã™ã€‚func init() {    prom.MustRegister(externalAccessDuration)    prom.MustRegister(lastExternalAccessStatusCode)}measureExternalAccessmeasureExternalAccessé–¢æ•°ã§3-shake.com ã¸ã®å¤–éƒ¨ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨ˆæ¸¬ã™ã‚‹ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã‚’å®šç¾©ã—ã¾ã™ã€‚ã“ã¡ã‚‰ã®æ–¹ãŒEcho Likeãªå®šç¾©ã®ä»•æ–¹ã ã¨æ€ã†ã®ã§å¥½ãã§ã™ã€‚Echo ã®ã‚«ã‚¹ã‚¿ãƒ ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã§ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒå‡¦ç†ã•ã‚Œã‚‹å‰ã« 3-shake.com ã¸ã®å¤–éƒ¨ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨ˆæ¸¬ã™ã‚‹å½¹å‰²ã‚’æŒã£ã¦ã„ã¾ã™ã€‚func measureExternalAccess(next echo.HandlerFunc) echo.HandlerFunc {    return func(c echo.Context) error {        // HTTP ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ä½œæˆã—ã€ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã‚’ 10 ç§’ã«è¨­å®šã—ã¾ã™ã€‚        client := &http.Client{Timeout: 10 * time.Second}        // ç¾åœ¨ã®æ™‚åˆ»ã‚’å–å¾—ã—ã€ã‚¢ã‚¯ã‚»ã‚¹é–‹å§‹æ™‚é–“ã¨ã—ã¦ä¿æŒã—ã¾ã™ã€‚        startTime := time.Now()        // 3-shake.com ã«å¯¾ã—ã¦ HTTP GET ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã—ã¾ã™ã€‚        resp, err := client.Get("https://3-shake.com")        // ã‚¢ã‚¯ã‚»ã‚¹é–‹å§‹æ™‚é–“ã‹ã‚‰ç¾åœ¨ã®æ™‚åˆ»ã¾ã§ã®çµŒéæ™‚é–“ã‚’è¨ˆç®—ã—ã€duration ã«æ ¼ç´ã—ã¾ã™ã€‚        duration := time.Since(startTime)        // ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãªã„å ´åˆï¼ˆãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒæˆåŠŸã—ãŸå ´åˆï¼‰        if err == nil {            // ã‚¢ã‚¯ã‚»ã‚¹æ™‚é–“ï¼ˆdurationï¼‰ã‚’ãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã«è¿½åŠ ã—ã¾ã™ã€‚            externalAccessDuration.Observe(duration.Seconds())            // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ã‚²ãƒ¼ã‚¸ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã«è¨­å®šã—ã¾ã™ã€‚            lastExternalAccessStatusCode.Set(float64(resp.StatusCode))            // ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ãƒœãƒ‡ã‚£ã‚’é–‰ã˜ã¾ã™ã€‚            resp.Body.Close()        }        // æ¬¡ã®ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã¾ãŸã¯ãƒãƒ³ãƒ‰ãƒ©é–¢æ•°ã«å‡¦ç†ã‚’ç§»ã—ã¾ã™ã€‚        return next(c)    }}unstableEndpointã¡ã‚ƒã‚“ã¨ã€ãƒ¡ãƒˆãƒªã‚¯ã‚¹å€¤ãŒå–å¾—ã§ãã¦ã„ã‚‹ã‹ç¢ºèªã—ãŸã„ã®ã§unstableEndpointã¨ã„ã†ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’è¿½åŠ ã—ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ã†ã¡ç´„ 5 å›ã« 1 å›å¤±æ•—ã™ã‚‹ã‚ˆã†ã«å®Ÿè£…ã—ã¾ã—ãŸã€‚ã“ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¯ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒæˆåŠŸã—ãŸå ´åˆã«ã¯ HTTP ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ 200 ã‚’è¿”ã—ã€å¤±æ•—ã—ãŸå ´åˆã«ã¯ HTTP ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ 500 ã‚’è¿”ã—ã¾ã™ã€‚func unstableEndpoint(c echo.Context) error {    // 0 ã‹ã‚‰ 4 ã¾ã§ã®ãƒ©ãƒ³ãƒ€ãƒ ãªæ•´æ•°ã‚’ç”Ÿæˆã—ã¾ã™ã€‚    randomNumber := rand.Intn(5)    // ç”Ÿæˆã•ã‚ŒãŸæ•´æ•°ãŒ 4 ã®å ´åˆã€HTTP ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ 500 ã‚’è¿”ã—ã¾ã™ã€‚    if randomNumber == 4 {        return c.String(http.StatusInternalServerError, "Something went wrong!")    }    // ãã‚Œä»¥å¤–ã®å ´åˆã€HTTP ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ 200 ã‚’è¿”ã—ã¾ã™ã€‚    return c.String(http.StatusOK, "Success!")}curl ã—ã¦ãã‚‹ãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼(fish)ã‚‚ç”¨æ„ã—ã¾ã—ãŸã®ã§æ€ã†å­˜åˆ†curl ã—ã¦ãã ã•ã„ã€‚for i in (seq 1 50); curl http://localhost:2121/unstable; echo ""; endMiddlewareã‚’é©ç”¨å¯‚ã—ã„ã®ã§Prometheus ä»¥å¤–ã®Middlewareã‚’Echoã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«é©ç”¨ã—ã¾ã—ãŸã€‚middleware.Logger() : ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ãƒ­ã‚°ã‚’å‡ºåŠ›ã™ã‚‹Middlewaremiddleware.Recover() : ãƒ‘ãƒ‹ãƒƒã‚¯ã‚’å›å¾©ã—ã¦ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã—ãªã„ã‚ˆã†ã«ã™ã‚‹Middleware   e.Use(middleware.Logger())    e.Use(middleware.Recover())Prometheus Middlewareã‚’é©ç”¨ã“ã‚Œã ã‘ãªã‚“ã§ã™ã€‚Echoç”¨ã®æ–°ã—ã„Prometheus Middlewareã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆã—ã¾ã™ã€‚ä½œæˆã—ãŸPrometheus Middlewareã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’Echoã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«é©ç”¨ã—ã¾ã™ã€‚ // PrometheusãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã‚’é©ç”¨ã™ã‚‹    p := prometheus.NewPrometheus("echo", nil)    p.Use(e)Echoã®Middlewareã«ã¤ã„ã¦Middlewareã¯ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¨ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®å‡¦ç†ã®å‰å¾Œã«ã‚«ã‚¹ã‚¿ãƒ ãƒ­ã‚¸ãƒƒã‚¯ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã®ä»•çµ„ã¿ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚Echoã®Middlewareã¯ã€ã‚³ãƒ¼ãƒ‰ã®å†åˆ©ç”¨æ€§ã€å¯èª­æ€§ã€ãã—ã¦æ©Ÿèƒ½ã®åˆ†é›¢ã‚’å‘ä¸Šã•ã›ã‚‹ãŸã‚ã«å½¹ç«‹ã¡ã¾ã™ã€‚>Logger: Request    Logger->>Middleware1: Processed Request    Middleware1->>Recovery: Processed Request    Recovery->>Prometheus: Processed Request    Prometheus->>CORS: Processed Request    CORS->>Handler: Processed Request    Handler->>CORS: Response    CORS->>Prometheus: Processed Response    Prometheus->>Recovery: Processed Response    Recovery->>Middleware1: Processed Response    Middleware1->>Logger: Processed Response    Logger->>Client: Processed Responsemermaid.initialize({startOnLoad: true});echo.labstack.comEcho Echo Middleware ã®ç‰¹å¾´Middlewareã¯ã€è¤‡æ•°ã®Middlewareé–¢æ•°ã‚’çµ„ã¿åˆã‚ã›ã¦å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€æ©Ÿèƒ½ã‚’çµ„ã¿åˆã‚ã›ã¦ã‚«ã‚¹ã‚¿ãƒ å‡¦ç†ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’æ§‹ç¯‰ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã‚Œã‚‰ã¯ç™»éŒ²ã•ã‚ŒãŸé †åºã§å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€å‡¦ç†ã®æµã‚Œã‚’æ˜ç¢ºã«ã—ã€ç°¡å˜ã«åˆ¶å¾¡ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ã¾ãŸã€Echoã§ã¯ã€ã“ã‚Œã‚‰ã‚’ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«é©ç”¨ã™ã‚‹ã“ã¨ã‚‚ã€ç‰¹å®šã®ãƒ«ãƒ¼ãƒˆã«é©ç”¨ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã¾ãŸã¯ç‰¹å®šã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«å¯¾ã—ã¦ã‚«ã‚¹ã‚¿ãƒ å‡¦ç†ã‚’é©ç”¨ã§ãã¾ã™ã€‚Echoã¯ã€ã„ãã¤ã‹ã®çµ„ã¿è¾¼ã¿ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã‚’æä¾›ã—ã¦ã„ã¾ã™ãŒç‹¬è‡ªã®ã‚«ã‚¹ã‚¿ãƒ ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã‚’ä½œæˆã—ã¦ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«é©ç”¨ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚e := echo.New()e.Use(middleware.Logger()) # ç™»éŒ²ã•ã‚ŒãŸé †åºã§å®Ÿè¡Œã•ã‚Œã‚‹ãe.GET("/",getHallo,middleware.Recover()) # e.GET("/", <Handler>, <Middleware...>) ã§ç‰¹å®šã®ãƒ«ãƒ¼ãƒˆã«ã ã‘Middlewareã‚’ç™»éŒ²ã§ãã‚‹e.Use(LoggingMiddleware) # ç‹¬è‡ªã§å®Ÿè£…ã™ã‚‹ã‚«ã‚¹ã‚¿ãƒ ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢echo.labstack.comå†ã³ã€Docker Compose ã§ã®å®Ÿè¡Œã™ã‚‹ã‚“ã˜ã‚ƒã‚ãŒã„å®Œå…¨ã«åŒã˜ã“ã¨ã‚„ã£ã¦ã‚‹ã®ã§ã“ã¡ã‚‰ã‚’å‚è€ƒã«ã—ã¦ãã ã•ã„syu-m-5151.hatenablog.comè¦‹ã‚ŒãŸãã‰ãŠãŠãŠãŠhttp://localhost:2121/metrics ã®çµæœã‚‚ã“ã¡ã‚‰ã«è¨˜è¼‰ã—ã¦ãŠãã¾ã™github.comGolang ã®Echo ã§Middlewareã‚’ä½¿ã£ã¦ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®Prometheus Exporter ã‚’å®Ÿè£…ã™ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚ã‚¢ãƒ©ãƒ¼ãƒˆã®è¨­å®šæ–¹æ³•ã«ã¤ã„ã¦ã¯ä»–ã®ãƒ–ãƒ­ã‚°ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚ã•ã„ã”ã«ä»¥ä¸Šã§ã€Echo ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’ä½¿ã£ã¦ã€Prometheus ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’è¿½åŠ ã—ã€ã•ã‚‰ã«ä¸å®‰å®šãªã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ä½œæˆã™ã‚‹æ–¹æ³•ã‚’è§£èª¬ã—ã¾ã—ãŸã€‚ã“ã®çŸ¥è­˜ã‚’æ´»ã‹ã—ã¦ã€ã¿ãªã•ã‚“ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’å–å¾—ã™ã‚‹æ©Ÿèƒ½ã‚’è¿½åŠ ã—ã¦ã€å¯è¦³æ¸¬æ€§ã‚’å‘ä¸Šã•ã›ã¾ã—ã‚‡ã†ï¼å…¨ç„¶ã€é–¢ä¿‚ãªã„ã‘ã©ç¿»è¨³ã«æºã‚ã£ã¦ã‚³ãƒ³ãƒ†ãƒŠã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®ãƒ–ãƒ©ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹æ„ŸãŒå¤šå°‘è–„ã¾ã‚‹ã®ã§ã¿ã‚“ãªèª­ã‚“ã§ãã‚Œ...ã‚³ãƒ³ãƒ†ãƒŠã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã€€ã‚³ãƒ³ãƒ†ãƒŠåŒ–ã•ã‚ŒãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä¿è­·ã™ã‚‹è¦ç´ æŠ€è¡“ä½œè€…:Liz Riceã‚¤ãƒ³ãƒ—ãƒ¬ã‚¹Amazon]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Golang ã®Echo ã§ Prometheus Exporter ã‚’å®Ÿè£…ã™ã‚‹]]></title>
            <link>https://syu-m-5151.hatenablog.com/entry/2023/04/16/132450</link>
            <guid>https://syu-m-5151.hatenablog.com/entry/2023/04/16/132450</guid>
            <pubDate>Sun, 16 Apr 2023 04:24:50 GMT</pubDate>
            <content:encoded><![CDATA[ã¯ã˜ã‚ã«Prometheus ã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®æ§‹ç¯‰ã‚’ã—ã¦ã„ã‚‹ã¨ã©ã†ã—ã¦ã‚‚ã“ã®å€¤ãŒå–ã‚ŠãŸã„ã®ã«... ã¨æ€ã†ã“ã¨ãŒå¤šã€…ã‚ã‚‹ã€‚Pushgateway ã‚‚é¸æŠè‚¢ã¨ã—ã¦ä¸Šã’ã‚‰ã‚Œã‚‹ãŒä»Šå›ã¯é¸æŠè‚¢ã‚’å¢—ã‚„ã—ã¦ã»ã—ã„ã¨ã„ã†æ„å‘³ã§ã‚‚Exporterã®å®Ÿè£…æ–¹æ³•ã«ã¤ã„ã¦æ¤œè¨ã—ã¦ã„ãã¾ã™ã€‚Exporterã¯Prometheusã®pull ãƒ¢ãƒ‡ãƒ«ã«é©åˆã—ã€ç›£è¦–å¯¾è±¡ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã¨ä¸€è²«æ€§ãŒã‚ã‚Šã€ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã¨è‡ªå‹•æ¤œå‡ºã®åˆ©ç‚¹ã‚’äº«å—ã§ãã‚‹ãŸã‚ã€Pushgatewayã‚ˆã‚Šã‚‚æ¨å¥¨ã•ã‚Œã‚‹æ–¹æ³•ã§ã™ã€‚ãŸã ã—ã€ç‰¹å®šã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ï¼ˆã‚µãƒ¼ãƒ“ã‚¹ãƒ¬ãƒ™ãƒ«ã®ãƒãƒƒãƒã‚¸ãƒ§ãƒ–ãªã©ï¼‰ã§ã¯ã€Pushgatewayã®ä½¿ç”¨ãŒé©åˆ‡ãªå ´åˆã‚‚ã‚ã‚Šã¾ã™ã€‚Pushgatewayã‚’ä½¿ã†éš›ã«ã¯ä»¥ä¸‹ã®å•é¡Œç‚¹ãŒã‚ã‚‹ã®ã§æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚è¤‡æ•°ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’1ã¤ã®Pushgatewayã§ç›£è¦–ã™ã‚‹ã¨ã€å˜ä¸€éšœå®³ç‚¹ã¨ãƒœãƒˆãƒ«ãƒãƒƒã‚¯ãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã€‚Prometheusã®è‡ªå‹•ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ãŒåˆ©ç”¨ã§ããªããªã‚‹ã€‚Pushgatewayã¯ä¸€åº¦ãƒ—ãƒƒã‚·ãƒ¥ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã‚’å¿˜ã‚Œãšã€æ‰‹å‹•ã§APIã‚’é€šã˜ã¦å‰Šé™¤ã—ãªã„é™ã‚Šæ°¸ä¹…ã«Prometheusã§å…¬é–‹ã•ã‚Œã¦ã—ã¾ã†ã€‚Exporter ã®å®Ÿè£…ã¨é‹ç”¨ã¯ãã“ãã“æ‰‹é–“ã«ãªã‚‹ã®ã§æœ€é©ãªæ–¹æ³•ã‚’é¸ã‚“ã§ã»ã—ã„ã§ã™ã€‚ã“ã®è¾ºã¯Cloudã‚’åˆ©ç”¨ã—ã¦ã‚‚åŒã˜ã‚ˆã†ãªå•é¡ŒãŒã‚ã‚‹ã®ã§æ³¨æ„ã—ãªãŒã‚‰ã‚„ã£ã¦ã„ãã¾ã—ã‚‡ã†ã€‚ã¯ã˜ã‚ã«Exporterã¨ã¯Prometheusã®å…¬å¼ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚„ã£ã¦ã„ããï¼ãŠã‚‰ï¼ç’°å¢ƒæ§‹ç¯‰å®Ÿè£…ã«ã¤ã„ã¦ã‚³ãƒ¼ãƒ‰ã‚’è§£èª¬ã™ã‚‹ã‚“ã˜ã‚ƒã„Prometheusã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’å®šç¾©inité–¢æ•°registerMetricsé–¢æ•°updateMetricsé–¢æ•°prometheusMiddlewareé–¢æ•°measureExternalAccessé–¢æ•°var é…ä¸‹ã£ã¦ã“ã¨ã‰ãŠãŠãŠhttpRequestsTotalhttpRequestDurationhttpRequestSizehttpResponseSizehttpResponseTimeexternalAccessDurationDocker Compose ã§ã®å®Ÿè¡Œã™ã‚‹ã‚“ã˜ã‚ƒã‚ãŒã„prometheus.ymldocker-compose.ymlDockerfiledocker compose ã®å®Ÿè¡Œã•ã„ã”ã«ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã¯ã“ã¡ã‚‰ã§ã™ã€‚ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰è‡ªä½“ã¯é›‘å¤šãªä½œæ¥­ãƒªãƒã‚¸ãƒˆãƒªã«ãŠã„ã¦ã‚ã‚‹ã®ã§ã”æ³¨æ„ãã ã•ã„ã€‚ã¾ãŸã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³è‡ªä½“ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’ç¢ºèªã™ã‚‹ã®ã«Echo ã®ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã›ã‚“ã€‚è‡ªèº«ã®åˆ©ç”¨ã—ã¦ã„ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ¼ã«Prometheus ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’æä¾›ã™ã‚‹æ©Ÿèƒ½ãŒãªã„ã‹èª¿ã¹ã¦ãŠãã¾ã—ã‚‡ã†ã€‚gRPCã®Go Server ã«ã‚‚åŒæ§˜ã®æ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ã€‚ã‚ã¨ã€å¤–éƒ¨ã®ãƒªã‚½ãƒ¼ã‚¹ãŒç¢ºèªã—ãŸã„ã ã‘ãªã‚‰Blackbox exporterã¨ã„ã†é¸æŠè‚¢ã‚‚ã‚ã‚Šã¾ã™ã€‚github.comExporterã¨ã¯Exporterã¯ã€PrometheusãŒãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’åé›†ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã™ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ã™ã€‚Exporterã¯ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚„ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ã‹ã‚‰ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’åé›†ã—ã€PrometheusãŒç†è§£ã§ãã‚‹å½¢å¼ã«å¤‰æ›ã—ã¦æä¾›ã—ã¾ã™ã€‚å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§æä¾›ã•ã‚Œã¦ã„ã‚‹Exporterä¸€è¦§ã¯ã€ã“ã¡ã‚‰ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚Prometheusã®å…¬å¼ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªPrometheusã¯ã€ã„ãã¤ã‹ã®è¨€èªç”¨ã®å…¬å¼ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’æä¾›ã—ã¦ãŠã‚Šã€ã“ã‚Œã‚’ä½¿ç”¨ã—ã¦Exporterã‚’å®Ÿè£…ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä»Šå›ã¯Goã§å®Ÿè£…ã—ã¦ã„ãã®ã“ã¡ã‚‰ãŒå‚è€ƒã«ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚ã‚„ã£ã¦ã„ããï¼ãŠã‚‰ï¼ã‚„ã£ã¦ã„ãã¾ã™ç’°å¢ƒæ§‹ç¯‰# Go ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½œæˆã™ã‚‹ã€‚å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ¼ã¯ã®ã¡ã»ã©`go mod tidy` ã§æŒã£ã¦ãã‚‹ã€‚go mod init prometheus-go-exporterå®Ÿè£…ã«ã¤ã„ã¦ä»¥ä¸‹ã‚’main.go ã«é…ç½®ã—ã¦å®Ÿè¡Œ(go run main.go)ã—ã¦ãã ã•ã„ã€‚ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã¯Echoã‚’åˆ©ç”¨ã—ãŸWebã‚µãƒ¼ãƒãƒ¼ã«Prometheusã®Exporterã‚’å®Ÿè£…ã—ã€3-shake.comã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨ˆæ¸¬ã—ã¦ã„ã¾ã™ã€‚http://localhost:2121/3-shake-status ã‚„ http://localhost:2121/metrics ã§å€¤ã‚’å–å¾—ã§ãã¦ã„ã‚‹ã¨æ€ã„ã¾ã™ã€‚package mainimport (    "fmt"    "net/http"    "time"    "github.com/labstack/echo/v4"    "github.com/labstack/echo/v4/middleware"    "github.com/prometheus/client_golang/prometheus"    "github.com/prometheus/client_golang/prometheus/promhttp")// Prometheusã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’å®šç¾©ã—ã¦ã„ã¾ã™ã€‚// ã“ã‚Œã‚‰ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã¯ã€HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆã®æƒ…å ±ã‚„3-shake.comã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æƒ…å ±ã‚’åé›†ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚var (    httpRequestsTotal = prometheus.NewCounterVec(        prometheus.CounterOpts{            Name: "http_requests_total",            Help: "Number of HTTP requests processed",        },        []string{"method", "path"},    )    httpRequestDuration = prometheus.NewHistogramVec(        prometheus.HistogramOpts{            Name:    "http_request_duration_seconds",            Help:    "Duration of HTTP requests",            Buckets: prometheus.DefBuckets,        },        []string{"method", "path"},    )    httpRequestSize = prometheus.NewHistogramVec(        prometheus.HistogramOpts{            Name:    "http_request_size_bytes",            Help:    "Size of HTTP requests",            Buckets: prometheus.ExponentialBuckets(128, 2, 10),        },        []string{"method", "path"},    )    httpResponseSize = prometheus.NewHistogramVec(        prometheus.HistogramOpts{            Name:    "http_response_size_bytes",            Help:    "Size of HTTP responses",            Buckets: prometheus.ExponentialBuckets(128, 2, 10),        },        []string{"method", "path"},    )    httpResponseTime = prometheus.NewGaugeVec(        prometheus.GaugeOpts{            Name: "http_response_time_seconds",            Help: "Time of the last HTTP response",        },        []string{"method", "path"},    )    externalAccessDuration = prometheus.NewHistogram(        prometheus.HistogramOpts{            Name:    "external_access_duration_seconds",            Help:    "Duration of external access to 3-shake.com",            Buckets: prometheus.DefBuckets,        },    )    lastExternalAccessStatusCode = prometheus.NewGauge(        prometheus.GaugeOpts{            Name: "last_external_access_status_code",            Help: "Last status code of external access to 3-shake.com",        },    ))// inité–¢æ•°å†…ã§ã€ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’Prometheusã«ç™»éŒ²ã—ã¦ã„ã¾ã™ã€‚func init() {    registerMetrics()}// registerMetricsé–¢æ•°ã§ã¯ã€Prometheusã«ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ç™»éŒ²ã—ã¦ã„ã¾ã™ã€‚// ã“ã‚Œã«ã‚ˆã‚Šã€PrometheusãŒãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’åé›†ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚func registerMetrics() {    prometheus.MustRegister(httpRequestsTotal)    prometheus.MustRegister(httpRequestDuration)    prometheus.MustRegister(httpRequestSize)    prometheus.MustRegister(httpResponseSize)    prometheus.MustRegister(httpResponseTime)    prometheus.MustRegister(externalAccessDuration)    prometheus.MustRegister(lastExternalAccessStatusCode)}// updateMetricsé–¢æ•°ã§ã¯ã€å—ä¿¡ã—ãŸHTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’æ›´æ–°ã—ã¦ã„ã¾ã™ã€‚// ã“ã‚Œã«ã‚ˆã‚Šã€å„ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«é–¢ã™ã‚‹æƒ…å ±ãŒåé›†ã•ã‚Œã¾ã™ã€‚func updateMetrics(method, path string, requestSize, responseSize int, duration time.Duration) {    httpRequestsTotal.WithLabelValues(method, path).Inc()    httpRequestDuration.WithLabelValues(method, path).Observe(duration.Seconds())    httpRequestSize.WithLabelValues(method, path).Observe(float64(requestSize))    httpResponseSize.WithLabelValues(method, path).Observe(float64(responseSize))    httpResponseTime.WithLabelValues(method, path).Set(float64(time.Now().Unix()))}// prometheusMiddlewareé–¢æ•°ã§ã¯ã€Echoã®ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã¨ã—ã¦ã€å—ä¿¡ã—ãŸHTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆã«é–¢ã™ã‚‹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’æ›´æ–°ã™ã‚‹æ©Ÿèƒ½ã‚’è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚func prometheusMiddleware(next echo.HandlerFunc) echo.HandlerFunc {    return func(c echo.Context) error {        startTime := time.Now()        err := next(c)        duration := time.Since(startTime)        requestSize := c.Request().ContentLength        responseSize := c.Response().Size        updateMetrics(c.Request().Method, c.Path(), int(requestSize), int(responseSize), duration)        return err    }}// measureExternalAccessé–¢æ•°ã§ã¯ã€3-shake.comã¸ã®å¤–éƒ¨ã‚¢ã‚¯ã‚»ã‚¹ã‚’å®šæœŸçš„ã«è¨ˆæ¸¬ã—ã€ãã®ã‚¢ã‚¯ã‚»ã‚¹æ™‚é–“ã¨ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã«æ ¼ç´ã—ã¦ã„ã¾ã™ã€‚// ã“ã®é–¢æ•°ã¯ãƒ¡ã‚¤ãƒ³é–¢æ•°å†…ã§å‘¼ã³å‡ºã•ã‚Œã€åˆ¥ã®ã‚´ãƒ«ãƒ¼ãƒãƒ³ã§å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚func measureExternalAccess() {    client := &http.Client{Timeout: 10 * time.Second}    go func() {        for {            startTime := time.Now()            resp, err := client.Get("https://3-shake.com")            duration := time.Since(startTime)            if err == nil {                externalAccessDuration.Observe(duration.Seconds())                lastExternalAccessStatusCode.Set(float64(resp.StatusCode))                resp.Body.Close()            }            time.Sleep(1 * time.Minute)        }    }()}func main() {    // Echo instance    e := echo.New()    // Middleware for Prometheus Exporter    e.Use(prometheusMiddleware)    // Enable request logger    e.Use(middleware.Logger())    e.GET("/3-shake-status", func(c echo.Context) error {        status := lastExternalAccessStatusCode.Desc().String()        return c.String(http.StatusOK, fmt.Sprintf("Last 3-shake.com access status: %s", status))    })    // Prometheus Exporter endpoint    e.GET("/metrics", echo.WrapHandler(promhttp.Handler()))    // Measure external access to 3-shake.com    measureExternalAccess()    // Start the server    e.Start(":2121")}ã‚³ãƒ¼ãƒ‰ã‚’è§£èª¬ã™ã‚‹ã‚“ã˜ã‚ƒã„è§£èª¬ã‚’ã—ã¾ã™ã€‚Prometheusã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’å®šç¾©Prometheusã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’å®šç¾©ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã‚‰ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã¯ã€HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆã®æƒ…å ±ã‚„3-shake.comã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æƒ…å ±ã‚’åé›†ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚var (    // ... (çœç•¥)    externalAccessDuration = prometheus.NewHistogram(        prometheus.HistogramOpts{            Name:    "external_access_duration_seconds",            Help:    "Duration of external access to 3-shake.com",            Buckets: prometheus.DefBuckets,        },    )    lastExternalAccessStatusCode = prometheus.NewGauge(        prometheus.GaugeOpts{            Name: "last_external_access_status_code",            Help: "Last status code of external access to 3-shake.com",        },    ))inité–¢æ•°inité–¢æ•°å†…ã§ã€ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’Prometheusã«ç™»éŒ²ã—ã¦ã„ã¾ã™ã€‚func init() {    registerMetrics()}registerMetricsé–¢æ•°registerMetricsé–¢æ•°ã§ã¯ã€Prometheusã«ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ç™»éŒ²ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€PrometheusãŒãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’åé›†ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚func registerMetrics() {    // ... (çœç•¥)    prometheus.MustRegister(externalAccessDuration)    prometheus.MustRegister(lastExternalAccessStatusCode)}updateMetricsé–¢æ•°updateMetricsé–¢æ•°ã§ã¯ã€å—ä¿¡ã—ãŸHTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’æ›´æ–°ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€å„ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«é–¢ã™ã‚‹æƒ…å ±ãŒåé›†ã•ã‚Œã¾ã™ã€‚func updateMetrics(method, path string, requestSize, responseSize int, duration time.Duration) {    // ... (çœç•¥)}prometheusMiddlewareé–¢æ•°prometheusMiddlewareé–¢æ•°ã§ã¯ã€Echoã®ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã¨ã—ã¦ã€å—ä¿¡ã—ãŸHTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆã«é–¢ã™ã‚‹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’æ›´æ–°ã™ã‚‹æ©Ÿèƒ½ã‚’è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚func prometheusMiddleware(next echo.HandlerFunc) echo.HandlerFunc {    // ... (çœç•¥: )}measureExternalAccessé–¢æ•°measureExternalAccessé–¢æ•° ã§ã¯ã€3-shake.comã¸ã®å¤–éƒ¨ã‚¢ã‚¯ã‚»ã‚¹ã‚’å®šæœŸçš„ã«è¨ˆæ¸¬ã—ã€ãã®ã‚¢ã‚¯ã‚»ã‚¹æ™‚é–“ã¨ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã«æ ¼ç´ã—ã¦ã„ã¾ã™ã€‚ã“ã®é–¢æ•°ã¯ãƒ¡ã‚¤ãƒ³é–¢æ•°å†…ã§å‘¼ã³å‡ºã•ã‚Œã€åˆ¥ã®ã‚´ãƒ«ãƒ¼ãƒãƒ³ã§å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚func measureExternalAccess() {    client := &http.Client{Timeout: 10 * time.Second}    go func() {        for {            startTime := time.Now()            resp, err := client.Get("https://3-shake.com")            duration := time.Since(startTime)            if err == nil {                externalAccessDuration.Observe(duration.Seconds())                lastExternalAccessStatusCode.Set(float64(resp.StatusCode))                resp.Body.Close()            }            time.Sleep(1 * time.Minute)        }    }()}var é…ä¸‹ã£ã¦ã“ã¨ã‰ãŠãŠãŠPrometheusã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’å®šç¾©ã—ã¦ã„ã¾ã™ã€‚ã“ã®è¾ºã®å®Ÿè£…ã¯ã‚ˆãæ‚©ã‚€ã¨æ€ã†ã®ã§å…¬å¼ã®å®Ÿè£…ã¨ã‹ãŸãã•ã‚“èª­ã‚€ã¨ä½•ã‚’ã©ã‚Œã«ä½¿ãˆã°ã‚ˆã„ã‹ã®å‹˜æ‰€ãŒæ´ã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚å®Ÿéš›ã«ä½¿ã‚ãªã„ã¨å·®ãŒåˆ†ã‹ã‚‰ãªã„ã®ã§ã¨ã£ã¨ã¨æ‰‹ã‚’å‹•ã‹ã™ã®ãŒã‚ªã‚¹ã‚¹ãƒ¡ã§ã™ã€‚httpRequestsTotalå‡¦ç†ã•ã‚ŒãŸHTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ç·æ•°ã‚’ã‚«ã‚¦ãƒ³ãƒˆã™ã‚‹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã§ã™ã€‚prometheus.NewCounterVecé–¢æ•°ã‚’ä½¿ç”¨ã—ã¦å®šç¾©ã•ã‚Œã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ãƒ¡ã‚½ãƒƒãƒ‰ï¼ˆGETã€POSTãªã©ï¼‰ã¨ãƒ‘ã‚¹ï¼ˆãƒªã‚½ãƒ¼ã‚¹ã¸ã®URLãƒ‘ã‚¹ï¼‰ã«ã‚ˆã£ã¦ãƒ©ãƒ™ãƒ«ä»˜ã‘ã•ã‚Œã¾ã™ã€‚httpRequestDurationHTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆã®å‡¦ç†æ™‚é–“ã‚’è¨˜éŒ²ã™ã‚‹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã§ã™ã€‚prometheus.NewHistogramVecé–¢æ•°ã‚’ä½¿ç”¨ã—ã¦å®šç¾©ã•ã‚Œã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ãƒ¡ã‚½ãƒƒãƒ‰ã¨ãƒ‘ã‚¹ã«ã‚ˆã£ã¦ãƒ©ãƒ™ãƒ«ä»˜ã‘ã•ã‚Œã¾ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒã‚±ãƒƒãƒˆã¯ã€prometheus.DefBucketsã‚’ä½¿ç”¨ã—ã¦è¨­å®šã•ã‚Œã¾ã™ã€‚httpRequestSizeHTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ã‚µã‚¤ã‚ºï¼ˆãƒã‚¤ãƒˆå˜ä½ï¼‰ã‚’è¨˜éŒ²ã™ã‚‹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã§ã™ã€‚prometheus.NewHistogramVecé–¢æ•°ã‚’ä½¿ç”¨ã—ã¦å®šç¾©ã•ã‚Œã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ãƒ¡ã‚½ãƒƒãƒ‰ã¨ãƒ‘ã‚¹ã«ã‚ˆã£ã¦ãƒ©ãƒ™ãƒ«ä»˜ã‘ã•ã‚Œã¾ã™ã€‚ãƒã‚±ãƒƒãƒˆã¯ã€prometheus.ExponentialBucketsé–¢æ•°ã‚’ä½¿ç”¨ã—ã¦è¨­å®šã•ã‚Œã¾ã™ã€‚httpResponseSizeHTTPãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ã‚µã‚¤ã‚ºï¼ˆãƒã‚¤ãƒˆå˜ä½ï¼‰ã‚’è¨˜éŒ²ã™ã‚‹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã§ã™ã€‚prometheus.NewHistogramVecé–¢æ•°ã‚’ä½¿ç”¨ã—ã¦å®šç¾©ã•ã‚Œã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ãƒ¡ã‚½ãƒƒãƒ‰ã¨ãƒ‘ã‚¹ã«ã‚ˆã£ã¦ãƒ©ãƒ™ãƒ«ä»˜ã‘ã•ã‚Œã¾ã™ã€‚ãƒã‚±ãƒƒãƒˆã¯ã€åŒæ§˜ã«prometheus.ExponentialBucketsé–¢æ•°ã‚’ä½¿ç”¨ã—ã¦è¨­å®šã•ã‚Œã¾ã™ã€‚httpResponseTimeHTTPãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®æ™‚é–“ã‚’è¨˜éŒ²ã™ã‚‹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã§ã™ã€‚ã“ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã¯ã€prometheus.NewGaugeVecé–¢æ•°ã‚’ä½¿ç”¨ã—ã¦å®šç¾©ã•ã‚Œã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ãƒ¡ã‚½ãƒƒãƒ‰ã¨ãƒ‘ã‚¹ã«ã‚ˆã£ã¦ãƒ©ãƒ™ãƒ«ä»˜ã‘ã•ã‚Œã¾ã™ã€‚externalAccessDurationã“ã‚Œã¯ã€3-shake.comã¸ã®å¤–éƒ¨ã‚¢ã‚¯ã‚»ã‚¹ã®æŒç¶šæ™‚é–“ã‚’è¨˜éŒ²ã™ã‚‹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã§ã™ã€‚ã“ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã¯ã€prometheus.NewHistogramé–¢æ•°ã‚’ä½¿ç”¨ã—ã¦å®šç¾©ã•ã‚Œã¾ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒã‚±ãƒƒãƒˆã¯ã€prometheus.DefBucketsé–¢æ•°ã‚’ä½¿ç”¨ã—ã¦è¨­å®šã•ã‚Œã¾ã™ã€‚Docker Compose ã§ã®å®Ÿè¡Œã™ã‚‹ã‚“ã˜ã‚ƒã‚ãŒã„prometheus.ymlã¾ãšã€prometheus.ymlã‚’ä½œæˆã—ã¾ã™ã€‚ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯ã€PrometheusãŒã©ã®ã‚ˆã†ã«ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’åé›†ã™ã‚‹ã‹ã«ã¤ã„ã¦ã®è¨­å®šãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚global:  scrape_interval: 15sscrape_configs:  - job_name: 'echo_exporter'    static_configs:      - targets: ['echo_exporter:2121']docker-compose.ymlæ¬¡ã«ã€docker-compose.ymlã‚’ä½œæˆã—ã¾ã™ã€‚ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯ã€Prometheusã¨Golangã®Echoã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã«å¿…è¦ãªã‚³ãƒ³ãƒ†ãƒŠã®è¨­å®šãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚version: '3.8'services:  echo_exporter:    build:       context: .      dockerfile: Dockerfile_exporter    ports:      - "2121:2121"  prometheus:    image: prom/prometheus:latest    volumes:      - ./prometheus.yml:/etc/prometheus/prometheus.yml    command:      - "--config.file=/etc/prometheus/prometheus.yml"    ports:      - "9090:9090"DockerfileDockerfileã‚’ä½œæˆã—ã¦ã€Echoã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã‚³ãƒ³ãƒ†ãƒŠã§å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚åˆ¥ã«å‹•ã‘ã°ã‚ˆã„ã®ã§ãªã‚“ã‹å·¥å¤«ã¨ã‹ã¯ã—ã¦ãªã„ã§ã™ã€‚æœ¬ç•ªã§ã‚„ã‚‹ã¨ãã¯ã†ã¾ããƒãƒ«ãƒã‚¹ãƒ†ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰ã¨ã‹ä½¿ã£ã¦ä¸‹ã•ã„ã€‚# Use the official Golang image as the base imageFROM golang:1.20# Set the working directoryWORKDIR /app# Copy go.mod and go.sum to download dependenciesCOPY go.mod go.sum ./# Download dependenciesRUN go mod download# Copy the source codeCOPY . .# Build the applicationRUN go build -o main .# Expose the port the application will run onEXPOSE 2121# Run the applicationCMD ["./main"]docker compose ã®å®Ÿè¡Œ2023 å¹´ 6 æœˆæœ«ã‹ã‚‰ã€Compose V1 ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œãªããªã‚Šã€ã™ã¹ã¦ã® Docker Desktop ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‹ã‚‰å‰Šé™¤ã•ã‚Œã‚‹ã®ã§æ³¨æ„ã—ã¦ã»ã—ã„ã§ã™ã€‚ã¡ãªã¿ã«compose ãŒdockerã‚³ãƒãƒ³ãƒ‰ã«å…¥ã‚‹ã‚ˆã†ã«ãªã£ãŸã®ã§docker-compose ç‰¹åˆ¥ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã›ãšã¨ã‚‚å®Ÿè¡Œå¯èƒ½ã«ãªã‚Šã¾ã—ãŸã€‚# ãƒ‡ãƒ¼ãƒ¢ãƒ³åŒ–ã—ã¡ã‚ƒã†docker compose up -d Dockerfileã‚’ä½¿ç”¨ã—ã¦echo_exporterã‚µãƒ¼ãƒ“ã‚¹ãŒãƒ“ãƒ«ãƒ‰ã•ã‚Œã€Prometheusã¨Golangã®Echoã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãã‚Œãã‚Œã®ã‚³ãƒ³ãƒ†ãƒŠã§èµ·å‹•ã—ã¾ã™ã€‚Prometheusã¯ã€echo_exporterã‚µãƒ¼ãƒ“ã‚¹ã‹ã‚‰ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’åé›†ã—ã€ãƒãƒ¼ãƒˆ9090ã§ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚last_external_access_status_code ã‚’ç¢ºèªã™ã‚‹ã«ã¯èµ·å‹•ã—ãŸçŠ¶æ…‹ã§ã“ã¡ã‚‰ã‚’å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚ä¸€å›ã€ã‚·ãƒ£ãƒƒãƒˆãƒ€ã‚¦ãƒ³ã—ãŸã®ã§ä»¥ä¸‹ã®ã‚ˆã†ãªã‚°ãƒ©ãƒ•ãŒå‡ºåŠ›ã•ã‚Œã¦ã„ã¾ã™ã­ã€‚ã€‚é•·ããªã£ãŸã®ã§ã“ã‚Œã§çµ‚ã‚ã‚Šã¾ã™ã€‚ã•ã„ã”ã«å®Ÿã¯ Echo ã«ãŠã„ã¦ Prometheus ã¯ã€HTTP ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ãƒ¡ãƒˆãƒªãƒƒã‚¯ã‚’ç”Ÿæˆã™ã‚‹ã“ã¨ãŒã§ãã‚‹ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã‚’æä¾›ã—ã¦ã„ã‚‹ã®ã§åŸºæœ¬çš„ãªéƒ¨åˆ†ã§ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãå¿…è¦ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ã‚‚ã—ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«å®Ÿè£…ã§ãã‚‹ãªã‚‰ãã‚ŒãŒè‰¯ã„ã§ã™ã€‚ç‹¬è‡ªã«å®Ÿè£…ãªã©ã›ãšã«ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«ã¦500 Internal Server ErrorãŒå¤šç™ºã—ã¦ã„ã‚Œã°ã‚¢ãƒ©ãƒ¼ãƒˆã‚’ã™ã‚Œã°è‰¯ã„ã ã‘ãªã®ã§...ã€‚ã‚‚ã—ã€ã‚¤ãƒ³ãƒ•ãƒ©ã®ã‚³ãƒ¼ãƒ‰ãŒã‚¢ãƒ—ãƒªã«çµ„ã¿è¾¼ã‚ãªã„ã‚‚ã—ãã¯ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ã¯é–‹ç™ºå´ã—ã‹è§¦ã‚Œãªã„æ™‚ã«ã¯å”åŠ›ã‚’ä»°ã„ã§ä¸‹ã•ã„ã€‚é–‹ç™ºå´ã¨ã®äººé–“é–¢ä¿‚ã«å•é¡ŒãŒã‚ã£ãŸã‚Šã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¸Šã®èª²é¡ŒãŒã‚ã‚‹å ´åˆã«ã¯åˆ¥ã®æ‰‹æ®µã‚’è€ƒãˆã¾ã—ã‚‡ã†ã€‚package mainimport (    "github.com/labstack/echo/v4"    "github.com/labstack/echo-contrib/prometheus")func main() {    e := echo.New()    // Enable metrics middleware    p := prometheus.NewPrometheus("echo", nil)    p.Use(e)    e.Logger.Fatal(e.Start(":1323"))}ã¨æ›¸ãã ã‘ã§å¤–éƒ¨ãƒªã‚½ãƒ¼ã‚¹ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ä»¥å¤–ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã¯æä¾›ã§ãã¾ã™ã€‚ã¾ãŸã€å¤–éƒ¨ãƒªã‚½ãƒ¼ã‚¹ã«å¯¾ã—ã¦ã‚‚ã„ãã¤ã‹ã®æ§‹é€ ä½“ã‚’æŒã£ã¦ã„ã‚‹ã®ã§ã“ã‚Œã‚‰ã‚‚åŠ¹ç‡çš„ã«æä¾›ã§ãã¾ã™ã€‚echo.labstack.comæœ¬å½“ã«é–¢ä¿‚ãªã„ã‚“ã§ã™ã‘ã©2023å¹´4æœˆ19æ—¥ã«ECã‚µã‚¤ãƒˆæ§‹ç¯‰ãƒ»é‹ç”¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã‚’èª­ã¿è§£ãä¼š ã¨ã„ã†ã®ã‚’ã‚„ã‚‹ã®ã§èˆˆå‘³ã‚ã‚Œã°ï¼owasp-kyushu.connpass.comç¶šç·¨ã®ãƒ–ãƒ­ã‚°ã‚‚æ›¸ã„ã¦ãŠãã¾ã—ãŸã€‚syu-m-5151.hatenablog.comPrometheuså®Ÿè·µã‚¬ã‚¤ãƒ‰: ã‚¯ãƒ©ã‚¦ãƒ‰ãƒã‚¤ãƒ†ã‚£ãƒ–ãªç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ã®æ§‹ç¯‰ä½œè€…:ä»²äº€ æ‹“é¦¬ãƒ†ãƒƒã‚­ãƒ¼ãƒ¡ãƒ‡ã‚£ã‚¢Amazon]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[åˆ—æŒ‡å‘DBMSã«ãŠã‘ã‚‹ãƒ‡ãƒ¼ã‚¿åœ§ç¸®æ‰‹æ³•ã®è«–æ–‡ã‚’èª­ã¿ã¾ã—ãŸ]]></title>
            <link>https://nnaka2992.hatenablog.com/entry/integrating_compresison_and_execution_in_cstore_dbms</link>
            <guid>https://nnaka2992.hatenablog.com/entry/integrating_compresison_and_execution_in_cstore_dbms</guid>
            <pubDate>Sun, 16 Apr 2023 02:58:29 GMT</pubDate>
            <content:encoded><![CDATA[ã“ã®è¨˜äº‹ã®è¶£æ—¨"Integrating Compression and Execution in Column-Oriented Database Systems"ã¨ã„ã†2006å¹´ã«ç™ºè¡¨ã•ã‚ŒãŸãã‚Œã¾ã§è¡ŒæŒ‡å‘DBMSã§åŸ¹ã‚ã‚Œã¦ããŸåœ§ç¸®æ–¹æ³•ã«ã‚ˆã‚‹ã€æ¤œç´¢é«˜é€ŸåŒ–æ‰‹æ³•ã‚’åˆ—æŒ‡å‘DBMSã«é©ç”¨ãƒ»è©•ä¾¡ã—ãŸè«–æ–‡ã‚’èª­ã‚“ã§è¡Œãã¾ã™ã€‚Integrating Compression and Execution in Column-Oriented Database SystemsDaniel J. Abadi, Samuel R. Madden, Miguel C. Ferreiraè‘—è€…ã«ã¤ã„ã¦Daniel J. Abadiã€Samuel R. Maddenã€Miguel C. Ferreiraã®ã‚°ãƒ«ãƒ¼ãƒ—ã€‚ãã‚Œãã‚ŒDBMSã‚„ãƒ‡ãƒ¼ã‚¿åˆ†æã«é–¢é€£ã™ã‚‹æ‰‹æ³•ã‚„ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«ã¤ã„ã¦ç ”ç©¶ã—ã¦ã„ã‚‹ã€‚å•é¡Œæ„è­˜2006å¹´ã”ã‚ã®ç ”ç©¶ã¨ã„ã†ã“ã¨ã‚‚ã‚ã‚ŠC-storeãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ç ”ç©¶ãŒå°‘ãªã‹ã£ãŸæ™‚æœŸã®è«–æ–‡ã€‚æ—¢ã«æ¤œç´¢ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«å¯„ä¸ã™ã‚‹ã“ã¨ãŒã—ã‚‰ã‚Œã¦ã„ãŸR-storeãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®åœ§ç¸®æ‰‹æ³•ã‚’ã€C-storeã¸å¿œç”¨ã‚„è©•ä¾¡ã‚’è¡Œãªã£ãŸã€‚æ‰‹æ³•ææ¡ˆæ‰‹æ³•ã¯ä»¥ä¸‹ã®åœ§ç¸®æŠ€è¡“ã®çµ„ã¿åˆã‚ã›ã‹ã‚‰ãªã‚‹ã€‚Nullåœ§ç¸®è¾æ›¸ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°Run Lengthã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒ“ãƒƒãƒˆãƒ™ã‚¯ã‚¿ãƒ¼ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã§ã€ãã‚Œãã‚Œã®ã‚«ãƒ†ã‚´ãƒªã«å±ã™ã‚‹ã‹ã©ã†ã‹ã‚’ãƒã‚¤ãƒŠãƒªã§è¡¨ç¾ã™ã‚‹åœ§ç¸®æ–¹æ³•Lempel-Zivã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°GZIPã§ã‚‚ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹åœ§ç¸®æ–¹å¼ã€‚ãƒ‡ãƒ¼ã‚¿ã®éé‡è¤‡ãƒ–ãƒ­ãƒƒã‚¯ã‚’è§£æã—ã¦æ—¢å­˜ã®ãƒ‡ãƒ¼ã‚¿ã¯å¯¾å¿œã™ã‚‹ãƒ–ãƒ­ãƒƒã‚¯ã¸ã®ãƒã‚¤ãƒ³ã‚¿ã«ã€ãã‚Œä»¥å¤–ã®ã¿ã‚’æ–°è¦ã«è¿½åŠ ã™ã‚‹ã€‚ææ¡ˆæ‰‹æ³•ã¯åœ§ç¸®æ–¹å¼ãŒå¢—ãˆã¦ã‚‚ã‚¢ã‚¯ã‚»ã‚¹ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ã‚·ãƒ³ãƒ—ãƒ«ã«ç•™ã‚ã‚‹ãŸã‚ã«ã‚¢ã‚¯ã‚»ã‚¹æ–¹æ³•ã‚’APIã¨ã—ã¦éš è”½ã—ãŸã€‚ãã®ãŸã‚ç•°ãªã‚‹ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚‚åŒä¸€ã®APIã§ä¿å­˜ã§ãã€åŒä¸€ã®APIã§ã‚‚å–å¾—ã§ãã‚‹ã€‚å½“ç„¶ãªãŒã‚‰ä¸€ã¤ã®ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã§å…¨ã¦ã®ãƒ‡ãƒ¼ã‚¿ã«å¯¾å¿œã™ã‚‹ã“ã¨ã¯é›£ã—ãã€è«–æ–‡ã§ã¯ä½¿ç”¨ã™ã¹ãåœ§ç¸®ã‚¹ã‚­ãƒ¼ãƒ ã®é¸ã³æ–¹ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ã¾ã¨ã‚ã¦ã„ã‚‹ã€‚Figure10æ„Ÿæƒ³C-storeã«ãŠã‘ã‚‹å¤å…¸çš„ãªåœ§ç¸®æ‰‹æ³•ãŒã¾ã¨ã¾ã£ãŸè«–æ–‡ã ã£ãŸã€‚è¿‘ä»£DWHã‚’åˆ©ç”¨ã™ã‚‹å´ã§ã¯æ„è­˜ã™ã‚‹ã“ã¨ãŒå°‘ãªã„éƒ¨åˆ†ã ã£ãŸãŸã‚ã‚ãŸã‚‰ã—ã„çŸ¥è­˜ã‚‚å¤šã‹ã£ãŸã€‚ä½œæ¥­æ™‚é–“read26:5026:50author33:306:40summary58:2024:50]]></content:encoded>
        </item>
    </channel>
</rss>